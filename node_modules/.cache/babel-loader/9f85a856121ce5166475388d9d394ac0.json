{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\PumpStationInspection\\components\\InspectionSubmit.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\PumpStationInspection\\components\\InspectionSubmit.vue","mtime":1705912915817},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBJbnNwZWN0aW9uU3VibWl0Q2FyZCBmcm9tICcuL0luc3BlY3Rpb25TdWJtaXRDYXJkLnZ1ZSc7CmltcG9ydCB7IHBhdHJvbEVkaXQsIHVwbG9hZFRyYWNrTGlzdCB9IGZyb20gJy4uL2FwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBJbnNwZWN0aW9uU3VibWl0Q2FyZAogIH0sCiAgcHJvcHM6IHsKICAgIC8v5beh5qOA54q25oCBKDE65b6F5beh5qOA77yMMjrlt6Hmo4DkuK3vvIwzOuW3suWujOaIkCDvvIw0OuW3sue7iOatoiko5omL5py656uvKQogICAgUGF0cm9sRGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9CiAgICB9LAogICAgbW9kZWxUeXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2xpc3QnCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgUGF0cm9sRGF0YTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5pc0ZpbmlzaENvbmZpZygpOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdWJtaXREYXRhOiBudWxsLAogICAgICBmaXJzdENvbmZpZzogdHJ1ZSwKICAgICAgLy/mmK/lkKbkuLrnrKzkuIDmrKHov5vlhaUKICAgICAgZmluaXNoQ29uZmlnOiBmYWxzZSwKICAgICAgLy/lt6Hmo4DngrnmmK/lkKblt6Hmo4Dlrozmr5UKICAgICAgc3VibWl0U2hvdzogZmFsc2UsCiAgICAgIC8v5o+Q5Lqk5by55qGGCiAgICAgIGRpc2FibGVkOiB0cnVlCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2V0Rmlyc3RDb25maWcoKTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnN0b3BSZXF1ZXN0TG9jYXRpb25zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WGheWuueWPmOWMlgogICAgLy9saXN05YiX6KGo77yMbWFw5Zyw5Zu+CiAgICBtb2RlbFR5cGVDaGFuZ2UodHlwZSkgewogICAgICB0aGlzLiRlbWl0KCdtb2RlbFR5cGVDaGFuZ2UnLCB0eXBlKTsKICAgIH0sCiAgICAvL+WIpOaWreaYr+WQpuS4uuesrOS4gOasoei/m+WFpQogICAgc2V0Rmlyc3RDb25maWcoKSB7CiAgICAgIGxldCB7CiAgICAgICAgZmlyc3RDb25maWcKICAgICAgfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5OwogICAgICBpZiAoZmlyc3RDb25maWcgPT09ICdmYWxzZScpIHsKICAgICAgICB0aGlzLmZpcnN0Q29uZmlnID0gZmFsc2U7CiAgICAgICAgdGhpcy4kZW1pdCgnaXNEaXNhYmxlZCcsIGZhbHNlKTsKICAgICAgICBjb25zb2xlLmxvZygnaXNEaXNhYmxlZCcsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZpcnN0Q29uZmlnID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8v5beh5qOA54K55piv5ZCm5beh5qOA5a6M5q+VCiAgICBpc0ZpbmlzaENvbmZpZygpIHsKICAgICAgdmFyIF90aGlzJFBhdHJvbERhdGE7CiAgICAgIGxldCBjb25maWcgPSAoX3RoaXMkUGF0cm9sRGF0YSA9IHRoaXMuUGF0cm9sRGF0YSkgPT09IG51bGwgfHwgX3RoaXMkUGF0cm9sRGF0YSA9PT0gdm9pZCAwIHx8IChfdGhpcyRQYXRyb2xEYXRhID0gX3RoaXMkUGF0cm9sRGF0YS5wYXRyb2xQb2ludFJlc3VsdExpc3QpID09PSBudWxsIHx8IF90aGlzJFBhdHJvbERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJFBhdHJvbERhdGEuZXZlcnkoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucGF0cm9sU3RhdHVzID09PSAn5bey5behJzsKICAgICAgfSk7CiAgICAgIHRoaXMuZmluaXNoQ29uZmlnID0gY29uZmlnOwogICAgfSwKICAgIC8v57un57ut5beh5qOACiAgICBnb0luc3BlY3Rpb24oKSB7CiAgICAgIHRoaXMuZmlyc3RDb25maWcgPSBmYWxzZTsKICAgICAgdGhpcy4kZW1pdCgnaXNEaXNhYmxlZCcsIGZhbHNlKTsKICAgICAgdGhpcy5yZXF1ZXN0U2luZ2xlTG9jYXRpb24odHJ1ZSk7CiAgICB9LAogICAgLy/lvIDlp4vlt6Hmo4AKICAgIGFzeW5jIHN0YXJ0SW5zcGVjdGlvbih0eXBlKSB7CiAgICAgIGxldCBxdWVyeSA9IHsKICAgICAgICBpZDogdGhpcy4kcm91dGUucXVlcnkudGFza0lkLAogICAgICAgIHBhdHJvbFN0YXR1czogdHlwZSA/IHR5cGUgOiB0aGlzLlBhdHJvbERhdGEgJiYgdGhpcy5QYXRyb2xEYXRhLnBhdHJvbFN0YXR1cywKICAgICAgICBwYXRyb2xTdGFydFRpbWU6IHRoaXMuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyksCiAgICAgICAgcGF0cm9sUG9pbnRSZXN1bHRMaXN0OiB0aGlzLlBhdHJvbERhdGEgJiYgdGhpcy5QYXRyb2xEYXRhLnBhdHJvbFBvaW50UmVzdWx0TGlzdAogICAgICB9OwogICAgICB0aGlzLiRlbWl0KCdpc0Rpc2FibGVkJywgZmFsc2UpOwogICAgICB0aGlzLnJlcXVlc3RTaW5nbGVMb2NhdGlvbih0cnVlKTsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgcGF0cm9sRWRpdChxdWVyeSk7CiAgICAgIHRoaXMuJHBhcmVudC5nZXRQYXRyb2woKTsKICAgICAgdGhpcy5maXJzdENvbmZpZyA9IGZhbHNlOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9wdW1wL2luc3BlY3Rpb24nLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICB0YXNrSWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tJZCwKICAgICAgICAgIGZpcnN0Q29uZmlnOiAnZmFsc2UnCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+aaguWBnOW3oeajgAogICAgc3RvcEluc3BlY3Rpb24oKSB7CiAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICB0aXRsZTogJ+aaguWBnOW3oeajgCcsCiAgICAgICAgbWVzc2FnZTogJ+aaguWBnOW3oeajgOWwhuaPkOS6pOacquaPkOS6pOeahOW3oeajgOeCueWSjOmakOaCo+aVsOaNru+8gScKICAgICAgfSkudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgYXdhaXQgdGhpcy5pc1Vuc3VibWl0dGVkKCk7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJy9wdW1wL2luc3BlY3Rpb25NYW5hZ2UnKTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/nu4jmraLlt6Hmo4AKICAgIGFzeW5jIHRlcm1pbmF0ZWRJbnNwZWN0aW9uKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL3B1bXAvdGVybWluYXRlZC10YXNrP3Rhc2tJZD0ke3RoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tJZH1gKTsKICAgIH0sCiAgICAvL+ajgOafpeaYr+WQpuacieacquaPkOS6pOmhuSzlubbmj5DkuqQKICAgIGFzeW5jIGlzVW5zdWJtaXR0ZWQoKSB7CiAgICAgIHZhciBfdGhpcyRzdWJtaXREYXRhJHBhdHI7CiAgICAgIHRoaXMuc3VibWl0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5QYXRyb2xEYXRhKSk7CiAgICAgIGxldCBzdG9yYWdlSXRlbURhdGFMaXN0ID0gSlNPTi5wYXJzZSh0aGlzLiRzdG9yYWdlLmdldCgncHVtcC1zdG9yYWdlSXRlbURhdGFMaXN0JykpOwogICAgICAoX3RoaXMkc3VibWl0RGF0YSRwYXRyID0gdGhpcy5zdWJtaXREYXRhLnBhdHJvbFBvaW50UmVzdWx0TGlzdCkgPT09IG51bGwgfHwgX3RoaXMkc3VibWl0RGF0YSRwYXRyID09PSB2b2lkIDAgfHwgX3RoaXMkc3VibWl0RGF0YSRwYXRyLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgc3RvcmFnZUl0ZW1EYXRhTGlzdCA9PT0gbnVsbCB8fCBzdG9yYWdlSXRlbURhdGFMaXN0ID09PSB2b2lkIDAgfHwgc3RvcmFnZUl0ZW1EYXRhTGlzdC5mb3JFYWNoKChkYXRhLCBpKSA9PiB7CiAgICAgICAgICBpdGVtLmlkID09PSBkYXRhLmlkID8gdGhpcy5zdWJtaXREYXRhLnBhdHJvbFBvaW50UmVzdWx0TGlzdFtpbmRleF0gPSBzdG9yYWdlSXRlbURhdGFMaXN0W2ldIDogbnVsbDsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuJHN0b3JhZ2UucmVtb3ZlKCdwdW1wLXN0b3JhZ2VJdGVtRGF0YUxpc3QnKTsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgcGF0cm9sRWRpdCh0aGlzLnN1Ym1pdERhdGEpOwogICAgICBjb25zdCBwYXRoID0gYXdhaXQgdXBsb2FkVHJhY2tMaXN0KHRoaXMuJHN0b3JlLnN0YXRlLnB1bXAucHVtcFBhdGgpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFB1bXBQYXRoJywgW10pOwogICAgfSwKICAgIC8v5byA5aeL5beh5qOACiAgICByZXF1ZXN0U2luZ2xlTG9jYXRpb24oaXNGaXJzdCkgewogICAgICBpZiAodHlwZW9mIHl1YW5jaHUgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICB5dWFuY2h1LmxvY2F0aW9uQU1hcC5yZXF1ZXN0U2luZ2xlTG9jYXRpb24oWycxJ10sIHJlcyA9PiB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICBsYXRpdHVkZSwKICAgICAgICAgICAgbG9uZ2l0dWRlCiAgICAgICAgICB9ID0gcmVzOwogICAgICAgICAgbGV0IHBhdGg7CiAgICAgICAgICBpZiAoaXNGaXJzdCkgewogICAgICAgICAgICBwYXRoID0gdGhpcy5QYXRyb2xEYXRhICYmIHRoaXMuUGF0cm9sRGF0YS5wYXRyb2xQb2ludFRyYWNrTGlzdCA/IHRoaXMuUGF0cm9sRGF0YS5wYXRyb2xQb2ludFRyYWNrTGlzdCA6IFtdOwogICAgICAgICAgICBjb25zb2xlLmxvZyhwYXRoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhdGggPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLnB1bXAucHVtcFBhdGgpKTsKICAgICAgICAgIH0KICAgICAgICAgIHBhdGgucHVzaCh7CiAgICAgICAgICAgIGxhdDogbGF0aXR1ZGUsCiAgICAgICAgICAgIGxvbjogbG9uZ2l0dWRlCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UHVtcFBhdGgnLCBwYXRoKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLnB1bXAucHVtcFBhdGgpOwogICAgICAgIH0sIGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyPScsIGVycik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvL+e7k+adn+W3oeajgAogICAgc3RvcFJlcXVlc3RMb2NhdGlvbnMoKSB7CiAgICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgewogICAgICAgIHl1YW5jaHUubG9jYXRpb25BTWFwLnN0b3BSZXF1ZXN0TG9jYXRpb25zKCk7CiAgICAgIH0KICAgIH0sCiAgICAvL+WujOaIkOW3oeajgOaPkOS6pAogICAgc3VibWl0KHR5cGUpIHsKICAgICAgdGhpcy5zdWJtaXREYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLlBhdHJvbERhdGEpKTsKICAgICAgdGhpcy5zdWJtaXREYXRhLnBhdHJvbFN0YXR1cyA9IHR5cGU7CiAgICAgIHRoaXMuc3VibWl0RGF0YS5wYXRyb2xFbmRUaW1lID0gdGhpcy4kZGF5anMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKTsKICAgICAgdGhpcy5zdWJtaXREYXRhLnN1Ym1pdFRpbWUgPSB0aGlzLiRkYXlqcygpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpOwogICAgICB0aGlzLnN1Ym1pdFNob3cgPSB0cnVlOwogICAgfSwKICAgIC8v5Lu75Yqh5o+Q5Lqk56Gu6K6kCiAgICBhc3luYyBvbkNvbmZpcm0oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcGF0cm9sRWRpdCh0aGlzLnN1Ym1pdERhdGEpOwogICAgICAgIHRoaXMuJHBhcmVudC5nZXRQYXRyb2woKTsKICAgICAgICB0aGlzLmZpcnN0Q29uZmlnID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJy9wdW1wL2luc3BlY3Rpb25NYW5hZ2UnKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["InspectionSubmitCard","patrolEdit","uploadTrackList","components","props","PatrolData","type","Object","default","modelType","String","watch","handler","isFinishConfig","deep","immediate","data","submitData","firstConfig","finishConfig","submitShow","disabled","created","setFirstConfig","beforeDestroy","stopRequestLocations","methods","modelTypeChange","$emit","$route","query","console","log","_this$PatrolData","config","patrolPointResultList","every","item","patrolStatus","goInspection","requestSingleLocation","startInspection","id","taskId","patrolStartTime","$dayjs","format","res","$parent","getPatrol","$router","push","path","stopInspection","$dialog","confirm","title","message","then","isUnsubmitted","replace","catch","error","terminatedInspection","_this$submitData$patr","JSON","parse","stringify","storageItemDataList","$storage","get","forEach","index","i","remove","$store","state","pump","pumpPath","commit","isFirst","yuanchu","locationAMap","latitude","longitude","patrolPointTrackList","lat","lon","err","submit","patrolEndTime","submitTime","onConfirm"],"sources":["src/views/PumpStationInspection/components/InspectionSubmit.vue"],"sourcesContent":["<template>\r\n  <div class=\"inspection-submit\">\r\n    <div class=\"inspection-map\">\r\n      <img\r\n        v-if=\"modelType === 'list'\"\r\n        @click=\"modelTypeChange('map')\"\r\n        src=\"@/assets/img/pump/inspection-map.png\"\r\n        alt=\"\"\r\n        class=\"inspection-icon\"\r\n      />\r\n      <img\r\n        v-if=\"modelType === 'map'\"\r\n        @click=\"modelTypeChange('list')\"\r\n        src=\"@/assets/img/pump/inspection-list.png\"\r\n        alt=\"\"\r\n        class=\"inspection-icon\"\r\n      />\r\n    </div>\r\n\r\n    <fm-button\r\n      type=\"success\"\r\n      class=\"inspection-btn inspection-btn-one\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 1\"\r\n      @click=\"startInspection(2)\"\r\n      >开始巡检</fm-button\r\n    >\r\n    <fm-button\r\n      type=\"success\"\r\n      class=\"inspection-btn\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 2 && !firstConfig && finishConfig\"\r\n      @click=\"submit(3)\"\r\n      >完成巡检</fm-button\r\n    >\r\n    <fm-button\r\n      type=\"warning\"\r\n      class=\"inspection-btn\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 2 && !firstConfig && !finishConfig\"\r\n      @click=\"terminatedInspection(4)\"\r\n      >终止巡检</fm-button\r\n    >\r\n    <fm-button\r\n      type=\"primary\"\r\n      class=\"inspection-btn\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 2 && !firstConfig && !finishConfig\"\r\n      @click=\"stopInspection()\"\r\n      >暂停巡检</fm-button\r\n    >\r\n    <fm-button\r\n      type=\"primary\"\r\n      class=\"inspection-btn inspection-btn-one\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 2 && firstConfig\"\r\n      @click=\"goInspection()\"\r\n      >继续巡检</fm-button\r\n    >\r\n\r\n    <fm-dialog\r\n      :visible.sync=\"submitShow\"\r\n      title=\"巡检任务提交\"\r\n      @confirm=\"onConfirm\"\r\n      show-cancel-button\r\n      width=\"331\"\r\n    >\r\n      <inspection-submit-card :PatrolData=\"submitData\" />\r\n    </fm-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport InspectionSubmitCard from './InspectionSubmitCard.vue'\r\nimport { patrolEdit, uploadTrackList } from '../api'\r\nexport default {\r\n  components: { InspectionSubmitCard },\r\n  props: {\r\n    //巡检状态(1:待巡检，2:巡检中，3:已完成 ，4:已终止)(手机端)\r\n    PatrolData: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    modelType: {\r\n      type: String,\r\n      default: 'list',\r\n    },\r\n  },\r\n  watch: {\r\n    PatrolData: {\r\n      handler: function () {\r\n        this.isFinishConfig()\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      submitData: null,\r\n      firstConfig: true, //是否为第一次进入\r\n      finishConfig: false, //巡检点是否巡检完毕\r\n      submitShow: false, //提交弹框\r\n      disabled: true,\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.setFirstConfig()\r\n  },\r\n  beforeDestroy() {\r\n    this.stopRequestLocations()\r\n  },\r\n\r\n  methods: {\r\n    //内容变化\r\n    //list列表，map地图\r\n    modelTypeChange(type) {\r\n      this.$emit('modelTypeChange', type)\r\n    },\r\n\r\n    //判断是否为第一次进入\r\n    setFirstConfig() {\r\n      let { firstConfig } = this.$route.query\r\n      if (firstConfig === 'false') {\r\n        this.firstConfig = false\r\n        this.$emit('isDisabled', false)\r\n        console.log('isDisabled', false)\r\n      } else {\r\n        this.firstConfig = true\r\n      }\r\n    },\r\n\r\n    //巡检点是否巡检完毕\r\n    isFinishConfig() {\r\n      let config = this.PatrolData?.patrolPointResultList?.every((item) => {\r\n        return item.patrolStatus === '已巡'\r\n      })\r\n      this.finishConfig = config\r\n    },\r\n\r\n    //继续巡检\r\n    goInspection() {\r\n      this.firstConfig = false\r\n      this.$emit('isDisabled', false)\r\n\r\n      this.requestSingleLocation(true)\r\n    },\r\n\r\n    //开始巡检\r\n    async startInspection(type) {\r\n      let query = {\r\n        id: this.$route.query.taskId,\r\n        patrolStatus: type ? type : this.PatrolData && this.PatrolData.patrolStatus,\r\n        patrolStartTime: this.$dayjs().format('YYYY-MM-DD HH:mm:ss'),\r\n        patrolPointResultList: this.PatrolData && this.PatrolData.patrolPointResultList,\r\n      }\r\n\r\n      this.$emit('isDisabled', false)\r\n\r\n      this.requestSingleLocation(true)\r\n\r\n      const res = await patrolEdit(query)\r\n      this.$parent.getPatrol()\r\n      this.firstConfig = false\r\n      this.$router.push({\r\n        path: '/pump/inspection',\r\n        query: {\r\n          taskId: this.$route.query.taskId,\r\n          firstConfig: 'false',\r\n        },\r\n      })\r\n    },\r\n\r\n    //暂停巡检\r\n    stopInspection() {\r\n      this.$dialog\r\n        .confirm({\r\n          title: '暂停巡检',\r\n          message: '暂停巡检将提交未提交的巡检点和隐患数据！',\r\n        })\r\n        .then(async () => {\r\n          await this.isUnsubmitted()\r\n\r\n          this.$router.replace('/pump/inspectionManage')\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    },\r\n\r\n    //终止巡检\r\n    async terminatedInspection() {\r\n      this.$router.push(`/pump/terminated-task?taskId=${this.$route.query.taskId}`)\r\n    },\r\n\r\n    //检查是否有未提交项,并提交\r\n    async isUnsubmitted() {\r\n      this.submitData = JSON.parse(JSON.stringify(this.PatrolData))\r\n\r\n      let storageItemDataList = JSON.parse(this.$storage.get('pump-storageItemDataList'))\r\n      this.submitData.patrolPointResultList?.forEach((item, index) => {\r\n        storageItemDataList?.forEach((data, i) => {\r\n          item.id === data.id\r\n            ? (this.submitData.patrolPointResultList[index] = storageItemDataList[i])\r\n            : null\r\n        })\r\n      })\r\n\r\n      this.$storage.remove('pump-storageItemDataList')\r\n      const res = await patrolEdit(this.submitData)\r\n\r\n      const path = await uploadTrackList(this.$store.state.pump.pumpPath)\r\n      this.$store.commit('setPumpPath', [])\r\n    },\r\n\r\n    //开始巡检\r\n    requestSingleLocation(isFirst) {\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.locationAMap.requestSingleLocation(\r\n          ['1'],\r\n          (res) => {\r\n            let { latitude, longitude } = res\r\n            let path\r\n            if (isFirst) {\r\n              path =\r\n                this.PatrolData && this.PatrolData.patrolPointTrackList\r\n                  ? this.PatrolData.patrolPointTrackList\r\n                  : []\r\n              console.log(path)\r\n            } else {\r\n              path = JSON.parse(JSON.stringify(this.$store.state.pump.pumpPath))\r\n            }\r\n\r\n            path.push({\r\n              lat: latitude,\r\n              lon: longitude,\r\n            })\r\n            this.$store.commit('setPumpPath', path)\r\n\r\n            console.log(this.$store.state.pump.pumpPath)\r\n          },\r\n          (err) => {\r\n            console.log('err=', err)\r\n          }\r\n        )\r\n      }\r\n    },\r\n\r\n    //结束巡检\r\n    stopRequestLocations() {\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.locationAMap.stopRequestLocations()\r\n      }\r\n    },\r\n\r\n    //完成巡检提交\r\n    submit(type) {\r\n      this.submitData = JSON.parse(JSON.stringify(this.PatrolData))\r\n      this.submitData.patrolStatus = type\r\n      this.submitData.patrolEndTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n      this.submitData.submitTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n      this.submitShow = true\r\n    },\r\n\r\n    //任务提交确认\r\n    async onConfirm() {\r\n      try {\r\n        const res = await patrolEdit(this.submitData)\r\n        this.$parent.getPatrol()\r\n        this.firstConfig = false\r\n        this.$router.replace('/pump/inspectionManage')\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.inspection-submit {\r\n  width: calc(100% - 150px);\r\n  position: fixed;\r\n  bottom: 0;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  height: 112px;\r\n  padding: 10px 30px 10px 120px;\r\n  background-color: #fff;\r\n\r\n  .inspection-map {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: absolute;\r\n    left: 40px;\r\n    width: 40px;\r\n    height: 40px;\r\n\r\n    .inspection-icon {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n\r\n  .inspection-btn {\r\n    width: 288px;\r\n    height: 88px;\r\n    border-radius: 44px;\r\n  }\r\n\r\n  .inspection-btn-one {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}