{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\FormCenter\\ReimburseTest\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\FormCenter\\ReimburseTest\\index.vue","mtime":1705912800019},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQ1VSUkVOVF9ST1csIEVOVU0gfSBmcm9tICdAL3N0b3JlL1N0YXRlL3N0YXRlVHlwZXMnOwppbXBvcnQgVXBsb2FkZXIgZnJvbSAnQC9jb21wb25lbnRzL3VwbG9hZC9VcGxvYWRlci52dWUnOwppbXBvcnQgc2VsZWN0VXNlciBmcm9tICdAL2NvbXBvbmVudHMvc2VsZWN0LXVzZXInOwppbXBvcnQgc2VsZWN0T3JnIGZyb20gJ0AvY29tcG9uZW50cy9zZWxlY3Qtb3JnJzsKaW1wb3J0IHsgVGFiLCBUYWJzLCBOYXZCYXIsIEZpZWxkLCBDYWxlbmRhciwgQ2VsbCwgQ2VsbEdyb3VwLCBCdXR0b24sIFRvYXN0LCBTdGVwcGVyLCBQb3B1cCwgUGlja2VyLCBDaGVja2JveCwgQ2hlY2tib3hHcm91cCwgRm9ybSB9IGZyb20gJ2Zhd2tlcy1tb2JpbGUtbGliJzsKaW1wb3J0IGZvcm1NaXhpbiBmcm9tICcuLi9mb3JtTWl4aW4nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1JlaW1CdXJzZVRlc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIFVwbG9hZGVyLAogICAgc2VsZWN0VXNlciwKICAgIHNlbGVjdE9yZywKICAgIFtUYWIubmFtZV06IFRhYiwKICAgIFtUYWJzLm5hbWVdOiBUYWJzLAogICAgW05hdkJhci5uYW1lXTogTmF2QmFyLAogICAgW0ZpZWxkLm5hbWVdOiBGaWVsZCwKICAgIFtDYWxlbmRhci5uYW1lXTogQ2FsZW5kYXIsCiAgICBbQ2VsbC5uYW1lXTogQ2VsbCwKICAgIFtDZWxsR3JvdXAubmFtZV06IENlbGxHcm91cCwKICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbiwKICAgIFtUb2FzdC5uYW1lXTogVG9hc3QsCiAgICBbU3RlcHBlci5uYW1lXTogU3RlcHBlciwKICAgIFtQb3B1cC5uYW1lXTogUG9wdXAsCiAgICBbUGlja2VyLm5hbWVdOiBQaWNrZXIsCiAgICBbQ2hlY2tib3gubmFtZV06IENoZWNrYm94LAogICAgW0NoZWNrYm94R3JvdXAubmFtZV06IENoZWNrYm94R3JvdXAsCiAgICBbRm9ybS5uYW1lXTogRm9ybQogIH0sCiAgbWl4aW5zOiBbZm9ybU1peGluXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNEaXNhYmxlZDogZmFsc2UsCiAgICAgIHNlcnZpY2U6IHsKICAgICAgICBpbml0aWFsOiAnL21vYmlsZS1idWlsZC9mb3JtL3F1ZXJ5JywKICAgICAgICAvL+WIneWni+WMluaOpeWPowogICAgICAgIHN1Ym1pdDogJy9tb2JpbGUtYnVpbGQvZm9ybS9jb21taXQnIC8v5o+Q5Lqk5o6l5Y+jCiAgICAgIH0sCiAgICAgIC8vIOi+k+WFpeatpOihqOWNleaVsOaNruihqOWvueW6lOeahOaVsOaNruWvueixoeWQjQogICAgICBlbnRpdHlOYW1lOiAnUmVpbWJ1cnNlJywKICAgICAgLy/ovpPlhaXmraTooajljZXnmoTlpLTpg6jlkI3np7AKICAgICAgZm9ybU5hbWU6ICfmma7pgJrmiqXplIAnLAogICAgICAvL+ihqOWNleiuvuiuoeesrOWbm+atpe+8mui+k+WFpeatpOihqOWNleebuOWFs+i/nua1geeoi+eahG1vZGVsS2V5CiAgICAgIG1vZGVsS2V5OiAncmVpbWJ1cnNlQ29tbW9uJywKICAgICAgZGV0YWlsUGFyYW06IFtdLAogICAgICB0YWI6IDAsCiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgYXR0YWNobWVudDogJycsCiAgICAgICAgLy/pmYTku7YKICAgICAgICBidWRnZXQ6ICcgJywKICAgICAgICAvL+mHh+i0remihOeulwogICAgICAgIGRlcGFydG1lbnRJZDogJycsCiAgICAgICAgLy/pg6jpl6hJRAogICAgICAgIGRlcGFydG1lbnROYW1lOiAnJywKICAgICAgICAvL+mDqOmXqAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAvL+mHh+i0reivtOaYjgogICAgICAgIGZpbmFuY2VBc3NpZ25lZTogJycsCiAgICAgICAgLy/otKLliqHlrqHmibnkuroKICAgICAgICBmaW5hbmNlQXNzaWduZWVGdWxsbmFtZTogJycsCiAgICAgICAgLy/otKLliqHlrqHmibnkuroKICAgICAgICBtYW5hZ2VBc3NpZ25lZTogJycsCiAgICAgICAgLy/nu4/nkIblrqHmibnkuroKICAgICAgICBtYW5hZ2VBc3NpZ25lZUZ1bGxuYW1lOiAnJywKICAgICAgICAvL+e7j+eQhuWuoeaJueS6ugogICAgICAgIG1hbmFnZXI6ICcnLAogICAgICAgIC8v6YeH6LSt6LSf6LSj5Lq6CiAgICAgICAgbWFuYWdlckZ1bGxuYW1lOiAnJywKICAgICAgICAvL+mHh+i0rei0n+i0o+S6ugogICAgICAgIG5vdGlmaWNhdGlvbjogJ+efreS/oScsCiAgICAgICAgLy/pgJrnn6XmlrnlvI8KICAgICAgICBwbGFuRGF0ZTogJycsCiAgICAgICAgLy/ph4fotK3orqHliJLml6XmnJ8KICAgICAgICByZWltYnVyc2VOYW1lOiAnJywKICAgICAgICAvL+mHh+i0reiuoeWIkuWQjeensAogICAgICAgIHJlaW1idXJzZVR5cGU6ICcnLAogICAgICAgIC8v5beu5peF57G75Z6LCiAgICAgICAgY3JlYXRlQnk6ICcnLAogICAgICAgIC8v5aGr5YaZ5Lq65pi156ewCiAgICAgICAgY3JlYXRlRGF0ZTogJycgLy/loavlhpnml6XmnJ8KICAgICAgfSwKICAgICAgc2hvd1BsYW5EYXRlOiAnJywKICAgICAgc2hvd1BpY2tlcjogZmFsc2UsCiAgICAgIHNob3dDYWxlbmRhcjogZmFsc2UsCiAgICAgIGZsYWc6IHRydWUsCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgY2hlY2tib3hHcm91cDogWyfnn63kv6EnXSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICB3YXRjaDoge30sCiAgY29tcHV0ZWQ6IHsKICAgIHJvdygpIHsKICAgICAgLy8g6aG16Z2i5Lit5L2/55Socm935p2l5oyH5Luj5b2T5YmN6K6w5b2VCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZVtDVVJSRU5UX1JPV107CiAgICB9LAogICAgcmVpbWJ1cnNlVHlwZSgpIHsKICAgICAgLy8gdG9saW5l5pa55rOV5bey5ZyobWl4aW7kuK3lrprkuYkKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlW0VOVU1dW3RoaXMudG9MaW5lKCdyZWltYnVyc2VfdHlwZScpXSB8fCBbXTsKICAgIH0sCiAgICBsYW5nKCkgewogICAgICBpZiAodGhpcy4kc3RvcmFnZS5nZXQoJ2kxOG5Mb2NhbGUnKSA9PSAnemgnKSB7CiAgICAgICAgcmV0dXJuICd6aC1DTic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICdlbic7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy50eXBlID09ICdleGVjdXRlJykgewogICAgICB0aGlzLmlzRGlzYWJsZWQgPSB0cnVlOwogICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT0gJ3ZpZXcnKSB7CiAgICAgIHRoaXMuaXNEaXNhYmxlZCA9IHRydWU7CiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSAnYWRkJykgewogICAgICB0aGlzLmZvcm1EYXRhLmNyZWF0ZUJ5ID0gdGhpcy4kc3RvcmFnZS5nZXQoJ3VzZXJuYW1lJyk7CiAgICAgIHRoaXMuZm9ybURhdGEuY3JlYXRlRGF0ZSA9IHRoaXMuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDoi6XpnIDopoHnibnliKvlpITnkIbojrflj5bliLDnmoTooajljZXmlbDmja7vvIzlj6/lnKhiZWZvcmVJbml05Lit5aSE55CGCiAgICBiZWZvcmVJbml0KHJlcykgewogICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgIHJlcy5kYXRhLmVudGl0eU9iamVjdC5wbGFuRGF0ZSA9IHJlcy5kYXRhLmVudGl0eU9iamVjdC5wbGFuRGF0ZSA9PSBudWxsID8gbnVsbCA6IHJlcy5kYXRhLmVudGl0eU9iamVjdC5wbGFuRGF0ZS5zcGxpdCgnICcpWzBdOwogICAgICAgICAgY29uc3QgZm9ybURhdGEgPSByZXMuZGF0YS5lbnRpdHlPYmplY3Q7CiAgICAgICAgICBmb3JtRGF0YS5jcmVhdGVCeSA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCd1c2VybmFtZScpOwogICAgICAgICAgZm9ybURhdGEuY3JlYXRlRGF0ZSA9IHRoaXMuJGRheWpzKGZvcm1EYXRhLmNyZWF0ZURhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpOwogICAgICAgICAgLy8g5Yik5pat6YKu566x55+t5L+h55qE6YCJ5Lit54q25oCBCiAgICAgICAgICBpZiAocmVzLmRhdGEuZW50aXR5T2JqZWN0Lm5vdGlmaWNhdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMuY2hlY2tib3hHcm91cCA9IHJlcy5kYXRhLmVudGl0eU9iamVjdC5ub3RpZmljYXRpb24uc3BsaXQoJywnKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICBmb3JtRGF0YQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaTjeS9nOWJjeeahOagoemqjAogICAgdmFsaWRhdG9yKCkgewogICAgICBpZiAoIXRoaXMuZm9ybURhdGEubWFuYWdlckZ1bGxuYW1lKSB7CiAgICAgICAgVG9hc3QoJ+ivt+mAieaLqemHh+i0rei0n+i0o+S6uicpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZm9ybURhdGEuZmluYW5jZUFzc2lnbmVlRnVsbG5hbWUpIHsKICAgICAgICBUb2FzdCgn6K+36YCJ5oup6LSi5Yqh5a6h5om55Lq6Jyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICghdGhpcy5mb3JtRGF0YS5tYW5hZ2VBc3NpZ25lZUZ1bGxuYW1lKSB7CiAgICAgICAgVG9hc3QoJ+ivt+mAieaLqee7j+eQhuWuoeaJueS6uicpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZm9ybURhdGEuZGVwYXJ0bWVudE5hbWUpIHsKICAgICAgICBUb2FzdCgn6K+36YCJ5oup5rWL6K+V6YOo6ZeoJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8vIOihqOWNleaPkOS6pCjlrqHmibkp5YmNCiAgICBiZWZvcmVTdWJtaXQoKSB7CiAgICAgIC8vIOekuuS+i+ihqOWNleiuoeWIkuaXpeacn+Wtl+auteWcqOaVsOaNruW6k+exu+Wei+mfpmRhdGV0aW1l77yM6ZyA6KaB5aSE55CG5LiLCiAgICAgIHRoaXMuZm9ybURhdGEucGxhbkRhdGUgPSB0aGlzLmZvcm1EYXRhLnBsYW5EYXRlID8gdGhpcy4kZGF5anModGhpcy5mb3JtRGF0YS5wbGFuRGF0ZSkuZm9ybWF0KCdZWVlZLU1NLUREIDAwOjAwOjAwJykgOiBudWxsOwogICAgICAvLyDlpoLmnpzmnInkuIrkvKDmlofku7bvvIzliJnlkIjlubbmlofku7ZmaWxldG9rZW7kuLpncm91cFRva2VuCiAgICAgIGlmICh0aGlzLmZpbGVMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAvLyDlsY/olL13YXRjaOebkeWQrOmZhOS7tuWAvOWPmOabtOmHjeaWsOiOt+WPluaWh+S7tgogICAgICAgIHRoaXMuJHJlZnMuYXR0YWNobWVudC5uZWVkVG9HZXRGaWxlID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmcy5hdHRhY2htZW50LnNldEc5cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybURhdGEuYXR0YWNobWVudCA9ICcnOwogICAgICB9CiAgICAgIC8vIOi1i+WAvOe7mUZvcm1DZW50ZXLnu4Tku7bvvIznlKjkuo7mtYHnqIvlpITnkIbml7bmj5DkuqTooajljZXkv6Hmga8KICAgICAgdGhpcy4kZW1pdCgnc2V0Rm9ybURhdGEnLCB0aGlzLmZvcm1EYXRhKTsKICAgIH0sCiAgICAvLyDpmZDliLbmraXov5vlmajmnIDlpJrlj6rog73kuInkvY3lsI/mlbAKICAgIHN0ZXBwZXJDaGFuZ2UodmFsKSB7CiAgICAgIC8vIOW9k+acieWAvOaIluS4uuaVsOWtl+aXtuWIpOaWrQogICAgICBpZiAodmFsID09PSAnJyB8fCB2YWwgPT0gbnVsbCB8fCBpc05hTih2YWwpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGxldCByZWcgPSAvXlxkK1wuP1xkezAsM30kLzsKICAgICAgbGV0IG5ld1ZhbCA9IG51bGw7CiAgICAgIGlmICghcmVnLnRlc3QodmFsKSkgewogICAgICAgIFRvYXN0KCfpmZDliLbmraPmlbDmiJYz5L2N5bCP5pWwJyk7CiAgICAgICAgdmFsID0gdmFsLnRvU3RyaW5nKCk7CiAgICAgICAgbmV3VmFsID0gdmFsLmluZGV4T2YoJy4nKSA+IC0xID8gdmFsLnNsaWNlKDAsIHZhbC5pbmRleE9mKCcuJykgKyA0KSA6IHZhbDsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm1EYXRhLCAnYnVkZ2V0JywgbmV3VmFsKTsKICAgICAgICB9LCA1MDApOwogICAgICB9CiAgICB9LAogICAgLy8g56Gu6K6k6YCJ5oup5pel5pyf57uE5Lu2CiAgICBvbkNhbGVuZGFyQ29uZmlybShkYXRlKSB7CiAgICAgIHRoaXMuZm9ybURhdGEucGxhbkRhdGUgPSB0aGlzLiRkYXlqcyhkYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQnKTsKICAgICAgdGhpcy5zaG93Q2FsZW5kYXIgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDnoa7orqTpgInmi6nlt67ml4Xnsbvlnovnu4Tku7YKICAgIG9uUmVpbWJ1cnNlVHlwZUNvbmZpcm0odmFsdWUpIHsKICAgICAgdGhpcy5mb3JtRGF0YS5yZWltYnVyc2VUeXBlID0gdmFsdWUuY29kZTsKICAgICAgdGhpcy5zaG93UGlja2VyID0gZmFsc2U7CiAgICB9LAogICAgY2hlY2tib3godmFsdWUpIHsKICAgICAgdGhpcy5mb3JtRGF0YS5ub3RpZmljYXRpb24gPSB2YWx1ZS50b1N0cmluZygpOwogICAgfSwKICAgIGZpbGVDaGFuZ2UoaXRlbSkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gaXRlbS5maWxlTGlzdDsKICAgIH0KICB9Cn07"},{"version":3,"names":["CURRENT_ROW","ENUM","Uploader","selectUser","selectOrg","Tab","Tabs","NavBar","Field","Calendar","Cell","CellGroup","Button","Toast","Stepper","Popup","Picker","Checkbox","CheckboxGroup","Form","formMixin","name","components","mixins","data","isDisabled","service","initial","submit","entityName","formName","modelKey","detailParam","tab","formData","attachment","budget","departmentId","departmentName","description","financeAssignee","financeAssigneeFullname","manageAssignee","manageAssigneeFullname","manager","managerFullname","notification","planDate","reimburseName","reimburseType","createBy","createDate","showPlanDate","showPicker","showCalendar","flag","fileList","checkboxGroup","loading","watch","computed","row","$store","state","toLine","lang","$storage","get","mounted","type","$dayjs","format","methods","beforeInit","res","Promise","resolve","status","entityObject","split","validator","beforeSubmit","length","$refs","needToGetFile","setG9s","$emit","stepperChange","val","isNaN","reg","newVal","test","toString","indexOf","slice","setTimeout","$set","onCalendarConfirm","date","onReimburseTypeConfirm","value","code","checkbox","fileChange","item"],"sources":["src/views/FormCenter/ReimburseTest/index.vue"],"sourcesContent":["<template>\r\n  <!-- 设置表单ref值，FormCenter会使用到 -->\r\n  <fm-form ref=\"form\" validate-first>\r\n    <fm-field\r\n      input-align=\"right\"\r\n      v-model=\"formData.reimburseName\"\r\n      name=\"采购计划名称\"\r\n      label=\"采购计划名称\"\r\n      :maxlength=\"255\"\r\n      :placeholder=\"flowConfig.reimburseName == 'readonly' ? '' : '请输入采购计划名称'\"\r\n      :readonly=\"flowConfig.reimburseName == 'readonly'\"\r\n      required\r\n      :rules=\"[{ required: true }]\"\r\n    />\r\n    <fm-field name=\"stepper\" label=\"采购预算\" input-align=\"right\">\r\n      <template #input>\r\n        <fm-stepper\r\n          @change=\"stepperChange\"\r\n          input-width=\"50\"\r\n          async-change\r\n          :disabled=\"flowConfig.budget == 'readonly'\"\r\n          default-value=\"null\"\r\n          v-model=\"formData.budget\"\r\n        />\r\n      </template>\r\n    </fm-field>\r\n    <fm-field\r\n      input-align=\"right\"\r\n      :is-link=\"flowConfig.planDate != 'readonly'\"\r\n      clickable\r\n      name=\"calendar\"\r\n      :value=\"formData.planDate\"\r\n      label=\"采购计划日期\"\r\n      :placeholder=\"flowConfig.planDate == 'readonly' ? '' : '请选择'\"\r\n      readonly\r\n      @click.stop.native=\"flowConfig.planDate == 'readonly' ? '' : (showCalendar = true)\"\r\n    />\r\n    <fm-calendar\r\n      v-model=\"showCalendar\"\r\n      @confirm=\"onCalendarConfirm\"\r\n      :confirm-button-style=\"{ height: '44p;', marginBottom: '10px' }\"\r\n    />\r\n    <fm-field\r\n      input-align=\"right\"\r\n      readonly\r\n      clickable\r\n      name=\"picker\"\r\n      :value=\"formData.reimburseType | transferEnum('reimburse_type')\"\r\n      label=\"采购类型\"\r\n      :is-link=\"flowConfig.reimburseType != 'readonly'\"\r\n      :placeholder=\"flowConfig.reimburseType == 'readonly' ? '' : '请选择'\"\r\n      @click.stop.native=\"flowConfig.reimburseType == 'readonly' ? '' : (showPicker = true)\"\r\n    />\r\n    <fm-popup :visible.sync=\"showPicker\" position=\"bottom\">\r\n      <fm-picker\r\n        title=\"采购类型\"\r\n        show-toolbar\r\n        confirm-button-text=\"完成\"\r\n        :columns=\"reimburseType\"\r\n        :value-key=\"lang\"\r\n        @confirm=\"onReimburseTypeConfirm\"\r\n        @cancel=\"showPicker = false\"\r\n      />\r\n    </fm-popup>\r\n    <div class=\"textarea-type\">\r\n      <fm-cell-group title=\"采购说明\">\r\n        <fm-field\r\n          v-model=\"formData.description\"\r\n          type=\"textarea\"\r\n          maxlength=\"50\"\r\n          :readonly=\"flowConfig.description == 'readonly'\"\r\n          :placeholder=\"flowConfig.description == 'readonly' ? '' : '请输入采购说明'\"\r\n          show-word-limit\r\n        />\r\n      </fm-cell-group>\r\n    </div>\r\n    <fm-field input-align=\"right\" name=\"checkboxGroup\" label=\"通知方式\">\r\n      <template #input>\r\n        <fm-checkbox-group v-model=\"checkboxGroup\" direction=\"horizontal\" @change=\"checkbox\">\r\n          <fm-checkbox :disabled=\"true\" name=\"短信\" shape=\"square\">短信</fm-checkbox>\r\n          <fm-checkbox :disabled=\"flowConfig.notification == 'readonly'\" name=\"邮箱\" shape=\"square\"\r\n            >邮箱</fm-checkbox\r\n          >\r\n        </fm-checkbox-group>\r\n      </template>\r\n    </fm-field>\r\n    <uploader\r\n      v-model=\"formData.attachment\"\r\n      :deletable=\"flowConfig.attachment != 'readonly'\"\r\n      :disabled=\"flowConfig.attachment == 'readonly'\"\r\n      @fileChange=\"fileChange\"\r\n      ref=\"attachment\"\r\n      type=\"file\"\r\n      class=\"uploder-attachment\"\r\n    />\r\n    <!-- 创建数据表时忘记添加填写人和填写日期两个字段，故暂时利用表单默认字段create_by和create_date，实际项目中最好使用单独字段 -->\r\n    <fm-field\r\n      input-align=\"right\"\r\n      v-model=\"formData.createBy\"\r\n      name=\"填写人\"\r\n      label=\"填写人\"\r\n      :readonly=\"true\"\r\n    />\r\n    <fm-field\r\n      input-align=\"right\"\r\n      v-model=\"formData.createDate\"\r\n      name=\"填写日期\"\r\n      label=\"填写日期\"\r\n      :readonly=\"true\"\r\n    />\r\n    <select-user\r\n      title=\"采购负责人\"\r\n      :userFullname.sync=\"formData.managerFullname\"\r\n      :userName.sync=\"formData.manager\"\r\n      :disabled=\"flowConfig.manager == 'readonly'\"\r\n      :multiple=\"false\"\r\n      :required=\"true\"\r\n    >\r\n    </select-user>\r\n    <select-user\r\n      title=\"财务审批人\"\r\n      :userFullname.sync=\"formData.financeAssigneeFullname\"\r\n      :userName.sync=\"formData.financeAssignee\"\r\n      :disabled=\"flowConfig.financeAssignee == 'readonly'\"\r\n      :multiple=\"false\"\r\n      :required=\"true\"\r\n    ></select-user>\r\n    <select-user\r\n      title=\"经理审批人\"\r\n      :userFullname.sync=\"formData.manageAssigneeFullname\"\r\n      :userName.sync=\"formData.manageAssignee\"\r\n      :disabled=\"flowConfig.manageAssignee == 'readonly'\"\r\n      :required=\"true\"\r\n    ></select-user>\r\n    <select-org\r\n      :title=\"'测试部门'\"\r\n      :deptId.sync=\"formData.departmentId\"\r\n      :deptName.sync=\"formData.departmentName\"\r\n      :multiple=\"false\"\r\n      :disabled=\"flowConfig.departmentId == 'readonly'\"\r\n      :required=\"true\"\r\n    ></select-org>\r\n  </fm-form>\r\n</template>\r\n<script>\r\nimport { CURRENT_ROW, ENUM } from '@/store/State/stateTypes'\r\nimport Uploader from '@/components/upload/Uploader.vue'\r\nimport selectUser from '@/components/select-user'\r\nimport selectOrg from '@/components/select-org'\r\nimport {\r\n  Tab,\r\n  Tabs,\r\n  NavBar,\r\n  Field,\r\n  Calendar,\r\n  Cell,\r\n  CellGroup,\r\n  Button,\r\n  Toast,\r\n  Stepper,\r\n  Popup,\r\n  Picker,\r\n  Checkbox,\r\n  CheckboxGroup,\r\n  Form,\r\n} from 'fawkes-mobile-lib'\r\n\r\nimport formMixin from '../formMixin'\r\n\r\nexport default {\r\n  name: 'ReimBurseTest',\r\n  components: {\r\n    Uploader,\r\n    selectUser,\r\n    selectOrg,\r\n    [Tab.name]: Tab,\r\n    [Tabs.name]: Tabs,\r\n    [NavBar.name]: NavBar,\r\n    [Field.name]: Field,\r\n    [Calendar.name]: Calendar,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [Button.name]: Button,\r\n    [Toast.name]: Toast,\r\n    [Stepper.name]: Stepper,\r\n    [Popup.name]: Popup,\r\n    [Picker.name]: Picker,\r\n    [Checkbox.name]: Checkbox,\r\n    [CheckboxGroup.name]: CheckboxGroup,\r\n    [Form.name]: Form,\r\n  },\r\n  mixins: [formMixin],\r\n  data() {\r\n    return {\r\n      isDisabled: false,\r\n      service: {\r\n        initial: '/mobile-build/form/query', //初始化接口\r\n        submit: '/mobile-build/form/commit', //提交接口\r\n      },\r\n      // 输入此表单数据表对应的数据对象名\r\n      entityName: 'Reimburse',\r\n      //输入此表单的头部名称\r\n      formName: '普通报销',\r\n      //表单设计第四步：输入此表单相关连流程的modelKey\r\n      modelKey: 'reimburseCommon',\r\n      detailParam: [],\r\n      tab: 0,\r\n      formData: {\r\n        attachment: '', //附件\r\n        budget: ' ', //采购预算\r\n        departmentId: '', //部门ID\r\n        departmentName: '', //部门\r\n        description: '', //采购说明\r\n        financeAssignee: '', //财务审批人\r\n        financeAssigneeFullname: '', //财务审批人\r\n        manageAssignee: '', //经理审批人\r\n        manageAssigneeFullname: '', //经理审批人\r\n        manager: '', //采购负责人\r\n        managerFullname: '', //采购负责人\r\n        notification: '短信', //通知方式\r\n        planDate: '', //采购计划日期\r\n        reimburseName: '', //采购计划名称\r\n        reimburseType: '', //差旅类型\r\n        createBy: '', //填写人昵称\r\n        createDate: '', //填写日期\r\n      },\r\n      showPlanDate: '',\r\n      showPicker: false,\r\n      showCalendar: false,\r\n      flag: true,\r\n      fileList: [],\r\n      checkboxGroup: ['短信'],\r\n      loading: false,\r\n    }\r\n  },\r\n  watch: {},\r\n  computed: {\r\n    row() {\r\n      // 页面中使用row来指代当前记录\r\n      return this.$store.state[CURRENT_ROW]\r\n    },\r\n    reimburseType() {\r\n      // toline方法已在mixin中定义\r\n      return this.$store.state[ENUM][this.toLine('reimburse_type')] || []\r\n    },\r\n    lang() {\r\n      if (this.$storage.get('i18nLocale') == 'zh') {\r\n        return 'zh-CN'\r\n      } else {\r\n        return 'en'\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    if (this.type == 'execute') {\r\n      this.isDisabled = true\r\n    } else if (this.type == 'view') {\r\n      this.isDisabled = true\r\n    } else if (this.type == 'add') {\r\n      this.formData.createBy = this.$storage.get('username')\r\n      this.formData.createDate = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n    }\r\n  },\r\n  methods: {\r\n    // 若需要特别处理获取到的表单数据，可在beforeInit中处理\r\n    beforeInit(res) {\r\n      return new Promise((resolve) => {\r\n        if (res.status) {\r\n          res.data.entityObject.planDate =\r\n            res.data.entityObject.planDate == null\r\n              ? null\r\n              : res.data.entityObject.planDate.split(' ')[0]\r\n          const formData = res.data.entityObject\r\n          formData.createBy = this.$storage.get('username')\r\n          formData.createDate = this.$dayjs(formData.createDate).format('YYYY-MM-DD HH:mm:ss')\r\n          // 判断邮箱短信的选中状态\r\n          if (res.data.entityObject.notification != null) {\r\n            this.checkboxGroup = res.data.entityObject.notification.split(',')\r\n          }\r\n          resolve({ formData })\r\n        } else {\r\n          resolve()\r\n        }\r\n      })\r\n    },\r\n    // 操作前的校验\r\n    validator() {\r\n      if (!this.formData.managerFullname) {\r\n        Toast('请选择采购负责人')\r\n        return false\r\n      }\r\n      if (!this.formData.financeAssigneeFullname) {\r\n        Toast('请选择财务审批人')\r\n        return false\r\n      }\r\n      if (!this.formData.manageAssigneeFullname) {\r\n        Toast('请选择经理审批人')\r\n        return false\r\n      }\r\n      if (!this.formData.departmentName) {\r\n        Toast('请选择测试部门')\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    // 表单提交(审批)前\r\n    beforeSubmit() {\r\n      // 示例表单计划日期字段在数据库类型韦datetime，需要处理下\r\n      this.formData.planDate = this.formData.planDate\r\n        ? this.$dayjs(this.formData.planDate).format('YYYY-MM-DD 00:00:00')\r\n        : null\r\n      // 如果有上传文件，则合并文件filetoken为groupToken\r\n      if (this.fileList.length > 0) {\r\n        // 屏蔽watch监听附件值变更重新获取文件\r\n        this.$refs.attachment.needToGetFile = false\r\n        this.$refs.attachment.setG9s()\r\n      } else {\r\n        this.formData.attachment = ''\r\n      }\r\n      // 赋值给FormCenter组件，用于流程处理时提交表单信息\r\n      this.$emit('setFormData', this.formData)\r\n    },\r\n    // 限制步进器最多只能三位小数\r\n    stepperChange(val) {\r\n      // 当有值或为数字时判断\r\n      if (val === '' || val == null || isNaN(val)) {\r\n        return false\r\n      }\r\n      let reg = /^\\d+\\.?\\d{0,3}$/\r\n      let newVal = null\r\n      if (!reg.test(val)) {\r\n        Toast('限制正数或3位小数')\r\n        val = val.toString()\r\n        newVal = val.indexOf('.') > -1 ? val.slice(0, val.indexOf('.') + 4) : val\r\n        setTimeout(() => {\r\n          this.$set(this.formData, 'budget', newVal)\r\n        }, 500)\r\n      }\r\n    },\r\n    // 确认选择日期组件\r\n    onCalendarConfirm(date) {\r\n      this.formData.planDate = this.$dayjs(date).format('YYYY-MM-DD')\r\n      this.showCalendar = false\r\n    },\r\n    // 确认选择差旅类型组件\r\n    onReimburseTypeConfirm(value) {\r\n      this.formData.reimburseType = value.code\r\n      this.showPicker = false\r\n    },\r\n    checkbox(value) {\r\n      this.formData.notification = value.toString()\r\n    },\r\n    fileChange(item) {\r\n      this.fileList = item.fileList\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\n.content-container {\r\n  height: auto !important ;\r\n  /*margin-top: 220px;*/\r\n}\r\n/deep/.fm-field--disabled .fm-field__label {\r\n  color: #000;\r\n}\r\n\r\n/deep/ .fm-cell-group__title {\r\n  color: #000;\r\n}\r\n.field-attachment {\r\n  flex-direction: column;\r\n  /deep/ .fm-field__control--right {\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n\r\n.textarea-type /deep/ .fm-field__value {\r\n  border: 1px solid #bbbbbb;\r\n  opacity: 0.5;\r\n}\r\n</style>\r\n"],"mappings":"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"}]}