{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\Code\\Project\\WL\\xasw-mobile\\src\\utils\\mapUtils.js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\utils\\mapUtils.js","mtime":1705912799988},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoNCiAqIEBBdXRob3I6IGdhb19wZg0KICogQERhdGU6IDIwMjEtMDktMDggMTA6NDE6MzENCiAqIEBMYXN0RWRpdFRpbWU6IDIwMjEtMTEtMDkgMTE6MjM6NDINCiAqIEBMYXN0RWRpdG9yczogZ2FvX3BmDQogKiBARGVzY3JpcHRpb246DQogKi8KaW1wb3J0IHsgY2lyY2xlIH0gZnJvbSAnQHR1cmYvdHVyZic7CmltcG9ydCB7IGlzRXh0ZXJuYWwgfSBmcm9tICcuL3ZhbGlkYXRlJzsKCi8qKg0KICoNCiAqIEBwYXJhbSB7QXJyYXl9IGljb25MaXN0DQogKiBuYW1lDQogKiB1cmwNCiAqIEByZXR1cm5zIFtQcm9taXNlXQ0KICovCmV4cG9ydCBmdW5jdGlvbiBhZGRJY29uVG9NYXAobWFwLCBpY29uTGlzdCkgewogIHJldHVybiBQcm9taXNlLmFsbChpY29uTGlzdC5tYXAoaWNvbiA9PiB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBjb25zdCBuYW1lID0gaWNvbi5uYW1lOwogICAgICBpZiAobWFwLmhhc0ltYWdlKG5hbWUpKSB7CiAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKICAgICAgaW1hZ2UuY3Jvc3NPcmlnaW4gPSAnQW5vbnltb3VzJzsKICAgICAgLy8g5Yik5pat5Zu+54mH5piv5ZCmIOWklumTvuWcsOWdgCDmiJbogIUgYmFzZTY05Zu+54mHCiAgICAgIGlmIChpc0V4dGVybmFsKGljb24udXJsKSB8fCBpY29uLnVybC5zdGFydHNXaXRoKCdkYXRhOmltYWdlJykpIHsKICAgICAgICBpbWFnZS5zcmMgPSBpY29uLnVybDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbWFnZS5zcmMgPSByZXF1aXJlKCdALycgKyBpY29uLnVybCArICcucG5nJyk7CiAgICAgIH0KICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBtYXAuYWRkSW1hZ2UobmFtZSwgaW1hZ2UpOwogICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9KTsKICB9KSk7Cn0KLyoqDQogKiDnu5nlrprkuIDkuKrngrnvvIznlLvkuIDkuKrlnIYNCiAqLwpleHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2lyY2xlR2VvSnNvbihjZW50ZXIsIHJhZGl1cywgdW5pdHMgPSAna2lsb21ldGVycycpIHsKICByZXR1cm4gewogICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgIGZlYXR1cmVzOiBbY2lyY2xlKGNlbnRlciwgcmFkaXVzLCB7CiAgICAgIHVuaXRzCiAgICB9KV0KICB9Owp9"},{"version":3,"names":["circle","isExternal","addIconToMap","map","iconList","Promise","all","icon","resolve","reject","name","hasImage","image","Image","crossOrigin","url","startsWith","src","require","onload","addImage","err","console","log","createCircleGeoJson","center","radius","units","type","features"],"sources":["D:/Code/Project/WL/xasw-mobile/src/utils/mapUtils.js"],"sourcesContent":["/*\r\n * @Author: gao_pf\r\n * @Date: 2021-09-08 10:41:31\r\n * @LastEditTime: 2021-11-09 11:23:42\r\n * @LastEditors: gao_pf\r\n * @Description:\r\n */\r\nimport { circle } from '@turf/turf';\r\nimport { isExternal } from './validate';\r\n\r\n/**\r\n *\r\n * @param {Array} iconList\r\n * name\r\n * url\r\n * @returns [Promise]\r\n */\r\nexport function addIconToMap(map, iconList) {\r\n  return Promise.all(\r\n    iconList.map(icon => {\r\n      return new Promise((resolve, reject) => {\r\n        const name = icon.name;\r\n        if (map.hasImage(name)) {\r\n          resolve(true);\r\n          return;\r\n        }\r\n        const image = new Image();\r\n        image.crossOrigin = 'Anonymous';\r\n        // 判断图片是否 外链地址 或者 base64图片\r\n        if (isExternal(icon.url) || icon.url.startsWith('data:image')) {\r\n          image.src = icon.url;\r\n        } else {\r\n          image.src = require('@/' + icon.url + '.png');\r\n        }\r\n        image.onload = () => {\r\n          try {\r\n            map.addImage(name, image);\r\n            resolve(true);\r\n          } catch (err) {\r\n            console.log(err);\r\n            reject(err);\r\n          }\r\n        };\r\n      });\r\n    }),\r\n  );\r\n}\r\n/**\r\n * 给定一个点，画一个圆\r\n */\r\nexport function createCircleGeoJson(center, radius, units = 'kilometers') {\r\n  return {\r\n    type: 'FeatureCollection',\r\n    features: [circle(center, radius, { units })],\r\n  };\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,MAAM,QAAQ,YAAY;AACnC,SAASC,UAAU,QAAQ,YAAY;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAACC,GAAG,EAAEC,QAAQ,EAAE;EAC1C,OAAOC,OAAO,CAACC,GAAG,CAChBF,QAAQ,CAACD,GAAG,CAACI,IAAI,IAAI;IACnB,OAAO,IAAIF,OAAO,CAAC,CAACG,OAAO,EAAEC,MAAM,KAAK;MACtC,MAAMC,IAAI,GAAGH,IAAI,CAACG,IAAI;MACtB,IAAIP,GAAG,CAACQ,QAAQ,CAACD,IAAI,CAAC,EAAE;QACtBF,OAAO,CAAC,IAAI,CAAC;QACb;MACF;MACA,MAAMI,KAAK,GAAG,IAAIC,KAAK,CAAC,CAAC;MACzBD,KAAK,CAACE,WAAW,GAAG,WAAW;MAC/B;MACA,IAAIb,UAAU,CAACM,IAAI,CAACQ,GAAG,CAAC,IAAIR,IAAI,CAACQ,GAAG,CAACC,UAAU,CAAC,YAAY,CAAC,EAAE;QAC7DJ,KAAK,CAACK,GAAG,GAAGV,IAAI,CAACQ,GAAG;MACtB,CAAC,MAAM;QACLH,KAAK,CAACK,GAAG,GAAGC,OAAO,CAAC,IAAI,GAAGX,IAAI,CAACQ,GAAG,GAAG,MAAM,CAAC;MAC/C;MACAH,KAAK,CAACO,MAAM,GAAG,MAAM;QACnB,IAAI;UACFhB,GAAG,CAACiB,QAAQ,CAACV,IAAI,EAAEE,KAAK,CAAC;UACzBJ,OAAO,CAAC,IAAI,CAAC;QACf,CAAC,CAAC,OAAOa,GAAG,EAAE;UACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;UAChBZ,MAAM,CAACY,GAAG,CAAC;QACb;MACF,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,CACH,CAAC;AACH;AACA;AACA;AACA;AACA,OAAO,SAASG,mBAAmBA,CAACC,MAAM,EAAEC,MAAM,EAAEC,KAAK,GAAG,YAAY,EAAE;EACxE,OAAO;IACLC,IAAI,EAAE,mBAAmB;IACzBC,QAAQ,EAAE,CAAC7B,MAAM,CAACyB,MAAM,EAAEC,MAAM,EAAE;MAAEC;IAAM,CAAC,CAAC;EAC9C,CAAC;AACH"}]}