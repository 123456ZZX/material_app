{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\utils\\encryption\\sm4.js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\utils\\encryption\\sm4.js","mtime":1705912915780},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoNCiAqIEBEZXNjcmlwdGlvbjogU000IOWKoOWvhi/op6Plr4YNCiAqIEBBdXRob3I6IHllX3hmDQogKiBARGF0ZTogMjAyMS0wMi0wNCAxMDoxMzo1OA0KICogQExhc3RFZGl0VGltZTogMjAyMS0wOC0zMSAxNDowMzo0MA0KICogQExhc3RFZGl0b3JzOiBQbGVhc2Ugc2V0IExhc3RFZGl0b3JzDQogKiBAUmVmZXJlbmNlOg0KICovCgppbXBvcnQgeyBzbTIgfSBmcm9tICJzbS1jcnlwdG8iOwovLyAjU00y5ZCO56uv5YWs6ZKlCmxldCBTTTJfQkFDS19QVUJMSUNLX0tFWSA9ICIwNDIwMzVjZmZlYWNkYTE0ZjRhNzY4NDI1MDcwZGI4ZmJlMTM2YzcyYjgzNTgxOGM1NTVkZWJlMzMwYzFkMjIwZGE1MTRjYTQ2NmI2YzE3MWNjMjQ0NTg0NGM3MGNiMDAzMmVlN2RmMGI0YTExZmQ0MDk3YTkyOTc3MGZjMzNjMDdkIjsKLy8gI1NNMuWJjeerr+err+WFrOmSpQovLyBsZXQgU00yX1BVQkxJQ0tfS0VZID0gJzA0NWFhMDAxNWNjMWI2YmZkZWZhNWFmZDQwNDZjNzhiNWIwOTBjZDY1OGQ5MmEyNjMxNWJmZjZjODA1YjFmY2ZiMjc5YjNiNWJhZDE2OGZmMWExZmRiN2VkOTFkNDEwMWVmMzRhZTYyOTE0M2ZkYjkyMWM2NDNmNzNkYmI5Y2QxM2UnCi8vICNTTTLnp4HpkqUKbGV0IFNNMl9QUklWQVRFX0tFWSA9ICIzZWY5ZWZlYWYwNTRhZGJmYWZkZjEwNmM5NTEwZmNiZGZiNGNkZmYyYmQ1MmYxNmRlOWJiYzAwNWEzOWZlOTcwIjsKLy8gbGV0IFNNMl9QUklWQVRFX0tFWSA9ICdmYWRmODJjNDcxMjg3MTBlMGU1Y2NiMjFjOWM1ZmI4NmZmNWI1ZjcyYWE3YjE3YzFmN2Q3NzkwMjNiMDA0NDk3JwovLyAjU0005a+G6ZKlCmxldCBTTTRfS0VZID0gIjQzODY5Mzk5QzE0MTFBM0JFNzFBOTlCMzUxMjNBRUZDIjsKLy/nlJ/miJBTTTTlr4bpkqUKLy8gZnVuY3Rpb24gZ2V0S2V5KGxlbmd0aCA9IDMyKSB7Ci8vICAgbGV0IHJhbmRvbSA9ICcwMTIzNDU2Nzg5QUJDREVGJwovLyAgIGxldCBzdHIgPSAnJwoKLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7Ci8vICAgICBzdHIgPSBzdHIgKyByYW5kb20uY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KSkKLy8gICB9CgovLyAgIHJldHVybiBzdHIKLy8gfQoKLy/liqDlr4YKZnVuY3Rpb24gZW5jcnlwdChwbGFpbnRleHQsIGtleSkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogIGNvbnN0IHNtNCA9IG5ldyBTbTR1dGlscyhrZXkpOwogIGlmIChwbGFpbnRleHQgaW5zdGFuY2VvZiBPYmplY3QpIHsKICAgIHBsYWludGV4dCA9IEpTT04uc3RyaW5naWZ5KHBsYWludGV4dCk7CiAgfQogIGNvbnN0IGVuY3J5cHREYXRhID0gc200LmVuY3J5cHREYXRhX0VDQihwbGFpbnRleHQpOwogIGlmICghZW5jcnlwdERhdGEpIHsKICAgIHJldHVybiBmYWxzZTsKICB9IGVsc2UgewogICAgcmV0dXJuIGVuY3J5cHREYXRhOwogIH0KfQoKLy/op6Plr4YKZnVuY3Rpb24gZGVjcnlwdChjaXBoZXJ0ZXh0LCBrZXkpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKICBjb25zdCBzbTQgPSBuZXcgU200dXRpbHMoa2V5KTsKICBsZXQgZGVjcnlwdERhdGEgPSBzbTQuZGVjcnlwdERhdGFfRUNCKGNpcGhlcnRleHQpOwogIGlmICghZGVjcnlwdERhdGEpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgaWYgKGRlY3J5cHREYXRhLmNoYXJBdCgwKSA9PT0gInsiIHx8IGRlY3J5cHREYXRhLmNoYXJBdCgwKSA9PT0gIlsiKSB7CiAgICBkZWNyeXB0RGF0YSA9IEpTT04ucGFyc2UoZGVjcnlwdERhdGEpOwogIH0KICByZXR1cm4gZGVjcnlwdERhdGE7Cn0KCi8v5o6l5Y+j5pWw5o2u5Yqg5a+GCmV4cG9ydCBmdW5jdGlvbiBlbmNyeXB0X1NNNChkYXRhKSB7CiAgLy8gcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4gewogIC8v5LuO5rWP6KeI5Zmo57yT5a2Y5Lit6I635Y+WU000CiAgLy8gY29uc3QgU000X0tFWSA9IHN0b3JhZ2UuZ2V0KCdzbTRfa2V5JykKCiAgLy8gaWYgKCFTTTRfS0VZKSB7CiAgLy8gICAgIFNNNF9LRVkgPSBnZXRLZXkoKSAvL+iOt+WPllNNNOWvhumSpQogIC8vICAgICBzdG9yYWdlLnNldCgnc200X2tleScsIFNNNF9LRVkpIC8v5bCGU0005a+G6ZKl5a2Y5YKo5Yiw5rWP6KeI5Zmo57yT5a2Y5LitCiAgLy8gfQoKICBjb25zdCBlbmNyeXB0RGF0YSA9IGVuY3J5cHQoZGF0YSwgU000X0tFWSk7CiAgaWYgKCFlbmNyeXB0RGF0YSkgewogICAgY29uc29sZS53YXJuKCLmlbDmja7liqDlr4blpLHotKUiKTsKICAgIC8vIHJlaihmYWxzZSkKICAgIHJldHVybjsKICB9CgogIC8vIGNvbnN0IGVuY3J5cHRTTTQgPSAnMDQnICsgc20yLmRvRW5jcnlwdChTTTRfS0VZLCBTTTJfUFVCTElDS19LRVksIDApIC8v5bCGU000X0tFWeS9v+eUqFNNMuWFrOmSpei/m+ihjOWKoOWvhgoKICByZXR1cm4gZW5jcnlwdERhdGE7CiAgLy8gfSkKfQoKLy/mjqXlj6PmlbDmja7op6Plr4YKZXhwb3J0IGZ1bmN0aW9uIGRlY3J5cHRfU000KGRhdGEpIHsKICAvLyByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7CiAgLy8gY29uc3QgU000X0tFWSA9IHNtMi5kb0RlY3J5cHQoZGF0YSwgU00yX1BSSVZBVEVfS0VZLCAwKSAvL+S9v+eUqFNNMuengemSpeino+WvhuiOt+WPllNNNF9LRVkKCiAgaWYgKCFTTTRfS0VZKSB7CiAgICBjb25zb2xlLndhcm4oIlNNNOWvhumSpeino+WvhuWksei0pSIpOwogICAgLy8gcmVqKGZhbHNlKQogICAgcmV0dXJuOwogIH0KICBjb25zdCBkZWNyeXB0RGF0YSA9IGRlY3J5cHQoZGF0YSwgU000X0tFWSk7IC8v5L2/55SoU000X0tFWeino+WvhgogIGlmICghZGVjcnlwdERhdGEpIHsKICAgIGNvbnNvbGUud2Fybigi5pWw5o2u6Kej5a+G5aSx6LSlIik7CiAgICAvLyByZWooZmFsc2UpCiAgICByZXR1cm47CiAgfQogIHJldHVybiBkZWNyeXB0RGF0YTsKICAvLyB9KQp9CmV4cG9ydCBmdW5jdGlvbiBlbmNyeXB0X1NNMihkYXRhKSB7CiAgY29uc3QgZW5jcnlwdFNNMiA9ICIwNCIgKyBzbTIuZG9FbmNyeXB0KGRhdGEsIFNNMl9CQUNLX1BVQkxJQ0tfS0VZLCAwKTsKICByZXR1cm4gZW5jcnlwdFNNMjsKfQpleHBvcnQgZnVuY3Rpb24gZGVjcnlwdF9TTTIoZGF0YSkgewogIGRhdGEgPSBkYXRhLnNsaWNlKDIpOwogIGNvbnN0IGRlY3J5cHRTTTIgPSBzbTIuZG9EZWNyeXB0KGRhdGEsIFNNMl9QUklWQVRFX0tFWSwgMCk7CiAgcmV0dXJuIGRlY3J5cHRTTTI7Cn0="},{"version":3,"names":["sm2","SM2_BACK_PUBLICK_KEY","SM2_PRIVATE_KEY","SM4_KEY","encrypt","plaintext","key","sm4","Sm4utils","Object","JSON","stringify","encryptData","encryptData_ECB","decrypt","ciphertext","decryptData","decryptData_ECB","charAt","parse","encrypt_SM4","data","console","warn","decrypt_SM4","encrypt_SM2","encryptSM2","doEncrypt","decrypt_SM2","slice","decryptSM2","doDecrypt"],"sources":["E:/ty_project/xasw-yy/revenue/xasw-mobile/src/utils/encryption/sm4.js"],"sourcesContent":["/*\r\n * @Description: SM4 加密/解密\r\n * @Author: ye_xf\r\n * @Date: 2021-02-04 10:13:58\r\n * @LastEditTime: 2021-08-31 14:03:40\r\n * @LastEditors: Please set LastEditors\r\n * @Reference:\r\n */\r\n\r\nimport { sm2 } from \"sm-crypto\";\r\n// #SM2后端公钥\r\nlet SM2_BACK_PUBLICK_KEY =\r\n  \"042035cffeacda14f4a768425070db8fbe136c72b835818c555debe330c1d220da514ca466b6c171cc2445844c70cb0032ee7df0b4a11fd4097a929770fc33c07d\";\r\n// #SM2前端端公钥\r\n// let SM2_PUBLICK_KEY = '045aa0015cc1b6bfdefa5afd4046c78b5b090cd658d92a26315bff6c805b1fcfb279b3b5bad168ff1a1fdb7ed91d4101ef34ae629143fdb921c643f73dbb9cd13e'\r\n// #SM2私钥\r\nlet SM2_PRIVATE_KEY = \"3ef9efeaf054adbfafdf106c9510fcbdfb4cdff2bd52f16de9bbc005a39fe970\";\r\n// let SM2_PRIVATE_KEY = 'fadf82c47128710e0e5ccb21c9c5fb86ff5b5f72aa7b17c1f7d779023b004497'\r\n// #SM4密钥\r\nlet SM4_KEY = \"43869399C1411A3BE71A99B35123AEFC\";\r\n//生成SM4密钥\r\n// function getKey(length = 32) {\r\n//   let random = '0123456789ABCDEF'\r\n//   let str = ''\r\n\r\n//   for (let i = 0; i < length; i++) {\r\n//     str = str + random.charAt(Math.floor(Math.random() * 16))\r\n//   }\r\n\r\n//   return str\r\n// }\r\n\r\n//加密\r\nfunction encrypt(plaintext, key) {\r\n  // eslint-disable-next-line no-undef\r\n  const sm4 = new Sm4utils(key);\r\n\r\n  if (plaintext instanceof Object) {\r\n    plaintext = JSON.stringify(plaintext);\r\n  }\r\n\r\n  const encryptData = sm4.encryptData_ECB(plaintext);\r\n\r\n  if (!encryptData) {\r\n    return false;\r\n  } else {\r\n    return encryptData;\r\n  }\r\n}\r\n\r\n//解密\r\nfunction decrypt(ciphertext, key) {\r\n  // eslint-disable-next-line no-undef\r\n  const sm4 = new Sm4utils(key);\r\n  let decryptData = sm4.decryptData_ECB(ciphertext);\r\n\r\n  if (!decryptData) {\r\n    return false;\r\n  }\r\n\r\n  if (decryptData.charAt(0) === \"{\" || decryptData.charAt(0) === \"[\") {\r\n    decryptData = JSON.parse(decryptData);\r\n  }\r\n\r\n  return decryptData;\r\n}\r\n\r\n//接口数据加密\r\nexport function encrypt_SM4(data) {\r\n  // return new Promise((res, rej) => {\r\n  //从浏览器缓存中获取SM4\r\n  // const SM4_KEY = storage.get('sm4_key')\r\n\r\n  // if (!SM4_KEY) {\r\n  //     SM4_KEY = getKey() //获取SM4密钥\r\n  //     storage.set('sm4_key', SM4_KEY) //将SM4密钥存储到浏览器缓存中\r\n  // }\r\n\r\n  const encryptData = encrypt(data, SM4_KEY);\r\n\r\n  if (!encryptData) {\r\n    console.warn(\"数据加密失败\");\r\n    // rej(false)\r\n    return;\r\n  }\r\n\r\n  // const encryptSM4 = '04' + sm2.doEncrypt(SM4_KEY, SM2_PUBLICK_KEY, 0) //将SM4_KEY使用SM2公钥进行加密\r\n\r\n  return encryptData;\r\n  // })\r\n}\r\n\r\n//接口数据解密\r\nexport function decrypt_SM4(data) {\r\n  // return new Promise((res, rej) => {\r\n  // const SM4_KEY = sm2.doDecrypt(data, SM2_PRIVATE_KEY, 0) //使用SM2私钥解密获取SM4_KEY\r\n\r\n  if (!SM4_KEY) {\r\n    console.warn(\"SM4密钥解密失败\");\r\n    // rej(false)\r\n    return;\r\n  }\r\n\r\n  const decryptData = decrypt(data, SM4_KEY); //使用SM4_KEY解密\r\n  if (!decryptData) {\r\n    console.warn(\"数据解密失败\");\r\n    // rej(false)\r\n    return;\r\n  }\r\n\r\n  return decryptData;\r\n  // })\r\n}\r\nexport function encrypt_SM2(data) {\r\n  const encryptSM2 = \"04\" + sm2.doEncrypt(data, SM2_BACK_PUBLICK_KEY, 0);\r\n  return encryptSM2;\r\n}\r\nexport function decrypt_SM2(data) {\r\n  data = data.slice(2);\r\n\r\n  const decryptSM2 = sm2.doDecrypt(data, SM2_PRIVATE_KEY, 0);\r\n\r\n  return decryptSM2;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,GAAG,QAAQ,WAAW;AAC/B;AACA,IAAIC,oBAAoB,GACtB,oIAAoI;AACtI;AACA;AACA;AACA,IAAIC,eAAe,GAAG,kEAAkE;AACxF;AACA;AACA,IAAIC,OAAO,GAAG,kCAAkC;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAASC,OAAOA,CAACC,SAAS,EAAEC,GAAG,EAAE;EAC/B;EACA,MAAMC,GAAG,GAAG,IAAIC,QAAQ,CAACF,GAAG,CAAC;EAE7B,IAAID,SAAS,YAAYI,MAAM,EAAE;IAC/BJ,SAAS,GAAGK,IAAI,CAACC,SAAS,CAACN,SAAS,CAAC;EACvC;EAEA,MAAMO,WAAW,GAAGL,GAAG,CAACM,eAAe,CAACR,SAAS,CAAC;EAElD,IAAI,CAACO,WAAW,EAAE;IAChB,OAAO,KAAK;EACd,CAAC,MAAM;IACL,OAAOA,WAAW;EACpB;AACF;;AAEA;AACA,SAASE,OAAOA,CAACC,UAAU,EAAET,GAAG,EAAE;EAChC;EACA,MAAMC,GAAG,GAAG,IAAIC,QAAQ,CAACF,GAAG,CAAC;EAC7B,IAAIU,WAAW,GAAGT,GAAG,CAACU,eAAe,CAACF,UAAU,CAAC;EAEjD,IAAI,CAACC,WAAW,EAAE;IAChB,OAAO,KAAK;EACd;EAEA,IAAIA,WAAW,CAACE,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIF,WAAW,CAACE,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;IAClEF,WAAW,GAAGN,IAAI,CAACS,KAAK,CAACH,WAAW,CAAC;EACvC;EAEA,OAAOA,WAAW;AACpB;;AAEA;AACA,OAAO,SAASI,WAAWA,CAACC,IAAI,EAAE;EAChC;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA,MAAMT,WAAW,GAAGR,OAAO,CAACiB,IAAI,EAAElB,OAAO,CAAC;EAE1C,IAAI,CAACS,WAAW,EAAE;IAChBU,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;IACtB;IACA;EACF;;EAEA;;EAEA,OAAOX,WAAW;EAClB;AACF;;AAEA;AACA,OAAO,SAASY,WAAWA,CAACH,IAAI,EAAE;EAChC;EACA;;EAEA,IAAI,CAAClB,OAAO,EAAE;IACZmB,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC;IACzB;IACA;EACF;EAEA,MAAMP,WAAW,GAAGF,OAAO,CAACO,IAAI,EAAElB,OAAO,CAAC,CAAC,CAAC;EAC5C,IAAI,CAACa,WAAW,EAAE;IAChBM,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;IACtB;IACA;EACF;EAEA,OAAOP,WAAW;EAClB;AACF;AACA,OAAO,SAASS,WAAWA,CAACJ,IAAI,EAAE;EAChC,MAAMK,UAAU,GAAG,IAAI,GAAG1B,GAAG,CAAC2B,SAAS,CAACN,IAAI,EAAEpB,oBAAoB,EAAE,CAAC,CAAC;EACtE,OAAOyB,UAAU;AACnB;AACA,OAAO,SAASE,WAAWA,CAACP,IAAI,EAAE;EAChCA,IAAI,GAAGA,IAAI,CAACQ,KAAK,CAAC,CAAC,CAAC;EAEpB,MAAMC,UAAU,GAAG9B,GAAG,CAAC+B,SAAS,CAACV,IAAI,EAAEnB,eAAe,EAAE,CAAC,CAAC;EAE1D,OAAO4B,UAAU;AACnB"}]}