{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\inspectMap\\mixins\\mixins.js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\inspectMap\\mixins\\mixins.js","mtime":1708928163424},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UtYWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCB7IGdpc0RvbWFpbiB9IGZyb20gJy4uL3NldHRpbmdzLmpzJzsKaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tICcuLi91dGlscy9hY3Rpb24uanMnOwppbXBvcnQgYnVzIGZyb20gIi4uL3V0aWxzL0J1cy5qcyI7CmltcG9ydCB7IHNob3dQcm9wZXJ0aWVzMiB9IGZyb20gIkAvY29tbW9uL3Byb3BlcnRpZXMuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnOwppbXBvcnQgY291bnRUaW1lUG9wIGZyb20gIi4uL2NvbXBvbmVudHMvY291bnRUaW1lUG9wLnZ1ZSI7CmltcG9ydCBsYXllcnMgZnJvbSAnLi9sYXllckNvbmZpZyc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBib3JkZXIgZnJvbSAnLi4vdXRpbHMvYm9yZGVyLmpzb24nOwppbXBvcnQgQVBJIGZyb20gJ0AvY29tbW9uL2NvbmZpZy5qcyc7CmltcG9ydCBiYXNlVXJsIGZyb20gIkAvY29tbW9uL2NvbmZpZy5qcyI7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInOwppbXBvcnQgUG9wdXAgZnJvbSAnLi4vY29tcG9uZW50cy9wb3B1cC52dWUnOwpjb25zdCBQb3B1cEl0ZW0gPSBWdWUuZXh0ZW5kKFBvcHVwKTsKaW1wb3J0ICogYXMgdHVyZiBmcm9tICdAdHVyZi90dXJmJzsKaW1wb3J0IHsgcmVjb3JkSW5zcExpbmUgfSBmcm9tICcuLi8uLi9pbnNwZWN0aW9uTWFuYWdlL2FwaS5qcyc7CmNvbnN0IENvdW50VGltZVBvcCA9IFZ1ZS5leHRlbmQoY291bnRUaW1lUG9wKTsKY29uc3QgbGF5ZXJfeXVoYW5nX3dzID0gW3sKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NnX3N5bWJvbCIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImZpbHRlciI6IFsnYWxsJywgWydoYXMnLCAnY2FsaWJlciddLCBbJ2FueScsIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcwJ10sIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcxJ11dXSwKICAic291cmNlIjogInl1aGFuZ193c193c2ciLAogICJzb3VyY2UtbGF5ZXIiOiAid3Nfd3NnIiwKICAibGF5b3V0IjogewogICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCiAgICAic3ltYm9sLXBsYWNlbWVudCI6ICJsaW5lIiwKICAgICJzeW1ib2wtc3BhY2luZyI6IFsnaW50ZXJwb2xhdGUnLCBbJ2xpbmVhciddLCBbJ3pvb20nXSwgMTAsIDUsIDE1LCA1MCwgMTgsIDEwMF0sCiAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRlIjogMCwKICAgICJpY29uLXJvdGF0ZSI6IFsiKiIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiZmxvd2RpciJdXSwgMTgwXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIsCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAiaWNvbi1wYWRkaW5nIjogMiwKICAgICJpY29uLW9mZnNldCI6IFswLCAtNV0sCiAgICAidGV4dC1wYWRkaW5nIjogMCwKICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAogICAgImljb24taW1hZ2UiOiAiamlhbnRvdSIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogInJnYmEoMTQ1LCA4MCwgOSwgMSkiLAogICAgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NnIiwKICAidHlwZSI6ICJsaW5lIiwKICAic291cmNlIjogInl1aGFuZ193c193c2ciLAogICJzb3VyY2UtbGF5ZXIiOiAid3Nfd3NnIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDE0NSwgODAsIDksIDEpIiwKICAgICJsaW5lLXdpZHRoIjogWyIrIiwgWyIvIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJjYWxpYmVyIl1dLCA1MDBdLCAwLjJdCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ3dzX3dzX3BqZ19zeW1ib2wiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDExLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3BqZyIsCiAgImZpbHRlciI6IFsnYW55JywgWyc9PScsIFsnZ2V0JywgJ2Zsb3dkaXInXSwgJzAnXSwgWyc9PScsIFsnZ2V0JywgJ2Zsb3dkaXInXSwgJzEnXV0sCiAgInNvdXJjZS1sYXllciI6ICJwc19wamciLAogICJsYXlvdXQiOiB7CiAgICAidGV4dC1maWVsZCI6IFsiY29uY2F0IiwgIkROIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwKICAgICJzeW1ib2wtcGxhY2VtZW50IjogImxpbmUiLAogICAgInN5bWJvbC1zcGFjaW5nIjogWydpbnRlcnBvbGF0ZScsIFsnbGluZWFyJ10sIFsnem9vbSddLCAxMCwgNSwgMTUsIDUwLCAxOCwgMTAwXSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGUiOiAwLAogICAgImljb24tcm90YXRlIjogWyIqIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJmbG93ZGlyIl1dLCAxODBdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIiwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJpY29uLXBhZGRpbmciOiAyLAogICAgImljb24tb2Zmc2V0IjogWzAsIC01XSwKICAgICJ0ZXh0LXBhZGRpbmciOiAwLAogICAgImljb24tdGV4dC1maXQiOiAibm9uZSIsCiAgICAiaWNvbi1pbWFnZSI6ICJwamdqdCIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogIiNGMjYyRkYiLAogICAgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nd3Nfd3NfcGpnIiwKICAidHlwZSI6ICJsaW5lIiwKICAic291cmNlIjogInl1aGFuZ193c19wamciLAogICJzb3VyY2UtbGF5ZXIiOiAicHNfcGpnIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTEsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICIjRjI2MkZGIiwKICAgICJsaW5lLXdpZHRoIjogWyIrIiwgWyIvIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJjYWxpYmVyIl1dLCA1MDBdLCAwLjJdCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ3dzX3dzX3dzZ3d5aiIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfd3Nfd3Nnd3lqIiwKICAic291cmNlLWxheWVyIjogIndzX3dzZ3d5aiIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDExLAogICJsYXlvdXQiOiB7CiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgImxpbmUtY29sb3IiOiAiI2RlNWEwMyIsCiAgICAibGluZS13aWR0aCI6IFsiKyIsIFsiLyIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwgNTAwXSwgMC4yXQogIH0KfSwgewogICJpZCI6ICJ5dWhhbmd3c193c193c2d3eWpfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxMSwKICAic291cmNlIjogInl1aGFuZ193c193c2d3eWoiLAogICJmaWx0ZXIiOiBbJ2FueScsIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcwJ10sIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcxJ11dLAogICJzb3VyY2UtbGF5ZXIiOiAid3Nfd3Nnd3lqIiwKICAibGF5b3V0IjogewogICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCiAgICAic3ltYm9sLXBsYWNlbWVudCI6ICJsaW5lIiwKICAgICJzeW1ib2wtc3BhY2luZyI6IFsnaW50ZXJwb2xhdGUnLCBbJ2xpbmVhciddLCBbJ3pvb20nXSwgMTAsIDUsIDE1LCA1MCwgMTgsIDEwMF0sCiAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRlIjogMCwKICAgICJpY29uLXJvdGF0ZSI6IFsiKiIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiZmxvd2RpciJdXSwgMTgwXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIsCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAiaWNvbi1wYWRkaW5nIjogMiwKICAgICJpY29uLW9mZnNldCI6IFswLCAtNV0sCiAgICAidGV4dC1wYWRkaW5nIjogMCwKICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAogICAgImljb24taW1hZ2UiOiAid3lqZ3hqdCIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogIiNkZTVhMDMiLAogICAgImljb24tY29sb3IiOiAiI2RlNWEwMyIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn1dOwpjb25zdCBsYXllcl95dWhhbmdfZ3MgPSBbewogICJpZCI6ICJ5dWhhbmdnc19nc183NW1teXhnZCIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfNzVtbSIsCiAgInNvdXJjZS1sYXllciI6ICJnc183NW1teXhnZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE1LAogICJsYXlvdXQiOiB7CiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgImxpbmUtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJsaW5lLXdpZHRoIjogWyIrIiwgWyIvIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJjYWxpYmVyIl1dLCA1MDBdLCAwLjJdCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ2dzX2dzXzc1XzMwMG1tZ2QiLAogICJ0eXBlIjogImxpbmUiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzXzc1LTMwMG1tIiwKICAic291cmNlLWxheWVyIjogImdzXzc1XzMwMG1tZ2QiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJsaW5lLWNvbG9yIjogInJnYmEoNTcsIDE1NCwgMjM0LCAxKSIsCiAgICAibGluZS13aWR0aCI6IFsiKyIsIFsiLyIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwgNTAwXSwgMC4yXQogIH0KfSwgewogICJpZCI6ICJ5dWhhbmdnc19nc18zMDBfNTAwbW1nZCIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfMzAwLTUwMG1tIiwKICAic291cmNlLWxheWVyIjogImdzXzMwMF81MDBtbWdkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTMsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDU3LCAxNTQsIDIzNCwgMSkiLAogICAgImxpbmUtd2lkdGgiOiBbIisiLCBbIi8iLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImNhbGliZXIiXV0sIDUwMF0sIDAuMl0KICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nZ3NfZ3NfNTAwXzgwMG1tZ2QiLAogICJ0eXBlIjogImxpbmUiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzXzUwMC04MDBtbSIsCiAgInNvdXJjZS1sYXllciI6ICJnc181MDBfODAwbW1nZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDEyLAogICJsYXlvdXQiOiB7CiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgImxpbmUtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJsaW5lLXdpZHRoIjogWyIrIiwgWyIvIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJjYWxpYmVyIl1dLCA1MDBdLCAwLjJdCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ2dzX2dzXzgwMG1teXNnZCIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfODAwbW0iLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfODAwbW15c2dkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDU3LCAxNTQsIDIzNCwgMSkiLAogICAgImxpbmUtd2lkdGgiOiBbIisiLCBbIi8iLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImNhbGliZXIiXV0sIDUwMF0sIDAuMl0KICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nZ3NfZ3NfeXNneCIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfeXNneCIsCiAgInNvdXJjZS1sYXllciI6ICJnc195c2d4IiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDE2OCwgMTY4LCAwLCAxKSIsCiAgICAibGluZS13aWR0aCI6IFsiKyIsIFsiLyIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwgNTAwXSwgMC4yXQogIH0KfSwKLy8gewovLyAgICAgImlkIjogInl1aGFuZ2dzX2dzX2ZxZ3giLAovLyAgICAgInR5cGUiOiAibGluZSIsCi8vICAgICAic291cmNlIjogInl1aGFuZ19nc19mcWd4IiwKLy8gICAgICJzb3VyY2UtbGF5ZXIiOiAiZ3NfZnFneCIsCi8vICAgICAibWF4em9vbSI6MjQsCi8vICAgICAibWluem9vbSI6IDE1LAovLyAgICAgImxheW91dCI6IHsgInZpc2liaWxpdHkiOiAidmlzaWJsZSIgfSwKLy8gICAgICJwYWludCI6IHsKLy8gICAgICAgICAibGluZS1jb2xvciI6ICJyZ2JhKDE2OCwgMTY4LCAwLCAxKSIsCi8vICAgICAgICAgImxpbmUtd2lkdGgiOiBbIisiLCBbIi8iLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImNhbGliZXIiXV0sIDUwMF0sIDAuMl0KLy8gICAgIH0KLy8gfSwKewogICJpZCI6ICJ5dWhhbmdnc19nc183NW1teXhnZF9zeW1ib2wiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfNzVtbSIsCiAgInNvdXJjZS1sYXllciI6ICJnc183NW1teXhnZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE1LAogICJsYXlvdXQiOiB7CiAgICAidGV4dC1maWVsZCI6IFsiY29uY2F0IiwgIkROIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwKICAgICJzeW1ib2wtcGxhY2VtZW50IjogImxpbmUiLAogICAgInN5bWJvbC1zcGFjaW5nIjogWydpbnRlcnBvbGF0ZScsIFsnbGluZWFyJ10sIFsnem9vbSddLCAxMCwgNSwgMTUsIDUwLCAxOCwgMTAwXSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGUiOiAwLAogICAgImljb24tcm90YXRlIjogWyIqIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJmbG93ZGlyIl1dLCAxODBdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIiwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJpY29uLXBhZGRpbmciOiAyLAogICAgImljb24tb2Zmc2V0IjogWzAsIC01XSwKICAgICJ0ZXh0LXBhZGRpbmciOiAwLAogICAgImljb24tdGV4dC1maXQiOiAibm9uZSIsCiAgICAvLyAiaWNvbi1pbWFnZSI6ICJHUy1qaWFudG91IiwKICAgICJ0ZXh0LW1heC13aWR0aCI6IDEwLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAic3ltYm9sLXotb3JkZXIiOiAiYXV0byIsCiAgICAidGV4dC1qdXN0aWZ5IjogImNlbnRlciIsCiAgICAidGV4dC13cml0aW5nLW1vZGUiOiBbXSwKICAgICJpY29uLXNpemUiOiAxLjYsCiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgInRleHQtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJpY29uLWNvbG9yIjogInJnYmEoNTksIDU1LCA1NSwgMSkiLAogICAgJ3RleHQtaGFsby1jb2xvcic6ICIjZmZmZmZmIiwKICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ2dzX2dzXzc1XzMwMG1tZ2Rfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzXzc1LTMwMG1tIiwKICAic291cmNlLWxheWVyIjogImdzXzc1XzMwMG1tZ2QiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCiAgICAic3ltYm9sLXBsYWNlbWVudCI6ICJsaW5lIiwKICAgICJzeW1ib2wtc3BhY2luZyI6IFsnaW50ZXJwb2xhdGUnLCBbJ2xpbmVhciddLCBbJ3pvb20nXSwgMTAsIDUsIDE1LCA1MCwgMTgsIDEwMF0sCiAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRlIjogMCwKICAgICJpY29uLXJvdGF0ZSI6IFsiKiIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiZmxvd2RpciJdXSwgMTgwXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIsCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAiaWNvbi1wYWRkaW5nIjogMiwKICAgICJpY29uLW9mZnNldCI6IFswLCAtNV0sCiAgICAidGV4dC1wYWRkaW5nIjogMCwKICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAogICAgLy8gImljb24taW1hZ2UiOiAiR1MtamlhbnRvdSIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogInJnYmEoNTcsIDE1NCwgMjM0LCAxKSIsCiAgICAiaWNvbi1jb2xvciI6ICJyZ2JhKDU5LCA1NSwgNTUsIDEpIiwKICAgICd0ZXh0LWhhbG8tY29sb3InOiAiI2ZmZmZmZiIsCiAgICAndGV4dC1oYWxvLXdpZHRoJzogMQogIH0KfSwgewogICJpZCI6ICJ5dWhhbmdnc19nc18zMDBfNTAwbW1nZF9zeW1ib2wiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfMzAwLTUwMG1tIiwKICAic291cmNlLWxheWVyIjogImdzXzMwMF81MDBtbWdkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTMsCiAgImxheW91dCI6IHsKICAgICJ0ZXh0LWZpZWxkIjogWyJjb25jYXQiLCAiRE4iLCBbImdldCIsICJjYWxpYmVyIl1dLAogICAgInN5bWJvbC1wbGFjZW1lbnQiOiAibGluZSIsCiAgICAic3ltYm9sLXNwYWNpbmciOiBbJ2ludGVycG9sYXRlJywgWydsaW5lYXInXSwgWyd6b29tJ10sIDEwLCA1LCAxNSwgNTAsIDE4LCAxMDBdLAogICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0ZSI6IDAsCiAgICAiaWNvbi1yb3RhdGUiOiBbIioiLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImZsb3dkaXIiXV0sIDE4MF0sCiAgICAidGV4dC1zaXplIjogMTYsCiAgICAidGV4dC1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInRleHQtcGl0Y2gtYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgImljb24tcGFkZGluZyI6IDIsCiAgICAiaWNvbi1vZmZzZXQiOiBbMCwgLTVdLAogICAgInRleHQtcGFkZGluZyI6IDAsCiAgICAiaWNvbi10ZXh0LWZpdCI6ICJub25lIiwKICAgIC8vICJpY29uLWltYWdlIjogIkdTLWppYW50b3UiLAogICAgInRleHQtbWF4LXdpZHRoIjogMTAsCiAgICAiaWNvbi1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJzeW1ib2wtei1vcmRlciI6ICJhdXRvIiwKICAgICJ0ZXh0LWp1c3RpZnkiOiAiY2VudGVyIiwKICAgICJ0ZXh0LXdyaXRpbmctbW9kZSI6IFtdLAogICAgImljb24tc2l6ZSI6IDEuNiwKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAidGV4dC1jb2xvciI6ICJyZ2JhKDU3LCAxNTQsIDIzNCwgMSkiLAogICAgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nZ3NfZ3NfNTAwXzgwMG1tZ2Rfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzXzUwMC04MDBtbSIsCiAgInNvdXJjZS1sYXllciI6ICJnc181MDBfODAwbW1nZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDEyLAogICJsYXlvdXQiOiB7CiAgICAidGV4dC1maWVsZCI6IFsiY29uY2F0IiwgIkROIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwKICAgICJzeW1ib2wtcGxhY2VtZW50IjogImxpbmUiLAogICAgInN5bWJvbC1zcGFjaW5nIjogWydpbnRlcnBvbGF0ZScsIFsnbGluZWFyJ10sIFsnem9vbSddLCAxMCwgNSwgMTUsIDUwLCAxOCwgMTAwXSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGUiOiAwLAogICAgImljb24tcm90YXRlIjogWyIqIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJmbG93ZGlyIl1dLCAxODBdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIiwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJpY29uLXBhZGRpbmciOiAyLAogICAgImljb24tb2Zmc2V0IjogWzAsIC01XSwKICAgICJ0ZXh0LXBhZGRpbmciOiAwLAogICAgImljb24tdGV4dC1maXQiOiAibm9uZSIsCiAgICAvLyAiaWNvbi1pbWFnZSI6ICJHUy1qaWFudG91IiwKICAgICJ0ZXh0LW1heC13aWR0aCI6IDEwLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAic3ltYm9sLXotb3JkZXIiOiAiYXV0byIsCiAgICAidGV4dC1qdXN0aWZ5IjogImNlbnRlciIsCiAgICAidGV4dC13cml0aW5nLW1vZGUiOiBbXSwKICAgICJpY29uLXNpemUiOiAxLjYsCiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgInRleHQtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJpY29uLWNvbG9yIjogInJnYmEoNTksIDU1LCA1NSwgMSkiLAogICAgJ3RleHQtaGFsby1jb2xvcic6ICIjZmZmZmZmIiwKICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ2dzX2dzXzgwMG1teXNnZF9zeW1ib2wiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfODAwbW0iLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfODAwbW15c2dkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ0ZXh0LWZpZWxkIjogWyJjb25jYXQiLCAiRE4iLCBbImdldCIsICJjYWxpYmVyIl1dLAogICAgInN5bWJvbC1wbGFjZW1lbnQiOiAibGluZSIsCiAgICAic3ltYm9sLXNwYWNpbmciOiBbJ2ludGVycG9sYXRlJywgWydsaW5lYXInXSwgWyd6b29tJ10sIDEwLCA1LCAxNSwgNTAsIDE4LCAxMDBdLAogICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0ZSI6IDAsCiAgICAiaWNvbi1yb3RhdGUiOiBbIioiLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImZsb3dkaXIiXV0sIDE4MF0sCiAgICAidGV4dC1zaXplIjogMTYsCiAgICAidGV4dC1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInRleHQtcGl0Y2gtYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgImljb24tcGFkZGluZyI6IDIsCiAgICAiaWNvbi1vZmZzZXQiOiBbMCwgLTVdLAogICAgInRleHQtcGFkZGluZyI6IDAsCiAgICAiaWNvbi10ZXh0LWZpdCI6ICJub25lIiwKICAgIC8vICJpY29uLWltYWdlIjogIkdTLWppYW50b3UiLAogICAgInRleHQtbWF4LXdpZHRoIjogMTAsCiAgICAiaWNvbi1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJzeW1ib2wtei1vcmRlciI6ICJhdXRvIiwKICAgICJ0ZXh0LWp1c3RpZnkiOiAiY2VudGVyIiwKICAgICJ0ZXh0LXdyaXRpbmctbW9kZSI6IFtdLAogICAgImljb24tc2l6ZSI6IDEuNiwKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAidGV4dC1jb2xvciI6ICJyZ2JhKDU3LCAxNTQsIDIzNCwgMSkiLAogICAgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sCi8vIHsKLy8gICAgICJpZCI6ICJ5dWhhbmdnc19nc19nc3F0Z2pnZF9zeW1ib2wiLAovLyAgICAgInR5cGUiOiAic3ltYm9sIiwKLy8gICAgICJzb3VyY2UiOiAieXVoYW5nX2dzX2dzcXRnamdkIiwKLy8gICAgICJzb3VyY2UtbGF5ZXIiOiAiZ3NfZ3NxdGdqZ2QiLAovLyAgICAgIm1heHpvb20iOjI0LAovLyAgICAgIm1pbnpvb20iOiAxNiwKLy8gICAgICJsYXlvdXQiOiB7Ci8vICAgICAgICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCi8vICAgICAgICAgInN5bWJvbC1wbGFjZW1lbnQiOiAibGluZSIsCi8vICAgICAgICAgInN5bWJvbC1zcGFjaW5nIjogWwovLyAgICAgICAgICAgICAnaW50ZXJwb2xhdGUnLAovLyAgICAgICAgICAgICBbJ2xpbmVhciddLAovLyAgICAgICAgICAgICBbJ3pvb20nXSwKLy8gICAgICAgICAgICAgMTAsCi8vICAgICAgICAgICAgIDUsCi8vICAgICAgICAgICAgIDE1LAovLyAgICAgICAgICAgICA1MCwKLy8gICAgICAgICAgICAgMTgsCi8vICAgICAgICAgICAgIDEwMAovLyAgICAgICAgIF0sCi8vICAgICAgICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCi8vICAgICAgICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCi8vICAgICAgICAgInRleHQtcm90YXRlIjogMCwKLy8gICAgICAgICAiaWNvbi1yb3RhdGUiOiBbIioiLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImZsb3dkaXIiXV0sIDE4MF0sCi8vICAgICAgICAgInRleHQtc2l6ZSI6IDE2LAovLyAgICAgICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAovLyAgICAgICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAovLyAgICAgICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAovLyAgICAgICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAovLyAgICAgICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiLAovLyAgICAgICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKLy8gICAgICAgICAiaWNvbi1wYWRkaW5nIjogMiwKLy8gICAgICAgICAiaWNvbi1vZmZzZXQiOiBbMCwgLTVdLAovLyAgICAgICAgICJ0ZXh0LXBhZGRpbmciOiAwLAovLyAgICAgICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAovLyAgICAgICAgIC8vICJpY29uLWltYWdlIjogIkdTLWppYW50b3UiLAovLyAgICAgICAgICJ0ZXh0LW1heC13aWR0aCI6IDEwLAovLyAgICAgICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAovLyAgICAgICAgICJzeW1ib2wtei1vcmRlciI6ICJhdXRvIiwKLy8gICAgICAgICAidGV4dC1qdXN0aWZ5IjogImNlbnRlciIsCi8vICAgICAgICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCi8vICAgICAgICAgImljb24tc2l6ZSI6IDEuNiwKLy8gICAgICAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgovLyAgICAgfSwKLy8gICAgICJwYWludCI6IHsgInRleHQtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsJ3RleHQtaGFsby1jb2xvcic6IiNmZmZmZmYiLCd0ZXh0LWhhbG8td2lkdGgnOjEgfQovLyB9LAp7CiAgImlkIjogInl1aGFuZ2dzX2dzX3lzZ3hfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX3lzZ3giLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfeXNneCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDEwLAogICJsYXlvdXQiOiB7CiAgICAidGV4dC1maWVsZCI6IFsiY29uY2F0IiwgIkROIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwKICAgICJzeW1ib2wtcGxhY2VtZW50IjogImxpbmUiLAogICAgInN5bWJvbC1zcGFjaW5nIjogWydpbnRlcnBvbGF0ZScsIFsnbGluZWFyJ10sIFsnem9vbSddLCAxMCwgNSwgMTUsIDUwLCAxOCwgMTAwXSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGUiOiAwLAogICAgImljb24tcm90YXRlIjogWyIqIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJmbG93ZGlyIl1dLCAxODBdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIiwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJpY29uLXBhZGRpbmciOiAyLAogICAgImljb24tb2Zmc2V0IjogWzAsIC01XSwKICAgICJ0ZXh0LXBhZGRpbmciOiAwLAogICAgImljb24tdGV4dC1maXQiOiAibm9uZSIsCiAgICAvLyAiaWNvbi1pbWFnZSI6ICJHUy1qaWFudG91IiwKICAgICJ0ZXh0LW1heC13aWR0aCI6IDEyLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAic3ltYm9sLXotb3JkZXIiOiAiYXV0byIsCiAgICAidGV4dC1qdXN0aWZ5IjogImNlbnRlciIsCiAgICAidGV4dC13cml0aW5nLW1vZGUiOiBbXSwKICAgICJpY29uLXNpemUiOiAxLjYsCiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgInRleHQtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJpY29uLWNvbG9yIjogInJnYmEoNTksIDU1LCA1NSwgMSkiLAogICAgJ3RleHQtaGFsby1jb2xvcic6ICIjZmZmZmZmIiwKICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxCiAgfQp9XTsKY29uc3QgbGF5ZXJfeXVoYW5nX3lzID0gW3sKICAiaWQiOiAieXVoYW5neXNfeXNfeXNnIiwKICAidHlwZSI6ICJsaW5lIiwKICAic291cmNlIjogInl1aGFuZ195c195c2ciLAogICJzb3VyY2UtbGF5ZXIiOiAieXNfeXNnIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDM5LCA1NCwgMTU1LCAxKSIsCiAgICAibGluZS13aWR0aCI6IFsiKyIsIFsiLyIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwgNTAwXSwgMC4yXQogIH0KfSwgewogICJpZCI6ICJ5dWhhbmd5c195c195c2dfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3lzX3lzZyIsCiAgInNvdXJjZS1sYXllciI6ICJ5c195c2ciLAogICJmaWx0ZXIiOiBbJ2FueScsIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcwJ10sIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcxJ11dLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxMCwKICAibGF5b3V0IjogewogICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCiAgICAic3ltYm9sLXBsYWNlbWVudCI6ICJsaW5lIiwKICAgICJzeW1ib2wtc3BhY2luZyI6IFsnaW50ZXJwb2xhdGUnLCBbJ2xpbmVhciddLCBbJ3pvb20nXSwgMTAsIDUsIDE1LCA1MCwgMTgsIDEwMF0sCiAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRlIjogMCwKICAgICJpY29uLXJvdGF0ZSI6IFsiKiIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiZmxvd2RpciJdXSwgMTgwXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIsCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAiaWNvbi1wYWRkaW5nIjogMiwKICAgICJpY29uLW9mZnNldCI6IFswLCAtNV0sCiAgICAidGV4dC1wYWRkaW5nIjogMCwKICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAogICAgImljb24taW1hZ2UiOiAiWVMtamlhbnRvdSIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogInJnYmEoMzksIDU0LCAxNTUsIDEpIiwKICAgICJpY29uLWNvbG9yIjogInJnYmEoNTksIDU1LCA1NSwgMSkiLAogICAgJ3RleHQtaGFsby1jb2xvcic6ICIjZmZmZmZmIiwKICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxCiAgfQp9XTsKY29uc3QgbGF5ZXJfeXVoYW5nX3lzX2ljb24gPSBbewogIC8v6Zuo5rC05Y+jCiAgImlkIjogInl1aGFuZ3dzX3lzX3lzayIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ195c195c2siLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAic291cmNlLWxheWVyIjogInlzX3lzayIsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInl1c2h1aS15dXNodWlrb3UiLAogICAgImljb24tc2l6ZSI6IDEKICB9Cn0sIHsKICAvL+mbqOawtOS6lQogICJpZCI6ICJ5dWhhbmd5c195c195c2pjaiIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAibWluem9vbSI6IDE1LAogICJtYXh6b29tIjogMjQsCiAgInNvdXJjZSI6ICJ5dWhhbmdfeXNfeXNqIiwKICAic291cmNlLWxheWVyIjogInlzX3lzaiIsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInl1c2h1aS15dXNodWlqaW5nIiwKICAgICJpY29uLXNpemUiOiAxCiAgfQogIC8vICdwYWludCc6ewogIC8vICAgICAnY2lyY2xlLWNvbG9yJzoicmVkIiwKICAvLyAgICAgJ2NpcmNsZS1yYWRpdXMnOjMKICAvLyB9Cn0sIHsKICAvL+iKgueCuQogICJpZCI6ICJ5dWhhbmd5c195c195c2pkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ195c195c2dkIiwKICAic291cmNlLWxheWVyIjogInlzX3lzZ2QiLAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICLpm6jmsLQiLAogICAgImljb24tc2l6ZSI6IDEKICB9Cn0sIHsKICAvL+mbqOawtOaOkuaUvuWPowogICJpZCI6ICJ5dWhhbmd5c195c195c3BmayIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgInNvdXJjZSI6ICJ5dWhhbmdfeXNfeXNwZmsiLAogICJzb3VyY2UtbGF5ZXIiOiAieXNfeXNwZmsiLAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJ5dXNodWktcGFpZmFuZ2tvdSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwKLy8geyAgIAovLyAgICAgLy/nm5HmtYvngrkKLy8gICAgICJpZCI6ICJ5dWhhbmd5c195c195c2pjZCIsCi8vICAgICAidHlwZSI6ICJzeW1ib2wiLAovLyAgICAgInNvdXJjZSI6ICJ5dWhhbmdfeXNfeXNqY2QiLAovLyAgICAgIm1heHpvb20iOjI0LAovLyAgICAgIm1pbnpvb20iOiAxNSwKLy8gICAgICJzb3VyY2UtbGF5ZXIiOiAieXNfeXNqY2QiLAovLyAgICAgImxheW91dCI6ewovLyAgICAgICAgICJpY29uLWltYWdlIjoieXVzaHVpLWppYW5jZWRpYW4iLAovLyAgICAgICAgICJpY29uLXNpemUiOjEKLy8gICAgIH0KLy8gfSwKewogIC8v6Zuo5rC05rO156uZCiAgImlkIjogInl1aGFuZ3lzX3lzX3lzYnoiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfeXNfeXNieiIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDExLAogICJzb3VyY2UtbGF5ZXIiOiAieXNfeXNieiIsCiAgJ2ZpbHRlcic6IFsnYW55JywgWydhbGwnLCBbJz09JywgWydnZXQnLCAnZGlzcGxheV9sZXZlbCddLCAxXSwgWyc+PScsIFsnem9vbSddLCAxMV1dLCBbJ2FsbCcsIFsnPT0nLCBbJ2dldCcsICdkaXNwbGF5X2xldmVsJ10sIDJdLCBbJz49JywgWyd6b29tJ10sIDEyXV0sIFsnYWxsJywgWyc9PScsIFsnZ2V0JywgJ2Rpc3BsYXlfbGV2ZWwnXSwgM10sIFsnPj0nLCBbJ3pvb20nXSwgMTNdXV0sCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInl1c2h1aS1iZW5nemhhbiIsCiAgICAiaWNvbi1zaXplIjogMSwKICAgICJ0ZXh0LWZpZWxkIjogWyJnZXQiLCAibmFtZSJdLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgInRleHQtc2l6ZSI6IDEwLAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIgogIH0KfV07CmNvbnN0IGxheWVyX3l1aGFuZ193c19pY29uID0gW3sKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NjIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3dzYyIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2MiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxMSwKICAibGF5b3V0IjogewogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIsCiAgICAiaWNvbi1pbWFnZSI6ICJ3dXNodWktc2h1aWNoYW5nIiwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAiaWNvbi1zaXplIjogMSwKICAgICJ0ZXh0LWZpZWxkIjogWyJnZXQiLCAibmFtZSJdLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIgogIH0KfSwgewogIC8v6Ze46ZeoCiAgImlkIjogInl1aGFuZ3dzX3dzX3dzem0iLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfd3Nfd3N6bSIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c3ptIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTQsCiAgImxheW91dCI6IHsKICAgICJpY29uLXJvdGF0ZSI6IDM2MCwKICAgICJpY29uLWltYWdlIjogInd1c2h1aS16aGFtZW4iCiAgfQp9LCB7CiAgLy/msaHmsLTlj6MKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NrIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3dzayIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2siLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAid3VzaHVpLXd1c2h1aWtvdSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v566h54K5CiAgImlkIjogInl1aGFuZ3dzX3dzX3dzZ2QiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfd3Nfd3NnZCIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2dkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInd1c2h1aSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v5o6S5pS+5Y+jCiAgImlkIjogInl1aGFuZ3dzX3dzX3dzcGZrIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3dzcGZrIiwKICAic291cmNlLWxheWVyIjogIndzX3dzcGZrIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInd1c2h1aS1wYWlmYW5na291IiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9LCB7CiAgLy/ms7Xnq5kKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NieiIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ193c193c2J6IiwKICAic291cmNlLWxheWVyIjogIndzX3dzYnpfd2l0aF9pb3QiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAnZmlsdGVyJzogWydhbnknLCBbJ2FsbCcsIFsnPT0nLCBbJ2dldCcsICdkaXNwbGF5X2xldmVsJ10sIDFdLCBbJz49JywgWyd6b29tJ10sIDExXV0sIFsnYWxsJywgWyc9PScsIFsnZ2V0JywgJ2Rpc3BsYXlfbGV2ZWwnXSwgMl0sIFsnPj0nLCBbJ3pvb20nXSwgMTJdXSwgWydhbGwnLCBbJz09JywgWydnZXQnLCAnZGlzcGxheV9sZXZlbCddLCAzXSwgWyc+PScsIFsnem9vbSddLCAxM11dXSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAid3VzaHVpLWJlbmd6aGFuIiwKICAgICJpY29uLXNpemUiOiAxLAogICAgInRleHQtZmllbGQiOiBbImdldCIsICJuYW1lIl0sCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAidGV4dC1zaXplIjogMTAsCiAgICAidGV4dC1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInRleHQtcGl0Y2gtYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiCiAgfQp9LCB7CiAgLy/pmIDpl6gKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NmbSIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ193c193c2ZtIiwKICAic291cmNlLWxheWVyIjogIndzX3dzZm0iLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAid3VzaHVpLWZhbWVuIiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9LCB7CiAgLy/msaHmsLTkupUKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NqIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3dzaiIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2oiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAid3VzaHVpLXd1c2h1aWppbmciLAogICAgImljb24tc2l6ZSI6IDEKICB9Cn0sIHsKICAvL+ebkea1i+eCuQogICJpZCI6ICJ5dWhhbmd3c193c193c2pjZCIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ193c193c2pjZCIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2pjZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE1LAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJ3dXNodWktamlhbmNlZGlhbiIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfV07CmNvbnN0IGxheWVyX3l1aGFuZ19nc19pY29uID0gW3sKICAvL+S+m+awtOazteermQogICJpZCI6ICJ5dWhhbmdnc19nc19nc2J6IiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX2dzYnoiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfanlkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgJ2ZpbHRlcic6IFsnYW55JywgWydhbGwnLCBbJz09JywgWydnZXQnLCAnZGlzcGxheV9sZXZlbCddLCAxXSwgWyc+PScsIFsnem9vbSddLCAxMV1dLCBbJ2FsbCcsIFsnPT0nLCBbJ2dldCcsICdkaXNwbGF5X2xldmVsJ10sIDJdLCBbJz49JywgWyd6b29tJ10sIDEyXV0sIFsnYWxsJywgWyc9PScsIFsnZ2V0JywgJ2Rpc3BsYXlfbGV2ZWwnXSwgM10sIFsnPj0nLCBbJ3pvb20nXSwgMTNdXV0sCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogImdvbmdzaHVpLWJlbmd6aGFuIiwKICAgICJpY29uLXNpemUiOiAxLAogICAgInRleHQtZmllbGQiOiBbImdldCIsICJuYW1lIl0sCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAidGV4dC1zaXplIjogMTAsCiAgICAidGV4dC1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInRleHQtcGl0Y2gtYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiCiAgfQp9LCB7CiAgLy/kvpvmsLTpmIDpl6gKICAiaWQiOiAieXVoYW5nZ3NfZ3NfZm0iLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfZm0iLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfZm0iLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNywKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiBbJ2Nhc2UnLCBbJz09JywgWydnZXQnLCAnZGlzcGxheSddLCAn5YeP5Y6L6ZiAJ10sICdnb25nc2h1aS1qaWFueWFmYScsICd5aWJhbmZhbWVuJ10sCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v6Ieq5p2l5rC05Y6CCiAgImlkIjogInl1aGFuZ2dzX2dzX2dzYyIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ19nc19nc2MiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfZ3NjIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogImdvbmdzaHVpLXNodWljaGFuZyIsCiAgICAiaWNvbi1zaXplIjogMSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1maWVsZCI6IFsiZ2V0IiwgIm5hbWUiXSwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIKICB9LAogIHBhaW50OiB7CiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sIHsKICAvL+awtOihqOeusQogICJpZCI6ICJ5dWhhbmdnc19nc19zYngiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3Nfc2J4IiwKICAic291cmNlLWxheWVyIjogImdzX3NieCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE4LAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJzaHVpYmlhb3hpYW5na3VhbmciLAogICAgImljb24tc2l6ZSI6IDEsCiAgICAidGV4dC1maWVsZCI6IFsnY2FzZScsIFsndG8tYm9vbGVhbicsIFsiZ2V0IiwgIm1ldGVyY250Il1dLCAnMCcsIFsiZ2V0IiwgIm1ldGVyY250Il1dLAogICAgInRleHQtc2l6ZSI6IDEyLAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiCiAgfSwKICBwYWludDogewogICAgInRleHQtY29sb3IiOiAnIzM5OWFlYScKICB9Cn0sIHsKICAvL+ebkea1i+eCuQogICJpZCI6ICJ5dWhhbmdnc19nc19qY2QiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfZ3NqY2QiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfbW9uaXRvciIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE0LAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJnb25nc2h1aS1qaWFuY2VkaWFuIiwKICAgICJpY29uLXNpemUiOiAxLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgInRleHQtc2l6ZSI6IDEwLAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIgogIH0KfSwgewogIC8v6IqC54K5CiAgImlkIjogInl1aGFuZ2dzX2dzX2pkIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX2xqZCIsCiAgInNvdXJjZS1sYXllciI6ICJnc19samQiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxOCwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAi5L6b5rC0IiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9LCB7CiAgLy/mtojngavmoJMKICAiaWQiOiAieXVoYW5nZ3NfZ3NfeGhzIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX3hmcyIsCiAgInNvdXJjZS1sYXllciI6ICJnc194ZnMiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNiwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAieGlhb2h1b3NodWFuIiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9LCB7CiAgLy/mjpLmsJTpmIAKICAiaWQiOiAieXVoYW5nZ3NfZ3NfcHFmIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX3BxZiIsCiAgInNvdXJjZS1sYXllciI6ICJnc19wcWYiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAiZ29uZ3NodWktcGFpcWlmYSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v5o6S5rGh6ZiACiAgImlkIjogInl1aGFuZ2dzX2dzX3B3ZiIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ19nc19wd2YiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfcHdmIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogImdvbmdzaHVpLXBhaXd1ZmEiLAogICAgImljb24tc2l6ZSI6IDEKICB9Cn0sIHsKICAvL+aOkuaxoeWPowogICJpZCI6ICJ5dWhhbmdnc19nc19wd2siLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfcHdrIiwKICAic291cmNlLWxheWVyIjogImdzX3B3ayIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE1LAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJnb25nc2h1aS1wYWl3dWtvdSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v6aKE55WZ5Y+jCiAgImlkIjogInl1aGFuZ2dzX2dzX3lsayIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ19nc195bGsiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfeWxrIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogImdvbmdzaHVpLXl1bGl1a291IiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9XTsKY29uc3QgTGF5ZXJUeXBlID0gewogICfkvpvmsLQnOiBbbGF5ZXJfeXVoYW5nX2dzLCBsYXllcl95dWhhbmdfZ3NfaWNvbl0sCiAgJ+mbqOawtCc6IFtsYXllcl95dWhhbmdfeXMsIGxheWVyX3l1aGFuZ195c19pY29uXSwKICAn5rGh5rC0JzogW2xheWVyX3l1aGFuZ193cywgbGF5ZXJfeXVoYW5nX3dzX2ljb25dCn07CmNvbnN0IG1hcE9iaiA9IHsKICBtYXA6IG51bGwsCiAgbWFwSW5zdGFuY2U6IG51bGwKfTsKY29uc3QgcmVjb3JkRmVhdHVyZXMgPSBbXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJtaXhpbnMiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoYXNMaXN0ZW46IGZhbHNlLAogICAgICB1cGxvYWRGaWxlZFBpcGVJZExpc3Q6IFtdLAogICAgICAvLyDkuIrkvKDlpLHotKXnmoTlt7Llt6Hmo4DnrqHnur9pZAogICAgICBjdXJyZW50UG9pbnQ6IG51bGwsCiAgICAgIEdTTDogWyJjYXNlIiwgWyJhbnkiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAiRk0iXSwgWyI9PSIsIFsiZ2V0IiwgIlNCTEIiXSwgIlBRRiJdLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAiUE5GIl1dLCAieWJmbSIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJKWUQiXSwgImdzLWJ6IiwgWyI9PSIsIFsiZ2V0IiwgIlNCTEIiXSwgIlBXSyJdLCAieWJmbSIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJYSFMiXSwgInhocyIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJEQiJdLCAiemR5aCIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJKU0QiXSwgInNieCIsCiAgICAgIC8vIFsnPT0nLFsnZ2V0JywgIlNCTEIiXSwgJ+iHquadpeawtOWOgiddLCfkvpvmsLQt5rC05Y6CJywKICAgICAgImdzIl0sCiAgICAgIFlTTDogWyJjYXNlIiwgWyI9PSIsIFsiZ2V0IiwgIlNCTEIiXSwgIuazteermSJdLCAieXMtYnoiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5o6S5pS+5Y+jIl0sICJ5cy1wZmsiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi6Zuo5rC05Y+jIl0sICJ5cy15c2siLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi6Zuo5rC05LqVIl0sICJ5cy15c2oiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi55uR5rWL54K5Il0sICJ5cy1qY2QiLCAieXMiXSwKICAgICAgV1NMOiBbImNhc2UiLCBbImFueSIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJGTSJdLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5rGh5rC06ZiA6ZeoIl0sIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJQ5rGh5rC06Ze46ZeoTkYiXV0sICJ5YmZtIiwgWyI9PSIsIFsiZ2V0IiwgIlNCTEIiXSwgIuazteermSJdLCAid3MtYnoiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5o6S5pS+5Y+jIl0sICJ3cy1wZmsiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5rGh5rC05Y+jIl0sICJ3cy13c2siLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5rGh5rC05LqVIl0sICJ3cy13c2oiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi55uR5rWL54K5Il0sICJ3cy1qY2QiLAogICAgICAvLyBbJz09JyxbJ2dldCcsICJTQkxCIl0sICfmsaHmsLTljoInXSwgInd1c2h1aS1zaHVpY2hhbmciLAogICAgICAid3MiXSwKICAgICAgYmFzZU1hcHVybDogW2dpc0RvbWFpbiArICIvaXNlcnZlci9zZXJ2aWNlcy9tYXAtbXZ0LVl1SGFuZ1NodWlXdURpVHVRaWVQaWFuL3Jlc3Rqc3IvdjEvdmVjdG9ydGlsZS9tYXBzL+S9meadreawtOWKoeW6leWbvuWIh+eJhy9zdHlsZS5qc29uIiwgZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL21hcC1tdnQtSmlhblpodUhlTHZEaS9yZXN0anNyL3YxL3ZlY3RvcnRpbGUvbWFwcy/lu7rnrZHlkoznu7/lnLAvc3R5bGUuanNvbiIsIGdpc0RvbWFpbiArICIvaXNlcnZlci9zZXJ2aWNlcy9tYXAtbXZ0LVl1SGFuZ1F1SGFuZ1poZW5nUXVIdWFTaGlMaWFuZ1dhUGlhbi9yZXN0anNyL3YxL3ZlY3RvcnRpbGUvbWFwcy/kvZnmna3ljLrooYzmlL/ljLrliJLnn6Lph4/nk6bniYcvc3R5bGUuanNvbiIsIGdpc0RvbWFpbiArICIvaXNlcnZlci9zZXJ2aWNlcy9tYXAtbXZ0LVl1SGFuZ1NodWlXdUx1V2FuZ1NodWlYaURpVHVRaWVQaWFuL3Jlc3Rqc3IvdjEvdmVjdG9ydGlsZS9tYXBzL+S9meadreawtOWKoei3r+e9keawtOezu+W6leWbvuWIh+eJhy9zdHlsZS5qc29uIl0sCiAgICAgIGJ6TGF5ZXJVcmxzOiBbZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL21hcC1tdnQtR29uZ1NodWlHdWFuWGlhbkJpYW9aaHUvcmVzdGpzci92MS92ZWN0b3J0aWxlL21hcHMv5L6b5rC0566h57q/5qCH5rOoL3N0eWxlLmpzb24iLCBnaXNEb21haW4gKyAiL2lzZXJ2ZXIvc2VydmljZXMvbWFwLW12dC1ZdVNodWlHdWFuWGlhbkJpYW9aaHUyL3Jlc3Rqc3IvdjEvdmVjdG9ydGlsZS9tYXBzL+mbqOawtOeuoee6v+agh+azqC9zdHlsZS5qc29uIiwgZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL21hcC1tdnQtV3VTaHVpR3VhblhpYW5CaWFvWmh1Mi9yZXN0anNyL3YxL3ZlY3RvcnRpbGUvbWFwcy/msaHmsLTnrqHnur/moIfms6gvc3R5bGUuanNvbiJdLAogICAgICB0aW1lcjogW10sCiAgICAgIC8v5L6b5rC055+i6YeP55Om54mH5pyN5YqhCiAgICAgIGdzVXJsOiBnaXNEb21haW4gKyAiL2lzZXJ2ZXIvc2VydmljZXMvbWFwLW12dC1Hb25nU2h1aS9yZXN0anNyL3YxL3ZlY3RvcnRpbGUvbWFwcy/kvpvmsLQvc3R5bGUuanNvbiIsCiAgICAgIC8v6Zuo5rC055+i6YeP55Om54mH5pyN5YqhCiAgICAgIHlzVXJsOiBnaXNEb21haW4gKyAiL2lzZXJ2ZXIvc2VydmljZXMvbWFwLW12dC1ZdVNodWkvcmVzdGpzci92MS92ZWN0b3J0aWxlL21hcHMv6Zuo5rC0L3N0eWxlLmpzb24iLAogICAgICAvL+axoeawtOefoumHj+eTpueJh+acjeWKoQogICAgICB3c1VybDogZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL21hcC1tdnQtV3VTaHVpL3Jlc3Rqc3IvdjEvdmVjdG9ydGlsZS9tYXBzL+axoeawtC9zdHlsZS5qc29uIiwKICAgICAgc3dMYXllcjogewogICAgICAgICfkvpvmsLQnOiBbXSwKICAgICAgICAn6Zuo5rC0JzogW10sCiAgICAgICAgJ+axoeawtCc6IFtdCiAgICAgIH0sCiAgICAgIHZtOiBudWxsLAogICAgICBkZXZpY2VMYXllcnM6IFtdLAogICAgICBmYWN0b3J5TmFtZU1hcmtlcnM6IFtdLAogICAgICAvL+mAieS4reiuvuaWvQogICAgICBjaG9vc2VEZXZpY2U6IFtdLAogICAgICBkaXlQb2ludDoge30sCiAgICAgIC8v5Y2P5Yqe5Lq6CiAgICAgIG1hcmtlcjogbnVsbCwKICAgICAgaXNPbkxvYWQ6IGZhbHNlLAogICAgICBldmVudDogIiIsCiAgICAgIGRhdGFiYXNlTmFtZXM6IFsn5L6b5rC0OuS+m+awtOeuoemBkycsICfkvpvmsLQ6VDc1bW3ku6XkuIvnrqHpgZMnLCAn5L6b5rC0OlQ4MDBtbeS7peS4iueuoemBkycsICfkvpvmsLQ6VDc1XzMwMG1t566h6YGTJywgJ+S+m+awtDpUMzAwXzUwMG1t566h6YGTJywgJ+S+m+awtDpUNTAwXzgwMG1t566h6YGTJywgJ+S+m+awtDrmjpLmsJTpmIAnLCAn5L6b5rC0OuaOkuaxoemYgCcsICfkvpvmsLQ66ZiA6ZeoJywgJ+e9kee7nOWIhuaekDrpm6jmsLTnrqEnLCAn572R57uc5YiG5p6QOumbqOawtOS6lScsICfnvZHnu5zliIbmnpA66Zuo5rC05rO156uZJywgJ+e9kee7nOWIhuaekDrpm6jmsLTlj6MnLCAn572R57uc5YiG5p6QOumbqOawtOaOkuaUvuWPoycsICfnvZHnu5zliIbmnpA66Zuo5rC0566h54K5JywgJ+e9kee7nOWIhuaekDrmsaHmsLTnrqEnLCAn572R57uc5YiG5p6QOuaxoeawtOS6lScsICfnvZHnu5zliIbmnpA65rGh5rC05rO156uZJywgJ+e9kee7nOWIhuaekDrmsaHmsLTlj6MnLCAn572R57uc5YiG5p6QOuaxoeawtOaOkuaUvuWPoycsICfnvZHnu5zliIbmnpA65rGh5rC06ZiA6ZeoJywgJ+e9kee7nOWIhuaekDrmsaHmsLTnrqHngrknLCAn572R57uc5YiG5p6QOuaxoeawtOebkea1i+eCuScsICfkvpvmsLQ65LiJ6YCaJywgJ+S+m+awtDrmtojpmLLmoJMnLCAn5L6b5rC0Oui/nuaOpeeCuScsICfkvpvmsLQ65Yqg5Y6L54K5JywgJ+S+m+awtDrlm5vpgJonLCAn5L6b5rC0OumihOeVmeWPoycsICfkvpvmsLQ65rC06KGo566xJywgJ+S+m+awtDrmjpLmsaHlj6MnLCAn5L6b5rC0OuWkp+ihqCddLAogICAgICBnc0RhdGFiYXNlTmFtZXM6IFsn5L6b5rC0OuS+m+awtOeuoemBkycsICfkvpvmsLQ6VDc1bW3ku6XkuIvnrqHpgZMnLCAn5L6b5rC0OlQ4MDBtbeS7peS4iueuoemBkycsICfkvpvmsLQ6VDc1XzMwMG1t566h6YGTJywgJ+S+m+awtDpUMzAwXzUwMG1t566h6YGTJywgJ+S+m+awtDpUNTAwXzgwMG1t566h6YGTJywgJ+S+m+awtDrmjpLmsJTpmIAnLCAn5L6b5rC0OuaOkuaxoemYgCcsICfkvpvmsLQ66ZiA6ZeoJywgJ+S+m+awtDrkuInpgJonLCAn5L6b5rC0Oua2iOmYsuagkycsICfkvpvmsLQ66L+e5o6l54K5JywgJ+S+m+awtDrliqDljovngrknLCAn5L6b5rC0OuWbm+mAmicsICfkvpvmsLQ66aKE55WZ5Y+jJywgJ+S+m+awtDrmsLTooajnrrEnLCAn5L6b5rC0OuaOkuaxoeWPoycsICfkvpvmsLQ65aSn6KGoJ10sCiAgICAgIHlzRGF0YWJhc2VOYW1lczogWyfnvZHnu5zliIbmnpA66Zuo5rC0566hJywgJ+e9kee7nOWIhuaekDrpm6jmsLTkupUnLCAn572R57uc5YiG5p6QOumbqOawtOazteermScsICfnvZHnu5zliIbmnpA66Zuo5rC05Y+jJywgJ+e9kee7nOWIhuaekDrpm6jmsLTmjpLmlL7lj6MnLCAn572R57uc5YiG5p6QOumbqOawtOeuoeeCuSddLAogICAgICB3c0RhdGFiYXNlTmFtZXM6IFsn572R57uc5YiG5p6QOuaxoeawtOeuoScsICfnvZHnu5zliIbmnpA65rGh5rC05LqVJywgJ+e9kee7nOWIhuaekDrmsaHmsLTms7Xnq5knLCAn572R57uc5YiG5p6QOuaxoeawtOWPoycsICfnvZHnu5zliIbmnpA65rGh5rC05o6S5pS+5Y+jJywgJ+e9kee7nOWIhuaekDrmsaHmsLTpmIDpl6gnLCAn572R57uc5YiG5p6QOuaxoeawtOeuoeeCuScsICfnvZHnu5zliIbmnpA65rGh5rC055uR5rWL54K5J10sCiAgICAgIGRhdGFiYXNlTmFtZXMxOiBbJ+S+m+awtDrmjpLmsJTpmIAnLCAn5L6b5rC0OuaOkuaxoemYgCcsICfkvpvmsLQ66ZiA6ZeoJywgJ+e9kee7nOWIhuaekDrpm6jmsLTnrqEnLCAn572R57uc5YiG5p6QOumbqOawtOS6lScsICfnvZHnu5zliIbmnpA66Zuo5rC05rO156uZJywgJ+e9kee7nOWIhuaekDrpm6jmsLTlj6MnLCAn572R57uc5YiG5p6QOumbqOawtOaOkuaUvuWPoycsICfnvZHnu5zliIbmnpA66Zuo5rC0566h54K5JywgJ+e9kee7nOWIhuaekDrmsaHmsLTnrqEnLCAn572R57uc5YiG5p6QOuaxoeawtOS6lScsICfnvZHnu5zliIbmnpA65rGh5rC05rO156uZJywgJ+e9kee7nOWIhuaekDrmsaHmsLTlj6MnLCAn572R57uc5YiG5p6QOuaxoeawtOaOkuaUvuWPoycsICfnvZHnu5zliIbmnpA65rGh5rC06ZiA6ZeoJywgJ+e9kee7nOWIhuaekDrmsaHmsLTnrqHngrknLCAn572R57uc5YiG5p6QOuaxoeawtOebkea1i+eCuScsICfkvpvmsLQ65LiJ6YCaJywgJ+S+m+awtDrmtojpmLLmoJMnLCAn5L6b5rC0Oui/nuaOpeeCuScsICfkvpvmsLQ65Yqg5Y6L54K5JywgJ+S+m+awtDrlm5vpgJonLCAn5L6b5rC0OumihOeVmeWPoycsICfkvpvmsLQ65rC06KGo566xJywgJ+S+m+awtDrmjpLmsaHlj6MnLCAn5L6b5rC0OuWkp+ihqCddLAogICAgICBnc0RhdGFiYXNlTmFtZXMxOiBbJ+S+m+awtDrmjpLmsJTpmIAnLCAn5L6b5rC0OuaOkuaxoemYgCcsICfkvpvmsLQ66ZiA6ZeoJywgJ+S+m+awtDrkuInpgJonLCAn5L6b5rC0Oua2iOmYsuagkycsICfkvpvmsLQ66L+e5o6l54K5JywgJ+S+m+awtDrliqDljovngrknLCAn5L6b5rC0OuWbm+mAmicsICfkvpvmsLQ66aKE55WZ5Y+jJywgJ+S+m+awtDrmsLTooajnrrEnLCAn5L6b5rC0OuaOkuaxoeWPoycsICfkvpvmsLQ65aSn6KGoJ10sCiAgICAgIHlzRGF0YWJhc2VOYW1lczE6IFsn572R57uc5YiG5p6QOumbqOawtOeuoScsICfnvZHnu5zliIbmnpA66Zuo5rC05LqVJywgJ+e9kee7nOWIhuaekDrpm6jmsLTms7Xnq5knLCAn572R57uc5YiG5p6QOumbqOawtOWPoycsICfnvZHnu5zliIbmnpA66Zuo5rC05o6S5pS+5Y+jJywgJ+e9kee7nOWIhuaekDrpm6jmsLTnrqHngrknXSwKICAgICAgd3NEYXRhYmFzZU5hbWVzMTogWyfnvZHnu5zliIbmnpA65rGh5rC0566hJywgJ+e9kee7nOWIhuaekDrmsaHmsLTkupUnLCAn572R57uc5YiG5p6QOuaxoeawtOazteermScsICfnvZHnu5zliIbmnpA65rGh5rC05Y+jJywgJ+e9kee7nOWIhuaekDrmsaHmsLTmjpLmlL7lj6MnLCAn572R57uc5YiG5p6QOuaxoeawtOmYgOmXqCcsICfnvZHnu5zliIbmnpA65rGh5rC0566h54K5JywgJ+e9kee7nOWIhuaekDrmsaHmsLTnm5HmtYvngrknXSwKICAgICAgZ3NMYXllcnM6IFtdLAogICAgICB5c0xheWVyczogW10sCiAgICAgIHdzTGF5ZXJzOiBbXSwKICAgICAgcmVjb3JkVGltZXI6IG51bGwsCiAgICAgIC8vIOW9k+WJjeWFs+mUrueCuQogICAgICBjdXJyZW50S2V5UG9pbnQ6IG51bGwsCiAgICAgIC8vIOW9k+WJjeW6lOaApeS7u+WKoeeahG1hcmtlcgogICAgICBjdXJyZW50RW1lTWFya2VyOiBudWxsLAogICAgICBjYWxsYmFjazogbnVsbCwKICAgICAgZGF0YU5hbWVzOiBbXSwKICAgICAgbmF2TWFya2VyczogW10sCiAgICAgIGZlYXR1cmVzTGluZTogW10sCiAgICAgIGFyZWFNYXJrZXJzOiBbXSwKICAgICAgbWFya2Vyc0xpbmVQb2ludHM6IFtdLAogICAgICBtYXJrZXJzQXJlYVBvaW50czogW10sCiAgICAgIGFsbERpc3RhbmNlOiBudWxsLAogICAgICBuYXZpZ2F0b3JNYXJrZXI6IG51bGwsCiAgICAgIG5hdmlnYXRvck1hcmtlcjI6IG51bGwsCiAgICAgIGxpbmVNYXJrZXJzOiBbXSwKICAgICAgYXJlYU1hcmtlcjogbnVsbCwKICAgICAgZmlyc3RQb2ludDogW10sCiAgICAgIGJveEZlYXR1cmVzOiBbXSwKICAgICAgbXVsdGlUYXNrU0FMOiBbXSwKICAgICAgLy8g5a2X5YW4CiAgICAgIGRpY3Rpb25hcnk6IHt9LAogICAgICBldmVudFR5cGVMaXN0OiB7fSwKICAgICAgYWNjZXNzVG9rZW46IHRoaXMuJHN0b3JhZ2UuZ2V0KCdhY2Nlc3NfdG9rZW4nKSwKICAgICAgZm9ybVRva2VuOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyDojrflj5ZoZWFkZXLvvIzmn6Xor6Llt6XljZXnlKgKICAgIGF4aW9zKHsKICAgICAgdXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX1RISVJEX1JFUVVFU1RfVVJMICsgJy9tYWluL3VzZXJDZW50ZXJBcGkvc3NvL3Rva2VuQnlUb2tlbicsCiAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICBwYXJhbXM6IHsKICAgICAgICB0b2tlbjogdGhpcy5hY2Nlc3NUb2tlbgogICAgICB9LAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljIGIzVjBkMjl5YXpwM2NHY3lNREl3JwogICAgICB9CiAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgIHRoaXMuZm9ybVRva2VuID0gcmVzLmRhdGEucmVzdWx0RGF0YS50b2tlbjsKICAgICAgfQogICAgfSk7CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgbWFwTG9hZChtYXBJbnN0YW5jZSkgewogICAgICBtYXBPYmoubWFwID0gbWFwSW5zdGFuY2UubWFwOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UgPSBtYXBJbnN0YW5jZTsKICAgIH0sCiAgICBnZXRFdmVudFR5cGVMaXN0KCkgewogICAgICBpZiAodGhpcy5kaWN0aW9uYXJ5Lmxlbmd0aCA+IDApIHsKICAgICAgICAvLyDlpITnkIblrZflhbjvvIzlsIblhbbovazmjaLkuLrlr7nosaHvvIzkvr/kuo7lm57mmL7kuovku7blkI3np7AKICAgICAgICBsZXQgZGV0YWlsTGlzdCA9IHRoaXMuZGljdGlvbmFyeS5maWx0ZXIoCiAgICAgICAgLy8g5a+554m55a6a5LqL5Lu25YmN57yA5aSE55CGCiAgICAgICAgaXRlbSA9PiBpdGVtLmNvZGUuaW5kZXhPZignaW5zcGVjdGlvbl9ldmVudF90eXBlXycpICE9PSAtMSk7CiAgICAgICAgbGV0IGV2ZW50Q29kZUxpc3QgPSBbXTsKICAgICAgICBkZXRhaWxMaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBldmVudENvZGVMaXN0ID0gZXZlbnRDb2RlTGlzdC5jb25jYXQoaXRlbS5kaWN0aW9uYXJ5RGV0YWlsTGlzdCk7CiAgICAgICAgfSk7CiAgICAgICAgLy8g6L2s5o2i5Li65a+56LGhCiAgICAgICAgZXZlbnRDb2RlTGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgdGhpcy5ldmVudFR5cGVMaXN0W2l0ZW0uY29kZV0gPSBpdGVtLnpoOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIFRvYXN0KHsKICAgICAgICAgIHRpdGxlOiAi5a2X5YW45Yqg6L295aSx6LSlIgogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaXNPbkxvYWRlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNPbkxvYWQgJiYgbWFwT2JqLm1hcEluc3RhbmNlICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXA7CiAgICB9LAogICAgLy/pgJrnlKjmlrnms5UKICAgIGFzeW5jIGFkZENvbW1vbkxheWVyKCkgewogICAgICBmb3IgYXdhaXQgKGNvbnN0IHVybCBvZiB0aGlzLmJhc2VNYXB1cmwpIHsKICAgICAgICBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU3VwZXJTdHlsZURhdGEodXJsKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGFkZFBpcGVMYXllcigpIHsKICAgICAgbGV0IG1hcCA9IG1hcE9iai5tYXA7CiAgICAgIGxldCBlbnYgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0VOVjsKICAgICAgLy/lupXlm74KICAgICAgYXdhaXQgYXhpb3MuZ2V0KEFQSS5WVUVfQVBQX01BUF9SRVFVRVNUX1VSTCArICIvYXBpL3N3YW4vbWFwV29ya3Nob3BTb3VyY2UvZGV0YWlsP2lkPTE1NTc2NTAyNzM4OTUyODg4MzQiKS50aGVuKHJlcyA9PiB7CiAgICAgICAgbGV0IGxheWVycyA9IEpTT04ucGFyc2UocmVzLmRhdGEuZGF0YS5jb21iaW5lSnNvbkRhdGEpOwogICAgICAgIE9iamVjdC5rZXlzKGxheWVycy5zb3VyY2VzKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICBsZXQgdGVtcCA9IGxheWVycy5zb3VyY2VzW2tleV0udGlsZXNbMF07CiAgICAgICAgICAvLyB0ZW1wID0gdGVtcC5yZXBsYWNlQWxsKCIxNzIuMjAuNzkuNjU6ODAwOCIsICJ4YXN3LmhkZWMuY29tIik7CgogICAgICAgICAgLy8gdGVtcCA9IHRlbXAucmVwbGFjZUFsbCgiMTcyLjIzLjAuMTIzOjgwMDgiLCAieGFzdy5oZGVjLmNvbSIpOwogICAgICAgICAgdGVtcCA9IHRlbXAucmVwbGFjZUFsbCgiMTcyLjE3LjE0Mi4xMzY6ODAwOCIsICJzdy5jaGluYXhpb25nYW4uY24iKTsKICAgICAgICAgIGxheWVycy5zb3VyY2VzW2tleV0udGlsZXNbMF0gPSB0ZW1wOwogICAgICAgICAgLy8gaWYgKGVudiA9PSAicHJvZHVjdGlvbiIpIHsKICAgICAgICAgIC8vIH0KICAgICAgICAgIG1hcC5hZGRTb3VyY2Uoa2V5LCBsYXllcnMuc291cmNlc1trZXldKTsKICAgICAgICB9KTsKICAgICAgICBsYXllcnMubGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ2xheWVyOiAnLCBsYXllcik7CiAgICAgICAgICBpZiAoIWxheWVyLmxheW91dCB8fCBsYXllci5sYXlvdXQudmlzaWJpbGl0eSA9PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgdGhpcy5kZWZhdWx0QmFzZUxheWVycy5wdXNoKGxheWVyKTsgLy/mjqfliLblnLDlm77mmL7pmpAKICAgICAgICAgIH0KICAgICAgICAgIG1hcC5hZGRMYXllcihsYXllcik7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGUgPT4ge30pLmZpbmFsbHkoKCkgPT4ge30pOwogICAgICAvL+euoee6vwogICAgICBhd2FpdCBheGlvcy5nZXQoQVBJLlZVRV9BUFBfTUFQX1JFUVVFU1RfVVJMICsgIi9hcGkvc3dhbi9tYXBXb3Jrc2hvcFNvdXJjZS9kZXRhaWw/aWQ9MTU0ODU3MzQxMjk2Mzc0OTg4OSIpLnRoZW4ocmVzID0+IHsKICAgICAgICBsZXQgbGF5ZXJzID0gSlNPTi5wYXJzZShyZXMuZGF0YS5kYXRhLmpzb25EYXRhKTsKICAgICAgICBPYmplY3Qua2V5cyhsYXllcnMuc291cmNlcykuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAgbGV0IHRlbXAgPSBsYXllcnMuc291cmNlc1trZXldLnRpbGVzWzBdOwogICAgICAgICAgLy8gdGVtcCA9IHRlbXAucmVwbGFjZUFsbCgiMTcyLjIwLjc5LjY1OjgwMDgiLCAieGFzdy5oZGVjLmNvbSIpOwogICAgICAgICAgLy8gdGVtcCA9IHRlbXAucmVwbGFjZUFsbCgiMTcyLjIzLjAuMTIzOjgwMDgiLCAieGFzdy5oZGVjLmNvbSIpOwogICAgICAgICAgdGVtcCA9IHRlbXAucmVwbGFjZUFsbCgiMTcyLjE3LjE0Mi4xMzY6ODAwOCIsICJzdy5jaGluYXhpb25nYW4uY24iKTsKICAgICAgICAgIGxheWVycy5zb3VyY2VzW2tleV0udGlsZXNbMF0gPSB0ZW1wOwogICAgICAgICAgLy8gaWYgKGVudiA9PSAicHJvZHVjdGlvbiIpIHsKICAgICAgICAgIC8vIH0KICAgICAgICAgIG1hcC5hZGRTb3VyY2Uoa2V5LCBsYXllcnMuc291cmNlc1trZXldKTsKICAgICAgICB9KTsKICAgICAgICBsYXllcnMubGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4gewogICAgICAgICAgbWFwLmFkZExheWVyKGxheWVyKTsKICAgICAgICAgIC8v5Zu+5bGC56e75YWl56e76Zmk5Lul5Y+K54K55Ye75LqL5Lu2CiAgICAgICAgICAvLyBtYXAub24oIm1vdXNlZW50ZXIiLCBsYXllci5pZCwgdGhpcy5oYW5kbGVMYXllckVudGVyKTsKICAgICAgICAgIC8vIG1hcC5vbigibW91c2VvdXQiLCBsYXllci5pZCwgdGhpcy5oYW5kbGVMYXllckxlYXZlKTsKICAgICAgICAgIC8vIG1hcC5vbigiY2xpY2siLCBsYXllci5pZCwgdGhpcy5oYW5kbGVMYXllckNsaWNrKTsgCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGUgPT4ge30pLmZpbmFsbHkoKCkgPT4ge30pOwogICAgICBhd2FpdCB0aGlzLmFkZExpbmVHZW9MYXllcigpOwogICAgICAvLyDovrnmoYYKICAgICAgYXdhaXQgbWFwLmFkZExheWVyKHsKICAgICAgICBpZDogIm1hcEJvcmRlciIsCiAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgIHNvdXJjZTogewogICAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgICAgZGF0YTogYm9yZGVyCiAgICAgICAgfSwKICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICJsaW5lLWpvaW4iOiAicm91bmQiLAogICAgICAgICAgImxpbmUtY2FwIjogInJvdW5kIgogICAgICAgIH0sCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICJsaW5lLWNvbG9yIjogIiMxN0U5RkUiLAogICAgICAgICAgImxpbmUtb3BhY2l0eSI6IDAuNCwKICAgICAgICAgICJsaW5lLXdpZHRoIjogMgogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGF3YWl0IHRoaXMuYWRkS2V5UG9pbnRMYXllcigpOwogICAgICAvLyB0aGlzLmlzT25Mb2FkID0gdHJ1ZTsKICAgIH0sCiAgICAvLyBhc3luYyBhZGRQaXBlTGF5ZXIoKSB7CiAgICAvLyAgIHRoaXMuaXNPbkxvYWQgPSB0cnVlOwogICAgLy8gICBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuKCkKICAgIC8vICAgLy8gYXdhaXQgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFRpbWVyU291cmNlKCk7CiAgICAvLyAgIC8vIHRoaXMuc3dMYXllclsn6Zuo5rC0J10gPSBtYXBPYmoubWFwSW5zdGFuY2UuYWRkVGltZXJMYXllcign6Zuo5rC0Jyk7CiAgICAvLyAgIC8vIHRoaXMuc3dMYXllclsn5rGh5rC0J10gPSBtYXBPYmoubWFwSW5zdGFuY2UuYWRkVGltZXJMYXllcign5rGh5rC0Jyk7CiAgICAvLyAgIC8vIHRoaXMuc3dMYXllclsn5L6b5rC0J10gPSBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuYWRkVGltZXJMYXllcign5L6b5rC0Jyk7CiAgICAvLyAgIC8vIGxldCBnc0xheWVyVHlwZSA9IExheWVyVHlwZVsn5L6b5rC0J11bMF0uY29uY2F0KExheWVyVHlwZVsn5L6b5rC0J11bMV0pCiAgICAvLyAgIC8vIGdzTGF5ZXJUeXBlLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAvLyAgIC8vICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eShpdGVtLmlkLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAvLyAgIC8vIH0pCiAgICAvLyAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoJ2xpZ2h0TGF5ZXInLCB7CiAgICAvLyAgIC8vICAgdHlwZTogImdlb2pzb24iLAogICAgLy8gICAvLyAgIGRhdGE6IHsKICAgIC8vICAgLy8gICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAvLyAgIC8vICAgICBmZWF0dXJlczogW10KICAgIC8vICAgLy8gICB9CiAgICAvLyAgIC8vIH0pOwogICAgLy8gICAvLyB0aGlzLnN3TGF5ZXJbJ+S+m+awtCddID0gYXdhaXQgdGhpcy5waXBlU2V0dGluZ3ModGhpcy5nc1VybCwgdGhpcy5HU0wpOwogICAgLy8gICAvLyB0aGlzLnN3TGF5ZXJbJ+mbqOawtCddID0gYXdhaXQgdGhpcy5waXBlU2V0dGluZ3ModGhpcy55c1VybCwgdGhpcy5ZU0wpOwogICAgLy8gICAvLyB0aGlzLnN3TGF5ZXJbJ+axoeawtCddID0gYXdhaXQgdGhpcy5waXBlU2V0dGluZ3ModGhpcy53c1VybCwgdGhpcy5XU0wpOwogICAgLy8gICAvLyBmb3IgYXdhaXQgKGNvbnN0IHVybCBvZiB0aGlzLmJ6TGF5ZXJVcmxzKSB7CiAgICAvLyAgIC8vICAgYXdhaXQgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFN1cGVyU3R5bGVEYXRhKHVybCk7CiAgICAvLyAgIC8vIH0KICAgIC8vICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgIC8vICAgLy8gICBpZDogImxpZ2h0UG9pbnQiLAogICAgLy8gICAvLyAgIHR5cGU6ICJzeW1ib2wiLAogICAgLy8gICAvLyAgIHNvdXJjZTogImxpZ2h0TGF5ZXIiLAogICAgLy8gICAvLyAgIGZpbHRlcjogWyI9PSIsICIkdHlwZSIsICJQb2ludCJdLAogICAgLy8gICAvLyAgIGxheW91dDogewogICAgLy8gICAvLyAgICAgJ2ljb24tc2l6ZSc6IDEuNCwKICAgIC8vICAgLy8gICAgICdpY29uLWltYWdlJzogWy4uLnRoaXMuR1NMLnNsaWNlKDAsIHRoaXMuR1NMLmxlbmd0aCAtIDEpLCAuLi50aGlzLldTTC5zbGljZSgxLCB0aGlzLldTTC5sZW5ndGggLSAxKSwgLi4udGhpcy5ZU0wuc2xpY2UoMSldLAogICAgLy8gICAvLyAgICAgJ2ljb24taWdub3JlLXBsYWNlbWVudCc6IHRydWUsCiAgICAvLyAgIC8vICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZQogICAgLy8gICAvLyAgIH0KICAgIC8vICAgLy8gfSwgImxpZ2h0TGF5ZXIiKQogICAgLy8gICAvLyBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgLy8gICAvLyAgIGlkOiAibGlnaHRMaW5lIiwKICAgIC8vICAgLy8gICB0eXBlOiAibGluZSIsCiAgICAvLyAgIC8vICAgc291cmNlOiAibGlnaHRMYXllciIsCiAgICAvLyAgIC8vICAgZmlsdGVyOiBbIj09IiwgIiR0eXBlIiwgIkxpbmVTdHJpbmciXSwKICAgIC8vICAgLy8gICBwYWludDogewogICAgLy8gICAvLyAgICAgJ2xpbmUtd2lkdGgnOiAzLAogICAgLy8gICAvLyAgICAgJ2xpbmUtY29sb3InOiAicmVkIiwKICAgIC8vICAgLy8gICB9CiAgICAvLyAgIC8vIH0sICJsaWdodExheWVyIik7CiAgICAvLyAgIC8vIHRoaXMuaXNPbkxvYWQgPSB0cnVlOwogICAgLy8gICAvLyBpZiAodGhpcy50cmlwbGVWaXNpYmxlKSB7CiAgICAvLyAgIC8vICAgdGhpcy5nc0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgLy8gICAvLyAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLmdzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgLy8gICAvLyAgIH0pCiAgICAvLyAgIC8vIH0KICAgIC8vIH0sCiAgICBhc3luYyBwaXBlU2V0dGluZ3ModXJsLCBzZXR0aW5nKSB7CiAgICAgIGxldCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gYXdhaXQgYWN0aW9ucy5nZXRBY3Rpb24odXJsKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZShkYXRhLm5hbWUsIGRhdGEuc291cmNlc1tkYXRhLm5hbWVdKTsKICAgICAgZGF0YS5sYXllcnMgPSBkYXRhLmxheWVycy5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIGl0ZW0udHlwZSAhPT0gImJhY2tncm91bmQiOwogICAgICB9KTsKICAgICAgLy8gZGF0YS5zb3VyY2VzW2RhdGEubmFtZV0udGlsZXNbMF0gPSBnaXNEb21haW4gKyAnL2lzZXJ2ZXInICsgZGF0YS5zb3VyY2VzW2RhdGEubmFtZV0udGlsZXNbMF0uc3BsaXQoJ2lzZXJ2ZXInKVsxXTsKICAgICAgbGV0IGxheWVycyA9IGRhdGEubGF5ZXJzOwogICAgICBzd2l0Y2ggKGRhdGEubmFtZSkgewogICAgICAgIGNhc2UgJ+S+m+awtCc6CiAgICAgICAgICB0aGlzLmdzTGF5ZXJzID0gbGF5ZXJzLm1hcChsYXllciA9PiB7CiAgICAgICAgICAgIHJldHVybiBsYXllci5pZDsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAn6Zuo5rC0JzoKICAgICAgICAgIHRoaXMueXNMYXllcnMgPSBsYXllcnMubWFwKGxheWVyID0+IHsKICAgICAgICAgICAgcmV0dXJuIGxheWVyLmlkOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICfmsaHmsLQnOgogICAgICAgICAgdGhpcy53c0xheWVycyA9IGxheWVycy5tYXAobGF5ZXIgPT4gewogICAgICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICBkYXRhLmxheWVycy5mb3JFYWNoKGxheWVyID0+IHsKICAgICAgICBkZWxldGUgbGF5ZXIubWF4em9vbTsKICAgICAgICBpZiAobGF5ZXIubGF5b3V0ICYmIGxheWVyLmxheW91dC52aXNpYmlsaXR5ID09ICJ2aXNpYmxlIiAmJiBsYXllci50eXBlID09ICJsaW5lIikgewogICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKGxheWVyLCAnZGV2aWNlTWFwJyk7CiAgICAgICAgfSBlbHNlIGlmIChsYXllci5sYXlvdXQgJiYgbGF5ZXIubGF5b3V0LnZpc2liaWxpdHkgPT0gInZpc2libGUiICYmIGxheWVyLnR5cGUgPT0gImNpcmNsZSIpIHsKICAgICAgICAgIGxheWVyLnR5cGUgPSAic3ltYm9sIjsKICAgICAgICAgIGxheWVyLnBhaW50ID0ge307CiAgICAgICAgICBsYXllci5sYXlvdXQgPSB7CiAgICAgICAgICAgICJpY29uLWltYWdlIjogc2V0dGluZywKICAgICAgICAgICAgImljb24tc2l6ZSI6IDEKICAgICAgICAgIH07CiAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIobGF5ZXIsICdkZXZpY2VNYXAnKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kZXZpY2VMYXllcnMucHVzaChsYXllci5pZCk7CiAgICAgICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbignY2xpY2snLGxheWVyLmlkLHRoaXMubGF5ZXJDbGljaykKICAgICAgfSk7CiAgICB9LAogICAgYWRkVXNlcigpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgndXNlcicsIHsKICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJ1c2VyIiwKICAgICAgICB0eXBlOiAic3ltYm9sIiwKICAgICAgICBzb3VyY2U6ICJ1c2VyIiwKICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICJpY29uLWltYWdlIjogInVzZXIiLAogICAgICAgICAgImljb24tc2l6ZSI6IDAuMjUsCiAgICAgICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZSwKICAgICAgICAgICdpY29uLWlnbm9yZS1wbGFjZW1lbnQnOiB0cnVlCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL0g15a6a5L2NCiAgICBhc3luYyBnZXRVc2VyUG9zaXRpb24oKSB7CiAgICAgIC8vIGxldCBwOwogICAgICAvLyBpZsKgKG5hdmlnYXRvci5nZW9sb2NhdGlvbil7CiAgICAgIC8vICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oKHBvc2l0aW9uKSA9PiB7CiAgICAgIC8vICAgICBwID0gW3Bvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUscG9zaXRpb24uY29vcmRzLmxhdGl0dWRlXTsKICAgICAgLy8gICAgIGFsZXJ0KHApCiAgICAgIC8vICAgfSwoZXJyb3IpID0+IHsKICAgICAgLy8gICAgIHN3aXRjaChlcnJvci5jb2RlKcKgewogICAgICAvLyAgICAgICBjYXNlwqBlcnJvci5QRVJNSVNTSU9OX0RFTklFRDrCoAogICAgICAvLyAgICAgICAgIGFsZXJ0KCLlrprkvY3lpLHotKUs55So5oi35ouS57ud6K+35rGC5Zyw55CG5a6a5L2NIik7CiAgICAgIC8vICAgICAgICAgYnJlYWs7CiAgICAgIC8vICAgICAgIGNhc2XCoGVycm9yLlBPU0lUSU9OX1VOQVZBSUxBQkxFOgogICAgICAvLyAgICAgICAgIGFsZXJ0KCLlrprkvY3lpLHotKUs5L2N572u5L+h5oGv5piv5LiN5Y+v55SoIik7CiAgICAgIC8vICAgICAgICAgYnJlYWs7CiAgICAgIC8vICAgICAgIGNhc2XCoGVycm9yLlRJTUVPVVQ6CiAgICAgIC8vICAgICAgICAgYWxlcnQoIuWumuS9jeWksei0pSzor7fmsYLojrflj5bnlKjmiLfkvY3nva7otoXml7YiKTsKICAgICAgLy8gICAgICAgICBicmVhazsKICAgICAgLy8gICAgICAgY2FzZcKgZXJyb3IuVU5LTk9XTl9FUlJPUjoKICAgICAgLy8gICAgICAgICBhbGVydCgi5a6a5L2N5aSx6LSlLOWumuS9jeezu+e7n+WkseaViCIpOwogICAgICAvLyAgICAgICAgIGJyZWFrOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgfSk7wqAKICAgICAgLy8gfWVsc2V7wqAKICAgICAgLy8gICBhbGVydCgi5LiN5pSv5oyB5Zyw55CG5a6a5L2N44CCIik7wqAKICAgICAgLy8gfQogICAgICBsZXQgcG9pbnQgPSBhd2FpdCBhY3Rpb25zLmdldFBvc2l0aW9uKCk7CiAgICAgIHJldHVybiBwb2ludDsKICAgIH0sCiAgICBzZXRVc2VyUG9zaXRpb24ocG9zaXRpb24pIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEoJ3VzZXInLCB7CiAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICBmZWF0dXJlczogcG9zaXRpb24ubGVuZ3RoID4gMCA/IFt0dXJmLnBvaW50KHBvc2l0aW9uKV0gOiBbXQogICAgICB9KTsKICAgIH0sCiAgICBmbHlUbyh7CiAgICAgIHBvc2l0aW9uLAogICAgICB6b29tCiAgICB9KSB7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5mbHlUbyhwb3NpdGlvbiwgem9vbSk7CiAgICB9LAogICAgcG9zaXRpb24oY29vcmRzKSB7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5wb3NpdGlvbihjb29yZHMpOwogICAgfSwKICAgIC8v5YWs5Y+46YCJ5oupCiAgICAvL+S8oOWFrOWPuOaVsOe7hCDkvovlpoI6WyfkuLTlubPkvpvmjpLmsLQnXQogICAgYXN5bmMgY2hvb3NlRmFjdG9yeShmYWN0b3J5KSB7CiAgICAgIGxldCBmYWMgPSBmYWN0b3J5W2ZhY3RvcnkubGVuZ3RoIC0gMV07CiAgICAgIGxldCBmYWMwID0gZmFjdG9yeVswXTsKICAgICAgdGhpcy5mYWN0b3J5TmFtZU1hcmtlcnMuZm9yRWFjaChtYXJrZXIgPT4gewogICAgICAgIG1hcmtlci5yZW1vdmUoKTsKICAgICAgfSk7CiAgICAgIGlmIChmYWMwLmxhYmVsICE9PSAi5p2t5bee5L2Z5p2t5rC05Yqh5o6n6IKh6ZuG5ZuiIikgewogICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRhcGkuZ2V0QWN0aW9uKCIveWhzdy1kcmFpbmFnZS1lbnRpdHkvdXNlck1hcC9vcmdUcmVlIiwgewogICAgICAgICAgb3JnTm86IGZhYy5sYWJlbCA9PT0gJ+WFqOmDqCcgPyBmYWMwLnZhbHVlIDogZmFjLnZhbHVlCiAgICAgICAgfSk7CiAgICAgICAgbGV0IGFyciA9IFtdOwogICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgIGFyciA9IG1hcE9iai5tYXBJbnN0YW5jZS5pdGVyYXRpb24ocmVzLmRhdGEsICdjaGlsZHJlbicsIFsnY29tcGFueU5hbWUnLCAnZ2VvbSddKTsKICAgICAgICB9CiAgICAgICAgaWYgKGZhY3RvcnkubGVuZ3RoID09IDEpIHsKICAgICAgICAgIGFyci5zaGlmdCgpOwogICAgICAgIH0KICAgICAgICBsZXQgY29vcmRzQXJyID0gW107CiAgICAgICAgbGV0IGZhY3RvcnlOYW1lTWFya2VycyA9IFtdOwogICAgICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgY29vcmRzQXJyLnB1c2goaXRlbS5nZW9tLmNvb3JkaW5hdGVzKTsKICAgICAgICAgIGxldCBjZW50ZXIgPSB0aGlzLmdldENlbnRlcihpdGVtLmdlb20uY29vcmRpbmF0ZXNbMF0pOwogICAgICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgZWxlLmlubmVySFRNTCA9IGA8c3BhbiBzdHlsZT0iY29sb3I6IzQ5NTY2NTtmb250LXNpemU6MThweDtmb250LXdlaWdodDpib2xkIj4ke2l0ZW0uY29tcGFueU5hbWV9PC9zcGFuPmA7CiAgICAgICAgICBmYWN0b3J5TmFtZU1hcmtlcnMucHVzaChtYXBPYmoubWFwSW5zdGFuY2UuYWRkTWFya2VyKGVsZSwgY2VudGVyKSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5mYWN0b3J5TmFtZU1hcmtlcnMgPSBmYWN0b3J5TmFtZU1hcmtlcnM7CiAgICAgICAgdGhpcy5tYWtlTG9jYXRpb24ocmVzLmRhdGFbMF0uZ2VvbS5jb29yZGluYXRlcyk7CiAgICAgICAgdGhpcy5wYWludGluZ1JhbmdlKHsKICAgICAgICAgIHBvc2l0aW9uOiBjb29yZHNBcnIsCiAgICAgICAgICBsaW5lRGFzaGFycmF5OiBbMywgNF0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1ha2VMb2NhdGlvbigpOwogICAgICAgIHRoaXMucGFpbnRpbmdSYW5nZSh7fSk7CiAgICAgIH0KICAgIH0sCiAgICByYW5kb21TdHJpbmcobGVuKSB7CiAgICAgIGxlbiA9IGxlbiB8fCAzMjsKICAgICAgbGV0ICRjaGFycyA9ICdBQkNERUZHSEpLTU5QUVJTVFdYWVphYmNkZWZoaWprbW5wcnN0d3h5ejIzNDU2NzgnOwogICAgICBsZXQgbWF4UG9zID0gJGNoYXJzLmxlbmd0aDsKICAgICAgbGV0IHB3ZCA9ICcnOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgcHdkICs9ICRjaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4UG9zKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHB3ZDsKICAgIH0sCiAgICBpbml0TWFya2VyKGksIHcgPSAyMCwgaCA9IDIwKSB7CiAgICAgIGxldCBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgZWxlLnNyYyA9IGk7CiAgICAgIGVsZS5zdHlsZS53aWR0aCA9IHc7CiAgICAgIGVsZS5zdHlsZS5oZWlnaHQgPSBoOwogICAgICByZXR1cm4gZWxlOwogICAgfSwKICAgIG1hcE9uTG9hZChjYWxsYmFjaykgewogICAgICBpZiAodGhpcy5pc09uTG9hZCkgewogICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IHRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgaWYgKHRoaXMuaXNPbkxvYWQpIHsKICAgICAgICAgICAgdGhpcy50aW1lci5mb3JFYWNoKHRpbWVyID0+IHsKICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMudGltZXIgPSBudWxsOwogICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpOwogICAgICAgICAgfQogICAgICAgIH0sIDEwMCk7CiAgICAgICAgdGhpcy50aW1lci5wdXNoKHRpbWVyKTsKICAgICAgfQogICAgfSwKICAgIC8qKg0KICAgICAqIEBuYW1lOuS4muWKoeS7o+eggQ0KICAgICAqLwogICAgLy/nrqHnvZHlkozorr7mlr3lop7liqDngrnlh7vpgInkuK3kuovku7bvvIzpgInkuK3orr7mlr3kv6Hmga/lgqjlrZjoh7N0aGlzLmNob29zZURldmljZQogICAgYWRkRGV2aWNlTGF5ZXJzQ2xpY2tFdmVudCh0aGF0LCBpc1NXID0gZmFsc2UpIHsKICAgICAgbGV0IGRldmljZUxheWVycyA9IHRoaXMuZGV2aWNlTGF5ZXJzLmxlbmd0aCA+IDAgPyB0aGlzLmRldmljZUxheWVycyA6IG1hcE9iai5tYXBJbnN0YW5jZS5kZXZpY2VMYXllcnM7CiAgICAgIHRoaXMudm0gPSB0aGF0IHx8IG51bGw7CiAgICAgIGRldmljZUxheWVycy5mb3JFYWNoKGxheWVySWQgPT4gewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub24oJ2NsaWNrJywgbGF5ZXJJZCwgaXNTVyA/IHRoaXMubGF5ZXJDbGljazEgOiB0aGlzLmxheWVyQ2xpY2spOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVEZXZpY2VMYXllcnNDbGlja0V2ZW50KGlzU1cgPSBmYWxzZSkgewogICAgICBsZXQgZGV2aWNlTGF5ZXJzID0gdGhpcy5kZXZpY2VMYXllcnMubGVuZ3RoID4gMCA/IHRoaXMuZGV2aWNlTGF5ZXJzIDogbWFwT2JqLm1hcEluc3RhbmNlLmRldmljZUxheWVyczsKICAgICAgZGV2aWNlTGF5ZXJzLmZvckVhY2gobGF5ZXJJZCA9PiB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vZmYoJ2NsaWNrJywgbGF5ZXJJZCwgaXNTVyA/IHRoaXMubGF5ZXJDbGljazEgOiB0aGlzLmxheWVyQ2xpY2spOwogICAgICB9KTsKICAgICAgdGhpcy52bSA9IG51bGw7CiAgICB9LAogICAgbGF5ZXJDbGljayhlKSB7CiAgICAgIGxldCBpbmRleCA9IHRoaXMuY2hvb3NlRGV2aWNlLmZpbmRJbmRleChpdGVtID0+IHsKICAgICAgICByZXR1cm4gaXRlbS5wcm9wZXJ0aWVzLmlkID09IGUuZmVhdHVyZXNbMF0uaWQ7CiAgICAgIH0pOwogICAgICBsZXQgZGV2aWNlID0gbnVsbDsKICAgICAgbGV0IG9wZXJhdGlvbk1vZGUgPSAiIjsKICAgICAgaWYgKGluZGV4ID09IC0xKSB7CiAgICAgICAgbGV0IGZlYXR1cmUgPSBlLmZlYXR1cmVzWzBdOwogICAgICAgIGRldmljZSA9IHsKICAgICAgICAgIHR5cGU6ICJmZWF0dXJlIiwKICAgICAgICAgIGdlb21ldHJ5OiBmZWF0dXJlLmdlb21ldHJ5LAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICAuLi5mZWF0dXJlLnByb3BlcnRpZXMsCiAgICAgICAgICAgIGlkOiBmZWF0dXJlLmlkCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmNob29zZURldmljZS5wdXNoKGRldmljZSk7CiAgICAgICAgb3BlcmF0aW9uTW9kZSA9ICdhZGQnOwogICAgICB9IGVsc2UgewogICAgICAgIGRldmljZSA9IHRoaXMuY2hvb3NlRGV2aWNlW2luZGV4XTsKICAgICAgICB0aGlzLmNob29zZURldmljZS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIG9wZXJhdGlvbk1vZGUgPSAncmVtb3ZlJzsKICAgICAgfQogICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgnbGlnaHRMYXllcicsIHsKICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgIGZlYXR1cmVzOiB0aGlzLmNob29zZURldmljZQogICAgICB9KTsKICAgICAgdGhpcy52bSAmJiB0aGlzLnZtLiRlbWl0KCdnZXREZXZpY2UnLCB0aGlzLmNob29zZURldmljZSwgewogICAgICAgIG9wZXJhdGlvbk1vZGUsCiAgICAgICAgZGV2aWNlCiAgICAgIH0pOwogICAgICBkZXZpY2UgPSBudWxsOwogICAgfSwKICAgIC8qKg0KICAgICAqIOS4iee9keWQiOS4gA0KICAgICAqLwogICAgbGF5ZXJDbGljazEoZSkgewogICAgICBjb25zb2xlLmxvZygnZSA6Pj4gJywgZSk7CiAgICAgIGxldCBmZWF0dXJlID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoW1tlLnBvaW50LnggLSAyLCBlLnBvaW50LnkgLSAyXSwgW2UucG9pbnQueCArIDIsIGUucG9pbnQueSArIDJdXSlbMF07CiAgICAgIGlmIChmZWF0dXJlICYmIGZlYXR1cmUucHJvcGVydGllcy5kZXZpY2VpZCAmJiAhZmVhdHVyZS5sYXllci5pZC5pbmNsdWRlcygnX3N5bWJvbCcpKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2ZlYXR1cmUgOj4+ICcsIGZlYXR1cmUpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCdsaWdodExheWVyJywgewogICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgIGZlYXR1cmVzOiBbZmVhdHVyZV0KICAgICAgICB9KTsKICAgICAgICB0aGlzLiRlbWl0KCdnZXREZXZpY2UnLCBmZWF0dXJlKTsKICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzLmRpc3BsYXkuaW5kZXhPZign566h57q/JykgPiAtMSkgewogICAgICAgICAgbGV0IGxvY2F0aW9uID0gW2ZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF0sIGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMV0gLSAwLjAwMDVdOwogICAgICAgICAgdGhpcy5mbHlUbyh7CiAgICAgICAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbiwKICAgICAgICAgICAgem9vbTogMTcKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXQgbG9jYXRpb24yID0gW2ZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0sIGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV0gLSAwLjAwMDVdOwogICAgICAgICAgdGhpcy5mbHlUbyh7CiAgICAgICAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbjIsCiAgICAgICAgICAgIHpvb206IDE3CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvL+afpeeci+aXtuWbnuaYvgogICAgZWNob1d4RGV2ZWljZShmZWF0dXJlcykgewogICAgICB0aGlzLmNob29zZURldmljZSA9IGZlYXR1cmVzOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgnbGlnaHRMYXllcicsIHsKICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgIGZlYXR1cmVzOiB0aGlzLmNob29zZURldmljZQogICAgICB9KTsKICAgIH0sCiAgICAvL+a3u+WKoOW4pua1rueql+S6i+S7tuWbvuaghwogICAgYWRkRXZlbnRNYXJrZXIoewogICAgICBwb3NpdGlvbiwKICAgICAgZXZlbnQKICAgIH0pIHsKICAgICAgbGV0IGVsZSA9IHRoaXMuaW5pdE1hcmtlcihyZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL2V2ZW50UG9pbnQucG5nJyksIDEwLCAxMCk7CiAgICAgIGxldCBtYXJrZXIgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3TWFya2VyKHsKICAgICAgICBlbGVtZW50OiBlbGUKICAgICAgfSk7CiAgICAgIG1hcmtlci5zZXRMbmdMYXQocG9zaXRpb24pLnNldFBvcHVwKG1hcE9iai5tYXBJbnN0YW5jZS5uZXdQb3B1cCh7CiAgICAgICAgb2Zmc2V0OiBbMCwgLTEwXSwKICAgICAgICBjbG9zZUJ1dHRvbjogZmFsc2UKICAgICAgfSkuc2V0SFRNTChgPHN0cm9uZz4ke2V2ZW50fTwvc3Ryb25nPmApKS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKICAgICAgbWFya2VyLnRvZ2dsZVBvcHVwKCk7CiAgICB9LAogICAgLy/liIfmjaLlnLDlm74gbmFtZTp0ZHR8fHl4dHx8YmFzZU1hcAogICAgY2hhbmdlTWFwKG5hbWUpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmNoYW5nZUJhc2VNYXAobmFtZSk7CiAgICB9LAogICAgLyoqDQogICAgICogQG5hbWU657u05L+u6YOo5Lu9DQogICAgICovCiAgICBhZGRPcmdhbml6ZXJNYXJrZXIoewogICAgICBwb3NpdGlvbiwKICAgICAgZGlzdGFuY2UKICAgIH0pIHsKICAgICAgbGV0IGVsZSA9IHRoaXMuaW5pdE1hcmtlcihyZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL2dqLnBuZycpKTsKICAgICAgdGhpcy5tYXJrZXIgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3TWFya2VyKHsKICAgICAgICBlbGVtZW50OiBlbGUKICAgICAgfSk7CiAgICAgIHRoaXMubWFya2VyLnNldExuZ0xhdChwb3NpdGlvbikuc2V0UG9wdXAobWFwT2JqLm1hcEluc3RhbmNlLm5ld1BvcHVwKHsKICAgICAgICBvZmZzZXQ6IFswLCAtMTBdLAogICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZQogICAgICB9KS5zZXRIVE1MKGA8c3Ryb25nPiR7ZGlzdGFuY2V9PC9zdHJvbmc+YCkpLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApOwogICAgICB0aGlzLm1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgfSwKICAgIC8v5pu05paw5Y2P5Yqe5Lq65ZGY5L2N572uCiAgICB1cGRhdGVPcmdhbml6ZXJQb3NpdGlvbih7CiAgICAgIHBvc2l0aW9uLAogICAgICBkaXN0YW5jZQogICAgfSkgewogICAgICB0aGlzLm1hcmtlci5zZXRMbmdMYXQocG9zaXRpb24pLmdldFBvcHVwKCkuc2V0SFRNTChgPHN0cm9uZz4ke2Rpc3RhbmNlfTwvc3Ryb25nPmApOwogICAgfSwKICAgIC8v56e76Zmk5Y2P5Yqe5Lq65ZGYCiAgICByZW1vdmVPcmdhbml6ZXJNYXJrZXIoKSB7CiAgICAgIHRoaXMubWFya2VyLnJlbW92ZSgpOwogICAgICB0aGlzLm1hcmtlciA9IG51bGw7CiAgICB9LAogICAgLy8g54K55Ye75Zyw5Zu+5re75Yqg6Ieq5a6a5LmJ6YCJ5oup57u05L+u6K6+5pa9CiAgICBzdGFydEFkZERpeVBvaW50KGV2ZW50LCB2bSkgewogICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7CiAgICAgIHRoaXMudm0gPSB2bTsKICAgICAgbWFwT2JqLm1hcC5vbignY2xpY2snLCB0aGlzLkFkZERpeVBvaW50KTsKICAgIH0sCiAgICBBZGREaXlQb2ludChlKSB7CiAgICAgIHRoaXMuYWRkRGl5ck1hcmtlcih7CiAgICAgICAgcG9zaXRpb246IFtlLmxuZ0xhdC5sbmcsIGUubG5nTGF0LmxhdF0sCiAgICAgICAgbmFtZTogZXZlbnQKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Zyw5Zu+5b2V5YWl6K6+5pa95re75Yqg5Zu+5qCHCiAgICBhZGREaXlyTWFya2VyKHsKICAgICAgcG9zaXRpb24sCiAgICAgIG5hbWUKICAgIH0pIHsKICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICBlbGUuc3JjID0gcmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC9kaXlQb2ludC5wbmcnKTsKICAgICAgZWxlLnN0eWxlLndpZHRoID0gJzIwcHgnOwogICAgICBlbGUuc3R5bGUuaGVpZ2h0ID0gJzIwcHgnOwogICAgICB0aGlzLmRpeVBvaW50Lm1hcmtlciAmJiB0aGlzLmRpeVBvaW50Lm1hcmtlci5yZW1vdmUoKTsKICAgICAgbGV0IG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgIGVsZW1lbnQ6IGVsZQogICAgICB9KTsKICAgICAgbWFya2VyLnNldExuZ0xhdChwb3NpdGlvbikuc2V0UG9wdXAobWFwT2JqLm1hcEluc3RhbmNlLm5ld1BvcHVwKHsKICAgICAgICBvZmZzZXQ6IFstMSwgMF0KICAgICAgfSkuc2V0SFRNTChgPHN0cm9uZz4ke25hbWV9PC9zdHJvbmc+YCkpLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApOwogICAgICB0aGlzLmRpeVBvaW50ID0gewogICAgICAgIG5hbWUsCiAgICAgICAgcG9zaXRpb24sCiAgICAgICAgbWFya2VyCiAgICAgIH07CiAgICAgIHRoaXMudm0uJGVtaXQoJ2dldERpeVBvaW50JywgdGhpcy5kaXlQb2ludCk7CiAgICB9LAogICAgLy/np7vpmaTmlrDlvZXlhaXorr7mlr3lm77moIcKICAgIHJlbW92ZURpeU1hcmtlcigpIHsKICAgICAgdGhpcy5kaXlQb2ludC5tYXJrZXIucmVtb3ZlKCk7CiAgICAgIHRoaXMuZGl5UG9pbnQubWFya2VyID0gbnVsbDsKICAgIH0sCiAgICAvL+e7k+adn+iHquWumuS5iemAieaLqee7tOS/ruiuvuaWvQogICAgZW5kRGl5UG9pbnQoKSB7CiAgICAgIG1hcE9iai5tYXAub2ZmKCdjbGljaycsIHRoaXMuQWRkRGl5UG9pbnQpOwogICAgICB0aGlzLnZtID0gbnVsbDsKICAgIH0sCiAgICAvKioNCiAgICAgKiBAbmFtZTrlhbvmiqTpg6jku70NCiAgICAgKi8KICAgIGFkZE5hdmlnYXRvclBvaW50KHBvaW50KSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQubmF2aWdhdG9yTWFya2VyKSB0aGF0Lm5hdmlnYXRvck1hcmtlci5yZW1vdmUoKTsKICAgICAgaWYgKHRoYXQubmF2aWdhdG9yTWFya2VyMikgdGhhdC5uYXZpZ2F0b3JNYXJrZXIyLnJlbW92ZSgpOwogICAgICBsZXQgZWxlID0gdGhhdC5pbml0TWFya2VyKHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAvZXZlbnRQb2ludC5wbmcnKSwgMjUsIDI1KTsKICAgICAgbGV0IG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgIGVsZW1lbnQ6IGVsZQogICAgICB9KTsKICAgICAgaWYgKHBvaW50KSB7CiAgICAgICAgZWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgbGV0IGVsZTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGVsZTIuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6IDBweCA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNlZWU7IGJvcmRlci1yYWRpdXM6IDJweDsgYmFja2dyb3VuZDogI2ZmZjsgY29sb3I6ICMyQTgzRTYiPuWOu+WvvOiIqjwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgbGV0IG1hcmtlcjIgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3TWFya2VyKHsKICAgICAgICAgICAgZWxlbWVudDogZWxlMiwKICAgICAgICAgICAgb2Zmc2V0OiBbMzUsIDBdCiAgICAgICAgICB9KTsKICAgICAgICAgIGVsZTIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIHRoYXQubmF2aWdhdG9yTWFya2VyMi5yZW1vdmUoKTsKICAgICAgICAgICAgdGhhdC4kZW1pdCgnZ29Ub05hdmlnYXRvcicsIHBvaW50KTsKICAgICAgICAgIH0pOwogICAgICAgICAgbWFya2VyMi5zZXRMbmdMYXQocG9pbnQpLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApOwogICAgICAgICAgdGhhdC5uYXZpZ2F0b3JNYXJrZXIyID0gbWFya2VyMjsKICAgICAgICB9KTsKICAgICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvaW50KS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKICAgICAgICB0aGF0Lm5hdmlnYXRvck1hcmtlciA9IG1hcmtlcjsKICAgICAgICB0aGF0LiRlbWl0KCdnZXROYXZpZ2F0b3JQb2ludCcsIHBvaW50KTsKICAgICAgfQogICAgfSwKICAgIC8vIOa1i+i3nQogICAgYWRkTmF2aWdhdG9yUG9pbnRzTGluZShwb2ludCkgewogICAgICBpZiAocG9pbnQpIHsKICAgICAgICB0aGlzLm1hcmtlcnNMaW5lUG9pbnRzLnB1c2gocG9pbnQpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoIlBvaW50c0xheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigiUG9pbnRzTGF5ZXIiKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgiUG9pbnRTb3VyY2UiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgiUG9pbnRTb3VyY2UiKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJMaW5lTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJMaW5lTGF5ZXIiKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgiTGluZVNvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJMaW5lU291cmNlIik7CiAgICAgICAgbGV0IHRlbXAgPSB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZSIsCiAgICAgICAgICBnZW9tZXRyeTogewogICAgICAgICAgICB0eXBlOiAiUG9pbnQiLAogICAgICAgICAgICBjb29yZGluYXRlczogcG9pbnQKICAgICAgICAgIH0sCiAgICAgICAgICBwcm9wZXJ0aWVzOiB7fQogICAgICAgIH07CiAgICAgICAgdGhpcy5uYXZNYXJrZXJzLnB1c2godGVtcCk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgnUG9pbnRTb3VyY2UnLCB7CiAgICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICAgIGZlYXR1cmVzOiB0aGlzLm5hdk1hcmtlcnMKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICAgICdpZCc6ICdQb2ludHNMYXllcicsCiAgICAgICAgICAndHlwZSc6ICdzeW1ib2wnLAogICAgICAgICAgJ3NvdXJjZSc6ICdQb2ludFNvdXJjZScsCiAgICAgICAgICAnbGF5b3V0JzogewogICAgICAgICAgICAnaWNvbi1pbWFnZSc6ICdkaXlQb2ludCcsCiAgICAgICAgICAgICdpY29uLXNpemUnOiAwLjgKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAodGhpcy5uYXZNYXJrZXJzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIGxldCBkaXN0YW5jZSA9IHR1cmYuZGlzdGFuY2UodHVyZi5wb2ludCh0aGlzLm1hcmtlcnNMaW5lUG9pbnRzW3RoaXMubmF2TWFya2Vycy5sZW5ndGggLSAyXSksIHR1cmYucG9pbnQodGhpcy5tYXJrZXJzTGluZVBvaW50c1t0aGlzLm5hdk1hcmtlcnMubGVuZ3RoIC0gMV0pKSAqIDEwMDA7CiAgICAgICAgICB0aGlzLmFsbERpc3RhbmNlID0gTnVtYmVyKGRpc3RhbmNlKSArIE51bWJlcih0aGlzLmFsbERpc3RhbmNlKTsKICAgICAgICAgIGxldCBmZWF0dXJlID0gewogICAgICAgICAgICB0eXBlOiAiRmVhdHVyZSIsCiAgICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgICAgdHlwZTogIkxpbmVTdHJpbmciLAogICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiB0aGlzLm1hcmtlcnNMaW5lUG9pbnRzCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgICBkaXN0YW5jZTogdGhpcy5hbGxEaXN0YW5jZS50b0ZpeGVkKDIpICsgJyBtJwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5mZWF0dXJlc0xpbmUucHVzaChmZWF0dXJlKTsKICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoJ0xpbmVTb3VyY2UnLCB7CiAgICAgICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICAgICAgZmVhdHVyZXM6IHRoaXMuZmVhdHVyZXNMaW5lCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAgICdpZCc6ICdMaW5lTGF5ZXInLAogICAgICAgICAgICAndHlwZSc6ICdsaW5lJywKICAgICAgICAgICAgJ3NvdXJjZSc6ICdMaW5lU291cmNlJywKICAgICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgICAibGluZS1jb2xvciI6ICcjRkY0QTRBJywKICAgICAgICAgICAgICAibGluZS13aWR0aCI6IDMKICAgICAgICAgICAgfQogICAgICAgICAgfSwgJ1BvaW50c0xheWVyJyk7CiAgICAgICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICBlbGUuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImNvbG9yOiAjRkY0QTRBIj4keyh0aGlzLmFsbERpc3RhbmNlIC8gMTAwMCkudG9GaXhlZCgyKSArICcga20nfTwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgbGV0IG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgICAgICBlbGVtZW50OiBlbGUsCiAgICAgICAgICAgIG9mZnNldDogWzAsIDE1XQogICAgICAgICAgfSk7CiAgICAgICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvaW50KS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKICAgICAgICAgIHRoaXMubGluZU1hcmtlcnMucHVzaChtYXJrZXIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOa1i+mdogogICAgYWRkTmF2aWdhdG9yUG9pbnRzQXJlYShwb2ludCkgewogICAgICBpZiAodGhpcy5maXJzdFBvaW50Lmxlbmd0aCA9PT0gMCkgdGhpcy5maXJzdFBvaW50ID0gcG9pbnQ7CiAgICAgIGlmIChwb2ludCkgewogICAgICAgIHRoaXMubWFya2Vyc0FyZWFQb2ludHMucHVzaChwb2ludCk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigiUG9pbnRBTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJQb2ludEFMYXllciIpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoIkFyZWFzTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJBcmVhc0xheWVyIik7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoIlBvaW50QVNvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJQb2ludEFTb3VyY2UiKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgiQXJlYXNTb3VyY2UiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgiQXJlYXNTb3VyY2UiKTsKICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlIiwKICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgIHR5cGU6ICJQb2ludCIsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBwb2ludAogICAgICAgICAgfSwKICAgICAgICAgIHByb3BlcnRpZXM6IHt9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmFyZWFNYXJrZXJzLnB1c2godGVtcCk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgnUG9pbnRBU291cmNlJywgewogICAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgICBmZWF0dXJlczogdGhpcy5hcmVhTWFya2VycwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgJ2lkJzogJ1BvaW50QUxheWVyJywKICAgICAgICAgICd0eXBlJzogJ3N5bWJvbCcsCiAgICAgICAgICAnc291cmNlJzogJ1BvaW50QVNvdXJjZScsCiAgICAgICAgICAnbGF5b3V0JzogewogICAgICAgICAgICAnaWNvbi1pbWFnZSc6ICdkaXlQb2ludCcsCiAgICAgICAgICAgICdpY29uLXNpemUnOiAwLjgKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBsZXQgZmVhdHVyZSA9IHRoaXMubWFya2Vyc0FyZWFQb2ludHMuY29uY2F0KFt0aGlzLmZpcnN0UG9pbnRdKTsKICAgICAgICBsZXQgZmVhdHVyZXMgPSB0dXJmLnBvbHlnb24oW2ZlYXR1cmVdKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCdBcmVhc1NvdXJjZScsIHsKICAgICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgZmVhdHVyZXM6IFtmZWF0dXJlc10KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICAgICdpZCc6ICdBcmVhc0xheWVyJywKICAgICAgICAgICd0eXBlJzogJ2ZpbGwnLAogICAgICAgICAgJ3NvdXJjZSc6ICdBcmVhc1NvdXJjZScsCiAgICAgICAgICBwYWludDogewogICAgICAgICAgICAnZmlsbC1jb2xvcic6ICcjRkY0QTRBJywKICAgICAgICAgICAgJ2ZpbGwtb3BhY2l0eSc6IDAuNAogICAgICAgICAgfQogICAgICAgIH0sICdQb2ludEFMYXllcicpOwogICAgICAgIGxldCBkaXN0YW5jZSA9IHR1cmYuYXJlYShmZWF0dXJlcyk7CiAgICAgICAgaWYgKHRoaXMuYXJlYU1hcmtlcikgdGhpcy5hcmVhTWFya2VyLnJlbW92ZSgpOwogICAgICAgIGxldCBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBlbGUuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImNvbG9yOiAjRkY0QTRBIj4keyhkaXN0YW5jZSAvIDEwMDAgLyAxMDAwKS50b0ZpeGVkKDIpICsgJyBrbcKyJ308L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICBsZXQgbWFya2VyID0gbWFwT2JqLm1hcEluc3RhbmNlLm5ld01hcmtlcih7CiAgICAgICAgICBlbGVtZW50OiBlbGUsCiAgICAgICAgICBvZmZzZXQ6IFswLCAxNV0KICAgICAgICB9KTsKICAgICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvaW50KS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKICAgICAgICB0aGlzLmFyZWFNYXJrZXIgPSBtYXJrZXI7CiAgICAgIH0KICAgIH0sCiAgICBhZGROYXZpZ2F0aW9uQ29udHJvbCgpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRDb250cm9sKG5ldyBtYXBib3hnbC5OYXZpZ2F0aW9uQ29udHJvbCgpLCAndG9wLWxlZnQnKTsKICAgIH0sCiAgICBhZGRGdWxsc2NyZWVuQ29udHJvbCgpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRDb250cm9sKG5ldyBtYXBib3hnbC5GdWxsc2NyZWVuQ29udHJvbCgpKTsKICAgIH0sCiAgICBhZGRTY2FsZUNvbnRyb2woKSB7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkQ29udHJvbChuZXcgbWFwYm94Z2wuU2NhbGVDb250cm9sKCksICJib3R0b20tcmlnaHQiKTsKICAgIH0sCiAgICBjbGVhck5hdmlnYXRvclBvaW50KCkgewogICAgICBpZiAodGhpcy5uYXZpZ2F0b3JNYXJrZXIpIHsKICAgICAgICB0aGlzLm5hdmlnYXRvck1hcmtlci5yZW1vdmUoKTsKICAgICAgfQogICAgICA7CiAgICAgIGlmICh0aGlzLm5hdmlnYXRvck1hcmtlcjIpIHsKICAgICAgICB0aGlzLm5hdmlnYXRvck1hcmtlcjIucmVtb3ZlKCk7CiAgICAgIH0KICAgICAgOwogICAgICBpZiAodGhpcy5saW5lTWFya2Vycy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5saW5lTWFya2Vycy5mb3JFYWNoKG1hcmtlciA9PiB7CiAgICAgICAgICBtYXJrZXIucmVtb3ZlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJlYU1hcmtlcikgdGhpcy5hcmVhTWFya2VyLnJlbW92ZSgpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJMaW5lTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJMaW5lTGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoIkxpbmVTb3VyY2UiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgiTGluZVNvdXJjZSIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJQb2ludHNMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoIlBvaW50c0xheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJwb2ludFNvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJwb2ludFNvdXJjZSIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJQb2ludEFMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoIlBvaW50QUxheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoIkFyZWFzTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJBcmVhc0xheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJwb2ludEFTb3VyY2UiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgicG9pbnRBU291cmNlIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJBcmVhc1NvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJBcmVhc1NvdXJjZSIpOwogICAgICB0aGlzLm5hdk1hcmtlcnMgPSBbXTsKICAgICAgdGhpcy5saW5lTWFya2VycyA9IFtdOwogICAgICB0aGlzLmZlYXR1cmVzTGluZSA9IFtdOwogICAgICB0aGlzLmFyZWFNYXJrZXJzID0gW107CiAgICAgIHRoaXMuZmlyc3RQb2ludCA9IFtdOwogICAgICB0aGlzLm1hcmtlcnNMaW5lUG9pbnRzID0gW107CiAgICAgIHRoaXMubWFya2Vyc0FyZWFQb2ludHMgPSBbXTsKICAgICAgdGhpcy5hbGxEaXN0YW5jZSA9IG51bGw7CiAgICB9LAogICAgZWNob1loRGV2ZWljZSh7CiAgICAgIHVuY3VyZWQsCiAgICAgIGN1cmluZwogICAgfSwgY2FsbGJhY2spIHsKICAgICAgaWYgKCFtYXBPYmoubWFwSW5zdGFuY2UuZ2V0TGF5ZXIoJ3VuY3VyZWRMaW5lJykpIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCd1bmN1cmVkJywgewogICAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgICAgaWQ6ICJ1bmN1cmVkTGluZSIsCiAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICBzb3VyY2U6ICJ1bmN1cmVkIiwKICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICdsaW5lLXdpZHRoJzogMywKICAgICAgICAgICAgJ2xpbmUtY29sb3InOiAiI2ZmYTAxZSIKICAgICAgICAgIH0KICAgICAgICB9LCAnY3VyZScpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgICBpZDogInVuY3VyZWRQb2ludCIsCiAgICAgICAgICB0eXBlOiAic3ltYm9sIiwKICAgICAgICAgIGZpbHRlcjogWyI9PSIsICckdHlwZScsICJQb2ludCJdLAogICAgICAgICAgc291cmNlOiAidW5jdXJlZCIsCiAgICAgICAgICBmaWx0ZXI6IFsnPT0nLCAnJHR5cGUnLCAnUG9pbnQnXSwKICAgICAgICAgIGxheW91dDogewogICAgICAgICAgICAnaWNvbi1zaXplJzogMSwKICAgICAgICAgICAgJ2ljb24taW1hZ2UnOiAiZXZlbnRQb2ludCIKICAgICAgICAgIH0KICAgICAgICB9LCAnY3VyZScpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoJ2N1cmluZycsIHsKICAgICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICAgIGlkOiAiY3VyaW5nTGluZSIsCiAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICBzb3VyY2U6ICJjdXJpbmciLAogICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgJ2xpbmUtd2lkdGgnOiAxMCwKICAgICAgICAgICAgJ2xpbmUtY29sb3InOiAiIzM5ZDk4YSIKICAgICAgICAgIH0KICAgICAgICB9LCAnY3VyZScpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgICBpZDogImN1cmluZ1BvaW50IiwKICAgICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgICAgZmlsdGVyOiBbIj09IiwgJyR0eXBlJywgIlBvaW50Il0sCiAgICAgICAgICBzb3VyY2U6ICJjdXJpbmciLAogICAgICAgICAgZmlsdGVyOiBbJz09JywgJyR0eXBlJywgJ1BvaW50J10sCiAgICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICAgJ2ljb24tc2l6ZSc6IDEsCiAgICAgICAgICAgICdpY29uLWltYWdlJzogImV2ZW50TGluZSIKICAgICAgICAgIH0KICAgICAgICB9LCAnY3VyZScpOwogICAgICB9CiAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub2ZmKCdjbGljaycsIHRoaXMuY2FsbGJhY2spOwogICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCdjbGljaycsIGNhbGxiYWNrKTsKICAgICAgfQogICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgndW5jdXJlZCcsIHsKICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgIGZlYXR1cmVzOiB1bmN1cmVkCiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgnY3VyaW5nJywgewogICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgZmVhdHVyZXM6IGN1cmluZwogICAgICB9KTsKICAgICAgdGhpcy5tYWtlUG9zaXRpb24odW5jdXJlZC5jb25jYXQoY3VyaW5nKSk7CiAgICB9LAogICAgbWFrZVBvc2l0aW9uKGZlYXR1cmVzKSB7CiAgICAgIGlmIChmZWF0dXJlcy5sZW5ndGgpIHsKICAgICAgICBsZXQgYmJveCA9IHR1cmYuYmJveCh7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXMKICAgICAgICB9KTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmZpdEJvdW5kcyhiYm94LCB7CiAgICAgICAgICBwYWRkaW5nOiB7CiAgICAgICAgICAgIHRvcDogMTAsCiAgICAgICAgICAgIGJvdHRvbTogMjUsCiAgICAgICAgICAgIGxlZnQ6IDE1LAogICAgICAgICAgICByaWdodDogNQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZml0Qm91bmRzKFtbMTIwLjM4MTg4NDg0NDk4MDQ1LCAzMC41Njg2ODU0NzU3ODA4OF0sIFsxMTkuNTE1NDkwOTc1NTQyOTUsIDMwLjE3ODM1Njk4NzcyMDYxMl1dLCB7CiAgICAgICAgICBsaW5lYXI6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvL+i2heWbvuWHoOS9leafpeivogogICAgYXN5bmMgZ2V0RGF0YVdpdGhTcGF0aWFsKHsKICAgICAgZGF0YXNldE5hbWVzID0gdGhpcy53c0RhdGFiYXNlTmFtZXMxLAogICAgICBnZW9tZXRyeQogICAgfSkgewogICAgICByZXR1cm4gYXdhaXQgbWFwT2JqLm1hcEluc3RhbmNlLmdldERhdGFXaXRoU3BhdGlhbCh7CiAgICAgICAgZGF0YXNldE5hbWVzLAogICAgICAgIGdlb21ldHJ5CiAgICAgIH0pOwogICAgfSwKICAgIC8v6LaF5Zu+5Yeg5L2V5p2h5Lu25p+l6K+iCiAgICBhc3luYyBnZXREYXRhV2l0aFNwYXRpYWxBdHQoewogICAgICBkYXRhc2V0TmFtZXMgPSB0aGlzLmRhdGFOYW1lcywKICAgICAgZ2VvbWV0cnksCiAgICAgIHNxbAogICAgfSkgewogICAgICByZXR1cm4gYXdhaXQgbWFwT2JqLm1hcEluc3RhbmNlLmdldERhdGFXaXRoU3BhdGlhbEF0dCh7CiAgICAgICAgZGF0YXNldE5hbWVzLAogICAgICAgIGdlb21ldHJ5LAogICAgICAgIHNxbAogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBnZXREYXRhV2l0aFNxbCh7CiAgICAgIGRhdGFzZXROYW1lcyA9IHRoaXMuZGF0YWJhc2VOYW1lczEsCiAgICAgIHNxbAogICAgfSkgewogICAgICByZXR1cm4gYXdhaXQgbWFwT2JqLm1hcEluc3RhbmNlLmdldERhdGFXaXRoU3FsKGRhdGFzZXROYW1lcywgc3FsKTsKICAgIH0sCiAgICAvL+afpeivoueCueWHu+WkhOeJueW+gQogICAgcXVlcnlSZW5kZXJlZEZlYXR1cmVzKGUpIHsKICAgICAgcmV0dXJuIG1hcE9iai5tYXBJbnN0YW5jZS5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZSk7CiAgICB9LAogICAgLy/ov5vlhaXlhbvmiqTlsZXnpLrlhbvmiqTpnaLljLoKICAgIHNob3dQb2xvZ3koZmVhdHVyZXMpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgneWhQb2xvZ3knLCB7CiAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlcwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJ5aFBvbG9neSIsCiAgICAgICAgc291cmNlOiAieWhQb2xvZ3kiLAogICAgICAgIHR5cGU6ICJmaWxsIiwKICAgICAgICBwYWludDogewogICAgICAgICAgJ2ZpbGwtY29sb3InOiAiIzJBODNFNiIsCiAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC4yCiAgICAgICAgfQogICAgICB9LCAneWhwcHAnLCAndXNlcicpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgIGlkOiAieWhMaW5lIiwKICAgICAgICBzb3VyY2U6ICJ5aFBvbG9neSIsCiAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAnbGluZS1jb2xvcic6ICIjMkE4M0U2IiwKICAgICAgICAgICdsaW5lLXdpZHRoJzogMgogICAgICAgIH0KICAgICAgfSwgJ3locHBwJywgJ3VzZXInKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgneWhQb2xvZ3kxJywgewogICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICBpZDogInloUG9sb2d5MSIsCiAgICAgICAgc291cmNlOiAieWhQb2xvZ3kxIiwKICAgICAgICB0eXBlOiAiZmlsbCIsCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICdmaWxsLWNvbG9yJzogIiMyQTgzRTYiLAogICAgICAgICAgJ2ZpbGwtb3BhY2l0eSc6IDAuMgogICAgICAgIH0KICAgICAgfSwgJ3locHBwJywgJ3VzZXInKTsKICAgIH0sCiAgICAvL+WIpOaWreaYr+WQpuWIsOi+vuaMh+WumuiMg+WbtAogICAgY2hlY2tQb3NpdGlvbihwb2ludCwgZmVhdHVyZXMpIHsKICAgICAgdGhpcy5kYXRhTmFtZXMgPSBbXTsKICAgICAgbGV0IHRlbXBGZWF0dXJlID0gZmVhdHVyZXMuZmluZChmZWF0dXJlID0+IHR1cmYuaW5zaWRlKHBvaW50LCBmZWF0dXJlKSk7CiAgICAgIGlmICh0ZW1wRmVhdHVyZSAmJiB0ZW1wRmVhdHVyZS5wcm9wZXJ0aWVzICYmIHRlbXBGZWF0dXJlLnByb3BlcnRpZXMuYnVzaW5lc3NUeXBlID09PSAn5L6b5rC0JykgewogICAgICAgIHRoaXMuZGF0YU5hbWVzID0gdGhpcy5nc0RhdGFiYXNlTmFtZXMxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGF0YU5hbWVzID0gdGhpcy53c0RhdGFiYXNlTmFtZXMxOwogICAgICB9CiAgICAgIGxldCBwdHNXaXRoaW4gPSB0dXJmLndpdGhpbih0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKFt0dXJmLnBvaW50KHBvaW50KV0pLCB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzKSk7CiAgICAgIGlmIChwdHNXaXRoaW4uZmVhdHVyZXMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIGZlYXR1cmVzLmZpbmQoZmVhdHVyZSA9PiB0dXJmLmluc2lkZShwb2ludCwgZmVhdHVyZSkpOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICAvL+eUn+aIkDJrbeS4uuWNiuW+hOeahOWchizlubbmn6Xmib7orr7mlr0KICAgIGFzeW5jIHNldEJ1ZmZlcihwb2ludCwgcmFkaXVzID0gMC4wMzUsIGZlYXR1cmUpIHsKICAgICAgbGV0IGJ1ZmZlcmVkID0gdHVyZi5idWZmZXIodHVyZi5wb2ludChwb2ludCksIHJhZGl1cywgJ2tpbG9tZXRlcnMnKTsKICAgICAgaWYgKGZlYXR1cmUpIHsKICAgICAgICByZXR1cm4gdHVyZi5pbnRlcnNlY3QoYnVmZmVyZWQsIGZlYXR1cmUpOwogICAgICB9CiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ3loUG9sb2d5JywndmlzaWJpbGl0eScsJ25vbmUnKTsKICAgICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEoJ3loUG9sb2d5MScsewogICAgICAvLyAgIHR5cGU6IkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgLy8gICBmZWF0dXJlczpbYnVmZmVyZWRdCiAgICAgIC8vIH0pOwogICAgICByZXR1cm4gYnVmZmVyZWQ7CiAgICB9LAogICAgLy/liLDovr7plJnor6/vvIzlm57pgIAKICAgIHBvbG9neUJhY2soKSB7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ3loUG9sb2d5MScsICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgneWhQb2xvZ3knLCAndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7CiAgICB9LAogICAgLy/np7vpmaTlhbvmiqTmiYDmnInpnaLljLoKICAgIHJlbW92ZUFsbFlIKCkgewogICAgICBpZiAobWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoJ3loUG9sb2d5MScpKSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnJlbW92ZUdyb3VwTGF5ZXIoJ3locHBwJyk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnJlbW92ZVNvdXJjZSgneWhQb2xvZ3kxJyk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnJlbW92ZVNvdXJjZSgneWhQb2xvZ3knKTsKICAgICAgfQogICAgfSwKICAgIC8vIOi2heWbvumbhuWQiOafpeivoumAmui/h+euoeW+hOe6p+WIq+WSjOeJueWumueahOaVsOaNrumbhgogICAgYXN5bmMgZ2V0RGF0YVdpdGhTcGF0aWFsQW5kUGlwZUxldmVsKHsKICAgICAgaW5zcEJ1c2luZXNzVHlwZSwKICAgICAgZ2VvbSwKICAgICAgcGlwZUxldmVsCiAgICB9KSB7CiAgICAgIGxldCBkYXRhc2V0TmFtZXMgPSBbXTsKICAgICAgbGV0IGlzU3VwcGx5ID0gZmFsc2U7CiAgICAgIHN3aXRjaCAoaW5zcEJ1c2luZXNzVHlwZSkgewogICAgICAgIGNhc2UgIldBVEVSX1NVUFBMWSI6CiAgICAgICAgICBkYXRhc2V0TmFtZXMgPSB0aGlzLmdzRGF0YWJhc2VOYW1lczsKICAgICAgICAgIGlzU3VwcGx5ID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlJBSV9XQVRFUiI6CiAgICAgICAgICBkYXRhc2V0TmFtZXMgPSB0aGlzLnlzRGF0YWJhc2VOYW1lczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlBPTExVVEVEX1dBVEVSIjoKICAgICAgICAgIGRhdGFzZXROYW1lcyA9IHRoaXMud3NEYXRhYmFzZU5hbWVzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGRhdGFzZXROYW1lcyA9IHRoaXMuZGF0YWJhc2VOYW1lczsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHJldHVybiBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuZ2V0RGF0YVdpdGhTcGF0aWFsQW5kUGlwZUxldmVsKHsKICAgICAgICBkYXRhc2V0TmFtZXMsCiAgICAgICAgZ2VvbSwKICAgICAgICBwaXBlTGV2ZWwsCiAgICAgICAgaXNTdXBwbHkKICAgICAgfSk7CiAgICB9LAogICAgLy8g55S75Y2K5b6E5Li6cmFkaXVz55qE5ZyG6IyD5Zu0CiAgICBkcmF3QnVmZmVyKHBvaW50LCByYWRpdXMgPSAwLjAyMCkgewogICAgICBsZXQgYnVmZmVyZWQgPSB0dXJmLmJ1ZmZlcihwb2ludCwgcmFkaXVzLCB7CiAgICAgICAgdW5pdDogJ2tpbG9tZXRlcnMnCiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgnYnVmZmVyZWQnLCB7CiAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICBmZWF0dXJlczogW2J1ZmZlcmVkXQogICAgICB9KTsKICAgIH0sCiAgICAvLyDmt7vliqDnvJPlhrLljLrnmoTlm77lsYIKICAgIGFkZEJ1ZmZlckxheWVyKCkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCdidWZmZXJlZCcsIHsKICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJidWZmZXJMYXllciIsCiAgICAgICAgdHlwZTogImZpbGwiLAogICAgICAgIHNvdXJjZTogImJ1ZmZlcmVkIiwKICAgICAgICBwYWludDogewogICAgICAgICAgImZpbGwtY29sb3IiOiAiI0ZGQjZDMSIsCiAgICAgICAgICAiZmlsbC1vcGFjaXR5IjogMC41CiAgICAgICAgfQogICAgICB9LCAnbGlnaHRMYXllcicpOwogICAgfSwKICAgIGFzeW5jIGFkZEluc3BMYXllcigpIHsKICAgICAgYXdhaXQgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJyYW5nZVBpcGVzTGF5ZXIiLAogICAgICAgIHNvdXJjZTogIjE1NDkwMDA2ODYzODA4Nzk4NzMiLAogICAgICAgICJzb3VyY2UtbGF5ZXIiOiAiMTU0OTAwMDY4NjM4MDg3OTg3MyIsCiAgICAgICAgIm1ldGFkYXRhIjogewogICAgICAgICAgImxheWVySWQiOiAiMTU0OTAwMDY4NjM4MDg3OTg3MyIKICAgICAgICB9LAogICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgInZpc2liaWxpdHkiOiAibm9uZSIKICAgICAgICB9LAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAvLyAibGluZS1jb2xvciI6IFsKICAgICAgICAgIC8vICAgJ2Nhc2UnLAogICAgICAgICAgLy8gICBbJ2Jvb2xlYW4nLCBbJ2ZlYXR1cmUtc3RhdGUnLCAnaW5zcCddLCBmYWxzZV0sCiAgICAgICAgICAvLyAgICIjMDA5NDVlIiwKICAgICAgICAgIC8vICAgIiNmZjAwMDAiCiAgICAgICAgICAvLyBdLAogICAgICAgICAgImxpbmUtY29sb3IiOiAiIzQ0QkE1QSIsCiAgICAgICAgICAibGluZS13aWR0aCI6IDMKICAgICAgICB9CiAgICAgIH0sICdtYXBCb3JkZXInKTsKICAgIH0sCiAgICAvLyDmt7vliqDlt6Hmo4DojIPlm7Qs5pqC5pe25Li6cG9seWdvbuexu+WeiwogICAgYWRkUmFuZ2VMYXllcihnZW9tLCBpZHgpIHsKICAgICAgaWYgKCFtYXBPYmoubWFwLmdldFNvdXJjZSgicmFuZ2VTb3VyY2VfIiArIGlkeCkpIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCJyYW5nZVNvdXJjZV8iICsgaWR4LCB7CiAgICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICAgIGZlYXR1cmVzOiBbewogICAgICAgICAgICAgIGdlb21ldHJ5OiBnZW9tLAogICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJwogICAgICAgICAgICB9XQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICghbWFwT2JqLm1hcC5nZXRMYXllcigicmFuZ2VMYXllcl8iICsgaWR4KSkgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgaWQ6ICJyYW5nZUxheWVyXyIgKyBpZHgsCiAgICAgICAgICB0eXBlOiAiZmlsbCIsCiAgICAgICAgICBzb3VyY2U6ICJyYW5nZVNvdXJjZV8iICsgaWR4LAogICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgImZpbGwtY29sb3IiOiAiI2U2ZWRmYSIsCiAgICAgICAgICAgICJmaWxsLW9wYWNpdHkiOiAwLjYKICAgICAgICAgIH0KICAgICAgICB9LCAna2V5cG9pbnRzTGF5ZXInKTsKICAgICAgfQogICAgICBpZiAoIW1hcE9iai5tYXAuZ2V0TGF5ZXIoInJhbmdlTGF5ZXJMaW5lXyIgKyBpZHgpKSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgICBpZDogInJhbmdlTGF5ZXJMaW5lXyIgKyBpZHgsCiAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICBzb3VyY2U6ICJyYW5nZVNvdXJjZV8iICsgaWR4LAogICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgImxpbmUtY29sb3IiOiAiI2U2ZWRmYSIsCiAgICAgICAgICAgICJsaW5lLWRhc2hhcnJheSI6IFs0LCA0XSwKICAgICAgICAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgICAgICB9CiAgICAgICAgfSwgJ2tleXBvaW50c0xheWVyJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmoLnmja7nrqHlvoTnuqfliKvjgIHojIPlm7TjgIHkuJrliqHnsbvlnovmn6Xor6LojIPlm7TlhoXnmoTnn6Lph4/nk6bniYcKICAgIGFzeW5jIGFkZFJhbmdlTVZUKHBhcmFtcykgewogICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5yZW1vdmVSYW5nZU1WVCgpOwogICAgICAvKioNCiAgICAgIGNvbnN0IGdlb21TdHIgPSBwYXJhbXMuZ2VvbTsNCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoYXQuJGFwaS5wb3N0QWN0aW9uKCIveWhzdy1wb3N0Z2lzL2FkZFF1ZXJ5UGxhbmUiLCBnZW9tU3RyKTsNCiAgICAgIGxldCBpZDsNCiAgICAgIGlmIChyZXMuc3RhdHVzKSB7DQogICAgICAgIGlkID0gcmVzLmRhdGEgfHwgJzEzOTg1NDg5Nzc4Mzc2NzQ0OTgnOw0KICAgICAgfQ0KICAgICAgbGV0IHBpcGVUeXBlOw0KICAgICAgc3dpdGNoIChwYXJhbXMuaW5zcEJ1c2luZXNzVHlwZSkgew0KICAgICAgICBjYXNlICJXQVRFUl9TVVBQTFkiOg0KICAgICAgICAgIHBpcGVUeXBlID0gIuS+m+awtOeuoee6vyI7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIlJBSV9XQVRFUiI6DQogICAgICAgICAgcGlwZVR5cGUgPSAi6Zuo5rC0566h57q/IjsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiUE9MTFVURURfV0FURVIiOg0KICAgICAgICAgIHBpcGVUeXBlID0gIuaxoeawtOeuoee6vyI7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIk9SSUdJTl9XQVRFUiI6DQogICAgICAgICAgcGlwZVR5cGUgPSAi5rqQ5rC0566h57q/IjsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiUklWRVJfV0FURVIiOg0KICAgICAgICAgIHBpcGVUeXBlID0gIuaOkuaxn+euoSI7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICAvLyBjb25zdCByZXMyID0gYXdhaXQgdGhhdC4kYXBpLmdldEFjdGlvbigiLyIpDQogICAgICBsZXQgdXJsOw0KICAgICAgaWYgKHBhcmFtcy5jYWxpYmVycykgew0KICAgICAgICB1cmwgPSBiYXNlVXJsLnVybF9jb25maWcgKyBgL3loc3ctcG9zdGdpcy9nZXRBbGxMaW5lSGFzaEluc3Ave3h9L3t5fS97en0/cmFuZ0lkPSR7aWR9JmNhbGlicmVzPSR7cGFyYW1zLmNhbGliZXJzfSZ0eXBlPSR7cGlwZVR5cGV9JmVuZERhdGU9JHtwYXJhbXMuZW5kRGF0ZX1gOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbGV0IGNhbGliZXJTdHIgPSB3aW5kb3cuYnRvYShKU09OLnN0cmluZ2lmeShwYXJhbXMuY2FsaWJlclZPUykpOw0KICAgICAgICB1cmwgPSBiYXNlVXJsLnVybF9jb25maWcgKyBgL3loc3ctcG9zdGdpcy9nZXRBbGxMaW5lSW5mb0luc3BNdWx0aXBsZS97eH0ve3l9L3t6fT9pZD0ke2lkfSZjYWxpYmVyVk9MaXN0U3RyPSR7Y2FsaWJlclN0cn0mdHlwZT0ke3BpcGVUeXBlfSZlbmREYXRlPSR7cGFyYW1zLmVuZERhdGV9YDsNCiAgICAgIH0NCiAgICAgICovCiAgICAgIGxldCB1cmwgPSBiYXNlVXJsLnVybF9jb25maWcgKyBgb3BzLWluc3BlY3Rpb24vZ2V0QWxsTGluZVRhc2sve3h9L3t5fS97en0/dGFza0lkPSR7cGFyYW1zLnRhc2tJZH1gOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCJyYW5nZVBpcGVWZWN0b3IiLCB7CiAgICAgICAgdHlwZTogInZlY3RvciIsCiAgICAgICAgdGlsZXM6IFt1cmxdLAogICAgICAgIHByb21vdGVJZDogJ2d1aWQnCiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogInJhbmdlUGlwZXNMYXllciIsCiAgICAgICAgc291cmNlOiAicmFuZ2VQaXBlVmVjdG9yIiwKICAgICAgICAic291cmNlLWxheWVyIjogImxpbmUiLAogICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICBwYWludDogewogICAgICAgICAgImxpbmUtY29sb3IiOiBbJ2Nhc2UnLCBbJ2Jvb2xlYW4nLCBbJ2ZlYXR1cmUtc3RhdGUnLCAnaW5zcCddLCBmYWxzZV0sICIjMDA5NDVlIiwgIiNmZjAwMDAiXSwKICAgICAgICAgICJsaW5lLXdpZHRoIjogMwogICAgICAgIH0KICAgICAgfSwgJ2tleXBvaW50c0xheWVyJyk7CiAgICAgIC8vIOmAieS4reW9k+WJjeeuoee6v+WbvuWxggogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCJjdXJJbnNwTGluZVNvdXJjZSIsIHsKICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAiY3VySW5zcExpbmVMYXllciIsCiAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgIHNvdXJjZTogImN1ckluc3BMaW5lU291cmNlIiwKICAgICAgICBwYWludDogewogICAgICAgICAgImxpbmUtY29sb3IiOiAiIzQyNjRGQiIsCiAgICAgICAgICAibGluZS13aWR0aCI6IDgKICAgICAgICB9CiAgICAgIH0sICJrZXlwb2ludHNMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogImN1ckluc3BQb2ludExheWVyIiwKICAgICAgICB0eXBlOiAiY2lyY2xlIiwKICAgICAgICBzb3VyY2U6ICJjdXJJbnNwTGluZVNvdXJjZSIsCiAgICAgICAgZmlsdGVyOiBbJz09JywgJyR0eXBlJywgJ1BvaW50J10sCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICJjaXJjbGUtY29sb3IiOiAiI0ZGQTAxRSIsCiAgICAgICAgICAiY2lyY2xlLXJhZGl1cyI6IDgKICAgICAgICB9CiAgICAgIH0sICJrZXlwb2ludHNMYXllciIpOwogICAgICAvLyDlr7nnrqHnur/ov5vooYzkuIrmiqUKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbignY2xpY2snLCAncmFuZ2VQaXBlc0xheWVyJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICBsZXQgZmVhdHVyZXMgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLnBvaW50LCB7CiAgICAgICAgICBsYXllcnM6IFsicmFuZ2VQaXBlc0xheWVyIl0KICAgICAgICB9KTsKICAgICAgICB0aGF0LnNldExpbmVHZW9Tb3VyY2UoW2ZlYXR1cmVzWzBdXSwgImN1ckluc3BMaW5lU291cmNlIik7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOenu+mZpOW3oeajgOeuoee6v01WVAogICAgcmVtb3ZlUmFuZ2VNVlQoKSB7CiAgICAgIC8vIOWmguaenOWtmOWcqOiMg+WbtOeahE1WVOWbvuWxgu+8jOWwseenu+mZpOivpeWbvuWxggogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJyYW5nZVBpcGVzTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJyYW5nZVBpcGVzTGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoInJhbmdlUGlwZVZlY3RvciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJyYW5nZVBpcGVWZWN0b3IiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigiY3VySW5zcExpbmVMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoImN1ckluc3BMaW5lTGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigiY3VySW5zcFBvaW50TGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJjdXJJbnNwUG9pbnRMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgiY3VySW5zcExpbmVTb3VyY2UiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgiY3VySW5zcExpbmVTb3VyY2UiKTsKICAgICAgLy8g5riF56m65q2k5qyh5beh5qOA5L+d5a2Y55qE6KaB57SgCiAgICAgIHJlY29yZEZlYXR1cmVzID0gW107CiAgICB9LAogICAgLy8g6K6+572u5beh5qOA6IyD5Zu0CiAgICBzZXRSYW5nZUxheWVyKHJhbmdlTGlzdCwgaWZFbWVyZ2VuY3kgPSBmYWxzZSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHJhbmdlTGlzdC5mb3JFYWNoKHJhbmdlID0+IHsKICAgICAgICAvLyDlpoLmnpzkuLrlupTmgKXku7vliqHvvIzkuI3liqDovb3nrqHnur/mlbDmja4KICAgICAgICBpZiAoIWlmRW1lcmdlbmN5KSB7CiAgICAgICAgICAvLyDmm7/mjaLkuLrmlrDnmoTotoXlm77mn6Xor6Lmlrnms5UKICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgICAgdGFza0lkOiByYW5nZS50YXNrSWQgPyByYW5nZS50YXNrSWQgOiB1bmRlZmluZWQsCiAgICAgICAgICAgIGNhbGliZXJzOiByYW5nZS5jYWxpYmVycyA/IHJhbmdlLmNhbGliZXJzIDogdW5kZWZpbmVkLAogICAgICAgICAgICBjYWxpYmVyVk9TOiByYW5nZS5jYWxpYmVyVk9TID8gcmFuZ2UuY2FsaWJlclZPUyA6IHVuZGVmaW5lZCwKICAgICAgICAgICAgZW5kRGF0ZTogcmFuZ2UuZW5kRGF0ZSA/IHJhbmdlLmVuZERhdGUgOiB1bmRlZmluZWQsCiAgICAgICAgICAgIGluc3BCdXNpbmVzc1R5cGU6IHJhbmdlLmluc3BCdXNpbmVzc1R5cGUsCiAgICAgICAgICAgIGdlb206IHJhbmdlLmdlb21ldHJ5LAogICAgICAgICAgICBwaXBlTGV2ZWw6IHJhbmdlLnBpcGVMZXZlbAogICAgICAgICAgfTsKICAgICAgICAgIC8vIOmrmOS6rueuoee6v+abv+aNouefoumHj+eTpueJhwogICAgICAgICAgdGhpcy5hZGRSYW5nZU1WVChwYXJhbXMpOwoKICAgICAgICAgIC8vIHRoYXQuZ2V0RGF0YVdpdGhTcGF0aWFsQW5kUGlwZUxldmVsKHBhcmFtcykKICAgICAgICAgIC8vICAgLnRoZW4oZGV2aWNlcyA9PiB7CiAgICAgICAgICAvLyAgICAgaWYgKGRldmljZXMuZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAvLyAgICAgICBsZXQgZmVhdHVyZXMgPSBkZXZpY2VzLmRhdGEuZmVhdHVyZXM7CiAgICAgICAgICAvLyAgICAgICB0aGF0LmhhbmRsZUluc3BEYXRhKGZlYXR1cmVzLCBmYWxzZSwgIWlmRW1lcmdlbmN5KTsKICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyAgIH0pCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhhdC5zZXRMaW5lR2VvU291cmNlKHJhbmdlTGlzdCwgInJhbmdlU291cmNlIik7CiAgICB9LAogICAgLy8g5Zyo5Zu+5bGC5Lit5re75Yqg5YWz6ZSu54K577yM5LyY5YyW5oCn6IO9CiAgICBhZGRLZXlQb2ludExheWVyKCkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZFNvdXJjZSgna2V5cG9pbnRzJywgewogICAgICAgIHR5cGU6ICdnZW9qc29uJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfSwKICAgICAgICBwcm9tb3RlSWQ6ICdlbmdJZCcKICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAna2V5cG9pbnRzTGF5ZXInLAogICAgICAgIHR5cGU6ICdzeW1ib2wnLAogICAgICAgIHNvdXJjZTogJ2tleXBvaW50cycsCiAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICAgICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgICAgICAgImljb24taW1hZ2UiOiBbJ2Nhc2UnLCBbJz09JywgWydnZXQnLCAnaXNPcmFuZ2UnXSwgdHJ1ZV0sICflt7LpgIDlm54nLCBbJz09JywgWydnZXQnLCAnaXNHcmVlbiddLCB0cnVlXSwgJ+ato+W4uCcsIFsnPT0nLCBbJ2dldCcsICdpc1JlZCddLCB0cnVlXSwgJ+W8guW4uCcsIFsnPT0nLCBbJ2dldCcsICdpc0JsdWUnXSwgdHJ1ZV0sICfmnKrlt6Hmo4AnLCAn5pyq5beh5qOAJ10sCiAgICAgICAgICAnaWNvbi1zaXplJzogMC40LAogICAgICAgICAgJ2ljb24tYWxsb3ctb3ZlcmxhcCc6IHRydWUsCiAgICAgICAgICAnaWNvbi1pZ25vcmUtcGxhY2VtZW50JzogdHJ1ZQogICAgICAgIH0KICAgICAgfSwgJ21hcEJvcmRlcicpOwogICAgICBtYXBPYmoubWFwLm9uKCdjbGljaycsICdrZXlwb2ludHNMYXllcicsIHRoaXMuc2lnbkluQnVmZmVyKTsKICAgIH0sCiAgICBzaWduSW5CdWZmZXIoZSkgewogICAgICAvLyBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0YXJ0UmVjb3JkTGluZXMnKSA9PSAnc3RhcnQnKSB7CiAgICAgIGlmICh0cnVlKSB7CiAgICAgICAgbGV0IGZlYXR1cmVzID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZS5wb2ludCwgewogICAgICAgICAgbGF5ZXJzOiBbImtleXBvaW50c0xheWVyIl0KICAgICAgICB9KTsKICAgICAgICBpZiAoZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgZmVhdCA9IEpTT04ucGFyc2UoZmVhdHVyZXNbMF0ucHJvcGVydGllcy5mZWF0dXJlKTsKICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcihmZWF0Lmdlb20pOwogICAgICAgICAgYnVzLiRlbWl0KCJzdGFydFNpZ25JbiIsIGZlYXQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBUb2FzdCh7CiAgICAgICAgICBtZXNzYWdlOiAn5beh5qOA5pyq5byA5aeL77yM5peg5rOV5omT5Y2h562+5YiwJywKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgc2V0S2V5UG9pbnRMYXllcihmZWF0dXJlcykgewogICAgICBsZXQgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCdrZXlwb2ludHMnKSkgewogICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEoJ2tleXBvaW50cycsIHsKICAgICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgZmVhdHVyZXM6IGZlYXR1cmVzCiAgICAgICAgICB9KTsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgIH0KICAgICAgfSwgMTAwKTsKICAgIH0sCiAgICAvLyDmt7vliqDlhbPplK7ngrltYXJrZXIKICAgIGFkZEtleVBvaW50TWFya2VyKGZlYXR1cmUsIGlmRGV0YWlsID0gZmFsc2UpIHsKICAgICAgbGV0IHBvc2l0aW9uID0gZmVhdHVyZS5lbmdHZW9tLmNvb3JkaW5hdGVzOwogICAgICBsZXQgbmFtZSA9IGZlYXR1cmUuZW5nTnVtIHx8ICLlhbPplK7ngrnlkI3np7AiOwogICAgICBjb25zdCBzcmMgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvaW5zcGVjdGlvbi9pY29uX2tleV9wb2ludF9waW5rLnBuZycpOwogICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8aW1nIGlkPSJrZXlwb2ludF8ke2ZlYXR1cmUuZW5nSWR9IiBzcmM9IiR7c3JjfSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KICAgICAgICBgOwogICAgICBsZXQgbWFya2VyID0gbWFwT2JqLm1hcEluc3RhbmNlLm5ld01hcmtlcih7CiAgICAgICAgZWxlbWVudDogZWxlLAogICAgICAgIG9mZnNldDogWzAsIC0xMF0KICAgICAgfSk7CiAgICAgIC8vIGNvbnN0IG1hcmtlckhUTUwgPSBgCiAgICAgIC8vICAgICA8ZGl2PgogICAgICAvLyAgICAgICA8ZGl2CiAgICAgIC8vICAgICAgICAgc3R5bGU9ImZsb2F0OiBsZWZ0OyIKICAgICAgLy8gICAgICAgPgogICAgICAvLyAgICAgICAgIDxzdHJvbmc+JHtuYW1lfTwvc3Ryb25nPgogICAgICAvLyAgICAgICA8L2Rpdj4KICAgICAgLy8gICAgICAgPGJ1dHRvbgogICAgICAvLyAgICAgICAgIGlkPSJidG5fJHtmZWF0dXJlLmVuZ0lkfSIKICAgICAgLy8gICAgICAgICBzdHlsZT0iY29sb3I6ICNmZmY7YmFja2dyb3VuZC1jb2xvcjogIzJBODNFNjtib3JkZXItY29sb3I6ICNmZmY7Ym9yZGVyLXdpZHRoOjBweDsiCiAgICAgIC8vICAgICAgID7nrb7liLA8L2J1dHRvbj4KICAgICAgLy8gICAgIDwvZGl2PgogICAgICAvLyAgIGAKICAgICAgLy8gY29uc3QgbWFya2VySFRNTERldGFpbCA9IGAKICAgICAgLy8gICAgIDxkaXY+CiAgICAgIC8vICAgICAgIDxkaXYKICAgICAgLy8gICAgICAgICBzdHlsZT0iZmxvYXQ6IGxlZnQ7IgogICAgICAvLyAgICAgICA+CiAgICAgIC8vICAgICAgICAgPHN0cm9uZz4ke25hbWV9PC9zdHJvbmc+CiAgICAgIC8vICAgICAgIDwvZGl2PgogICAgICAvLyAgICAgPC9kaXY+CiAgICAgIC8vICAgYAogICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKICAgICAgLy8gICAuc2V0UG9wdXAobWFwT2JqLm1hcEluc3RhbmNlLm5ld1BvcHVwKHsgb2Zmc2V0OiBbMCwgLTE1XSwgY2xvc2VCdXR0b246IGZhbHNlIH0pCiAgICAgIC8vICAgICAuc2V0SFRNTChpZkRldGFpbCA/IG1hcmtlckhUTUxEZXRhaWwgOiBtYXJrZXJIVE1MKSkKICAgICAgLy8gICAuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgIC8vIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICBpZiAoIWlmRGV0YWlsKSB7CiAgICAgICAgLy8g5a+55oyJ6ZKu5re75Yqg5LqL5Lu277yM6L+b6KGM6LCD5Ye6562+5Yiw5qGGCiAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJ0bl8iICsgZmVhdHVyZS5lbmdJZCkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZSkgPT4gewogICAgICAgIC8vICAgYnVzLiRlbWl0KCJzdGFydFNpZ25JbiIsIGZlYXR1cmUpOwogICAgICAgIC8vICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAvLyB9KQogICAgICAgIC8vIOWvuWltZ+a3u+WKoOeCueWHu+S6i+S7tgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJrZXlwb2ludF8iICsgZmVhdHVyZS5lbmdJZCkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBlID0+IHsKICAgICAgICAgIC8vIOiOt+WPluW9k+WJjeeCueWHu+eahOWFs+mUrueCuQogICAgICAgICAgbGV0IGNsaWNrS2V5UG9pbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgia2V5cG9pbnRfIiArIGZlYXR1cmUuZW5nSWQpOwogICAgICAgICAgaWYgKGNsaWNrS2V5UG9pbnQpIHsKICAgICAgICAgICAgaWYgKGNsaWNrS2V5UG9pbnQgPT0gdGhpcy5jdXJyZW50S2V5UG9pbnQpIHsKICAgICAgICAgICAgICAvLyDlpoLmnpzlvZPliY3ngrnlh7vnmoTlhbPplK7ngrnkuI7lhajlsYDnmoTlvZPliY3lhbPplK7ngrnnm7jlkIzvvIzljbPph43lpI3ngrnlh7vlj5bmtojmlL7lpKfmiJbov5vooYzmlL7lpKcKICAgICAgICAgICAgICBpZiAoY2xpY2tLZXlQb2ludC5zdHlsZS53aWR0aCA9PSAiMjRweCIpIHsKICAgICAgICAgICAgICAgIGNsaWNrS2V5UG9pbnQuc3R5bGUud2lkdGggPSAiNDBweCI7CiAgICAgICAgICAgICAgICBjbGlja0tleVBvaW50LnN0eWxlLmhlaWdodCA9ICI0MHB4IjsKICAgICAgICAgICAgICAgIC8vIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgICAgICAgICAgdGhpcy5kcmF3QnVmZmVyKGZlYXR1cmUuZW5nR2VvbSk7CiAgICAgICAgICAgICAgICBidXMuJGVtaXQoInN0YXJ0U2lnbkluIiwgZmVhdHVyZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNsaWNrS2V5UG9pbnQuc3R5bGUud2lkdGggPSAiMjRweCI7CiAgICAgICAgICAgICAgICBjbGlja0tleVBvaW50LnN0eWxlLmhlaWdodCA9ICIyNHB4IjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEtleVBvaW50KSB7CiAgICAgICAgICAgICAgICAvLyDliJ3lp4vmg4XlhrXkuIvvvIzmmoLkuI3orr7nva7lhajlsYDnmoTlvZPliY3lhbPplK7ngrnnmoTlpKflsI/vvIzlpoLmnpzlt7Lnu4/lrZjlnKjlhajlsYDlvZPliY3lhbPplK7ngrnvvIzliJnlsIblhbbmgaLlpI3ljp/nirYKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEtleVBvaW50LnN0eWxlLndpZHRoID0gIjI0cHgiOwogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50S2V5UG9pbnQuc3R5bGUuaGVpZ2h0ID0gIjI0cHgiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyDmlL7lpKflvZPliY3ngrnlh7vnmoTlhbPplK7ngrkKICAgICAgICAgICAgICBjbGlja0tleVBvaW50LnN0eWxlLndpZHRoID0gIjQwcHgiOwogICAgICAgICAgICAgIGNsaWNrS2V5UG9pbnQuc3R5bGUuaGVpZ2h0ID0gIjQwcHgiOwogICAgICAgICAgICAgIC8vIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcihmZWF0dXJlLmVuZ0dlb20pOwogICAgICAgICAgICAgIGJ1cy4kZW1pdCgic3RhcnRTaWduSW4iLCBmZWF0dXJlKTsKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRLZXlQb2ludCA9IGNsaWNrS2V5UG9pbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVLZXlQb2ludE1hcmtlcihpZHMpIHsKICAgICAgaWRzLmZvckVhY2goaWQgPT4gewogICAgICAgIGxldCBjdXJyZW50RWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImtleXBvaW50XyIgKyBpZCk7CiAgICAgICAgaWYgKGN1cnJlbnRFbGUpIHsKICAgICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaUueWPmOWFs+mUrueCuW1hcmtlcueahOminOiJsu+8jOabv+aNouWbvueJh+WcsOWdgCwgc3RhdHVz5Li6dHJ1ZeaYvuekuue7v+iJsu+8jOS4umZhbHNl5pi+56S65Lu96ImyCiAgICBjaGFuZ2VLZXlQb2ludE1hcmtlcihlbmdJZCwgc3RhdHVzKSB7CiAgICAgIGNvbnN0IHNyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9pbnNwZWN0aW9uL2ljb25fa2V5X3BvaW50X3BpbmsucG5nJyk7CiAgICAgIGNvbnN0IHNyYzIgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvaW5zcGVjdGlvbi9pY29uX2tleV9wb2ludF9ncmVlbi5wbmcnKTsKICAgICAgbGV0IGNsaWNrS2V5UG9pbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgia2V5cG9pbnRfIiArIGVuZ0lkKTsKICAgICAgaWYgKGNsaWNrS2V5UG9pbnQpIHsKICAgICAgICBpZiAoc3RhdHVzKSB7CiAgICAgICAgICBjbGlja0tleVBvaW50LnNyYyA9IHNyYzI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNsaWNrS2V5UG9pbnQuc3JjID0gc3JjOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOenu+mZpOaJgOacieW6lOaApeW3oeajgG1hcmtlcgogICAgcmVtb3ZlSW5zcEVtZU1hcmtlcihpZHMpIHsKICAgICAgaWRzLmZvckVhY2goaWQgPT4gewogICAgICAgIC8vIOWmguaenOWtmOWcqGlk5Li6ZXZlbnRPYmpfb25l55qE5YWD57Sg77yM5YiZ5Yig6Zmk5q2k5YWD57Sg6YeN5paw5Yib5bu677yM5L+d5oyB5YWo5bGA5Y+q5pyJ5LiA5Liq5q2k5YWD57SgCiAgICAgICAgbGV0IGN1cnJlbnRFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZW1lXyIgKyBpZCk7CiAgICAgICAgaWYgKGN1cnJlbnRFbGUpIHsKICAgICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOa3u+WKoOW6lOaApeW3oeajgOeahG1hcmtlcgogICAgYWRkSW5zcEVtZU1hcmtlcihmZWF0dXJlLCBpZkRldGFpbCA9IGZhbHNlKSB7CiAgICAgIGxldCBwb3NpdGlvbjsKICAgICAgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvbHlnb24nIHx8IGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ011bHRpUG9seWdvbicpIHsKICAgICAgICBjb25zdCBjZW50ZXIgPSB0dXJmLmNlbnRlcihmZWF0dXJlLmdlb21ldHJ5KTsKICAgICAgICBwb3NpdGlvbiA9IGNlbnRlci5nZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgfSBlbHNlIGlmIChmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdMaW5lU3RyaW5nJykgewogICAgICAgIGNvbnN0IGNlbnRlciA9IHR1cmYuY2VudGVyKGZlYXR1cmUuZ2VvbWV0cnkpOwogICAgICAgIHBvc2l0aW9uID0gY2VudGVyLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICB9IGVsc2UgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvaW50JykgewogICAgICAgIHBvc2l0aW9uID0gZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgfQogICAgICBpZiAoIXBvc2l0aW9uKSByZXR1cm47CiAgICAgIGxldCBuYW1lID0gZmVhdHVyZS5wcm9wZXJ0aWVzLm5hbWUgfHwgIuW3oeajgOiMg+WbtCI7CiAgICAgIGNvbnN0IHNyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9pbnNwZWN0aW9uL2ljb25fZW1lcmdlbmN5X3BvaW50LnBuZycpOwogICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8aW1nIGlkPSJlbWVfJHtmZWF0dXJlLmlkfSIgc3JjPSIke3NyY30iIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PC9pbWc+CiAgICAgICAgYDsKICAgICAgbGV0IG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgIGVsZW1lbnQ6IGVsZSwKICAgICAgICBvZmZzZXQ6IFswLCAtNV0KICAgICAgfSk7CiAgICAgIGNvbnN0IG1hcmtlckhUTUwgPSBgCiAgICAgICAgICA8ZGl2IGlkPSJiYXNlXyR7ZmVhdHVyZS5pZH0iPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgYDsKICAgICAgaWYgKCFpZkRldGFpbCkgewogICAgICAgIG1hcmtlci5zZXRMbmdMYXQocG9zaXRpb24pLnNldFBvcHVwKG1hcE9iai5tYXBJbnN0YW5jZS5uZXdQb3B1cCh7CiAgICAgICAgICBvZmZzZXQ6IFswLCAtMTVdLAogICAgICAgICAgY2xvc2VCdXR0b246IGZhbHNlCiAgICAgICAgfSkuc2V0SFRNTChtYXJrZXJIVE1MKSkuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgICAgbWFya2VyLnRvZ2dsZVBvcHVwKCk7CiAgICAgICAgbGV0IGNvdW50VGltZSA9IG5ldyBDb3VudFRpbWVQb3AoewogICAgICAgICAgcHJvcHNEYXRhOiB7CiAgICAgICAgICAgIHJlc3RUaW1lOiBmZWF0dXJlLnJlc3RUaW1lCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY291bnRUaW1lLiRtb3VudChgI2Jhc2VfJHtmZWF0dXJlLmlkfWApOwogICAgICAgIC8vIOWvuWltZ+a3u+WKoOeCueWHu+S6i+S7tgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbWVfIiArIGZlYXR1cmUuaWQpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZSA9PiB7CiAgICAgICAgICAvLyDojrflj5blvZPliY3ngrnlh7vnmoTlhbPplK7ngrkKICAgICAgICAgIGxldCBjbGlja0VtZU1hcmtlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbWVfIiArIGZlYXR1cmUuaWQpOwogICAgICAgICAgaWYgKGNsaWNrRW1lTWFya2VyKSB7CiAgICAgICAgICAgIGlmIChjbGlja0VtZU1hcmtlciA9PSB0aGlzLmN1cnJlbnRFbWVNYXJrZXIpIHsKICAgICAgICAgICAgICBpZiAoY2xpY2tFbWVNYXJrZXIuc3R5bGUud2lkdGggPT0gIjI0cHgiKSB7CiAgICAgICAgICAgICAgICBjbGlja0VtZU1hcmtlci5zdHlsZS53aWR0aCA9ICI0MHB4IjsKICAgICAgICAgICAgICAgIGNsaWNrRW1lTWFya2VyLnN0eWxlLmhlaWdodCA9ICI0MHB4IjsKICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgic3RhcnRFbWVTaWduSW4iLCBmZWF0dXJlKTsKICAgICAgICAgICAgICAgIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjbGlja0VtZU1hcmtlci5zdHlsZS53aWR0aCA9ICIyNHB4IjsKICAgICAgICAgICAgICAgIGNsaWNrRW1lTWFya2VyLnN0eWxlLmhlaWdodCA9ICIyNHB4IjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEVtZU1hcmtlcikgewogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RW1lTWFya2VyLnN0eWxlLndpZHRoID0gIjI0cHgiOwogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RW1lTWFya2VyLnN0eWxlLmhlaWdodCA9ICIyNHB4IjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2xpY2tFbWVNYXJrZXIuc3R5bGUud2lkdGggPSAiNDBweCI7CiAgICAgICAgICAgICAgY2xpY2tFbWVNYXJrZXIuc3R5bGUuaGVpZ2h0ID0gIjQwcHgiOwogICAgICAgICAgICAgIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgICAgICAgIGJ1cy4kZW1pdCgic3RhcnRFbWVTaWduSW4iLCBmZWF0dXJlKTsKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFbWVNYXJrZXIgPSBjbGlja0VtZU1hcmtlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOW3oeajgOS6i+S7tm1hcmtlcgogICAgYWRkSW5zcEV2ZW50TWFya2VyKGZlYXR1cmUpIHsKICAgICAgbGV0IHBvc2l0aW9uOwogICAgICBpZiAoZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnUG9seWdvbicgfHwgZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnTXVsdGlQb2x5Z29uJykgewogICAgICAgIGNvbnN0IGNlbnRlciA9IHR1cmYuY2VudGVyKGZlYXR1cmUuZ2VvbWV0cnkpOwogICAgICAgIHBvc2l0aW9uID0gY2VudGVyLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICB9IGVsc2UgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSB7CiAgICAgICAgY29uc3QgY2VudGVyID0gdHVyZi5jZW50ZXIoZmVhdHVyZS5nZW9tZXRyeSk7CiAgICAgICAgcG9zaXRpb24gPSBjZW50ZXIuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7CiAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnUG9pbnQnKSB7CiAgICAgICAgcG9zaXRpb24gPSBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICB9CiAgICAgIGlmICghcG9zaXRpb24pIHJldHVybjsKICAgICAgY29uc3Qgc3JjID0gcmVxdWlyZSgnQC9hc3NldHMvaW1nL2luc3BlY3Rpb24vaWNvbl9ldmVudF9tYXAucG5nJyk7CiAgICAgIGxldCBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgZWxlLmlubmVySFRNTCA9IGAKICAgICAgICAgIDxpbWcgaWQ9ImV2ZW50XyR7ZmVhdHVyZS5pZH0iIHNyYz0iJHtzcmN9IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPjwvaW1nPgogICAgICAgIGA7CiAgICAgIGxldCBtYXJrZXIgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3TWFya2VyKHsKICAgICAgICBlbGVtZW50OiBlbGUsCiAgICAgICAgb2Zmc2V0OiBbMCwgMTBdCiAgICAgIH0pOwogICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5zZXRQb3B1cChtYXBPYmoubWFwSW5zdGFuY2UubmV3UG9wdXAoewogICAgICAgIG9mZnNldDogWzAsIDBdLAogICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZQogICAgICB9KS5zZXRIVE1MKGAKICAgICAgICAgICAgPGRpdiBzdHlsZT0iY29sb3I6ICMzMzMzMzM7Ij4KICAgICAgICAgICAgICA8c3Ryb25nPiR7dGhpcy5ldmVudFR5cGVMaXN0W2ZlYXR1cmUuZXZlbnRUeXBlXSB8fCAn5LiK5oql5LqL5Lu2J308L3N0cm9uZz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICBgKSkuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgfSwKICAgIC8vIOa3u+WKoOW3oeajgOS6i+S7tuWcqOWbvuWxguS4rQogICAgYWRkSW5zcEV2ZW50TGF5ZXIoZmVhdHVyZXMpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBtYXBPYmoubWFwLmxvYWRJbWFnZShyZXF1aXJlKCdAL2Fzc2V0cy9pbWcvaW5zcGVjdGlvbi9pY29uX2V2ZW50X21hcC5wbmcnKSwgZnVuY3Rpb24gKGVycm9yLCBpbWFnZSkgewogICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7CiAgICAgICAgaWYgKCFtYXBPYmoubWFwLmhhc0ltYWdlKCdldmVudC1tYXJrZXInKSkgewogICAgICAgICAgbWFwT2JqLm1hcC5hZGRJbWFnZSgnZXZlbnQtbWFya2VyJywgaW1hZ2UpOwogICAgICAgIH0KICAgICAgICBtYXBPYmoubWFwLmFkZFNvdXJjZSgnZXZlbnRQb2ludHMnLCB7CiAgICAgICAgICAndHlwZSc6ICdnZW9qc29uJywKICAgICAgICAgICdkYXRhJzogewogICAgICAgICAgICAndHlwZSc6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAgICdmZWF0dXJlcyc6IGZlYXR1cmVzCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAnaWQnOiAnZXZlbnRQb2ludHNMYXllcicsCiAgICAgICAgICAndHlwZSc6ICdzeW1ib2wnLAogICAgICAgICAgJ3NvdXJjZSc6ICdldmVudFBvaW50cycsCiAgICAgICAgICAnbGF5b3V0JzogewogICAgICAgICAgICAidmlzaWJpbGl0eSI6ICdub25lJywKICAgICAgICAgICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAgICAgICAgIC8v6Ieq5Yqo6YG/6K6p5bGe5oCnCiAgICAgICAgICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgICAgICAgICAnaWNvbi1pbWFnZSc6ICdldmVudC1tYXJrZXInLAogICAgICAgICAgICAnaWNvbi1zaXplJzogMC40LAogICAgICAgICAgICAnaWNvbi1vZmZzZXQnOiBbMCwgMTBdCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICAvLyBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCdjbGljaycsICdldmVudFBvaW50c0xheWVyJywgZnVuY3Rpb24gKGUpIHsKICAgICAgLy8gICBsZXQgZmVhdHVyZXMgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLnBvaW50LCB7CiAgICAgIC8vICAgICBsYXllcnM6IFsiZXZlbnRQb2ludHNMYXllciJdCiAgICAgIC8vICAgfSk7CiAgICAgIC8vICAgbGV0IGV2ZW50VHlwZSA9ICIiOwogICAgICAvLyAgIGZlYXR1cmVzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIC8vICAgICBpZiAoaXRlbS5wcm9wZXJ0aWVzICYmIGl0ZW0ucHJvcGVydGllcy5ldmVudFR5cGUpIHsKICAgICAgLy8gICAgICAgZXZlbnRUeXBlICs9IHRoYXQuZXZlbnRUeXBlTGlzdFtpdGVtLnByb3BlcnRpZXMuZXZlbnRUeXBlXSArICIgIjsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9KTsKICAgICAgLy8gICBsZXQgcG9wdXAgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3UG9wdXAoeyBvZmZzZXQ6IFswLCAtNV0sIGNsb3NlQnV0dG9uOiBmYWxzZSB9KQogICAgICAvLyAgICAgLnNldExuZ0xhdChlLmxuZ0xhdCkKICAgICAgLy8gICAgIC5zZXRIVE1MKGA8aDM+JHtldmVudFR5cGV9PC9oMz5gKQogICAgICAvLyAgICAgLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApCiAgICAgIC8vIH0pCiAgICB9LAogICAgLy8g5re75Yqg5LiK5oql5a+56LGh55qEbWFya2VyCiAgICBhZGRFdmVudE9iak1hcmtlcihmZWF0dXJlLCBwb2ludFR5cGUsIHR5cGUsIGdyaWRPYmopIHsKICAgICAgbGV0IHBvc2l0aW9uOwogICAgICBsZXQgcG9wOwogICAgICBsZXQgbWFya2VyOwogICAgICBpZiAocG9pbnRUeXBlID09ICdkZXZpY2UnKSB7CiAgICAgICAgY29uc29sZS5sb2coZmVhdHVyZSk7CiAgICAgICAgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvbHlnb24nIHx8IGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ011bHRpUG9seWdvbicpIHsKICAgICAgICAgIGNvbnN0IGNlbnRlciA9IHR1cmYuY2VudGVyKGZlYXR1cmUuZ2VvbWV0cnkpOwogICAgICAgICAgcG9zaXRpb24gPSBjZW50ZXIuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7CiAgICAgICAgfSBlbHNlIGlmIChmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdMaW5lU3RyaW5nJykgewogICAgICAgICAgY29uc3QgY2VudGVyID0gdHVyZi5jZW50ZXIoZmVhdHVyZS5nZW9tZXRyeSk7CiAgICAgICAgICBwb3NpdGlvbiA9IGNlbnRlci5nZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgICB9IGVsc2UgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvaW50JykgewogICAgICAgICAgcG9zaXRpb24gPSBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICAgIH0KICAgICAgICB0aGlzLmN1cnJlbnRQb2ludCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmVhdHVyZSkpOwogICAgICAgIHRoaXMuY3VycmVudFBvaW50LnRhc2tJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tJZDsKICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5ncmlkSWQgPSBncmlkT2JqLmdyaWRJZDsKICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5ncmlkTmFtZSA9IGdyaWRPYmouZ3JpZE5hbWU7CiAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuZ3JpZE1hbmFnZXIgPSBncmlkT2JqLmdyaWRNYW5hZ2VyOwogICAgICAgIHRoaXMuY3VycmVudFBvaW50LmxuZyA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07CiAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQubGF0ID0gZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1sxXTsKICAgICAgICAvLyDopoHntKDmiYDlnKjlm77lsYJJROWSjOWxnuaAp+S/oeaBrwogICAgICAgIHRoaXMuY3VycmVudFBvaW50LmxheWVySUQgPSBmZWF0dXJlLmxheWVyLmlkOwogICAgICAgIHRoaXMuY3VycmVudFBvaW50LmxheWVyVHlwZSA9IGZlYXR1cmUubGF5ZXIudHlwZTsKICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5wcm9wZXJ0aWVzID0gZmVhdHVyZS5wcm9wZXJ0aWVzOwogICAgICAgIC8vIOW6leWbvuimgee0oG5hbWVfbG9jYWzmiJborr7mlr3opoHntKByb2FkX25hbWUsaWQKICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5yb2FkX25hbWUgPSBmZWF0dXJlLnByb3BlcnRpZXMucm9hZF9uYW1lOwogICAgICAgIHRoaXMuY3VycmVudFBvaW50LmlkID0gZmVhdHVyZS5wcm9wZXJ0aWVzLmlkOwogICAgICAgIHRoaXMuY3VycmVudFBvaW50LmNvZGUgPSBmZWF0dXJlLnByb3BlcnRpZXMubWFuaG9sZV9jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5nYXRlX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLm91dGxldF9jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5jb21iX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLnZhbHZlX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLnB1bXBfc3RhdGlvbl9jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5wbGFudF9jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5wdW1wX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLmZpcmVfY29ja19jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5zdGFydF9jb2RlICsgJywnICsgZmVhdHVyZS5wcm9wZXJ0aWVzLmVuZF9jb2RlIHx8ICcnOwogICAgICAgIC8vIOimgee0oOWvueixoeexu+Wei++8iOS4muWKoeexu+Weiy/orr7mlr3nsbvlnovvvIkKICAgICAgICBzd2l0Y2ggKGZlYXR1cmUubGF5ZXIuaWQpIHsKICAgICAgICAgIC8vIOmbqOawtAogICAgICAgICAgY2FzZSAicmRfbWFwX2NvbWIiOgogICAgICAgICAgICAvL2NvbWLkuIDlrprmmK/pm6jmsLTlj6MKICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICfpm6jmsLQnOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn6Zuo5rC05Y+jJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJyZF9tYXBfb3V0ZmFsbCI6CiAgICAgICAgICAgIC8v5o6S5pS+5Y+jIDEt6Zuo5rC077ybIDIt5rGh5rC077ybIDMt5ZCI5rWB77ybIDQt5YW25LuWCiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSBmZWF0dXJlLnByb3BlcnRpZXMucGlwZV90eXBlOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn5o6S5pS+5Y+jJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJyZF9tYXBfbWFuaG9sZSI6CiAgICAgICAgICAgIC8v5qOA5p+l5LqVICAxLembqOawtO+8mzIt5rGh5rC0CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSBmZWF0dXJlLnByb3BlcnRpZXMubWFuaG9sZV90eXBlOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSBmZWF0dXJlLnByb3BlcnRpZXMubWFuaG9sZV90eXBlICsgJ+ajgOafpeS6lSc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAicmRfbWFwX2dhdGUiOgogICAgICAgICAgICAvL+mXuOmXqCAxLembqOawtO+8myAyLeaxoeawtO+8myAzLeWQiOa1ge+8myA0LeWFtuS7lgogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gZmVhdHVyZS5wcm9wZXJ0aWVzLnBpcGVfdHlwZTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+mXuOmXqCc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAicmRfbWFwX2RyYWlucGlwZV95c19iaWciOgogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+mbqOawtCc7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICfpm6jmsLTnrqHnur8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInJkX21hcF9kcmFpbnBpcGVfeXNfc21hbGwiOgogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+mbqOawtCc7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICfpm6jmsLTnrqHnur8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIC8vIOaxoeawtAogICAgICAgICAgY2FzZSAicmRfbWFwX2RyYWlucGlwZV93c19iaWciOgogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+axoeawtCc7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICfmsaHmsLTnrqHnur8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInJkX21hcF9kcmFpbnBpcGVfd3Nfc21hbGwiOgogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+axoeawtCc7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICfmsaHmsLTnrqHnur8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIC8vIOe7meawtAogICAgICAgICAgY2FzZSAibWFwX3N1cHBseV9maXJlaHlkcmFudCI6CiAgICAgICAgICAgIC8v5raI54Gr5qCT5LiA5a6a5piv57uZ5rC0CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSAn5L6b5rC0JzsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+a2iOeBq+agkyc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAibWFwX3JlY3ljbGVfdmFsdmUiOgogICAgICAgICAgICAvL+mYgOmXqHZhbHZl5LiA5a6a5piv57uZ5rC0CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSAn5YaN55Sf5rC0JzsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+mYgOmXqCc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAibWFwX3N1cHBseV92YWx2ZSI6CiAgICAgICAgICAgIC8v6ZiA6ZeodmFsdmXkuIDlrprmmK/nu5nmsLQKICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICfkvpvmsLQnOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn6ZiA6ZeoJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJtYXBfc3VwcGx5X3BpcGVfZGlzdHJpYnV0ZSI6CiAgICAgICAgICAgIC8v6YWN5rC0566h57q/CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSAn57uZ5rC0JzsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+mFjeawtOeuoee6vyc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAibWFwX3N1cHBseV9waXBlX2RlbGl2ZXJ5IjoKICAgICAgICAgICAgLy/ovpPmsLTnrqHnur8KICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICdzdXBwbHknOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn6L6T5rC0566h57q/JzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJtYXBfc3VwcGx5X3BpcGVfY2lyY3VsYXRpbmciOgogICAgICAgICAgICAvL+WbnuawtOeuoee6vwogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+e7meawtCc7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICflm57msLTnrqHnur8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm1hcF93YXRlcndvcmsiOgogICAgICAgICAgICAvL+S+m+awtOWOggogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+e7meawtCc7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICfkvpvmsLTljoInOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIC8vIOWGjeeUn+awtAogICAgICAgICAgY2FzZSAibWFwX3JlY3ljbGVfcGlwZSI6CiAgICAgICAgICAgIC8v5YaN55Sf5rC0566h57q/CiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSAn5YaN55Sf5rC0JzsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ3BpcGVsaW5lJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJtYXBfd2F0ZXJ3b3JrIjoKICAgICAgICAgICAgLy/lho3nlJ/msLTljoIKICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICflho3nlJ/msLQnOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn5YaN55Sf5rC05Y6CJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHNyYyA9IHJlcXVpcmUoYEAvYXNzZXRzL2ltZy9sZWdlbmQv5LqL5Lu25LiK5oqlLnBuZ2ApOwogICAgICAgIC8vIOWmguaenOWtmOWcqGlk5Li6ZXZlbnRPYmpfb25l55qE5YWD57Sg77yM5YiZ5Yig6Zmk5q2k5YWD57Sg6YeN5paw5Yib5bu677yM5L+d5oyB5YWo5bGA5Y+q5pyJ5LiA5Liq5q2k5YWD57SgCiAgICAgICAgbGV0IGN1cnJlbnRFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXZlbnRPYmpfb25lIik7CiAgICAgICAgaWYgKGN1cnJlbnRFbGUpIHsKICAgICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgICB9CiAgICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxpbWcgaWQ9ImV2ZW50T2JqX29uZSIgc3JjPSIke3NyY30iIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+CiAgICAgICAgICBgOwogICAgICAgIG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgICAgZWxlbWVudDogZWxlCiAgICAgICAgfSk7CiAgICAgICAgbWFya2VyLnNldExuZ0xhdChwb3NpdGlvbikuc2V0UG9wdXAobWFwT2JqLm1hcEluc3RhbmNlLm5ld1BvcHVwKHsKICAgICAgICAgIG9mZnNldDogWzAsIC03XSwKICAgICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZQogICAgICAgIH0pLnNldEhUTUwoYDxkaXYgaWQ9ImRldmljZURldGFpbCI+PC9kaXY+YCkpLmFkZFRvKG1hcE9iai5tYXApOwogICAgICAgIHBvcCA9IG5ldyBQb3B1cEl0ZW0oewogICAgICAgICAgcHJvcHNEYXRhOiB7CiAgICAgICAgICAgIGRldmljZUNvZGU6IHRoaXMuY3VycmVudFBvaW50LmNvZGUsCiAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgIGlzRGV2aWNlOiB0cnVlLAogICAgICAgICAgICBmdW46IHRoaXMuZ29Ub0RldGFpbAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHBvaW50VHlwZSA9PSAnbG5nbGF0JykgewogICAgICAgIHRoaXMuY3VycmVudFBvaW50ID0gZmVhdHVyZTsKICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC50YXNrSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQ7CiAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuZ3JpZElkID0gZ3JpZE9iai5ncmlkSWQ7CiAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuZ3JpZE5hbWUgPSBncmlkT2JqLmdyaWROYW1lOwogICAgICAgIHRoaXMuY3VycmVudFBvaW50LmdyaWRNYW5hZ2VyID0gZ3JpZE9iai5ncmlkTWFuYWdlcjsKICAgICAgICBwb3NpdGlvbiA9IFtmZWF0dXJlLmxuZywgZmVhdHVyZS5sYXRdOwogICAgICAgIGNvbnN0IHNyYyA9IHJlcXVpcmUoYEAvYXNzZXRzL2ltZy9sZWdlbmQv5LqL5Lu25LiK5oqlLnBuZ2ApOwogICAgICAgIC8vIOWmguaenOWtmOWcqGlk5Li6ZXZlbnRPYmpfb25l55qE5YWD57Sg77yM5YiZ5Yig6Zmk5q2k5YWD57Sg6YeN5paw5Yib5bu677yM5L+d5oyB5YWo5bGA5Y+q5pyJ5LiA5Liq5q2k5YWD57SgCiAgICAgICAgbGV0IGN1cnJlbnRFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXZlbnRPYmpfb25lIik7CiAgICAgICAgaWYgKGN1cnJlbnRFbGUpIHsKICAgICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgICB9CiAgICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxpbWcgaWQ9ImV2ZW50T2JqX29uZSIgc3JjPSIke3NyY30iIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+CiAgICAgICAgICBgOwogICAgICAgIG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgICAgZWxlbWVudDogZWxlCiAgICAgICAgfSk7CiAgICAgICAgbWFya2VyLnNldExuZ0xhdChwb3NpdGlvbikuc2V0UG9wdXAobWFwT2JqLm1hcEluc3RhbmNlLm5ld1BvcHVwKHsKICAgICAgICAgIG9mZnNldDogWzAsIC03XSwKICAgICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZQogICAgICAgIH0pLnNldEhUTUwoYDxkaXYgaWQ9ImRldmljZURldGFpbCI+PC9kaXY+YCkpLmFkZFRvKG1hcE9iai5tYXApOwogICAgICAgIHBvcCA9IG5ldyBQb3B1cEl0ZW0oewogICAgICAgICAgcHJvcHNEYXRhOiB7CiAgICAgICAgICAgIGxuZzogdGhpcy5jdXJyZW50UG9pbnQubG5nLAogICAgICAgICAgICBsYXQ6IHRoaXMuY3VycmVudFBvaW50LmxhdCwKICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgaXNEZXZpY2U6IGZhbHNlLAogICAgICAgICAgICBmdW46IHRoaXMuZ29Ub0RldGFpbAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBwb3AuJG1vdW50KCcjZGV2aWNlRGV0YWlsJyk7CiAgICAgIH0pOwogICAgICBtYXJrZXIudG9nZ2xlUG9wdXAoKTsKICAgIH0sCiAgICBnb1RvRGV0YWlsKHR5cGUpIHsKICAgICAgaWYgKHR5cGUgPT0gJ2V2ZW50JykgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdhZGRQcm9ibGVtSW5kZXgnLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgbXNnOiB0aGlzLmN1cnJlbnRQb2ludCwKICAgICAgICAgICAgdG9rZW46IHRoaXMuZm9ybVRva2VuLAogICAgICAgICAgICB0YXNrSWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tJZCwKICAgICAgICAgICAgZnJvbTogJ2luc3AnCiAgICAgICAgICB9LAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHR5cGU6ICdhZGQnCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ2FkZEZsYXdzJywKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIG1zZzogdGhpcy5jdXJyZW50UG9pbnQsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLmZvcm1Ub2tlbiwKICAgICAgICAgICAgdGFza0lkOiB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQsCiAgICAgICAgICAgIGZyb206ICdpbnNwJwogICAgICAgICAgfSwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB0eXBlOiAnYWRkJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8g56e76Zmk5LiK5oql5LqL5Lu255qE5a+56LGhbWFya2VyCiAgICByZW1vdmVFdmVudE9iak1hcmtlcigpIHsKICAgICAgLy8g5aaC5p6c5a2Y5ZyoaWTkuLpldmVudE9ial9vbmXnmoTlhYPntKDvvIzliJnliKDpmaTmraTlhYPntKDph43mlrDliJvlu7rvvIzkv53mjIHlhajlsYDlj6rmnInkuIDkuKrmraTlhYPntKAKICAgICAgbGV0IGN1cnJlbnRFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXZlbnRPYmpfb25lIik7CiAgICAgIGlmIChjdXJyZW50RWxlKSB7CiAgICAgICAgY3VycmVudEVsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGN1cnJlbnRFbGUpOwogICAgICAgIC8vIGJ1cy4kZW1pdCgicmVwb3J0SW5zcEV2ZW50Iiwge30sIGZhbHNlKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWKoOi9veW3oeajgOS6uueahDHlhazph4zku6XlhoXnmoTnrqHnur/mlbDmja4KICAgIGFkZEluc3BCdWZmZXJEYXRhKHBvc2l0aW9uLCByYWRpdXMgPSAwLjUpIHsKICAgICAgbGV0IGJ1ZmZlcmVkID0gdHVyZi5idWZmZXIocG9zaXRpb24sIHJhZGl1cywgJ2tpbG9tZXRlcnMnKTsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIGluc3BCdXNpbmVzc1R5cGU6IHBvc2l0aW9uLmluc3BCdXNpbmVzc1R5cGUsCiAgICAgICAgZ2VvbTogYnVmZmVyZWQuZ2VvbWV0cnksCiAgICAgICAgcGlwZUxldmVsOiBwb3NpdGlvbi5waXBlTGV2ZWwKICAgICAgICAvLyBwaXBlTGV2ZWw6IHsKICAgICAgICAvLyAgIHBpcGVNYXg6IG51bGwsCiAgICAgICAgLy8gICBwaXBlTWluOiBudWxsCiAgICAgICAgLy8gfQogICAgICAgIC8vIHBpcGVMZXZlbDogbnVsbAogICAgICB9OwogICAgICAvLyB0aGlzLmdldERhdGFXaXRoU3BhdGlhbCh7IGdlb21ldHJ5OiBidWZmZXJlZC5nZW9tZXRyeX0pCiAgICAgIHRoaXMuZ2V0RGF0YVdpdGhTcGF0aWFsQW5kUGlwZUxldmVsKHBhcmFtcykudGhlbihkZXZpY2VzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiZGV2aWNlcz09PiIsIGRldmljZXMpOwogICAgICAgIGlmIChkZXZpY2VzLmRhdGEuZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgbGV0IGZlYXR1cmVzID0gZGV2aWNlcy5kYXRhLmZlYXR1cmVzOwogICAgICAgICAgdGhpcy5oYW5kbGVJbnNwRGF0YShmZWF0dXJlcywgdHJ1ZSwgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6L+U5ZuecmFkaXVz5Li65Y2K5b6E6IyD5Zu055qE5bel56iL5a+56LGh5pWw5o2uCiAgICBhc3luYyBnZXRJbnNwRGF0YUluUmFuZ2UocG9zaXRpb24sIHJhZGl1cyA9IDAuMDM1KSB7CiAgICAgIGxldCBidWZmZXJlZCA9IHR1cmYuYnVmZmVyKHBvc2l0aW9uLCByYWRpdXMsICdraWxvbWV0ZXJzJyk7CiAgICAgIC8vIGNvbnN0IGRldmljZXMgPSBhd2FpdCB0aGlzLmdldERhdGFXaXRoU3BhdGlhbCh7Z2VvbWV0cnk6IGJ1ZmZlcmVkLmdlb21ldHJ5fSk7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBpbnNwQnVzaW5lc3NUeXBlOiBwb3NpdGlvbi5pbnNwQnVzaW5lc3NUeXBlLAogICAgICAgIGdlb206IGJ1ZmZlcmVkLmdlb21ldHJ5LAogICAgICAgIC8vIHBpcGVMZXZlbDogcG9zaXRpb24ucGlwZUxldmVsCiAgICAgICAgLy8gcGlwZUxldmVsOiB7CiAgICAgICAgLy8gICBwaXBlTWF4OiBudWxsLAogICAgICAgIC8vICAgcGlwZU1pbjogbnVsbAogICAgICAgIC8vIH0KICAgICAgICBwaXBlTGV2ZWw6IG51bGwKICAgICAgfTsKICAgICAgY29uc3QgZGV2aWNlcyA9IGF3YWl0IHRoaXMuZ2V0RGF0YVdpdGhTcGF0aWFsQW5kUGlwZUxldmVsKHBhcmFtcyk7CiAgICAgIGxldCBmZWF0dXJlc0RhdGEgPSBbXTsKICAgICAgaWYgKGRldmljZXMuZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgbGV0IGZlYXR1cmVzID0gZGV2aWNlcy5kYXRhLmZlYXR1cmVzOwogICAgICAgIGZlYXR1cmVzLm1hcChpdGVtID0+IHsKICAgICAgICAgIGxldCBwYXJhbXNPYmogPSB7fTsKICAgICAgICAgIGxldCBmaWVsZE5hbWVzID0gaXRlbS5maWVsZE5hbWVzOwogICAgICAgICAgbGV0IGZpZWxkVmFsdWVzID0gaXRlbS5maWVsZFZhbHVlczsKICAgICAgICAgIGxldCBseG5JbmRleCA9IGZpZWxkTmFtZXMuZmluZEluZGV4KGl0ID0+IGl0ID09ICJMWE4iKTsKICAgICAgICAgIGxldCBwaXBlSW5kZXggPSBmaWVsZE5hbWVzLmZpbmRJbmRleChpdCA9PiBpdCA9PSAiUElQRVRZUEUiKTsKICAgICAgICAgIGxldCBwcm9wZXJ0aWVzID0gbHhuSW5kZXggPyBzaG93UHJvcGVydGllczJbYCR7ZmllbGRWYWx1ZXNbcGlwZUluZGV4XX1gXSA6IHBpcGVJbmRleCA/IHNob3dQcm9wZXJ0aWVzMltgJHtmaWVsZFZhbHVlc1twaXBlSW5kZXhdfWBdIDogW107CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkTmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHBhcmFtc09iaiwgYCR7ZmllbGROYW1lc1tpXX1gLCBmaWVsZFZhbHVlc1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZmllbGROYW1lcy5maW5kSW5kZXgoaXQgPT4gaXQgPT0gIkxFTkdUSCIpID4gLTEpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHBhcmFtc09iaiwgIlVOSVQiLCAi57GzIik7CiAgICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosICJMRU5HVEgiLCBmaWVsZFZhbHVlc1tmaWVsZE5hbWVzLmZpbmRJbmRleChpID0+IGkgPT0gIkxFTkdUSCIpXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRzZXQocGFyYW1zT2JqLCAiVU5JVCIsICLkuKoiKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosICJJRCIsIGl0ZW0uSUQpOwogICAgICAgICAgbGV0IHRlbXBHZW9tZXRyeSA9IHR1cmYuZmVhdHVyZSh7CiAgICAgICAgICAgIHR5cGU6IGl0ZW0uZ2VvbWV0cnkudHlwZSA9PT0gIkxJTkUiID8gIkxpbmVTdHJpbmciIDogIlBvaW50IiwKICAgICAgICAgICAgY29vcmRpbmF0ZXM6IGl0ZW0uZ2VvbWV0cnkucG9pbnRzLm1hcChwb2ludCA9PiBbcG9pbnQueCwgcG9pbnQueV0pCiAgICAgICAgICB9LCBwYXJhbXNPYmopOwogICAgICAgICAgdGhpcy4kc2V0KHRlbXBHZW9tZXRyeSwgImlkIiwgaXRlbS5JRCk7CiAgICAgICAgICBmZWF0dXJlc0RhdGEucHVzaCh0ZW1wR2VvbWV0cnkpOwogICAgICAgICAgbGV0IGdlb21ldHJ5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0ZW1wR2VvbWV0cnkpKTsKICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosIGBnZW9tZXRyeWAsIGdlb21ldHJ5KTsKICAgICAgICAgIHJldHVybiBwYXJhbXNPYmo7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZlYXR1cmVzRGF0YTsKICAgIH0sCiAgICAvLyDov5Tlm55yYWRpdXPkuLrljYrlvoTojIPlm7TnmoTlt6XnqIvlr7nosaHmlbDmja4KICAgIGFzeW5jIGdldEluc3BEYXRhSW5SYW5nZVRpbGUocG9zaXRpb24sIHJhZGl1cyA9IDAuMDM1KSB7CiAgICAgIGxldCBwaXBlVHlwZTsKICAgICAgc3dpdGNoIChwb3NpdGlvbi5pbnNwQnVzaW5lc3NUeXBlKSB7CiAgICAgICAgY2FzZSAiV0FURVJfU1VQUExZIjoKICAgICAgICAgIHBpcGVUeXBlID0gIuS+m+awtOeuoee6vyI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSQUlfV0FURVIiOgogICAgICAgICAgcGlwZVR5cGUgPSAi6Zuo5rC0566h57q/IjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlBPTExVVEVEX1dBVEVSIjoKICAgICAgICAgIHBpcGVUeXBlID0gIuaxoeawtOeuoee6vyI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJPUklHSU5fV0FURVIiOgogICAgICAgICAgcGlwZVR5cGUgPSAi5rqQ5rC0566h57q/IjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlJJVkVSX1dBVEVSIjoKICAgICAgICAgIHBpcGVUeXBlID0gIuaOkuaxn+euoSI7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIGdlb21Qb2ludDogcG9zaXRpb24uZ2VvbWV0cnksCiAgICAgICAgcGlwZVR5cGU6IHBpcGVUeXBlLAogICAgICAgIHJhZGl1czogcmFkaXVzLAogICAgICAgIHR5cGU6ICLnur8iCiAgICAgIH07CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5nZXRBY3Rpb24oJy95aHN3LXBvc3RnaXMvZ2V0QWxsUG9pbnRPckxpbmVHZW9tSW5zcCcsIHBhcmFtcyk7CiAgICAgIGNvbnNvbGUubG9nKCJnZXQgYWxsIFBvaW50IG9yIExpbmUgZ2VvbT09PiIsIHJlcy5kYXRhKTsKICAgIH0sCiAgICAvLyDlpITnkIbnrqHnur/nrYnlt6Hmo4DmlbDmja7mlbDmja4KICAgIGhhbmRsZUluc3BEYXRhKGRhdGEsIGluc3BVc2VyID0gZmFsc2UsIHVuSW5zcExpbmVTb3VyY2UgPSBmYWxzZSkgewogICAgICBsZXQgZmVhdHVyZXNEYXRhID0gW107CiAgICAgIGRhdGEubWFwKGl0ZW0gPT4gewogICAgICAgIGxldCBwYXJhbXNPYmogPSB7fTsKICAgICAgICBsZXQgZmllbGROYW1lcyA9IGl0ZW0uZmllbGROYW1lczsKICAgICAgICBsZXQgZmllbGRWYWx1ZXMgPSBpdGVtLmZpZWxkVmFsdWVzOwogICAgICAgIGxldCBseG5JbmRleCA9IGZpZWxkTmFtZXMuZmluZEluZGV4KGl0ID0+IGl0ID09ICJMWE4iKTsKICAgICAgICBsZXQgcGlwZUluZGV4ID0gZmllbGROYW1lcy5maW5kSW5kZXgoaXQgPT4gaXQgPT0gIlBJUEVUWVBFIik7CiAgICAgICAgbGV0IHByb3BlcnRpZXMgPSBseG5JbmRleCA/IHNob3dQcm9wZXJ0aWVzMltgJHtmaWVsZFZhbHVlc1twaXBlSW5kZXhdfWBdIDogcGlwZUluZGV4ID8gc2hvd1Byb3BlcnRpZXMyW2Ake2ZpZWxkVmFsdWVzW3BpcGVJbmRleF19YF0gOiBbXTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkTmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosIGAke2ZpZWxkTmFtZXNbaV19YCwgZmllbGRWYWx1ZXNbaV0pOwogICAgICAgIH0KICAgICAgICBpZiAoZmllbGROYW1lcy5maW5kSW5kZXgoaXQgPT4gaXQgPT0gIkxFTkdUSCIpID4gLTEpIHsKICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosICJVTklUIiwgIuexsyIpOwogICAgICAgICAgdGhpcy4kc2V0KHBhcmFtc09iaiwgIkxFTkdUSCIsIGZpZWxkVmFsdWVzW2ZpZWxkTmFtZXMuZmluZEluZGV4KGkgPT4gaSA9PSAiTEVOR1RIIildKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kc2V0KHBhcmFtc09iaiwgIlVOSVQiLCAi5LiqIik7CiAgICAgICAgfQogICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosICJJRCIsIGl0ZW0uSUQpOwogICAgICAgIGxldCB0ZW1wR2VvbWV0cnkgPSB0dXJmLmZlYXR1cmUoewogICAgICAgICAgdHlwZTogaXRlbS5nZW9tZXRyeS50eXBlID09PSAiTElORSIgPyAiTGluZVN0cmluZyIgOiAiUG9pbnQiLAogICAgICAgICAgY29vcmRpbmF0ZXM6IGl0ZW0uZ2VvbWV0cnkucG9pbnRzLm1hcChwb2ludCA9PiBbcG9pbnQueCwgcG9pbnQueV0pCiAgICAgICAgfSwgcGFyYW1zT2JqKTsKICAgICAgICB0aGlzLiRzZXQodGVtcEdlb21ldHJ5LCAiaWQiLCBpdGVtLklEKTsKICAgICAgICBmZWF0dXJlc0RhdGEucHVzaCh0ZW1wR2VvbWV0cnkpOwogICAgICAgIGxldCBnZW9tZXRyeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGVtcEdlb21ldHJ5KSk7CiAgICAgICAgdGhpcy4kc2V0KHBhcmFtc09iaiwgYGdlb21ldHJ5YCwgZ2VvbWV0cnkpOwogICAgICAgIHJldHVybiBwYXJhbXNPYmo7CiAgICAgIH0pOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChtYXBPYmoubWFwSW5zdGFuY2UgJiYgdGhhdC5tYXAuZ2V0U291cmNlKCJ1bkluc3BMaW5lU291cmNlIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5pc1NvdXJjZUxvYWRlZCgicmFuZ2VTb3VyY2UiKSkgewogICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgaWYgKGluc3BVc2VyKSB7CiAgICAgICAgICAgICAgdGhhdC5zZXRMaW5lR2VvU291cmNlKGZlYXR1cmVzRGF0YSwgImluc3BVc2VyTGluZVNvdXJjZSIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoYXQuc2V0TGluZUdlb1NvdXJjZShmZWF0dXJlc0RhdGEsICJpbml0SW5zcExpbmVTb3VyY2UiKTsKICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/mnKrlt6Hmo4Dnur/mlbDmja7mupAKICAgICAgICAgICAgICBpZiAodW5JbnNwTGluZVNvdXJjZSkgewogICAgICAgICAgICAgICAgdGhhdC5zZXRMaW5lR2VvU291cmNlKGZlYXR1cmVzRGF0YSwgInVuSW5zcExpbmVTb3VyY2UiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCAxMDApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDorr7nva7nur/mlbDmja7mupAsZGF0YeaYr+aVsOe7hO+8jHNvdXJjZeS4uuaVsOaNrua6kOWQjeensAogICAgc2V0TGluZUdlb1NvdXJjZShkYXRhLCBzb3VyY2UpIHsKICAgICAgaWYgKHNvdXJjZSA9PT0gImluc3BVc2VyTGluZVNvdXJjZSIpIHsKICAgICAgICBkYXRhID0gZGF0YTsKICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT09ICJjdXJJbnNwTGluZVNvdXJjZSIpIHsKICAgICAgICAvLyDlpoLmnpzmlbDmja7mupDmmK9jdXJJbnNwTGluZVNvdXJjZe+8jOWImeinpuWPkeeuoee6v+S7u+WKoeS4iuaKpQogICAgICAgIC8vIGlmIChkYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAvLyAgIGJ1cy4kZW1pdCgicmVwb3J0SW5zcEV2ZW50IiwgZGF0YVswXSwgdHJ1ZSk7CiAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAvLyAgIGJ1cy4kZW1pdCgicmVwb3J0SW5zcEV2ZW50Iiwge30sIGZhbHNlKTsKICAgICAgICAvLyB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IHNvdXJjZURhdGEgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZShzb3VyY2UpOwogICAgICAgIGRhdGEgPSBkYXRhLmNvbmNhdChzb3VyY2VEYXRhLl9kYXRhLmZlYXR1cmVzKTsKICAgICAgICAvLyDmlbDnu4Tlr7nosaHljrvph40KICAgICAgICBsZXQgb2JqID0ge307CiAgICAgICAgZGF0YSA9IGRhdGEucmVkdWNlKGZ1bmN0aW9uIChpdGVtLCBuZXh0KSB7CiAgICAgICAgICBvYmpbbmV4dC5pZF0gPyAnJyA6IG9ialtuZXh0LmlkXSA9IHRydWUgJiYgaXRlbS5wdXNoKG5leHQpOwogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSwgW10pOwogICAgICB9CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKHNvdXJjZSwgewogICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgZmVhdHVyZXM6IGRhdGEKICAgICAgfSk7CiAgICB9LAogICAgLy8g5bCG566h57q/5pWw5o2u5LuO5LiA5Liq5Zu+5bGC5pS55Yiw5Y+m5LiA5Liq5Zu+5bGCCiAgICBjaGFuZ2VJbnNwTGluZVNvdXJjZShkYXRhLCBmcm9tU291cmNlLCB0b1NvdXJjZSkgewogICAgICB0cnkgewogICAgICAgIC8vIOWmguaenGZyb21Tb3VyY2VEYXRh5ZyodG9Tb3VyY2VEYXRh5LmL5ZCO5Yqg6L2977yM5YiZZmlsdGVy6L+H5ruk5aSx6LSl77yM5pqC5pe25bCGdG/nmoTlm77lsYLmlL7lnKhmcm9t5LiK5pa5CiAgICAgICAgbGV0IGZyb21Tb3VyY2VEYXRhID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoZnJvbVNvdXJjZSk7CiAgICAgICAgbGV0IHRvU291cmNlRGF0YSA9IG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKHRvU291cmNlKTsKICAgICAgICBsZXQgZnJvbURhdGEgPSBmcm9tU291cmNlRGF0YS5fZGF0YS5mZWF0dXJlcy5maWx0ZXIoeCA9PiBkYXRhLmV2ZXJ5KHkgPT4geS5pZCAhPT0geC5pZCkpOwogICAgICAgIGRhdGEgPSBmcm9tU291cmNlRGF0YS5fZGF0YS5mZWF0dXJlcy5maWx0ZXIoeCA9PiBkYXRhLnNvbWUoeSA9PiB5LmlkID09PSB4LmlkKSk7CiAgICAgICAgbGV0IHRvRGF0YSA9IGRhdGEuY29uY2F0KHRvU291cmNlRGF0YS5fZGF0YS5mZWF0dXJlcyk7CiAgICAgICAgLy8gY29uc29sZS5sb2coImZyb21EYXRhPT0+Iixmcm9tU291cmNlRGF0YS5fZGF0YSx0b1NvdXJjZURhdGEuX2RhdGEsIGZyb21EYXRhLCB0b0RhdGEpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKGZyb21Tb3VyY2UsIHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlczogZnJvbURhdGEKICAgICAgICB9KTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSh0b1NvdXJjZSwgewogICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgIGZlYXR1cmVzOiB0b0RhdGEKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9LAogICAgc2V0QWxsSW5zcExpbmVTb3VyY2UoZGF0YSkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICh0aGF0LmlzT25Mb2FkZWQoKSAmJiBtYXBPYmoubWFwLmdldFNvdXJjZSgiaW5pdEluc3BMaW5lU291cmNlIikgJiYgbWFwT2JqLm1hcC5pc1NvdXJjZUxvYWRlZCgiaW5pdEluc3BMaW5lU291cmNlIikpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCdpbml0SW5zcExpbmVTb3VyY2UnLCB7CiAgICAgICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgICBmZWF0dXJlczogZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCAxMDApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRJbnNwUmVjb3JkTGluZVNvdXJjZShkYXRhKSB7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkU291cmNlKCcnKTsKICAgIH0sCiAgICAvLyDlt7Llt6Hmo4DnrqHnur/lm57mmL4sIOa2ieWPiuaVsOaNrumBjeWOhu+8jOWmguaenOaVsOmHj+W3qOWkp++8jOmcgOimgeWkhOeQhgogICAgYWRkSW5zcFJlY29yZFRpbGVMaW5lU291cmNlKGRhdGEsIGNvbXBsZXRpb24gPSBudWxsKSB7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICB0cnkgewogICAgICAgIFRvYXN0LmxvYWRpbmcoewogICAgICAgICAgbWVzc2FnZTogIuWKoOi9veWcsOWbvueuoee6v+S4rS4uLiIKICAgICAgICB9KTsKICAgICAgICBkYXRhID0gWy4uLm5ldyBTZXQoZGF0YSldOwogICAgICAgIHJlY29yZEZlYXR1cmVzLmxlbmd0aCA9IDA7CiAgICAgICAgcmVjb3JkRmVhdHVyZXMucHVzaCguLi5kYXRhKTsKICAgICAgICBsZXQgZmxhZyA9IGZhbHNlOwogICAgICAgIHRoYXQucmVjb3JkVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoZmxhZykgewogICAgICAgICAgICBjbGVhckludGVydmFsKHRoYXQucmVjb3JkVGltZXIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgaWYgKHRoYXQucmVjb3JkVGltZXIpIHsKICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoYXQucmVjb3JkVGltZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDAwMCk7CiAgICAgICAgICBjb25zb2xlLmxvZygnMScpOwogICAgICAgICAgaWYgKHRoYXQuaXNPbkxvYWRlZCgpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJpbml0SW5zcExpbmVTb3VyY2UiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmlzU291cmNlTG9hZGVkKCJpbml0SW5zcExpbmVTb3VyY2UiKSkgewogICAgICAgICAgICBsZXQgZmlsdGVyRGF0YSA9IFsiaW4iLCAiaWQiXTsKICAgICAgICAgICAgZmlsdGVyRGF0YS5wdXNoKC4uLnJlY29yZEZlYXR1cmVzKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZmlsdGVyRGF0YSk7CiAgICAgICAgICAgIGNvbnN0IGJveEZlYXR1cmVzID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5xdWVyeVNvdXJjZUZlYXR1cmVzKCJpbml0SW5zcExpbmVTb3VyY2UiLCB7CiAgICAgICAgICAgICAgZmlsdGVyOiBmaWx0ZXJEYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zb2xlLmxvZyhib3hGZWF0dXJlcyk7CiAgICAgICAgICAgIGJveEZlYXR1cmVzLmZvckVhY2goZmVhdCA9PiB7CiAgICAgICAgICAgICAgLy8g5aaC5p6c5LiN5a2Y5Zyo6L+Z5Liqc3RhdGUKICAgICAgICAgICAgICBpZiAoIWZlYXQuc3RhdGUgfHwgIWZlYXQuc3RhdGUuaXNJbnNwKSB7CiAgICAgICAgICAgICAgICBtYXBPYmoubWFwLnNldEZlYXR1cmVTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIHNvdXJjZTogImluaXRJbnNwTGluZVNvdXJjZSIsCiAgICAgICAgICAgICAgICAgIGlkOiBmZWF0LmlkCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGlzSW5zcDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGZpbHRlckRhdGEubGVuZ3RoID49IDMgJiYgYm94RmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGZsYWcgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgNTAwKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliJ3lp4vljJblm77lsYLvvIzliJ3lp4vnrqHnur/lm77lsYLvvIzlt7Llt6Hmo4DnrqHnur/lm77lsYLvvIzmnKrlt6Hmo4DnrqHnur/lm77lsYLvvIzpgInkuK3lvZPliY3nrqHnur/lm77lsYIKICAgIGFkZExpbmVHZW9MYXllcigpIHsKICAgICAgLy8g5beh5qOA5Lq65ZGY6IyD5Zu0566h57q/CiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoImluc3BVc2VyTGluZVNvdXJjZSIsIHsKICAgICAgLy8gICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgIC8vICAgZGF0YTogewogICAgICAvLyAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgLy8gICAgIGZlYXR1cmVzOiBbXQogICAgICAvLyAgIH0KICAgICAgLy8gfSk7CiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgIC8vICAgaWQ6ICJpbnNwVXNlckxpbmVMYXllciIsCiAgICAgIC8vICAgdHlwZTogImxpbmUiLAogICAgICAvLyAgIHNvdXJjZTogImluc3BVc2VyTGluZVNvdXJjZSIsCiAgICAgIC8vICAgcGFpbnQ6IHsKICAgICAgLy8gICAgICJsaW5lLWNvbG9yIjogIiM0MjY0RkIiLAogICAgICAvLyAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgIC8vICAgfQogICAgICAvLyB9LCAicmFuZ2VMYXllciIpOwogICAgICAvLyDliJ3lp4vljJbnrqHnur/lm77lsYIKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRTb3VyY2UoImluaXRJbnNwTGluZVNvdXJjZSIsIHsKICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAiaW5pdEluc3BMaW5lTGF5ZXIiLAogICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICBzb3VyY2U6ICJpbml0SW5zcExpbmVTb3VyY2UiLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAibGluZS1jb2xvciI6IFsnY2FzZScsIFsnYm9vbGVhbicsIFsnZmVhdHVyZS1zdGF0ZScsICdpc0luc3AnXSwgZmFsc2VdLCAiIzQ0QkE1QSIsICIjRkYwMDAwIl0sCiAgICAgICAgICAibGluZS13aWR0aCI6IDMKICAgICAgICB9CiAgICAgIH0sICJyZF9tYXBfb3V0ZmFsbCIpOwogICAgICAvLyDmnKrlt6Hmo4DnrqHnur/lm77lsYIKICAgICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgidW5JbnNwTGluZVNvdXJjZSIsIHsKICAgICAgLy8gICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgIC8vICAgZGF0YTogewogICAgICAvLyAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgLy8gICAgIGZlYXR1cmVzOiBbXQogICAgICAvLyAgIH0KICAgICAgLy8gfSk7CiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgIC8vICAgaWQ6ICJ1bkluc3BMaW5lTGF5ZXIiLAogICAgICAvLyAgIHR5cGU6ICJsaW5lIiwKICAgICAgLy8gICBzb3VyY2U6ICJ1bkluc3BMaW5lU291cmNlIiwKICAgICAgLy8gICBwYWludDogewogICAgICAvLyAgICAgImxpbmUtY29sb3IiOiAiI0ZGMDAwMCIsCiAgICAgIC8vICAgICAibGluZS13aWR0aCI6IDMKICAgICAgLy8gICB9CiAgICAgIC8vIH0sICJpbml0SW5zcExpbmVMYXllciIpOwogICAgICAvLyDlt7Llt6Hmo4DnrqHnur/lm77lsYIKICAgICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgiaW5zcExpbmVTb3VyY2UiLCB7CiAgICAgIC8vICAgdHlwZTogImdlb2pzb24iLAogICAgICAvLyAgIGRhdGE6IHsKICAgICAgLy8gICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgIC8vICAgICBmZWF0dXJlczogW10KICAgICAgLy8gICB9CiAgICAgIC8vIH0pOwogICAgICAvLyBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAvLyAgIGlkOiAiaW5zcExpbmVMYXllciIsCiAgICAgIC8vICAgdHlwZTogImxpbmUiLAogICAgICAvLyAgIHNvdXJjZTogImluc3BMaW5lU291cmNlIiwKICAgICAgLy8gICBwYWludDogewogICAgICAvLyAgICAgImxpbmUtY29sb3IiOiAiIzQ0QkE1QSIsCiAgICAgIC8vICAgICAibGluZS13aWR0aCI6IDMKICAgICAgLy8gICB9CiAgICAgIC8vIH0sICJ1bkluc3BMaW5lTGF5ZXIiKTsKICAgIH0sCiAgICBzZXRSZWNvcmREYXRhKHZhbCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInJhbmdlTCIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInJhbmdlTCIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJyYW5nZU0iKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJyYW5nZU0iKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoInJhbmdlUyIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJyYW5nZVMiKTsKICAgICAgdmFsLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgaXRlbS5kZXZpY2VfaWQgPSBpdGVtLmVxdWlwbWVudElkOwogICAgICAgIGl0ZW0uZ2VvbWV0cnkgPSBpdGVtLmdlb21UZW1wID8gaXRlbS5nZW9tVGVtcCA6IGl0ZW0uZ2VvbTsKICAgICAgICBpZiAoWyfng63ngrknLCAn54Ot54K555So5oi3576kJywgJ+eDreeCueagh+etviddLmluY2x1ZGVzKGl0ZW0ueWhUeXBlKSkgewogICAgICAgICAgaXRlbS5pY29uTmFtZSA9IHRoaXMuZ2V0SWNvbk5hbWUoJ2RvbmUnLCBpdGVtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ5aFBpcGVQb2ludHNMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInloUGlwZVBvaW50c0xheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJ5aFBpcGVQb2ludHMiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgieWhQaXBlUG9pbnRzIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInloUGlwZUxpbmVzTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJ5aFBpcGVMaW5lc0xheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJ5aFBpcGVMaW5lcyIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJ5aFBpcGVMaW5lcyIpOwogICAgICBsZXQgZmVhdHVyZXMgPSB2YWwubWFwKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLmdlb21ldHJ5LnR5cGUgPT09ICdQb2ludCcpIHJldHVybiB7CiAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgIHByb3BlcnRpZXM6IGl0ZW0sCiAgICAgICAgICBnZW9tZXRyeTogaXRlbS5nZW9tZXRyeSwKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlIgogICAgICAgIH07CiAgICAgIH0pOwogICAgICBsZXQgZmVhdHVyZXMyID0gdmFsLm1hcChpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbS5nZW9tZXRyeS50eXBlID09PSAnTGluZVN0cmluZycpIHJldHVybiB7CiAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgIHByb3BlcnRpZXM6IGl0ZW0sCiAgICAgICAgICBnZW9tZXRyeTogaXRlbS5nZW9tZXRyeSwKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlIgogICAgICAgIH07CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZygnZmVhdHVyZXMgOj4+ICcsIGZlYXR1cmVzKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRTb3VyY2UoJ3loUGlwZVBvaW50cycsIHsKICAgICAgICAndHlwZSc6ICdnZW9qc29uJywKICAgICAgICAnZGF0YSc6IHsKICAgICAgICAgICd0eXBlJzogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgICdmZWF0dXJlcyc6IGZlYXR1cmVzLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0gIT0gdW5kZWZpbmVkOwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogInloUGlwZVBvaW50c0xheWVyIiwKICAgICAgICB0eXBlOiAic3ltYm9sIiwKICAgICAgICBzb3VyY2U6ICJ5aFBpcGVQb2ludHMiLAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAvLyAiaWNvbi1pbWFnZSI6IGZlYXR1cmVzWzBdLnByb3BlcnRpZXMueWhUeXBlID8gZmVhdHVyZXNbMF0ucHJvcGVydGllcy55aFR5cGUuaW5kZXhPZign5YW75oqkJyk+LTEgPyAid3NqMyIgOiBmZWF0dXJlc1swXS5wcm9wZXJ0aWVzLnloVHlwZS5pbmRleE9mKCfng63ngrknKT4tMSA/ICJ3Y3JkIiA6ICJyd3djIiA6ICJ3c2ozIiwKICAgICAgICAgICJpY29uLWltYWdlIjogWydjYXNlJywgWyI9PSIsIFsiaGFzIiwgInloVHlwZSJdLCBmYWxzZV0sICJ3c2ozIiwgWyJhbnkiLCBbIj09IiwgWyJnZXQiLCAieWhUeXBlIl0sICLkupXlhbvmiqQiXSwgWyI9PSIsIFsiZ2V0IiwgInloVHlwZSJdLCAi566h572R5YW75oqkIl1dLCAid3NqMyIsIFsiYW55IiwgWyI9PSIsIFsiZ2V0IiwgInloVHlwZSJdLCAi54Ot54K5Il0sIFsiPT0iLCBbImdldCIsICJ5aFR5cGUiXSwgIueDreeCueagh+etviJdLCBbIj09IiwgWyJnZXQiLCAieWhUeXBlIl0sICLng63ngrnnlKjmiLfnvqQiXV0sIFsiZ2V0IiwgImljb25OYW1lIl0sIFsiYW55IiwgWyI9PSIsIFsiZ2V0IiwgInloVHlwZSJdLCAi55So5oi3576k5Lu75YqhIl0sIFsiPT0iLCBbImdldCIsICJ5aFR5cGUiXSwgIuagh+etvuS7u+WKoSJdLCBbIj09IiwgWyJnZXQiLCAieWhUeXBlIl0sICLorr7lpIfku7vliqEiXSwgWyI9PSIsIFsiZ2V0IiwgInloVHlwZSJdLCAi5LqV5Lu75YqhIl0sIFsiPT0iLCBbImdldCIsICJ5aFR5cGUiXSwgIueuoee9keS7u+WKoSJdXSwKICAgICAgICAgIC8vICJyd3djIiwKICAgICAgICAgIFsiY2FzZSIsIFsiPT0iLCBbImdldCIsICJhcHByb3ZlU3RhdHVzIl0sIDJdLCAidGgiLCAicnd3YyJdLCAid3NqMyJdLAogICAgICAgICAgImljb24tc2l6ZSI6IDAuNTUsCiAgICAgICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZQogICAgICAgIH0KICAgICAgfSwgInVzZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRTb3VyY2UoJ3loUGlwZUxpbmVzJywgewogICAgICAgICd0eXBlJzogJ2dlb2pzb24nLAogICAgICAgICdkYXRhJzogewogICAgICAgICAgJ3R5cGUnOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgJ2ZlYXR1cmVzJzogZmVhdHVyZXMyLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0gIT0gdW5kZWZpbmVkOwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogInloUGlwZUxpbmVzTGF5ZXIiLAogICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICBzb3VyY2U6ICJ5aFBpcGVMaW5lcyIsCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICJsaW5lLWNvbG9yIjogIiM0NEJBNUEiLAogICAgICAgICAgImxpbmUtd2lkdGgiOiAzLjUKICAgICAgICB9CiAgICAgIH0sICJ1c2VyIik7CiAgICB9LAogICAgZ2V0SWNvbk5hbWUodHlwZSwgb2JqKSB7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ3RvZG8nOgogICAgICAgICAgc3dpdGNoIChvYmoubmFtZSkgewogICAgICAgICAgICBjYXNlICfkvY7kv53miLcnOgogICAgICAgICAgICAgIHJldHVybiAnZGJoJzsKICAgICAgICAgICAgY2FzZSAn6ZW/6L6IJzoKICAgICAgICAgICAgICByZXR1cm4gJ3piJzsKICAgICAgICAgICAgY2FzZSAn6L+d6KeE55So5oi3JzoKICAgICAgICAgICAgICByZXR1cm4gJ3dneWgnOwogICAgICAgICAgICBjYXNlICfkuIDlubTlhoXplIDmiLcnOgogICAgICAgICAgICAgIHJldHVybiAneW5ueGgnOwogICAgICAgICAgICBjYXNlICfkuIDlubTlhoXmiqXlgZwnOgogICAgICAgICAgICAgIHJldHVybiAneW5uYnQnOwogICAgICAgICAgICBjYXNlICfln7rlu7rooajmjpLmn6UnOgogICAgICAgICAgICAgIHJldHVybiAnampiJzsKICAgICAgICAgICAgY2FzZSAn5LiJ5pyf6Zu25ZCoJzoKICAgICAgICAgICAgICByZXR1cm4gJ2xkJzsKICAgICAgICAgICAgY2FzZSAn5aSn5rWB6YeP5a6i5oi3JzoKICAgICAgICAgICAgICByZXR1cm4gJ2RsbCc7CiAgICAgICAgICAgIGNhc2UgJ+Wkmuacn+mbtuWQqCc6CiAgICAgICAgICAgICAgcmV0dXJuICdsZCc7CiAgICAgICAgICAgIGNhc2UgJ+axoeawtOWNleeLrOiuoemHj+eUqOaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICd3c2Rkamx5aCc7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgcmV0dXJuICdob3RkYXRhJzsKICAgICAgICAgIH0KICAgICAgICBjYXNlICdzZWxlY3RlZCc6CiAgICAgICAgICBzd2l0Y2ggKG9iai5uYW1lKSB7CiAgICAgICAgICAgIGNhc2UgJ+S9juS/neaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICdkYmh4eic7CiAgICAgICAgICAgIGNhc2UgJ+mVv+i+iCc6CiAgICAgICAgICAgICAgcmV0dXJuICd6Ynh6JzsKICAgICAgICAgICAgY2FzZSAn6L+d6KeE55So5oi3JzoKICAgICAgICAgICAgICByZXR1cm4gJ3dneWh4eic7CiAgICAgICAgICAgIGNhc2UgJ+S4gOW5tOWGhemUgOaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICd5bm54aHh6JzsKICAgICAgICAgICAgY2FzZSAn5LiA5bm05YaF5oql5YGcJzoKICAgICAgICAgICAgICByZXR1cm4gJ3lubmJ0eHonOwogICAgICAgICAgICBjYXNlICfln7rlu7rooajmjpLmn6UnOgogICAgICAgICAgICAgIHJldHVybiAnampieHonOwogICAgICAgICAgICBjYXNlICfkuInmnJ/pm7blkKgnOgogICAgICAgICAgICAgIHJldHVybiAnbGR4eic7CiAgICAgICAgICAgIGNhc2UgJ+Wkp+a1gemHj+WuouaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICdkbGx4eic7CiAgICAgICAgICAgIGNhc2UgJ+Wkmuacn+mbtuWQqCc6CiAgICAgICAgICAgICAgcmV0dXJuICdsZHh6JzsKICAgICAgICAgICAgY2FzZSAn5rGh5rC05Y2V54us6K6h6YeP55So5oi3JzoKICAgICAgICAgICAgICByZXR1cm4gJ3dzZGRqbHloeHonOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHJldHVybiAneHpyZCc7CiAgICAgICAgICB9CiAgICAgICAgY2FzZSAnZG9uZSc6CiAgICAgICAgICBzd2l0Y2ggKG9iai5uYW1lKSB7CiAgICAgICAgICAgIGNhc2UgJ+S9juS/neaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICdkYmh3Yyc7CiAgICAgICAgICAgIGNhc2UgJ+mVv+i+iCc6CiAgICAgICAgICAgICAgcmV0dXJuICd6YndjJzsKICAgICAgICAgICAgY2FzZSAn6L+d6KeE55So5oi3JzoKICAgICAgICAgICAgICByZXR1cm4gJ3dneWh3Yyc7CiAgICAgICAgICAgIGNhc2UgJ+S4gOW5tOWGhemUgOaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICd5bm54aHdjJzsKICAgICAgICAgICAgY2FzZSAn5LiA5bm05YaF5oql5YGcJzoKICAgICAgICAgICAgICByZXR1cm4gJ3lubmJ0d2MnOwogICAgICAgICAgICBjYXNlICfln7rlu7rooajmjpLmn6UnOgogICAgICAgICAgICAgIHJldHVybiAnampid2MnOwogICAgICAgICAgICBjYXNlICfkuInmnJ/pm7blkKgnOgogICAgICAgICAgICAgIHJldHVybiAnbGR3Yyc7CiAgICAgICAgICAgIGNhc2UgJ+Wkp+a1gemHj+WuouaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICdkbGx3Yyc7CiAgICAgICAgICAgIGNhc2UgJ+Wkmuacn+mbtuWQqCc6CiAgICAgICAgICAgICAgcmV0dXJuICdsZHdjJzsKICAgICAgICAgICAgY2FzZSAn5rGh5rC05Y2V54us6K6h6YeP55So5oi3JzoKICAgICAgICAgICAgICByZXR1cm4gJ3dzZGRqbHlod2MnOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHJldHVybiAnd2NyZCc7CiAgICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzZXRIb3REYXRhKGhvdGRhdGEsIGluZGV4KSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgLy8gaG90ZGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAvLyAgIGl0ZW0uZGV2aWNlX2lkID0gaXRlbS5jb2RlOwogICAgICAvLyAgIGl0ZW0uZ2VvbWV0cnkgPSB7CiAgICAgIC8vICAgICB0eXBlOiAnUG9pbnQnLAogICAgICAvLyAgICAgY29vcmRpbmF0ZXM6IFtpdGVtLmxvbmdpLCBpdGVtLmxhdGldCiAgICAgIC8vICAgfTsKICAgICAgLy8gfSkKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigiaG90RGF0YUxheWVyIiArIFN0cmluZyhpbmRleCkpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoImhvdERhdGFMYXllciIgKyBTdHJpbmcoaW5kZXgpKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoImhvdERhdGFTb3VyY2UiICsgU3RyaW5nKGluZGV4KSkgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoImhvdERhdGFTb3VyY2UiICsgU3RyaW5nKGluZGV4KSk7CiAgICAgIGhvdGRhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpdGVtLmljb25OYW1lID0gdGhpcy5nZXRJY29uTmFtZSgndG9kbycsIGl0ZW0pOwogICAgICB9KTsKICAgICAgbGV0IGZlYXR1cmVzID0gaG90ZGF0YS5tYXAoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiBpdGVtLmNvZGUsCiAgICAgICAgICBwcm9wZXJ0aWVzOiBpdGVtLAogICAgICAgICAgZ2VvbWV0cnk6IGl0ZW0uZ2VvbWV0cnksCiAgICAgICAgICB0eXBlOiAiRmVhdHVyZSIKICAgICAgICB9OwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2coJ2ZlYXR1cmVzIDo+PiAnLCBmZWF0dXJlcyk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkU291cmNlKCdob3REYXRhU291cmNlJyArIFN0cmluZyhpbmRleCksIHsKICAgICAgICAndHlwZSc6ICdnZW9qc29uJywKICAgICAgICAnZGF0YSc6IHsKICAgICAgICAgICd0eXBlJzogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgICdmZWF0dXJlcyc6IGZlYXR1cmVzCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJob3REYXRhTGF5ZXIiICsgU3RyaW5nKGluZGV4KSwKICAgICAgICB0eXBlOiAic3ltYm9sIiwKICAgICAgICBzb3VyY2U6ICJob3REYXRhU291cmNlIiArIFN0cmluZyhpbmRleCksCiAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICJpY29uLWltYWdlIjogWyJnZXQiLCAiaWNvbk5hbWUiXSwKICAgICAgICAgICJpY29uLXNpemUiOiAwLjUsCiAgICAgICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZQogICAgICAgIH0KICAgICAgfSwgJ3VuUG9pbnRMYXllcjAnKTsKICAgICAgLy8gY29uc29sZS5sb2cobWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTdHlsZSgpKQogICAgfSwKICAgIC8vIOiOt+WPluiMg+WbtOWGheiuvuaWvQogICAgZ2V0UmFuZ3ModGFza0lkLCBjYWxsYmFjaykgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInVuTGluZUxheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigidW5MaW5lTGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigidW5Qb2ludExheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigidW5Qb2ludExheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInVuUG9pbnRMYXllckJpYW96aHUiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJ1blBvaW50TGF5ZXJCaWFvemh1Iik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJ5aFBpcGVWZWN0b3JTb3VyY2UiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgieWhQaXBlVmVjdG9yU291cmNlIik7CiAgICAgIGxldCB1cmwgPSBiYXNlVXJsLnVybF9jb25maWcgKyBgL3loc3ctbWFpbnRhaW4vbWFpbnRhaW5UYXNrL3Jlc3VsdG12dC97eH0ve3l9L3t6fT90YXNrSWQ9JHt0YXNrSWR9YDsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZShgeWhQaXBlVmVjdG9yU291cmNlYCwgewogICAgICAgIHR5cGU6ICJ2ZWN0b3IiLAogICAgICAgIHRpbGVzOiBbdXJsXSwKICAgICAgICBwcm9tb3RlSWQ6ICdpZCcKICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAidW5MaW5lTGF5ZXIiLAogICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICBzb3VyY2U6ICJ5aFBpcGVWZWN0b3JTb3VyY2UiLAogICAgICAgICJzb3VyY2UtbGF5ZXIiOiAibGluZSIsCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICJsaW5lLWNvbG9yIjogIiNmZjAwMDAiLAogICAgICAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgICAgfQogICAgICB9LCAndXNlcicpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogInVuUG9pbnRMYXllciIsCiAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgc291cmNlOiAieWhQaXBlVmVjdG9yU291cmNlIiwKICAgICAgICAic291cmNlLWxheWVyIjogInBvaW50IiwKICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgImljb24taW1hZ2UiOiAid3NqMSIsCiAgICAgICAgICAiaWNvbi1zaXplIjogMC41LAogICAgICAgICAgJ2ljb24tYWxsb3ctb3ZlcmxhcCc6IHRydWUKICAgICAgICB9CiAgICAgIH0sICd1c2VyJyk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAidW5Qb2ludExheWVyQmlhb3podSIsCiAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgc291cmNlOiAieXVoYW5nX3dzX3dzaiIsCiAgICAgICAgInNvdXJjZS1sYXllciI6ICJ3c193c2oiLAogICAgICAgICJtaW56b29tIjogMTgsCiAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICJ0ZXh0LWZpZWxkIjogWydjb25jYXQnLCBbImdldCIsICJmbG9vcmVsZXZhdGlvbiJdLCAnLycsIFsiZ2V0IiwgImRlcHRoIl1dLAogICAgICAgICAgInRleHQtb2Zmc2V0IjogWzEsIDFdCiAgICAgICAgfQogICAgICB9LCAndXNlcicpOwogICAgICBjb25zb2xlLmxvZyhtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgieWhQaXBlVmVjdG9yU291cmNlIikpOwogICAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9mZignY2xpY2snLCB0aGlzLmNhbGxiYWNrKTsKICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbignY2xpY2snLCBjYWxsYmFjayk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRHcmlkUmFuZ3ModGFza0lkLCBjYWxsYmFjaywgaWZNdWx0aSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQubXVsdGlUYXNrU0FMLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigidW5MaW5lTGF5ZXIiICsgaXRlbSkgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigidW5MaW5lTGF5ZXIiICsgaXRlbSk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigidW5Qb2ludExheWVyIiArIGl0ZW0pICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInVuUG9pbnRMYXllciIgKyBpdGVtKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgieWhQaXBlVmVjdG9yU291cmNlIiArIGl0ZW0pICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJ5aFBpcGVWZWN0b3JTb3VyY2UiICsgaXRlbSk7CiAgICAgIH0pOwogICAgICB0aGF0Lm11bHRpVGFza1NBTCA9IFtdOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ1bkxpbmVMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInVuTGluZUxheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInVuUG9pbnRMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInVuUG9pbnRMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ1blBvaW50TGF5ZXJCaWFvemh1IikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigidW5Qb2ludExheWVyQmlhb3podSIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgieWhQaXBlVmVjdG9yU291cmNlIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoInloUGlwZVZlY3RvclNvdXJjZSIpOwogICAgICBjb25zb2xlLmxvZyh0YXNrSWQpOwogICAgICBpZiAoIWlmTXVsdGkpIHsKICAgICAgICBsZXQgdXJsID0gYmFzZVVybC51cmxfY29uZmlnICsgYC95aHN3LWdyaWQvbWFpbnRhaW5UYXNrL3Jlc3VsdG12dC97eH0ve3l9L3t6fT90YXNrSWQ9JHt0YXNrSWR9YDsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKGB5aFBpcGVWZWN0b3JTb3VyY2VgLCB7CiAgICAgICAgICB0eXBlOiAidmVjdG9yIiwKICAgICAgICAgIHRpbGVzOiBbdXJsXSwKICAgICAgICAgIHByb21vdGVJZDogJ2lkJwogICAgICAgIH0pOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgaWQ6ICJ1bkxpbmVMYXllcjAiLAogICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgc291cmNlOiAieWhQaXBlVmVjdG9yU291cmNlIiwKICAgICAgICAgICJzb3VyY2UtbGF5ZXIiOiAibGluZSIsCiAgICAgICAgICBwYWludDogewogICAgICAgICAgICAibGluZS1jb2xvciI6ICIjZmYwMDAwIiwKICAgICAgICAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgICAgICB9CiAgICAgICAgfSwgJ3VzZXInKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICAgIGlkOiAidW5Qb2ludExheWVyMCIsCiAgICAgICAgICB0eXBlOiAic3ltYm9sIiwKICAgICAgICAgIHNvdXJjZTogInloUGlwZVZlY3RvclNvdXJjZSIsCiAgICAgICAgICAic291cmNlLWxheWVyIjogInBvaW50IiwKICAgICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICJpY29uLWltYWdlIjogInJ3MSIsCiAgICAgICAgICAgICJpY29uLXNpemUiOiAwLjUsCiAgICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfSwgJ3VzZXInKTsKICAgICAgICB0aGF0Lm11bHRpVGFza1NBTC5wdXNoKCcwJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGV0IHVybEFycmF5ID0gdGFza0lkLm1hcCgoaXRlbSk9PnsKICAgICAgICAvLyAgIHJldHVybiBiYXNlVXJsLnVybF9jb25maWcgKyBgL3loc3ctZ3JpZC9tYWludGFpblRhc2svcmVzdWx0bXZ0L3t4fS97eX0ve3p9P3Rhc2tJZD0ke2l0ZW19YAogICAgICAgIC8vIH0pCiAgICAgICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZShgeWhQaXBlVmVjdG9yU291cmNlYCwgewogICAgICAgIC8vICAgdHlwZTogInZlY3RvciIsCiAgICAgICAgLy8gICB0aWxlczogdXJsQXJyYXksCiAgICAgICAgLy8gICBwcm9tb3RlSWQ6ICdpZCcKICAgICAgICAvLyB9KQogICAgICAgIHRhc2tJZC5mb3JFYWNoKCh0YXNrLCBpbmRleCkgPT4gewogICAgICAgICAgbGV0IHVybCA9IGJhc2VVcmwudXJsX2NvbmZpZyArIGAveWhzdy1ncmlkL21haW50YWluVGFzay9yZXN1bHRtdnQve3h9L3t5fS97en0/dGFza0lkPSR7dGFza31gOwogICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZShgeWhQaXBlVmVjdG9yU291cmNlYCArIFN0cmluZyhpbmRleCksIHsKICAgICAgICAgICAgdHlwZTogInZlY3RvciIsCiAgICAgICAgICAgIHRpbGVzOiBbdXJsXSwKICAgICAgICAgICAgcHJvbW90ZUlkOiAnaWQnCiAgICAgICAgICB9KTsKICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgICBpZDogInVuTGluZUxheWVyIiArIFN0cmluZyhpbmRleCksCiAgICAgICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICAgICAgc291cmNlOiAieWhQaXBlVmVjdG9yU291cmNlIiArIFN0cmluZyhpbmRleCksCiAgICAgICAgICAgICJzb3VyY2UtbGF5ZXIiOiAibGluZSIsCiAgICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICAgImxpbmUtY29sb3IiOiAiI2ZmMDAwMCIsCiAgICAgICAgICAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICd1c2VyJyk7CiAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICAgICAgaWQ6ICJ1blBvaW50TGF5ZXIiICsgU3RyaW5nKGluZGV4KSwKICAgICAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgICAgIHNvdXJjZTogInloUGlwZVZlY3RvclNvdXJjZSIgKyBTdHJpbmcoaW5kZXgpLAogICAgICAgICAgICAic291cmNlLWxheWVyIjogInBvaW50IiwKICAgICAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICAgICAiaWNvbi1pbWFnZSI6ICJydyIgKyBTdHJpbmcoaW5kZXggJSA4KSwKICAgICAgICAgICAgICAiaWNvbi1zaXplIjogMC41LAogICAgICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICd1c2VyJyk7CiAgICAgICAgICB0aGF0Lm11bHRpVGFza1NBTC5wdXNoKFN0cmluZyhpbmRleCkpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgIC8vICAgaWQ6ICJ1bkxpbmVMYXllciIsCiAgICAgIC8vICAgdHlwZTogImxpbmUiLAogICAgICAvLyAgIHNvdXJjZTogInloUGlwZVZlY3RvclNvdXJjZSIsCiAgICAgIC8vICAgInNvdXJjZS1sYXllciI6ICJsaW5lIiwKICAgICAgLy8gICBwYWludDogewogICAgICAvLyAgICAgImxpbmUtY29sb3IiOiAiI2ZmMDAwMCIsCiAgICAgIC8vICAgICAibGluZS13aWR0aCI6IDMKICAgICAgLy8gICB9CiAgICAgIC8vIH0sICdjdXJlJykKICAgICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgLy8gICBpZDogInVuUG9pbnRMYXllciIsCiAgICAgIC8vICAgdHlwZTogInN5bWJvbCIsCiAgICAgIC8vICAgc291cmNlOiAieWhQaXBlVmVjdG9yU291cmNlIiwKICAgICAgLy8gICAic291cmNlLWxheWVyIjogInBvaW50IiwKICAgICAgLy8gICAibGF5b3V0IjogewogICAgICAvLyAgICAgImljb24taW1hZ2UiOiAid3NqMSIsCiAgICAgIC8vICAgICAiaWNvbi1zaXplIjogMC41LAogICAgICAvLyAgICAgJ2ljb24tYWxsb3ctb3ZlcmxhcCc6IHRydWUKCiAgICAgIC8vICAgfQogICAgICAvLyB9LCAnY3VyZScpCiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAidW5Qb2ludExheWVyQmlhb3podSIsCiAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgc291cmNlOiAieXVoYW5nX3dzX3dzaiIsCiAgICAgICAgInNvdXJjZS1sYXllciI6ICJ3c193c2oiLAogICAgICAgICJtaW56b29tIjogMTgsCiAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICJ0ZXh0LWZpZWxkIjogWydjb25jYXQnLCBbImdldCIsICJmbG9vcmVsZXZhdGlvbiJdLCAnLycsIFsiZ2V0IiwgImRlcHRoIl1dLAogICAgICAgICAgInRleHQtb2Zmc2V0IjogWzEsIDFdCiAgICAgICAgfQogICAgICB9LCAndXNlcicpOwogICAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9mZignY2xpY2snLCB0aGlzLmNhbGxiYWNrKTsKICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbignY2xpY2snLCBjYWxsYmFjayk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRSYW5nRmlsdGVyKGRvbmUsIHN0YXR1cykgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInloUGlwZUxpbmVzTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KCd5aFBpcGVMaW5lc0xheWVyJywgJ3Zpc2liaWxpdHknLCBzdGF0dXMgPyAnbm9uZScgOiAndmlzaWJsZScpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ5aFBpcGVQb2ludHNMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ3loUGlwZVBvaW50c0xheWVyJywgJ3Zpc2liaWxpdHknLCBzdGF0dXMgPyAnbm9uZScgOiAndmlzaWJsZScpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldEZpbHRlcigndW5MaW5lTGF5ZXInLCBzdGF0dXMgPyBbJz09JywgWydpbmRleC1vZicsIFsiZ2V0IiwgImRldmljZV9pZCJdLCBbJ2xpdGVyYWwnLCBkb25lXV0sIC0xXSA6IG51bGwpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldEZpbHRlcigndW5Qb2ludExheWVyJywgc3RhdHVzID8gWyc9PScsIFsnaW5kZXgtb2YnLCBbImdldCIsICJkZXZpY2VfaWQiXSwgWydsaXRlcmFsJywgZG9uZV1dLCAtMV0gOiBudWxsKTsKICAgIH0sCiAgICByYW5nQ2xpY2soZmVhdHVyZSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGNvbnNvbGUubG9nKGZlYXR1cmUpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJyYW5nZUwiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJyYW5nZUwiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigicmFuZ2VNIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigicmFuZ2VNIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJyYW5nZVMiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgicmFuZ2VTIik7CiAgICAgIHZhciBmZWF0dXJlcyA9IGZlYXR1cmVbMF07CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkU291cmNlKCdyYW5nZVMnLCB7CiAgICAgICAgJ3R5cGUnOiAnZ2VvanNvbicsCiAgICAgICAgJ2RhdGEnOiB7CiAgICAgICAgICAndHlwZSc6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAnZmVhdHVyZXMnOiBbZmVhdHVyZXNdCiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGZlYXR1cmVzLmdlb21ldHJ5LnR5cGUgPT09ICdMaW5lU3RyaW5nJykgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgICBpZDogInJhbmdlTCIsCiAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICBzb3VyY2U6ICJyYW5nZVMiLAogICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgImxpbmUtY29sb3IiOiAiI0ZGRkYwMCIsCiAgICAgICAgICAgICJsaW5lLXdpZHRoIjogNwogICAgICAgICAgfQogICAgICAgIH0sICJpbml0SW5zcExpbmVMYXllciIpOwogICAgICB9IGVsc2UgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgICBpZDogInJhbmdlTSIsCiAgICAgICAgICB0eXBlOiAic3ltYm9sIiwKICAgICAgICAgIHNvdXJjZTogInJhbmdlUyIsCiAgICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgICAiaWNvbi1pbWFnZSI6IGZlYXR1cmVzLnByb3BlcnRpZXMueWhUeXBlID8gZmVhdHVyZXMucHJvcGVydGllcy55aFR5cGUuaW5kZXhPZign5YW75oqkJykgPiAtMSA/ICJ3c2oyIiA6IGZlYXR1cmVzLnByb3BlcnRpZXMueWhUeXBlLmluZGV4T2YoJ+eDreeCuScpID4gLTEgPyB0aGlzLmdldEljb25OYW1lKCdzZWxlY3RlZCcsIGZlYXR1cmVzLnByb3BlcnRpZXMpIDogZmVhdHVyZXMucHJvcGVydGllcy5hcHByb3ZlU3RhdHVzID09IDIgPyAidGh4eiIgOiAicnd4eiIgOiAid3NqMiIsCiAgICAgICAgICAgICJpY29uLXNpemUiOiBmZWF0dXJlcy5wcm9wZXJ0aWVzLnloVHlwZSA/IGZlYXR1cmVzLnByb3BlcnRpZXMueWhUeXBlLmluZGV4T2YoJ+WFu+aKpCcpID4gLTEgPyAwLjcgOiAwLjUgOiAwLjcKICAgICAgICAgIH0KICAgICAgICB9LCAieWhQaXBlUG9pbnRzTGF5ZXIiKTsKICAgICAgfQogICAgICBsZXQgY29vcmRpbmF0ZXMgPSBmZWF0dXJlcy5nZW9tZXRyeS50eXBlID09PSAnUG9pbnQnID8gZmVhdHVyZXMuZ2VvbWV0cnkuY29vcmRpbmF0ZXMgOiBmZWF0dXJlcy5nZW9tZXRyeS5jb29yZGluYXRlc1swXTsKICAgICAgdGhhdC5mbHlUbyh7CiAgICAgICAgcG9zaXRpb246IGNvb3JkaW5hdGVzLAogICAgICAgIHpvb206IDE3CiAgICAgIH0pOwogICAgfSwKICAgIGxpc3RMaWNpayh2YWwpIHsKICAgICAgbGV0IG5ld0RhdGEgPSB2YWwubmV3Lml0ZW07CiAgICAgIGxldCBmZWF0dXJlcyA9IFt7CiAgICAgICAgdHlwZTogJ2ZlYXR1cmUnLAogICAgICAgIGdlb21ldHJ5OiBKU09OLnBhcnNlKG5ld0RhdGEuZ2VvbSksCiAgICAgICAgcHJvcGVydGllczogbmV3RGF0YQogICAgICB9XTsKICAgICAgdGhpcy5yYW5nQ2xpY2soZmVhdHVyZXMpOwogICAgfSwKICAgIC8qKg0KICAgICAqIOaPkOS+m+WdkOagh+aVsOe7hO+8jOi/lOWbnuS4reW/g+eCuSzpmZDnur/lkozpnaINCiAgICAgKiBAcGFyYW0geyp9IHBvc2l0aW9uIOWdkOagh+aVsOe7hA0KICAgICAqLwogICAgZ2V0Q2VudGVyKHBvc2l0aW9uKSB7CiAgICAgIGxldCBjb29yZCA9IFtdOwogICAgICBsZXQgY2VudGVyOwogICAgICBpZiAocG9zaXRpb24gaW5zdGFuY2VvZiBBcnJheSAmJiBwb3NpdGlvbi5sZW5ndGggIT09IDApIHsKICAgICAgICBsZXQgcG9zMSA9IHBvc2l0aW9uWzBdOwogICAgICAgIGlmIChwb3MxIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgIGxldCBwb3MyID0gcG9zMVswXTsKICAgICAgICAgIGlmIChwb3MyIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgY2VudGVyID0gdHVyZi5jZW50ZXIodHVyZi5wb2x5Z29uKHBvc2l0aW9uKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjZW50ZXIgPSB0dXJmLmNlbnRlcih0dXJmLmxpbmVTdHJpbmcocG9zaXRpb24pKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGNlbnRlcikgewogICAgICAgIGNvb3JkID0gY2VudGVyLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICB9CiAgICAgIHJldHVybiBjb29yZDsKICAgIH0sCiAgICBwYWludGluZ1JhbmdlKHsKICAgICAgcG9zaXRpb24gPSBbXSwKICAgICAgY29sb3IgPSAiI2ZmNGE0YSIsCiAgICAgIGxpbmVXaWR0aCA9IDMsCiAgICAgIGNpcmNsZVJhZGl1cyA9IDMsCiAgICAgIGJvbGRCb3JkZXIsCiAgICAgIGJvcmRlcldpZHRoID0gNSwKICAgICAgaXNSZXBhaW50ID0gdHJ1ZSwKICAgICAgbGluZURhc2hhcnJheQogICAgfSkgewogICAgICBsZXQgZmVhdHVyZXMgPSBbXTsKICAgICAgaWYgKHBvc2l0aW9uIGluc3RhbmNlb2YgQXJyYXkgJiYgcG9zaXRpb25bMF0gaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgIGxldCBwb3MxID0gcG9zaXRpb25bMF07CiAgICAgICAgaWYgKHBvczFbMF0gaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgcG9zaXRpb24uZm9yRWFjaChsaW5lID0+IHsKICAgICAgICAgICAgbGV0IGZlYXR1cmU7CiAgICAgICAgICAgIGlmICh0aGlzLmdldEFycmF5R2VvKGxpbmUpID09IDIpIHsKICAgICAgICAgICAgICBmZWF0dXJlID0gdHVyZi5saW5lU3RyaW5nKGxpbmUpOwogICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXRBcnJheUdlbyhsaW5lKSA9PSAzKSB7CiAgICAgICAgICAgICAgZmVhdHVyZSA9IHR1cmYubXVsdGlMaW5lU3RyaW5nKGxpbmUpOwogICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXRBcnJheUdlbyhsaW5lKSA9PSA0KSB7CiAgICAgICAgICAgICAgZmVhdHVyZSA9IHR1cmYucG9seWdvblRvTGluZSh0dXJmLm11bHRpUG9seWdvbihsaW5lKSk7CiAgICAgICAgICAgICAgZmVhdHVyZS5mZWF0dXJlcy5mb3JFYWNoKGYgPT4gewogICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoYm9sZEJvcmRlciBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAgIGZlYXR1cmVzID0gZmVhdHVyZXMuY29uY2F0KHR1cmYubGluZVN0cmluZyhib2xkQm9yZGVyLCB7CiAgICAgICAgICAgICAgbmFtZTogImJvbGRCb3JkZXIiCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgdGhpcy5hZGRSYW5nZUxheWVyMih7CiAgICAgICAgICAgICAgZmVhdHVyZXMsCiAgICAgICAgICAgICAgY29sb3IsCiAgICAgICAgICAgICAgbGluZVdpZHRoLAogICAgICAgICAgICAgIGxpbmVEYXNoYXJyYXksCiAgICAgICAgICAgICAgYm9yZGVyV2lkdGgsCiAgICAgICAgICAgICAgaXNSZXBhaW50CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5hZGRSYW5nZUxheWVyMih7CiAgICAgICAgICAgICAgZmVhdHVyZXMsCiAgICAgICAgICAgICAgY29sb3IsCiAgICAgICAgICAgICAgbGluZVdpZHRoLAogICAgICAgICAgICAgIGxpbmVEYXNoYXJyYXksCiAgICAgICAgICAgICAgaXNSZXBhaW50CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXQgZmVhdHVyZSA9IHR1cmYubGluZVN0cmluZyhwb3NpdGlvbik7CiAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpOwogICAgICAgICAgdGhpcy5hZGRSYW5nZUxheWVyMih7CiAgICAgICAgICAgIGZlYXR1cmVzLAogICAgICAgICAgICBjb2xvciwKICAgICAgICAgICAgbGluZVdpZHRoLAogICAgICAgICAgICBsaW5lRGFzaGFycmF5LAogICAgICAgICAgICBpc1JlcGFpbnQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbiBpbnN0YW5jZW9mIEFycmF5ICYmIHBvc2l0aW9uLmxlbmd0aCAhPT0gMCkgewogICAgICAgIGxldCBmZWF0dXJlID0gdHVyZi5wb2ludChwb3NpdGlvbik7CiAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTsKICAgICAgICB0aGlzLmFkZFJhbmdlTGF5ZXIyKHsKICAgICAgICAgIGZlYXR1cmVzLAogICAgICAgICAgY29sb3IsCiAgICAgICAgICBjaXJjbGVSYWRpdXMsCiAgICAgICAgICBpc1JlcGFpbnQKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFkZFJhbmdlTGF5ZXIyKHsKICAgICAgICAgIGZlYXR1cmVzLAogICAgICAgICAgY29sb3IsCiAgICAgICAgICBpc1JlcGFpbnQKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldEFycmF5R2VvKGFyciA9IFtdKSB7CiAgICAgIGxldCBudW0gPSAwOwogICAgICBmdW5jdGlvbiBibChhcnIpIHsKICAgICAgICBpZiAoYXJyIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgIG51bSsrOwogICAgICAgICAgYmwoYXJyWzBdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYmwoYXJyKTsKICAgICAgcmV0dXJuIG51bTsKICAgIH0sCiAgICBhZGRSYW5nZUxheWVyMih7CiAgICAgIGZlYXR1cmVzLAogICAgICBjb2xvciwKICAgICAgbGluZVdpZHRoLAogICAgICBsaW5lRGFzaGFycmF5LAogICAgICBjaXJjbGVSYWRpdXMsCiAgICAgIGJvcmRlcldpZHRoLAogICAgICBpc1JlcGFpbnQKICAgIH0pIHsKICAgICAgLy8gbGV0IHRoYXQgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZygnZmVhdHVyZXMgOj4+ICcsIGZlYXR1cmVzKTsKICAgICAgbGV0IGxheWVySWQgPSAicmFuZ2VMYXllcjIiOwogICAgICAvLyBmdW5jdGlvbiBtYWtlSWQoaWQgPSAicmFuZ2VMYXllcjIiKXsKICAgICAgLy8gICAgIGlmKHRoYXQubWFwLmdldFNvdXJjZShpZCkpewogICAgICAvLyAgICAgICAgIG1ha2VJZChpZCsrKQogICAgICAvLyAgICAgfWVsc2V7CiAgICAgIC8vICAgICAgICAgbGF5ZXJJZCA9IGlkOwogICAgICAvLyAgICAgfQogICAgICAvLyB9CiAgICAgIC8vIG1ha2VJZCgpOwogICAgICBpZiAoaXNSZXBhaW50KSB7CiAgICAgICAgdGhpcy5yZW1vdmVSYW5nZUxheWVyKCk7CiAgICAgIH0KICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZShsYXllcklkLCB7CiAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlcwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChjaXJjbGVSYWRpdXMpIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgICAgaWQ6IGxheWVySWQsCiAgICAgICAgICBzb3VyY2U6IGxheWVySWQsCiAgICAgICAgICB0eXBlOiAiY2lyY2xlIiwKICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICJjaXJjbGUtcmFkaXVzIjogY2lyY2xlUmFkaXVzLAogICAgICAgICAgICAiY2lyY2xlLWNvbG9yIjogY29sb3IKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChsaW5lV2lkdGgpIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgICAgaWQ6IGxheWVySWQsCiAgICAgICAgICBzb3VyY2U6IGxheWVySWQsCiAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICBwYWludDogewogICAgICAgICAgICAibGluZS1jb2xvciI6IGNvbG9yLAogICAgICAgICAgICAibGluZS13aWR0aCI6IFsnY2FzZScsIFsnPT0nLCBbJ2dldCcsICduYW1lJ10sICdib2xkQm9yZGVyJ10sIGJvcmRlcldpZHRoIHx8IDAsIGxpbmVXaWR0aF0sCiAgICAgICAgICAgICJsaW5lLWRhc2hhcnJheSI6IGxpbmVEYXNoYXJyYXkgfHwgW10KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZVJhbmdlTGF5ZXIoKSB7CiAgICAgIGlmIChtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJyYW5nZUxheWVyMiIpKSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJyYW5nZUxheWVyMiIpOwogICAgICBpZiAobWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoInJhbmdlTGF5ZXIyIikpIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJyYW5nZUxheWVyMiIpOwogICAgfSwKICAgIC8qKg0KICAgICAqIOeCue+8jOWkmueCue+8jOe6v++8jOWkmue6v++8jOmdou+8jOWkmumdouWumuS9jQ0KICAgICAqIEBwYXJhbSB7Kn0gcG9zaXRpb24g5a6a5L2N5Z2Q5qCHDQogICAgICogQHBhcmFtIHsqfSByZXNldCDoi6XkuI3kvKDlnZDmoIfvvIzmmK/lkKblrprkvY3liLDliJ3lp4vkvY3nva4NCiAgICAgKi8KICAgIG1ha2VMb2NhdGlvbihwb3NpdGlvbiwgcmVzZXQgPSB0cnVlKSB7CiAgICAgIGxldCB0eXBlID0gJyc7CiAgICAgIGlmIChwb3NpdGlvbiBpbnN0YW5jZW9mIEFycmF5ICYmIHBvc2l0aW9uLmxlbmd0aCAhPT0gMCkgewogICAgICAgIGlmIChwb3NpdGlvblswXSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICBsZXQgcG9zMSA9IHBvc2l0aW9uWzBdOwogICAgICAgICAgaWYgKHBvczFbMF0gaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgICBsZXQgcG9zMiA9IHBvczFbMF07CiAgICAgICAgICAgIGlmIChwb3MyWzBdIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgICB2YXIgbXVsdGlwb2x5Z29uID0gdHVyZi5tdWx0aVBvbHlnb24ocG9zaXRpb24pOwogICAgICAgICAgICAgIHZhciBiYm94ID0gdHVyZi5iYm94KG11bHRpcG9seWdvbik7CiAgICAgICAgICAgICAgdmFyIGJib3hQb2x5Z29uID0gdHVyZi5iYm94UG9seWdvbihiYm94KTsKICAgICAgICAgICAgICB0eXBlID0gJ211bHRpcG9seWdvbic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIHBvbHlnb24gPSB0dXJmLnBvbHlnb24ocG9zaXRpb24pOwogICAgICAgICAgICAgIHZhciBiYm94ID0gdHVyZi5iYm94KHBvbHlnb24pOwogICAgICAgICAgICAgIHZhciBiYm94UG9seWdvbiA9IHR1cmYuYmJveFBvbHlnb24oYmJveCk7CiAgICAgICAgICAgICAgdHlwZSA9ICdwb2x5Z29uJzsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGxpbmUgPSB0dXJmLmxpbmVTdHJpbmcocG9zaXRpb24pOwogICAgICAgICAgICB2YXIgYmJveCA9IHR1cmYuYmJveChsaW5lKTsKICAgICAgICAgICAgdmFyIGJib3hQb2x5Z29uID0gdHVyZi5iYm94UG9seWdvbihiYm94KTsKICAgICAgICAgICAgdHlwZSA9ICdsaW5lJzsKICAgICAgICAgIH0KICAgICAgICAgIHZhciB2MiA9IG5ldyBtYXBib3hnbC5MbmdMYXRCb3VuZHMoYmJveFBvbHlnb24uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF0sIGJib3hQb2x5Z29uLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzJdKTsKICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZml0Qm91bmRzKHYyLCB7CiAgICAgICAgICAgIGxpbmVhcjogZmFsc2UsCiAgICAgICAgICAgIHBhZGRpbmc6IHsKICAgICAgICAgICAgICB0b3A6IDYwLAogICAgICAgICAgICAgIGJvdHRvbTogNjAsCiAgICAgICAgICAgICAgbGVmdDogNjAsCiAgICAgICAgICAgICAgcmlnaHQ6IDYwCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZseVRvKHsKICAgICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLAogICAgICAgICAgICB6b29tOiAxNAogICAgICAgICAgfSk7CiAgICAgICAgICB0eXBlID0gJ3BvaW50JzsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocmVzZXQpIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmZpdEJvdW5kcyhbWzEyMC4zODE4ODQ4NDQ5ODA0NSwgMzAuNTY4Njg1NDc1NzgwODhdLCBbMTE5LjUxNTQ5MDk3NTU0Mjk1LCAzMC4xNzgzNTY5ODc3MjA2MTJdXSwgewogICAgICAgICAgbGluZWFyOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHR5cGUgPSAnZXJyUG9zaXRpb24nOwogICAgICB9CiAgICAgIHJldHVybiB0eXBlOwogICAgfSwKICAgIC8vIOWIh+aNouS+m+awtO+8jOmbqOawtO+8jOaxoeawtOeTpueJhwogICAgYXN5bmMgY2hhbmdlUGlwZVRpbGVMYXllcihpbnNwQnVzaW5lc3NUeXBlKSB7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoJ2xpZ2h0TGF5ZXInLCB7CiAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgIGlkOiAibGlnaHRQb2ludCIsCiAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgc291cmNlOiAibGlnaHRMYXllciIsCiAgICAgICAgZmlsdGVyOiBbIj09IiwgIiR0eXBlIiwgIlBvaW50Il0sCiAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAnaWNvbi1zaXplJzogMS40LAogICAgICAgICAgJ2ljb24taW1hZ2UnOiBbLi4udGhpcy5HU0wuc2xpY2UoMCwgdGhpcy5HU0wubGVuZ3RoIC0gMSksIC4uLnRoaXMuV1NMLnNsaWNlKDEsIHRoaXMuV1NMLmxlbmd0aCAtIDEpLCAuLi50aGlzLllTTC5zbGljZSgxKV0sCiAgICAgICAgICAnaWNvbi1pZ25vcmUtcGxhY2VtZW50JzogdHJ1ZSwKICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlCiAgICAgICAgfQogICAgICB9LCAibGlnaHRMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgIGlkOiAibGlnaHRMaW5lIiwKICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgc291cmNlOiAibGlnaHRMYXllciIsCiAgICAgICAgZmlsdGVyOiBbIj09IiwgIiR0eXBlIiwgIkxpbmVTdHJpbmciXSwKICAgICAgICBwYWludDogewogICAgICAgICAgJ2xpbmUtd2lkdGgnOiAzLAogICAgICAgICAgJ2xpbmUtY29sb3InOiAicmVkIgogICAgICAgIH0KICAgICAgfSwgImxpZ2h0TGF5ZXIiKTsKICAgICAgdGhpcy5hZGRCdWZmZXJMYXllcigpOwogICAgICB0aGlzLmFkZFJhbmdlTGF5ZXIoKTsKICAgICAgdGhpcy5hZGRJbnNwVXNlckxheWVyKCk7CiAgICAgIHRoaXMuYWRkS2V5UG9pbnRMYXllcigpOwogICAgICB0aGlzLmlzT25Mb2FkID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDpgJrov4fkuJrliqHnsbvlnovmlLnlj5jlm77lsYLmmL7npLoKICAgIGNoYW5nZVBpcGVUaWxlTGF5ZXJCeUJ1c2luZXNzKHR5cGUpIHsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAiV0FURVJfU1VQUExZIjoKICAgICAgICAgIHRoaXMuZ3NMYXllcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLmdzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnlzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkodGhpcy55c0xheWVyc1tpbmRleF0sICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy53c0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMud3NMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlJBSV9XQVRFUiI6CiAgICAgICAgICB0aGlzLnlzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkodGhpcy55c0xheWVyc1tpbmRleF0sICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5nc0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMuZ3NMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMud3NMYXllcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLndzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJQT0xMVVRFRF9XQVRFUiI6CiAgICAgICAgICB0aGlzLndzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkodGhpcy53c0xheWVyc1tpbmRleF0sICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy55c0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMueXNMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZ3NMYXllcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLmdzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhpcy53c0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMud3NMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMueXNMYXllcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLnlzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmdzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkodGhpcy5nc0xheWVyc1tpbmRleF0sICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAodGhhdC5pc09uTG9hZGVkKCkpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5jaGFuZ2VCWkxheWVyKHR5cGUpOwogICAgICAgICAgfQogICAgICAgIH0sIDEwMCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfQogICAgfSwKICAgIC8vIOmAmui/h+S4muWKoeexu+Wei+aUueWPmOWbvuWxguaYvuekuiDkuInnvZHlkIjkuIAKICAgIGNoYW5nZUxheWVyQnlCdXNpbmVzcyh7CiAgICAgIGdzID0gJ25vbmUnLAogICAgICB5cyA9ICdub25lJywKICAgICAgd3MgPSAnbm9uZScKICAgIH0pIHsKICAgICAgaWYgKCFtYXBPYmoubWFwSW5zdGFuY2UpIHJldHVybjsKICAgICAgbGV0IGdzTGF5ZXJUeXBlID0gTGF5ZXJUeXBlWyfkvpvmsLQnXVswXS5jb25jYXQoTGF5ZXJUeXBlWyfkvpvmsLQnXVsxXSk7CiAgICAgIGxldCB3c0xheWVyVHlwZSA9IExheWVyVHlwZVsn5rGh5rC0J11bMF0uY29uY2F0KExheWVyVHlwZVsn5rGh5rC0J11bMV0pOwogICAgICBsZXQgeXNMYXllclR5cGUgPSBMYXllclR5cGVbJ+mbqOawtCddWzBdLmNvbmNhdChMYXllclR5cGVbJ+mbqOawtCddWzFdKTsKICAgICAgZ3NMYXllclR5cGUuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KGl0ZW0uaWQsICd2aXNpYmlsaXR5JywgZ3MpOwogICAgICB9KTsKICAgICAgeXNMYXllclR5cGUuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KGl0ZW0uaWQsICd2aXNpYmlsaXR5JywgeXMpOwogICAgICB9KTsKICAgICAgd3NMYXllclR5cGUuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KGl0ZW0uaWQsICd2aXNpYmlsaXR5Jywgd3MpOwogICAgICB9KTsKICAgICAgdGhpcy5pc09uTG9hZCA9IHRydWU7CiAgICB9LAogICAgLy8g5re75Yqg5beh5qOA5Lq65ZGYCiAgICBhZGRJbnNwVXNlckxheWVyKCkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCJpbnNwVXNlciIsIHsKICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0sCiAgICAgICAgZ2VuZXJhdGVJZDogdHJ1ZQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICBpZDogImluc3BVc2VyTGF5ZXIiLAogICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgIHNvdXJjZTogImluc3BVc2VyIiwKICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICJpY29uLWltYWdlIjogInVzZXJJbnNwIiwKICAgICAgICAgICJpY29uLXNpemUiOiAwLjIsCiAgICAgICAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICAgICAgIC8v6Ieq5Yqo6YG/6K6p5bGe5oCnCiAgICAgICAgICAiaWNvbi1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZQogICAgICAgIH0KICAgICAgfSwgInVuSW5zcExpbmVMYXllciIpOwogICAgfSwKICAgIGdldERpcmVjdGlvbigpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uYWJzb2x1dGUnLCB0aGlzLnNldFJvdGF0ZSk7CiAgICAgIHRoaXMuaGFzTGlzdGVuID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDorr7nva7lt6Hmo4DkurrlkZjkvY3nva4KICAgIHNldEluc3BVc2VyUG9zaXRpb24ocG9zaXRpb24pIHsKICAgICAgLy8geENvZGXvvIx5Q29kZeS4uue7j+e6rOW6pgogICAgICBjb25zdCBjb29yZCA9IFtwYXJzZUZsb2F0KHBvc2l0aW9uLmxvbmdpdHVkZSksIHBhcnNlRmxvYXQocG9zaXRpb24ubGF0aXR1ZGUpXTsKICAgICAgY29uc3QgcG9pbnQgPSB0dXJmLnBvaW50KGNvb3JkKTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgICAvLyDlrprml7blmagKICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyDlpoLmnpzlnLDlm77lrp7kvovliJvlu7rjgIHlt6Hmo4DkurrlkZjlm77lsYLlrZjlnKjkuJTliqDovb3lrozmr5UKICAgICAgICAgIGlmICh0aGF0LmlzT25Mb2FkZWQoKSAmJiBtYXBPYmoubWFwLmdldFNvdXJjZSgiaW5zcFVzZXIiKSAmJiBtYXBPYmoubWFwLmlzU291cmNlTG9hZGVkKCJpbnNwVXNlciIpKSB7CiAgICAgICAgICAgIC8vIOa4hemZpOWumuaXtuWZqAogICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgLy8g5beh5qOA5Lq65ZGY5Zu+5qCHCiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCJpbnNwVXNlciIsIHsKICAgICAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgICAgIGZlYXR1cmVzOiBbcG9pbnRdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAhdGhhdC5oYXNMaXN0ZW4gJiYgdGhhdC5nZXREaXJlY3Rpb24oKTsKICAgICAgICAgICAgLy8g5aaC5p6c5byA5aeL5beh5qOA77yM5Zyw5Zu+5Lul5Lq65ZGY5Li65Lit5b+DCiAgICAgICAgICAgIGxldCBjaGFuZ2VMaW5lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInN0YXJ0UmVjb3JkTGluZXMiKTsKICAgICAgICAgICAgLy8g5aaC5p6c5LiK5oql5LqL5Lu277yM5Y+W5raI5Zyw5Zu+6K6+572u5Lit5b+D5pON5L2cCiAgICAgICAgICAgIC8vIGxldCBpc1JlcG9ydEV2ZW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlzUmVwb3J0RXZlbnQiKTsKICAgICAgICAgICAgaWYgKGNoYW5nZUxpbmUgPT0gJ3N0YXJ0JykgewogICAgICAgICAgICAgIG1hcE9iai5tYXAuc2V0Q2VudGVyKGNvb3JkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIDEwMCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfQogICAgfSwKICAgIHNldFJvdGF0ZShlKSB7CiAgICAgIGxldCBiZWFyaW5nID0gZS5hbHBoYSAtIDE4MCA+PSAwID8gMTgwIC0gZS5hbHBoYSA6IDE4MCAtIGUuYWxwaGE7CiAgICAgIC8vIOiwg+aVtOe9l+ebmOaWueWQkQogICAgICBtYXBPYmoubWFwICYmIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoImluc3BVc2VyTGF5ZXIiLCAiaWNvbi1yb3RhdGUiLCBiZWFyaW5nKTsKICAgIH0sCiAgICAvLyDorr7nva7lt6Hmo4DnrqHnur/kuLrlt7Llt6Hmo4AKICAgIGNoYW5nZUluc3BMaW5lU3RhdGUoZ2VvbWV0cnkpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAvLyDlsIblnLDnkIblnZDmoIfns7vovazljJbkuLrlsY/luZXlnZDmoIfns7sKICAgICAgZnVuY3Rpb24gZ2VvVHJhbnNUb1BpeGVsKGdlb20pIHsKICAgICAgICBjb25zdCBwb2x5Z29uQm94ID0gdHVyZi5iYm94KGdlb20pOwogICAgICAgIGNvbnN0IHNvdXRoV2VzdCA9IFtwb2x5Z29uQm94WzBdLCBwb2x5Z29uQm94WzFdXTsKICAgICAgICBjb25zdCBub3J0aEVhc3QgPSBbcG9seWdvbkJveFsyXSwgcG9seWdvbkJveFszXV07CiAgICAgICAgbGV0IHNvdXRoV2VzdFBvaW50UGl4ZWwgPSBtYXBPYmoubWFwLnByb2plY3Qoc291dGhXZXN0KTsKICAgICAgICBsZXQgbm9ydGhFYXN0UG9pbnRQaXhlbCA9IG1hcE9iai5tYXAucHJvamVjdChub3J0aEVhc3QpOwogICAgICAgIC8vIOWinuWkp2Jib3jnmoTmn6Xor6LojIPlm7QKICAgICAgICBzb3V0aFdlc3RQb2ludFBpeGVsID0gW3NvdXRoV2VzdFBvaW50UGl4ZWwueCAtIDUwLCBzb3V0aFdlc3RQb2ludFBpeGVsLnkgKyA1MF07CiAgICAgICAgbm9ydGhFYXN0UG9pbnRQaXhlbCA9IFtub3J0aEVhc3RQb2ludFBpeGVsLnggKyA1MCwgbm9ydGhFYXN0UG9pbnRQaXhlbC55IC0gNTBdOwogICAgICAgIHJldHVybiBbc291dGhXZXN0UG9pbnRQaXhlbCwgbm9ydGhFYXN0UG9pbnRQaXhlbF07CiAgICAgIH0KICAgICAgLy8g5a+55q+P5Liq5YiS5YiG5Ye65p2l55qEYmJveOi/m+ihjOWkhOeQhgogICAgICBmdW5jdGlvbiBjaHVuayhnZW9tKSB7CiAgICAgICAgLy8gbGV0IHdhc0xvYWRlZCA9IGZhbHNlOwogICAgICAgIC8vIGlmICh3YXNMb2FkZWQpIHJldHVybjsKICAgICAgICBjb25zdCBib3hGZWF0dXJlcyA9IG1hcE9iai5tYXAucXVlcnlSZW5kZXJlZEZlYXR1cmVzKGdlb1RyYW5zVG9QaXhlbChnZW9tKSwgewogICAgICAgICAgbGF5ZXJzOiBbImluaXRJbnNwTGluZUxheWVyIl0KICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhib3hGZWF0dXJlcywgJ2JveEZlYXR1cmVzJyk7CiAgICAgICAgbGV0IHRlbXBQaXBlTGlzdCA9IFtdOwogICAgICAgIGJveEZlYXR1cmVzLmZvckVhY2goZmVhdCA9PiB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBjb25zdCByZXN1bHQgPSB0dXJmLmludGVyc2VjdChmZWF0Lmdlb21ldHJ5LCBnZW9tZXRyeSk7CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHR1cmYuYm9vbGVhbkRpc2pvaW50KGZlYXQuZ2VvbWV0cnksIGdlb21ldHJ5KTsKICAgICAgICAgICAgLy8g5aaC5p6c5p+l5Ye655qE6KaB57Sg5LiO55yf5a6e55qE6IyD5Zu055u45Lqk5LiU5rKh5pyJ6KKr5beh5qOA6L+H77yM5YiZ5pS55Y+Y5YW254q25oCBLOW5tuiusOW9leWFtuWFs+mUruWtlwogICAgICAgICAgICBpZiAoIXJlc3VsdCAmJiAhZmVhdC5zdGF0ZS5pc0luc3ApIHsKICAgICAgICAgICAgICBtYXBPYmoubWFwLnNldEZlYXR1cmVTdGF0ZSh7CiAgICAgICAgICAgICAgICBzb3VyY2U6IGZlYXQuc291cmNlLAogICAgICAgICAgICAgICAgaWQ6IGZlYXQuaWQKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBpc0luc3A6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBsZXQgZGF0ZSA9IHRoYXQuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7CiAgICAgICAgICAgICAgdGVtcFBpcGVMaXN0LnB1c2goewogICAgICAgICAgICAgICAgaW5zcERhdGU6IGRhdGUsCiAgICAgICAgICAgICAgICBwaXBlSWQ6IGZlYXQuaWQsCiAgICAgICAgICAgICAgICBleHQzOiBmZWF0LnByb3BlcnRpZXMuYml6VHlwZSwKICAgICAgICAgICAgICAgIHBpcGVMZW5ndGg6IGZlYXQucHJvcGVydGllc1snbGVuZ3RoJ10gfHwgMCwKICAgICAgICAgICAgICAgIHRhc2tJZDogdGhhdC4kcm91dGUucXVlcnkudGFza0lkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gZm9yIChsZXQgaXQgb2YgdGVtcFBpcGVMaXN0KSB7CiAgICAgICAgICAgICAgLy8gICBpZiAoaXQucGlwZUlkICE9IGZlYXQuaWQpIHsKICAgICAgICAgICAgICAvLyAgICAgdGVtcFBpcGVMaXN0LnB1c2goewogICAgICAgICAgICAgIC8vICAgICAgIGluc3BEYXRlOiBkYXRlLAogICAgICAgICAgICAgIC8vICAgICAgIHBpcGVJZDogZmVhdC5pZCwKICAgICAgICAgICAgICAvLyAgICAgICBwaXBlTGVuZ3RoOiBmZWF0LnByb3BlcnRpZXNbJ2xlbmd0aCddIHx8IDAsCiAgICAgICAgICAgICAgLy8gICAgICAgdGFza0lkOiB0aGF0LiRyb3V0ZS5xdWVyeS50YXNrSWQKICAgICAgICAgICAgICAvLyAgICAgfSkKICAgICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0ZW1wUGlwZUxpc3QubGVuZ3RoID4gMCAmJiByZWNvcmRJbnNwTGluZSh0ZW1wUGlwZUxpc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfnrqHnur/kuIrkvKDmiJDlip8nKTsKICAgICAgICAgICAgYnVzLiRlbWl0KCd1cGRhdGVEYXRhJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygn5LiK5Lyg5aSx6LSl55qEdGVtcFBpcGVMaXN0OiAnLCB0ZW1wUGlwZUxpc3QpOwogICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVkUGlwZUlkTGlzdC5wdXNoKC4uLnRlbXBQaXBlTGlzdCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gd2FzTG9hZGVkID0gdHJ1ZTsKICAgICAgICAvLyBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCdzb3VyY2VkYXRhJywgZnVuY3Rpb24gKCkgewogICAgICAgIC8vIH0pCiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2IoZmVhdHVyZXMpIHsKICAgICAgICBpZiAoZmVhdHVyZXMubGVuZ3RoID4gMCAmJiB0aGF0LmlzT25Mb2FkZWQoKSkgewogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGNodW5rKGZlYXR1cmVzLnNoaWZ0KCkpOwogICAgICAgICAgICBjYihmZWF0dXJlcyk7CiAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0KICAgICAgfQogICAgICBjYihbZ2VvbWV0cnldKTsKICAgIH0sCiAgICBmaW5kSGFkSW5zcEZlYXR1cmUoKSB7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAocmVjb3JkRmVhdHVyZXMubGVuZ3RoIDw9IDApIHsKICAgICAgICAgICAgcmVzb2x2ZShbXSk7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZGF0YSA9IFsuLi5uZXcgU2V0KHJlY29yZEZlYXR1cmVzKV07CiAgICAgICAgICBsZXQgZmlsdGVyRGF0YSA9IFsiaW4iLCAiZ3VpZCJdOwogICAgICAgICAgZGF0YS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBmaWx0ZXJEYXRhLnB1c2goZGF0YVtpbmRleF0pOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0aGF0LmlzT25Mb2FkZWQoKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgicmFuZ2VQaXBlVmVjdG9yIikpIHsKICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uY2UoImRhdGEiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjb25zdCBib3hGZWF0dXJlcyA9IG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucXVlcnlTb3VyY2VGZWF0dXJlcygicmFuZ2VQaXBlVmVjdG9yIiwgewogICAgICAgICAgICAgICAgICBzb3VyY2VMYXllcjogImxpbmUiLAogICAgICAgICAgICAgICAgICBmaWx0ZXI6IGZpbHRlckRhdGEKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYm94RmVhdHVyZXMuZm9yRWFjaChmZWF0ID0+IHsKICAgICAgICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRGZWF0dXJlU3RhdGUoewogICAgICAgICAgICAgICAgICAgIHNvdXJjZTogInJhbmdlUGlwZVZlY3RvciIsCiAgICAgICAgICAgICAgICAgICAgc291cmNlTGF5ZXI6ICJsaW5lIiwKICAgICAgICAgICAgICAgICAgICBpZDogZmVhdC5pZAogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgaW5zcDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmVzb2x2ZShib3hGZWF0dXJlcyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOagueaNrumAn+W6puaUueWPmOW3oeajgOeuoee6v+minOiJsgogICAgYXN5bmMgY2hhbmdlSW5zcExpbmVTb3VyY2VCeVNwZWVkKHBvc2l0aW9uKSB7CiAgICAgIGNvbnN0IGNvb3JkID0gW3BhcnNlRmxvYXQocG9zaXRpb24ubG9uZ2l0dWRlKSwgcGFyc2VGbG9hdChwb3NpdGlvbi5sYXRpdHVkZSldOwogICAgICAvLyBjb25zdCBjb29yZCA9IFsxMTUuOTQ2NjM4NzQxODMxNCwgMzkuMDY2Mzg5MTY1MDkyNDNdIC8vIOa1i+ivlQogICAgICBjb25zdCBwb2ludCA9IHR1cmYucG9pbnQoY29vcmQpOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICh0aGF0LmlzT25Mb2FkZWQoKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgiaW5zcFVzZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmlzU291cmNlTG9hZGVkKCJpbnNwVXNlciIpKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICBsZXQgY2hhbmdlTGluZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzdGFydFJlY29yZExpbmVzIik7CiAgICAgICAgICAgIC8vIGlmIChjaGFuZ2VMaW5lID09ICdzdGFydCcpIHsKICAgICAgICAgICAgaWYgKHRydWUpIHsKICAgICAgICAgICAgICAvLyDmlLnlj5jlkajlm7TopoHntKDnmoTnirbmgIEKICAgICAgICAgICAgICBsZXQgYnVmZmVyZWQgPSB0dXJmLmJ1ZmZlcihwb2ludCwgdGhhdC4kcm91dGUucXVlcnkudGFza1R5cGUgPT0gJ+S6uuW3oScgPyAwLjAyMCA6IDAuMDUwLCB7CiAgICAgICAgICAgICAgICB1bml0OiAna2lsb21ldGVycycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGF0LmNoYW5nZUluc3BMaW5lU3RhdGUoYnVmZmVyZWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9LAogICAgLy8g5paw5aKe5LiK5oql5LqL5Lu2bWFya2VyCiAgICBhZGRSZXBvcnRFdmVudE1hcmtlcihwb3NpdGlvbiwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CiAgICAgIGNvbnN0IHNyYyA9IHJlcXVpcmUoYEAvYXNzZXRzL2ltZy9sZWdlbmQvZXZlbnRQb2ludC5wbmdgKTsKICAgICAgLy8g5aaC5p6c5a2Y5ZyoaWTkuLpldmVudFBvaW50TWFya2Vy55qE5YWD57Sg77yM5YiZ5Yig6Zmk5q2k5YWD57Sg6YeN5paw5Yib5bu677yM5L+d5oyB5YWo5bGA5Y+q5pyJ5LiA5Liq5q2k5YWD57SgCiAgICAgIGxldCBjdXJyZW50RWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV2ZW50UG9pbnRNYXJrZXIiKTsKICAgICAgaWYgKGN1cnJlbnRFbGUpIHsKICAgICAgICBjdXJyZW50RWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY3VycmVudEVsZSk7CiAgICAgIH0KICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBlbGUuaW5uZXJIVE1MID0gYAogICAgICAgICAgPGltZyBpZD0iZXZlbnRQb2ludE1hcmtlciIgc3JjPSIke3NyY30iIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+CiAgICAgICAgYDsKICAgICAgbGV0IG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgIGVsZW1lbnQ6IGVsZSwKICAgICAgICBvZmZzZXQ6IFswLCAwXQogICAgICAgIC8vIGRyYWdnYWJsZTogdHJ1ZQogICAgICB9KTsKICAgICAgbWFya2VyLnNldExuZ0xhdChwb3NpdGlvbikuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CgogICAgICAvLyBmdW5jdGlvbiBvbkRyYWdFbmQoKSB7CiAgICAgIC8vICAgbGV0IGxuZ0xhdCA9IG1hcmtlci5nZXRMbmdMYXQoKTsKICAgICAgLy8gICBjb25zb2xlLmxvZygib25EcmFnRW5kPT0+IiwgbG5nTGF0KTsKICAgICAgLy8gICBjb25zdCBwb3MgPSBbbG5nTGF0LmxuZywgbG5nTGF0LmxhdF07CiAgICAgIC8vICAgYnVzLiRlbWl0KCJldmVudE1hcmtlclBvc2l0aW9uIiwgcG9zKTsKICAgICAgLy8gfQogICAgICAvLyBtYXJrZXIub24oJ2RyYWdlbmQnLCBvbkRyYWdFbmQpOwogICAgICAvLyDmm7TmjaLpgInkvY3nva7nmoTkuqTkupLpgLvovpEKICAgICAgZnVuY3Rpb24gb25Ub3VjaEVuZCgpIHsKICAgICAgICBsZXQgbG5nTGF0ID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRDZW50ZXIoKTsKICAgICAgICBjb25zdCBwb3MgPSBbbG5nTGF0LmxuZywgbG5nTGF0LmxhdF07CiAgICAgICAgYnVzLiRlbWl0KCJldmVudE1hcmtlclBvc2l0aW9uIiwgcG9zKTsKICAgICAgfQogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpOwogICAgICBmdW5jdGlvbiBvblRvdWNoTW92ZSgpIHsKICAgICAgICBsZXQgbG5nTGF0ID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRDZW50ZXIoKTsKICAgICAgICBjb25zdCBwb3MgPSBbbG5nTGF0LmxuZywgbG5nTGF0LmxhdF07CiAgICAgICAgbWFya2VyLnNldExuZ0xhdChwb3MpOwogICAgICB9CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub24oJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlKTsKICAgICAgZnVuY3Rpb24gb25Nb3ZlRW5kKCkgewogICAgICAgIGxldCBsbmdMYXQgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldENlbnRlcigpOwogICAgICAgIGNvbnN0IHBvcyA9IFtsbmdMYXQubG5nLCBsbmdMYXQubGF0XTsKICAgICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvcyk7CiAgICAgIH0KICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbignbW92ZWVuZCcsIG9uTW92ZUVuZCk7CiAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub2ZmKCdjbGljaycsIHRoaXMuY2FsbGJhY2spOwogICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCdjbGljaycsIGNhbGxiYWNrKTsKICAgICAgfQogICAgfSwKICAgIGFkZEFsbFZpZXdzTGF5ZXJzKHR5cGUgPSAn5L6b5rC0JykgewogICAgICBjb25zdCBsYXllciA9IGxheWVyc1t0eXBlXTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbignY2xpY2snLCB0aGlzLmxheWVyQ2xpY2sxKTsKICAgICAgKGxheWVyIHx8IFtdKS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmICghbWFwT2JqLm1hcC5nZXRMYXllcihpdGVtLmxheWVyLmlkKSkgewogICAgICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcihpdGVtLmxheWVyKTsKICAgICAgICAgIGlmIChpdGVtLm1hcmtJZCAmJiAhbWFwT2JqLm1hcC5nZXRMYXllcihpdGVtLm1hcmtJZC5pZCkpIG1hcE9iai5tYXAuYWRkTGF5ZXIoaXRlbS5tYXJrSWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVtb3ZlQWxsVmlld3NMYXllcnModHlwZSA9ICfkvpvmsLQnKSB7CiAgICAgIGNvbnN0IGxheWVyID0gbGF5ZXJzW3R5cGVdOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9mZignY2xpY2snLCB0aGlzLmxheWVyQ2xpY2sxKTsKICAgICAgKGxheWVyIHx8IFtdKS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChtYXBPYmoubWFwLmdldExheWVyKGl0ZW0ubGF5ZXIuaWQpKSB7CiAgICAgICAgICBtYXBPYmoubWFwLnJlbW92ZUxheWVyKGl0ZW0ubGF5ZXIuaWQpOwogICAgICAgICAgaWYgKGl0ZW0ubWFya0lkICYmIG1hcE9iai5tYXAuZ2V0TGF5ZXIoaXRlbS5tYXJrSWQuaWQpKSB0aGlzbWFwLnJlbW92ZUxheWVyKGl0ZW0ubWFya0lkLmlkKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNldEFsbFZpZXdzTGF5ZXJzVmlzaWJsZSh0eXBlID0gJ+S+m+awtCcsIHZpc2libGUgPSAndmlzaWJsZScpIHsKICAgICAgY29uc3QgbGF5ZXIgPSBsYXllcnNbdHlwZV07CiAgICAgIChsYXllciB8fCBbXSkuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpZiAobWFwT2JqLm1hcC5nZXRMYXllcihpdGVtLmxheWVyLmlkKSkgewogICAgICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eShpdGVtLmxheWVyLmlkLCAndmlzaWJpbGl0eScsIHZpc2libGUpOwogICAgICAgICAgaWYgKGl0ZW0ubWFya0lkICYmIG1hcE9iai5tYXAuZ2V0TGF5ZXIoaXRlbS5tYXJrSWQuaWQpKSBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KGl0ZW0ubWFya0lkLmlkLCAndmlzaWJpbGl0eScsIHZpc2libGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["gisDomain","actions","bus","showProperties2","Vue","mapboxgl","countTimePop","layers","axios","border","API","baseUrl","Toast","Popup","PopupItem","extend","turf","recordInspLine","CountTimePop","layer_yuhang_ws","layer_yuhang_gs","layer_yuhang_ys","layer_yuhang_ys_icon","layer_yuhang_ws_icon","layer_yuhang_gs_icon","paint","LayerType","mapObj","map","mapInstance","recordFeatures","name","data","hasListen","uploadFiledPipeIdList","currentPoint","GSL","YSL","WSL","baseMapurl","bzLayerUrls","timer","gsUrl","ysUrl","wsUrl","swLayer","vm","deviceLayers","factoryNameMarkers","chooseDevice","diyPoint","marker","isOnLoad","event","databaseNames","gsDatabaseNames","ysDatabaseNames","wsDatabaseNames","databaseNames1","gsDatabaseNames1","ysDatabaseNames1","wsDatabaseNames1","gsLayers","ysLayers","wsLayers","recordTimer","currentKeyPoint","currentEmeMarker","callback","dataNames","navMarkers","featuresLine","areaMarkers","markersLinePoints","markersAreaPoints","allDistance","navigatorMarker","navigatorMarker2","lineMarkers","areaMarker","firstPoint","boxFeatures","multiTaskSAL","dictionary","eventTypeList","accessToken","$storage","get","formToken","created","url","process","env","VUE_APP_THIRD_REQUEST_URL","method","params","token","headers","Authorization","then","res","status","resultData","mounted","methods","mapLoad","getEventTypeList","length","detailList","filter","item","code","indexOf","eventCodeList","forEach","concat","dictionaryDetailList","zh","title","isOnLoaded","addCommonLayer","addSuperStyleData","addPipeLayer","VUE_APP_ENV","VUE_APP_MAP_REQUEST_URL","JSON","parse","combineJsonData","Object","keys","sources","key","temp","tiles","replaceAll","addSource","layer","console","log","layout","visibility","defaultBaseLayers","push","addLayer","catch","e","finally","jsonData","addLineGeoLayer","id","type","source","addKeyPointLayer","pipeSettings","setting","getAction","maxzoom","addUser","features","getUserPosition","point","getPosition","setUserPosition","position","setSourceData","flyTo","zoom","coords","chooseFactory","factory","fac","fac0","remove","label","$api","orgNo","value","arr","iteration","shift","coordsArr","geom","coordinates","center","getCenter","ele","document","createElement","innerHTML","companyName","addMarker","makeLocation","paintingRange","lineDasharray","randomString","len","$chars","maxPos","pwd","i","charAt","Math","floor","random","initMarker","w","h","src","style","width","height","mapOnLoad","setInterval","clearInterval","addDeviceLayersClickEvent","that","isSW","layerId","on","layerClick1","layerClick","removeDeviceLayersClickEvent","off","index","findIndex","properties","device","operationMode","feature","geometry","splice","$emit","queryRenderedFeatures","x","y","deviceid","includes","display","location","location2","echoWxDeveice","addEventMarker","require","newMarker","element","setLngLat","setPopup","newPopup","offset","closeButton","setHTML","addTo","togglePopup","changeMap","changeBaseMap","addOrganizerMarker","distance","updateOrganizerPosition","getPopup","removeOrganizerMarker","startAddDiyPoint","AddDiyPoint","addDiyrMarker","lngLat","lng","lat","removeDiyMarker","endDiyPoint","addNavigatorPoint","addEventListener","val","ele2","marker2","addNavigatorPointsLine","getLayer","removeLayer","getSource","removeSource","Number","toFixed","addNavigatorPointsArea","polygon","area","addNavigationControl","addControl","NavigationControl","addFullscreenControl","FullscreenControl","addScaleControl","ScaleControl","clearNavigatorPoint","echoYhDeveice","uncured","curing","makePosition","bbox","fitBounds","padding","top","bottom","left","right","linear","getDataWithSpatial","datasetNames","getDataWithSpatialAtt","sql","getDataWithSql","showPology","checkPosition","tempFeature","find","inside","businessType","ptsWithin","within","featureCollection","setBuffer","radius","buffered","buffer","intersect","pologyBack","setLayoutProperty","removeAllYH","removeGroupLayer","getDataWithSpatialAndPipeLevel","inspBusinessType","pipeLevel","isSupply","drawBuffer","unit","addBufferLayer","addInspLayer","addRangeLayer","idx","addRangeMVT","removeRangeMVT","url_config","taskId","promoteId","setLineGeoSource","setRangeLayer","rangeList","ifEmergency","range","undefined","calibers","caliberVOS","endDate","signInBuffer","feat","message","duration","setKeyPointLayer","addKeyPointMarker","ifDetail","engGeom","engNum","engId","getElementById","clickKeyPoint","stopPropagation","removeKeyPointMarker","ids","currentEle","parentNode","removeChild","changeKeyPointMarker","src2","removeInspEmeMarker","addInspEmeMarker","markerHTML","countTime","propsData","restTime","$mount","clickEmeMarker","addInspEventMarker","eventType","addInspEventLayer","loadImage","error","image","hasImage","addImage","addEventObjMarker","pointType","gridObj","pop","stringify","$route","query","gridId","gridName","gridManager","layerID","layerType","road_name","manhole_code","gate_code","outlet_code","comb_code","valve_code","pump_station_code","plant_code","pump_code","fire_cock_code","start_code","end_code","bigType","smallType","pipe_type","manhole_type","deviceCode","isDevice","fun","goToDetail","$nextTick","$router","msg","from","removeEventObjMarker","addInspBufferData","devices","handleInspData","getInspDataInRange","featuresData","paramsObj","fieldNames","fieldValues","lxnIndex","it","pipeIndex","$set","ID","tempGeometry","points","getInspDataInRangeTile","pipeType","geomPoint","inspUser","unInspLineSource","isSourceLoaded","sourceData","_data","obj","reduce","next","changeInspLineSource","fromSource","toSource","fromSourceData","toSourceData","fromData","every","some","toData","setAllInspLineSource","addInspRecordLineSource","addInspRecordTileLineSource","completion","loading","Set","flag","setTimeout","filterData","querySourceFeatures","state","isInsp","setFeatureState","setRecordData","device_id","equipmentId","geomTemp","yhType","iconName","getIconName","features2","setHotData","hotdata","String","getRangs","getGridRangs","ifMulti","task","setRangFilter","done","setFilter","rangClick","approveStatus","listLicik","newData","new","coord","Array","pos1","pos2","lineString","color","lineWidth","circleRadius","boldBorder","borderWidth","isRepaint","line","getArrayGeo","multiLineString","polygonToLine","multiPolygon","f","addRangeLayer2","num","bl","removeRangeLayer","reset","multipolygon","bboxPolygon","v2","LngLatBounds","changePipeTileLayer","slice","addInspUserLayer","changePipeTileLayerByBusiness","changeBZLayer","changeLayerByBusiness","gs","ys","ws","gsLayerType","wsLayerType","ysLayerType","generateId","getDirection","window","setRotate","setInspUserPosition","parseFloat","longitude","latitude","changeLine","localStorage","getItem","setCenter","bearing","alpha","changeInspLineState","geoTransToPixel","polygonBox","southWest","northEast","southWestPointPixel","project","northEastPointPixel","chunk","tempPipeList","result","booleanDisjoint","date","$dayjs","format","inspDate","pipeId","ext3","bizType","pipeLength","cb","findHadInspFeature","Promise","resolve","reject","once","sourceLayer","insp","changeInspLineSourceBySpeed","taskType","addReportEventMarker","onTouchEnd","pos","onTouchMove","onMoveEnd","addAllViewsLayers","markId","removeAllViewsLayers","thismap","setAllViewsLayersVisible","visible"],"sources":["E:/ty_project/xasw-yy/revenue/xasw-mobile/src/views/inspectMap/mixins/mixins.js"],"sourcesContent":["import { gisDomain } from '../settings.js';\r\nimport * as actions from '../utils/action.js';\r\nimport bus from \"../utils/Bus.js\";\r\nimport { showProperties2 } from \"@/common/properties.js\";\r\nimport Vue from 'vue';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport countTimePop from \"../components/countTimePop.vue\";\r\nimport layers from './layerConfig';\r\nimport axios from 'axios';\r\nimport border from '../utils/border.json';\r\nimport API from '@/common/config.js';\r\nimport baseUrl from \"@/common/config.js\"\r\nimport { Toast } from 'fawkes-mobile-lib';\r\nimport Popup from '../components/popup.vue'\r\nconst PopupItem = Vue.extend(Popup)\r\nimport * as turf from '@turf/turf'\r\nimport { recordInspLine } from '../../inspectionManage/api.js'\r\nconst CountTimePop = Vue.extend(countTimePop);\r\nconst layer_yuhang_ws = [\r\n  {\r\n    \"id\": \"yuhangws_ws_wsg_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"filter\": ['all', ['has', 'caliber'], ['any', ['==', ['get', 'flowdir'], '0'], ['==', ['get', 'flowdir'], '1']]],\r\n    \"source\": \"yuhang_ws_wsg\",\r\n    \"source-layer\": \"ws_wsg\",\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      \"icon-image\": \"jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(145, 80, 9, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_wsg\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_ws_wsg\",\r\n    \"source-layer\": \"ws_wsg\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(145, 80, 9, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_pjg_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"source\": \"yuhang_ws_pjg\",\r\n    \"filter\": ['any', ['==', ['get', 'flowdir'], '0'], ['==', ['get', 'flowdir'], '1']],\r\n    \"source-layer\": \"ps_pjg\",\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      \"icon-image\": \"pjgjt\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"#F262FF\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_pjg\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_ws_pjg\",\r\n    \"source-layer\": \"ps_pjg\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"#F262FF\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_wsgwyj\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_ws_wsgwyj\",\r\n    \"source-layer\": \"ws_wsgwyj\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"#de5a03\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_wsgwyj_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"source\": \"yuhang_ws_wsgwyj\",\r\n    \"filter\": ['any', ['==', ['get', 'flowdir'], '0'], ['==', ['get', 'flowdir'], '1']],\r\n    \"source-layer\": \"ws_wsgwyj\",\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      \"icon-image\": \"wyjgxjt\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"#de5a03\", \"icon-color\": \"#de5a03\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  }\r\n];\r\nconst layer_yuhang_gs = [\r\n  {\r\n    \"id\": \"yuhanggs_gs_75mmyxgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_75mm\",\r\n    \"source-layer\": \"gs_75mmyxgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_75_300mmgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_75-300mm\",\r\n    \"source-layer\": \"gs_75_300mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_300_500mmgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_300-500mm\",\r\n    \"source-layer\": \"gs_300_500mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 13,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_500_800mmgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_500-800mm\",\r\n    \"source-layer\": \"gs_500_800mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 12,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_800mmysgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_800mm\",\r\n    \"source-layer\": \"gs_800mmysgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_ysgx\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_ysgx\",\r\n    \"source-layer\": \"gs_ysgx\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(168, 168, 0, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  // {\r\n  //     \"id\": \"yuhanggs_gs_fqgx\",\r\n  //     \"type\": \"line\",\r\n  //     \"source\": \"yuhang_gs_fqgx\",\r\n  //     \"source-layer\": \"gs_fqgx\",\r\n  //     \"maxzoom\":24,\r\n  //     \"minzoom\": 15,\r\n  //     \"layout\": { \"visibility\": \"visible\" },\r\n  //     \"paint\": {\r\n  //         \"line-color\": \"rgba(168, 168, 0, 1)\",\r\n  //         \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n  //     }\r\n  // },\r\n  {\r\n    \"id\": \"yuhanggs_gs_75mmyxgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_75mm\",\r\n    \"source-layer\": \"gs_75mmyxgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_75_300mmgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_75-300mm\",\r\n    \"source-layer\": \"gs_75_300mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_300_500mmgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_300-500mm\",\r\n    \"source-layer\": \"gs_300_500mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 13,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_500_800mmgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_500-800mm\",\r\n    \"source-layer\": \"gs_500_800mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 12,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_800mmysgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_800mm\",\r\n    \"source-layer\": \"gs_800mmysgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  // {\r\n  //     \"id\": \"yuhanggs_gs_gsqtgjgd_symbol\",\r\n  //     \"type\": \"symbol\",\r\n  //     \"source\": \"yuhang_gs_gsqtgjgd\",\r\n  //     \"source-layer\": \"gs_gsqtgjgd\",\r\n  //     \"maxzoom\":24,\r\n  //     \"minzoom\": 16,\r\n  //     \"layout\": {\r\n  //         \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n  //         \"symbol-placement\": \"line\",\r\n  //         \"symbol-spacing\": [\r\n  //             'interpolate',\r\n  //             ['linear'],\r\n  //             ['zoom'],\r\n  //             10,\r\n  //             5,\r\n  //             15,\r\n  //             50,\r\n  //             18,\r\n  //             100\r\n  //         ],\r\n  //         \"icon-allow-overlap\": true,\r\n  //         \"icon-rotation-alignment\": \"map\",\r\n  //         \"text-rotate\": 0,\r\n  //         \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n  //         \"text-size\": 16,\r\n  //         \"text-allow-overlap\": true,\r\n  //         \"text-ignore-placement\": true,\r\n  //         \"text-pitch-alignment\": \"map\",\r\n  //         \"text-rotation-alignment\": \"map\",\r\n  //         \"text-anchor\": \"center\",\r\n  //         \"text-offset\": [0, 1],\r\n  //         \"icon-padding\": 2,\r\n  //         \"icon-offset\": [0, -5],\r\n  //         \"text-padding\": 0,\r\n  //         \"icon-text-fit\": \"none\",\r\n  //         // \"icon-image\": \"GS-jiantou\",\r\n  //         \"text-max-width\": 10,\r\n  //         \"icon-ignore-placement\": true,\r\n  //         \"symbol-z-order\": \"auto\",\r\n  //         \"text-justify\": \"center\",\r\n  //         \"text-writing-mode\": [],\r\n  //         \"icon-size\": 1.6,\r\n  //         \"visibility\": \"visible\"\r\n  //     },\r\n  //     \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\",'text-halo-color':\"#ffffff\",'text-halo-width':1 }\r\n  // },\r\n  {\r\n    \"id\": \"yuhanggs_gs_ysgx_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_ysgx\",\r\n    \"source-layer\": \"gs_ysgx\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 12,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n];\r\nconst layer_yuhang_ys = [\r\n  {\r\n    \"id\": \"yuhangys_ys_ysg\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_ys_ysg\",\r\n    \"source-layer\": \"ys_ysg\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(39, 54, 155, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  }, {\r\n    \"id\": \"yuhangys_ys_ysg_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ys_ysg\",\r\n    \"source-layer\": \"ys_ysg\",\r\n    \"filter\": ['any', ['==', ['get', 'flowdir'], '0'], ['==', ['get', 'flowdir'], '1']],\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      \"icon-image\": \"YS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(39, 54, 155, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  }\r\n];\r\nconst layer_yuhang_ys_icon = [\r\n  {\r\n    //雨水口\r\n    \"id\": \"yuhangws_ys_ysk\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ys_ysk\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"source-layer\": \"ys_ysk\",\r\n    \"layout\": {\r\n      \"icon-image\": \"yushui-yushuikou\",\r\n      \"icon-size\": 1\r\n    }\r\n  }, {\r\n    //雨水井\r\n    \"id\": \"yuhangys_ys_ysjcj\",\r\n    \"type\": \"symbol\",\r\n    \"minzoom\": 15,\r\n    \"maxzoom\": 24,\r\n    \"source\": \"yuhang_ys_ysj\",\r\n    \"source-layer\": \"ys_ysj\",\r\n    \"layout\": {\r\n      \"icon-image\": \"yushui-yushuijing\",\r\n      \"icon-size\": 1\r\n    },\r\n    // 'paint':{\r\n    //     'circle-color':\"red\",\r\n    //     'circle-radius':3\r\n    // }\r\n  }, {\r\n    //节点\r\n    \"id\": \"yuhangys_ys_ysjd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ys_ysgd\",\r\n    \"source-layer\": \"ys_ysgd\",\r\n    \"layout\": {\r\n      \"icon-image\": \"雨水\",\r\n      \"icon-size\": 1\r\n    }\r\n  }, {\r\n    //雨水排放口\r\n    \"id\": \"yuhangys_ys_yspfk\",\r\n    \"type\": \"symbol\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"source\": \"yuhang_ys_yspfk\",\r\n    \"source-layer\": \"ys_yspfk\",\r\n    \"layout\": {\r\n      \"icon-image\": \"yushui-paifangkou\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  // {   \r\n  //     //监测点\r\n  //     \"id\": \"yuhangys_ys_ysjcd\",\r\n  //     \"type\": \"symbol\",\r\n  //     \"source\": \"yuhang_ys_ysjcd\",\r\n  //     \"maxzoom\":24,\r\n  //     \"minzoom\": 15,\r\n  //     \"source-layer\": \"ys_ysjcd\",\r\n  //     \"layout\":{\r\n  //         \"icon-image\":\"yushui-jiancedian\",\r\n  //         \"icon-size\":1\r\n  //     }\r\n  // },\r\n  {\r\n    //雨水泵站\r\n    \"id\": \"yuhangys_ys_ysbz\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ys_ysbz\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"source-layer\": \"ys_ysbz\",\r\n    'filter': [\r\n      'any',\r\n      ['all', ['==', ['get', 'display_level'], 1], ['>=', ['zoom'], 11]],\r\n      ['all', ['==', ['get', 'display_level'], 2], ['>=', ['zoom'], 12]],\r\n      ['all', ['==', ['get', 'display_level'], 3], ['>=', ['zoom'], 13]]\r\n    ],\r\n    \"layout\": {\r\n      \"icon-image\": \"yushui-bengzhan\",\r\n      \"icon-size\": 1,\r\n      \"text-field\": [\"get\", \"name\"],\r\n      \"text-offset\": [0, 1],\r\n      \"text-size\": 10,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n    }\r\n  }\r\n]\r\nconst layer_yuhang_ws_icon = [\r\n  {\r\n    \"id\": \"yuhangws_ws_wsc\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsc\",\r\n    \"source-layer\": \"ws_wsc\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"layout\": {\r\n      \"visibility\": \"visible\",\r\n      \"icon-image\": \"wushui-shuichang\",\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-ignore-placement\": true,\r\n      \"icon-size\": 1,\r\n      \"text-field\": [\"get\", \"name\"],\r\n      \"text-offset\": [0, 1],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n    }\r\n  },\r\n  {\r\n    //闸门\r\n    \"id\": \"yuhangws_ws_wszm\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wszm\",\r\n    \"source-layer\": \"ws_wszm\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 14,\r\n    \"layout\": {\r\n      \"icon-rotate\": 360,\r\n      \"icon-image\": \"wushui-zhamen\",\r\n    }\r\n  },\r\n  {\r\n    //污水口\r\n    \"id\": \"yuhangws_ws_wsk\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsk\",\r\n    \"source-layer\": \"ws_wsk\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-wushuikou\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //管点\r\n    \"id\": \"yuhangws_ws_wsgd\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsgd\",\r\n    \"source-layer\": \"ws_wsgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //排放口\r\n    \"id\": \"yuhangws_ws_wspfk\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wspfk\",\r\n    \"source-layer\": \"ws_wspfk\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-paifangkou\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //泵站\r\n    \"id\": \"yuhangws_ws_wsbz\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsbz\",\r\n    \"source-layer\": \"ws_wsbz_with_iot\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    'filter': [\r\n      'any',\r\n      ['all', ['==', ['get', 'display_level'], 1], ['>=', ['zoom'], 11]],\r\n      ['all', ['==', ['get', 'display_level'], 2], ['>=', ['zoom'], 12]],\r\n      ['all', ['==', ['get', 'display_level'], 3], ['>=', ['zoom'], 13]]\r\n    ],\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-bengzhan\",\r\n      \"icon-size\": 1,\r\n      \"text-field\": [\"get\", \"name\"],\r\n      \"text-offset\": [0, 1],\r\n      \"text-size\": 10,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n    }\r\n  },\r\n  {\r\n    //阀门\r\n    \"id\": \"yuhangws_ws_wsfm\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsfm\",\r\n    \"source-layer\": \"ws_wsfm\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-famen\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //污水井\r\n    \"id\": \"yuhangws_ws_wsj\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsj\",\r\n    \"source-layer\": \"ws_wsj\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-wushuijing\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //监测点\r\n    \"id\": \"yuhangws_ws_wsjcd\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsjcd\",\r\n    \"source-layer\": \"ws_wsjcd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-jiancedian\",\r\n      \"icon-size\": 1\r\n    }\r\n  }\r\n]\r\nconst layer_yuhang_gs_icon = [{\r\n  //供水泵站\r\n  \"id\": \"yuhanggs_gs_gsbz\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_gsbz\",\r\n  \"source-layer\": \"gs_jyd\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 10,\r\n  'filter': [\r\n    'any',\r\n    ['all', ['==', ['get', 'display_level'], 1], ['>=', ['zoom'], 11]],\r\n    ['all', ['==', ['get', 'display_level'], 2], ['>=', ['zoom'], 12]],\r\n    ['all', ['==', ['get', 'display_level'], 3], ['>=', ['zoom'], 13]]\r\n  ],\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-bengzhan\",\r\n    \"icon-size\": 1,\r\n    \"text-field\": [\"get\", \"name\"],\r\n    \"text-offset\": [0, 1],\r\n    \"text-size\": 10,\r\n    \"text-allow-overlap\": true,\r\n    \"text-ignore-placement\": true,\r\n    \"text-pitch-alignment\": \"map\",\r\n    \"text-rotation-alignment\": \"map\",\r\n    \"text-anchor\": \"center\",\r\n  }\r\n},\r\n{\r\n  //供水阀门\r\n  \"id\": \"yuhanggs_gs_fm\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_fm\",\r\n  \"source-layer\": \"gs_fm\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 17,\r\n  \"layout\": {\r\n    \"icon-image\": [\r\n      'case',\r\n      ['==', ['get', 'display'], '减压阀'],\r\n      'gongshui-jianyafa',\r\n      'yibanfamen'\r\n    ],\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //自来水厂\r\n  \"id\": \"yuhanggs_gs_gsc\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_gsc\",\r\n  \"source-layer\": \"gs_gsc\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 10,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-shuichang\",\r\n    \"icon-size\": 1,\r\n    \"icon-allow-overlap\": true,\r\n    \"icon-ignore-placement\": true,\r\n    \"text-field\": [\"get\", \"name\"],\r\n    \"text-offset\": [0, 1],\r\n    \"text-size\": 16,\r\n    \"text-allow-overlap\": true,\r\n    \"text-ignore-placement\": true,\r\n    \"text-pitch-alignment\": \"map\",\r\n    \"text-rotation-alignment\": \"map\",\r\n    \"text-anchor\": \"center\",\r\n  },\r\n  paint: { 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n}, {\r\n  //水表箱\r\n  \"id\": \"yuhanggs_gs_sbx\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_sbx\",\r\n  \"source-layer\": \"gs_sbx\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 18,\r\n  \"layout\": {\r\n    \"icon-image\": \"shuibiaoxiangkuang\",\r\n    \"icon-size\": 1,\r\n    \"text-field\": [\r\n      'case',\r\n      ['to-boolean', [\"get\", \"metercnt\"]],\r\n      '0',\r\n      [\"get\", \"metercnt\"]\r\n    ],\r\n    \"text-size\": 12,\r\n    \"text-allow-overlap\": true,\r\n    \"text-ignore-placement\": true,\r\n    \"text-anchor\": \"center\",\r\n  },\r\n  paint: {\r\n    \"text-color\": '#399aea',\r\n  }\r\n},\r\n{\r\n  //监测点\r\n  \"id\": \"yuhanggs_gs_jcd\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_gsjcd\",\r\n  \"source-layer\": \"gs_monitor\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 14,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-jiancedian\",\r\n    \"icon-size\": 1,\r\n    \"text-offset\": [0, 1],\r\n    \"text-size\": 10,\r\n    \"text-allow-overlap\": true,\r\n    \"text-ignore-placement\": true,\r\n    \"text-pitch-alignment\": \"map\",\r\n    \"text-rotation-alignment\": \"map\",\r\n    \"text-anchor\": \"center\",\r\n  }\r\n},\r\n{\r\n  //节点\r\n  \"id\": \"yuhanggs_gs_jd\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_ljd\",\r\n  \"source-layer\": \"gs_ljd\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 18,\r\n  \"layout\": {\r\n    \"icon-image\": \"供水\",\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //消火栓\r\n  \"id\": \"yuhanggs_gs_xhs\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_xfs\",\r\n  \"source-layer\": \"gs_xfs\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 16,\r\n  \"layout\": {\r\n    \"icon-image\": \"xiaohuoshuan\",\r\n    \"icon-size\": 1\r\n  }\r\n},\r\n{\r\n  //排气阀\r\n  \"id\": \"yuhanggs_gs_pqf\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_pqf\",\r\n  \"source-layer\": \"gs_pqf\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 15,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-paiqifa\",\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //排污阀\r\n  \"id\": \"yuhanggs_gs_pwf\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_pwf\",\r\n  \"source-layer\": \"gs_pwf\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 15,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-paiwufa\",\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //排污口\r\n  \"id\": \"yuhanggs_gs_pwk\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_pwk\",\r\n  \"source-layer\": \"gs_pwk\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 15,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-paiwukou\",\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //预留口\r\n  \"id\": \"yuhanggs_gs_ylk\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_ylk\",\r\n  \"source-layer\": \"gs_ylk\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 15,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-yuliukou\",\r\n    \"icon-size\": 1\r\n  }\r\n},\r\n]\r\nconst LayerType = {\r\n  '供水': [layer_yuhang_gs, layer_yuhang_gs_icon],\r\n  '雨水': [layer_yuhang_ys, layer_yuhang_ys_icon],\r\n  '污水': [layer_yuhang_ws, layer_yuhang_ws_icon],\r\n}\r\nconst mapObj = {\r\n  map: null,\r\n  mapInstance: null\r\n}\r\nconst recordFeatures = []\r\nexport default {\r\n  name: \"mixins\",\r\n  data() {\r\n    return {\r\n      hasListen: false,\r\n      uploadFiledPipeIdList: [], // 上传失败的已巡检管线id\r\n      currentPoint: null,\r\n      GSL: [\r\n        \"case\",\r\n        [\r\n          \"any\",\r\n          [\"==\", [\"get\", \"SBLB\"], \"FM\"],\r\n          [\"==\", [\"get\", \"SBLB\"], \"PQF\"],\r\n          [\"==\", [\"get\", \"SBLB\"], \"PNF\"],\r\n        ],\r\n        \"ybfm\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"JYD\"],\r\n        \"gs-bz\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"PWK\"],\r\n        \"ybfm\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"XHS\"],\r\n        \"xhs\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"DB\"],\r\n        \"zdyh\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"JSD\"],\r\n        \"sbx\",\r\n        // ['==',['get', \"SBLB\"], '自来水厂'],'供水-水厂',\r\n        \"gs\",\r\n      ],\r\n      YSL: [\r\n        \"case\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"泵站\"],\r\n        \"ys-bz\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"排放口\"],\r\n        \"ys-pfk\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"雨水口\"],\r\n        \"ys-ysk\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"雨水井\"],\r\n        \"ys-ysj\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"监测点\"],\r\n        \"ys-jcd\",\r\n        \"ys\",\r\n      ],\r\n      WSL: [\r\n        \"case\",\r\n        [\r\n          \"any\",\r\n          [\"==\", [\"get\", \"SBLB\"], \"FM\"],\r\n          [\"==\", [\"get\", \"SBLB\"], \"污水阀门\"],\r\n          [\"==\", [\"get\", \"SBLB\"], \"P污水闸门NF\"],\r\n        ],\r\n        \"ybfm\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"泵站\"],\r\n        \"ws-bz\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"排放口\"],\r\n        \"ws-pfk\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"污水口\"],\r\n        \"ws-wsk\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"污水井\"],\r\n        \"ws-wsj\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"监测点\"],\r\n        \"ws-jcd\",\r\n        // ['==',['get', \"SBLB\"], '污水厂'], \"wushui-shuichang\",\r\n        \"ws\",\r\n      ],\r\n\r\n      baseMapurl: [\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuHangShuiWuDiTuQiePian/restjsr/v1/vectortile/maps/余杭水务底图切片/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-JianZhuHeLvDi/restjsr/v1/vectortile/maps/建筑和绿地/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuHangQuHangZhengQuHuaShiLiangWaPian/restjsr/v1/vectortile/maps/余杭区行政区划矢量瓦片/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuHangShuiWuLuWangShuiXiDiTuQiePian/restjsr/v1/vectortile/maps/余杭水务路网水系底图切片/style.json\",\r\n      ],\r\n      bzLayerUrls: [\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-GongShuiGuanXianBiaoZhu/restjsr/v1/vectortile/maps/供水管线标注/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuShuiGuanXianBiaoZhu2/restjsr/v1/vectortile/maps/雨水管线标注/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-WuShuiGuanXianBiaoZhu2/restjsr/v1/vectortile/maps/污水管线标注/style.json\",\r\n      ],\r\n      timer: [],\r\n      //供水矢量瓦片服务\r\n      gsUrl:\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-GongShui/restjsr/v1/vectortile/maps/供水/style.json\",\r\n      //雨水矢量瓦片服务\r\n      ysUrl:\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuShui/restjsr/v1/vectortile/maps/雨水/style.json\",\r\n      //污水矢量瓦片服务\r\n      wsUrl:\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-WuShui/restjsr/v1/vectortile/maps/污水/style.json\",\r\n\r\n      swLayer: {\r\n        '供水': [],\r\n        '雨水': [],\r\n        '污水': [],\r\n      },\r\n      vm: null,\r\n      deviceLayers: [],\r\n      factoryNameMarkers: [],\r\n\r\n      //选中设施\r\n      chooseDevice: [],\r\n\r\n      diyPoint: {},\r\n      //协办人\r\n      marker: null,\r\n      isOnLoad: false,\r\n      event: \"\",\r\n\r\n      databaseNames: ['供水:供水管道', '供水:T75mm以下管道', '供水:T800mm以上管道', '供水:T75_300mm管道', '供水:T300_500mm管道', '供水:T500_800mm管道', '供水:排气阀', '供水:排污阀', '供水:阀门', '网络分析:雨水管', '网络分析:雨水井', '网络分析:雨水泵站', '网络分析:雨水口', '网络分析:雨水排放口', '网络分析:雨水管点', '网络分析:污水管', '网络分析:污水井', '网络分析:污水泵站', '网络分析:污水口', '网络分析:污水排放口', '网络分析:污水阀门', '网络分析:污水管点', '网络分析:污水监测点', '供水:三通', '供水:消防栓', '供水:连接点', '供水:加压点', '供水:四通', '供水:预留口', '供水:水表箱', '供水:排污口', '供水:大表'],\r\n\r\n      gsDatabaseNames: ['供水:供水管道', '供水:T75mm以下管道', '供水:T800mm以上管道', '供水:T75_300mm管道', '供水:T300_500mm管道', '供水:T500_800mm管道', '供水:排气阀', '供水:排污阀', '供水:阀门', '供水:三通', '供水:消防栓', '供水:连接点', '供水:加压点', '供水:四通', '供水:预留口', '供水:水表箱', '供水:排污口', '供水:大表'],\r\n      ysDatabaseNames: ['网络分析:雨水管', '网络分析:雨水井', '网络分析:雨水泵站', '网络分析:雨水口', '网络分析:雨水排放口', '网络分析:雨水管点'],\r\n      wsDatabaseNames: ['网络分析:污水管', '网络分析:污水井', '网络分析:污水泵站', '网络分析:污水口', '网络分析:污水排放口', '网络分析:污水阀门', '网络分析:污水管点', '网络分析:污水监测点'],\r\n\r\n      databaseNames1: ['供水:排气阀', '供水:排污阀', '供水:阀门', '网络分析:雨水管', '网络分析:雨水井', '网络分析:雨水泵站', '网络分析:雨水口', '网络分析:雨水排放口', '网络分析:雨水管点', '网络分析:污水管', '网络分析:污水井', '网络分析:污水泵站', '网络分析:污水口', '网络分析:污水排放口', '网络分析:污水阀门', '网络分析:污水管点', '网络分析:污水监测点', '供水:三通', '供水:消防栓', '供水:连接点', '供水:加压点', '供水:四通', '供水:预留口', '供水:水表箱', '供水:排污口', '供水:大表'],\r\n\r\n      gsDatabaseNames1: ['供水:排气阀', '供水:排污阀', '供水:阀门', '供水:三通', '供水:消防栓', '供水:连接点', '供水:加压点', '供水:四通', '供水:预留口', '供水:水表箱', '供水:排污口', '供水:大表'],\r\n      ysDatabaseNames1: ['网络分析:雨水管', '网络分析:雨水井', '网络分析:雨水泵站', '网络分析:雨水口', '网络分析:雨水排放口', '网络分析:雨水管点'],\r\n      wsDatabaseNames1: ['网络分析:污水管', '网络分析:污水井', '网络分析:污水泵站', '网络分析:污水口', '网络分析:污水排放口', '网络分析:污水阀门', '网络分析:污水管点', '网络分析:污水监测点'],\r\n\r\n      gsLayers: [],\r\n      ysLayers: [],\r\n      wsLayers: [],\r\n      recordTimer: null,\r\n      // 当前关键点\r\n      currentKeyPoint: null,\r\n      // 当前应急任务的marker\r\n      currentEmeMarker: null,\r\n      callback: null,\r\n      dataNames: [],\r\n      navMarkers: [],\r\n      featuresLine: [],\r\n      areaMarkers: [],\r\n      markersLinePoints: [],\r\n      markersAreaPoints: [],\r\n      allDistance: null,\r\n      navigatorMarker: null,\r\n      navigatorMarker2: null,\r\n      lineMarkers: [],\r\n      areaMarker: null,\r\n      firstPoint: [],\r\n      boxFeatures: [],\r\n      multiTaskSAL: [],\r\n\r\n      // 字典\r\n      dictionary: {},\r\n      eventTypeList: {},\r\n      accessToken: this.$storage.get('access_token'),\r\n      formToken: ''\r\n    }\r\n  },\r\n  created() {\r\n    // 获取header，查询工单用\r\n    axios({\r\n      url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/userCenterApi/sso/tokenByToken',\r\n      method: 'post',\r\n      params: {\r\n        token: this.accessToken,\r\n      },\r\n      headers: {\r\n        Authorization: 'Basic b3V0d29yazp3cGcyMDIw',\r\n      }\r\n    }).then((res) => {\r\n      if (res.status == 200) {\r\n        this.formToken = res.data.resultData.token\r\n      }\r\n    })\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    mapLoad(mapInstance) {\r\n      mapObj.map = mapInstance.map\r\n      mapObj.mapInstance = mapInstance\r\n    },\r\n    getEventTypeList() {\r\n      if (this.dictionary.length > 0) {\r\n        // 处理字典，将其转换为对象，便于回显事件名称\r\n        let detailList = this.dictionary.filter(\r\n          // 对特定事件前缀处理\r\n          (item) => item.code.indexOf('inspection_event_type_') !== -1\r\n        );\r\n        let eventCodeList = [];\r\n        detailList.forEach(item => {\r\n          eventCodeList = eventCodeList.concat(item.dictionaryDetailList);\r\n        });\r\n        // 转换为对象\r\n        eventCodeList.forEach((item) => {\r\n          this.eventTypeList[item.code] = item.zh;\r\n        });\r\n      } else {\r\n        Toast({\r\n          title: \"字典加载失败\",\r\n        });\r\n      }\r\n    },\r\n    isOnLoaded() {\r\n      return this.isOnLoad && mapObj.mapInstance && mapObj.mapInstance.map;\r\n    },\r\n    //通用方法\r\n    async addCommonLayer() {\r\n      for await (const url of this.baseMapurl) {\r\n        await mapObj.mapInstance.addSuperStyleData(url);\r\n      }\r\n    },\r\n    async addPipeLayer() {\r\n      let map = mapObj.map;\r\n      let env = process.env.VUE_APP_ENV;\r\n      //底图\r\n      await axios\r\n        .get(\r\n          API.VUE_APP_MAP_REQUEST_URL +\r\n          \"/api/swan/mapWorkshopSource/detail?id=1557650273895288834\"\r\n        )\r\n        .then((res) => {\r\n          let layers = JSON.parse(res.data.data.combineJsonData);\r\n\r\n          Object.keys(layers.sources).forEach((key) => {\r\n            let temp = layers.sources[key].tiles[0];\r\n            // temp = temp.replaceAll(\"172.20.79.65:8008\", \"xasw.hdec.com\");\r\n            \r\n            // temp = temp.replaceAll(\"172.23.0.123:8008\", \"xasw.hdec.com\");\r\n            temp = temp.replaceAll(\"172.17.142.136:8008\", \"sw.chinaxiongan.cn\");\r\n            layers.sources[key].tiles[0] = temp;\r\n            // if (env == \"production\") {\r\n            // }\r\n            map.addSource(key, layers.sources[key]);\r\n          });\r\n          layers.layers.forEach((layer) => {\r\n            console.log('layer: ', layer);\r\n            if (!layer.layout || layer.layout.visibility == \"visible\") {\r\n              this.defaultBaseLayers.push(layer); //控制地图显隐\r\n            }\r\n            map.addLayer(layer);\r\n          });\r\n        })\r\n        .catch((e) => { })\r\n        .finally(() => { });\r\n      //管线\r\n      await axios\r\n        .get(\r\n          API.VUE_APP_MAP_REQUEST_URL +\r\n          \"/api/swan/mapWorkshopSource/detail?id=1548573412963749889\"\r\n        )\r\n        .then((res) => {\r\n          let layers = JSON.parse(res.data.data.jsonData);\r\n\r\n          Object.keys(layers.sources).forEach((key) => {\r\n            let temp = layers.sources[key].tiles[0];\r\n            // temp = temp.replaceAll(\"172.20.79.65:8008\", \"xasw.hdec.com\");\r\n            // temp = temp.replaceAll(\"172.23.0.123:8008\", \"xasw.hdec.com\");\r\n            temp = temp.replaceAll(\"172.17.142.136:8008\", \"sw.chinaxiongan.cn\");\r\n            layers.sources[key].tiles[0] = temp;\r\n            // if (env == \"production\") {\r\n            // }\r\n            map.addSource(key, layers.sources[key]);\r\n          });\r\n          layers.layers.forEach((layer) => {\r\n            map.addLayer(layer);\r\n            //图层移入移除以及点击事件\r\n            // map.on(\"mouseenter\", layer.id, this.handleLayerEnter);\r\n            // map.on(\"mouseout\", layer.id, this.handleLayerLeave);\r\n            // map.on(\"click\", layer.id, this.handleLayerClick); \r\n          });\r\n        })\r\n        .catch((e) => { })\r\n        .finally(() => {\r\n          \r\n        });\r\n      await this.addLineGeoLayer();\r\n      // 边框\r\n      await map.addLayer({\r\n        id: \"mapBorder\",\r\n        type: \"line\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: border,\r\n        },\r\n        layout: {\r\n          \"line-join\": \"round\",\r\n          \"line-cap\": \"round\",\r\n        },\r\n        paint: {\r\n          \"line-color\": \"#17E9FE\",\r\n          \"line-opacity\": 0.4,\r\n          \"line-width\": 2,\r\n        },\r\n      });\r\n      await this.addKeyPointLayer();\r\n      // this.isOnLoad = true;\r\n    },\r\n    // async addPipeLayer() {\r\n    //   this.isOnLoad = true;\r\n    //   await mapObj.mapInstance.()\r\n    //   // await mapObj.mapInstance.addTimerSource();\r\n    //   // this.swLayer['雨水'] = mapObj.mapInstance.addTimerLayer('雨水');\r\n    //   // this.swLayer['污水'] = mapObj.mapInstance.addTimerLayer('污水');\r\n    //   // this.swLayer['供水'] = await mapObj.mapInstance.addTimerLayer('供水');\r\n    //   // let gsLayerType = LayerType['供水'][0].concat(LayerType['供水'][1])\r\n    //   // gsLayerType.forEach((item, index) => {\r\n    //   //   mapObj.mapInstance.map.setLayoutProperty(item.id, 'visibility', 'none');\r\n    //   // })\r\n    //   // mapObj.mapInstance.addSource('lightLayer', {\r\n    //   //   type: \"geojson\",\r\n    //   //   data: {\r\n    //   //     type: \"FeatureCollection\",\r\n    //   //     features: []\r\n    //   //   }\r\n    //   // });\r\n    //   // this.swLayer['供水'] = await this.pipeSettings(this.gsUrl, this.GSL);\r\n    //   // this.swLayer['雨水'] = await this.pipeSettings(this.ysUrl, this.YSL);\r\n    //   // this.swLayer['污水'] = await this.pipeSettings(this.wsUrl, this.WSL);\r\n    //   // for await (const url of this.bzLayerUrls) {\r\n    //   //   await mapObj.mapInstance.addSuperStyleData(url);\r\n    //   // }\r\n    //   // mapObj.mapInstance.addLayer({\r\n    //   //   id: \"lightPoint\",\r\n    //   //   type: \"symbol\",\r\n    //   //   source: \"lightLayer\",\r\n    //   //   filter: [\"==\", \"$type\", \"Point\"],\r\n    //   //   layout: {\r\n    //   //     'icon-size': 1.4,\r\n    //   //     'icon-image': [...this.GSL.slice(0, this.GSL.length - 1), ...this.WSL.slice(1, this.WSL.length - 1), ...this.YSL.slice(1)],\r\n    //   //     'icon-ignore-placement': true,\r\n    //   //     'icon-allow-overlap': true\r\n    //   //   }\r\n    //   // }, \"lightLayer\")\r\n    //   // mapObj.mapInstance.addLayer({\r\n    //   //   id: \"lightLine\",\r\n    //   //   type: \"line\",\r\n    //   //   source: \"lightLayer\",\r\n    //   //   filter: [\"==\", \"$type\", \"LineString\"],\r\n    //   //   paint: {\r\n    //   //     'line-width': 3,\r\n    //   //     'line-color': \"red\",\r\n    //   //   }\r\n    //   // }, \"lightLayer\");\r\n    //   // this.isOnLoad = true;\r\n    //   // if (this.tripleVisible) {\r\n    //   //   this.gsLayers.forEach((item, index) => {\r\n    //   //     mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'none');\r\n    //   //   })\r\n    //   // }\r\n    // },\r\n    async pipeSettings(url, setting) {\r\n      let { data } = await actions.getAction(url);\r\n      mapObj.mapInstance.addSource(data.name, data.sources[data.name]);\r\n      data.layers = data.layers.filter(item => { return item.type !== \"background\" })\r\n      // data.sources[data.name].tiles[0] = gisDomain + '/iserver' + data.sources[data.name].tiles[0].split('iserver')[1];\r\n      let layers = data.layers;\r\n      switch (data.name) {\r\n        case '供水':\r\n          this.gsLayers = layers.map(layer => { return layer.id });\r\n          break;\r\n        case '雨水':\r\n          this.ysLayers = layers.map(layer => { return layer.id });\r\n          break;\r\n        case '污水':\r\n          this.wsLayers = layers.map(layer => { return layer.id });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      data.layers.forEach(layer => {\r\n        delete layer.maxzoom;\r\n        if (layer.layout && layer.layout.visibility == \"visible\" && layer.type == \"line\") {\r\n          mapObj.mapInstance.addLayer(layer, 'deviceMap');\r\n        } else if (layer.layout && layer.layout.visibility == \"visible\" && layer.type == \"circle\") {\r\n          layer.type = \"symbol\";\r\n          layer.paint = {};\r\n          layer.layout = {\r\n            \"icon-image\": setting,\r\n            \"icon-size\": 1\r\n          }\r\n          mapObj.mapInstance.addLayer(layer, 'deviceMap');\r\n        }\r\n        this.deviceLayers.push(layer.id);\r\n        // mapObj.mapInstance.map.on('click',layer.id,this.layerClick)\r\n      });\r\n    },\r\n    addUser() {\r\n      mapObj.mapInstance.addSource('user', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      })\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"user\",\r\n        type: \"symbol\",\r\n        source: \"user\",\r\n        layout: {\r\n          \"icon-image\": \"user\",\r\n          \"icon-size\": 0.25,\r\n          'icon-allow-overlap': true,\r\n          'icon-ignore-placement': true\r\n        }\r\n      })\r\n    },\r\n    //H5定位\r\n    async getUserPosition() {\r\n      // let p;\r\n      // if (navigator.geolocation){\r\n      //   navigator.geolocation.watchPosition((position) => {\r\n      //     p = [position.coords.longitude,position.coords.latitude];\r\n      //     alert(p)\r\n      //   },(error) => {\r\n      //     switch(error.code) {\r\n      //       case error.PERMISSION_DENIED: \r\n      //         alert(\"定位失败,用户拒绝请求地理定位\");\r\n      //         break;\r\n      //       case error.POSITION_UNAVAILABLE:\r\n      //         alert(\"定位失败,位置信息是不可用\");\r\n      //         break;\r\n      //       case error.TIMEOUT:\r\n      //         alert(\"定位失败,请求获取用户位置超时\");\r\n      //         break;\r\n      //       case error.UNKNOWN_ERROR:\r\n      //         alert(\"定位失败,定位系统失效\");\r\n      //         break;\r\n      //       }\r\n      //   }); \r\n      // }else{ \r\n      //   alert(\"不支持地理定位。\"); \r\n      // }\r\n      let point = await actions.getPosition()\r\n      return point;\r\n    },\r\n    setUserPosition(position) {\r\n      mapObj.mapInstance.setSourceData('user', {\r\n        type: \"FeatureCollection\",\r\n        features: position.length > 0 ? [turf.point(position)] : []\r\n      })\r\n    },\r\n    flyTo({ position, zoom }) {\r\n      mapObj.mapInstance.flyTo(position, zoom);\r\n    },\r\n    position(coords) {\r\n      mapObj.mapInstance.position(coords);\r\n    },\r\n    //公司选择\r\n    //传公司数组 例如:['临平供排水']\r\n    async chooseFactory(factory) {\r\n      let fac = factory[factory.length - 1];\r\n      let fac0 = factory[0];\r\n      this.factoryNameMarkers.forEach(marker => {\r\n        marker.remove();\r\n      })\r\n      if (fac0.label !== \"杭州余杭水务控股集团\") {\r\n        let res = await this.$api.getAction(\"/yhsw-drainage-entity/userMap/orgTree\", {\r\n          orgNo: fac.label === '全部' ? fac0.value : fac.value\r\n        })\r\n        let arr = [];\r\n        if (res.data.length) {\r\n          arr = mapObj.mapInstance.iteration(res.data, 'children', ['companyName', 'geom'])\r\n        }\r\n        if (factory.length == 1) {\r\n          arr.shift();\r\n        }\r\n        let coordsArr = [];\r\n        let factoryNameMarkers = [];\r\n        arr.forEach(item => {\r\n          coordsArr.push(item.geom.coordinates)\r\n          let center = this.getCenter(item.geom.coordinates[0]);\r\n          let ele = document.createElement('div');\r\n          ele.innerHTML = `<span style=\"color:#495665;font-size:18px;font-weight:bold\">${item.companyName}</span>`\r\n          factoryNameMarkers.push(mapObj.mapInstance.addMarker(ele, center));\r\n        })\r\n        this.factoryNameMarkers = factoryNameMarkers;\r\n        this.makeLocation(res.data[0].geom.coordinates);\r\n        this.paintingRange({ position: coordsArr, lineDasharray: [3, 4] })\r\n      } else {\r\n        this.makeLocation();\r\n        this.paintingRange({});\r\n      }\r\n    },\r\n    randomString(len) {\r\n      len = len || 32;\r\n      let $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\r\n      let maxPos = $chars.length;\r\n      let pwd = '';\r\n      for (let i = 0; i < len; i++) {\r\n        pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n      }\r\n      return pwd;\r\n    },\r\n    initMarker(i, w = 20, h = 20) {\r\n      let ele = document.createElement('img');\r\n      ele.src = i;\r\n      ele.style.width = w;\r\n      ele.style.height = h;\r\n      return ele;\r\n    },\r\n    mapOnLoad(callback) {\r\n      if (this.isOnLoad) {\r\n        callback && callback()\r\n      } else {\r\n        let timer = setInterval(() => {\r\n          if (this.isOnLoad) {\r\n            this.timer.forEach(timer => {\r\n              clearInterval(timer)\r\n            })\r\n            this.timer = null;\r\n            callback && callback()\r\n          }\r\n        }, 100)\r\n        this.timer.push(timer);\r\n      }\r\n\r\n    },\r\n    /**\r\n     * @name:业务代码\r\n     */\r\n    //管网和设施增加点击选中事件，选中设施信息储存至this.chooseDevice\r\n    addDeviceLayersClickEvent(that, isSW = false) {\r\n      let deviceLayers = this.deviceLayers.length > 0 ? this.deviceLayers : mapObj.mapInstance.deviceLayers;\r\n      this.vm = that || null;\r\n      deviceLayers.forEach(layerId => {\r\n        mapObj.mapInstance.map.on('click', layerId, isSW ? this.layerClick1 : this.layerClick);\r\n      })\r\n    },\r\n    removeDeviceLayersClickEvent(isSW = false) {\r\n      let deviceLayers = this.deviceLayers.length > 0 ? this.deviceLayers : mapObj.mapInstance.deviceLayers;\r\n      deviceLayers.forEach(layerId => {\r\n        mapObj.mapInstance.map.off('click', layerId, isSW ? this.layerClick1 : this.layerClick);\r\n      });\r\n      this.vm = null;\r\n    },\r\n    layerClick(e) {\r\n      let index = this.chooseDevice.findIndex(item => { return item.properties.id == e.features[0].id });\r\n      let device = null;\r\n      let operationMode = \"\";\r\n      if (index == -1) {\r\n        let feature = e.features[0];\r\n        device = {\r\n          type: \"feature\",\r\n          geometry: feature.geometry,\r\n          properties: { ...feature.properties, id: feature.id }\r\n        };\r\n        this.chooseDevice.push(device);\r\n        operationMode = 'add';\r\n      } else {\r\n        device = this.chooseDevice[index];\r\n        this.chooseDevice.splice(index, 1)\r\n        operationMode = 'remove';\r\n      }\r\n      mapObj.mapInstance.setSourceData('lightLayer', {\r\n        type: \"FeatureCollection\",\r\n        features: this.chooseDevice\r\n      });\r\n      this.vm && this.vm.$emit('getDevice', this.chooseDevice, {\r\n        operationMode,\r\n        device\r\n      });\r\n      device = null;\r\n    },\r\n    /**\r\n     * 三网合一\r\n     */\r\n    layerClick1(e) {\r\n      console.log('e :>> ', e);\r\n\r\n      let feature = mapObj.mapInstance.map.queryRenderedFeatures([\r\n        [e.point.x - 2, e.point.y - 2],\r\n        [e.point.x + 2, e.point.y + 2]\r\n      ])[0];\r\n      if (feature && feature.properties.deviceid && !feature.layer.id.includes('_symbol')) {\r\n        console.log('feature :>> ', feature);\r\n        mapObj.mapInstance.setSourceData('lightLayer', {\r\n          type: \"FeatureCollection\",\r\n          features: [feature]\r\n        });\r\n        this.$emit('getDevice', feature);\r\n        if (feature.properties.display.indexOf('管线') > -1) {\r\n          let location = [feature.geometry.coordinates[0][0], feature.geometry.coordinates[0][1] - 0.0005]\r\n          this.flyTo({ position: location, zoom: 17 })\r\n        } else {\r\n          let location2 = [feature.geometry.coordinates[0], feature.geometry.coordinates[1] - 0.0005]\r\n          this.flyTo({ position: location2, zoom: 17 })\r\n        }\r\n      }\r\n    },\r\n    //查看时回显\r\n    echoWxDeveice(features) {\r\n      this.chooseDevice = features;\r\n      mapObj.mapInstance.setSourceData('lightLayer', {\r\n        type: \"FeatureCollection\",\r\n        features: this.chooseDevice\r\n      })\r\n    },\r\n    //添加带浮窗事件图标\r\n    addEventMarker({ position, event }) {\r\n      let ele = this.initMarker(require('@/assets/img/map/eventPoint.png'), 10, 10);\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele\r\n      });\r\n      marker.setLngLat(position).setPopup(mapObj.mapInstance.newPopup({ offset: [0, -10], closeButton: false }).setHTML(`<strong>${event}</strong>`)).addTo(mapObj.mapInstance.map);\r\n      marker.togglePopup();\r\n    },\r\n    //切换地图 name:tdt||yxt||baseMap\r\n    changeMap(name) {\r\n      mapObj.mapInstance.changeBaseMap(name);\r\n    },\r\n    /**\r\n     * @name:维修部份\r\n     */\r\n    addOrganizerMarker({ position, distance }) {\r\n      let ele = this.initMarker(require('@/assets/img/map/gj.png'));\r\n      this.marker = mapObj.mapInstance.newMarker({\r\n        element: ele\r\n      });\r\n      this.marker.setLngLat(position).setPopup(mapObj.mapInstance.newPopup({ offset: [0, -10], closeButton: false }).setHTML(`<strong>${distance}</strong>`)).addTo(mapObj.mapInstance.map);\r\n      this.marker.togglePopup();\r\n    },\r\n    //更新协办人员位置\r\n    updateOrganizerPosition({ position, distance }) {\r\n      this.marker.setLngLat(position).getPopup().setHTML(`<strong>${distance}</strong>`);\r\n    },\r\n    //移除协办人员\r\n    removeOrganizerMarker() {\r\n      this.marker.remove();\r\n      this.marker = null;\r\n    },\r\n    // 点击地图添加自定义选择维修设施\r\n    startAddDiyPoint(event, vm) {\r\n      this.event = event;\r\n      this.vm = vm;\r\n      mapObj.map.on('click', this.AddDiyPoint)\r\n    },\r\n    AddDiyPoint(e) {\r\n      this.addDiyrMarker({ position: [e.lngLat.lng, e.lngLat.lat], name: event })\r\n    },\r\n    // 地图录入设施添加图标\r\n    addDiyrMarker({ position, name }) {\r\n      let ele = document.createElement('img');\r\n      ele.src = require('@/assets/img/map/diyPoint.png');\r\n      ele.style.width = '20px';\r\n      ele.style.height = '20px';\r\n      this.diyPoint.marker && this.diyPoint.marker.remove();\r\n      let marker = mapObj.mapInstance.newMarker({ element: ele });\r\n      marker.setLngLat(position).setPopup(mapObj.mapInstance.newPopup({ offset: [-1, 0] }).setHTML(`<strong>${name}</strong>`)).addTo(mapObj.mapInstance.map);\r\n      this.diyPoint = { name, position, marker };\r\n      this.vm.$emit('getDiyPoint', this.diyPoint);\r\n    },\r\n    //移除新录入设施图标\r\n    removeDiyMarker() {\r\n      this.diyPoint.marker.remove();\r\n      this.diyPoint.marker = null;\r\n    },\r\n    //结束自定义选择维修设施\r\n    endDiyPoint() {\r\n      mapObj.map.off('click', this.AddDiyPoint);\r\n      this.vm = null;\r\n    },\r\n    /**\r\n     * @name:养护部份\r\n     */\r\n    addNavigatorPoint(point) {\r\n      let that = this;\r\n      if (that.navigatorMarker) that.navigatorMarker.remove();\r\n      if (that.navigatorMarker2) that.navigatorMarker2.remove();\r\n      let ele = that.initMarker(require('@/assets/img/map/eventPoint.png'), 25, 25);\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele\r\n      });\r\n      if (point) {\r\n        ele.addEventListener('click', function (val) {\r\n          let ele2 = document.createElement(\"div\");\r\n          ele2.innerHTML = `\r\n              <div style=\"padding: 0px 5px; border: 1px solid #eee; border-radius: 2px; background: #fff; color: #2A83E6\">去导航</div>\r\n            `\r\n          let marker2 = mapObj.mapInstance.newMarker({\r\n            element: ele2,\r\n            offset: [35, 0]\r\n          });\r\n          ele2.addEventListener('click', function (val) {\r\n            that.navigatorMarker2.remove();\r\n            that.$emit('goToNavigator', point)\r\n          })\r\n          marker2.setLngLat(point).addTo(mapObj.mapInstance.map);\r\n          that.navigatorMarker2 = marker2;\r\n        })\r\n        marker.setLngLat(point).addTo(mapObj.mapInstance.map);\r\n        that.navigatorMarker = marker;\r\n        that.$emit('getNavigatorPoint', point)\r\n      }\r\n    },\r\n    // 测距\r\n    addNavigatorPointsLine(point) {\r\n      if (point) {\r\n        this.markersLinePoints.push(point)\r\n        mapObj.mapInstance.map.getLayer(\"PointsLayer\") && mapObj.mapInstance.map.removeLayer(\"PointsLayer\");\r\n        mapObj.mapInstance.map.getSource(\"PointSource\") && mapObj.mapInstance.map.removeSource(\"PointSource\");\r\n        mapObj.mapInstance.map.getLayer(\"LineLayer\") && mapObj.mapInstance.map.removeLayer(\"LineLayer\");\r\n        mapObj.mapInstance.map.getSource(\"LineSource\") && mapObj.mapInstance.map.removeSource(\"LineSource\");\r\n        let temp = {\r\n          type: \"Feature\",\r\n          geometry: {\r\n            type: \"Point\",\r\n            coordinates: point\r\n          },\r\n          properties: {}\r\n        }\r\n        this.navMarkers.push(temp)\r\n        mapObj.mapInstance.addSource('PointSource', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: this.navMarkers\r\n          }\r\n        });\r\n        mapObj.mapInstance.map.addLayer({\r\n          'id': 'PointsLayer',\r\n          'type': 'symbol',\r\n          'source': 'PointSource',\r\n          'layout': {\r\n            'icon-image': 'diyPoint',\r\n            'icon-size': 0.8,\r\n          }\r\n        })\r\n        if (this.navMarkers.length > 1) {\r\n\r\n          let distance = turf.distance(turf.point(this.markersLinePoints[this.navMarkers.length - 2]), turf.point(this.markersLinePoints[this.navMarkers.length - 1])) * 1000;\r\n          this.allDistance = Number(distance) + Number(this.allDistance);\r\n          let feature = {\r\n            type: \"Feature\",\r\n            geometry: {\r\n              type: \"LineString\",\r\n              coordinates: this.markersLinePoints\r\n            },\r\n            properties: {\r\n              distance: this.allDistance.toFixed(2) + ' m'\r\n            }\r\n          }\r\n          this.featuresLine.push(feature)\r\n          mapObj.mapInstance.addSource('LineSource', {\r\n            type: \"geojson\",\r\n            data: {\r\n              type: \"FeatureCollection\",\r\n              features: this.featuresLine\r\n            }\r\n          });\r\n          mapObj.mapInstance.map.addLayer({\r\n            'id': 'LineLayer',\r\n            'type': 'line',\r\n            'source': 'LineSource',\r\n            paint: {\r\n              \"line-color\": '#FF4A4A',\r\n              \"line-width\": 3\r\n            }\r\n          }, 'PointsLayer')\r\n          let ele = document.createElement(\"div\");\r\n          ele.innerHTML = `\r\n              <div style=\"color: #FF4A4A\">${(this.allDistance / 1000).toFixed(2) + ' km'}</div>\r\n            `\r\n          let marker = mapObj.mapInstance.newMarker({\r\n            element: ele,\r\n            offset: [0, 15]\r\n          });\r\n          marker.setLngLat(point).addTo(mapObj.mapInstance.map);\r\n          this.lineMarkers.push(marker);\r\n\r\n        }\r\n      }\r\n    },\r\n    // 测面\r\n    addNavigatorPointsArea(point) {\r\n      if (this.firstPoint.length === 0) this.firstPoint = point;\r\n      if (point) {\r\n        this.markersAreaPoints.push(point)\r\n        mapObj.mapInstance.map.getLayer(\"PointALayer\") && mapObj.mapInstance.map.removeLayer(\"PointALayer\");\r\n        mapObj.mapInstance.map.getLayer(\"AreasLayer\") && mapObj.mapInstance.map.removeLayer(\"AreasLayer\");\r\n        mapObj.mapInstance.map.getSource(\"PointASource\") && mapObj.mapInstance.map.removeSource(\"PointASource\");\r\n        mapObj.mapInstance.map.getSource(\"AreasSource\") && mapObj.mapInstance.map.removeSource(\"AreasSource\");\r\n        let temp = {\r\n          type: \"Feature\",\r\n          geometry: {\r\n            type: \"Point\",\r\n            coordinates: point\r\n          },\r\n          properties: {}\r\n        }\r\n        this.areaMarkers.push(temp)\r\n        mapObj.mapInstance.addSource('PointASource', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: this.areaMarkers\r\n          }\r\n        });\r\n        mapObj.mapInstance.map.addLayer({\r\n          'id': 'PointALayer',\r\n          'type': 'symbol',\r\n          'source': 'PointASource',\r\n          'layout': {\r\n            'icon-image': 'diyPoint',\r\n            'icon-size': 0.8,\r\n          }\r\n        })\r\n        let feature = this.markersAreaPoints.concat([this.firstPoint]);\r\n        let features = turf.polygon([feature]);\r\n        mapObj.mapInstance.addSource('AreasSource', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [features]\r\n          }\r\n        });\r\n        mapObj.mapInstance.map.addLayer({\r\n          'id': 'AreasLayer',\r\n          'type': 'fill',\r\n          'source': 'AreasSource',\r\n          paint: {\r\n            'fill-color': '#FF4A4A',\r\n            'fill-opacity': 0.4\r\n          }\r\n        }, 'PointALayer')\r\n        let distance = turf.area(features);\r\n        if (this.areaMarker) this.areaMarker.remove();\r\n        let ele = document.createElement(\"div\");\r\n        ele.innerHTML = `\r\n              <div style=\"color: #FF4A4A\">${(distance / 1000 / 1000).toFixed(2) + ' km²'}</div>\r\n            `\r\n        let marker = mapObj.mapInstance.newMarker({\r\n          element: ele,\r\n          offset: [0, 15]\r\n        });\r\n        marker.setLngLat(point).addTo(mapObj.mapInstance.map);\r\n        this.areaMarker = marker;\r\n      }\r\n\r\n    },\r\n    addNavigationControl() {\r\n      mapObj.mapInstance.map.addControl(new mapboxgl.NavigationControl(), 'top-left');\r\n    },\r\n    addFullscreenControl() {\r\n      mapObj.mapInstance.map.addControl(new mapboxgl.FullscreenControl());\r\n    },\r\n    addScaleControl() {\r\n      mapObj.mapInstance.map.addControl(new mapboxgl.ScaleControl(), \"bottom-right\");\r\n    },\r\n    clearNavigatorPoint() {\r\n      if (this.navigatorMarker) {\r\n        this.navigatorMarker.remove()\r\n      };\r\n      if (this.navigatorMarker2) {\r\n        this.navigatorMarker2.remove()\r\n      };\r\n      if (this.lineMarkers.length > 0) {\r\n        this.lineMarkers.forEach(marker => {\r\n          marker.remove();\r\n        });\r\n      }\r\n      if (this.areaMarker) this.areaMarker.remove();\r\n      mapObj.mapInstance.map.getLayer(\"LineLayer\") && mapObj.mapInstance.map.removeLayer(\"LineLayer\");\r\n      mapObj.mapInstance.map.getSource(\"LineSource\") && mapObj.mapInstance.map.removeSource(\"LineSource\");\r\n      mapObj.mapInstance.map.getLayer(\"PointsLayer\") && mapObj.mapInstance.map.removeLayer(\"PointsLayer\");\r\n      mapObj.mapInstance.map.getSource(\"pointSource\") && mapObj.mapInstance.map.removeSource(\"pointSource\");\r\n      mapObj.mapInstance.map.getLayer(\"PointALayer\") && mapObj.mapInstance.map.removeLayer(\"PointALayer\");\r\n      mapObj.mapInstance.map.getLayer(\"AreasLayer\") && mapObj.mapInstance.map.removeLayer(\"AreasLayer\");\r\n      mapObj.mapInstance.map.getSource(\"pointASource\") && mapObj.mapInstance.map.removeSource(\"pointASource\");\r\n      mapObj.mapInstance.map.getSource(\"AreasSource\") && mapObj.mapInstance.map.removeSource(\"AreasSource\");\r\n      this.navMarkers = [];\r\n      this.lineMarkers = [];\r\n      this.featuresLine = [];\r\n      this.areaMarkers = [];\r\n      this.firstPoint = [];\r\n      this.markersLinePoints = [];\r\n      this.markersAreaPoints = [];\r\n      this.allDistance = null;\r\n    },\r\n    echoYhDeveice({ uncured, curing }, callback) {\r\n      if (!mapObj.mapInstance.getLayer('uncuredLine')) {\r\n        mapObj.mapInstance.addSource('uncured', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: []\r\n          }\r\n        })\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"uncuredLine\",\r\n          type: \"line\",\r\n          source: \"uncured\",\r\n          paint: {\r\n            'line-width': 3,\r\n            'line-color': \"#ffa01e\",\r\n          }\r\n        }, 'cure')\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"uncuredPoint\",\r\n          type: \"symbol\",\r\n          filter: [\"==\", '$type', \"Point\"],\r\n          source: \"uncured\",\r\n          filter: ['==', '$type', 'Point'],\r\n          layout: {\r\n            'icon-size': 1,\r\n            'icon-image': \"eventPoint\"\r\n          }\r\n        }, 'cure')\r\n\r\n        mapObj.mapInstance.addSource('curing', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: []\r\n          }\r\n        })\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"curingLine\",\r\n          type: \"line\",\r\n          source: \"curing\",\r\n          paint: {\r\n            'line-width': 10,\r\n            'line-color': \"#39d98a\",\r\n          }\r\n        }, 'cure');\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"curingPoint\",\r\n          type: \"symbol\",\r\n          filter: [\"==\", '$type', \"Point\"],\r\n          source: \"curing\",\r\n          filter: ['==', '$type', 'Point'],\r\n          layout: {\r\n            'icon-size': 1,\r\n            'icon-image': \"eventLine\"\r\n          }\r\n        }, 'cure');\r\n      }\r\n\r\n      if (callback) {\r\n        mapObj.mapInstance.map.off('click', this.callback)\r\n        this.callback = callback;\r\n        mapObj.mapInstance.map.on('click', callback)\r\n      }\r\n      mapObj.mapInstance.setSourceData('uncured', {\r\n        type: \"FeatureCollection\",\r\n        features: uncured\r\n      })\r\n      mapObj.mapInstance.setSourceData('curing', {\r\n        type: \"FeatureCollection\",\r\n        features: curing\r\n      });\r\n      this.makePosition(uncured.concat(curing))\r\n    },\r\n    makePosition(features) {\r\n      if (features.length) {\r\n        let bbox = turf.bbox({\r\n          type: \"FeatureCollection\",\r\n          features\r\n        });\r\n        mapObj.mapInstance.map.fitBounds(bbox, {\r\n          padding: { top: 10, bottom: 25, left: 15, right: 5 }\r\n        });\r\n      } else {\r\n        mapObj.mapInstance.map.fitBounds([[120.38188484498045, 30.56868547578088], [119.51549097554295, 30.178356987720612]], {\r\n          linear: false\r\n        });\r\n      }\r\n    },\r\n    //超图几何查询\r\n    async getDataWithSpatial({ datasetNames = this.wsDatabaseNames1, geometry }) {\r\n      return await mapObj.mapInstance.getDataWithSpatial({ datasetNames, geometry });\r\n    },\r\n    //超图几何条件查询\r\n    async getDataWithSpatialAtt({ datasetNames = this.dataNames, geometry, sql }) {\r\n      return await mapObj.mapInstance.getDataWithSpatialAtt({ datasetNames, geometry, sql });\r\n    },\r\n    async getDataWithSql({ datasetNames = this.databaseNames1, sql }) {\r\n      return await mapObj.mapInstance.getDataWithSql(datasetNames, sql);\r\n    },\r\n    //查询点击处特征\r\n    queryRenderedFeatures(e) {\r\n      return mapObj.mapInstance.queryRenderedFeatures(e);\r\n    },\r\n    //进入养护展示养护面区\r\n    showPology(features) {\r\n      mapObj.mapInstance.addSource('yhPology', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features\r\n        }\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"yhPology\",\r\n        source: \"yhPology\",\r\n        type: \"fill\",\r\n        paint: {\r\n          'fill-color': \"#2A83E6\",\r\n          'fill-opacity': 0.2\r\n        }\r\n      }, 'yhppp', 'user');\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"yhLine\",\r\n        source: \"yhPology\",\r\n        type: \"line\",\r\n        paint: {\r\n          'line-color': \"#2A83E6\",\r\n          'line-width': 2\r\n        }\r\n      }, 'yhppp', 'user');\r\n      mapObj.mapInstance.addSource('yhPology1', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"yhPology1\",\r\n        source: \"yhPology1\",\r\n        type: \"fill\",\r\n        paint: {\r\n          'fill-color': \"#2A83E6\",\r\n          'fill-opacity': 0.2\r\n        }\r\n      }, 'yhppp', 'user')\r\n    },\r\n    //判断是否到达指定范围\r\n    checkPosition(point, features) {\r\n      this.dataNames = [];\r\n      let tempFeature = features.find(feature => turf.inside(point, feature));\r\n      if (tempFeature && tempFeature.properties && tempFeature.properties.businessType === '供水') {\r\n        this.dataNames = this.gsDatabaseNames1;\r\n      } else {\r\n        this.dataNames = this.wsDatabaseNames1;\r\n      }\r\n      let ptsWithin = turf.within(turf.featureCollection([turf.point(point)]), turf.featureCollection(features));\r\n      if (ptsWithin.features.length !== 0) {\r\n        return features.find(feature => turf.inside(point, feature));\r\n      }\r\n      return false\r\n    },\r\n    //生成2km为半径的圆,并查找设施\r\n    async setBuffer(point, radius = 0.035, feature) {\r\n      let buffered = turf.buffer(turf.point(point), radius, 'kilometers');\r\n      if (feature) {\r\n        return turf.intersect(buffered, feature);\r\n      }\r\n      // mapObj.mapInstance.map.setLayoutProperty('yhPology','visibility','none');\r\n      // mapObj.mapInstance.setSourceData('yhPology1',{\r\n      //   type:\"FeatureCollection\",\r\n      //   features:[buffered]\r\n      // });\r\n      return buffered;\r\n    },\r\n    //到达错误，回退\r\n    pologyBack() {\r\n      mapObj.mapInstance.map.setLayoutProperty('yhPology1', 'visibility', 'none');\r\n      mapObj.mapInstance.map.setLayoutProperty('yhPology', 'visibility', 'visible');\r\n    },\r\n    //移除养护所有面区\r\n    removeAllYH() {\r\n      if (mapObj.mapInstance.map.getSource('yhPology1')) {\r\n        mapObj.mapInstance.removeGroupLayer('yhppp');\r\n        mapObj.mapInstance.removeSource('yhPology1');\r\n        mapObj.mapInstance.removeSource('yhPology');\r\n      }\r\n\r\n    },\r\n    // 超图集合查询通过管径级别和特定的数据集\r\n    async getDataWithSpatialAndPipeLevel({ inspBusinessType, geom, pipeLevel }) {\r\n      let datasetNames = [];\r\n      let isSupply = false;\r\n      switch (inspBusinessType) {\r\n        case \"WATER_SUPPLY\":\r\n          datasetNames = this.gsDatabaseNames;\r\n          isSupply = true;\r\n          break;\r\n        case \"RAI_WATER\":\r\n          datasetNames = this.ysDatabaseNames;\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          datasetNames = this.wsDatabaseNames;\r\n          break;\r\n        default:\r\n          datasetNames = this.databaseNames;\r\n          break;\r\n      }\r\n      return await mapObj.mapInstance.getDataWithSpatialAndPipeLevel({ datasetNames, geom, pipeLevel, isSupply });\r\n    },\r\n    // 画半径为radius的圆范围\r\n    drawBuffer(point, radius = 0.020) {\r\n      let buffered = turf.buffer(point, radius, { unit: 'kilometers' });\r\n      mapObj.mapInstance.setSourceData('buffered', {\r\n        type: \"FeatureCollection\",\r\n        features: [buffered]\r\n      })\r\n    },\r\n    // 添加缓冲区的图层\r\n    addBufferLayer() {\r\n      mapObj.mapInstance.addSource('buffered', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      })\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"bufferLayer\",\r\n        type: \"fill\",\r\n        source: \"buffered\",\r\n        paint: {\r\n          \"fill-color\": \"#FFB6C1\",\r\n          \"fill-opacity\": 0.5\r\n        }\r\n      }, 'lightLayer');\r\n    },\r\n    async addInspLayer() {\r\n      await mapObj.mapInstance.map.addLayer({\r\n        id: \"rangePipesLayer\",\r\n        source: \"1549000686380879873\",\r\n        \"source-layer\": \"1549000686380879873\",\r\n        \"metadata\": {\r\n          \"layerId\": \"1549000686380879873\"\r\n        },\r\n        type: \"line\",\r\n        \"layout\": { \"visibility\": \"none\" },\r\n        paint: {\r\n          // \"line-color\": [\r\n          //   'case',\r\n          //   ['boolean', ['feature-state', 'insp'], false],\r\n          //   \"#00945e\",\r\n          //   \"#ff0000\"\r\n          // ],\r\n          \"line-color\": \"#44BA5A\",\r\n          \"line-width\": 3\r\n        }\r\n      }, 'mapBorder')\r\n    },\r\n    // 添加巡检范围,暂时为polygon类型\r\n    addRangeLayer(geom, idx) {\r\n      if (!mapObj.map.getSource(\"rangeSource_\" + idx)) {\r\n        mapObj.mapInstance.addSource(\"rangeSource_\" + idx, {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [{\r\n              geometry: geom,\r\n              type: 'Feature'\r\n            }]\r\n          }\r\n        });\r\n      }\r\n      if (!mapObj.map.getLayer(\"rangeLayer_\" + idx)) {\r\n        mapObj.mapInstance.map.addLayer({\r\n          id: \"rangeLayer_\" + idx,\r\n          type: \"fill\",\r\n          source: \"rangeSource_\" + idx,\r\n          paint: {\r\n            \"fill-color\": \"#e6edfa\",\r\n            \"fill-opacity\": 0.6\r\n          }\r\n        }, 'keypointsLayer');\r\n      }\r\n      if (!mapObj.map.getLayer(\"rangeLayerLine_\" + idx)) {\r\n        mapObj.mapInstance.map.addLayer({\r\n          id: \"rangeLayerLine_\" + idx,\r\n          type: \"line\",\r\n          source: \"rangeSource_\" + idx,\r\n          paint: {\r\n            \"line-color\": \"#e6edfa\",\r\n            \"line-dasharray\": [4, 4],\r\n            \"line-width\": 3\r\n          }\r\n        }, 'keypointsLayer');\r\n      }\r\n    },\r\n    // 根据管径级别、范围、业务类型查询范围内的矢量瓦片\r\n    async addRangeMVT(params) {\r\n      const that = this;\r\n      that.removeRangeMVT();\r\n      /**\r\n      const geomStr = params.geom;\r\n      const res = await that.$api.postAction(\"/yhsw-postgis/addQueryPlane\", geomStr);\r\n      let id;\r\n      if (res.status) {\r\n        id = res.data || '1398548977837674498';\r\n      }\r\n      let pipeType;\r\n      switch (params.inspBusinessType) {\r\n        case \"WATER_SUPPLY\":\r\n          pipeType = \"供水管线\";\r\n          break;\r\n        case \"RAI_WATER\":\r\n          pipeType = \"雨水管线\";\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          pipeType = \"污水管线\";\r\n          break;\r\n        case \"ORIGIN_WATER\":\r\n          pipeType = \"源水管线\";\r\n          break;\r\n        case \"RIVER_WATER\":\r\n          pipeType = \"排江管\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      // const res2 = await that.$api.getAction(\"/\")\r\n      let url;\r\n      if (params.calibers) {\r\n        url = baseUrl.url_config + `/yhsw-postgis/getAllLineHashInsp/{x}/{y}/{z}?rangId=${id}&calibres=${params.calibers}&type=${pipeType}&endDate=${params.endDate}`;\r\n      } else {\r\n        let caliberStr = window.btoa(JSON.stringify(params.caliberVOS));\r\n        url = baseUrl.url_config + `/yhsw-postgis/getAllLineInfoInspMultiple/{x}/{y}/{z}?id=${id}&caliberVOListStr=${caliberStr}&type=${pipeType}&endDate=${params.endDate}`;\r\n      }\r\n      */\r\n      let url = baseUrl.url_config + `ops-inspection/getAllLineTask/{x}/{y}/{z}?taskId=${params.taskId}`;\r\n      mapObj.mapInstance.addSource(\"rangePipeVector\", {\r\n        type: \"vector\",\r\n        tiles: [url],\r\n        promoteId: 'guid'\r\n      })\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"rangePipesLayer\",\r\n        source: \"rangePipeVector\",\r\n        \"source-layer\": \"line\",\r\n        type: \"line\",\r\n        paint: {\r\n          \"line-color\": [\r\n            'case',\r\n            ['boolean', ['feature-state', 'insp'], false],\r\n            \"#00945e\",\r\n            \"#ff0000\"\r\n          ],\r\n          \"line-width\": 3\r\n        }\r\n      }, 'keypointsLayer')\r\n      // 选中当前管线图层\r\n      mapObj.mapInstance.addSource(\"curInspLineSource\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"curInspLineLayer\",\r\n        type: \"line\",\r\n        source: \"curInspLineSource\",\r\n        paint: {\r\n          \"line-color\": \"#4264FB\",\r\n          \"line-width\": 8\r\n        }\r\n      }, \"keypointsLayer\");\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"curInspPointLayer\",\r\n        type: \"circle\",\r\n        source: \"curInspLineSource\",\r\n        filter: ['==', '$type', 'Point'],\r\n        paint: {\r\n          \"circle-color\": \"#FFA01E\",\r\n          \"circle-radius\": 8\r\n        },\r\n      }, \"keypointsLayer\")\r\n      // 对管线进行上报\r\n      mapObj.mapInstance.map.on('click', 'rangePipesLayer', function (e) {\r\n        let features = mapObj.mapInstance.map.queryRenderedFeatures(e.point, {\r\n          layers: [\"rangePipesLayer\"]\r\n        });\r\n        that.setLineGeoSource([features[0]], \"curInspLineSource\");\r\n      })\r\n    },\r\n    // 移除巡检管线MVT\r\n    removeRangeMVT() {\r\n      // 如果存在范围的MVT图层，就移除该图层\r\n      mapObj.mapInstance.map.getLayer(\"rangePipesLayer\") && mapObj.mapInstance.map.removeLayer(\"rangePipesLayer\");\r\n      mapObj.mapInstance.map.getSource(\"rangePipeVector\") && mapObj.mapInstance.map.removeSource(\"rangePipeVector\");\r\n      mapObj.mapInstance.map.getLayer(\"curInspLineLayer\") && mapObj.mapInstance.map.removeLayer(\"curInspLineLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"curInspPointLayer\") && mapObj.mapInstance.map.removeLayer(\"curInspPointLayer\");\r\n      mapObj.mapInstance.map.getSource(\"curInspLineSource\") && mapObj.mapInstance.map.removeSource(\"curInspLineSource\");\r\n      // 清空此次巡检保存的要素\r\n      recordFeatures = [];\r\n    },\r\n    // 设置巡检范围\r\n    setRangeLayer(rangeList, ifEmergency = false) {\r\n      let that = this;\r\n      rangeList.forEach((range) => {\r\n        // 如果为应急任务，不加载管线数据\r\n        if (!ifEmergency) {\r\n          // 替换为新的超图查询方法\r\n          const params = {\r\n            taskId: range.taskId ? range.taskId : undefined,\r\n            calibers: range.calibers ? range.calibers : undefined,\r\n            caliberVOS: range.caliberVOS ? range.caliberVOS : undefined,\r\n            endDate: range.endDate ? range.endDate : undefined,\r\n            inspBusinessType: range.inspBusinessType,\r\n            geom: range.geometry,\r\n            pipeLevel: range.pipeLevel\r\n          }\r\n          // 高亮管线替换矢量瓦片\r\n          this.addRangeMVT(params);\r\n\r\n          // that.getDataWithSpatialAndPipeLevel(params)\r\n          //   .then(devices => {\r\n          //     if (devices.data.features.length > 0) {\r\n          //       let features = devices.data.features;\r\n          //       that.handleInspData(features, false, !ifEmergency);\r\n          //     }\r\n          //   })\r\n        }\r\n      })\r\n      that.setLineGeoSource(rangeList, \"rangeSource\")\r\n    },\r\n    // 在图层中添加关键点，优化性能\r\n    addKeyPointLayer() {\r\n      mapObj.mapInstance.map.addSource('keypoints', {\r\n        type: 'geojson',\r\n        data: {\r\n          type: 'FeatureCollection',\r\n          features: []\r\n        },\r\n        promoteId: 'engId'\r\n      });\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: 'keypointsLayer',\r\n        type: 'symbol',\r\n        source: 'keypoints',\r\n        layout: {\r\n          \"icon-allow-overlap\": true,\r\n          \"icon-ignore-placement\": true,\r\n          \"icon-image\": [\r\n            'case',\r\n            ['==', ['get', 'isOrange'], true],\r\n            '已退回',\r\n            ['==', ['get', 'isGreen'], true],\r\n            '正常',\r\n            ['==', ['get', 'isRed'], true],\r\n            '异常',\r\n            ['==', ['get', 'isBlue'], true],\r\n            '未巡检',\r\n            '未巡检'\r\n          ],\r\n          'icon-size': 0.4,\r\n          'icon-allow-overlap': true,\r\n          'icon-ignore-placement': true\r\n        }\r\n      }, 'mapBorder');\r\n      mapObj.map.on('click', 'keypointsLayer', this.signInBuffer)\r\n    },\r\n    signInBuffer(e) {\r\n      // if (localStorage.getItem('startRecordLines') == 'start') {\r\n        if (true) {\r\n        let features = mapObj.mapInstance.map.queryRenderedFeatures(e.point, {\r\n          layers: [\"keypointsLayer\"]\r\n        });\r\n        if (features.length > 0) {\r\n          const feat = JSON.parse(features[0].properties.feature);\r\n          this.drawBuffer(feat.geom);\r\n          bus.$emit(\"startSignIn\", feat);\r\n        }\r\n      } else {\r\n        Toast({\r\n          message: '巡检未开始，无法打卡签到',\r\n          duration: 2000\r\n        })\r\n        return\r\n      }\r\n    },\r\n    setKeyPointLayer(features) {\r\n      let timer = setInterval(() => {\r\n        if (mapObj.map.getSource('keypoints')) {\r\n          mapObj.mapInstance.setSourceData('keypoints', {\r\n            type: \"FeatureCollection\",\r\n            features: features\r\n          });\r\n          clearInterval(timer)\r\n        }\r\n      }, 100)\r\n    },\r\n    // 添加关键点marker\r\n    addKeyPointMarker(feature, ifDetail = false) {\r\n      let position = feature.engGeom.coordinates;\r\n      let name = feature.engNum || \"关键点名称\";\r\n      const src = require('@/assets/img/inspection/icon_key_point_pink.png');\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"keypoint_${feature.engId}\" src=\"${src}\" width=\"24\" height=\"24\">\r\n        `\r\n\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n        offset: [0, -10]\r\n      });\r\n      // const markerHTML = `\r\n      //     <div>\r\n      //       <div\r\n      //         style=\"float: left;\"\r\n      //       >\r\n      //         <strong>${name}</strong>\r\n      //       </div>\r\n      //       <button\r\n      //         id=\"btn_${feature.engId}\"\r\n      //         style=\"color: #fff;background-color: #2A83E6;border-color: #fff;border-width:0px;\"\r\n      //       >签到</button>\r\n      //     </div>\r\n      //   `\r\n      // const markerHTMLDetail = `\r\n      //     <div>\r\n      //       <div\r\n      //         style=\"float: left;\"\r\n      //       >\r\n      //         <strong>${name}</strong>\r\n      //       </div>\r\n      //     </div>\r\n      //   `\r\n      marker\r\n        .setLngLat(position)\r\n        .addTo(mapObj.mapInstance.map);\r\n      //   .setPopup(mapObj.mapInstance.newPopup({ offset: [0, -15], closeButton: false })\r\n      //     .setHTML(ifDetail ? markerHTMLDetail : markerHTML))\r\n      //   .addTo(mapObj.mapInstance.map);\r\n      // marker.togglePopup();\r\n      if (!ifDetail) {\r\n        // 对按钮添加事件，进行调出签到框\r\n        // document.getElementById(\"btn_\" + feature.engId).addEventListener(\"click\", (e) => {\r\n        //   bus.$emit(\"startSignIn\", feature);\r\n        //   e.stopPropagation();\r\n        // })\r\n        // 对img添加点击事件\r\n        document.getElementById(\"keypoint_\" + feature.engId).addEventListener(\"click\", (e) => {\r\n          // 获取当前点击的关键点\r\n          let clickKeyPoint = document.getElementById(\"keypoint_\" + feature.engId);\r\n          if (clickKeyPoint) {\r\n            if (clickKeyPoint == this.currentKeyPoint) {\r\n              // 如果当前点击的关键点与全局的当前关键点相同，即重复点击取消放大或进行放大\r\n              if (clickKeyPoint.style.width == \"24px\") {\r\n                clickKeyPoint.style.width = \"40px\";\r\n                clickKeyPoint.style.height = \"40px\";\r\n                // marker.togglePopup();\r\n                this.drawBuffer(feature.engGeom);\r\n                bus.$emit(\"startSignIn\", feature);\r\n              } else {\r\n                clickKeyPoint.style.width = \"24px\";\r\n                clickKeyPoint.style.height = \"24px\";\r\n              }\r\n            } else {\r\n              if (this.currentKeyPoint) {\r\n                // 初始情况下，暂不设置全局的当前关键点的大小，如果已经存在全局当前关键点，则将其恢复原状\r\n                this.currentKeyPoint.style.width = \"24px\";\r\n                this.currentKeyPoint.style.height = \"24px\";\r\n              }\r\n              // 放大当前点击的关键点\r\n              clickKeyPoint.style.width = \"40px\";\r\n              clickKeyPoint.style.height = \"40px\";\r\n              // marker.togglePopup();\r\n              this.drawBuffer(feature.engGeom);\r\n              bus.$emit(\"startSignIn\", feature);\r\n              this.currentKeyPoint = clickKeyPoint;\r\n            }\r\n          }\r\n          e.stopPropagation();\r\n        })\r\n      }\r\n\r\n    },\r\n    removeKeyPointMarker(ids) {\r\n      ids.forEach(id => {\r\n        let currentEle = document.getElementById(\"keypoint_\" + id);\r\n        if (currentEle) {\r\n          currentEle.parentNode.removeChild(currentEle);\r\n        }\r\n      })\r\n    },\r\n    // 改变关键点marker的颜色，替换图片地址, status为true显示绿色，为false显示份色\r\n    changeKeyPointMarker(engId, status) {\r\n      const src = require('@/assets/img/inspection/icon_key_point_pink.png');\r\n      const src2 = require('@/assets/img/inspection/icon_key_point_green.png');\r\n      let clickKeyPoint = document.getElementById(\"keypoint_\" + engId);\r\n      if (clickKeyPoint) {\r\n        if (status) {\r\n          clickKeyPoint.src = src2;\r\n        } else {\r\n          clickKeyPoint.src = src;\r\n        }\r\n\r\n      }\r\n    },\r\n    // 移除所有应急巡检marker\r\n    removeInspEmeMarker(ids) {\r\n      ids.forEach(id => {\r\n        // 如果存在id为eventObj_one的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n        let currentEle = document.getElementById(\"eme_\" + id);\r\n        if (currentEle) {\r\n          currentEle.parentNode.removeChild(currentEle);\r\n        }\r\n      })\r\n    },\r\n    // 添加应急巡检的marker\r\n    addInspEmeMarker(feature, ifDetail = false) {\r\n      let position;\r\n      if (feature.geometry.type === 'Polygon' || feature.geometry.type === 'MultiPolygon') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'LineString') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'Point') {\r\n        position = feature.geometry.coordinates;\r\n      }\r\n      if (!position) return;\r\n      let name = feature.properties.name || \"巡检范围\";\r\n      const src = require('@/assets/img/inspection/icon_emergency_point.png');\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"eme_${feature.id}\" src=\"${src}\" width=\"24\" height=\"24\"></img>\r\n        `\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n        offset: [0, -5]\r\n      });\r\n      const markerHTML = `\r\n          <div id=\"base_${feature.id}\">\r\n          </div>\r\n        `\r\n      if (!ifDetail) {\r\n        marker\r\n          .setLngLat(position)\r\n          .setPopup(mapObj.mapInstance.newPopup({ offset: [0, -15], closeButton: false })\r\n            .setHTML(markerHTML))\r\n          .addTo(mapObj.mapInstance.map);\r\n        marker.togglePopup();\r\n        let countTime = new CountTimePop({ propsData: { restTime: feature.restTime } });\r\n        countTime.$mount(`#base_${feature.id}`);\r\n        // 对img添加点击事件\r\n        document.getElementById(\"eme_\" + feature.id).addEventListener(\"click\", (e) => {\r\n          // 获取当前点击的关键点\r\n          let clickEmeMarker = document.getElementById(\"eme_\" + feature.id);\r\n          if (clickEmeMarker) {\r\n            if (clickEmeMarker == this.currentEmeMarker) {\r\n              if (clickEmeMarker.style.width == \"24px\") {\r\n                clickEmeMarker.style.width = \"40px\";\r\n                clickEmeMarker.style.height = \"40px\";\r\n                bus.$emit(\"startEmeSignIn\", feature);\r\n                marker.togglePopup();\r\n              } else {\r\n                clickEmeMarker.style.width = \"24px\";\r\n                clickEmeMarker.style.height = \"24px\";\r\n              }\r\n            } else {\r\n              if (this.currentEmeMarker) {\r\n                this.currentEmeMarker.style.width = \"24px\";\r\n                this.currentEmeMarker.style.height = \"24px\";\r\n              }\r\n              clickEmeMarker.style.width = \"40px\";\r\n              clickEmeMarker.style.height = \"40px\";\r\n              marker.togglePopup();\r\n              bus.$emit(\"startEmeSignIn\", feature);\r\n              this.currentEmeMarker = clickEmeMarker;\r\n            }\r\n          }\r\n          e.stopPropagation();\r\n        })\r\n      } else {\r\n        marker\r\n          .setLngLat(position)\r\n          .addTo(mapObj.mapInstance.map);\r\n      }\r\n    },\r\n    // 添加巡检事件marker\r\n    addInspEventMarker(feature) {\r\n      let position;\r\n      if (feature.geometry.type === 'Polygon' || feature.geometry.type === 'MultiPolygon') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'LineString') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'Point') {\r\n        position = feature.geometry.coordinates;\r\n      }\r\n      if (!position) return;\r\n      const src = require('@/assets/img/inspection/icon_event_map.png');\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"event_${feature.id}\" src=\"${src}\" width=\"24\" height=\"24\"></img>\r\n        `\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n        offset: [0, 10]\r\n      });\r\n      marker\r\n        .setLngLat(position)\r\n        .setPopup(mapObj.mapInstance.newPopup({ offset: [0, 0], closeButton: false })\r\n          .setHTML(`\r\n            <div style=\"color: #333333;\">\r\n              <strong>${this.eventTypeList[feature.eventType] || '上报事件'}</strong>\r\n            </div>\r\n          `))\r\n        .addTo(mapObj.mapInstance.map);\r\n      marker.togglePopup();\r\n    },\r\n    // 添加巡检事件在图层中\r\n    addInspEventLayer(features) {\r\n      let that = this;\r\n      mapObj.map.loadImage(\r\n        require('@/assets/img/inspection/icon_event_map.png'),\r\n        function (error, image) {\r\n          if (error) throw error;\r\n          if (!mapObj.map.hasImage('event-marker')) {\r\n            mapObj.map.addImage('event-marker', image);\r\n          }\r\n          mapObj.map.addSource('eventPoints', {\r\n            'type': 'geojson',\r\n            'data': {\r\n              'type': 'FeatureCollection',\r\n              'features': features\r\n            }\r\n          });\r\n          mapObj.map.addLayer({\r\n            'id': 'eventPointsLayer',\r\n            'type': 'symbol',\r\n            'source': 'eventPoints',\r\n            'layout': {\r\n              \"visibility\": 'none',\r\n              \"icon-allow-overlap\": true,//自动避让属性\r\n              \"icon-ignore-placement\": true,\r\n              'icon-image': 'event-marker',\r\n              'icon-size': 0.4,\r\n              'icon-offset': [0, 10]\r\n            }\r\n          })\r\n        }\r\n      )\r\n      // mapObj.mapInstance.map.on('click', 'eventPointsLayer', function (e) {\r\n      //   let features = mapObj.mapInstance.map.queryRenderedFeatures(e.point, {\r\n      //     layers: [\"eventPointsLayer\"]\r\n      //   });\r\n      //   let eventType = \"\";\r\n      //   features.forEach(item => {\r\n      //     if (item.properties && item.properties.eventType) {\r\n      //       eventType += that.eventTypeList[item.properties.eventType] + \" \";\r\n      //     }\r\n      //   });\r\n      //   let popup = mapObj.mapInstance.newPopup({ offset: [0, -5], closeButton: false })\r\n      //     .setLngLat(e.lngLat)\r\n      //     .setHTML(`<h3>${eventType}</h3>`)\r\n      //     .addTo(mapObj.mapInstance.map)\r\n      // })\r\n    },\r\n    // 添加上报对象的marker\r\n    addEventObjMarker(feature, pointType, type, gridObj) {\r\n      let position;\r\n      let pop\r\n      let marker\r\n      if (pointType == 'device') {\r\n        console.log(feature)\r\n        if (feature.geometry.type === 'Polygon' || feature.geometry.type === 'MultiPolygon') {\r\n          const center = turf.center(feature.geometry);\r\n          position = center.geometry.coordinates;\r\n        } else if (feature.geometry.type === 'LineString') {\r\n          const center = turf.center(feature.geometry);\r\n          position = center.geometry.coordinates;\r\n        } else if (feature.geometry.type === 'Point') {\r\n          position = feature.geometry.coordinates;\r\n        }\r\n        this.currentPoint = JSON.parse(JSON.stringify(feature))\r\n        this.currentPoint.taskId = this.$route.query.taskId\r\n        this.currentPoint.gridId = gridObj.gridId\r\n        this.currentPoint.gridName = gridObj.gridName\r\n        this.currentPoint.gridManager = gridObj.gridManager\r\n        this.currentPoint.lng = feature.geometry.coordinates[0]\r\n        this.currentPoint.lat = feature.geometry.coordinates[1]\r\n        // 要素所在图层ID和属性信息\r\n        this.currentPoint.layerID = feature.layer.id\r\n        this.currentPoint.layerType = feature.layer.type\r\n        this.currentPoint.properties = feature.properties\r\n        // 底图要素name_local或设施要素road_name,id\r\n        this.currentPoint.road_name = feature.properties.road_name\r\n        this.currentPoint.id = feature.properties.id\r\n        this.currentPoint.code = feature.properties.manhole_code || feature.properties.gate_code || feature.properties.outlet_code\r\n          || feature.properties.comb_code || feature.properties.valve_code || feature.properties.pump_station_code\r\n          || feature.properties.plant_code || feature.properties.pump_code || feature.properties.fire_cock_code\r\n          || feature.properties.start_code + ',' + feature.properties.end_code || ''\r\n        // 要素对象类型（业务类型/设施类型）\r\n        switch (feature.layer.id) {\r\n          // 雨水\r\n          case \"rd_map_comb\"://comb一定是雨水口\r\n            this.currentPoint.bigType = '雨水'\r\n            this.currentPoint.smallType ='雨水口'\r\n            break\r\n          case \"rd_map_outfall\"://排放口 1-雨水； 2-污水； 3-合流； 4-其他\r\n            this.currentPoint.bigType = feature.properties.pipe_type\r\n            this.currentPoint.smallType = '排放口'\r\n            break\r\n          case \"rd_map_manhole\"://检查井  1-雨水；2-污水\r\n            this.currentPoint.bigType = feature.properties.manhole_type\r\n            this.currentPoint.smallType = feature.properties.manhole_type + '检查井'\r\n            break\r\n          case \"rd_map_gate\"://闸门 1-雨水； 2-污水； 3-合流； 4-其他\r\n            this.currentPoint.bigType = feature.properties.pipe_type\r\n            this.currentPoint.smallType = '闸门'\r\n            break\r\n          case \"rd_map_drainpipe_ys_big\":\r\n            this.currentPoint.bigType = '雨水'\r\n            this.currentPoint.smallType = '雨水管线'\r\n            break\r\n          case \"rd_map_drainpipe_ys_small\":\r\n            this.currentPoint.bigType = '雨水'\r\n            this.currentPoint.smallType = '雨水管线'\r\n            break\r\n          // 污水\r\n          case \"rd_map_drainpipe_ws_big\":\r\n            this.currentPoint.bigType = '污水'\r\n            this.currentPoint.smallType = '污水管线'\r\n            break\r\n          case \"rd_map_drainpipe_ws_small\":\r\n            this.currentPoint.bigType = '污水'\r\n            this.currentPoint.smallType = '污水管线'\r\n            break\r\n          // 给水\r\n          case \"map_supply_firehydrant\"://消火栓一定是给水\r\n            this.currentPoint.bigType = '供水'\r\n            this.currentPoint.smallType = '消火栓'\r\n            break\r\n            case \"map_recycle_valve\"://阀门valve一定是给水\r\n              this.currentPoint.bigType = '再生水'\r\n              this.currentPoint.smallType = '阀门'\r\n              break\r\n          case \"map_supply_valve\"://阀门valve一定是给水\r\n            this.currentPoint.bigType = '供水'\r\n            this.currentPoint.smallType = '阀门'\r\n            break\r\n          case \"map_supply_pipe_distribute\"://配水管线\r\n            this.currentPoint.bigType = '给水'\r\n            this.currentPoint.smallType = '配水管线'\r\n            break\r\n          case \"map_supply_pipe_delivery\"://输水管线\r\n            this.currentPoint.bigType = 'supply'\r\n            this.currentPoint.smallType = '输水管线'\r\n            break\r\n          case \"map_supply_pipe_circulating\"://回水管线\r\n            this.currentPoint.bigType = '给水'\r\n            this.currentPoint.smallType = '回水管线'\r\n            break\r\n          case \"map_waterwork\"://供水厂\r\n            this.currentPoint.bigType = '给水'\r\n            this.currentPoint.smallType = '供水厂'\r\n            break\r\n          // 再生水\r\n          case \"map_recycle_pipe\"://再生水管线\r\n            this.currentPoint.bigType = '再生水'\r\n            this.currentPoint.smallType = 'pipeline'\r\n            break\r\n          case \"map_waterwork\"://再生水厂\r\n            this.currentPoint.bigType = '再生水'\r\n            this.currentPoint.smallType = '再生水厂'\r\n            break\r\n        }\r\n  \r\n        const src = require(`@/assets/img/legend/事件上报.png`);\r\n        // 如果存在id为eventObj_one的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n        let currentEle = document.getElementById(\"eventObj_one\");\r\n        if (currentEle) {\r\n          currentEle.parentNode.removeChild(currentEle);\r\n        }\r\n        let ele = document.createElement(\"div\");\r\n        ele.innerHTML = `\r\n            <img id=\"eventObj_one\" src=\"${src}\" width=\"40\" height=\"40\">\r\n          `\r\n        marker = mapObj.mapInstance.newMarker({\r\n          element: ele\r\n        });\r\n        marker\r\n          .setLngLat(position)\r\n          .setPopup(mapObj.mapInstance.newPopup({ offset: [0, -7], closeButton: false })\r\n            .setHTML(`<div id=\"deviceDetail\"></div>`))\r\n          .addTo(mapObj.map);\r\n        pop = new PopupItem({ propsData: { deviceCode: this.currentPoint.code, type: type, isDevice: true, fun: this.goToDetail } })\r\n      } else if (pointType == 'lnglat') {\r\n        this.currentPoint = feature\r\n        this.currentPoint.taskId = this.$route.query.taskId\r\n        this.currentPoint.gridId = gridObj.gridId\r\n        this.currentPoint.gridName = gridObj.gridName\r\n        this.currentPoint.gridManager = gridObj.gridManager\r\n        position = [feature.lng, feature.lat]\r\n  \r\n        const src = require(`@/assets/img/legend/事件上报.png`);\r\n        // 如果存在id为eventObj_one的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n        let currentEle = document.getElementById(\"eventObj_one\");\r\n        if (currentEle) {\r\n          currentEle.parentNode.removeChild(currentEle);\r\n        }\r\n        let ele = document.createElement(\"div\");\r\n        ele.innerHTML = `\r\n            <img id=\"eventObj_one\" src=\"${src}\" width=\"40\" height=\"40\">\r\n          `\r\n        marker = mapObj.mapInstance.newMarker({\r\n          element: ele\r\n        });\r\n        marker\r\n          .setLngLat(position)\r\n          .setPopup(mapObj.mapInstance.newPopup({ offset: [0, -7], closeButton: false })\r\n            .setHTML(`<div id=\"deviceDetail\"></div>`))\r\n          .addTo(mapObj.map);\r\n        pop = new PopupItem({ propsData: { lng: this.currentPoint.lng, lat: this.currentPoint.lat, type: type, isDevice: false, fun: this.goToDetail } })\r\n      }\r\n      this.$nextTick(() => {\r\n        pop.$mount('#deviceDetail')\r\n      })\r\n      marker.togglePopup();\r\n\r\n    },\r\n    goToDetail(type) {\r\n      if (type == 'event') {\r\n        this.$router.push({\r\n          name: 'addProblemIndex',\r\n          query: { msg: this.currentPoint, token: this.formToken, taskId: this.$route.query.taskId, from: 'insp' },\r\n          params: { type: 'add' }\r\n        })\r\n      } else {\r\n        this.$router.push({\r\n          name: 'addFlaws',\r\n          query: { msg: this.currentPoint, token: this.formToken, taskId: this.$route.query.taskId, from: 'insp' },\r\n          params: { type: 'add' }\r\n        })\r\n      }\r\n    },\r\n    // 移除上报事件的对象marker\r\n    removeEventObjMarker() {\r\n      // 如果存在id为eventObj_one的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n      let currentEle = document.getElementById(\"eventObj_one\");\r\n      if (currentEle) {\r\n        currentEle.parentNode.removeChild(currentEle);\r\n        // bus.$emit(\"reportInspEvent\", {}, false);\r\n      }\r\n    },\r\n    // 加载巡检人的1公里以内的管线数据\r\n    addInspBufferData(position, radius = 0.5) {\r\n      let buffered = turf.buffer(position, radius, 'kilometers');\r\n      const params = {\r\n        inspBusinessType: position.inspBusinessType,\r\n        geom: buffered.geometry,\r\n        pipeLevel: position.pipeLevel\r\n        // pipeLevel: {\r\n        //   pipeMax: null,\r\n        //   pipeMin: null\r\n        // }\r\n        // pipeLevel: null\r\n      }\r\n      // this.getDataWithSpatial({ geometry: buffered.geometry})\r\n      this.getDataWithSpatialAndPipeLevel(params)\r\n        .then(devices => {\r\n          // console.log(\"devices==>\", devices);\r\n          if (devices.data.features.length > 0) {\r\n            let features = devices.data.features;\r\n            this.handleInspData(features, true, false);\r\n          }\r\n        })\r\n    },\r\n    // 返回radius为半径范围的工程对象数据\r\n    async getInspDataInRange(position, radius = 0.035) {\r\n      let buffered = turf.buffer(position, radius, 'kilometers');\r\n      // const devices = await this.getDataWithSpatial({geometry: buffered.geometry});\r\n      const params = {\r\n        inspBusinessType: position.inspBusinessType,\r\n        geom: buffered.geometry,\r\n        // pipeLevel: position.pipeLevel\r\n        // pipeLevel: {\r\n        //   pipeMax: null,\r\n        //   pipeMin: null\r\n        // }\r\n        pipeLevel: null\r\n      }\r\n      const devices = await this.getDataWithSpatialAndPipeLevel(params);\r\n      let featuresData = [];\r\n      if (devices.data.features.length > 0) {\r\n        let features = devices.data.features;\r\n        features.map(item => {\r\n          let paramsObj = {};\r\n          let fieldNames = item.fieldNames;\r\n          let fieldValues = item.fieldValues;\r\n          let lxnIndex = fieldNames.findIndex(it => it == \"LXN\");\r\n          let pipeIndex = fieldNames.findIndex(it => it == \"PIPETYPE\");\r\n          let properties = lxnIndex\r\n            ? showProperties2[`${fieldValues[pipeIndex]}`]\r\n            : pipeIndex\r\n              ? showProperties2[`${fieldValues[pipeIndex]}`]\r\n              : [];\r\n          for (let i = 0; i < fieldNames.length; i++) {\r\n            this.$set(paramsObj, `${fieldNames[i]}`, fieldValues[i]);\r\n          }\r\n          if (fieldNames.findIndex(it => it == \"LENGTH\") > -1) {\r\n            this.$set(paramsObj, \"UNIT\", \"米\");\r\n            this.$set(\r\n              paramsObj,\r\n              \"LENGTH\",\r\n              fieldValues[fieldNames.findIndex(i => i == \"LENGTH\")]\r\n            );\r\n          } else {\r\n            this.$set(paramsObj, \"UNIT\", \"个\");\r\n          }\r\n          this.$set(paramsObj, \"ID\", item.ID);\r\n          let tempGeometry = turf.feature(\r\n            {\r\n              type: item.geometry.type === \"LINE\" ? \"LineString\" : \"Point\",\r\n              coordinates: item.geometry.points.map(point => [\r\n                point.x,\r\n                point.y\r\n              ])\r\n            },\r\n            paramsObj\r\n          );\r\n          this.$set(tempGeometry, \"id\", item.ID);\r\n          featuresData.push(tempGeometry);\r\n          let geometry = JSON.parse(JSON.stringify(tempGeometry));\r\n          this.$set(paramsObj, `geometry`, geometry);\r\n          return paramsObj;\r\n        })\r\n      }\r\n      return featuresData;\r\n    },\r\n    // 返回radius为半径范围的工程对象数据\r\n    async getInspDataInRangeTile(position, radius = 0.035) {\r\n      let pipeType;\r\n      switch (position.inspBusinessType) {\r\n        case \"WATER_SUPPLY\":\r\n          pipeType = \"供水管线\";\r\n          break;\r\n        case \"RAI_WATER\":\r\n          pipeType = \"雨水管线\";\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          pipeType = \"污水管线\";\r\n          break;\r\n        case \"ORIGIN_WATER\":\r\n          pipeType = \"源水管线\";\r\n          break;\r\n        case \"RIVER_WATER\":\r\n          pipeType = \"排江管\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      const params = {\r\n        geomPoint: position.geometry,\r\n        pipeType: pipeType,\r\n        radius: radius,\r\n        type: \"线\"\r\n      }\r\n      const res = await this.$api.getAction('/yhsw-postgis/getAllPointOrLineGeomInsp', params);\r\n      console.log(\"get all Point or Line geom==>\", res.data);\r\n    },\r\n    // 处理管线等巡检数据数据\r\n    handleInspData(data, inspUser = false, unInspLineSource = false) {\r\n      let featuresData = [];\r\n      data.map(item => {\r\n        let paramsObj = {};\r\n        let fieldNames = item.fieldNames;\r\n        let fieldValues = item.fieldValues;\r\n        let lxnIndex = fieldNames.findIndex(it => it == \"LXN\");\r\n        let pipeIndex = fieldNames.findIndex(it => it == \"PIPETYPE\");\r\n        let properties = lxnIndex\r\n          ? showProperties2[`${fieldValues[pipeIndex]}`]\r\n          : pipeIndex\r\n            ? showProperties2[`${fieldValues[pipeIndex]}`]\r\n            : [];\r\n        for (let i = 0; i < fieldNames.length; i++) {\r\n          this.$set(paramsObj, `${fieldNames[i]}`, fieldValues[i]);\r\n        }\r\n        if (fieldNames.findIndex(it => it == \"LENGTH\") > -1) {\r\n          this.$set(paramsObj, \"UNIT\", \"米\");\r\n          this.$set(\r\n            paramsObj,\r\n            \"LENGTH\",\r\n            fieldValues[fieldNames.findIndex(i => i == \"LENGTH\")]\r\n          );\r\n        } else {\r\n          this.$set(paramsObj, \"UNIT\", \"个\");\r\n        }\r\n        this.$set(paramsObj, \"ID\", item.ID);\r\n        let tempGeometry = turf.feature(\r\n          {\r\n            type: item.geometry.type === \"LINE\" ? \"LineString\" : \"Point\",\r\n            coordinates: item.geometry.points.map(point => [\r\n              point.x,\r\n              point.y\r\n            ])\r\n          },\r\n          paramsObj\r\n        );\r\n        this.$set(tempGeometry, \"id\", item.ID);\r\n        featuresData.push(tempGeometry);\r\n        let geometry = JSON.parse(JSON.stringify(tempGeometry));\r\n        this.$set(paramsObj, `geometry`, geometry);\r\n        return paramsObj;\r\n      })\r\n      try {\r\n        const that = this;\r\n        var timer = setInterval(function () {\r\n          if (mapObj.mapInstance && that.map.getSource(\"unInspLineSource\") && mapObj.mapInstance.map.isSourceLoaded(\"rangeSource\")) {\r\n            clearInterval(timer);\r\n            if (inspUser) {\r\n              that.setLineGeoSource(featuresData, \"inspUserLineSource\");\r\n            } else {\r\n              that.setLineGeoSource(featuresData, \"initInspLineSource\");\r\n              // 如果是未巡检线数据源\r\n              if (unInspLineSource) {\r\n                that.setLineGeoSource(featuresData, \"unInspLineSource\");\r\n              }\r\n            }\r\n          }\r\n        }, 100);\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    // 设置线数据源,data是数组，source为数据源名称\r\n    setLineGeoSource(data, source) {\r\n      if (source === \"inspUserLineSource\") {\r\n        data = data;\r\n      } else if (source === \"curInspLineSource\") {\r\n        // 如果数据源是curInspLineSource，则触发管线任务上报\r\n        // if (data.length > 0) {\r\n        //   bus.$emit(\"reportInspEvent\", data[0], true);\r\n        // } else {\r\n        //   bus.$emit(\"reportInspEvent\", {}, false);\r\n        // }\r\n      } else {\r\n        let sourceData = mapObj.mapInstance.map.getSource(source);\r\n        data = data.concat(sourceData._data.features);\r\n        // 数组对象去重\r\n        let obj = {};\r\n        data = data.reduce(function (item, next) {\r\n          obj[next.id] ? '' : obj[next.id] = true && item.push(next);\r\n          return item;\r\n        }, []);\r\n      }\r\n      mapObj.mapInstance.setSourceData(source, {\r\n        type: \"FeatureCollection\",\r\n        features: data\r\n      });\r\n    },\r\n    // 将管线数据从一个图层改到另一个图层\r\n    changeInspLineSource(data, fromSource, toSource) {\r\n      try {\r\n        // 如果fromSourceData在toSourceData之后加载，则filter过滤失败，暂时将to的图层放在from上方\r\n        let fromSourceData = mapObj.mapInstance.map.getSource(fromSource);\r\n        let toSourceData = mapObj.mapInstance.map.getSource(toSource);\r\n\r\n        let fromData = fromSourceData._data.features.filter(x => data.every(y => y.id !== x.id));\r\n        data = fromSourceData._data.features.filter(x => data.some(y => y.id === x.id));\r\n        let toData = data.concat(toSourceData._data.features);\r\n        // console.log(\"fromData==>\",fromSourceData._data,toSourceData._data, fromData, toData);\r\n        mapObj.mapInstance.setSourceData(fromSource, {\r\n          type: \"FeatureCollection\",\r\n          features: fromData\r\n        })\r\n        mapObj.mapInstance.setSourceData(toSource, {\r\n          type: \"FeatureCollection\",\r\n          features: toData\r\n        });\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    setAllInspLineSource(data) {\r\n      try {\r\n        const that = this;\r\n        let timer = setInterval(function () {\r\n          if (that.isOnLoaded() && mapObj.map.getSource(\"initInspLineSource\") && mapObj.map.isSourceLoaded(\"initInspLineSource\")) {\r\n            clearInterval(timer)\r\n            mapObj.mapInstance.setSourceData('initInspLineSource', {\r\n              type: \"FeatureCollection\",\r\n              features: data\r\n            })\r\n          }\r\n        }, 100);\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    addInspRecordLineSource(data) {\r\n      mapObj.mapInstance.map.addSource('')\r\n    },\r\n    // 已巡检管线回显, 涉及数据遍历，如果数量巨大，需要处理\r\n    addInspRecordTileLineSource(data, completion = null) {\r\n      const that = this;\r\n      try {\r\n        Toast.loading({\r\n          message: \"加载地图管线中...\"\r\n        })\r\n        data = [...new Set(data)]\r\n        recordFeatures.length = 0\r\n        recordFeatures.push(...data)\r\n        let flag = false\r\n        that.recordTimer = setInterval(function () {\r\n          if (flag) {\r\n            clearInterval(that.recordTimer);\r\n            return\r\n          }\r\n          setTimeout(() => {\r\n            if (that.recordTimer) {\r\n              clearInterval(that.recordTimer);\r\n            }\r\n          }, 10000)\r\n          console.log('1')\r\n          if (that.isOnLoaded() && mapObj.mapInstance.map.getSource(\"initInspLineSource\") && mapObj.mapInstance.map.isSourceLoaded(\"initInspLineSource\")) {\r\n            let filterData = [\"in\", \"id\"];\r\n            filterData.push(...recordFeatures)\r\n            console.log(filterData)\r\n\r\n            const boxFeatures = mapObj.mapInstance.map.querySourceFeatures(\"initInspLineSource\", {\r\n              filter: filterData\r\n            })\r\n            console.log(boxFeatures)\r\n            boxFeatures.forEach(feat => {\r\n              // 如果不存在这个state\r\n              if (!feat.state || !feat.state.isInsp) {\r\n                mapObj.map.setFeatureState({\r\n                  source: \"initInspLineSource\",\r\n                  id: feat.id\r\n                }, {\r\n                  isInsp: true\r\n                })\r\n              }\r\n            })\r\n            if (filterData.length >= 3 && boxFeatures.length > 0) {\r\n              flag = true\r\n            }\r\n          }\r\n        }, 500);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 初始化图层，初始管线图层，已巡检管线图层，未巡检管线图层，选中当前管线图层\r\n    addLineGeoLayer() {\r\n      // 巡检人员范围管线\r\n      // mapObj.mapInstance.addSource(\"inspUserLineSource\", {\r\n      //   type: \"geojson\",\r\n      //   data: {\r\n      //     type: \"FeatureCollection\",\r\n      //     features: []\r\n      //   }\r\n      // });\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"inspUserLineLayer\",\r\n      //   type: \"line\",\r\n      //   source: \"inspUserLineSource\",\r\n      //   paint: {\r\n      //     \"line-color\": \"#4264FB\",\r\n      //     \"line-width\": 3\r\n      //   }\r\n      // }, \"rangeLayer\");\r\n      // 初始化管线图层\r\n      mapObj.mapInstance.map.addSource(\"initInspLineSource\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"initInspLineLayer\",\r\n        type: \"line\",\r\n        source: \"initInspLineSource\",\r\n        paint: {\r\n          \"line-color\": [\r\n            'case',\r\n            ['boolean', ['feature-state', 'isInsp'], false],\r\n            \"#44BA5A\",\r\n            \"#FF0000\"\r\n          ],\r\n          \"line-width\": 3\r\n        }\r\n      }, \"rd_map_outfall\");\r\n      // 未巡检管线图层\r\n      // mapObj.mapInstance.addSource(\"unInspLineSource\", {\r\n      //   type: \"geojson\",\r\n      //   data: {\r\n      //     type: \"FeatureCollection\",\r\n      //     features: []\r\n      //   }\r\n      // });\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"unInspLineLayer\",\r\n      //   type: \"line\",\r\n      //   source: \"unInspLineSource\",\r\n      //   paint: {\r\n      //     \"line-color\": \"#FF0000\",\r\n      //     \"line-width\": 3\r\n      //   }\r\n      // }, \"initInspLineLayer\");\r\n      // 已巡检管线图层\r\n      // mapObj.mapInstance.addSource(\"inspLineSource\", {\r\n      //   type: \"geojson\",\r\n      //   data: {\r\n      //     type: \"FeatureCollection\",\r\n      //     features: []\r\n      //   }\r\n      // });\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"inspLineLayer\",\r\n      //   type: \"line\",\r\n      //   source: \"inspLineSource\",\r\n      //   paint: {\r\n      //     \"line-color\": \"#44BA5A\",\r\n      //     \"line-width\": 3\r\n      //   }\r\n      // }, \"unInspLineLayer\");\r\n    },\r\n    setRecordData(val) {\r\n      let that = this;\r\n      mapObj.mapInstance.map.getLayer(\"rangeL\") && mapObj.mapInstance.map.removeLayer(\"rangeL\");\r\n      mapObj.mapInstance.map.getLayer(\"rangeM\") && mapObj.mapInstance.map.removeLayer(\"rangeM\");\r\n      mapObj.mapInstance.map.getSource(\"rangeS\") && mapObj.mapInstance.map.removeSource(\"rangeS\");\r\n      val.forEach(item => {\r\n        item.device_id = item.equipmentId;\r\n        item.geometry = item.geomTemp ? item.geomTemp : item.geom;\r\n        if (['热点', '热点用户群', '热点标签'].includes(item.yhType)) {\r\n          item.iconName = this.getIconName('done', item)\r\n        }\r\n      })\r\n      mapObj.mapInstance.map.getLayer(\"yhPipePointsLayer\") && mapObj.mapInstance.map.removeLayer(\"yhPipePointsLayer\");\r\n      mapObj.mapInstance.map.getSource(\"yhPipePoints\") && mapObj.mapInstance.map.removeSource(\"yhPipePoints\");\r\n      mapObj.mapInstance.map.getLayer(\"yhPipeLinesLayer\") && mapObj.mapInstance.map.removeLayer(\"yhPipeLinesLayer\");\r\n      mapObj.mapInstance.map.getSource(\"yhPipeLines\") && mapObj.mapInstance.map.removeSource(\"yhPipeLines\");\r\n      let features = val.map(item => {\r\n        if (item.geometry.type === 'Point')\r\n          return {\r\n            id: item.id,\r\n            properties: item,\r\n            geometry: item.geometry,\r\n            type: \"Feature\"\r\n          }\r\n      })\r\n      let features2 = val.map(item => {\r\n        if (item.geometry.type === 'LineString')\r\n          return {\r\n            id: item.id,\r\n            properties: item,\r\n            geometry: item.geometry,\r\n            type: \"Feature\"\r\n          }\r\n      })\r\n      console.log('features :>> ', features);\r\n      mapObj.mapInstance.map.addSource('yhPipePoints', {\r\n        'type': 'geojson',\r\n        'data': {\r\n          'type': 'FeatureCollection',\r\n          'features': features.filter((item) => {\r\n            return item != undefined\r\n          })\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer(\r\n        {\r\n          id: \"yhPipePointsLayer\",\r\n          type: \"symbol\",\r\n          source: \"yhPipePoints\",\r\n          \"layout\": {\r\n            // \"icon-image\": features[0].properties.yhType ? features[0].properties.yhType.indexOf('养护')>-1 ? \"wsj3\" : features[0].properties.yhType.indexOf('热点')>-1 ? \"wcrd\" : \"rwwc\" : \"wsj3\",\r\n            \"icon-image\": [\r\n              'case',\r\n              [\"==\", [\"has\", \"yhType\"], false],\r\n              \"wsj3\",\r\n              [\r\n                \"any\",\r\n                [\"==\", [\"get\", \"yhType\"], \"井养护\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"管网养护\"],\r\n              ],\r\n              \"wsj3\",\r\n              [\r\n                \"any\",\r\n                [\"==\", [\"get\", \"yhType\"], \"热点\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"热点标签\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"热点用户群\"],\r\n              ],\r\n              [\"get\", \"iconName\"],\r\n              [\r\n                \"any\",\r\n                [\"==\", [\"get\", \"yhType\"], \"用户群任务\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"标签任务\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"设备任务\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"井任务\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"管网任务\"],\r\n              ],\r\n              // \"rwwc\",\r\n              [\r\n                \"case\",\r\n                [\"==\", [\"get\", \"approveStatus\"], 2],\r\n                \"th\",\r\n                \"rwwc\"\r\n              ],\r\n              \"wsj3\"\r\n            ],\r\n            \"icon-size\": 0.55,\r\n            'icon-allow-overlap': true\r\n          },\r\n        },\r\n        \"user\"\r\n      );\r\n      mapObj.mapInstance.map.addSource('yhPipeLines', {\r\n        'type': 'geojson',\r\n        'data': {\r\n          'type': 'FeatureCollection',\r\n          'features': features2.filter((item) => {\r\n            return item != undefined\r\n          })\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer(\r\n        {\r\n          id: \"yhPipeLinesLayer\",\r\n          type: \"line\",\r\n          source: \"yhPipeLines\",\r\n          paint: {\r\n            \"line-color\": \"#44BA5A\",\r\n            \"line-width\": 3.5\r\n          }\r\n        },\r\n        \"user\"\r\n      );\r\n    },\r\n    getIconName(type, obj) {\r\n      switch (type) {\r\n        case 'todo':\r\n          switch (obj.name) {\r\n            case '低保户':\r\n              return 'dbh'\r\n            case '长辈':\r\n              return 'zb'\r\n            case '违规用户':\r\n              return 'wgyh'\r\n            case '一年内销户':\r\n              return 'ynnxh'\r\n            case '一年内报停':\r\n              return 'ynnbt'\r\n            case '基建表排查':\r\n              return 'jjb'\r\n            case '三期零吨':\r\n              return 'ld'\r\n            case '大流量客户':\r\n              return 'dll'\r\n            case '多期零吨':\r\n              return 'ld'\r\n            case '污水单独计量用户':\r\n              return 'wsddjlyh'\r\n            default:\r\n              return 'hotdata'\r\n          }\r\n        case 'selected':\r\n          switch (obj.name) {\r\n            case '低保户':\r\n              return 'dbhxz'\r\n            case '长辈':\r\n              return 'zbxz'\r\n            case '违规用户':\r\n              return 'wgyhxz'\r\n            case '一年内销户':\r\n              return 'ynnxhxz'\r\n            case '一年内报停':\r\n              return 'ynnbtxz'\r\n            case '基建表排查':\r\n              return 'jjbxz'\r\n            case '三期零吨':\r\n              return 'ldxz'\r\n            case '大流量客户':\r\n              return 'dllxz'\r\n            case '多期零吨':\r\n              return 'ldxz'\r\n            case '污水单独计量用户':\r\n              return 'wsddjlyhxz'\r\n            default:\r\n              return 'xzrd'\r\n          }\r\n        case 'done':\r\n          switch (obj.name) {\r\n            case '低保户':\r\n              return 'dbhwc'\r\n            case '长辈':\r\n              return 'zbwc'\r\n            case '违规用户':\r\n              return 'wgyhwc'\r\n            case '一年内销户':\r\n              return 'ynnxhwc'\r\n            case '一年内报停':\r\n              return 'ynnbtwc'\r\n            case '基建表排查':\r\n              return 'jjbwc'\r\n            case '三期零吨':\r\n              return 'ldwc'\r\n            case '大流量客户':\r\n              return 'dllwc'\r\n            case '多期零吨':\r\n              return 'ldwc'\r\n            case '污水单独计量用户':\r\n              return 'wsddjlyhwc'\r\n            default:\r\n              return 'wcrd'\r\n          }\r\n      }\r\n    },\r\n    setHotData(hotdata, index) {\r\n      let that = this;\r\n      // hotdata.forEach(item => {\r\n      //   item.device_id = item.code;\r\n      //   item.geometry = {\r\n      //     type: 'Point',\r\n      //     coordinates: [item.longi, item.lati]\r\n      //   };\r\n      // })\r\n      mapObj.mapInstance.map.getLayer(\"hotDataLayer\" + String(index)) && mapObj.mapInstance.map.removeLayer(\"hotDataLayer\" + String(index));\r\n      mapObj.mapInstance.map.getSource(\"hotDataSource\" + String(index)) && mapObj.mapInstance.map.removeSource(\"hotDataSource\" + String(index));\r\n      hotdata.forEach((item) => {\r\n        item.iconName = this.getIconName('todo', item)\r\n      })\r\n      let features = hotdata.map(item => {\r\n        return {\r\n          id: item.code,\r\n          properties: item,\r\n          geometry: item.geometry,\r\n          type: \"Feature\"\r\n        }\r\n      })\r\n      console.log('features :>> ', features);\r\n      mapObj.mapInstance.map.addSource('hotDataSource' + String(index), {\r\n        'type': 'geojson',\r\n        'data': {\r\n          'type': 'FeatureCollection',\r\n          'features': features\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer(\r\n        {\r\n          id: \"hotDataLayer\" + String(index),\r\n          type: \"symbol\",\r\n          source: \"hotDataSource\" + String(index),\r\n          \"layout\": {\r\n            \"icon-image\": [\"get\", \"iconName\"],\r\n            \"icon-size\": 0.5,\r\n            'icon-allow-overlap': true\r\n          },\r\n        }, 'unPointLayer0'\r\n      );\r\n      // console.log(mapObj.mapInstance.map.getStyle())\r\n    },\r\n    // 获取范围内设施\r\n    getRangs(taskId, callback) {\r\n      let that = this;\r\n      mapObj.mapInstance.map.getLayer(\"unLineLayer\") && mapObj.mapInstance.map.removeLayer(\"unLineLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"unPointLayer\") && mapObj.mapInstance.map.removeLayer(\"unPointLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"unPointLayerBiaozhu\") && mapObj.mapInstance.map.removeLayer(\"unPointLayerBiaozhu\");\r\n      mapObj.mapInstance.map.getSource(\"yhPipeVectorSource\") && mapObj.mapInstance.map.removeSource(\"yhPipeVectorSource\");\r\n      let url = baseUrl.url_config + `/yhsw-maintain/maintainTask/resultmvt/{x}/{y}/{z}?taskId=${taskId}`\r\n      mapObj.mapInstance.addSource(`yhPipeVectorSource`, {\r\n        type: \"vector\",\r\n        tiles: [url],\r\n        promoteId: 'id'\r\n      })\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"unLineLayer\",\r\n        type: \"line\",\r\n        source: \"yhPipeVectorSource\",\r\n        \"source-layer\": \"line\",\r\n        paint: {\r\n          \"line-color\": \"#ff0000\",\r\n          \"line-width\": 3\r\n        }\r\n      }, 'user')\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"unPointLayer\",\r\n        type: \"symbol\",\r\n        source: \"yhPipeVectorSource\",\r\n        \"source-layer\": \"point\",\r\n        \"layout\": {\r\n          \"icon-image\": \"wsj1\",\r\n          \"icon-size\": 0.5,\r\n          'icon-allow-overlap': true\r\n\r\n        }\r\n      }, 'user')\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"unPointLayerBiaozhu\",\r\n        type: \"symbol\",\r\n        source: \"yuhang_ws_wsj\",\r\n        \"source-layer\": \"ws_wsj\",\r\n        \"minzoom\": 18,\r\n        \"layout\": {\r\n          \"text-field\": ['concat', [\"get\", \"floorelevation\"], '/', [\"get\", \"depth\"]],\r\n          \"text-offset\": [1, 1]\r\n        }\r\n      }, 'user')\r\n      console.log(mapObj.mapInstance.map.getSource(\"yhPipeVectorSource\"))\r\n      if (callback) {\r\n        mapObj.mapInstance.map.off('click', this.callback)\r\n        this.callback = callback;\r\n        mapObj.mapInstance.map.on('click', callback)\r\n      }\r\n    },\r\n    getGridRangs(taskId, callback, ifMulti) {\r\n      let that = this;\r\n      that.multiTaskSAL.forEach((item) => {\r\n        mapObj.mapInstance.map.getLayer(\"unLineLayer\" + item) && mapObj.mapInstance.map.removeLayer(\"unLineLayer\" + item);\r\n        mapObj.mapInstance.map.getLayer(\"unPointLayer\" + item) && mapObj.mapInstance.map.removeLayer(\"unPointLayer\" + item);\r\n        mapObj.mapInstance.map.getSource(\"yhPipeVectorSource\" + item) && mapObj.mapInstance.map.removeSource(\"yhPipeVectorSource\" + item);\r\n      })\r\n      that.multiTaskSAL = []\r\n      mapObj.mapInstance.map.getLayer(\"unLineLayer\") && mapObj.mapInstance.map.removeLayer(\"unLineLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"unPointLayer\") && mapObj.mapInstance.map.removeLayer(\"unPointLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"unPointLayerBiaozhu\") && mapObj.mapInstance.map.removeLayer(\"unPointLayerBiaozhu\");\r\n      mapObj.mapInstance.map.getSource(\"yhPipeVectorSource\") && mapObj.mapInstance.map.removeSource(\"yhPipeVectorSource\");\r\n      console.log(taskId)\r\n      if (!ifMulti) {\r\n        let url = baseUrl.url_config + `/yhsw-grid/maintainTask/resultmvt/{x}/{y}/{z}?taskId=${taskId}`\r\n        mapObj.mapInstance.addSource(`yhPipeVectorSource`, {\r\n          type: \"vector\",\r\n          tiles: [url],\r\n          promoteId: 'id'\r\n        })\r\n        mapObj.mapInstance.map.addLayer({\r\n          id: \"unLineLayer0\",\r\n          type: \"line\",\r\n          source: \"yhPipeVectorSource\",\r\n          \"source-layer\": \"line\",\r\n          paint: {\r\n            \"line-color\": \"#ff0000\",\r\n            \"line-width\": 3\r\n          }\r\n        }, 'user')\r\n        mapObj.mapInstance.map.addLayer({\r\n          id: \"unPointLayer0\",\r\n          type: \"symbol\",\r\n          source: \"yhPipeVectorSource\",\r\n          \"source-layer\": \"point\",\r\n          \"layout\": {\r\n            \"icon-image\": \"rw1\",\r\n            \"icon-size\": 0.5,\r\n            'icon-allow-overlap': true\r\n\r\n          }\r\n        }, 'user')\r\n        that.multiTaskSAL.push('0')\r\n      } else {\r\n        // let urlArray = taskId.map((item)=>{\r\n        //   return baseUrl.url_config + `/yhsw-grid/maintainTask/resultmvt/{x}/{y}/{z}?taskId=${item}`\r\n        // })\r\n        // mapObj.mapInstance.addSource(`yhPipeVectorSource`, {\r\n        //   type: \"vector\",\r\n        //   tiles: urlArray,\r\n        //   promoteId: 'id'\r\n        // })\r\n        taskId.forEach((task, index) => {\r\n          let url = baseUrl.url_config + `/yhsw-grid/maintainTask/resultmvt/{x}/{y}/{z}?taskId=${task}`\r\n          mapObj.mapInstance.addSource(`yhPipeVectorSource` + String(index), {\r\n            type: \"vector\",\r\n            tiles: [url],\r\n            promoteId: 'id'\r\n          })\r\n          mapObj.mapInstance.map.addLayer({\r\n            id: \"unLineLayer\" + String(index),\r\n            type: \"line\",\r\n            source: \"yhPipeVectorSource\" + String(index),\r\n            \"source-layer\": \"line\",\r\n            paint: {\r\n              \"line-color\": \"#ff0000\",\r\n              \"line-width\": 3\r\n            }\r\n          }, 'user')\r\n          mapObj.mapInstance.map.addLayer({\r\n            id: \"unPointLayer\" + String(index),\r\n            type: \"symbol\",\r\n            source: \"yhPipeVectorSource\" + String(index),\r\n            \"source-layer\": \"point\",\r\n            \"layout\": {\r\n              \"icon-image\": \"rw\" + String(index % 8),\r\n              \"icon-size\": 0.5,\r\n              'icon-allow-overlap': true\r\n\r\n            }\r\n          }, 'user')\r\n          that.multiTaskSAL.push(String(index))\r\n        })\r\n      }\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"unLineLayer\",\r\n      //   type: \"line\",\r\n      //   source: \"yhPipeVectorSource\",\r\n      //   \"source-layer\": \"line\",\r\n      //   paint: {\r\n      //     \"line-color\": \"#ff0000\",\r\n      //     \"line-width\": 3\r\n      //   }\r\n      // }, 'cure')\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"unPointLayer\",\r\n      //   type: \"symbol\",\r\n      //   source: \"yhPipeVectorSource\",\r\n      //   \"source-layer\": \"point\",\r\n      //   \"layout\": {\r\n      //     \"icon-image\": \"wsj1\",\r\n      //     \"icon-size\": 0.5,\r\n      //     'icon-allow-overlap': true\r\n\r\n      //   }\r\n      // }, 'cure')\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"unPointLayerBiaozhu\",\r\n        type: \"symbol\",\r\n        source: \"yuhang_ws_wsj\",\r\n        \"source-layer\": \"ws_wsj\",\r\n        \"minzoom\": 18,\r\n        \"layout\": {\r\n          \"text-field\": ['concat', [\"get\", \"floorelevation\"], '/', [\"get\", \"depth\"]],\r\n          \"text-offset\": [1, 1]\r\n        }\r\n      }, 'user')\r\n      if (callback) {\r\n        mapObj.mapInstance.map.off('click', this.callback)\r\n        this.callback = callback;\r\n        mapObj.mapInstance.map.on('click', callback)\r\n      }\r\n    },\r\n    setRangFilter(done, status) {\r\n      let that = this\r\n      mapObj.mapInstance.map.getLayer(\"yhPipeLinesLayer\") && mapObj.mapInstance.map.setLayoutProperty('yhPipeLinesLayer', 'visibility', status ? 'none' : 'visible')\r\n      mapObj.mapInstance.map.getLayer(\"yhPipePointsLayer\") && mapObj.mapInstance.map.setLayoutProperty('yhPipePointsLayer', 'visibility', status ? 'none' : 'visible')\r\n      mapObj.mapInstance.map.setFilter('unLineLayer', status ? ['==', ['index-of', [\"get\", \"device_id\"], ['literal', done]], -1] : null)\r\n      mapObj.mapInstance.map.setFilter('unPointLayer', status ? ['==', ['index-of', [\"get\", \"device_id\"], ['literal', done]], -1] : null)\r\n    },\r\n    rangClick(feature) {\r\n      let that = this;\r\n      console.log(feature)\r\n      mapObj.mapInstance.map.getLayer(\"rangeL\") && mapObj.mapInstance.map.removeLayer(\"rangeL\");\r\n      mapObj.mapInstance.map.getLayer(\"rangeM\") && mapObj.mapInstance.map.removeLayer(\"rangeM\");\r\n      mapObj.mapInstance.map.getSource(\"rangeS\") && mapObj.mapInstance.map.removeSource(\"rangeS\");\r\n      var features = feature[0];\r\n      mapObj.mapInstance.map.addSource('rangeS', {\r\n        'type': 'geojson',\r\n        'data': {\r\n          'type': 'FeatureCollection',\r\n          'features': [features]\r\n        }\r\n      });\r\n      if (features.geometry.type === 'LineString') {\r\n        mapObj.mapInstance.addLayer(\r\n          {\r\n            id: \"rangeL\",\r\n            type: \"line\",\r\n            source: \"rangeS\",\r\n            paint: {\r\n              \"line-color\": \"#FFFF00\",\r\n              \"line-width\": 7,\r\n            },\r\n          },\r\n          \"initInspLineLayer\"\r\n        );\r\n      } else {\r\n        mapObj.mapInstance.addLayer(\r\n          {\r\n            id: \"rangeM\",\r\n            type: \"symbol\",\r\n            source: \"rangeS\",\r\n            \"layout\": {\r\n              \"icon-image\": features.properties.yhType ? features.properties.yhType.indexOf('养护') > -1 ? \"wsj2\" : features.properties.yhType.indexOf('热点') > -1 ? this.getIconName('selected', features.properties) : features.properties.approveStatus == 2 ? \"thxz\" : \"rwxz\" : \"wsj2\",\r\n              \"icon-size\": features.properties.yhType ? features.properties.yhType.indexOf('养护') > -1 ? 0.7 : 0.5 : 0.7\r\n            },\r\n          },\r\n          \"yhPipePointsLayer\"\r\n        );\r\n      }\r\n      let coordinates = features.geometry.type === 'Point' ? features.geometry.coordinates : features.geometry.coordinates[0];\r\n      that.flyTo({ position: coordinates, zoom: 17 })\r\n    },\r\n    listLicik(val) {\r\n      let newData = val.new.item;\r\n      let features = [{\r\n        type: 'feature',\r\n        geometry: JSON.parse(newData.geom),\r\n        properties: newData,\r\n      }]\r\n      this.rangClick(features)\r\n    },\r\n\r\n    /**\r\n     * 提供坐标数组，返回中心点,限线和面\r\n     * @param {*} position 坐标数组\r\n     */\r\n    getCenter(position) {\r\n      let coord = [];\r\n      let center;\r\n      if (position instanceof Array && position.length !== 0) {\r\n        let pos1 = position[0];\r\n        if (pos1 instanceof Array) {\r\n          let pos2 = pos1[0];\r\n          if (pos2 instanceof Array) {\r\n            center = turf.center(turf.polygon(position));\r\n          } else {\r\n            center = turf.center(turf.lineString(position));\r\n          }\r\n        }\r\n      }\r\n      if (center) {\r\n        coord = center.geometry.coordinates;\r\n      }\r\n      return coord;\r\n    },\r\n\r\n    paintingRange({\r\n      position = [],\r\n      color = \"#ff4a4a\",\r\n      lineWidth = 3,\r\n      circleRadius = 3,\r\n      boldBorder,\r\n      borderWidth = 5,\r\n      isRepaint = true,\r\n      lineDasharray\r\n    }) {\r\n      let features = [];\r\n      if (position instanceof Array && position[0] instanceof Array) {\r\n        let pos1 = position[0];\r\n        if (pos1[0] instanceof Array) {\r\n          position.forEach(line => {\r\n            let feature;\r\n            if (this.getArrayGeo(line) == 2) {\r\n              feature = turf.lineString(line);\r\n              features.push(feature);\r\n            } else if (this.getArrayGeo(line) == 3) {\r\n              feature = turf.multiLineString(line);\r\n              features.push(feature);\r\n            } else if (this.getArrayGeo(line) == 4) {\r\n              feature = turf.polygonToLine(turf.multiPolygon(line));\r\n              feature.features.forEach(f => {\r\n                features.push(f)\r\n              })\r\n            }\r\n          })\r\n          if (boldBorder instanceof Array) {\r\n            features = features.concat(turf.lineString(boldBorder, { name: \"boldBorder\" }));\r\n            this.addRangeLayer2({ features, color, lineWidth, lineDasharray, borderWidth, isRepaint })\r\n          } else {\r\n            this.addRangeLayer2({ features, color, lineWidth, lineDasharray, isRepaint })\r\n          }\r\n        } else {\r\n          let feature = turf.lineString(position);\r\n          features.push(feature);\r\n          this.addRangeLayer2({ features, color, lineWidth, lineDasharray, isRepaint })\r\n        }\r\n      } else if (position instanceof Array && position.length !== 0) {\r\n        let feature = turf.point(position);\r\n        features.push(feature);\r\n        this.addRangeLayer2({ features, color, circleRadius, isRepaint })\r\n      } else {\r\n        this.addRangeLayer2({ features, color, isRepaint });\r\n      }\r\n    },\r\n    getArrayGeo(arr = []) {\r\n      let num = 0;\r\n      function bl(arr) {\r\n        if (arr instanceof Array) {\r\n          num++;\r\n          bl(arr[0]);\r\n        }\r\n      }\r\n      bl(arr);\r\n      return num;\r\n    },\r\n    addRangeLayer2({ features, color, lineWidth, lineDasharray, circleRadius, borderWidth, isRepaint }) {\r\n      // let that = this;\r\n      console.log('features :>> ', features);\r\n      let layerId = \"rangeLayer2\";\r\n      // function makeId(id = \"rangeLayer2\"){\r\n      //     if(that.map.getSource(id)){\r\n      //         makeId(id++)\r\n      //     }else{\r\n      //         layerId = id;\r\n      //     }\r\n      // }\r\n      // makeId();\r\n      if (isRepaint) {\r\n        this.removeRangeLayer();\r\n      }\r\n      mapObj.mapInstance.addSource(layerId, {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features,\r\n        }\r\n      });\r\n      if (circleRadius) {\r\n        mapObj.mapInstance.addLayer({\r\n          id: layerId,\r\n          source: layerId,\r\n          type: \"circle\",\r\n          paint: {\r\n            \"circle-radius\": circleRadius,\r\n            \"circle-color\": color\r\n          }\r\n        })\r\n      } else if (lineWidth) {\r\n        mapObj.mapInstance.addLayer({\r\n          id: layerId,\r\n          source: layerId,\r\n          type: \"line\",\r\n          paint: {\r\n            \"line-color\": color,\r\n            \"line-width\": [\r\n              'case',\r\n              ['==', ['get', 'name'], 'boldBorder'],\r\n              borderWidth || 0,\r\n              lineWidth\r\n            ],\r\n            \"line-dasharray\": lineDasharray || []\r\n          }\r\n        })\r\n      }\r\n    },\r\n    removeRangeLayer() {\r\n      if (mapObj.mapInstance.map.getLayer(\"rangeLayer2\")) mapObj.mapInstance.map.removeLayer(\"rangeLayer2\");\r\n      if (mapObj.mapInstance.map.getSource(\"rangeLayer2\")) mapObj.mapInstance.map.removeSource(\"rangeLayer2\");\r\n    },\r\n\r\n    /**\r\n     * 点，多点，线，多线，面，多面定位\r\n     * @param {*} position 定位坐标\r\n     * @param {*} reset 若不传坐标，是否定位到初始位置\r\n     */\r\n    makeLocation(position, reset = true) {\r\n      let type = '';\r\n      if (position instanceof Array && position.length !== 0) {\r\n        if (position[0] instanceof Array) {\r\n          let pos1 = position[0];\r\n          if (pos1[0] instanceof Array) {\r\n            let pos2 = pos1[0]\r\n            if (pos2[0] instanceof Array) {\r\n              var multipolygon = turf.multiPolygon(position);\r\n              var bbox = turf.bbox(multipolygon);\r\n              var bboxPolygon = turf.bboxPolygon(bbox);\r\n              type = 'multipolygon';\r\n            } else {\r\n              var polygon = turf.polygon(position);\r\n              var bbox = turf.bbox(polygon);\r\n              var bboxPolygon = turf.bboxPolygon(bbox);\r\n              type = 'polygon';\r\n            }\r\n          } else {\r\n            var line = turf.lineString(position);\r\n            var bbox = turf.bbox(line);\r\n            var bboxPolygon = turf.bboxPolygon(bbox);\r\n            type = 'line';\r\n          }\r\n          var v2 = new mapboxgl.LngLatBounds(bboxPolygon.geometry.coordinates[0][0], bboxPolygon.geometry.coordinates[0][2])\r\n          mapObj.mapInstance.map.fitBounds(v2, {\r\n            linear: false,\r\n            padding: { top: 60, bottom: 60, left: 60, right: 60 }\r\n          });\r\n        } else {\r\n          this.flyTo({ position: position, zoom: 14 });\r\n          type = 'point';\r\n        }\r\n      } else if (reset) {\r\n        mapObj.mapInstance.map.fitBounds([[120.38188484498045, 30.56868547578088], [119.51549097554295, 30.178356987720612]], {\r\n          linear: false\r\n        });\r\n        type = 'errPosition'\r\n      }\r\n      return type;\r\n    },\r\n\r\n    // 切换供水，雨水，污水瓦片\r\n    async changePipeTileLayer(inspBusinessType) {\r\n      mapObj.mapInstance.addSource('lightLayer', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"lightPoint\",\r\n        type: \"symbol\",\r\n        source: \"lightLayer\",\r\n        filter: [\"==\", \"$type\", \"Point\"],\r\n        layout: {\r\n          'icon-size': 1.4,\r\n          'icon-image': [...this.GSL.slice(0, this.GSL.length - 1), ...this.WSL.slice(1, this.WSL.length - 1), ...this.YSL.slice(1)],\r\n          'icon-ignore-placement': true,\r\n          'icon-allow-overlap': true\r\n        }\r\n      }, \"lightLayer\")\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"lightLine\",\r\n        type: \"line\",\r\n        source: \"lightLayer\",\r\n        filter: [\"==\", \"$type\", \"LineString\"],\r\n        paint: {\r\n          'line-width': 3,\r\n          'line-color': \"red\",\r\n        }\r\n      }, \"lightLayer\");\r\n      this.addBufferLayer();\r\n      this.addRangeLayer();\r\n      this.addInspUserLayer();\r\n      this.addKeyPointLayer();\r\n      this.isOnLoad = true;\r\n    },\r\n    // 通过业务类型改变图层显示\r\n    changePipeTileLayerByBusiness(type) {\r\n      switch (type) {\r\n        case \"WATER_SUPPLY\":\r\n          this.gsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'visible');\r\n          })\r\n          this.ysLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.ysLayers[index], 'visibility', 'none');\r\n          })\r\n          this.wsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.wsLayers[index], 'visibility', 'none');\r\n          })\r\n          break;\r\n        case \"RAI_WATER\":\r\n          this.ysLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.ysLayers[index], 'visibility', 'visible');\r\n          })\r\n          this.gsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'none');\r\n          })\r\n          this.wsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.wsLayers[index], 'visibility', 'none');\r\n          })\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          this.wsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.wsLayers[index], 'visibility', 'visible');\r\n          })\r\n          this.ysLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.ysLayers[index], 'visibility', 'none');\r\n          })\r\n          this.gsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'none');\r\n          })\r\n          break;\r\n        default:\r\n          this.wsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.wsLayers[index], 'visibility', 'none');\r\n          })\r\n          this.ysLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.ysLayers[index], 'visibility', 'none');\r\n          })\r\n          this.gsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'none');\r\n          })\r\n          break;\r\n      }\r\n      try {\r\n        const that = this;\r\n        var timer = setInterval(function () {\r\n          if (that.isOnLoaded()) {\r\n            clearInterval(timer);\r\n            mapObj.mapInstance.changeBZLayer(type);\r\n          }\r\n        }, 100)\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    // 通过业务类型改变图层显示 三网合一\r\n    changeLayerByBusiness({ gs = 'none', ys = 'none', ws = 'none' }) {\r\n      if (!mapObj.mapInstance) return\r\n      let gsLayerType = LayerType['供水'][0].concat(LayerType['供水'][1])\r\n      let wsLayerType = LayerType['污水'][0].concat(LayerType['污水'][1])\r\n      let ysLayerType = LayerType['雨水'][0].concat(LayerType['雨水'][1])\r\n      gsLayerType.forEach((item, index) => {\r\n        mapObj.mapInstance.map.setLayoutProperty(item.id, 'visibility', gs);\r\n      })\r\n      ysLayerType.forEach((item, index) => {\r\n        mapObj.mapInstance.map.setLayoutProperty(item.id, 'visibility', ys);\r\n      })\r\n      wsLayerType.forEach((item, index) => {\r\n        mapObj.mapInstance.map.setLayoutProperty(item.id, 'visibility', ws);\r\n      })\r\n      this.isOnLoad = true;\r\n    },\r\n    // 添加巡检人员\r\n    addInspUserLayer() {\r\n      mapObj.mapInstance.addSource(\"inspUser\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        },\r\n        generateId: true\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"inspUserLayer\",\r\n        type: \"symbol\",\r\n        source: \"inspUser\",\r\n        layout: {\r\n          \"icon-image\": \"userInsp\",\r\n          \"icon-size\": 0.2,\r\n          \"icon-allow-overlap\": true,//自动避让属性\r\n          \"icon-ignore-placement\": true,\r\n        }\r\n      }, \"unInspLineLayer\");\r\n    },\r\n    getDirection() {\r\n      window.addEventListener('deviceorientationabsolute', this.setRotate)\r\n      this.hasListen = true\r\n    },\r\n\r\n    // 设置巡检人员位置\r\n    setInspUserPosition(position) {\r\n      // xCode，yCode为经纬度\r\n      const coord = [parseFloat(position.longitude), parseFloat(position.latitude)];\r\n      const point = turf.point(coord);\r\n      try {\r\n        const that = this;\r\n        // 定时器\r\n        var timer = setInterval(function () {\r\n          // 如果地图实例创建、巡检人员图层存在且加载完毕\r\n          if (that.isOnLoaded()\r\n            && mapObj.map.getSource(\"inspUser\")\r\n            && mapObj.map.isSourceLoaded(\"inspUser\")\r\n          ) {\r\n            // 清除定时器\r\n            clearInterval(timer);\r\n            // 巡检人员图标\r\n            mapObj.mapInstance.setSourceData(\"inspUser\", {\r\n              type: \"FeatureCollection\",\r\n              features: [point]\r\n            })\r\n            !that.hasListen && that.getDirection()\r\n            // 如果开始巡检，地图以人员为中心\r\n            let changeLine = localStorage.getItem(\"startRecordLines\");\r\n            // 如果上报事件，取消地图设置中心操作\r\n            // let isReportEvent = localStorage.getItem(\"isReportEvent\");\r\n            if (changeLine == 'start') {\r\n              mapObj.map.setCenter(coord);\r\n            }\r\n          }\r\n        }, 100)\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    setRotate(e) {\r\n      let bearing = (e.alpha - 180) >= 0 ? (180 - e.alpha) : (180 - e.alpha)\r\n      // 调整罗盘方向\r\n      mapObj.map && mapObj.map.setLayoutProperty(\"inspUserLayer\", \"icon-rotate\", bearing);\r\n    },\r\n    // 设置巡检管线为已巡检\r\n    changeInspLineState(geometry) {\r\n      let that = this\r\n      // 将地理坐标系转化为屏幕坐标系\r\n      function geoTransToPixel(geom) {\r\n        const polygonBox = turf.bbox(geom);\r\n        const southWest = [polygonBox[0], polygonBox[1]];\r\n        const northEast = [polygonBox[2], polygonBox[3]];\r\n        let southWestPointPixel = mapObj.map.project(southWest);\r\n        let northEastPointPixel = mapObj.map.project(northEast);\r\n        // 增大bbox的查询范围\r\n        southWestPointPixel = [\r\n          southWestPointPixel.x - 50,\r\n          southWestPointPixel.y + 50\r\n        ]\r\n        northEastPointPixel = [\r\n          northEastPointPixel.x + 50,\r\n          northEastPointPixel.y - 50\r\n        ]\r\n        return [southWestPointPixel, northEastPointPixel];\r\n      }\r\n      // 对每个划分出来的bbox进行处理\r\n      function chunk(geom) {\r\n        // let wasLoaded = false;\r\n        // if (wasLoaded) return;\r\n        const boxFeatures = mapObj.map.queryRenderedFeatures(geoTransToPixel(geom), {\r\n          layers: [\"initInspLineLayer\"]\r\n        });\r\n        console.log(boxFeatures, 'boxFeatures')\r\n        let tempPipeList = []\r\n        boxFeatures.forEach(feat => {\r\n          try {\r\n            // const result = turf.intersect(feat.geometry, geometry);\r\n            const result = turf.booleanDisjoint(feat.geometry, geometry)\r\n            // 如果查出的要素与真实的范围相交且没有被巡检过，则改变其状态,并记录其关键字\r\n            if (!result && !feat.state.isInsp) {\r\n              mapObj.map.setFeatureState({\r\n                source: feat.source,\r\n                id: feat.id\r\n              }, { isInsp: true })\r\n              let date = that.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n              tempPipeList.push({\r\n                inspDate: date,\r\n                pipeId: feat.id,\r\n                ext3: feat.properties.bizType,\r\n                pipeLength: feat.properties['length'] || 0,\r\n                taskId: that.$route.query.taskId\r\n              })\r\n              // for (let it of tempPipeList) {\r\n              //   if (it.pipeId != feat.id) {\r\n              //     tempPipeList.push({\r\n              //       inspDate: date,\r\n              //       pipeId: feat.id,\r\n              //       pipeLength: feat.properties['length'] || 0,\r\n              //       taskId: that.$route.query.taskId\r\n              //     })\r\n              //   }\r\n              // }\r\n            }\r\n          } catch (error) {\r\n            console.log(error)\r\n          }\r\n        })\r\n        tempPipeList.length > 0 && recordInspLine(tempPipeList).then(res => {\r\n          if (res.status) {\r\n            console.log('管线上传成功')\r\n            bus.$emit('updateData')\r\n          } else {\r\n            console.log('上传失败的tempPipeList: ', tempPipeList);\r\n            this.uploadFiledPipeIdList.push(...tempPipeList)\r\n          }\r\n        })\r\n        // wasLoaded = true;\r\n        // mapObj.mapInstance.map.on('sourcedata', function () {\r\n        // })\r\n      }\r\n      function cb(features) {\r\n        if (features.length > 0 && that.isOnLoaded()) {\r\n          setTimeout(() => {\r\n            chunk(features.shift());\r\n            cb(features);\r\n          }, 100);\r\n        }\r\n      }\r\n      cb([geometry]);\r\n    },\r\n    findHadInspFeature() {\r\n      const that = this;\r\n      return new Promise(function (resolve, reject) {\r\n        try {\r\n          if (recordFeatures.length <= 0) {\r\n            resolve([]);\r\n          }\r\n          let data = [...new Set(recordFeatures)];\r\n          let filterData = [\"in\", \"guid\"];\r\n          data.forEach((item, index) => {\r\n            filterData.push(data[index]);\r\n          })\r\n          var timer = setInterval(function () {\r\n            if (that.isOnLoaded() && mapObj.mapInstance.map.getSource(\"rangePipeVector\")) {\r\n              clearInterval(timer);\r\n              mapObj.mapInstance.map.once(\"data\", function () {\r\n                const boxFeatures = mapObj.mapInstance.map.querySourceFeatures(\"rangePipeVector\", {\r\n                  sourceLayer: \"line\",\r\n                  filter: filterData\r\n                })\r\n                boxFeatures.forEach(feat => {\r\n                  mapObj.mapInstance.map.setFeatureState({\r\n                    source: \"rangePipeVector\",\r\n                    sourceLayer: \"line\",\r\n                    id: feat.id\r\n                  }, {\r\n                    insp: true\r\n                  })\r\n                })\r\n                resolve(boxFeatures);\r\n              })\r\n            }\r\n          }, 500)\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      })\r\n    },\r\n    // 根据速度改变巡检管线颜色\r\n    async changeInspLineSourceBySpeed(position) {\r\n      const coord = [parseFloat(position.longitude), parseFloat(position.latitude)];\r\n      // const coord = [115.9466387418314, 39.06638916509243] // 测试\r\n      const point = turf.point(coord);\r\n      try {\r\n        const that = this;\r\n        var timer = setInterval(function () {\r\n          if (that.isOnLoaded() && mapObj.mapInstance.map.getSource(\"inspUser\") && mapObj.mapInstance.map.isSourceLoaded(\"inspUser\")) {\r\n            clearInterval(timer);\r\n            let changeLine = localStorage.getItem(\"startRecordLines\");\r\n            // if (changeLine == 'start') {\r\n              if (true) {\r\n              // 改变周围要素的状态\r\n              let buffered = turf.buffer(point, that.$route.query.taskType == '人巡' ? 0.020 : 0.050, { unit: 'kilometers' });\r\n              that.changeInspLineState(buffered);\r\n            }\r\n          }\r\n        }, 100)\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    // 新增上报事件marker\r\n    addReportEventMarker(position, callback) {\r\n      const that = this;\r\n      const src = require(`@/assets/img/legend/eventPoint.png`);\r\n      // 如果存在id为eventPointMarker的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n      let currentEle = document.getElementById(\"eventPointMarker\");\r\n      if (currentEle) {\r\n        currentEle.parentNode.removeChild(currentEle);\r\n      }\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"eventPointMarker\" src=\"${src}\" width=\"40\" height=\"40\">\r\n        `\r\n\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n        offset: [0, 0],\r\n        // draggable: true\r\n      });\r\n\r\n      marker\r\n        .setLngLat(position)\r\n        .addTo(mapObj.mapInstance.map);\r\n\r\n      // function onDragEnd() {\r\n      //   let lngLat = marker.getLngLat();\r\n      //   console.log(\"onDragEnd==>\", lngLat);\r\n      //   const pos = [lngLat.lng, lngLat.lat];\r\n      //   bus.$emit(\"eventMarkerPosition\", pos);\r\n      // }\r\n      // marker.on('dragend', onDragEnd);\r\n      // 更换选位置的交互逻辑\r\n      function onTouchEnd() {\r\n        let lngLat = mapObj.mapInstance.map.getCenter();\r\n        const pos = [lngLat.lng, lngLat.lat];\r\n        bus.$emit(\"eventMarkerPosition\", pos);\r\n      }\r\n      mapObj.mapInstance.map.on('touchend', onTouchEnd);\r\n      function onTouchMove() {\r\n        let lngLat = mapObj.mapInstance.map.getCenter();\r\n        const pos = [lngLat.lng, lngLat.lat];\r\n        marker.setLngLat(pos);\r\n      }\r\n      mapObj.mapInstance.map.on('touchmove', onTouchMove);\r\n      function onMoveEnd() {\r\n        let lngLat = mapObj.mapInstance.map.getCenter();\r\n        const pos = [lngLat.lng, lngLat.lat];\r\n        marker.setLngLat(pos);\r\n      }\r\n      mapObj.mapInstance.map.on('moveend', onMoveEnd);\r\n      if (callback) {\r\n        mapObj.mapInstance.map.off('click', this.callback)\r\n        this.callback = callback;\r\n        mapObj.mapInstance.map.on('click', callback)\r\n      }\r\n    },\r\n\r\n    addAllViewsLayers(type = '供水') {\r\n      const layer = layers[type];\r\n      mapObj.mapInstance.map.on('click', this.layerClick1);\r\n      (layer || []).forEach(item => {\r\n        if (!mapObj.map.getLayer(item.layer.id)) {\r\n          mapObj.map.addLayer(item.layer);\r\n          if (item.markId && !mapObj.map.getLayer(item.markId.id))\r\n            mapObj.map.addLayer(item.markId);\r\n        }\r\n      })\r\n    },\r\n    removeAllViewsLayers(type = '供水') {\r\n      const layer = layers[type];\r\n      mapObj.mapInstance.map.off('click', this.layerClick1);\r\n      (layer || []).forEach(item => {\r\n        if (mapObj.map.getLayer(item.layer.id)) {\r\n          mapObj.map.removeLayer(item.layer.id);\r\n          if (item.markId && mapObj.map.getLayer(item.markId.id))\r\n            thismap.removeLayer(item.markId.id);\r\n        }\r\n      })\r\n    },\r\n    setAllViewsLayersVisible(type = '供水', visible = 'visible') {\r\n      const layer = layers[type];\r\n      (layer || []).forEach(item => {\r\n        if (mapObj.map.getLayer(item.layer.id)) {\r\n          mapObj.map.setLayoutProperty(item.layer.id, 'visibility', visible);\r\n          if (item.markId && mapObj.map.getLayer(item.markId.id))\r\n            mapObj.map.setLayoutProperty(item.markId.id, 'visibility', visible);\r\n        }\r\n      })\r\n    }\r\n  },\r\n}"],"mappings":"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"}]}