{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\MeterReading\\BookIndex.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\MeterReading\\BookIndex.vue","mtime":1708935543695},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IE5hdkJhciwgTGlzdCwgUHVsbFJlZnJlc2gsIFRvYXN0IH0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInOwppbXBvcnQgeyBnZXRSZWFkaW5nQm9vayB9IGZyb20gJy4vYXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFtOYXZCYXIubmFtZV06IE5hdkJhciwKICAgIFtMaXN0Lm5hbWVdOiBMaXN0LAogICAgW1B1bGxSZWZyZXNoLm5hbWVdOiBQdWxsUmVmcmVzaCwKICAgIFtUb2FzdC5uYW1lXTogVG9hc3QKICB9LAogIHByb3BzOiB7CiAgICB0eXBlOiBudWxsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBpbkV4ZWN1dGlvblBhZ2U6IDEsCiAgICAgIHRvZG9QYWdlOiAxLAogICAgICBmaW5pc2hlZFBhZ2U6IDEsCiAgICAgIHBsYW5MaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHBhZ2VSZXNldCgpIHsKICAgICAgdGhpcy5pbkV4ZWN1dGlvblBhZ2UgPSAxOwogICAgICB0aGlzLnRvZG9QYWdlID0gMTsKICAgICAgdGhpcy5maW5pc2hlZFBhZ2UgPSAxOwogICAgfSwKICAgIC8vIOmhtemdouWKoOi9vS/kuIvmi4nliLfmlrAKICAgIG9uUmVmcmVzaCgpIHsKICAgICAgdGhpcy5wYWdlUmVzZXQoKTsKICAgICAgdGhpcy5maXJzdFJlcXVlc3RGaW5pc2hlZCA9IGZhbHNlOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDliJfooajliqDovb3mm7TlpJoKICAgIG9uTG9hZCgpIHsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIGxldCB1aWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3NfdXNlcklkJyk7CiAgICAgIGxldCBwYXJhbXMgPSB7fTsKICAgICAgcGFyYW1zLmNoYXJnZVBlcnNvbiA9IHVpZDsKICAgICAgcGFyYW1zLnR5cGUgPSB0aGlzLnR5cGUgPT0gJ3N1cnZleScgPyAnWkNCUycgOiAnU0RDQic7CiAgICAgIGdldFJlYWRpbmdCb29rKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgdGhpcy5wbGFuTGlzdCA9IHJlcy5kYXRhOwogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5yZWZyZXNoaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5maXJzdFJlcXVlc3RGaW5pc2hlZCA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIHRvVGFzayhjb2RlKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdib29rQ29kZScsIGNvZGUpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza1R5cGUnLCB0aGlzLnR5cGUpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ1Rhc2tJbmRleCcKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TG9jYXRpb24oKSB7CiAgICAgIC8qKgogICAgICAgKiB7CiAgICAgICAgICAgICAgImFjY3VyYWN5IjogIiIsICAgIC8v5a6a5L2N57K+5bqm77yIQW5kcm9pZOi/lOWbnu+8iQogICAgICAgICAgICAgICJhZGRyZXNzIjogIua1meaxn+ecgeadreW3nuW4guS9meadreWMuuaZuua6oui3r+mdoOi/keS4reWbvSjmna3lt54p5Lq65bel5pm66IO95bCP6ZWHIiwg77yI6Iul6K+35rGC5Zue6YCG5Zyw55CG5L2N572u5L+h5oGv5YiZ6L+U5Zue77yJCiAgICAgICAgICAgICAgImxhdGl0dWRlIjogIjMwLjI3MDY0Njk3MjY1NjI1MTciLO+8iOW/hei/lOWbnu+8iQogICAgICAgICAgICAgICJsb25naXR1ZGUiOiIxMTkuOTY1ODY4MDU1NTU1NTYwNSIs77yI5b+F6L+U5Zue77yJCiAgICAgICAgICAgICAgImxvY1RpbWUiOiIyMDIyLTAzLTA5IDA5OjQ1OjE5IizvvIjlv4Xov5Tlm57vvIkKICAgICAgICAgICAgICAibG9jVHlwZSI6IiIgICAgLy/lrprkvY3mqKHlvI/vvIhBbmRyb2lk6L+U5Zue77yJCiAgICAgICAgICB9CiAgICAgICAqLwogICAgICBpZiAodHlwZW9mIHl1YW5jaHUgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICB5dWFuY2h1LmxvY2F0aW9uQU1hcC5yZXF1ZXN0U2luZ2xlTG9jYXRpb24oWycxJ10sIHJlcyA9PiB7CiAgICAgICAgICBsZXQgdXNlclBvc2l0aW9uID0gW3Jlcy5sb25naXR1ZGUsIHJlcy5sYXRpdHVkZV07CiAgICAgICAgICB0aGlzLnVwUG9zaXRpb24odXNlclBvc2l0aW9uKTsKICAgICAgICB9LCBlcnIgPT4ge30pOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgVG9hc3QubG9hZGluZyh7CiAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICBmb3JiaWRDbGljazogdHJ1ZQogICAgfSk7CiAgICB0aGlzLm9uUmVmcmVzaCgpOwogICAgdGhpcy5nZXRMb2NhdGlvbigpOwogIH0KfTs="},{"version":3,"names":["NavBar","List","PullRefresh","Toast","getReadingBook","components","name","props","type","data","refreshing","loading","inExecutionPage","todoPage","finishedPage","planList","methods","pageReset","onRefresh","firstRequestFinished","getList","onLoad","uid","localStorage","getItem","params","chargePerson","then","res","finally","toTask","code","setItem","$router","push","getLocation","yuanchu","locationAMap","requestSingleLocation","userPosition","longitude","latitude","upPosition","err","mounted","message","forbidClick"],"sources":["src/views/MeterReading/BookIndex.vue"],"sourcesContent":["<template>\n  <div id='BookIndex'>\n    <fm-pull-refresh id='BookIndex' v-model='refreshing' success-text='刷新成功' @refresh='onRefresh'>\n      <fm-nav-bar title='我的表册' left-arrow @click-left=\"$router.replace('/index')\">\n      </fm-nav-bar>\n      <div class='plan-container'>\n        <fm-list v-model='loading' @load='onLoad' :immediate-check='false'>\n          <div v-for='(item, index) in planList' :key='index' class='list-item' @click='toTask(item.bookCode)'>\n            <img src='@/assets/svg/doc_books.svg'>\n            <span class='ptitle'>{{ item.bookName }}</span>\n          </div>\n        </fm-list>\n        <template v-if='planList && planList.length == 0'>\n          <div class='no-data-img'>\n            <fm-image fit='cover' :src=\"require('@/assets/img/no-data-img.png')\" />\n          </div>\n          <div class='no-data-text'>\n            <div class='no-data-text-descripe'>暂无表册数据</div>\n          </div>\n        </template>\n      </div>\n    </fm-pull-refresh>\n  </div>\n</template>\n<script>\nimport { NavBar, List, PullRefresh, Toast } from 'fawkes-mobile-lib'\nimport { getReadingBook } from './api'\n\nexport default {\n  components: {\n    [NavBar.name]: NavBar,\n    [List.name]: List,\n    [PullRefresh.name]: PullRefresh,\n    [Toast.name]: Toast\n  },\n  props: {\n    type: null\n  },\n  data() {\n    return {\n      refreshing: false,\n      loading: false,\n      inExecutionPage: 1,\n      todoPage: 1,\n      finishedPage: 1,\n      planList: []\n    }\n  },\n  methods: {\n    pageReset() {\n      this.inExecutionPage = 1\n      this.todoPage = 1\n      this.finishedPage = 1\n    },\n    // 页面加载/下拉刷新\n    onRefresh() {\n      this.pageReset()\n      this.firstRequestFinished = false\n      this.loading = true\n      this.getList()\n    },\n    // 列表加载更多\n    onLoad() {\n      this.getList()\n    },\n    getList() {\n      this.loading = false\n      let uid = localStorage.getItem('cs_userId')\n      let params = {}\n      params.chargePerson = uid\n      params.type = this.type == 'survey' ? 'ZCBS' : 'SDCB'\n      getReadingBook(params)\n        .then((res) => {\n          if (res.data) {\n            this.planList = res.data\n          }\n        })\n        .finally(() => {\n          this.loading = false\n          this.refreshing = false\n          this.firstRequestFinished = true\n        })\n    },\n    toTask(code) {\n      localStorage.setItem('bookCode', code)\n      localStorage.setItem('taskType', this.type)\n      this.$router.push({\n        name: 'TaskIndex'\n      })\n    },\n    getLocation() {\n      /**\n       * {\n              \"accuracy\": \"\",    //定位精度（Android返回）\n              \"address\": \"浙江省杭州市余杭区智溢路靠近中国(杭州)人工智能小镇\", （若请求回逆地理位置信息则返回）\n              \"latitude\": \"30.2706469726562517\",（必返回）\n              \"longitude\":\"119.9658680555555605\",（必返回）\n              \"locTime\":\"2022-03-09 09:45:19\",（必返回）\n              \"locType\":\"\"    //定位模式（Android返回）\n          }\n       */\n      if (typeof yuanchu != 'undefined') {\n        yuanchu.locationAMap.requestSingleLocation(\n          ['1'],\n          (res) => {\n            let userPosition = [res.longitude, res.latitude]\n            this.upPosition(userPosition)\n          },\n          (err) => {\n\n          }\n        )\n      }\n    }\n  },\n  mounted() {\n    Toast.loading({\n      message: '加载中...',\n      forbidClick: true\n    })\n    this.onRefresh()\n    this.getLocation()\n  }\n}\n</script>\n\n<style lang='less' scoped>\n#BookIndex {\n  height: 100%;\n  overflow: auto;\n  background-color: #ecf4ff !important;\n\n  /deep/ .fm-nav-bar__content {\n    background-color: #0676fd !important;\n    height: 1.8rem;\n  }\n\n  /deep/ .fm-nav-bar__title {\n    color: #ffffff !important;\n  }\n\n  /deep/ .fm-nav-bar .fm-icon {\n    color: #ffffff !important;\n  }\n\n  /deep/ .fm-pull-refresh {\n    overflow: visible;\n  }\n\n  /* 暂无数据begin */\n\n  .no-data-img {\n    margin: 200px 95px 0 95px;\n  }\n\n  .no-data-text {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .no-data-text-descripe {\n    font-size: 32px;\n    font-weight: 400;\n    color: #999999;\n  }\n\n  .list-item {\n    width: 100%;\n    height: 80px;\n    // padding: 0 10px;\n    line-height: 80px;\n    border-bottom: 1px solid #fff;\n    background-color: #ecf4ff;\n    display: flex;\n    justify-content: left;\n\n    .ptitle {\n      width: 80%;\n      padding-left: 6px;\n      font-size: 24px;\n      font-weight: 500;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      text-align: left;\n    }\n  }\n}\n</style>\n"],"mappings":";AAyBA,SAAAA,MAAA,EAAAC,IAAA,EAAAC,WAAA,EAAAC,KAAA;AACA,SAAAC,cAAA;AAEA;EACAC,UAAA;IACA,CAAAL,MAAA,CAAAM,IAAA,GAAAN,MAAA;IACA,CAAAC,IAAA,CAAAK,IAAA,GAAAL,IAAA;IACA,CAAAC,WAAA,CAAAI,IAAA,GAAAJ,WAAA;IACA,CAAAC,KAAA,CAAAG,IAAA,GAAAH;EACA;EACAI,KAAA;IACAC,IAAA;EACA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,OAAA;MACAC,eAAA;MACAC,QAAA;MACAC,YAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,KAAAL,eAAA;MACA,KAAAC,QAAA;MACA,KAAAC,YAAA;IACA;IACA;IACAI,UAAA;MACA,KAAAD,SAAA;MACA,KAAAE,oBAAA;MACA,KAAAR,OAAA;MACA,KAAAS,OAAA;IACA;IACA;IACAC,OAAA;MACA,KAAAD,OAAA;IACA;IACAA,QAAA;MACA,KAAAT,OAAA;MACA,IAAAW,GAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,IAAAC,MAAA;MACAA,MAAA,CAAAC,YAAA,GAAAJ,GAAA;MACAG,MAAA,CAAAjB,IAAA,QAAAA,IAAA;MACAJ,cAAA,CAAAqB,MAAA,EACAE,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAnB,IAAA;UACA,KAAAM,QAAA,GAAAa,GAAA,CAAAnB,IAAA;QACA;MACA,GACAoB,OAAA;QACA,KAAAlB,OAAA;QACA,KAAAD,UAAA;QACA,KAAAS,oBAAA;MACA;IACA;IACAW,OAAAC,IAAA;MACAR,YAAA,CAAAS,OAAA,aAAAD,IAAA;MACAR,YAAA,CAAAS,OAAA,kBAAAxB,IAAA;MACA,KAAAyB,OAAA,CAAAC,IAAA;QACA5B,IAAA;MACA;IACA;IACA6B,YAAA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA,WAAAC,OAAA;QACAA,OAAA,CAAAC,YAAA,CAAAC,qBAAA,CACA,OACAV,GAAA;UACA,IAAAW,YAAA,IAAAX,GAAA,CAAAY,SAAA,EAAAZ,GAAA,CAAAa,QAAA;UACA,KAAAC,UAAA,CAAAH,YAAA;QACA,GACAI,GAAA,KAEA,CACA;MACA;IACA;EACA;EACAC,QAAA;IACAzC,KAAA,CAAAQ,OAAA;MACAkC,OAAA;MACAC,WAAA;IACA;IACA,KAAA5B,SAAA;IACA,KAAAiB,WAAA;EACA;AACA"}]}