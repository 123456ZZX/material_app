{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\FormCenter\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\FormCenter\\index.vue","mtime":1705912800023},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQ1VSUkVOVF9ST1cgfSBmcm9tICdAL3N0b3JlL1N0YXRlL3N0YXRlVHlwZXMnOwppbXBvcnQgZmxvd0FwcHJvdmFsIGZyb20gJy4vY29tcG9uZW50cy9GbG93QXBwcm92YWwnOwppbXBvcnQgZmxvd0VudHJ1c3QgZnJvbSAnLi9jb21wb25lbnRzL0Zsb3dFbnRydXN0JzsKaW1wb3J0IGZsb3dUaW1lbGluZSBmcm9tICcuL2NvbXBvbmVudHMvRmxvd1RpbWVsaW5lJzsKaW1wb3J0IHsgc3VibWl0Rm9ybSB9IGZyb20gJy4vYXBpJzsKaW1wb3J0IHsgVGFiLCBUYWJzLCBOYXZCYXIsIEZpZWxkLCBCdXR0b24sIFRvYXN0IH0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0Zvcm1DZW50ZXInLAogIGNvbXBvbmVudHM6IHsKICAgIGZsb3dBcHByb3ZhbCwKICAgIGZsb3dFbnRydXN0LAogICAgZmxvd1RpbWVsaW5lLAogICAgW1RhYi5uYW1lXTogVGFiLAogICAgW1RhYnMubmFtZV06IFRhYnMsCiAgICBbTmF2QmFyLm5hbWVdOiBOYXZCYXIsCiAgICBbRmllbGQubmFtZV06IEZpZWxkLAogICAgW0J1dHRvbi5uYW1lXTogQnV0dG9uLAogICAgW1RvYXN0Lm5hbWVdOiBUb2FzdAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6IHRoaXMuJHJvdXRlLnBhcmFtcy50eXBlLAogICAgICBmb3JtS2V5OiB0aGlzLiRyb3V0ZS5wYXJhbXMuZm9ybUtleSwKICAgICAgLy8g6KGo5Y2V6ZSu5YC8CiAgICAgIGJpeklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuYml6SWQsCiAgICAgIHRhc2tJZDogdGhpcy4kcm91dGUucGFyYW1zLnRhc2tJZCwKICAgICAgdGFza0tleTogdGhpcy4kcm91dGUucGFyYW1zLnRhc2tLZXksCiAgICAgIGR5bmFtaWNGb3JtOiAnJywKICAgICAgaXNEaXNhYmxlZDogZmFsc2UsCiAgICAgIHRhYlRpdGxlczogW10sCiAgICAgIGRldGFpbFBhcmFtTGlzdDogW10sCiAgICAgIC8vIOmcgOaPkOS6pOeahOaYjue7huihqOaVsOaNrgogICAgICB0YWI6IDAsCiAgICAgIGVudGl0eU5hbWU6ICcnLAogICAgICAvLyDkuJrliqHooajnmoTlrp7kvZPnsbvlkI0KICAgICAgc2VydmljZToge30sCiAgICAgIC8v5o+Q5Lqk5Zyw5Z2A5ZKM5Yid5aeL5YyW5Zyw5Z2ACiAgICAgIGZvcm1OYW1lOiAnJywKICAgICAgLy/ooajljZXlkI3np7AKICAgICAgZmxvd0RhdGE6IHsKICAgICAgICBtb2RlbEtleTogJycgLy/mtYHnqIvplK7lgLwKICAgICAgfSwKICAgICAgLy8g56e75Yqo56uv5Y+R6LW35pe25o+Q5L6b55qE5oyJ6ZKuCiAgICAgIGJ1dHRvbkxpc3Q6IFt7CiAgICAgICAgdHlwZTogJ3NhdmVEcmFmdCcsCiAgICAgICAgdGV4dDogJ+aaguWtmCcsCiAgICAgICAgY29kZTogJ1NBVkVEUkFGVCcsCiAgICAgICAgY3VzdG9tQ29kZTogJ1NBVkVEUkFGVCcKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdWJtaXQnLAogICAgICAgIHRleHQ6ICfmj5DkuqQnLAogICAgICAgIGNvZGU6ICdTVUJNSVQnLAogICAgICAgIGN1c3RvbUNvZGU6ICdTVUJNSVQnCiAgICAgIH1dLAogICAgICBmb3JtRGF0YToge30KICAgIH07CiAgfSwKICB3YXRjaDoge30sCiAgY29tcHV0ZWQ6IHsKICAgIHJvdygpIHsKICAgICAgLy8g6aG16Z2i5Lit5L2/55Socm935p2l5oyH5Luj5b2T5YmN6K6w5b2VCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZVtDVVJSRU5UX1JPV107CiAgICB9LAogICAgbGFuZygpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JhZ2UuZ2V0KCdpMThuTG9jYWxlJykgPT0gJ3poJykgewogICAgICAgIHJldHVybiAnemgtQ04nOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnZW4nOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkge30sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdEZvcm0oKTsKICAgIGlmICh0aGlzLnR5cGUgPT0gJ2V4ZWN1dGUnKSB7CiAgICAgIHRoaXMudGFiVGl0bGVzID0gWyfor6bmg4UnLCAn5rWB6L2sJywgJ+WuoeaJuScsICflp5TmiZgnXTsKICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09ICd2aWV3JykgewogICAgICB0aGlzLnRhYlRpdGxlcyA9IFsn6K+m5oOFJywgJ+a1gei9rCddOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50YWJUaXRsZXMgPSBbJ+ivpuaDhScsICflp5TmiZgnXTsKICAgIH0KICAgIHRoaXMuaXNEaXNhYmxlZCA9IHRydWU7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb0JhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9LAogICAgLy8g6Z2e56m65qCh6aqM5pa55rOVCiAgICBjaGVja1J1bGVzKCkgewogICAgICAvLyDkuJrliqHooajljZXmj5DkvpvmoKHpqozmlrnms5UKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybVRlbXAudmFsaWRhdG9yKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnMuZm9ybVRlbXAudmFsaWRhdG9yKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmj5DkuqTmtYHnqIvliY3pkqnlrZDlh73mlbAKICAgIGJlZm9yZVN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzJCRyZWZzJGZvcm1UZW1wOwogICAgICAoX3RoaXMkJHJlZnMkZm9ybVRlbXAgPSB0aGlzLiRyZWZzLmZvcm1UZW1wKSA9PT0gbnVsbCB8fCBfdGhpcyQkcmVmcyRmb3JtVGVtcCA9PT0gdm9pZCAwIHx8IF90aGlzJCRyZWZzJGZvcm1UZW1wLmJlZm9yZVN1Ym1pdCgpOwogICAgfSwKICAgIC8vIOaPkOS6pOa1geeoi+WQjueahOaTjeS9nAogICAgYWZ0ZXJTdWJtaXQoKSB7fSwKICAgIC8vIOihqOWNlemAgOWbnuS5i+WQjueahOaTjeS9nAogICAgYWZ0ZXJlUmVqZWN0KCkge30sCiAgICB0YWJjbGljayh2YWwpIHsKICAgICAgdGhpcy50YWIgPSB2YWw7CiAgICB9LAogICAgLy8g5Yqo5oCB6I635Y+WRm9ybUNlbnRlcuS4i+eahOWvueW6lOeahOa1geeoi+ihqOWNlee7hOS7tgogICAgaW5pdEZvcm0oKSB7CiAgICAgIGNvbnN0IHJlcXMgPSByZXF1aXJlLmNvbnRleHQoJ0Avdmlld3MvRm9ybUNlbnRlcicsIHRydWUsIC9pbmRleFwudnVlLywgJ2xhenknKTsKICAgICAgcmVxcy5rZXlzKCkuZm9yRWFjaChrZXkgPT4gewogICAgICAgIC8vIOatpOWkhOajgOa1i+aooeWdl+eahOaWh+S7tuWkueWQjeWSjGZvcm1rZXnljLnphY3ml7blv73nlaXlpKflsI/vvIzliJvlu7pmb3Jta2V55pe25pyA5aW95L2/55So5biV5pav5Y2h5ZG95ZCN5rOVCiAgICAgICAgaWYgKFJlZ0V4cChgXFwvJHt0aGlzLmZvcm1LZXl9XFwvYCwgJ2knKS50ZXN0KGtleSkpIHsKICAgICAgICAgIHJlcXMoa2V5KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuZHluYW1pY0Zvcm0gPSByZXMuZGVmYXVsdDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2V0Rm9ybU5hbWUoZm9ybU5hbWUpIHsKICAgICAgdGhpcy5mb3JtTmFtZSA9IGZvcm1OYW1lOwogICAgfSwKICAgIHNldE1vZGVsS2V5KG1vZGVsS2V5KSB7CiAgICAgIHRoaXMuZmxvd0RhdGEubW9kZWxLZXkgPSBtb2RlbEtleTsKICAgIH0sCiAgICBzZXRFbnRpdHlOYW1lKGVudGl0eU5hbWUpIHsKICAgICAgdGhpcy5lbnRpdHlOYW1lID0gZW50aXR5TmFtZTsKICAgIH0sCiAgICBzZXRTZXJ2aWNlKHNlcnZpY2UpIHsKICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTsKICAgIH0sCiAgICBzZXRQcmVTYXZlVmFsaWRhdGVQcm9wcyhwcm9wcykgewogICAgICB0aGlzLnByZVNhdmVWYWxpZGF0ZVByb3BzID0gcHJvcHM7CiAgICB9LAogICAgc2V0Rm9ybURhdGEoZm9ybURhdGEpIHsKICAgICAgdGhpcy5mb3JtRGF0YSA9IGZvcm1EYXRhOwogICAgfSwKICAgIHNldERldGFpbFBhcmFtTGlzdChkZXRhaWxQYXJhbUxpc3QpIHsKICAgICAgdGhpcy5kZXRhaWxQYXJhbUxpc3QgPSBkZXRhaWxQYXJhbUxpc3Q7CiAgICB9LAogICAgb25BY3Rpb24oaXRlbSkgewogICAgICAvLyDmmoLlrZjkuI3pnIDopoHmoKHpqozvvIznm7TmjqXkv53lrZgKICAgICAgaWYgKGl0ZW0udHlwZSA9PSAnc2F2ZURyYWZ0JykgewogICAgICAgIHRoaXMuaGFuZGxlQWN0aW9uKGl0ZW0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOihqOWNlee7n+S4gOS9v+eUqGZvcm3nmoRyZWblgLwKICAgICAgICBpZiAodGhpcy4kcmVmcy5mb3JtVGVtcC4kcmVmcy5mb3JtKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1UZW1wLiRyZWZzLmZvcm0udmFsaWRhdGUoKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVDdXN0b21WYWxpZGF0b3IoaXRlbSk7CiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIFRvYXN0KCfooajljZXmoKHpqozmnKrpgJrov4cnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvL+acquWumuS5iWZvcm3nmoTlvJXnlKjlgLzml7YKICAgICAgICAgIHRoaXMuaGFuZGxlQ3VzdG9tVmFsaWRhdG9yKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ3VzdG9tVmFsaWRhdG9yKGl0ZW0pIHsKICAgICAgaWYgKHR5cGVvZiB0aGlzLiRyZWZzLmZvcm1UZW1wLnZhbGlkYXRvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm1UZW1wLnZhbGlkYXRvcigpKSB7CiAgICAgICAgICB0aGlzLmhhbmRsZUFjdGlvbihpdGVtKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5rKh5pyJ6Ieq5a6a5LmJ55qE6KGo5Y2V5qCh6aqM6KeE5YiZ77yM55u05o6l5o+Q5LqkCiAgICAgICAgdGhpcy5oYW5kbGVBY3Rpb24oaXRlbSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVBY3Rpb24oaXRlbSkgewogICAgICBpZiAodHlwZW9mIHRoaXMuJHJlZnMuZm9ybVRlbXAuYmVmb3JlU3VibWl0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdGhpcy4kcmVmcy5mb3JtVGVtcC5iZWZvcmVTdWJtaXQoKTsKICAgICAgfQogICAgICBsZXQgZm9ybSA9IHsKICAgICAgICBlbnRpdHlOYW1lOiB0aGlzLmVudGl0eU5hbWUsCiAgICAgICAgZW50aXR5T2JqZWN0OiB0aGlzLmZvcm1EYXRhLAogICAgICAgIGZvcm1Qcm9jZXNzUGFyYW06IHRoaXMudXNlUHJvY2VzcyhpdGVtKSwKICAgICAgICBkZXRhaWxQYXJhbUxpc3Q6IHRoaXMuZGV0YWlsUGFyYW1MaXN0CiAgICAgIH07CiAgICAgIHN1Ym1pdEZvcm0odGhpcy5zZXJ2aWNlLnN1Ym1pdCwgZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgICBUb2FzdCgn5o+Q5Lqk5oiQ5YqfJyk7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBUb2FzdChyZXMubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5bmtYHnqIvlj4LmlbDkv6Hmga8KICAgIHVzZVByb2Nlc3MoYnV0dG9uSW5mbykgewogICAgICByZXR1cm4gewogICAgICAgIG1vZGVsS2V5OiB0aGlzLmZsb3dEYXRhLm1vZGVsS2V5LAogICAgICAgIGJpeklkOiB0aGlzLmJpeklkLAogICAgICAgIHByb2Nlc3NJbnN0YW5jZUlkOiB0aGlzLnByb2Nlc3NJbnN0YW5jZUlkLAogICAgICAgIGZvcm1LZXk6IHRoaXMuZm9ybUtleSwKICAgICAgICBzdGFnZUZsYWc6IGJ1dHRvbkluZm8udHlwZSA9PT0gJ3NhdmVEcmFmdCcgPyAxIDogMCwKICAgICAgICB2YXJpYWJsZTogdGhpcy5mb3JtRGF0YSwKICAgICAgICB0YXNrSWQ6IHRoaXMudGFza0lkLAogICAgICAgIGFwcHJvdmFsOiBidXR0b25JbmZvLnR5cGUgPT09ICdzYXZlRHJhZnQnID8gJ3N0YWdlJyA6ICcnLAogICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCwKICAgICAgICB0YXJnZXRLZXk6IGJ1dHRvbkluZm8udGFyZ2V0S2V5CiAgICAgIH07CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["CURRENT_ROW","flowApproval","flowEntrust","flowTimeline","submitForm","Tab","Tabs","NavBar","Field","Button","Toast","name","components","data","type","$route","params","formKey","bizId","taskId","taskKey","dynamicForm","isDisabled","tabTitles","detailParamList","tab","entityName","service","formName","flowData","modelKey","buttonList","text","code","customCode","formData","watch","computed","row","$store","state","lang","$storage","get","created","mounted","initForm","methods","goBack","$router","go","checkRules","$refs","formTemp","validator","beforeSubmit","_this$$refs$formTemp","afterSubmit","aftereReject","tabclick","val","reqs","require","context","keys","forEach","key","RegExp","test","then","res","default","setFormName","setModelKey","setEntityName","setService","setPreSaveValidateProps","props","preSaveValidateProps","setFormData","setDetailParamList","onAction","item","handleAction","form","validate","handleCustomValidator","catch","entityObject","formProcessParam","useProcess","submit","status","setTimeout","message","buttonInfo","processInstanceId","stageFlag","variable","approval","comment","targetKey"],"sources":["src/views/FormCenter/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-container\">\r\n    <fm-nav-bar :title=\"formName\" left-text=\"\" right-text=\"\" left-arrow @click-left=\"goBack\" />\r\n    <fm-tabs line-width=\"80px\" @tab-click=\"tabclick\" v-if=\"type != 'add'\">\r\n      <fm-tab v-for=\"(item, index) in tabTitles\" :label=\"item\" :key=\"index\"></fm-tab>\r\n    </fm-tabs>\r\n    <!-- 从业务模块发起时只显示表单详情和暂存、提交 -->\r\n    <div v-if=\"type == 'add'\" class=\"component\">\r\n      <!-- style=\"height: calc(100% - 108px); overflow: auto\" -->\r\n      <component\r\n        class=\"cus-form\"\r\n        ref=\"formTemp\"\r\n        v-bind:is=\"dynamicForm\"\r\n        @setFormName=\"setFormName\"\r\n        @setModelKey=\"setModelKey\"\r\n        @setEntityName=\"setEntityName\"\r\n        @setService=\"setService\"\r\n        @setPreSaveValidateProps=\"setPreSaveValidateProps\"\r\n        @setFormData=\"setFormData\"\r\n        @setDetailParamList=\"setDetailParamList\"\r\n      ></component>\r\n      <div class=\"buttons\" v-if=\"type == 'add' || (type == 'execute' && flowList.length === 1)\">\r\n        <div class=\"button\" v-for=\"item in buttonList\" :key=\"item.type\">\r\n          <fm-button\r\n            block\r\n            type=\"primary\"\r\n            native-type=\"submit\"\r\n            @click=\"onAction(item)\"\r\n            :class=\"[item.type]\"\r\n            >{{ item.text }}</fm-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 任务待办打开时 -->\r\n    <div v-else style=\"height: calc(100% - 88px); overflow: auto\">\r\n      <div v-show=\"tab == 0\" class=\"content-container\">\r\n        <component\r\n          ref=\"formTemp\"\r\n          v-bind:is=\"dynamicForm\"\r\n          @setFormName=\"setFormName\"\r\n          @setModelKey=\"setModelKey\"\r\n          @setEntityName=\"setEntityName\"\r\n          @setService=\"setService\"\r\n          @setPreSaveValidateProps=\"setPreSaveValidateProps\"\r\n          @setFormData=\"setFormData\"\r\n          @setDetailParamList=\"setDetailParamList\"\r\n          class=\"task-detail-form\"\r\n        ></component>\r\n      </div>\r\n      <div v-show=\"tab == 1\" class=\"content-container\">\r\n        <flow-entrust v-if=\"type == 'flowView'\" :formData=\"formData\"></flow-entrust>\r\n        <flow-timeline :taskId=\"taskId\" :bizId=\"bizId\" v-else></flow-timeline>\r\n      </div>\r\n      <div v-show=\"tab == 2\" class=\"content-container\">\r\n        <flow-approval\r\n          :submitURL=\"service.submit\"\r\n          :entityName=\"entityName\"\r\n          :formData=\"formData\"\r\n          :detailParamList=\"detailParamList\"\r\n          :modelKey=\"flowData.modelKey\"\r\n          :checkRules=\"checkRules\"\r\n          :beforeSubmit=\"beforeSubmit\"\r\n          :aftereReject=\"aftereReject\"\r\n          :afterSubmit=\"afterSubmit\"\r\n        >\r\n        </flow-approval>\r\n      </div>\r\n      <div v-show=\"tab == 3\" class=\"content-container\">\r\n        <flow-entrust :formData=\"formData\"></flow-entrust>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { CURRENT_ROW } from '@/store/State/stateTypes'\r\nimport flowApproval from './components/FlowApproval'\r\nimport flowEntrust from './components/FlowEntrust'\r\nimport flowTimeline from './components/FlowTimeline'\r\nimport { submitForm } from './api'\r\nimport { Tab, Tabs, NavBar, Field, Button, Toast } from 'fawkes-mobile-lib'\r\nexport default {\r\n  name: 'FormCenter',\r\n  components: {\r\n    flowApproval,\r\n    flowEntrust,\r\n    flowTimeline,\r\n    [Tab.name]: Tab,\r\n    [Tabs.name]: Tabs,\r\n    [NavBar.name]: NavBar,\r\n    [Field.name]: Field,\r\n    [Button.name]: Button,\r\n    [Toast.name]: Toast,\r\n  },\r\n  data() {\r\n    return {\r\n      type: this.$route.params.type,\r\n      formKey: this.$route.params.formKey, // 表单键值\r\n      bizId: this.$route.params.bizId,\r\n      taskId: this.$route.params.taskId,\r\n      taskKey: this.$route.params.taskKey,\r\n      dynamicForm: '',\r\n      isDisabled: false,\r\n      tabTitles: [],\r\n      detailParamList: [], // 需提交的明细表数据\r\n      tab: 0,\r\n      entityName: '', // 业务表的实体类名\r\n      service: {}, //提交地址和初始化地址\r\n      formName: '', //表单名称\r\n      flowData: {\r\n        modelKey: '', //流程键值\r\n      },\r\n      // 移动端发起时提供的按钮\r\n      buttonList: [\r\n        {\r\n          type: 'saveDraft',\r\n          text: '暂存',\r\n          code: 'SAVEDRAFT',\r\n          customCode: 'SAVEDRAFT',\r\n        },\r\n        {\r\n          type: 'submit',\r\n          text: '提交',\r\n          code: 'SUBMIT',\r\n          customCode: 'SUBMIT',\r\n        },\r\n      ],\r\n      formData: {},\r\n    }\r\n  },\r\n  watch: {},\r\n  computed: {\r\n    row() {\r\n      // 页面中使用row来指代当前记录\r\n      return this.$store.state[CURRENT_ROW]\r\n    },\r\n    lang() {\r\n      if (this.$storage.get('i18nLocale') == 'zh') {\r\n        return 'zh-CN'\r\n      } else {\r\n        return 'en'\r\n      }\r\n    },\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    this.initForm()\r\n    if (this.type == 'execute') {\r\n      this.tabTitles = ['详情', '流转', '审批', '委托']\r\n    } else if (this.type == 'view') {\r\n      this.tabTitles = ['详情', '流转']\r\n    } else {\r\n      this.tabTitles = ['详情', '委托']\r\n    }\r\n    this.isDisabled = true\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1)\r\n    },\r\n    // 非空校验方法\r\n    checkRules() {\r\n      // 业务表单提供校验方法\r\n      if (this.$refs.formTemp.validator) {\r\n        return this.$refs.formTemp.validator()\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    // 提交流程前钩子函数\r\n    beforeSubmit() {\r\n      this.$refs.formTemp?.beforeSubmit()\r\n    },\r\n    // 提交流程后的操作\r\n    afterSubmit() {},\r\n    // 表单退回之后的操作\r\n    aftereReject() {},\r\n    tabclick(val) {\r\n      this.tab = val\r\n    },\r\n    // 动态获取FormCenter下的对应的流程表单组件\r\n    initForm() {\r\n      const reqs = require.context('@/views/FormCenter', true, /index\\.vue/, 'lazy')\r\n      reqs.keys().forEach((key) => {\r\n        // 此处检测模块的文件夹名和formkey匹配时忽略大小，创建formkey时最好使用帕斯卡命名法\r\n        if (RegExp(`\\\\/${this.formKey}\\\\/`, 'i').test(key)) {\r\n          reqs(key).then((res) => {\r\n            this.dynamicForm = res.default\r\n          })\r\n        }\r\n      })\r\n    },\r\n    setFormName(formName) {\r\n      this.formName = formName\r\n    },\r\n    setModelKey(modelKey) {\r\n      this.flowData.modelKey = modelKey\r\n    },\r\n    setEntityName(entityName) {\r\n      this.entityName = entityName\r\n    },\r\n    setService(service) {\r\n      this.service = service\r\n    },\r\n    setPreSaveValidateProps(props) {\r\n      this.preSaveValidateProps = props\r\n    },\r\n    setFormData(formData) {\r\n      this.formData = formData\r\n    },\r\n    setDetailParamList(detailParamList) {\r\n      this.detailParamList = detailParamList\r\n    },\r\n    onAction(item) {\r\n      // 暂存不需要校验，直接保存\r\n      if (item.type == 'saveDraft') {\r\n        this.handleAction(item)\r\n      } else {\r\n        // 表单统一使用form的ref值\r\n        if (this.$refs.formTemp.$refs.form) {\r\n          this.$refs.formTemp.$refs.form\r\n            .validate()\r\n            .then(() => {\r\n              this.handleCustomValidator(item)\r\n            })\r\n            .catch(() => {\r\n              Toast('表单校验未通过')\r\n            })\r\n        } else {\r\n          //未定义form的引用值时\r\n          this.handleCustomValidator()\r\n        }\r\n      }\r\n    },\r\n    handleCustomValidator(item) {\r\n      if (typeof this.$refs.formTemp.validator === 'function') {\r\n        if (this.$refs.formTemp.validator()) {\r\n          this.handleAction(item)\r\n        }\r\n      } else {\r\n        // 没有自定义的表单校验规则，直接提交\r\n        this.handleAction(item)\r\n      }\r\n    },\r\n    handleAction(item) {\r\n      if (typeof this.$refs.formTemp.beforeSubmit === 'function') {\r\n        this.$refs.formTemp.beforeSubmit()\r\n      }\r\n      let form = {\r\n        entityName: this.entityName,\r\n        entityObject: this.formData,\r\n        formProcessParam: this.useProcess(item),\r\n        detailParamList: this.detailParamList,\r\n      }\r\n      submitForm(this.service.submit, form).then((res) => {\r\n        if (res.status) {\r\n          Toast('提交成功')\r\n          setTimeout(() => {\r\n            this.$router.go(-1)\r\n          }, 1000)\r\n        } else {\r\n          Toast(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 获取流程参数信息\r\n    useProcess(buttonInfo) {\r\n      return {\r\n        modelKey: this.flowData.modelKey,\r\n        bizId: this.bizId,\r\n        processInstanceId: this.processInstanceId,\r\n        formKey: this.formKey,\r\n        stageFlag: buttonInfo.type === 'saveDraft' ? 1 : 0,\r\n        variable: this.formData,\r\n        taskId: this.taskId,\r\n        approval: buttonInfo.type === 'saveDraft' ? 'stage' : '',\r\n        comment: this.comment,\r\n        targetKey: buttonInfo.targetKey,\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\n.main-container {\r\n  overflow: hidden;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.component,\r\n.cus-form {\r\n  height: calc(100% - 122px - env(safe-area-inset-bottom));\r\n  height: calc(100% - 122px - constant(safe-area-inset-bottom));\r\n  overflow-y: auto;\r\n  flex: 1;\r\n}\r\n\r\n// 表单底部安全区\r\n.task-detail-form {\r\n  padding-bottom: constant(safe-area-inset-bottom); /* 兼容 iOS < 11.2 */\r\n  padding-bottom: env(safe-area-inset-bottom); /* 兼容 iOS >= 11.2 */\r\n}\r\n\r\n/deep/.fm-field--disabled .fm-field__label {\r\n  color: #000;\r\n}\r\n\r\n/deep/ .fm-cell-group__title {\r\n  color: #000;\r\n}\r\n.field-attachment {\r\n  flex-direction: column;\r\n  /deep/ .fm-field__control--right {\r\n    justify-content: flex-start;\r\n  }\r\n}\r\n\r\n.buttons {\r\n  display: flex;\r\n  padding: 18px 30px;\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: calc(122px + constant(safe-area-inset-bottom));\r\n  height: calc(122px + env(safe-area-inset-bottom));\r\n}\r\n.button {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  .saveDraft {\r\n    border-radius: 10px;\r\n    background: #ffffff;\r\n    color: #027aff;\r\n  }\r\n\r\n  .submit {\r\n    border-radius: 10px;\r\n    background: #027aff;\r\n    margin-left: 23px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}