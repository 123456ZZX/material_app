{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\NewsNotice\\iframeMessage.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\NewsNotice\\iframeMessage.vue","mtime":1708928163394},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgZ2V0V2luZG93SGVpZ2h0IH0gZnJvbSAnQC91dGlscy9tb25pdG9yLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdpZnJhbWVCb3hTdHlsZScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLiRzdG9yYWdlLmdldCgnYWNjZXNzX3Rva2VuJyksCiAgICAgIGZvcm1Ub2tlbjogJycsCiAgICAgIHN0YXR1c0JhckhlaWdodDogMCwKICAgICAgaWZyYW1lSGVpZ2h0OiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHVybCgpIHsKICAgICAgdmFyIF90aGlzJCRyb3V0ZSRxdWVyeTsKICAgICAgaWYgKChfdGhpcyQkcm91dGUkcXVlcnkgPSB0aGlzLiRyb3V0ZS5xdWVyeSkgIT09IG51bGwgJiYgX3RoaXMkJHJvdXRlJHF1ZXJ5ICE9PSB2b2lkIDAgJiYgX3RoaXMkJHJvdXRlJHF1ZXJ5LnNyYykgewogICAgICAgIC8vIOafpeeci+W3peWNlemhtQogICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5xdWVyeS5zcmMgKyAnJnN5c0NvZGU9b3V0d29yaycgKyAnJnRva2VuPScgKyB0aGlzLmZvcm1Ub2tlbjsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuc3RhdHVzQmFySGVpZ2h0ID0gdGhpcy4kc3RvcmFnZS5nZXQoJ3N0YXR1c0JhckhlaWdodCcpOwogICAgdGhpcy5pZnJhbWVIZWlnaHQgPSB0aGlzLnN0YXR1c0JhckhlaWdodCA/IGAke2dldFdpbmRvd0hlaWdodCgpIC0gdGhpcy5zdGF0dXNCYXJIZWlnaHR9cHhgIDogYCR7Z2V0V2luZG93SGVpZ2h0KCl9cHhgOwogICAgLy8g6L+U5Zue5LiK5LiA57qn55uR5ZCsCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuZ29CYWNrUGFnZSk7CiAgICBheGlvcyh7CiAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9USElSRF9SRVFVRVNUX1VSTCArICcvbWFpbi91c2VyQ2VudGVyQXBpL3Nzby90b2tlbkJ5VG9rZW4nLAogICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgcGFyYW1zOiB7CiAgICAgICAgdG9rZW46IHRoaXMuYWNjZXNzVG9rZW4KICAgICAgfSwKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyBiM1YwZDI5eWF6cDNjR2N5TURJdycKICAgICAgfQogICAgfSkudGhlbihyZXMgPT4gewogICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB0aGlzLmZvcm1Ub2tlbiA9IHJlcy5kYXRhLnJlc3VsdERhdGEudG9rZW47CiAgICAgICAgdGhpcy5jcmVhdGVFbGUoKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgLy8g56e76Zmk6L+U5Zue5LiK5LiA57qn55qE55uR5ZCsCiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuZ29CYWNrUGFnZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb0JhY2tQYWdlKGUpIHsKICAgICAgaWYgKGUuZGF0YS5uYW1lID0gJ25hdmlnYXRlQmFjaycpIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgfSwgMTAwKTsKICAgICAgfQogICAgfSwKICAgIGNyZWF0ZUVsZSgpIHsKICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICBjb25zb2xlLmxvZygndGhpcy5mb3JtVG9rZW46ICcsIHRoaXMuZm9ybVRva2VuKTsKICAgICAgY29uc29sZS5sb2coJ3RoaXMudXJsOiAnLCB0aGlzLnVybCk7CiAgICAgIGVsZS5zcmMgPSB0aGlzLnVybDsKICAgICAgZWxlLnN0eWxlLmhlaWdodCA9IHRoaXMuaWZyYW1lSGVpZ2h0OwogICAgICBlbGUuc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgIGVsZS5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7CiAgICAgIGxldCBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lmcmFtZUJveFN0eWxlJyk7CiAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWxlKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["axios","getWindowHeight","name","data","accessToken","$storage","get","formToken","statusBarHeight","iframeHeight","computed","url","_this$$route$query","$route","query","src","mounted","window","addEventListener","goBackPage","process","env","VUE_APP_THIRD_REQUEST_URL","method","params","token","headers","Authorization","then","res","status","resultData","createEle","beforeDestroy","removeEventListener","methods","e","setTimeout","$router","go","ele","document","createElement","console","log","style","height","width","border","node","getElementById","appendChild"],"sources":["src/views/NewsNotice/iframeMessage.vue"],"sourcesContent":["<template>\r\n  <div id=\"iframeBoxStyle\" :style=\"{ marginTop: `${statusBarHeight}px` }\"></div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nimport { getWindowHeight } from '@/utils/monitor.js'\r\nexport default {\r\n  name: 'iframeBoxStyle',\r\n  data() {\r\n    return {\r\n      accessToken: this.$storage.get('access_token'),\r\n      formToken: '',\r\n      statusBarHeight: 0,\r\n      iframeHeight: 0,\r\n    }\r\n  },\r\n  computed: {\r\n    url() {\r\n      if (this.$route.query?.src) {\r\n        // 查看工单页\r\n        return this.$route.query.src + '&sysCode=outwork' + '&token=' + this.formToken\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.statusBarHeight = this.$storage.get('statusBarHeight')\r\n    this.iframeHeight = this.statusBarHeight\r\n      ? `${getWindowHeight() - this.statusBarHeight}px`\r\n      : `${getWindowHeight()}px`\r\n    // 返回上一级监听\r\n    window.addEventListener('message', this.goBackPage)\r\n    axios({\r\n      url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/userCenterApi/sso/tokenByToken',\r\n      method: 'post',\r\n      params: {\r\n        token: this.accessToken,\r\n      },\r\n      headers: {\r\n        Authorization: 'Basic b3V0d29yazp3cGcyMDIw',\r\n      },\r\n    }).then((res) => {\r\n      if (res.status == 200) {\r\n        this.formToken = res.data.resultData.token\r\n        this.createEle()\r\n      }\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    // 移除返回上一级的监听\r\n    window.removeEventListener('message', this.goBackPage)\r\n  },\r\n  methods: {\r\n    goBackPage(e) {\r\n      if ((e.data.name = 'navigateBack')) {\r\n        setTimeout(() => {\r\n          this.$router.go(-1)\r\n        }, 100)\r\n      }\r\n    },\r\n    createEle() {\r\n      let ele = document.createElement('iframe')\r\n      console.log('this.formToken: ', this.formToken)\r\n      console.log('this.url: ', this.url)\r\n      ele.src = this.url\r\n      ele.style.height = this.iframeHeight\r\n      ele.style.width = '100%'\r\n      ele.style.border = 'none'\r\n      let node = document.getElementById('iframeBoxStyle')\r\n      node.appendChild(ele)\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n#iframeBoxStyle {\r\n  height: 100vh;\r\n  width: 100%;\r\n}\r\n</style>\r\n"],"mappings":"AAIA,OAAAA,KAAA;AACA,SAAAC,eAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,WAAA,OAAAC,QAAA,CAAAC,GAAA;MACAC,SAAA;MACAC,eAAA;MACAC,YAAA;IACA;EACA;EACAC,QAAA;IACAC,IAAA;MAAA,IAAAC,kBAAA;MACA,KAAAA,kBAAA,QAAAC,MAAA,CAAAC,KAAA,cAAAF,kBAAA,eAAAA,kBAAA,CAAAG,GAAA;QACA;QACA,YAAAF,MAAA,CAAAC,KAAA,CAAAC,GAAA,yCAAAR,SAAA;MACA;IACA;EACA;EACAS,QAAA;IACA,KAAAR,eAAA,QAAAH,QAAA,CAAAC,GAAA;IACA,KAAAG,YAAA,QAAAD,eAAA,GACA,GAAAP,eAAA,UAAAO,eAAA,OACA,GAAAP,eAAA;IACA;IACAgB,MAAA,CAAAC,gBAAA,iBAAAC,UAAA;IACAnB,KAAA;MACAW,GAAA,EAAAS,OAAA,CAAAC,GAAA,CAAAC,yBAAA;MACAC,MAAA;MACAC,MAAA;QACAC,KAAA,OAAArB;MACA;MACAsB,OAAA;QACAC,aAAA;MACA;IACA,GAAAC,IAAA,CAAAC,GAAA;MACA,IAAAA,GAAA,CAAAC,MAAA;QACA,KAAAvB,SAAA,GAAAsB,GAAA,CAAA1B,IAAA,CAAA4B,UAAA,CAAAN,KAAA;QACA,KAAAO,SAAA;MACA;IACA;EACA;EACAC,cAAA;IACA;IACAhB,MAAA,CAAAiB,mBAAA,iBAAAf,UAAA;EACA;EACAgB,OAAA;IACAhB,WAAAiB,CAAA;MACA,IAAAA,CAAA,CAAAjC,IAAA,CAAAD,IAAA;QACAmC,UAAA;UACA,KAAAC,OAAA,CAAAC,EAAA;QACA;MACA;IACA;IACAP,UAAA;MACA,IAAAQ,GAAA,GAAAC,QAAA,CAAAC,aAAA;MACAC,OAAA,CAAAC,GAAA,0BAAArC,SAAA;MACAoC,OAAA,CAAAC,GAAA,oBAAAjC,GAAA;MACA6B,GAAA,CAAAzB,GAAA,QAAAJ,GAAA;MACA6B,GAAA,CAAAK,KAAA,CAAAC,MAAA,QAAArC,YAAA;MACA+B,GAAA,CAAAK,KAAA,CAAAE,KAAA;MACAP,GAAA,CAAAK,KAAA,CAAAG,MAAA;MACA,IAAAC,IAAA,GAAAR,QAAA,CAAAS,cAAA;MACAD,IAAA,CAAAE,WAAA,CAAAX,GAAA;IACA;EACA;AACA"}]}