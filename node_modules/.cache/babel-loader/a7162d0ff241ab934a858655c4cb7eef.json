{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\PersonalCenter\\Change.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\PersonalCenter\\Change.vue","mtime":1705912800054},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IEJ1dHRvbiwgTmF2QmFyLCBGb3JtLCBGaWVsZCwgSW1hZ2UsIEljb24sIENoZWNrYm94LCBUb2FzdCB9IGZyb20gJ2Zhd2tlcy1tb2JpbGUtbGliJzsKaW1wb3J0IHsgcHdkUnVsZSB9IGZyb20gJ0AvdXRpbHMvdmFsaWRhdGUnOwppbXBvcnQgeyBwd2RFbmNyeXB0IH0gZnJvbSAnQC91dGlscy9lbmNyeXB0aW9uL3B3ZCc7CmltcG9ydCB7IGNoYW5nZVBhc3MsIGxvZ291dCB9IGZyb20gJy4vYXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdsb2dpbicsCiAgY29tcG9uZW50czogewogICAgW0J1dHRvbi5uYW1lXTogQnV0dG9uLAogICAgW05hdkJhci5uYW1lXTogTmF2QmFyLAogICAgW0Zvcm0ubmFtZV06IEZvcm0sCiAgICBbRmllbGQubmFtZV06IEZpZWxkLAogICAgW0ltYWdlLm5hbWVdOiBJbWFnZSwKICAgIFtJY29uLm5hbWVdOiBJY29uLAogICAgW0NoZWNrYm94Lm5hbWVdOiBDaGVja2JveCwKICAgIFtUb2FzdC5uYW1lXTogVG9hc3QKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvbGRQd2RUeXBlOiAncGFzc3dvcmQnLAogICAgICBmaXJzdE5ld1B3ZFR5cGU6ICdwYXNzd29yZCcsCiAgICAgIGxhc3ROZXdQd2RUeXBlOiAncGFzc3dvcmQnLAogICAgICBmb3JtOiB7CiAgICAgICAgb2xkUHdkOiAnJywKICAgICAgICBwd2Q6ICcnLAogICAgICAgIGNvbmZpcm1Qd2Q6ICcnCiAgICAgIH0sCiAgICAgIENoZWNrRnJvbUVyck1zZzogewogICAgICAgIG9sZFB3ZDogJycsCiAgICAgICAgcHdkOiAnJywKICAgICAgICBjb25maXJtUHdkOiAnJwogICAgICB9LAogICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgb2xkUHdkUnVsZXM6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+W9k+WJjeWvhueggeS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ29uQmx1cicKICAgICAgfV0sCiAgICAgIGZpcnN0TmV3UHdkUnVsZXM6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+aWsOWvhueggeS4jeiDveS4uuepuicsCiAgICAgICAgdHJpZ2dlcjogJ29uQmx1cicKICAgICAgfSwgewogICAgICAgIC8vIOiHquWumuS5ieagoemqjOinhOWImQogICAgICAgIHZhbGlkYXRvcjogdmFsdWUgPT4gewogICAgICAgICAgcmV0dXJuIHB3ZFJ1bGUodmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeato+ehrueahOWvhueggeagvOW8jycsCiAgICAgICAgdHJpZ2dlcjogJ29uQmx1cicKICAgICAgfV0sCiAgICAgIGxhc3ROZXdQd2RSdWxlczogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn56Gu6K6k5a+G56CB5LiN6IO95Li656m6JywKICAgICAgICB0cmlnZ2VyOiAnb25CbHVyJwogICAgICB9LCB7CiAgICAgICAgLy8g6Ieq5a6a5LmJ5qCh6aqM6KeE5YiZCiAgICAgICAgdmFsaWRhdG9yOiB2YWx1ZSA9PiB7CiAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IHRoaXMuZm9ybS5wd2Q7CiAgICAgICAgfSwKICAgICAgICBtZXNzYWdlOiAn5Lik5qyh5a+G56CB6L6T5YWl5LiN5LiA6Ie0JywKICAgICAgICB0cmlnZ2VyOiAnb25CbHVyJwogICAgICB9XQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICB2aWV3UGFzc3dvcmQocHdkVHlwZSkgewogICAgICBpZiAodGhpc1twd2RUeXBlXSA9PSAncGFzc3dvcmQnKSB7CiAgICAgICAgdGhpc1twd2RUeXBlXSA9ICd0ZXh0JzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzW3B3ZFR5cGVdID0gJ3Bhc3N3b3JkJzsKICAgICAgfQogICAgfSwKICAgIC8vIGZvcm3moKHpqowKICAgIGNoZWNrVmFsaWRhdG9yKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKS50aGVuKCgpID0+IHsKICAgICAgICAvL+aIkOWKn+aXtueahOeoi+W6jwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIC8v5aSx6LSl5pe255qE56iL5bqPCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaPkOS6pAogICAgb25TdWJtaXQoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgb2xkUHdkOiBwd2RFbmNyeXB0KHRoaXMuZm9ybS5vbGRQd2QpLAogICAgICAgIG5ld1B3ZDogcHdkRW5jcnlwdCh0aGlzLmZvcm0ucHdkKQogICAgICB9OwogICAgICBjaGFuZ2VQYXNzKGRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgVG9hc3QoJ+WvhueggeS/ruaUueaIkOWKnycpOwogICAgICAgICAgbG9nb3V0KCkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgICAgIHRoaXMuJHN0b3JhZ2UucmVtb3ZlKCdhY2Nlc3NfdG9rZW4nKTsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgVG9hc3QocmVzLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Button","NavBar","Form","Field","Image","Icon","Checkbox","Toast","pwdRule","pwdEncrypt","changePass","logout","name","components","data","oldPwdType","firstNewPwdType","lastNewPwdType","form","oldPwd","pwd","confirmPwd","CheckFromErrMsg","disabled","oldPwdRules","required","message","trigger","firstNewPwdRules","validator","value","lastNewPwdRules","created","methods","viewPassword","pwdType","checkValidator","$refs","validate","then","$nextTick","catch","onSubmit","newPwd","res","status","$storage","remove","$router","push"],"sources":["src/views/PersonalCenter/Change.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-conatiner\">\r\n    <fm-nav-bar left-arrow fixed @click-left=\"$router.go(-1)\" />\r\n    <!-- 表单登录 -->\r\n    <div class=\"tip\">修改密码</div>\r\n    <!-- 密码 确认密码 -->\r\n    <fm-form class=\"form-container\" ref=\"form\">\r\n      <fm-field\r\n        class=\"field-mobile\"\r\n        v-model=\"form.oldPwd\"\r\n        clearable\r\n        name=\"密码\"\r\n        placeholder=\"请输入当前密码\"\r\n        :type=\"oldPwdType\"\r\n        @click-suffix-icon=\"viewPassword('oldPwdType')\"\r\n        :rules=\"oldPwdRules\"\r\n        @blur=\"checkValidator\"\r\n      >\r\n        <template #suffix-icon>\r\n          <i class=\"fm-icon fm-icon-eye-o suffix-icon\" v-if=\"oldPwdType == 'text'\"></i>\r\n          <i class=\"fm-icon fm-icon-closed-eye suffix-icon\" v-else></i>\r\n        </template>\r\n      </fm-field>\r\n      <fm-field\r\n        class=\"field-mobile\"\r\n        v-model=\"form.pwd\"\r\n        clearable\r\n        name=\"密码\"\r\n        placeholder=\"请输入新密码\"\r\n        :type=\"firstNewPwdType\"\r\n        @click-suffix-icon=\"viewPassword('firstNewPwdType')\"\r\n        :rules=\"firstNewPwdRules\"\r\n        @blur=\"checkValidator\"\r\n      >\r\n        <template #suffix-icon>\r\n          <i class=\"fm-icon fm-icon-eye-o suffix-icon\" v-if=\"firstNewPwdType == 'text'\"></i>\r\n          <i class=\"fm-icon fm-icon-closed-eye suffix-icon\" v-else></i>\r\n        </template>\r\n      </fm-field>\r\n      <fm-field\r\n        class=\"field-mobile\"\r\n        v-model=\"form.confirmPwd\"\r\n        name=\"确认密码\"\r\n        placeholder=\"请输入确认的新密码\"\r\n        clearable\r\n        :type=\"lastNewPwdType\"\r\n        @click-suffix-icon=\"viewPassword('lastNewPwdType')\"\r\n        :rules=\"lastNewPwdRules\"\r\n        @blur=\"checkValidator\"\r\n      >\r\n        <template #suffix-icon>\r\n          <i class=\"fm-icon fm-icon-eye-o suffix-icon\" v-if=\"lastNewPwdType == 'text'\"></i>\r\n          <i class=\"fm-icon fm-icon-closed-eye suffix-icon\" v-else></i>\r\n        </template>\r\n      </fm-field>\r\n      <div class=\"pwd-tip\">\r\n        密码设置为8-15位，且必须为数字、大写字母、小写字母和特殊符号四种组合。\r\n      </div>\r\n      <div style=\"margin: 16px\">\r\n        <fm-button block @click=\"onSubmit\" :disabled=\"disabled\" type=\"primary\" native-type=\"submit\"\r\n          >确认</fm-button\r\n        >\r\n      </div>\r\n    </fm-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Button, NavBar, Form, Field, Image, Icon, Checkbox, Toast } from 'fawkes-mobile-lib'\r\nimport { pwdRule } from '@/utils/validate'\r\nimport { pwdEncrypt } from '@/utils/encryption/pwd'\r\nimport { changePass, logout } from './api'\r\n\r\nexport default {\r\n  name: 'login',\r\n  components: {\r\n    [Button.name]: Button,\r\n    [NavBar.name]: NavBar,\r\n    [Form.name]: Form,\r\n    [Field.name]: Field,\r\n    [Image.name]: Image,\r\n    [Icon.name]: Icon,\r\n    [Checkbox.name]: Checkbox,\r\n    [Toast.name]: Toast,\r\n  },\r\n  data() {\r\n    return {\r\n      oldPwdType: 'password',\r\n      firstNewPwdType: 'password',\r\n      lastNewPwdType: 'password',\r\n      form: {\r\n        oldPwd: '',\r\n        pwd: '',\r\n        confirmPwd: '',\r\n      },\r\n      CheckFromErrMsg: {\r\n        oldPwd: '',\r\n        pwd: '',\r\n        confirmPwd: '',\r\n      },\r\n      disabled: true,\r\n      oldPwdRules: [\r\n        {\r\n          required: true,\r\n          message: '当前密码不能为空',\r\n          trigger: 'onBlur',\r\n        },\r\n      ],\r\n      firstNewPwdRules: [\r\n        {\r\n          required: true,\r\n          message: '新密码不能为空',\r\n          trigger: 'onBlur',\r\n        },\r\n        {\r\n          // 自定义校验规则\r\n          validator: (value) => {\r\n            return pwdRule(value)\r\n          },\r\n          message: '请输入正确的密码格式',\r\n          trigger: 'onBlur',\r\n        },\r\n      ],\r\n      lastNewPwdRules: [\r\n        {\r\n          required: true,\r\n          message: '确认密码不能为空',\r\n          trigger: 'onBlur',\r\n        },\r\n        {\r\n          // 自定义校验规则\r\n          validator: (value) => {\r\n            return value === this.form.pwd\r\n          },\r\n          message: '两次密码输入不一致',\r\n          trigger: 'onBlur',\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  created() {},\r\n  methods: {\r\n    viewPassword(pwdType) {\r\n      if (this[pwdType] == 'password') {\r\n        this[pwdType] = 'text'\r\n      } else {\r\n        this[pwdType] = 'password'\r\n      }\r\n    },\r\n    // form校验\r\n    checkValidator() {\r\n      this.$refs.form\r\n        .validate()\r\n        .then(() => {\r\n          //成功时的程序\r\n          this.$nextTick(() => {\r\n            this.disabled = false\r\n          })\r\n        })\r\n        .catch(() => {\r\n          //失败时的程序\r\n          this.$nextTick(() => {\r\n            this.disabled = true\r\n          })\r\n        })\r\n    },\r\n    // 提交\r\n    onSubmit() {\r\n      const data = {\r\n        oldPwd: pwdEncrypt(this.form.oldPwd),\r\n        newPwd: pwdEncrypt(this.form.pwd),\r\n      }\r\n      changePass(data).then((res) => {\r\n        if (res.status) {\r\n          Toast('密码修改成功')\r\n          logout()\r\n            .then((res) => {\r\n              if (res.status) {\r\n                this.$storage.remove('access_token')\r\n                this.$router.push('/login')\r\n              }\r\n            })\r\n            .catch(() => {})\r\n        } else {\r\n          Toast(res.message)\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.fm-hairline--bottom::after {\r\n  border: none;\r\n}\r\n.suffix-icon {\r\n  margin-left: 10px;\r\n}\r\n.main-conatiner {\r\n  height: 100%;\r\n  background: url('../../assets/img/login/bg.png') no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n.main-conatiner::before {\r\n  display: table;\r\n  content: '';\r\n}\r\n/deep/.fm-nav-bar {\r\n  background-color: transparent !important;\r\n}\r\n/deep/.fm-cell {\r\n  overflow: visible;\r\n  position: relative;\r\n}\r\n/deep/.fm-field__error-message {\r\n  position: absolute;\r\n  top: 70px;\r\n}\r\n.tip {\r\n  margin-top: 178px;\r\n  font-size: 50px;\r\n  font-weight: 600;\r\n  padding-left: 46px;\r\n  padding-right: 46px;\r\n}\r\n.form-container {\r\n  padding-left: 46px;\r\n  padding-right: 46px;\r\n  font-size: 28px;\r\n  margin-top: 177px;\r\n  .sub-menu {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding-left: 32px;\r\n    padding-right: 32px;\r\n    color: #027aff;\r\n    font-size: 28px;\r\n    padding-top: 30px;\r\n  }\r\n}\r\n\r\n.field-mobile,\r\n.field-code {\r\n  border-bottom: 2px #e3e3e3 solid;\r\n  padding-left: 24px;\r\n  background-color: #fff;\r\n  margin-bottom: 44px;\r\n  border: none;\r\n  border-radius: 25px;\r\n  /deep/ .fm-field__left-icon {\r\n    height: 48px;\r\n  }\r\n  /deep/ .fm-icon {\r\n    font-size: 48px;\r\n  }\r\n  /deep/ .fm-field__body {\r\n    height: 100%;\r\n  }\r\n}\r\n.code-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.field-code {\r\n  flex: 1.5;\r\n}\r\n.send-button {\r\n  margin-bottom: 44px;\r\n  color: #fff;\r\n  border-radius: 4px;\r\n  width: auto;\r\n  text-align: center;\r\n  background: #347df6;\r\n  margin-left: 20px;\r\n  flex: 1;\r\n  padding: 30px;\r\n  border-radius: 20px;\r\n}\r\n/deep/.fm-cell__value {\r\n  overflow: visible;\r\n}\r\n.fm-field--error ::placeholder {\r\n  color: rgba(159, 159, 159, 0.6);\r\n}\r\n.pwd-tip {\r\n  font-size: 28px;\r\n  color: rgb(159, 159, 159);\r\n  line-height: 42px;\r\n}\r\n</style>\r\n"],"mappings":";AAmEA,SAAAA,MAAA,EAAAC,MAAA,EAAAC,IAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,IAAA,EAAAC,QAAA,EAAAC,KAAA;AACA,SAAAC,OAAA;AACA,SAAAC,UAAA;AACA,SAAAC,UAAA,EAAAC,MAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACA,CAAAb,MAAA,CAAAY,IAAA,GAAAZ,MAAA;IACA,CAAAC,MAAA,CAAAW,IAAA,GAAAX,MAAA;IACA,CAAAC,IAAA,CAAAU,IAAA,GAAAV,IAAA;IACA,CAAAC,KAAA,CAAAS,IAAA,GAAAT,KAAA;IACA,CAAAC,KAAA,CAAAQ,IAAA,GAAAR,KAAA;IACA,CAAAC,IAAA,CAAAO,IAAA,GAAAP,IAAA;IACA,CAAAC,QAAA,CAAAM,IAAA,GAAAN,QAAA;IACA,CAAAC,KAAA,CAAAK,IAAA,GAAAL;EACA;EACAO,KAAA;IACA;MACAC,UAAA;MACAC,eAAA;MACAC,cAAA;MACAC,IAAA;QACAC,MAAA;QACAC,GAAA;QACAC,UAAA;MACA;MACAC,eAAA;QACAH,MAAA;QACAC,GAAA;QACAC,UAAA;MACA;MACAE,QAAA;MACAC,WAAA,GACA;QACAC,QAAA;QACAC,OAAA;QACAC,OAAA;MACA,EACA;MACAC,gBAAA,GACA;QACAH,QAAA;QACAC,OAAA;QACAC,OAAA;MACA,GACA;QACA;QACAE,SAAA,EAAAC,KAAA;UACA,OAAAtB,OAAA,CAAAsB,KAAA;QACA;QACAJ,OAAA;QACAC,OAAA;MACA,EACA;MACAI,eAAA,GACA;QACAN,QAAA;QACAC,OAAA;QACAC,OAAA;MACA,GACA;QACA;QACAE,SAAA,EAAAC,KAAA;UACA,OAAAA,KAAA,UAAAZ,IAAA,CAAAE,GAAA;QACA;QACAM,OAAA;QACAC,OAAA;MACA;IAEA;EACA;EACAK,QAAA;EACAC,OAAA;IACAC,aAAAC,OAAA;MACA,SAAAA,OAAA;QACA,KAAAA,OAAA;MACA;QACA,KAAAA,OAAA;MACA;IACA;IACA;IACAC,eAAA;MACA,KAAAC,KAAA,CAAAnB,IAAA,CACAoB,QAAA,GACAC,IAAA;QACA;QACA,KAAAC,SAAA;UACA,KAAAjB,QAAA;QACA;MACA,GACAkB,KAAA;QACA;QACA,KAAAD,SAAA;UACA,KAAAjB,QAAA;QACA;MACA;IACA;IACA;IACAmB,SAAA;MACA,MAAA5B,IAAA;QACAK,MAAA,EAAAV,UAAA,MAAAS,IAAA,CAAAC,MAAA;QACAwB,MAAA,EAAAlC,UAAA,MAAAS,IAAA,CAAAE,GAAA;MACA;MACAV,UAAA,CAAAI,IAAA,EAAAyB,IAAA,CAAAK,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACAtC,KAAA;UACAI,MAAA,GACA4B,IAAA,CAAAK,GAAA;YACA,IAAAA,GAAA,CAAAC,MAAA;cACA,KAAAC,QAAA,CAAAC,MAAA;cACA,KAAAC,OAAA,CAAAC,IAAA;YACA;UACA,GACAR,KAAA;QACA;UACAlC,KAAA,CAAAqC,GAAA,CAAAlB,OAAA;QACA;MACA;IACA;EACA;AACA"}]}