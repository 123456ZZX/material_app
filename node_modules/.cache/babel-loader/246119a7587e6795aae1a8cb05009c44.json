{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\inspectionManage\\add-event.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\inspectionManage\\add-event.vue","mtime":1705912800083},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBNYXBDb21wIGZyb20gIi4uL2luc3BlY3RNYXAvaW5kZXgudnVlIjsKLy8gaW1wb3J0IFN1bnVpVXBpbWcgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9zdW51aS11cGltZy9zdW51aS11cGltZy52dWUnOwppbXBvcnQgYnVzIGZyb20gIi4uLy4uL3ZpZXdzL2luc3BlY3RNYXAvdXRpbHMvQnVzLmpzIjsKLy8gaW1wb3J0IFB1bGx1cEJhciBmcm9tICJAY29tcC9wdWxsdXAtYmFyL2luZGV4Mi52dWUiOwovLyBpbXBvcnQgVW5pRGF0YUNoZWNrYm94IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvdW5pLWRhdGEtY2hlY2tib3gvdW5pLWRhdGEtY2hlY2tib3gudnVlJzsKaW1wb3J0IF8gZnJvbSAibG9kYXNoIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHVybCBmcm9tICJAY29tbW9uL2NvbmZpZy5qcyI7CmltcG9ydCAqIGFzIHR1cmYgZnJvbSAnQHR1cmYvdHVyZic7CmltcG9ydCB7IGVuZ1Byb3BlcnR5VmFsdWUsIHRyZWUsIGluc2VydCwgZ2V0QWxsUG9pbnRPckxpbmVHZW9tSW5zcCB9IGZyb20gJy4vYXBpJzsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICdmYXdrZXMtbW9iaWxlLWxpYic7CmNvbnN0IG1hcE9iaiA9IHsKICBtYXA6IG51bGwsCiAgbWFwSW5zdGFuY2U6IG51bGwKfTsKY29uc3Qgc3VwZXJNYXBVcmwgPSB7CiAgJ1BPSSc6IHsKICAgIHVybDogdXJsLmdpc0RvbWFpbiArICIvaXNlcnZlci9zZXJ2aWNlcy9kYXRhLUx1V2FuZ1l1UE9JL3Jlc3QvZGF0YS9mZWF0dXJlUmVzdWx0cy5yanNvbj9yZXR1cm5Db250ZW50PXRydWUiLAogICAgZGF0YXNldHM6IFsiUE9JOlBPSSJdCiAgfSwKICAn6YGT6Lev5ZCNJzogewogICAgdXJsOiB1cmwuZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL2RhdGEtTHVXYW5nWXVQT0kvcmVzdC9kYXRhL2ZlYXR1cmVSZXN1bHRzLnJqc29uP3JldHVybkNvbnRlbnQ9dHJ1ZSIsCiAgICBkYXRhc2V0czogWyJQT0k65L2Z5p2t5Yy655+i6YeP6Lev572RIl0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkLWV2ZW50IiwKICBjb21wb25lbnRzOiB7CiAgICBNYXBDb21wCiAgICAvLyBTdW51aVVwaW1nLAogICAgLy8gUHVsbHVwQmFyLAogICAgLy8gVW5pRGF0YUNoZWNrYm94CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGljdGlvbmFyeTogewogICAgICAgIFdBVEVSX1NVUFBMWTogJ+S+m+awtCcsCiAgICAgICAgUkFJX1dBVEVSOiAn6Zuo5rC0JywKICAgICAgICBQT0xMVVRFRF9XQVRFUjogJ+axoeawtCcKICAgICAgfSwKICAgICAgbG9jYXRpb25OYW1lOiAi5L2N572u5o+P6L+w5L+h5oGvIiwKICAgICAgcG9zaXRpb246IFswLCAwXSwKICAgICAgY3VyRW5nOiBudWxsLAogICAgICBjdXJGZWF0dXJlOiBudWxsLAogICAgICBlbmdMaXN0OiBbXSwKICAgICAgZmlsdGVyZWRMaXN0OiBbXSwKICAgICAgaW5pdFRvcDogIjcwJSIsCiAgICAgIGtleXdvcmQ6ICIiLAogICAgICB1c2VySW5mbzoge30sCiAgICAgIGZlYXR1cmU6IHt9LAogICAgICBwb3B1cFNob3c6IGZhbHNlLAogICAgICBldmVudEZvcm06IHsKICAgICAgICBldmVudFR5cGU6ICIiLAogICAgICAgIGZpbGVzOiBbXSwKICAgICAgICBpbnNwVGFza0RldGFpbERlc2M6IHsKICAgICAgICAgIHRleHQ6ICIiLAogICAgICAgICAgdm9pY2U6IHt9CiAgICAgICAgfSwKICAgICAgICByZW1hcms6IHsKICAgICAgICAgIHRleHQ6ICIiLAogICAgICAgICAgdm9pY2U6IHt9CiAgICAgICAgfQogICAgICB9LAogICAgICBldmVudFR5cGVMaXN0OiBbXSwKICAgICAgcmFuZ2VMaXN0OiBbXSwKICAgICAgdGFza0RldGFpbDoge30sCiAgICAgIGVuZ0luZm9EVE86IG51bGwsCiAgICAgIHNlbGVjdEV2ZW50VHlwZTogZmFsc2UsCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgZXZlbnRUeXBlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oup5LqL5Lu257G75Z6LIgogICAgICAgIH1dLAogICAgICAgIHBob3RvTGVuZ3RoOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+35LiK5Lyg6ZmE5Lu2IiwKICAgICAgICAgIHRyaWdnZXI6IFsiY2hhbmdlIiwgImJsdXIiXQogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHByZXZpZXdVUkw6ICIvc3lzLXN0b3JhZ2UvZG93bmxvYWRfaW1hZ2U/ZjhzPSIsCiAgICAgIHVwaW1nUHJldmlldzogW10sCiAgICAgIGhlYWRlcnM6IHt9LAogICAgICB1cmw6IHsKICAgICAgICAvLyDmnKzpobXpnaLkvb/nlKjliLDnmoR1cmwKICAgICAgICB1cGxvYWRGaWxlOiAic3lzLXN0b3JhZ2UvdXBsb2FkIgogICAgICAgIC8vIGZpbmRGaWxlOiAiZWNpZGktY21wL2ZpbGUvY21wRmlsZUdyb3VwL2ZpbmRGaWxlc0J5R3JvdXBJZCIsCiAgICAgIH0sCiAgICAgIHNob3dWaXNpYmxlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBldmVudFR5cGVMaXN0TmV3RmlsdGVyZWQoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaWN0aW9uYXJ5LAogICAgICAgIGV2ZW50VHlwZUxpc3QsCiAgICAgICAgdGFza0RldGFpbAogICAgICB9ID0gdGhpczsKICAgICAgbGV0IHRlbXAgPSBldmVudFR5cGVMaXN0LmZpbmQoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubGFiZWwgPT09IGRpY3Rpb25hcnlbdGFza0RldGFpbC5pbnNwQnVzaW5lc3NUeXBlXTsKICAgICAgfSk7CiAgICAgIGlmICh0ZW1wKSB7CiAgICAgICAgcmV0dXJuIHRlbXAuY2hpbGRyZW47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmhlYWRlcnMgPSB7CiAgICAgIC8vICJGYXdrZXMtQXV0aCI6IHVuaS5nZXRTdG9yYWdlU3luYygiRmF3a2VzLUF1dGgiKSwKICAgIH07CiAgfSwKICBhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLnNldExvY2F0aW9uTmFtZSgpOwogICAgdW5pLnNldFN0b3JhZ2VTeW5jKCJpc1JlcG9ydEV2ZW50IiwgdHJ1ZSk7CiAgICBpZiAoIXRoaXMuc2hvd1Zpc2libGUpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMucmVmcmVzaFJlcG9ydEV2ZW50KCk7CiAgICAgIH0pOwogICAgICB0aGlzLmdldEV2ZW50VHlwZUxpc3QoKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNldExvY2F0aW9uTmFtZSgpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlzUmVwb3J0RXZlbnQiLCB0cnVlKTsKICAgIHRoaXMudXNlckluZm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlckluZm8iKTsKICAgIGJ1cy4kb24oImV2ZW50TWFya2VyUG9zaXRpb24iLCBwb3MgPT4gewogICAgICB0aGlzLnBvc2l0aW9uID0gcG9zOwogICAgICB0aGlzLmdldEVuZ0RhdGEoKTsKICAgIH0pOwogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICB0aGlzLnJlZnJlc2hSZXBvcnRFdmVudCgpOwogICAgfSk7CiAgICB0aGlzLmdldEV2ZW50VHlwZUxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG1hcExvYWRlZChtYXBJbnN0YW5jZSkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UgPSBtYXBJbnN0YW5jZTsKICAgICAgbWFwT2JqLm1hcCA9IG1hcEluc3RhbmNlLm1hcDsKICAgIH0sCiAgICAvLyDliLfmlrAKICAgIHJlZnJlc2hSZXBvcnRFdmVudCgpIHsKICAgICAgdGhpcy5wb3NpdGlvbiA9IFswLCAwXTsKICAgICAgdGhpcy5jdXJFbmcgPSBudWxsOwogICAgICB0aGlzLmN1ckZlYXR1cmUgPSBudWxsOwogICAgICB0aGlzLmVuZ0xpc3QgPSBbXTsKICAgICAgdGhpcy5maWx0ZXJlZExpc3QgPSBbXTsKICAgICAgdGhpcy5sb2NhdGlvbk5hbWUgPSAi5L2N572u5o+P6L+w5L+h5oGvIjsKICAgICAgdGhpcy5pbml0VG9wID0gIjcwJSI7CiAgICAgIHRoaXMua2V5d29yZCA9ICIiOwogICAgICB0aGlzLmV2ZW50Rm9ybSA9IHsKICAgICAgICBldmVudFR5cGU6ICIiLAogICAgICAgIGZpbGVzOiBbXSwKICAgICAgICBpbnNwVGFza0RldGFpbERlc2M6IHsKICAgICAgICAgIHRleHQ6ICIiLAogICAgICAgICAgdm9pY2U6IHt9CiAgICAgICAgfSwKICAgICAgICByZW1hcms6IHsKICAgICAgICAgIHRleHQ6ICIiLAogICAgICAgICAgdm9pY2U6IHt9CiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLnVwaW1nUHJldmlldyA9IFtdOwogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkucG9zaXRpb24pIHsKICAgICAgICAvLyB0aGlzLmZlYXR1cmUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5mZWF0dXJlOwogICAgICAgIHRoaXMucmFuZ2VMaXN0ID0gdGhpcy4kcm91dGUucXVlcnkucmFuZ2VMaXN0OwogICAgICAgIHRoaXMudGFza0RldGFpbCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tEZXRhaWw7CiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBvc2l0aW9uOwogICAgICB9CiAgICAgIG1hcE9iai5tYXAubWFwT25Mb2FkKCgpID0+IHsKICAgICAgICBpZiAodGhpcy5wb3NpdGlvbikgewogICAgICAgICAgbWFwT2JqLm1hcC5hZGRSZXBvcnRFdmVudE1hcmtlcih0aGlzLnBvc2l0aW9uKTsKICAgICAgICAgIG1hcE9iai5tYXAuYWRkUmFuZ2VMaXN0KHRoaXMucmFuZ2VMaXN0KTsKICAgICAgICAgIG1hcE9iai5tYXAuZmx5VG8oewogICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiwKICAgICAgICAgICAgem9vbTogMTgKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8vIHRoaXMuJHJlZnMuZXZlbnRGb3JtLnNldFJ1bGVzKHRoaXMucnVsZXMpOwogICAgfSwKICAgIC8vIOiOt+WPluS6i+S7tuexu+WeiwogICAgZ2V0RXZlbnRUeXBlTGlzdCgpIHsKICAgICAgdHJlZSgpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmV2ZW50VHlwZUxpc3QgPSByZXMuZGF0YS5zb25zLm1hcChpdGVtID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiBpdGVtLmNvZGUsCiAgICAgICAgICAgIGxhYmVsOiBpdGVtLm5hbWUsCiAgICAgICAgICAgIGNoaWxkcmVuOiBpdGVtLnNvbnMubWFwKGl0ZW0gPT4gewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5jb2RlLAogICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBpdGVtLnNvbnMubWFwKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmNvZGUsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubmFtZQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIFRvYXN0KHsKICAgICAgICAgIG1lc3NhZ2U6ICLlrZflhbjliqDovb3lpLHotKUiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPluWbvueJh+S/oeaBrwogICAgZ2V0SW1hZ2VJbmZvKHZhbCkgewogICAgICBpZiAodmFsICYmIHZhbFswXS5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5ldmVudEZvcm0uZmlsZXMgPSB2YWxbMF07CiAgICAgICAgbGV0IHBob3RvTGlzdCA9IFtdOwogICAgICAgIHZhbFswXS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgcGhvdG9MaXN0LnB1c2goaXRlbS5maWxlVG9rZW4pOwogICAgICAgIH0pOwogICAgICAgIGxldCB0ZW1wID0gcGhvdG9MaXN0Lmxlbmd0aCArICIiOwogICAgICAgIHRoaXMuJHNldCh0aGlzLmV2ZW50Rm9ybSwgInBob3RvTGVuZ3RoIiwgdGVtcCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuZXZlbnRGb3JtLCAicGhvdG9MZW5ndGgiLCAiIik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDkuovku7bnsbvlnovpgInmi6nnoa7orqQKICAgIGV2ZW50VHlwZUNvbmZpcm0oZXZlbnQpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMuZXZlbnRGb3JtLCAiZXZlbnRUeXBlIiwgZXZlbnRbMV0ubGFiZWwpOwogICAgICB0aGlzLiRzZXQodGhpcy5ldmVudEZvcm0sICJpbnNwSXRlbUNvZGUiLCBldmVudFsxXS52YWx1ZSk7CiAgICB9LAogICAgLy8g6YCJ5oup5L2N572uCiAgICBwaWNrUG9zaXRpb24oKSB7CiAgICAgIC8vIOS4iuS8oOe7hOS7tuWbnuaYvgogICAgICB0aGlzLnVwaW1nUHJldmlldyA9IHRoaXMuZXZlbnRGb3JtLmZpbGVzLm1hcChpdGVtID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdXBsb2FkRmlsZTogewogICAgICAgICAgICBzYXZlUGF0aDogaXRlbS5maWxlVG9rZW4KICAgICAgICAgIH0sCiAgICAgICAgICAuLi5pdGVtCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHRoaXMucG9wdXBTaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5sb2NhdGlvbk5hbWUgPSAi5L2N572u5o+P6L+w5L+h5oGvIjsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIG1hcE9iai5tYXAubWFwT25Mb2FkKCgpID0+IHsKICAgICAgICAgIG1hcE9iai5tYXAuYWRkUmVwb3J0RXZlbnRNYXJrZXIodGhpcy5wb3NpdGlvbik7CiAgICAgICAgICBpZiAodGhpcy5wb3NpdGlvbikgewogICAgICAgICAgICBtYXBPYmoubWFwLmFkZFJhbmdlTGlzdCh0aGlzLnJhbmdlTGlzdCk7CiAgICAgICAgICAgIG1hcE9iai5tYXAuZmx5VG8oewogICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLAogICAgICAgICAgICAgIHpvb206IDE4CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmN1ckZlYXR1cmUgJiYgbWFwT2JqLm1hcC5zZXRMaW5lR2VvU291cmNlKFt0aGlzLmN1ckZlYXR1cmVdLCAiY3VySW5zcExpbmVTb3VyY2UiKTsKICAgICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWPlua2iOmAieaLqeS9jee9rgogICAgb25DYW5jZWwoKSB7CiAgICAgIHRoaXMucG9wdXBTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBtYXBPYmoubWFwLm1hcE9uTG9hZCgoKSA9PiB7CiAgICAgICAgICBtYXBPYmoubWFwLmFkZFJlcG9ydEV2ZW50TWFya2VyKHRoaXMucG9zaXRpb24pOwogICAgICAgICAgaWYgKHRoaXMucG9zaXRpb24pIHsKICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRSYW5nZUxpc3QodGhpcy5yYW5nZUxpc3QpOwogICAgICAgICAgICBtYXBPYmoubWFwLmZseVRvKHsKICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiwKICAgICAgICAgICAgICB6b29tOiAxOAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5jdXJGZWF0dXJlICYmIG1hcE9iai5tYXAuc2V0TGluZUdlb1NvdXJjZShbdGhpcy5jdXJGZWF0dXJlXSwgImN1ckluc3BMaW5lU291cmNlIik7CiAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDnoa7orqTpgInmi6nkvY3nva4KICAgIG9uQ29uZmlybSgpIHsKICAgICAgaWYgKCF0aGlzLnBvc2l0aW9uKSByZXR1cm47CiAgICAgIHRoaXMucG9wdXBTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBtYXBPYmoubWFwLm1hcE9uTG9hZCgoKSA9PiB7CiAgICAgICAgICBtYXBPYmoubWFwLmFkZFJlcG9ydEV2ZW50TWFya2VyKHRoaXMucG9zaXRpb24pOwogICAgICAgICAgaWYgKHRoaXMucG9zaXRpb24pIHsKICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRSYW5nZUxpc3QodGhpcy5yYW5nZUxpc3QpOwogICAgICAgICAgICBtYXBPYmoubWFwLmZseVRvKHsKICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiwKICAgICAgICAgICAgICB6b29tOiAxOAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5jdXJGZWF0dXJlICYmIG1hcE9iai5tYXAuc2V0TGluZUdlb1NvdXJjZShbdGhpcy5jdXJGZWF0dXJlXSwgImN1ckluc3BMaW5lU291cmNlIik7CiAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgfQogICAgICAgICAgLyog5rOo6YeK6auY5b63YXBp6LCD55SoDQogICAgICAgICAgdmFyIGNvcmRGb3JMb2Nfc3RhcnQgPQ0KICAgICAgICAgICAgdGhpcy5wb3NpdGlvblswXS50b1N0cmluZygpICsNCiAgICAgICAgICAgICIsIiArDQogICAgICAgICAgICB0aGlzLnBvc2l0aW9uWzFdLnRvU3RyaW5nKCk7DQogICAgICAgICAgdmFyIEdhb0RlVXJsX3N0YXJ0ID0NCiAgICAgICAgICAgICJodHRwczovL3Jlc3RhcGkuYW1hcC5jb20vdjMvZ2VvY29kZS9yZWdlbz9sb2NhdGlvbj0iICsNCiAgICAgICAgICAgIGNvcmRGb3JMb2Nfc3RhcnQgKw0KICAgICAgICAgICAgIiZrZXk9NzUwNDZjMWQ2Njk3OTllM2JlYzY1MDNlZmJjOTRjM2UiICsNCiAgICAgICAgICAgICImcmFkaXVzPTUwIjsNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KEdhb0RlVXJsX3N0YXJ0KQ0KICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uTmFtZSA9IHJlcy5kYXRhLnJlZ2VvY29kZS5mb3JtYXR0ZWRfYWRkcmVzcy5zcGxpdCgNCiAgICAgICAgICAgICAgICAi5biCIg0KICAgICAgICAgICAgICApW3Jlcy5kYXRhLnJlZ2VvY29kZS5mb3JtYXR0ZWRfYWRkcmVzcy5zcGxpdCgi5biCIikubGVuZ3RoIC0gMV07DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWcsOeQhue8lueggeaKpemUme+8miIgKyBlcnIpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAqLwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvKioNCiAgICAgKiDotoXlm77lnZDmoIfovazmjaLkuLpmZWF0dXJlDQogICAgICovCiAgICBzdXBlck1hcFBhcmFtc1RvRmVhdHVyZShnZW9tZXRyeSkgewogICAgICBsZXQgY29vcmQ7CiAgICAgIGxldCB0eXBlOwogICAgICBzd2l0Y2ggKGdlb21ldHJ5LnR5cGUpIHsKICAgICAgICBjYXNlICJQT0lOVCI6CiAgICAgICAgICB0eXBlID0gIlBvaW50IjsKICAgICAgICAgIGNvb3JkID0gW2dlb21ldHJ5LnBvaW50c1swXS54LCBnZW9tZXRyeS5wb2ludHNbMF0ueV07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJMSU5FIjoKICAgICAgICAgIHR5cGUgPSAiTGluZVN0cmluZyI7CiAgICAgICAgICBjb29yZCA9IGdlb21ldHJ5LnBvaW50cy5tYXAocG9pbnQgPT4gW3BvaW50LngsIHBvaW50LnldKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlJFR0lPTiI6CiAgICAgICAgICB0eXBlID0gIlBvbHlnb24iOwogICAgICAgICAgY29vcmQgPSBbZ2VvbWV0cnkucG9pbnRzLm1hcChwb2ludCA9PiBbcG9pbnQueCwgcG9pbnQueV0pXTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogIkZlYXR1cmUiLAogICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkCiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIGZlYXR1cmVUb09iamVjdChuYW1lcywgdmFsdWVzKSB7CiAgICAgIGxldCBvYmogPSB7fTsKICAgICAgbmFtZXMuZm9yRWFjaCgobmFtZSwgaW5kZXgpID0+IHsKICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZXNbaW5kZXhdOwogICAgICB9KTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0sCiAgICAvLyDpgJrov4fotoXlm77mn6Xor6Lorr7nva5sb2NhdGlvbk5hbWUKICAgIGFzeW5jIHNldExvY2F0aW9uTmFtZSh0eXBlID0gIlBPSSIpIHsKICAgICAgaWYgKHRoaXMucG9zaXRpb24pIHsKICAgICAgICAvLyDnlJ/miJA1MG3nvJPlhrLljLrov5vooYzmn6Xor6IKICAgICAgICBsZXQgZ2VvbSA9IHR1cmYuYnVmZmVyKHR1cmYucG9pbnQodGhpcy5wb3NpdGlvbiksIDAuMDUsIHsKICAgICAgICAgIHVuaXQ6ICdraWxvbWV0ZXJzJwogICAgICAgIH0pOwogICAgICAgIGxldCBnZW9tZXRyeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZ2VvbS5nZW9tZXRyeSkpOwogICAgICAgIGxldCBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdLm1hcChpdGVtID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHg6IGl0ZW1bMF0sCiAgICAgICAgICAgIHk6IGl0ZW1bMV0KICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgZ2VvbWV0cnkucG9pbnRzID0gY29vcmRpbmF0ZXM7CiAgICAgICAgZ2VvbWV0cnkudHlwZSA9ICJSRUdJT04iOwogICAgICAgIGRlbGV0ZSBnZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgICBsZXQgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBheGlvcyh7CiAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgIHVybDogc3VwZXJNYXBVcmxbdHlwZV0udXJsLAogICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBnZXRGZWF0dXJlTW9kZTogIlNQQVRJQUxfQVRUUklCVVRFRklMVEVSIiwKICAgICAgICAgICAgZGF0YXNldE5hbWVzOiBzdXBlck1hcFVybFt0eXBlXS5kYXRhc2V0cywKICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiAnJywKICAgICAgICAgICAgZ2VvbWV0cnksCiAgICAgICAgICAgIHNwYXRpYWxRdWVyeU1vZGU6ICJDT05UQUlOIgogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgICBpZiAoZGF0YS50b3RhbENvdW50KSB7CiAgICAgICAgICBsZXQgYXJyID0gW107CiAgICAgICAgICBkYXRhLmZlYXR1cmVzICYmIGRhdGEuZmVhdHVyZXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgbGV0IHByb3BlcnRpZXMgPSB0aGlzLmZlYXR1cmVUb09iamVjdChpdGVtLmZpZWxkTmFtZXMsIGl0ZW0uZmllbGRWYWx1ZXMpOwogICAgICAgICAgICBsZXQgY29vcmQgPSB0aGlzLnN1cGVyTWFwUGFyYW1zVG9GZWF0dXJlKGl0ZW0uZ2VvbWV0cnkpOwogICAgICAgICAgICBhcnIucHVzaCh7CiAgICAgICAgICAgICAgLi4ucHJvcGVydGllcywKICAgICAgICAgICAgICBjb29yZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc3QgdGVtcERhdGEgPSBhcnIubWFwKGl0ZW0gPT4gewogICAgICAgICAgICBpdGVtLkFEUkVTUyA9IGl0ZW0uQURSRVNTID8gaXRlbS5BRFJFU1MucmVwbGFjZSgi5rWZ5rGf55yBIiwgIiIpIDogaXRlbS5OQU1FLnJlcGxhY2UoIua1meaxn+ecgSIsICIiKTsKICAgICAgICAgICAgaXRlbS5BRFJFU1MgPSBpdGVtLkFEUkVTUyA/IGl0ZW0uQURSRVNTLnJlcGxhY2UoIuadreW3nuW4giIsICIiKSA6IGl0ZW0uTkFNRS5yZXBsYWNlKCLmna3lt57luIIiLCAiIik7CiAgICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodGVtcERhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmxvY2F0aW9uTmFtZSA9IHRlbXBEYXRhWzBdLkFEUkVTUzsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmxvY2F0aW9uTmFtZSA9ICcnOwogICAgfSwKICAgIC8vIOaPkOS6pAogICAgc3VibWl0KCkgewogICAgICB0aGlzLiRyZWZzLmV2ZW50Rm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAvLyBpZiAoIXRoaXMuZW5nSW5mb0RUTykgIHsKICAgICAgICAgIC8vICAgdW5pLnNob3dUb2FzdCh7CiAgICAgICAgICAvLyAgICAgdGl0bGU6ICLmlbDmja7kuI3lrZjlnKgiLAogICAgICAgICAgLy8gICAgIGR1cmF0aW9uOiAzMDAwCiAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgLy8gICByZXR1cm47CiAgICAgICAgICAvLyB9CiAgICAgICAgICBsZXQgY29weUV2ZW50Rm9ybSA9IHRoaXMuZGVlcENsb25lKHRoaXMuZXZlbnRGb3JtKTsKICAgICAgICAgIC8vIOS4iuaKpeS9jee9rgogICAgICAgICAgLy8gY29uc3QgZ2VvbSA9IHRoaXMuY29tcHV0ZUNlbnRlcih0aGlzLmZlYXR1cmUpOwogICAgICAgICAgY29uc3QgZ2VvbSA9IHsKICAgICAgICAgICAgdHlwZTogIlBvaW50IiwKICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHRoaXMucG9zaXRpb24KICAgICAgICAgIH07CiAgICAgICAgICBsZXQgdXBsb2FkRmlsZXMgPSBbXTsKICAgICAgICAgIGlmICh0aGlzLmV2ZW50Rm9ybS5pbnNwVGFza0RldGFpbERlc2Mudm9pY2UuZmlsZVRva2VuKSB7CiAgICAgICAgICAgIHVwbG9hZEZpbGVzLnB1c2godGhpcy5ldmVudEZvcm0uaW5zcFRhc2tEZXRhaWxEZXNjLnZvaWNlKTsKICAgICAgICAgIH0KICAgICAgICAgIHVwbG9hZEZpbGVzID0gdXBsb2FkRmlsZXMuY29uY2F0KHRoaXMuZXZlbnRGb3JtLmZpbGVzKTsKICAgICAgICAgIGNvbnN0IHByZWxpbWluYXJ5SGFuZGxlRmlsZSA9IEpTT04uc3RyaW5naWZ5KHVwbG9hZEZpbGVzKTsKICAgICAgICAgIGNvbnN0IGluc3BPcmcgPSBKU09OLnBhcnNlKHRoaXMudGFza0RldGFpbC5pbnNwT3JnKTsKICAgICAgICAgIGNvbnN0IGV2ZW50UGF5bG9hZCA9IHsKICAgICAgICAgICAgYWRkcmVzczogdGhpcy5sb2NhdGlvbk5hbWUsCiAgICAgICAgICAgIGNvbmNsdXNpb246IGNvcHlFdmVudEZvcm0uZXZlbnRUeXBlLAogICAgICAgICAgICBldmVudERlc2NyaWJlOiB0aGlzLmV2ZW50Rm9ybS5yZW1hcmsudGV4dCwKICAgICAgICAgICAgZXZlbnRTb3VyY2U6ICJpbnNwZWN0aW9uX2V2ZW50X3NvdXJjZV9pbnNwZWN0aW9uIiwKICAgICAgICAgICAgZXZlbnRUeXBlOiBjb3B5RXZlbnRGb3JtLmluc3BJdGVtQ29kZSwKICAgICAgICAgICAgaW5zcEJ1c2luZXNzVHlwZTogdGhpcy50YXNrRGV0YWlsLmluc3BCdXNpbmVzc1R5cGUsCiAgICAgICAgICAgIG9mZmljZUlkOiB0aGlzLnRhc2tEZXRhaWwuaW5zcE9yZ0lkLAogICAgICAgICAgICBvZmZpY2U6IGluc3BPcmcub2ZmaWNlLAogICAgICAgICAgICBjb21wYW55OiBpbnNwT3JnLmNvbXBhbnksCiAgICAgICAgICAgIGNvbXBhbnlJZDogaW5zcE9yZy5jb21wYW55SWQsCiAgICAgICAgICAgIHByZWxpbWluYXJ5SGFuZGxlOiB0aGlzLmV2ZW50Rm9ybS5pbnNwVGFza0RldGFpbERlc2MudGV4dCwKICAgICAgICAgICAgcHJlbGltaW5hcnlIYW5kbGVGaWxlOiBwcmVsaW1pbmFyeUhhbmRsZUZpbGUsCiAgICAgICAgICAgIGV2ZW50RGVzY3JpYmVGaWxlOiB0aGlzLmV2ZW50Rm9ybS5yZW1hcmsudm9pY2UuZmlsZVRva2VuID8gSlNPTi5zdHJpbmdpZnkodGhpcy5ldmVudEZvcm0ucmVtYXJrLnZvaWNlKSA6ICIiLAogICAgICAgICAgICAvLyDkv53lrZjkuIrmiqXkuovku7bkvY3nva4KICAgICAgICAgICAgcmVnaW9uSXRlbVRleHQ6IEpTT04uc3RyaW5naWZ5KGdlb20pLAogICAgICAgICAgICAvLyByZWdpb25JdGVtVGV4dDogdGhpcy5lbmdJbmZvRFRPLmluZm9EVE8uZW5nR2VvbSwKICAgICAgICAgICAgdGFza0lkOiB0aGlzLnRhc2tEZXRhaWwudGFza0lkLAogICAgICAgICAgICAvLyAKICAgICAgICAgICAgZW5nSWQ6IHRoaXMuZW5nSW5mb0RUTyA/IHRoaXMuZW5nSW5mb0RUTy5lbmdJZCA6IHVuZGVmaW5lZCwKICAgICAgICAgICAgZXZlbnRJdGVtVGV4dDogSlNPTi5zdHJpbmdpZnkoZ2VvbSksCiAgICAgICAgICAgIC8vIGV2ZW50SXRlbVRleHQ6IHRoaXMuZW5nSW5mb0RUTy5pbmZvRFRPLmVuZ0dlb20sCgogICAgICAgICAgICBsbmc6IGdlb20uY29vcmRpbmF0ZXNbMF0sCiAgICAgICAgICAgIGxhdDogZ2VvbS5jb29yZGluYXRlc1sxXSwKICAgICAgICAgICAgcmVwb3J0ZXJJZDogdGhpcy51c2VySW5mby5pZCwKICAgICAgICAgICAgcmVwb3J0ZXJOYW1lOiB0aGlzLnVzZXJJbmZvLnVzZXJGdWxsbmFtZQogICAgICAgICAgfTsKICAgICAgICAgIGluc2VydChldmVudFBheWxvYWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgICAgICBUb2FzdCh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5LiK5oql5LqL5Lu25oiQ5YqfIiwKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDmt7Hmi7fotJ0KICAgIGRlZXBDbG9uZShkYXRhKSB7CiAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgIH0sCiAgICAvLyDorqHnrpfkuK3lv4PngrkKICAgIGNvbXB1dGVDZW50ZXIoZmVhdHVyZSkgewogICAgICBsZXQgcG9zaXRpb247CiAgICAgIGlmIChmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdQb2x5Z29uJyB8fCBmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdNdWx0aVBvbHlnb24nKSB7CiAgICAgICAgY29uc3QgY2VudGVyID0gdHVyZi5jZW50ZXIoZmVhdHVyZS5nZW9tZXRyeSk7CiAgICAgICAgcG9zaXRpb24gPSBjZW50ZXIuZ2VvbWV0cnk7CiAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnTGluZVN0cmluZycpIHsKICAgICAgICBjb25zdCBjZW50ZXIgPSB0dXJmLmNlbnRlcihmZWF0dXJlLmdlb21ldHJ5KTsKICAgICAgICBwb3NpdGlvbiA9IGNlbnRlci5nZW9tZXRyeTsKICAgICAgfSBlbHNlIGlmIChmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdQb2ludCcpIHsKICAgICAgICBwb3NpdGlvbiA9IGZlYXR1cmUuZ2VvbWV0cnk7CiAgICAgIH0KICAgICAgcmV0dXJuIHBvc2l0aW9uOwogICAgfSwKICAgIC8vIOagueaNruWFs+mUruWtl+afpeivogogICAgYXN5bmMgZ2V0RW5nUHJvcGVydHlWYWwoZ3VpZCkgewogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgdmFsdWU6IGd1aWQKICAgICAgfTsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZW5nUHJvcGVydHlWYWx1ZShwYXJhbXMpOwogICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgIHRoaXMuZW5nSW5mb0RUTyA9IHJlcy5kYXRhOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZW5nSW5mb0RUTyA9IG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBnZXRFbmdEYXRhOiBfLmRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIGluc3BCdXNpbmVzc1R5cGU6IHRoaXMudGFza0RldGFpbC5pbnNwQnVzaW5lc3NUeXBlLAogICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICB0eXBlOiAiUG9pbnQiLAogICAgICAgICAgY29vcmRpbmF0ZXM6IHRoaXMucG9zaXRpb24KICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuc2V0TG9jYXRpb25OYW1lKCk7CiAgICAgIHRoaXMuZ2V0RW5nTGlzdChwYXJhbXMpOwogICAgfSwgNTAwKSwKICAgIGZpbHRlckVuZ0xpc3Qoa2V5d29yZCkgewogICAgICBpZiAoa2V5d29yZCkgewogICAgICAgIHRoaXMuZmlsdGVyZWRMaXN0ID0gdGhpcy5lbmdMaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0uZGV2aWNlaWQuc2VhcmNoKGtleXdvcmQpICE9IC0xKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZpbHRlcmVkTGlzdCA9IHRoaXMuZW5nTGlzdDsKICAgICAgfQogICAgfSwKICAgIC8vIOi/lOWbnnJhZGl1c+S4uuWNiuW+hOiMg+WbtOeahOW3peeoi+WvueixoeaVsOaNrgogICAgYXN5bmMgZ2V0RW5nTGlzdChwb3NpdGlvbiwgcmFkaXVzID0gMzUpIHsKICAgICAgVG9hc3QubG9hZGluZyh7CiAgICAgICAgbWVzc2FnZTogIuiOt+WPljI1beWGheiuvuaWveaVsOaNri4uLiIKICAgICAgfSk7CiAgICAgIGxldCBwaXBlVHlwZTsKICAgICAgc3dpdGNoIChwb3NpdGlvbi5pbnNwQnVzaW5lc3NUeXBlKSB7CiAgICAgICAgY2FzZSAiV0FURVJfU1VQUExZIjoKICAgICAgICAgIHBpcGVUeXBlID0gIuS+m+awtOeuoee6vyI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSQUlfV0FURVIiOgogICAgICAgICAgcGlwZVR5cGUgPSAi6Zuo5rC0566h57q/IjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlBPTExVVEVEX1dBVEVSIjoKICAgICAgICAgIHBpcGVUeXBlID0gIuaxoeawtOeuoee6vyI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJPUklHSU5fV0FURVIiOgogICAgICAgICAgcGlwZVR5cGUgPSAi5rqQ5rC0566h57q/IjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlJJVkVSX1dBVEVSIjoKICAgICAgICAgIHBpcGVUeXBlID0gIuaOkuaxn+euoSI7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIGdlb21Qb2ludDogcG9zaXRpb24uZ2VvbWV0cnksCiAgICAgICAgcGlwZVR5cGU6IHBpcGVUeXBlLAogICAgICAgIHJhZGl1czogcmFkaXVzLAogICAgICAgIHR5cGU6ICflhajpg6gnCiAgICAgIH07CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldEFsbFBvaW50T3JMaW5lR2VvbUluc3AocGFyYW1zKTsKICAgICAgLy8gY29uc29sZS5sb2coImdldCBhbGwgUG9pbnQgb3IgTGluZSBnZW9tPT0+IiwgcmVzLmRhdGEpOwogICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMpIHsKICAgICAgICB0aGlzLmVuZ0xpc3QgPSByZXMuZGF0YS5tYXAoaXRlbSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAuLi5pdGVtLAogICAgICAgICAgICB0ZXh0OiBpdGVtLmRldmljZWlkICsgIiB8ICIgKyAoaXRlbS5waXBldHlwZSB8fCBpdGVtLnR5cGUpLAogICAgICAgICAgICB2YWx1ZTogaXRlbS5kZXZpY2VpZAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmZpbHRlcmVkTGlzdCA9IHRoaXMuZW5nTGlzdDsKICAgICAgfQogICAgfSwKICAgIGNob29zZUVuZyh2YWx1ZSkgewogICAgICB2YXIgX3ZhbHVlJGRldGFpbDsKICAgICAgY29uc3QgZGF0YSA9IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB2b2lkIDAgfHwgKF92YWx1ZSRkZXRhaWwgPSB2YWx1ZS5kZXRhaWwpID09PSBudWxsIHx8IF92YWx1ZSRkZXRhaWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSRkZXRhaWwuZGF0YTsKICAgICAgaWYgKCFkYXRhKSByZXR1cm47CiAgICAgIHRoaXMuZ2V0RW5nUHJvcGVydHlWYWwoZGF0YS5ndWlkKTsKICAgICAgY29uc3QgZ2VvbSA9IGRhdGEuc3RfYXNnZW9qc29uIHx8IGRhdGEuZ2VvbTsKICAgICAgaWYgKCFnZW9tKSByZXR1cm47CiAgICAgIGNvbnN0IGZlYXR1cmUgPSB7CiAgICAgICAgaWQ6IGRhdGEuaWQsCiAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgLi4uZGF0YQogICAgICAgIH0sCiAgICAgICAgZ2VvbWV0cnk6IEpTT04ucGFyc2UoZ2VvbSksCiAgICAgICAgdHlwZTogJ2ZlYXR1cmUnCiAgICAgIH07CiAgICAgIHRoaXMuY3VyRmVhdHVyZSA9IGZlYXR1cmU7CiAgICAgIG1hcE9iai5tYXAuc2V0TGluZUdlb1NvdXJjZShbZmVhdHVyZV0sICJjdXJJbnNwTGluZVNvdXJjZSIpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogewogICAgICBoYW5kbGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICAgICAgaWYgKGZyb20ucGF0aCA9PT0gIi9wcmV2aWV3LWltYWdlIikgewogICAgICAgICAgdGhpcy5zaG93VmlzaWJsZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd1Zpc2libGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIC8vIOi/lOWbnuWIsOWIl+ihqOmhtemdogogIG9uQmFja1ByZXNzKG9wdGlvbnMpIHsKICAgIGlmIChvcHRpb25zLmZyb20gPT09ICdiYWNrYnV0dG9uJykgewogICAgICBEaWFsb2cuY29uZmlybSh7CiAgICAgICAgdGl0bGU6ICfmj5DnpLonLAogICAgICAgIG1lc3NhZ2U6ICfnoa7lrprpgIDlh7rkuIrmiqXkuovku7blkJfvvJ8nCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvbmZpcm0pIHsKICAgICAgICAgIG1hcE9iai5tYXAubWFwSW5zdGFuY2UgJiYgbWFwT2JqLm1hcC5tYXBJbnN0YW5jZS5kZXN0b3J5TWFwKCk7CiAgICAgICAgICBtYXBPYmoubWFwLm1hcEluc3RhbmNlID0gbnVsbDsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ0luc3BlY3Rpb25NYW5hZ2UnLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBuYW1lOiAn5omn6KGMJywKICAgICAgICAgICAgICB0YXNrSWQ6IHRoaXMudGFza0RldGFpbC50YXNrSWQsCiAgICAgICAgICAgICAgaW5zcEJ1c2luZXNzVHlwZTogdGhpcy50YXNrRGV0YWlsLmluc3BCdXNpbmVzc1R5cGUsCiAgICAgICAgICAgICAgcmVwb3J0RXZlbnQ6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8g56aB5q2i6buY6K6k6L+U5ZueICAKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgYnVzLiRvZmYoImV2ZW50TWFya2VyUG9zaXRpb24iKTsKICB9Cn07"},{"version":3,"names":["MapComp","bus","_","axios","url","turf","engPropertyValue","tree","insert","getAllPointOrLineGeomInsp","Toast","mapObj","map","mapInstance","superMapUrl","gisDomain","datasets","name","components","data","dictionary","WATER_SUPPLY","RAI_WATER","POLLUTED_WATER","locationName","position","curEng","curFeature","engList","filteredList","initTop","keyword","userInfo","feature","popupShow","eventForm","eventType","files","inspTaskDetailDesc","text","voice","remark","eventTypeList","rangeList","taskDetail","engInfoDTO","selectEventType","rules","required","message","photoLength","trigger","previewURL","upimgPreview","headers","uploadFile","showVisible","computed","eventTypeListNewFiltered","temp","find","item","label","inspBusinessType","children","created","activated","setLocationName","uni","setStorageSync","$nextTick","refreshReportEvent","getEventTypeList","mounted","localStorage","setItem","getItem","$on","pos","getEngData","methods","mapLoaded","$route","query","mapOnLoad","addReportEventMarker","addRangeList","flyTo","zoom","then","res","sons","value","code","catch","getImageInfo","val","length","photoList","forEach","index","push","fileToken","$set","eventTypeConfirm","event","pickPosition","savePath","setTimeout","setLineGeoSource","onCancel","onConfirm","superMapParamsToFeature","geometry","coord","type","points","x","y","point","coordinates","featureToObject","names","values","obj","geom","buffer","unit","JSON","parse","stringify","method","getFeatureMode","datasetNames","attributeFilter","spatialQueryMode","totalCount","arr","features","properties","fieldNames","fieldValues","tempData","ADRESS","replace","NAME","submit","$refs","validate","valid","copyEventForm","deepClone","uploadFiles","concat","preliminaryHandleFile","inspOrg","eventPayload","address","conclusion","eventDescribe","eventSource","inspItemCode","officeId","inspOrgId","office","company","companyId","preliminaryHandle","eventDescribeFile","regionItemText","taskId","engId","undefined","eventItemText","lng","lat","reporterId","id","reporterName","userFullname","status","duration","$router","go","computeCenter","center","getEngPropertyVal","guid","params","debounce","getEngList","filterEngList","filter","deviceid","search","radius","loading","pipeType","geomPoint","pipetype","chooseEng","_value$detail","detail","st_asgeojson","watch","handler","to","from","next","path","onBackPress","options","Dialog","confirm","title","destoryMap","reportEvent","beforeDestroy","$off"],"sources":["src/views/inspectionManage/add-event.vue"],"sourcesContent":["<!--\r\n * @Description: \r\n * @Author: wei_qx@hdec.com\r\n * @Date: 2021-04-23 08:52:00\r\n * @LastEditor: wei_qx@hdec.com\r\n * @LastEditTime: 2021-09-23 17:04:57\r\n-->\r\n<template>\r\n  <div class=\"popup-container\">\r\n    <fm-popup \r\n      :visible.sync=\"popupShow\"\r\n      position=\"bottom\"\r\n      height=\"100%\"\r\n      width=\"100%\"\r\n      :modal=\"false\"\r\n      :close-on-click-modal=\"false\"\r\n      class=\"popup\"\r\n    >\r\n      <div class=\"head\">\r\n        <i class=\"fm-icon fm-icon-arrow-left\" width=\"24\" height=\"24\" @click=\"onCancel\"></i>\r\n        <text style=\"font-weight: 600;\">{{\"请选位置\"}}</text>\r\n        <text class=\"on-confirm\" @click=\"onConfirm\">确定</text>\r\n      </div>\r\n      <MapComp ref=\"mymap\" :ifInspection=\"true\" :inspBusinessType=\"taskDetail.inspBusinessType\" @mapLoaded=\"mapLoaded\" ></MapComp>\r\n      <fm-list class=\"emergency-pull-bar\" v-if=\"popupShow\">\r\n        <div class=\"content\">\r\n          <fm-search placeholder=\"请输入设备编号\" shape=\"square\" v-model=\"keyword\" :show-action=\"false\" @change=\"filterEngList\"></fm-search>\r\n          <!-- <uni-data-checkbox class=\"checkbox\" mode=\"list\" icon=\"right\" v-model=\"curEng\" :localdata=\"filteredList\" @change=\"chooseEng\"></uni-data-checkbox> -->\r\n          <fm-empty\r\n            v-if=\"!filteredList.length\"\r\n            description=\"暂无数据\"\r\n          />\r\n        </div>\r\n      </fm-list>\r\n    </fm-popup>\r\n    <fm-nav-bar title=\"事件上报\" left-arrow @click-left=\"$router.go(-1)\">\r\n    </fm-nav-bar>\r\n    <fm-list v-if=\"!popupShow\" class=\"scroll\">\r\n      <fm-form :model=\"eventForm\" ref=\"eventForm\" class=\"event-form\">\r\n        <fm-field label=\"事件类型\" label-width=\"4.44rem\" required v-model=\"eventForm.eventType\">\r\n        </fm-field>\r\n        <!-- <fm-picker\r\n          v-model=\"selectEventType\"\r\n          :columns=\"eventTypeListNewFiltered\"\r\n          @confirm=\"eventTypeConfirm\"\r\n          title=\"事件类型\"\r\n          confirm-button-text=\"确定\"\r\n          cancel-button-text=\"返回\"\r\n        ></fm-picker> -->\r\n        <fm-field label=\"现场描述\" v-model=\"eventForm.remark.text\" label-width=\"4.44rem\" />\r\n        <fm-field label=\"初步处理\" v-model=\"eventForm.inspTaskDetailDesc.text\" label-width=\"4.44rem\" />\r\n        <!-- <u-gap height=\"8\" bg-color=\"#F5F7F9\"></u-gap> -->\r\n        <fm-field label=\"多媒体附件\" label-width=\"4.44rem\" label-position=\"top\" required>\r\n          <div>\r\n            <fm-uploader\r\n            />\r\n          </div>\r\n          <fm-field style=\"width: 0.55rem;visibility:hidden;\" v-model=\"eventForm.photoLength\"  placeholder=\"\" disabled />\r\n        </fm-field>\r\n        <!-- <u-gap height=\"8\" bg-color=\"#F5F7F9\"></u-gap> -->\r\n        <div class=\"position\">\r\n          <MapComp style=\"height: 7.77rem;\" ref=\"mymap\" :ifInspection=\"true\" :inspBusinessType=\"taskDetail.inspBusinessType\" ></MapComp>\r\n          <fm-field label=\"位置\" v-model=\"locationName\" label-width=\"3.33rem\" @click-suffix-icon=\"pickPosition\" suffix-icon=\"location-o\">\r\n          </fm-field>\r\n        </div>\r\n      </fm-form>\r\n    </fm-list>\r\n    <div class=\"submit-event\">\r\n      <fm-button style=\"width: 100%;\" type=\"primary\" @click=\"submit\">提交</fm-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport MapComp from \"../inspectMap/index.vue\";\r\n// import SunuiUpimg from '../../components/sunui-upimg/sunui-upimg.vue';\r\nimport bus from \"../../views/inspectMap/utils/Bus.js\";\r\n// import PullupBar from \"@comp/pullup-bar/index2.vue\";\r\n// import UniDataCheckbox from '../../components/uni-data-checkbox/uni-data-checkbox.vue';\r\nimport _ from \"lodash\";\r\nimport axios from \"axios\";\r\nimport url from \"@common/config.js\";\r\nimport * as turf from '@turf/turf'\r\nimport { engPropertyValue, tree, insert, getAllPointOrLineGeomInsp } from './api'\r\nimport { Toast } from 'fawkes-mobile-lib';\r\nconst mapObj = {\r\n  map: null,\r\n  mapInstance: null\r\n}\r\nconst superMapUrl = {\r\n  'POI': {\r\n    url:\r\n      url.gisDomain +\r\n      \"/iserver/services/data-LuWangYuPOI/rest/data/featureResults.rjson?returnContent=true\",\r\n    datasets: [\"POI:POI\"],\r\n  },\r\n  '道路名': {\r\n    url:\r\n      url.gisDomain +\r\n      \"/iserver/services/data-LuWangYuPOI/rest/data/featureResults.rjson?returnContent=true\",\r\n    datasets: [\"POI:余杭区矢量路网\"],\r\n  },\r\n};\r\nexport default {\r\n  name: \"add-event\",\r\n  components: {\r\n    MapComp,\r\n    // SunuiUpimg,\r\n    // PullupBar,\r\n    // UniDataCheckbox\r\n  },\r\n  data() {\r\n    return {\r\n      dictionary: {\r\n        WATER_SUPPLY: '供水',\r\n        RAI_WATER: '雨水',\r\n        POLLUTED_WATER: '污水'\r\n      },\r\n\r\n      locationName: \"位置描述信息\",\r\n      position: [0, 0],\r\n      curEng: null,\r\n      curFeature: null,\r\n      engList: [],\r\n      filteredList: [],\r\n      initTop: \"70%\",\r\n      keyword: \"\",\r\n      userInfo: {},\r\n      feature: {},\r\n      popupShow: false,\r\n      eventForm: {\r\n        eventType: \"\",\r\n        files: [],\r\n        inspTaskDetailDesc: {\r\n          text: \"\",\r\n          voice: {}\r\n        },\r\n        remark: {\r\n          text: \"\",\r\n          voice: {}\r\n        }\r\n      },\r\n      eventTypeList: [],\r\n      rangeList: [],\r\n      taskDetail: {},\r\n      engInfoDTO: null,\r\n      selectEventType: false,\r\n      rules: {\r\n        eventType: [\r\n          {\r\n            required: true,\r\n            message: \"请选择事件类型\"\r\n          }\r\n        ],\r\n        photoLength: [\r\n          {\r\n            required: true,\r\n            message: \"请上传附件\",\r\n            trigger: [\"change\", \"blur\"]\r\n          }\r\n        ]\r\n      },\r\n      previewURL: \"/sys-storage/download_image?f8s=\",\r\n      upimgPreview: [],\r\n      headers: {},\r\n      url: {\r\n        // 本页面使用到的url\r\n        uploadFile: \"sys-storage/upload\",\r\n        // findFile: \"ecidi-cmp/file/cmpFileGroup/findFilesByGroupId\",\r\n      },\r\n      showVisible: false\r\n    }\r\n  },\r\n  computed: {\r\n    eventTypeListNewFiltered() {\r\n      const { dictionary, eventTypeList, taskDetail } = this;\r\n      let temp = eventTypeList.find(item => {\r\n        return item.label === dictionary[taskDetail.inspBusinessType];\r\n      });\r\n      if (temp) {\r\n        return temp.children;\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.headers = {\r\n      // \"Fawkes-Auth\": uni.getStorageSync(\"Fawkes-Auth\"),\r\n    };\r\n  },\r\n  activated() {\r\n    this.setLocationName();\r\n    uni.setStorageSync(\"isReportEvent\", true);\r\n    if (!this.showVisible) {\r\n      this.$nextTick(() => {\r\n        this.refreshReportEvent();\r\n      })\r\n      this.getEventTypeList();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setLocationName();\r\n    localStorage.setItem(\"isReportEvent\", true);\r\n    this.userInfo = localStorage.getItem(\"userInfo\");\r\n    bus.$on(\"eventMarkerPosition\", (pos) => {\r\n      this.position = pos;\r\n      this.getEngData();\r\n    })\r\n    this.$nextTick(() => {\r\n      this.refreshReportEvent();\r\n    })\r\n    this.getEventTypeList();\r\n  },\r\n  methods: {\r\n    mapLoaded(mapInstance) {\r\n      mapObj.mapInstance = mapInstance\r\n      mapObj.map = mapInstance.map\r\n    },\r\n    // 刷新\r\n    refreshReportEvent() {\r\n      this.position= [0, 0];\r\n      this.curEng= null;\r\n      this.curFeature = null;\r\n      this.engList= [];\r\n      this.filteredList= [];\r\n      this.locationName = \"位置描述信息\";\r\n      this.initTop= \"70%\";\r\n      this.keyword= \"\";\r\n      this.eventForm = {\r\n        eventType: \"\",\r\n        files: [],\r\n        inspTaskDetailDesc: {\r\n          text: \"\",\r\n          voice: {}\r\n        },\r\n        remark: {\r\n          text: \"\",\r\n          voice: {}\r\n        }\r\n      };\r\n      this.upimgPreview = [];\r\n      if (this.$route.query.position) {\r\n        // this.feature = this.$route.query.feature;\r\n        this.rangeList = this.$route.query.rangeList;\r\n        this.taskDetail = this.$route.query.taskDetail;\r\n        this.position = this.$route.query.position;\r\n      }\r\n      mapObj.map.mapOnLoad(() => {\r\n        if (this.position) {\r\n          mapObj.map.addReportEventMarker(this.position);\r\n          mapObj.map.addRangeList(this.rangeList);\r\n          mapObj.map.flyTo({ position: this.position, zoom: 18});\r\n        } \r\n        \r\n      })\r\n      // this.$refs.eventForm.setRules(this.rules);\r\n    },\r\n    // 获取事件类型\r\n    getEventTypeList() {\r\n      tree().then(res => {\r\n        this.eventTypeList = res.data.sons.map(item => {\r\n          return {\r\n            value: item.code,\r\n            label: item.name,\r\n            children: item.sons.map(item => {\r\n              return {\r\n                value: item.code,\r\n                label: item.name,\r\n                children: item.sons.map(item => {\r\n                  return {\r\n                    value: item.code,\r\n                    label: item.name\r\n                  }\r\n                })\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        Toast({\r\n          message: \"字典加载失败\",\r\n        });\r\n      })\r\n    },\r\n    // 获取图片信息\r\n    getImageInfo(val) {\r\n      if (val && val[0].length > 0) {\r\n        this.eventForm.files = val[0];\r\n        let photoList = [];\r\n        val[0].forEach((item, index) => {\r\n          photoList.push(item.fileToken);\r\n        });\r\n        let temp = photoList.length + \"\";\r\n        this.$set(this.eventForm, \"photoLength\", temp);\r\n      } else {\r\n        this.$set(this.eventForm, \"photoLength\", \"\");\r\n      }\r\n    },\r\n    // 事件类型选择确认\r\n    eventTypeConfirm(event) {\r\n      this.$set(this.eventForm, \"eventType\", event[1].label);\r\n      this.$set(this.eventForm, \"inspItemCode\", event[1].value);\r\n    },\r\n    // 选择位置\r\n    pickPosition() {\r\n      // 上传组件回显\r\n      this.upimgPreview = this.eventForm.files.map((item) => {\r\n        return {\r\n          uploadFile: {\r\n            savePath: item.fileToken,\r\n          },\r\n          ...item\r\n        };\r\n      });\r\n      this.popupShow = true;\r\n      this.locationName = \"位置描述信息\";\r\n      this.$nextTick(() => {\r\n        mapObj.map.mapOnLoad(() => {\r\n          mapObj.map.addReportEventMarker(this.position);\r\n          if (this.position) {\r\n            mapObj.map.addRangeList(this.rangeList);\r\n            mapObj.map.flyTo({ position: this.position, zoom: 18});\r\n            setTimeout(() => {\r\n              this.curFeature && mapObj.map.setLineGeoSource([this.curFeature], \"curInspLineSource\");\r\n            }, 1500)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    // 取消选择位置\r\n    onCancel() {\r\n      this.popupShow = false;\r\n      this.$nextTick(() => {\r\n        mapObj.map.mapOnLoad(() => {\r\n          mapObj.map.addReportEventMarker(this.position);\r\n          if (this.position) {\r\n            mapObj.map.addRangeList(this.rangeList);\r\n            mapObj.map.flyTo({ position: this.position, zoom: 18});\r\n            setTimeout(() => {\r\n              this.curFeature && mapObj.map.setLineGeoSource([this.curFeature], \"curInspLineSource\");\r\n            }, 1500)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    // 确认选择位置\r\n    onConfirm() {\r\n      if (!this.position) return;\r\n      this.popupShow = false;\r\n      this.$nextTick(() => {\r\n        mapObj.map.mapOnLoad(() => {\r\n          mapObj.map.addReportEventMarker(this.position);\r\n          if (this.position) {\r\n            mapObj.map.addRangeList(this.rangeList);\r\n            mapObj.map.flyTo({ position: this.position, zoom: 18});\r\n            setTimeout(() => {\r\n              this.curFeature && mapObj.map.setLineGeoSource([this.curFeature], \"curInspLineSource\");\r\n            }, 1500)\r\n          }\r\n          /* 注释高德api调用\r\n          var cordForLoc_start =\r\n            this.position[0].toString() +\r\n            \",\" +\r\n            this.position[1].toString();\r\n          var GaoDeUrl_start =\r\n            \"https://restapi.amap.com/v3/geocode/regeo?location=\" +\r\n            cordForLoc_start +\r\n            \"&key=75046c1d669799e3bec6503efbc94c3e\" +\r\n            \"&radius=50\";\r\n            axios\r\n            .get(GaoDeUrl_start)\r\n            .then((res) => {\r\n              this.locationName = res.data.regeocode.formatted_address.split(\r\n                \"市\"\r\n              )[res.data.regeocode.formatted_address.split(\"市\").length - 1];\r\n            })\r\n            .catch((err) => {\r\n              console.log(\"地理编码报错：\" + err);\r\n            });\r\n            */\r\n        })\r\n      })\r\n    },\r\n    /**\r\n     * 超图坐标转换为feature\r\n     */\r\n    superMapParamsToFeature(geometry) {\r\n      let coord;\r\n      let type;\r\n      switch (geometry.type) {\r\n        case \"POINT\":\r\n          type = \"Point\";\r\n          coord = [geometry.points[0].x, geometry.points[0].y];\r\n          break;\r\n        case \"LINE\":\r\n          type = \"LineString\";\r\n          coord = geometry.points.map((point) => [point.x, point.y]);\r\n          break;\r\n        case \"REGION\":\r\n          type = \"Polygon\";\r\n          coord = [geometry.points.map((point) => [point.x, point.y])];\r\n          break;\r\n      }\r\n      return {\r\n        type: \"Feature\",\r\n        geometry: {\r\n          type,\r\n          coordinates: coord,\r\n        },\r\n      };\r\n    },\r\n    featureToObject(names, values) {\r\n      let obj = {};\r\n      names.forEach((name, index) => {\r\n        obj[name] = values[index];\r\n      });\r\n      return obj;\r\n    },\r\n    // 通过超图查询设置locationName\r\n    async setLocationName(type = \"POI\") {\r\n      if (this.position) {\r\n        // 生成50m缓冲区进行查询\r\n        let geom = turf.buffer(turf.point(this.position), 0.05, {unit: 'kilometers'});\r\n        let geometry = JSON.parse(JSON.stringify(geom.geometry));\r\n        let coordinates = geometry.coordinates[0].map((item) => {\r\n          return {\r\n            x: item[0],\r\n            y: item[1],\r\n          };\r\n        });\r\n        geometry.points = coordinates;\r\n        geometry.type = \"REGION\";\r\n        delete geometry.coordinates;\r\n        let { data } = await axios({\r\n          method: \"post\",\r\n          url: superMapUrl[type].url,\r\n          data: JSON.stringify({\r\n            getFeatureMode: \"SPATIAL_ATTRIBUTEFILTER\",\r\n            datasetNames: superMapUrl[type].datasets,\r\n            attributeFilter: '',\r\n            geometry,\r\n            spatialQueryMode: \"CONTAIN\",\r\n          }),\r\n        });\r\n        if (data.totalCount) {\r\n          let arr = [];\r\n          data.features &&\r\n            data.features.forEach((item) => {\r\n              let properties = this.featureToObject(\r\n                item.fieldNames,\r\n                item.fieldValues\r\n              );\r\n              let coord = this.superMapParamsToFeature(item.geometry);\r\n              arr.push({\r\n                ...properties,\r\n                coord,\r\n              });\r\n            });\r\n          const tempData = arr.map((item) => {\r\n            item.ADRESS = item.ADRESS ? item.ADRESS.replace(\"浙江省\", \"\") : item.NAME.replace(\"浙江省\", \"\");\r\n            item.ADRESS = item.ADRESS ? item.ADRESS.replace(\"杭州市\", \"\") : item.NAME.replace(\"杭州市\", \"\");\r\n            return item;\r\n          });\r\n          if (tempData.length > 0) {\r\n            this.locationName = tempData[0].ADRESS;\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      this.locationName = '';\r\n    },\r\n    // 提交\r\n    submit() {\r\n      this.$refs.eventForm.validate(valid => {\r\n        if (valid) {\r\n          // if (!this.engInfoDTO)  {\r\n          //   uni.showToast({\r\n          //     title: \"数据不存在\",\r\n          //     duration: 3000\r\n          //   });\r\n          //   return;\r\n          // }\r\n          let copyEventForm = this.deepClone(this.eventForm);\r\n          // 上报位置\r\n          // const geom = this.computeCenter(this.feature);\r\n          const geom = {\r\n            type: \"Point\",\r\n            coordinates: this.position\r\n          }\r\n          let uploadFiles = [];\r\n          if (this.eventForm.inspTaskDetailDesc.voice.fileToken) {\r\n            uploadFiles.push(this.eventForm.inspTaskDetailDesc.voice);\r\n          }\r\n          uploadFiles = uploadFiles.concat(this.eventForm.files);\r\n          const preliminaryHandleFile = JSON.stringify(uploadFiles);\r\n          const inspOrg = JSON.parse(this.taskDetail.inspOrg);\r\n          const eventPayload = {\r\n            address: this.locationName,\r\n            conclusion: copyEventForm.eventType,\r\n            eventDescribe: this.eventForm.remark.text,\r\n            eventSource: \"inspection_event_source_inspection\",\r\n            eventType: copyEventForm.inspItemCode,\r\n            inspBusinessType: this.taskDetail.inspBusinessType,\r\n            officeId: this.taskDetail.inspOrgId,\r\n            office: inspOrg.office,\r\n            company: inspOrg.company,\r\n            companyId: inspOrg.companyId,\r\n            preliminaryHandle: this.eventForm.inspTaskDetailDesc.text,\r\n            preliminaryHandleFile: preliminaryHandleFile,\r\n            eventDescribeFile:  this.eventForm.remark.voice.fileToken ? JSON.stringify(this.eventForm.remark.voice) : \"\",\r\n            // 保存上报事件位置\r\n            regionItemText: JSON.stringify(geom),\r\n            // regionItemText: this.engInfoDTO.infoDTO.engGeom,\r\n            taskId: this.taskDetail.taskId,\r\n            // \r\n            engId: this.engInfoDTO ? this.engInfoDTO.engId : undefined,\r\n            eventItemText: JSON.stringify(geom),\r\n            // eventItemText: this.engInfoDTO.infoDTO.engGeom,\r\n\r\n            lng: geom.coordinates[0],\r\n            lat: geom.coordinates[1],\r\n            reporterId: this.userInfo.id,\r\n            reporterName: this.userInfo.userFullname\r\n          }\r\n          insert(eventPayload).then(res => {\r\n            if (res.status) {\r\n              Toast({\r\n                message: \"上报事件成功\",\r\n                duration: 3000\r\n              });\r\n              this.$router.go(-1);\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    // 深拷贝\r\n    deepClone(data) {\r\n      return JSON.parse(JSON.stringify(data));\r\n    },\r\n    // 计算中心点\r\n    computeCenter(feature) {\r\n      let position;\r\n      if (feature.geometry.type === 'Polygon' || feature.geometry.type === 'MultiPolygon') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry;\r\n      } else if (feature.geometry.type === 'LineString') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry;\r\n      } else if (feature.geometry.type === 'Point') {\r\n        position = feature.geometry;\r\n      }\r\n      return position;\r\n    },\r\n    // 根据关键字查询\r\n    async getEngPropertyVal(guid) {\r\n      const params = {\r\n        value: guid\r\n      }\r\n      const res = await engPropertyValue(params);\r\n      if (res.status) {\r\n        this.engInfoDTO = res.data;\r\n      } else {\r\n        this.engInfoDTO = null;\r\n      }\r\n    },\r\n    getEngData: _.debounce(function() {\r\n      const params = {\r\n        inspBusinessType: this.taskDetail.inspBusinessType,\r\n        geometry: {\r\n          type: \"Point\",\r\n          coordinates: this.position\r\n        }\r\n      }\r\n      this.setLocationName();\r\n      this.getEngList(params);\r\n    }, 500),\r\n    filterEngList(keyword) {\r\n      if (keyword) {\r\n        this.filteredList = this.engList.filter(item => item.deviceid.search(keyword) != -1);\r\n      } else {\r\n        this.filteredList = this.engList;\r\n      }\r\n    },\r\n    // 返回radius为半径范围的工程对象数据\r\n    async getEngList(position, radius = 35) {\r\n      Toast.loading({\r\n        message: \"获取25m内设施数据...\"\r\n      })\r\n      let pipeType;\r\n      switch (position.inspBusinessType) {\r\n        case \"WATER_SUPPLY\":\r\n          pipeType = \"供水管线\";\r\n          break;\r\n        case \"RAI_WATER\":\r\n          pipeType = \"雨水管线\";\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          pipeType = \"污水管线\";\r\n          break;\r\n        case \"ORIGIN_WATER\":\r\n          pipeType = \"源水管线\";\r\n          break;\r\n        case \"RIVER_WATER\":\r\n          pipeType = \"排江管\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      const params = {\r\n        geomPoint: position.geometry,\r\n        pipeType: pipeType,\r\n        radius: radius,\r\n        type: '全部'\r\n      }\r\n      const res = await getAllPointOrLineGeomInsp(params);\r\n      // console.log(\"get all Point or Line geom==>\", res.data);\r\n      if (res && res.status) {\r\n        this.engList = res.data.map(item => {\r\n          return {\r\n            ...item,\r\n            text: item.deviceid + \" | \" + (item.pipetype || item.type),\r\n            value: item.deviceid\r\n          }\r\n        });\r\n        this.filteredList = this.engList;\r\n      }\r\n    },\r\n    chooseEng(value) {\r\n      const data = value?.detail?.data;\r\n      if (!data) return;\r\n      this.getEngPropertyVal(data.guid);\r\n      const geom = data.st_asgeojson || data.geom;\r\n      if (!geom) return;\r\n      const feature = {\r\n        id: data.id,\r\n        properties: {\r\n          ...data\r\n        },\r\n        geometry: JSON.parse(geom),\r\n        type: 'feature'\r\n      }\r\n      this.curFeature = feature;\r\n      mapObj.map.setLineGeoSource([feature], \"curInspLineSource\");\r\n    }\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler(to, from, next) {\r\n        if (from.path === \"/preview-image\") {\r\n          this.showVisible = true;\r\n        } else {\r\n          this.showVisible = false;\r\n        }\r\n      },\r\n    },\r\n  },\r\n  // 返回到列表页面\r\n  onBackPress(options) {\r\n    if (options.from === 'backbutton') {  \r\n      Dialog.confirm({  \r\n        title: '提示',  \r\n        message: '确定退出上报事件吗？',  \r\n      }).then((res) => {  \r\n          if (res.confirm) {  \r\n            mapObj.map.mapInstance && mapObj.map.mapInstance.destoryMap();\r\n            mapObj.map.mapInstance = null;\r\n            this.$router.push({\r\n              name: 'InspectionManage',\r\n              params: {\r\n                name: '执行',\r\n                taskId: this.taskDetail.taskId,\r\n                inspBusinessType: this.taskDetail.inspBusinessType,\r\n                reportEvent: true\r\n              }\r\n            })\r\n          }  \r\n        })\r\n      // 禁止默认返回  \r\n      return true  \r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    bus.$off(\"eventMarkerPosition\");\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.popup-container {\r\n  width: 100%;\r\n  .popup {\r\n    .head {\r\n      padding: 0.55rem 0.55rem;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      font-size: 1rem;\r\n      font-weight: 400;\r\n      color: #333333;\r\n      .on-confirm {\r\n        color: #2a83e6;\r\n      }\r\n    }\r\n  }\r\n\r\n  .scroll {\r\n    height: 33.34rem;\r\n    .event-form {\r\n      margin: 0.44rem;\r\n      .position {\r\n        width: 100%;\r\n        height: 4.44rem;\r\n      }\r\n    }\r\n  }\r\n  .submit-event {\r\n    width: 90%;\r\n    background-color: #fff;\r\n    z-index: 3;\r\n    left: 5%;\r\n    bottom: 0.3rem;\r\n    position: fixed;\r\n  }\r\n  .emergency-pull-bar {\r\n    .content {\r\n      background-color: #ffffff;\r\n      margin: 0.55rem 0.55rem;\r\n      .checkbox {\r\n        margin: 0.27rem 0.55rem;\r\n        height: 17.77rem;\r\n        overflow-y: scroll;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"mappings":"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"}]}