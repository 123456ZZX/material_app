{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\SmartSite\\MonitorManagement.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\SmartSite\\MonitorManagement.vue","mtime":1705912800070},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgTmF2QmFyIH0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInOwppbXBvcnQgeyBnZXRNb25pdG9yRGF0YSwgZ2V0TW9uaXRvclRva2VuLCBnZXRNb25pdG9yTG9jYXRpb24gfSBmcm9tICcuL2FwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBbTmF2QmFyLm5hbWVdOiBOYXZCYXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwb3J0YWxJZDogJzEyNzA2MzQwNTc4Nzc4NjQ0NTAnLAogICAgICAvL+aaguaXtuS9v+eUqOm7mOiupOeahAogICAgICB0aXRsZTogJ0FsbCcsCiAgICAgIG9wdGlvbnNMaXN0OiBbewogICAgICAgIGtleTogJ0FsbCcsCiAgICAgICAgdmFsdWU6ICflhajpg6gnCiAgICAgIH1dLAogICAgICBoZWlnaHQ6IDIzNywKICAgICAgd2lkdGg6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLSAzMCwKICAgICAgbW9uaXRvckxpc3Q6IFtdLAogICAgICBkYXRhTGlzdDogW10sCiAgICAgIHNyY18xOiAnaHR0cHM6Ly9vcGVuLnlzNy5jb20vZXpvcGVuL2g1L2lmcmFtZV9zZT8nLAogICAgICBzcmNfMjogJ3VybD1lem9wZW46Ly9vcGVuLnlzNy5jb20vJywKICAgICAgc3JjXzM6ICcnLAogICAgICAvL+iuvuWkh+WPtwogICAgICBzcmNfNDogJy8nLAogICAgICBzcmNfNTogJycsCiAgICAgIC8v6YCa6YGT5Y+3CiAgICAgIHNyY182OiAnLmhkLmxpdmUnLAogICAgICBzcmNfNzogJyZhdXRvcGxheT0xJmF1ZGlvPTAnLAogICAgICBzcmNfODogJyZhY2Nlc3NUb2tlbj0nLAogICAgICBzcmNfOTogJ2F0Ljc5Zmc3ZTR6M2lreWJrNzYwc21jbGQxNGNldGJlb25uLTM2MDdzMWh3dHotMXh1bmJzcC1iZXFtYnM5dnknLAogICAgICAvL2FjY2Vzc190b2tlbgogICAgICBtb25pdG9yOiB7fSwKICAgICAgem9vbTogMTcsCiAgICAgIGNlbnRlcjogW3BhcnNlRmxvYXQodGhpcy4kcm91dGUucXVlcnkubG9uZ2l0dWRlUG9zaXRpb24pLCBwYXJzZUZsb2F0KHRoaXMuJHJvdXRlLnF1ZXJ5LmxhdGl0dWRlUG9zaXRpb24pXQogICAgICAvLyBtYXJrZXJzOiBbXSwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRUb2tlbigpOwogICAgdGhpcy5nZXRNb25pdG9yTG9jYXRpb24oKTsKICB9LAogIHdhdGNoOiB7fSwKICBtZXRob2RzOiB7CiAgICBnZXRUb2tlbigpIHsKICAgICAgdGhpcy4kbG9hZGluZy5zaG93KCk7CiAgICAgIGdldE1vbml0b3JUb2tlbigpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgdGhpcy5zcmNfOSA9IHJlcy5kYXRhLmFjY2Vzc1Rva2VuOwogICAgICAgICAgdGhpcy5nZXRNb25pdG9yTGlzdCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYmFja2hvbWUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5oaXN0b3J5LmdvKC0xKTsKICAgIH0sCiAgICBnZXRNb25pdG9yTGlzdCgpIHsKICAgICAgZ2V0TW9uaXRvckRhdGEoewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogMTAwLAogICAgICAgIG9yZGVyOiAnY3JlYXRlX2RhdGUgZGVzYycsCiAgICAgICAgbGlrZTogJycsCiAgICAgICAgcG9ydGFsSWQ6IHRoaXMucG9ydGFsSWQsCiAgICAgICAgZW50aXR5TmFtZTogJ01vbml0b3JNYW5hZ2VtZW50JywKICAgICAgICBzZWFyY2hQYXJhbUxpc3Q6IFsnbW9uaXRvck5hbWUnLCAnbW9uaXRvckNvZGUnLCAndXNlckZ1bGxuYW1lJ10KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHJlcy5kYXRhLmxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIGl0ZW0udXJsID0gdGhpcy5nZXRVcmwoaXRlbSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5tb25pdG9yTGlzdCA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5Lm5hbWUpIHsKICAgICAgICAgIHRoaXMubW9uaXRvciA9IHRoaXMubW9uaXRvckxpc3QuZmlsdGVyKGRhdGEgPT4gZGF0YS5tb25pdG9yTmFtZSA9PSB0aGlzLiRyb3V0ZS5xdWVyeS5uYW1lKVswXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tb25pdG9yID0gdGhpcy5tb25pdG9yTGlzdFswXTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kYXRhTGlzdCA9IHRoaXMubW9uaXRvckxpc3Q7CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMuJGxvYWRpbmcuaGlkZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRVcmwoaXRlbSkgewogICAgICBjb25zdCBzcmNfMyA9IGl0ZW0uZXF1aXBtZW50TnVtOwogICAgICBjb25zdCBzcmNfNSA9IGl0ZW0uZXF1aXBtZW50Q29kZTsKICAgICAgLy8gY29uc3Qgc3JjXzkgPSBpdGVtLmFjY2Vzc190b2tlbjsKICAgICAgY29uc3Qgc3JjX2NhbWVyYSA9IHRoaXMuc3JjXzEgKyB0aGlzLnNyY18yICsgc3JjXzMgKyB0aGlzLnNyY180ICsgc3JjXzUgKyB0aGlzLnNyY182ICsgdGhpcy5zcmNfNyArIHRoaXMuc3JjXzggKyB0aGlzLnNyY185OwogICAgICByZXR1cm4gc3JjX2NhbWVyYTsKICAgIH0sCiAgICBnZXRNb25pdG9yTG9jYXRpb24oKSB7CiAgICAgIGdldE1vbml0b3JMb2NhdGlvbih0aGlzLnBvcnRhbElkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgIHJlcy5kYXRhLnZpZGVvRGF0YS5mb3JFYWNoKCgpID0+IHsKICAgICAgICAgICAgLy8gdGhpcy5tYXJrZXJzLnB1c2goewogICAgICAgICAgICAvLyAgIHBvc2l0aW9uOiBbZGF0YS5sb25naXR1ZGVQb3NpdGlvbiwgZGF0YS5sYXRpdHVkZVBvc2l0aW9uXSwKICAgICAgICAgICAgLy8gICBsYWJlbDogeyBjb250ZW50OiBkYXRhLm1vbml0b3JOYW1lLCBvZmZzZXQ6IFstMzAsIC0yNV0gfSwKICAgICAgICAgICAgLy8gICB2aWQ6IGRhdGEubW9uaXRvck5hbWUsCiAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["NavBar","getMonitorData","getMonitorToken","getMonitorLocation","components","name","data","portalId","title","optionsList","key","value","height","width","document","body","clientWidth","monitorList","dataList","src_1","src_2","src_3","src_4","src_5","src_6","src_7","src_8","src_9","monitor","zoom","center","parseFloat","$route","query","longitudePosition","latitudePosition","mounted","getToken","watch","methods","$loading","show","then","res","status","accessToken","getMonitorList","backhome","$router","history","go","page","size","order","like","entityName","searchParamList","list","forEach","item","url","getUrl","filter","monitorName","finally","hide","equipmentNum","equipmentCode","src_camera","videoData"],"sources":["src/views/SmartSite/MonitorManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"monitor-container\">\r\n    <fm-nav-bar\r\n      title=\"监控管理\"\r\n      background=\"#2377fc\"\r\n      left-text=\"\"\r\n      left-arrow\r\n      @click-left=\"$router.go(-1)\"\r\n    >\r\n    </fm-nav-bar>\r\n    <div class=\"monitor-box\" v-if=\"monitor\">\r\n      <div id=\"monitorItem\">\r\n        <iframe :id=\"monitor.id\" :src=\"monitor.url\" width=\"100%\" height=\"100%\" scrolling=\"no\">\r\n        </iframe>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { NavBar } from 'fawkes-mobile-lib'\r\nimport { getMonitorData, getMonitorToken, getMonitorLocation } from './api'\r\nexport default {\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n  },\r\n  data() {\r\n    return {\r\n      portalId: '1270634057877864450', //暂时使用默认的\r\n      title: 'All',\r\n      optionsList: [{ key: 'All', value: '全部' }],\r\n      height: 237,\r\n      width: document.body.clientWidth - 30,\r\n      monitorList: [],\r\n      dataList: [],\r\n      src_1: 'https://open.ys7.com/ezopen/h5/iframe_se?',\r\n      src_2: 'url=ezopen://open.ys7.com/',\r\n      src_3: '', //设备号\r\n      src_4: '/',\r\n      src_5: '', //通道号\r\n      src_6: '.hd.live',\r\n      src_7: '&autoplay=1&audio=0',\r\n      src_8: '&accessToken=',\r\n      src_9: 'at.79fg7e4z3ikybk760smcld14cetbeonn-3607s1hwtz-1xunbsp-beqmbs9vy', //access_token\r\n      monitor: {},\r\n      zoom: 17,\r\n      center: [\r\n        parseFloat(this.$route.query.longitudePosition),\r\n        parseFloat(this.$route.query.latitudePosition),\r\n      ],\r\n      // markers: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getToken()\r\n    this.getMonitorLocation()\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    getToken() {\r\n      this.$loading.show()\r\n      getMonitorToken().then((res) => {\r\n        if (res.status) {\r\n          this.src_9 = res.data.accessToken\r\n          this.getMonitorList()\r\n        }\r\n      })\r\n    },\r\n    backhome() {\r\n      this.$router.history.go(-1)\r\n    },\r\n    getMonitorList() {\r\n      getMonitorData({\r\n        page: 1,\r\n        size: 100,\r\n        order: 'create_date desc',\r\n        like: '',\r\n        portalId: this.portalId,\r\n        entityName: 'MonitorManagement',\r\n        searchParamList: ['monitorName', 'monitorCode', 'userFullname'],\r\n      })\r\n        .then((res) => {\r\n          res.data.list.forEach((item) => {\r\n            item.url = this.getUrl(item)\r\n          })\r\n\r\n          this.monitorList = res.data.list\r\n          if (this.$route.query.name) {\r\n            this.monitor = this.monitorList.filter(\r\n              (data) => data.monitorName == this.$route.query.name\r\n            )[0]\r\n          } else {\r\n            this.monitor = this.monitorList[0]\r\n          }\r\n\r\n          this.dataList = this.monitorList\r\n        })\r\n        .finally(() => {\r\n          this.$loading.hide()\r\n        })\r\n    },\r\n    getUrl(item) {\r\n      const src_3 = item.equipmentNum\r\n      const src_5 = item.equipmentCode\r\n      // const src_9 = item.access_token;\r\n      const src_camera =\r\n        this.src_1 +\r\n        this.src_2 +\r\n        src_3 +\r\n        this.src_4 +\r\n        src_5 +\r\n        this.src_6 +\r\n        this.src_7 +\r\n        this.src_8 +\r\n        this.src_9\r\n      return src_camera\r\n    },\r\n    getMonitorLocation() {\r\n      getMonitorLocation(this.portalId).then((res) => {\r\n        if (res.status) {\r\n          res.data.videoData.forEach(() => {\r\n            // this.markers.push({\r\n            //   position: [data.longitudePosition, data.latitudePosition],\r\n            //   label: { content: data.monitorName, offset: [-30, -25] },\r\n            //   vid: data.monitorName,\r\n            // });\r\n          })\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/ .fm-nav-bar__title {\r\n  color: #f9f9f9;\r\n  font-family: PingFangSC, PingFangSC-Medium;\r\n  font-weight: 600;\r\n}\r\n.background {\r\n  background-color: white;\r\n}\r\n.monitor-container {\r\n  background-color: #f5f6fa;\r\n  height: 100%;\r\n  font-family: PingFang SC Regular;\r\n  font-size: 14px;\r\n  overflow: hidden;\r\n}\r\n.monitor-title {\r\n  height: 36px;\r\n  top: 8px;\r\n  box-sizing: border-box;\r\n}\r\n.monitor-title /deep/ .vux-cell-value {\r\n  text-align: left;\r\n}\r\n.monitor-radio-slot {\r\n  text-align: center;\r\n  padding: 8px 0;\r\n  color: #888;\r\n}\r\n.monitor-content {\r\n  margin: 18px 15px;\r\n  border-radius: 1rem;\r\n}\r\n.monitor-content-img {\r\n  margin-right: 10px;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  height: 50%;\r\n}\r\n.monitor-content-title {\r\n  margin-left: 15px;\r\n  font-weight: 800;\r\n  font-size: 16px;\r\n}\r\n.monitor-content-title:before {\r\n  content: '';\r\n  display: block;\r\n  height: 1.4rem;\r\n  width: 4px;\r\n  position: absolute;\r\n  background: linear-gradient(rgba(160, 225, 255, 1), rgba(54, 192, 255, 1));\r\n  top: 7px;\r\n  border-radius: 2px;\r\n}\r\n.weui-cell {\r\n  padding: 0;\r\n}\r\n.mapbox {\r\n  position: relative;\r\n  height: 350px;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.monitor-box {\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n#monitorItem {\r\n  height: 50%;\r\n  overflow: hidden;\r\n}\r\n\r\n/deep/.fm-icon {\r\n  color: #fff !important;\r\n}\r\n</style>\r\n"],"mappings":"AAmBA,SAAAA,MAAA;AACA,SAAAC,cAAA,EAAAC,eAAA,EAAAC,kBAAA;AACA;EACAC,UAAA;IACA,CAAAJ,MAAA,CAAAK,IAAA,GAAAL;EACA;EACAM,KAAA;IACA;MACAC,QAAA;MAAA;MACAC,KAAA;MACAC,WAAA;QAAAC,GAAA;QAAAC,KAAA;MAAA;MACAC,MAAA;MACAC,KAAA,EAAAC,QAAA,CAAAC,IAAA,CAAAC,WAAA;MACAC,WAAA;MACAC,QAAA;MACAC,KAAA;MACAC,KAAA;MACAC,KAAA;MAAA;MACAC,KAAA;MACAC,KAAA;MAAA;MACAC,KAAA;MACAC,KAAA;MACAC,KAAA;MACAC,KAAA;MAAA;MACAC,OAAA;MACAC,IAAA;MACAC,MAAA,GACAC,UAAA,MAAAC,MAAA,CAAAC,KAAA,CAAAC,iBAAA,GACAH,UAAA,MAAAC,MAAA,CAAAC,KAAA,CAAAE,gBAAA;MAEA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA;IACA,KAAAlC,kBAAA;EACA;EACAmC,KAAA;EACAC,OAAA;IACAF,SAAA;MACA,KAAAG,QAAA,CAAAC,IAAA;MACAvC,eAAA,GAAAwC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAjB,KAAA,GAAAgB,GAAA,CAAArC,IAAA,CAAAuC,WAAA;UACA,KAAAC,cAAA;QACA;MACA;IACA;IACAC,SAAA;MACA,KAAAC,OAAA,CAAAC,OAAA,CAAAC,EAAA;IACA;IACAJ,eAAA;MACA7C,cAAA;QACAkD,IAAA;QACAC,IAAA;QACAC,KAAA;QACAC,IAAA;QACA/C,QAAA,OAAAA,QAAA;QACAgD,UAAA;QACAC,eAAA;MACA,GACAd,IAAA,CAAAC,GAAA;QACAA,GAAA,CAAArC,IAAA,CAAAmD,IAAA,CAAAC,OAAA,CAAAC,IAAA;UACAA,IAAA,CAAAC,GAAA,QAAAC,MAAA,CAAAF,IAAA;QACA;QAEA,KAAA1C,WAAA,GAAA0B,GAAA,CAAArC,IAAA,CAAAmD,IAAA;QACA,SAAAzB,MAAA,CAAAC,KAAA,CAAA5B,IAAA;UACA,KAAAuB,OAAA,QAAAX,WAAA,CAAA6C,MAAA,CACAxD,IAAA,IAAAA,IAAA,CAAAyD,WAAA,SAAA/B,MAAA,CAAAC,KAAA,CAAA5B,IACA;QACA;UACA,KAAAuB,OAAA,QAAAX,WAAA;QACA;QAEA,KAAAC,QAAA,QAAAD,WAAA;MACA,GACA+C,OAAA;QACA,KAAAxB,QAAA,CAAAyB,IAAA;MACA;IACA;IACAJ,OAAAF,IAAA;MACA,MAAAtC,KAAA,GAAAsC,IAAA,CAAAO,YAAA;MACA,MAAA3C,KAAA,GAAAoC,IAAA,CAAAQ,aAAA;MACA;MACA,MAAAC,UAAA,GACA,KAAAjD,KAAA,GACA,KAAAC,KAAA,GACAC,KAAA,GACA,KAAAC,KAAA,GACAC,KAAA,GACA,KAAAC,KAAA,GACA,KAAAC,KAAA,GACA,KAAAC,KAAA,GACA,KAAAC,KAAA;MACA,OAAAyC,UAAA;IACA;IACAjE,mBAAA;MACAA,kBAAA,MAAAI,QAAA,EAAAmC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACAD,GAAA,CAAArC,IAAA,CAAA+D,SAAA,CAAAX,OAAA;YACA;YACA;YACA;YACA;YACA;UAAA,CACA;QACA;MACA;IACA;EACA;AACA"}]}