{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\store\\Action\\actions.js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\store\\Action\\actions.js","mtime":1708928163348},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi9hY3Rpb25UeXBlcyc7CmltcG9ydCAqIGFzIG11dGF0aW9uVHlwZXMgZnJvbSAnLi4vTXV0YXRpb24vbXV0YXRpb25UeXBlcyc7CmltcG9ydCB7IGdldEVudW0gfSBmcm9tICdAL2FwaS9lbnVtJzsKaW1wb3J0IHsgbG9naW4gfSBmcm9tICdAL2FwaS9sb2dpbic7CmltcG9ydCBzdG9yYWdlIGZyb20gJ0AvdXRpbHMvc3RvcmFnZSc7CmltcG9ydCB7IGdldExhbmcgfSBmcm9tICdAL2FwaS9sYW5nJzsKaW1wb3J0IHsgZ2V0UGVybWlzc2lvbnMsIGdldFVzZXIsIGdldFBvcnRhbHMgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgUE9SVEFMX0lEIH0gZnJvbSAnQC9jb25maWcvYXBwL2RldmVsb3AnOwppbXBvcnQgeyBpc0pTT04gfSBmcm9tICdAL3V0aWxzL3V0aWwnOwppbXBvcnQgeyBUb2FzdCB9IGZyb20gJ2Zhd2tlcy1tb2JpbGUtbGliJzsKY29uc3QgYWN0aW9ucyA9IHsKICAvLyDnmbvlvZXns7vnu58s55m75b2V5ZCO5Yid5aeL5YyW562J55u45YWz5pON5L2c57uf5LiA5aSE55CGCiAgW3R5cGVzLkxPR0lOXSh7CiAgICBkaXNwYXRjaAogIH0sIHBvcnRhbCkgewogICAgZGlzcGF0Y2godHlwZXMuVVBEQVRFX1VTRVIsIHBvcnRhbCkudGhlbihyZXMgPT4gewogICAgICBpZiAocmVzLnN0YXR1cyAmJiByZXMuZGF0YSkgewogICAgICAgIC8vIGRpc3BhdGNoKHR5cGVzLklOSVRfV0VCU09DS0VUKQogICAgICB9CiAgICB9KTsKICB9LAogIC8v55So5oi355m75b2VCiAgW3R5cGVzLlVTRVJfTE9HSU5dKHsKICAgIGRpc3BhdGNoCiAgfSwgZGF0YSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgbG9naW4oZGF0YSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIC8v5Yqg6L2955So5oi35L+h5oGvCiAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgZGlzcGF0Y2godHlwZXMuTE9BRElOR19VU0VSX0RBVEEsIHJlcyk7CiAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlcyk7CiAgICAgICAgICB9CiAgICAgICAgICByZWplY3QoJycpOwogICAgICAgICAgLy8gc3RvcmFnZS5zZXQoJ3VzZXJuYW1lJywgcmVzLnVzZXJOYW1lKQogICAgICAgICAgLy8gc3RvcmFnZS5zZXQoJ3VzZXJGdWxsbmFtZScsIHJlcy51c2VyRnVsbG5hbWUpCiAgICAgICAgICAvLyBzdG9yYWdlLnNldCgnYWNjZXNzX3Rva2VuJywgcmVzLmFjY2Vzc190b2tlbikKICAgICAgICAgIC8vIC8vIHN0b3JhZ2Uuc2V0MTYoJ0Zhd2tlcy1BdXRoJywgcmVzLmFjY2Vzc190b2tlbikKICAgICAgICAgIC8vIHN0b3JhZ2Uuc2V0KCd1c2VySWQnLCByZXMuaWQpCiAgICAgICAgICAvLyBjb21taXQobXV0YXRpb25UeXBlcy5TRVRfVVNFUl9JTkZPLCByZXMpCiAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJlamVjdCgnJyk7CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIC8vIHJlamVjdChlKQogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy/liqDovb3nlKjmiLfkv6Hmga8KICBbdHlwZXMuTE9BRElOR19VU0VSX0RBVEFdKHsKICAgIGNvbW1pdCwKICAgIHJvb3RHZXR0ZXJzLAogICAgZGlzcGF0Y2gKICB9LCBkYXRhKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAvL+eZu+W9leaXtu+8jOS/neWtmHRva2VuCiAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgc3RvcmFnZS5zZXQoJ3VzZXJuYW1lJywgZGF0YS51c2VyTmFtZSk7CiAgICAgICAgc3RvcmFnZS5zZXQoJ3VzZXJGdWxsbmFtZScsIGRhdGEudXNlckZ1bGxuYW1lKTsKICAgICAgICBzdG9yYWdlLnNldCgndXNlcklkJywgZGF0YS5pZCk7CiAgICAgICAgc3RvcmFnZS5zZXQoJ3VzZXInLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgICAgZGF0YS5hY2Nlc3NfdG9rZW4gJiYgc3RvcmFnZS5zZXQoJ2FjY2Vzc190b2tlbicsIGRhdGEuYWNjZXNzX3Rva2VuKTsKICAgICAgfQogICAgICAvL+mdnueZu+W9lemhteWIt+aWsCzpnIDopoHliKTmlq10b2tlbgogICAgICBpZiAoc3RvcmFnZS5nZXQoJ2FjY2Vzc190b2tlbicpICYmICd1bmRlZmluZWQnICE9IHN0b3JhZ2UuZ2V0KCdhY2Nlc3NfdG9rZW4nKSkgewogICAgICAgIGxldCBwb3J0YWwgPSAnJzsKICAgICAgICAvL+WIpOaWreaYr+WQpuWkmumXqOaItwogICAgICAgIGlmIChyb290R2V0dGVycy5tdWx0aVBvcnRhbCkgewogICAgICAgICAgcG9ydGFsID0gYXdhaXQgZGlzcGF0Y2godHlwZXMuR0VUX1BPUlRBTFMpOwogICAgICAgICAgLy/ml6Dpl6jmiLfmnYPpmZAKICAgICAgICAgIGlmICghcG9ydGFsKSB7CiAgICAgICAgICAgIHN0b3JhZ2UucmVtb3ZlKCdhY2Nlc3NfdG9rZW4nKTsKICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8g5omn6KGM57O757uf55m75b2VCiAgICAgICAgZGlzcGF0Y2godHlwZXMuTE9HSU4sIHBvcnRhbCk7CiAgICAgICAgLy8gZGlzcGF0Y2godHlwZXMuR0VUX1NFTEZfQ0xJRU5UX0NPTkZJRykKICAgICAgICAvLyBkaXNwYXRjaCh0eXBlcy5HRVRfU0VMRl9JTlRFUkZBQ0VfQ09ORklHKQogICAgICAgIC8vIGF3YWl0IGRpc3BhdGNoKHR5cGVzLkdFVF9CVVRUT05TKQogICAgICB9CiAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICB9KS5jYXRjaChlID0+IHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CiAgfSwKICAvL+iOt+WPlumXqOaItwogIFt0eXBlcy5HRVRfUE9SVEFMU10oewogICAgc3RhdGUsCiAgICBjb21taXQsCiAgICBkaXNwYXRjaAogIH0pIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIGdldFBvcnRhbHMoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgbGV0IHBvcnRhbCA9ICcnOwogICAgICAgIGlmIChyZXMuZGF0YSBpbnN0YW5jZW9mIEFycmF5ICYmIHJlcy5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGxldCBwb3J0YWxzID0gcmVzLmRhdGEuc29ydCgoZiwgYikgPT4gewogICAgICAgICAgICByZXR1cm4gZi50eXBlIC0gYi50eXBlOwogICAgICAgICAgfSk7CiAgICAgICAgICBjb21taXQobXV0YXRpb25UeXBlcy5TRVRfUE9SVEFMUywgcG9ydGFscyk7CgogICAgICAgICAgLy8gaWYgKGlzSlNPTihgJHtzdG9yYWdlLmdldCgncG9ydGFsJyl9YCkpIHsKICAgICAgICAgIC8vICAgcG9ydGFsID0gcG9ydGFscy5maW5kKChwKSA9PiB7CiAgICAgICAgICAvLyAgICAgcmV0dXJuIEpTT04ucGFyc2UoYCR7c3RvcmFnZS5nZXQoJ3BvcnRhbCcpfWApLmlkID09PSBwLmlkCiAgICAgICAgICAvLyAgIH0pCiAgICAgICAgICAvLyB9CgogICAgICAgICAgIXBvcnRhbCAmJiAocG9ydGFsID0gcG9ydGFsc1swXSk7CiAgICAgICAgICBpZiAocG9ydGFsKSB7CiAgICAgICAgICAgIGRpc3BhdGNoKHR5cGVzLkNIQU5HRV9QT1JUQUwsIHBvcnRhbCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBUb2FzdC53YXJuaW5nKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn5peg6Zeo5oi35p2D6ZmQJywKICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoJy9sb2dpbicpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBUb2FzdC53YXJuaW5nKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+aXoOmXqOaIt+adg+mZkCcsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHJvdXRlci5yZXBsYWNlKCcvbG9naW4nKTsKICAgICAgICB9CiAgICAgICAgcmVzb2x2ZShwb3J0YWwuaWQgfHwgJycpOwogICAgICB9KS5jYXRjaChlcnIgPT4gcmVzb2x2ZSgnJykpOwogICAgfSk7CiAgfSwKICAvL+iOt+WPluaemuS4vgogIFt0eXBlcy5HRVRfRU5VTV0oewogICAgY29tbWl0CiAgfSwgY29kZSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgZ2V0RW51bShjb2RlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgIGNvbW1pdChtdXRhdGlvblR5cGVzLlNFVF9FTlVNLCByZXMuZGF0YSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7CiAgICB9KTsKICB9LAogIC8v6I635Y+W6K+t6KiA6LWE5rqQCiAgW3R5cGVzLkdFVF9MQU5HXSh7CiAgICBjb21taXQKICB9LCBsYW5nX2NvbmZpZykgewogICAgZ2V0TGFuZyhsYW5nX2NvbmZpZykudGhlbihyZXMgPT4gewogICAgICBpZiAocmVzLnN0YXR1cyAmJiByZXMuZGF0YSkgewogICAgICAgIGNvbW1pdChtdXRhdGlvblR5cGVzLlNFVF9PTkxJTkVfTEFORywgewogICAgICAgICAgLi4ucmVzLmRhdGEKICAgICAgICB9KTsKICAgICAgfQogICAgfSkuY2F0Y2goKCkgPT4ge30pOwogIH0sCiAgW3R5cGVzLkdFVF9QRVJNSVNTSU9OU10oewogICAgc3RhdGUsCiAgICBjb21taXQKICB9LCBtZW51SWQpIHsKICAgIC8v6I635Y+W5oyJ6ZKu5p2D6ZmQCiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBnZXRQZXJtaXNzaW9ucyhtZW51SWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgY29tbWl0KG11dGF0aW9uVHlwZXMuU0VUX1BFUk1JU1NJT04sIHsKICAgICAgICAgICAga2V5OiBtZW51SWQsCiAgICAgICAgICAgIHZhbHVlOiByZXMuZGF0YQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy/pl6jmiLfliIfmjaIKICBbdHlwZXMuQ0hBTkdFX1BPUlRBTF0oewogICAgY29tbWl0CiAgfSwgcG9ydGFsKSB7CiAgICBjb21taXQobXV0YXRpb25UeXBlcy5DTEVBTl9WSUVXUyk7CiAgICAvLyBjb21taXQobXV0YXRpb25UeXBlcy5DTEVBTl9ST1VURSkKICAgIC8vIGNvbW1pdChtdXRhdGlvblR5cGVzLkNMRUFOX1BFUk1JU1NJT04pCiAgICAvLyBjb21taXQobXV0YXRpb25UeXBlcy5DTEVBTl9QRVJNSVNTSU9OX1FVRVVFKQogICAgY29tbWl0KG11dGF0aW9uVHlwZXMuVVBEQVRFX1BPUlRBTCwgcG9ydGFsKTsKICB9LAogIC8v5qC55o2u6Zeo5oi36I635Y+W55So5oi35L+h5oGvCiAgW3R5cGVzLlVQREFURV9VU0VSXSh7CiAgICBjb21taXQKICB9LCBwb3J0YWxJZCA9IFBPUlRBTF9JRCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgZ2V0VXNlcih7CiAgICAgICAgdXNlck5hbWU6IGAke3N0b3JhZ2UuZ2V0KCd1c2VybmFtZScpfWAsCiAgICAgICAgcG9ydGFsSWQKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzICYmIHJlcy5kYXRhKSB7CiAgICAgICAgICBjb21taXQobXV0YXRpb25UeXBlcy5TRVRfVVNFUl9JTkZPLCByZXMuZGF0YSk7CiAgICAgICAgfQogICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgfSkuY2F0Y2goZSA9PiByZXNvbHZlKGUpKTsKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgYWN0aW9uczs="},{"version":3,"names":["types","mutationTypes","getEnum","login","storage","getLang","getPermissions","getUser","getPortals","PORTAL_ID","isJSON","Toast","actions","LOGIN","dispatch","portal","UPDATE_USER","then","res","status","data","USER_LOGIN","Promise","resolve","reject","result","LOADING_USER_DATA","catch","e","commit","rootGetters","set","userName","userFullname","id","JSON","stringify","access_token","get","multiPortal","GET_PORTALS","remove","state","Array","length","portals","sort","f","b","type","SET_PORTALS","CHANGE_PORTAL","warning","message","duration","router","replace","err","GET_ENUM","code","SET_ENUM","GET_LANG","lang_config","SET_ONLINE_LANG","GET_PERMISSIONS","menuId","SET_PERMISSION","key","value","CLEAN_VIEWS","UPDATE_PORTAL","portalId","SET_USER_INFO"],"sources":["E:/ty_project/xasw-yy/revenue/xasw-mobile/src/store/Action/actions.js"],"sourcesContent":["import * as types from './actionTypes'\r\nimport * as mutationTypes from '../Mutation/mutationTypes'\r\nimport { getEnum } from '@/api/enum'\r\nimport { login } from '@/api/login'\r\nimport storage from '@/utils/storage'\r\nimport { getLang } from '@/api/lang'\r\nimport { getPermissions, getUser, getPortals } from '@/api/user'\r\nimport { PORTAL_ID } from '@/config/app/develop'\r\nimport { isJSON } from '@/utils/util'\r\nimport { Toast } from 'fawkes-mobile-lib'\r\nconst actions = {\r\n  // 登录系统,登录后初始化等相关操作统一处理\r\n  [types.LOGIN]({ dispatch }, portal) {\r\n    dispatch(types.UPDATE_USER, portal).then(res => {\r\n      if (res.status && res.data) {\r\n        // dispatch(types.INIT_WEBSOCKET)\r\n      }\r\n    })\r\n  },\r\n  //用户登录\r\n  [types.USER_LOGIN]({ dispatch }, data) {\r\n    return new Promise((resolve, reject) => {\r\n      login(data)\r\n        .then(async (res) => {\r\n          if (res) {\r\n            //加载用户信息\r\n            let result = await dispatch(types.LOADING_USER_DATA, res)\r\n            if (result) {\r\n              return resolve(res)\r\n            }\r\n            reject('')\r\n            // storage.set('username', res.userName)\r\n            // storage.set('userFullname', res.userFullname)\r\n            // storage.set('access_token', res.access_token)\r\n            // // storage.set16('Fawkes-Auth', res.access_token)\r\n            // storage.set('userId', res.id)\r\n            // commit(mutationTypes.SET_USER_INFO, res)\r\n            if (res) {\r\n              return resolve(res)\r\n            }\r\n          }\r\n          reject('')\r\n        })\r\n        .catch((e) => {\r\n          // reject(e)\r\n        })\r\n    })\r\n  },\r\n  //加载用户信息\r\n  [types.LOADING_USER_DATA]({ commit, rootGetters, dispatch }, data) {\r\n    return new Promise(async (resolve, reject) => {\r\n      //登录时，保存token\r\n      if (data) {\r\n        storage.set('username', data.userName)\r\n        storage.set('userFullname', data.userFullname)\r\n        storage.set('userId', data.id)\r\n        storage.set('user', JSON.stringify(data))\r\n        data.access_token && storage.set('access_token', data.access_token)\r\n      }\r\n      //非登录页刷新,需要判断token\r\n      if (\r\n        storage.get('access_token') &&\r\n        'undefined' != storage.get('access_token')\r\n      ) {\r\n        let portal = ''\r\n        //判断是否多门户\r\n        if (rootGetters.multiPortal) {\r\n          portal = await dispatch(types.GET_PORTALS)\r\n          //无门户权限\r\n          if (!portal) {\r\n            storage.remove('access_token')\r\n            resolve(false)\r\n            return false\r\n          }\r\n        }\r\n        // 执行系统登录\r\n        dispatch(types.LOGIN, portal)\r\n        // dispatch(types.GET_SELF_CLIENT_CONFIG)\r\n        // dispatch(types.GET_SELF_INTERFACE_CONFIG)\r\n        // await dispatch(types.GET_BUTTONS)\r\n      }\r\n      resolve(true)\r\n    }).catch((e) => {\r\n      return false\r\n    })\r\n  },\r\n\r\n  //获取门户\r\n  [types.GET_PORTALS]({ state, commit, dispatch }) {\r\n    return new Promise((resolve, reject) => {\r\n      getPortals()\r\n        .then((res) => {\r\n          let portal = ''\r\n          if (res.data instanceof Array && res.data.length > 0) {\r\n            let portals = res.data.sort((f, b) => {\r\n              return f.type - b.type\r\n            })\r\n            commit(mutationTypes.SET_PORTALS, portals)\r\n\r\n            // if (isJSON(`${storage.get('portal')}`)) {\r\n            //   portal = portals.find((p) => {\r\n            //     return JSON.parse(`${storage.get('portal')}`).id === p.id\r\n            //   })\r\n            // }\r\n\r\n            !portal && (portal = portals[0])\r\n            if (portal) {\r\n              dispatch(types.CHANGE_PORTAL, portal)\r\n            } else {\r\n              Toast.warning({\r\n                message: '无门户权限',\r\n                duration: 1500\r\n              })\r\n              router.replace('/login')\r\n            }\r\n\r\n          } else {\r\n            Toast.warning({\r\n              message: '无门户权限',\r\n              duration: 1500\r\n            })\r\n            router.replace('/login')\r\n          }\r\n          resolve(portal.id || '')\r\n        })\r\n        .catch((err) => resolve(''))\r\n    })\r\n  },\r\n  //获取枚举\r\n  [types.GET_ENUM]({ commit }, code) {\r\n    return new Promise((resolve, reject) => {\r\n      getEnum(code)\r\n        .then((res) => {\r\n          if (res.status && res.data) {\r\n            commit(mutationTypes.SET_ENUM, res.data)\r\n          }\r\n        })\r\n        .catch(() => {})\r\n    })\r\n  },\r\n\r\n  //获取语言资源\r\n  [types.GET_LANG]({ commit }, lang_config) {\r\n    getLang(lang_config).then(res => {\r\n      if (res.status && res.data) {\r\n        commit(mutationTypes.SET_ONLINE_LANG, { ...res.data })\r\n      }\r\n    }).catch(() => { })\r\n  },\r\n\r\n  [types.GET_PERMISSIONS]({ state, commit }, menuId) {\r\n    //获取按钮权限\r\n    return new Promise((resolve, reject) => {\r\n      getPermissions(menuId).then(res => {\r\n        if (res.status) {\r\n          commit(mutationTypes.SET_PERMISSION, { key: menuId, value: res.data })\r\n        }\r\n        resolve(true)\r\n      }).catch(() => {\r\n        resolve(true)\r\n      })\r\n    })\r\n  },\r\n\r\n  //门户切换\r\n  [types.CHANGE_PORTAL]({ commit }, portal) {\r\n    commit(mutationTypes.CLEAN_VIEWS)\r\n    // commit(mutationTypes.CLEAN_ROUTE)\r\n    // commit(mutationTypes.CLEAN_PERMISSION)\r\n    // commit(mutationTypes.CLEAN_PERMISSION_QUEUE)\r\n    commit(mutationTypes.UPDATE_PORTAL, portal)\r\n  },\r\n\r\n  //根据门户获取用户信息\r\n  [types.UPDATE_USER]({ commit }, portalId = PORTAL_ID) {\r\n    return new Promise((resolve, reject) => {\r\n      getUser({ userName: `${storage.get('username')}`, portalId }).then(res => {\r\n        if (res.status && res.data) {\r\n          commit(mutationTypes.SET_USER_INFO, res.data)\r\n        }\r\n        resolve(res)\r\n      }).catch(e => resolve(e))\r\n    })\r\n  }\r\n}\r\n\r\nexport default actions\r\n"],"mappings":"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"}]}