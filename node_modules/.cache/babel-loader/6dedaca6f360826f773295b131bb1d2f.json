{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\FormCenter\\components\\FlowEntrust\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\FormCenter\\components\\FlowEntrust\\index.vue","mtime":1705912800022},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IENVUlJFTlRfUk9XIH0gZnJvbSAnQC9zdG9yZS9TdGF0ZS9zdGF0ZVR5cGVzJzsKaW1wb3J0IHNlbGVjdFVzZXIgZnJvbSAnQC9jb21wb25lbnRzL3NlbGVjdC11c2VyJzsKaW1wb3J0IHsgZG9UcnVzdCB9IGZyb20gJy4vYXBpJzsKaW1wb3J0IHsgRmllbGQsIENlbGwsIENlbGxHcm91cCwgVG9hc3QgfSBmcm9tICdmYXdrZXMtbW9iaWxlLWxpYic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBzZWxlY3RVc2VyLAogICAgW0ZpZWxkLm5hbWVdOiBGaWVsZCwKICAgIFtDZWxsLm5hbWVdOiBDZWxsLAogICAgW0NlbGxHcm91cC5uYW1lXTogQ2VsbEdyb3VwLAogICAgW1RvYXN0Lm5hbWVdOiBUb2FzdAogIH0sCiAgcHJvcHM6IHsKICAgIHVybEFuZEVudGl0eTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7fQogICAgfSwKICAgIGZvcm1EYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHt9CiAgICB9LAogICAgZGV0YWlsUGFyYW06IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgYmVmb3JlU3VibWl0OiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgZm9ybU5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5ld05hbWU6ICcnLAogICAgICAvLyDlp5TmiZjkuroKICAgICAgdXNlcklEOiAnJywKICAgICAgLy/lp5TmiZjkurrnlKjmiLflkI0KICAgICAgcmVhc29uOiAnJyAvLyDlp5TmiZjljp/lm6AKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcm93KCkgewogICAgICAvLyDpobXpnaLkuK3kvb/nlKhyb3fmnaXmjIfku6PlvZPliY3orrDlvZUKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlW0NVUlJFTlRfUk9XXTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICBlbnRydXN0KCkgewogICAgICAvLyDpgInkurrov4fmnaXnmoTlkZjlt6Xlj7fvvIjkuZ/mmK/igJzmlrDmiafooYzkurrvvJrnmoTlkZjlt6Xlj7fvvIkKICAgICAgLy8gbGV0IHVzZXJJRCA9IHRoaXMuJHJlZnMuZXhlY3V0ZUxlYWRlci5nZXRWYWx1ZXMoJ3VzZXJOYW1lJykKICAgICAgLy8gbGV0IHVzZXJJRCA9ICJ3ZWlfanQiOwogICAgICAvLyDljp/miafooYzkurrnmoTlkZjlt6Xlj7fkuZ/mmK/nmbvpmYbkurrnmoTlkZjlt6Xlj7cKICAgICAgbGV0IHVzZXIgPSB0aGlzLnJvdy50YXNrQXNpZ25lZTsKICAgICAgaWYgKHRoaXMudXNlcklEID09ICcnKSB7CiAgICAgICAgLy8g5pi+56S65paH5a2XCiAgICAgICAgVG9hc3QoJ+ivt+mAieaLqeaWsOaJp+ihjOS6uicsICdtaWRkbGUnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHVzZXIgPT0gdGhpcy51c2VySUQpIHsKICAgICAgICBUb2FzdCgn5LiN6IO95aeU5omY57uZ6Ieq5bex77yBJywgJ21pZGRsZScpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMucmVhc29uKSB7CiAgICAgICAgVG9hc3QoJ+ivt+i+k+WFpeWnlOaJmOWOn+WboCcsICdtaWRkbGUnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5kb1RydXN0KHRoaXMudXNlcklEKTsKICAgIH0sCiAgICAvLyDlp5TmiZgKICAgIGRvVHJ1c3QodXNlcklEKSB7CiAgICAgIGRvVHJ1c3QoewogICAgICAgIHRhc2tJZDogdGhpcy5yb3cudGFza0lkLAogICAgICAgIGNvbW1lbnQ6IHRoaXMucmVhc29uLAogICAgICAgIHVzZXJOYW1lOiB1c2VySUQKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgICB0aGlzLiR0b2FzdCgn5o+Q5Lqk5oiQ5YqfJywgJ21pZGRsZScpOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHRvYXN0LmNsZWFyKCk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdG9kbz9yZWZyZXNoPXRydWUnKTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiR0b2FzdChyZXMuZGF0YS5tZXNzYWdlLCAnbWlkZGxlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["CURRENT_ROW","selectUser","doTrust","Field","Cell","CellGroup","Toast","components","name","props","urlAndEntity","type","Object","default","formData","detailParam","Array","beforeSubmit","Function","formName","String","data","newName","userID","reason","computed","row","$store","state","mounted","methods","entrust","user","taskAsignee","taskId","comment","userName","then","res","status","$toast","setTimeout","clear","$router","push","message"],"sources":["src/views/FormCenter/components/FlowEntrust/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"approve-textarea\">\r\n    <fm-cell-group label-width=\"100px\" :gutter=\"0\">\r\n      <fm-cell title=\"当前环节\" value-align=\"right\" class=\"approve-textarea__cell\">\r\n        <div class=\"black\">{{ row.taskName }}</div>\r\n      </fm-cell>\r\n      <fm-cell title=\"原执行人\" value-align=\"right\" class=\"approve-textarea__cell\">\r\n        <div class=\"black\">{{ row.taskAsigneeName }}</div>\r\n      </fm-cell>\r\n      <select-user\r\n        class=\"new-name\"\r\n        :userFullname.sync=\"newName\"\r\n        :userName.sync=\"userID\"\r\n        title=\"新执行人\"\r\n        :multiple=\"false\"\r\n        :required=\"true\"\r\n        ref=\"executeLeader\"\r\n      ></select-user>\r\n      <div class=\"approve-title\"><span class=\"label-before\"></span>委托原因</div>\r\n      <fm-field\r\n        class=\"approve-textarea-entrust\"\r\n        type=\"textarea\"\r\n        placeholder=\"请输入委托原因\"\r\n        show-word-limit\r\n        :maxlength=\"50\"\r\n        v-model=\"reason\"\r\n      ></fm-field>\r\n      <div class=\"btn-area-entrust\" @click=\"entrust\">\r\n        <div class=\"entrust-btn\">确认委托</div>\r\n      </div>\r\n    </fm-cell-group>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { CURRENT_ROW } from '@/store/State/stateTypes'\r\nimport selectUser from '@/components/select-user'\r\nimport { doTrust } from './api'\r\nimport { Field, Cell, CellGroup, Toast } from 'fawkes-mobile-lib'\r\nexport default {\r\n  components: {\r\n    selectUser,\r\n    [Field.name]: Field,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [Toast.name]: Toast,\r\n  },\r\n  props: {\r\n    urlAndEntity: {\r\n      type: Object,\r\n      default() {},\r\n    },\r\n    formData: {\r\n      type: Object,\r\n      default() {},\r\n    },\r\n    detailParam: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      },\r\n    },\r\n    beforeSubmit: {\r\n      type: Function,\r\n      default: null,\r\n    },\r\n    formName: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      newName: '', // 委托人\r\n      userID: '', //委托人用户名\r\n      reason: '', // 委托原因\r\n    }\r\n  },\r\n  computed: {\r\n    row() {\r\n      // 页面中使用row来指代当前记录\r\n      return this.$store.state[CURRENT_ROW]\r\n    },\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    entrust() {\r\n      // 选人过来的员工号（也是“新执行人：的员工号）\r\n      // let userID = this.$refs.executeLeader.getValues('userName')\r\n      // let userID = \"wei_jt\";\r\n      // 原执行人的员工号也是登陆人的员工号\r\n      let user = this.row.taskAsignee\r\n      if (this.userID == '') {\r\n        // 显示文字\r\n        Toast('请选择新执行人', 'middle')\r\n        return false\r\n      }\r\n      if (user == this.userID) {\r\n        Toast('不能委托给自己！', 'middle')\r\n        return\r\n      }\r\n\r\n      if (!this.reason) {\r\n        Toast('请输入委托原因', 'middle')\r\n        return false\r\n      }\r\n      this.doTrust(this.userID)\r\n    },\r\n    // 委托\r\n    doTrust(userID) {\r\n      doTrust({\r\n        taskId: this.row.taskId,\r\n        comment: this.reason,\r\n        userName: userID,\r\n      }).then((res) => {\r\n        if (res.status) {\r\n          this.$toast('提交成功', 'middle')\r\n          setTimeout(() => {\r\n            this.$toast.clear()\r\n            this.$router.push('/todo?refresh=true')\r\n          }, 1000)\r\n        } else {\r\n          this.$toast(res.data.message, 'middle')\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.approve-textarea {\r\n  // margin-top: 4%;\r\n  &__cell {\r\n    padding: 30px 12px;\r\n    line-height: 40px;\r\n  }\r\n\r\n  // /deep/ .fm-cell__title {\r\n  //   margin-left: 0px;\r\n  // }\r\n\r\n  /deep/ .fm-cell--required::before {\r\n    left: -2px !important;\r\n    top: 28px;\r\n  }\r\n\r\n  /deep/ .fm-field__word-limit {\r\n    margin-top: 0px;\r\n  }\r\n}\r\n\r\n// 覆盖选人组件原样式\r\n.new-name /deep/ .fm-cell--clickable.fm-cell--required {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.black {\r\n  font-size: 28px;\r\n  font-family: PingFangSC-Regular, PingFang SC;\r\n  font-weight: 400;\r\n  color: #888;\r\n  word-break: break-all;\r\n}\r\n\r\n.approve-title {\r\n  font-size: 32px;\r\n  font-family: PingFangSC-Regular, PingFang SC;\r\n  font-weight: 400;\r\n  color: rgba(75, 75, 75, 1);\r\n  line-height: 60px;\r\n}\r\n\r\n.label-before {\r\n  width: 8px;\r\n  height: 22px;\r\n  background: #4a8dff;\r\n  margin-right: 7px;\r\n  display: inline-block;\r\n}\r\n\r\n.approve-textarea-entrust /deep/ .fm-cell__value {\r\n  border: 1px solid #bbbbbb;\r\n  opacity: 0.5;\r\n  padding: 20px;\r\n  max-height: 400px;\r\n}\r\n\r\n/deep/ .fm-field--min-height .fm-field__control {\r\n  min-height: 360px;\r\n}\r\n.btn-area-entrust {\r\n  position: relative;\r\n  width: 100%;\r\n  margin-top: 60px;\r\n}\r\n\r\n.entrust-btn {\r\n  text-align: center;\r\n  font-size: 32px;\r\n  font-family: PingFangSC-Medium, PingFang SC;\r\n  font-weight: 500;\r\n  color: #ffffff;\r\n  background-color: #4d86ff;\r\n  border-radius: 2px;\r\n  height: 90px;\r\n  line-height: 90px;\r\n  margin: 0 41px;\r\n}\r\n</style>\r\n"],"mappings":";AAkCA,SAAAA,WAAA;AACA,OAAAC,UAAA;AACA,SAAAC,OAAA;AACA,SAAAC,KAAA,EAAAC,IAAA,EAAAC,SAAA,EAAAC,KAAA;AACA;EACAC,UAAA;IACAN,UAAA;IACA,CAAAE,KAAA,CAAAK,IAAA,GAAAL,KAAA;IACA,CAAAC,IAAA,CAAAI,IAAA,GAAAJ,IAAA;IACA,CAAAC,SAAA,CAAAG,IAAA,GAAAH,SAAA;IACA,CAAAC,KAAA,CAAAE,IAAA,GAAAF;EACA;EACAG,KAAA;IACAC,YAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,QAAA;MACAH,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAE,WAAA;MACAJ,IAAA,EAAAK,KAAA;MACAH,QAAA;QACA;MACA;IACA;IACAI,YAAA;MACAN,IAAA,EAAAO,QAAA;MACAL,OAAA;IACA;IACAM,QAAA;MACAR,IAAA,EAAAS,MAAA;MACAP,QAAA;QACA;MACA;IACA;EACA;EACAQ,KAAA;IACA;MACAC,OAAA;MAAA;MACAC,MAAA;MAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACAC,IAAA;MACA;MACA,YAAAC,MAAA,CAAAC,KAAA,CAAA5B,WAAA;IACA;EACA;EACA6B,QAAA;EACAC,OAAA;IACAC,QAAA;MACA;MACA;MACA;MACA;MACA,IAAAC,IAAA,QAAAN,GAAA,CAAAO,WAAA;MACA,SAAAV,MAAA;QACA;QACAjB,KAAA;QACA;MACA;MACA,IAAA0B,IAAA,SAAAT,MAAA;QACAjB,KAAA;QACA;MACA;MAEA,UAAAkB,MAAA;QACAlB,KAAA;QACA;MACA;MACA,KAAAJ,OAAA,MAAAqB,MAAA;IACA;IACA;IACArB,QAAAqB,MAAA;MACArB,OAAA;QACAgC,MAAA,OAAAR,GAAA,CAAAQ,MAAA;QACAC,OAAA,OAAAX,MAAA;QACAY,QAAA,EAAAb;MACA,GAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAAC,MAAA;UACAC,UAAA;YACA,KAAAD,MAAA,CAAAE,KAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAJ,MAAA,CAAAF,GAAA,CAAAjB,IAAA,CAAAwB,OAAA;QACA;MACA;IACA;EACA;AACA"}]}