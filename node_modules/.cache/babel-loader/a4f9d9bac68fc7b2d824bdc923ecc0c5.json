{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\components\\qrcode\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\components\\qrcode\\index.vue","mtime":1705912799957},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFFSQ29kZUltcGwgZnJvbSAicXIuanMvbGliL1FSQ29kZSI7CmltcG9ydCBFcnJvckNvcnJlY3RMZXZlbCBmcm9tICJxci5qcy9saWIvRXJyb3JDb3JyZWN0TGV2ZWwiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlFSQ29kZSIsCiAgcHJvcHM6IHsKICAgIHZhbHVlOiBTdHJpbmcsCiAgICBzaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMTYwCiAgICB9LAogICAgbGV2ZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiTCIKICAgIH0sCiAgICBiZ0NvbG9yOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiNGRkZGRkYiCiAgICB9LAogICAgZmdDb2xvcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIjMDAwMDAwIgogICAgfSwKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiaW1nIgogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy5yZW5kZXIoKTsKICAgIH0pOwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGltZ0RhdGE6ICIiCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKCkgewogICAgICB0aGlzLnJlbmRlcigpOwogICAgfSwKICAgIHNpemUoKSB7CiAgICAgIHRoaXMucmVuZGVyKCk7CiAgICB9LAogICAgbGV2ZWwoKSB7CiAgICAgIHRoaXMucmVuZGVyKCk7CiAgICB9LAogICAgYmdDb2xvcigpIHsKICAgICAgdGhpcy5yZW5kZXIoKTsKICAgIH0sCiAgICBmZ0NvbG9yKCkgewogICAgICB0aGlzLnJlbmRlcigpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcmVuZGVyKCkgewogICAgICBpZiAodHlwZW9mIHRoaXMudmFsdWUgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHFyY29kZSA9IG5ldyBRUkNvZGVJbXBsKC0xLCBFcnJvckNvcnJlY3RMZXZlbFt0aGlzLmxldmVsXSk7CiAgICAgIHFyY29kZS5hZGREYXRhKHV0ZjE2dG84KHRoaXMudmFsdWUpKTsKICAgICAgcXJjb2RlLm1ha2UoKTsKICAgICAgY29uc3QgY2FudmFzID0gdGhpcy4kcmVmcy5jYW52YXM7CiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICBjb25zdCBjZWxscyA9IHFyY29kZS5tb2R1bGVzOwogICAgICBjb25zdCB0aWxlVyA9IHRoaXMuc2l6ZSAvIGNlbGxzLmxlbmd0aDsKICAgICAgY29uc3QgdGlsZUggPSB0aGlzLnNpemUgLyBjZWxscy5sZW5ndGg7CiAgICAgIGNvbnN0IHNjYWxlID0gKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEpIC8gZ2V0QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyhjdHgpOwogICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLndpZHRoID0gdGhpcy5zaXplICogc2NhbGU7CiAgICAgIGN0eC5zY2FsZShzY2FsZSwgc2NhbGUpOwogICAgICBjZWxscy5mb3JFYWNoKChyb3csIHJkeCkgPT4gewogICAgICAgIHJvdy5mb3JFYWNoKChjZWxsLCBjZHgpID0+IHsKICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjZWxsID8gdGhpcy5mZ0NvbG9yIDogdGhpcy5iZ0NvbG9yOwogICAgICAgICAgY29uc3QgdyA9IE1hdGguY2VpbCgoY2R4ICsgMSkgKiB0aWxlVykgLSBNYXRoLmZsb29yKGNkeCAqIHRpbGVXKTsKICAgICAgICAgIGNvbnN0IGggPSBNYXRoLmNlaWwoKHJkeCArIDEpICogdGlsZUgpIC0gTWF0aC5mbG9vcihyZHggKiB0aWxlSCk7CiAgICAgICAgICBjdHguZmlsbFJlY3QoTWF0aC5yb3VuZChjZHggKiB0aWxlVyksIE1hdGgucm91bmQocmR4ICogdGlsZUgpLCB3LCBoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICJpbWciKSB7CiAgICAgICAgdGhpcy5pbWdEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIik7CiAgICAgIH0KICAgIH0KICB9Cn07CmZ1bmN0aW9uIGdldEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8oY3R4KSB7CiAgcmV0dXJuIGN0eC53ZWJraXRCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGN0eC5tb3pCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGN0eC5tc0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwgY3R4Lm9CYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGN0eC5iYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IDE7Cn0KZnVuY3Rpb24gdXRmMTZ0bzgoc3RyKSB7CiAgbGV0IG91dCwgaSwgbGVuLCBjOwogIG91dCA9ICIiOwogIGxlbiA9IHN0ci5sZW5ndGg7CiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7CiAgICBpZiAoYyA+PSAweDAwMDEgJiYgYyA8PSAweDAwN2YpIHsKICAgICAgb3V0ICs9IHN0ci5jaGFyQXQoaSk7CiAgICB9IGVsc2UgaWYgKGMgPiAweDA3ZmYpIHsKICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhlMCB8IGMgPj4gMTIgJiAweDBmKTsKICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8IGMgPj4gNiAmIDB4M2YpOwogICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweDgwIHwgYyA+PiAwICYgMHgzZik7CiAgICB9IGVsc2UgewogICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGMwIHwgYyA+PiA2ICYgMHgxZik7CiAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ODAgfCBjID4+IDAgJiAweDNmKTsKICAgIH0KICB9CiAgcmV0dXJuIG91dDsKfQ=="},{"version":3,"names":["QRCodeImpl","ErrorCorrectLevel","name","props","value","String","size","type","Number","default","level","bgColor","fgColor","mounted","$nextTick","render","data","imgData","watch","methods","qrcode","addData","utf16to8","make","canvas","$refs","ctx","getContext","cells","modules","tileW","length","tileH","scale","window","devicePixelRatio","getBackingStorePixelRatio","height","width","forEach","row","rdx","cell","cdx","fillStyle","w","Math","ceil","floor","h","fillRect","round","toDataURL","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","str","out","i","len","c","charCodeAt","charAt","fromCharCode"],"sources":["src/components/qrcode/index.vue"],"sourcesContent":["<!--\r\n * @Author: wei_sc2\r\n * @Date: 2022-02-22 10:57:35\r\n * @LastEditTime: 2022-02-25 10:10:49\r\n * @LastEditors: xie_sm\r\n * @Description: 封装二维码组件\r\n * @FilePath: \\mobile-template\\src\\components\\qrcode\\index.vue\r\n-->\r\n<template>\r\n  <div class=\"qrcode-container\">\r\n    <canvas\r\n      :style=\"{\r\n        height: `${size}px`,\r\n        width: `${size}px`,\r\n      }\"\r\n      :height=\"size\"\r\n      :width=\"size\"\r\n      v-show=\"type === 'canvas'\"\r\n      ref=\"canvas\"\r\n    ></canvas>\r\n    <img\r\n      :src=\"imgData\"\r\n      v-if=\"type === 'img'\"\r\n      :style=\"{\r\n        height: `${size}px`,\r\n        width: `${size}px`,\r\n      }\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport QRCodeImpl from \"qr.js/lib/QRCode\";\r\nimport ErrorCorrectLevel from \"qr.js/lib/ErrorCorrectLevel\";\r\nexport default {\r\n  name: \"QRCode\",\r\n  props: {\r\n    value: String,\r\n    size: {\r\n      type: Number,\r\n      default: 160,\r\n    },\r\n    level: {\r\n      type: String,\r\n      default: \"L\",\r\n    },\r\n    bgColor: {\r\n      type: String,\r\n      default: \"#FFFFFF\",\r\n    },\r\n    fgColor: {\r\n      type: String,\r\n      default: \"#000000\",\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: \"img\",\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.render();\r\n    });\r\n  },\r\n  data() {\r\n    return {\r\n      imgData: \"\",\r\n    };\r\n  },\r\n  watch: {\r\n    value() {\r\n      this.render();\r\n    },\r\n    size() {\r\n      this.render();\r\n    },\r\n    level() {\r\n      this.render();\r\n    },\r\n    bgColor() {\r\n      this.render();\r\n    },\r\n    fgColor() {\r\n      this.render();\r\n    },\r\n  },\r\n  methods: {\r\n    render() {\r\n      if (typeof this.value === \"undefined\") {\r\n        return;\r\n      }\r\n      const qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[this.level]);\r\n      qrcode.addData(utf16to8(this.value));\r\n      qrcode.make();\r\n      const canvas = this.$refs.canvas;\r\n      const ctx = canvas.getContext(\"2d\");\r\n      const cells = qrcode.modules;\r\n      const tileW = this.size / cells.length;\r\n      const tileH = this.size / cells.length;\r\n      const scale = (window.devicePixelRatio || 1) / getBackingStorePixelRatio(ctx);\r\n      canvas.height = canvas.width = this.size * scale;\r\n      ctx.scale(scale, scale);\r\n      cells.forEach((row, rdx) => {\r\n        row.forEach((cell, cdx) => {\r\n          ctx.fillStyle = cell ? this.fgColor : this.bgColor;\r\n          const w = Math.ceil((cdx + 1) * tileW) - Math.floor(cdx * tileW);\r\n          const h = Math.ceil((rdx + 1) * tileH) - Math.floor(rdx * tileH);\r\n          ctx.fillRect(Math.round(cdx * tileW), Math.round(rdx * tileH), w, h);\r\n        });\r\n      });\r\n      if (this.type === \"img\") {\r\n        this.imgData = canvas.toDataURL(\"image/png\");\r\n      }\r\n    },\r\n  },\r\n};\r\nfunction getBackingStorePixelRatio(ctx) {\r\n  return (\r\n    ctx.webkitBackingStorePixelRatio ||\r\n    ctx.mozBackingStorePixelRatio ||\r\n    ctx.msBackingStorePixelRatio ||\r\n    ctx.oBackingStorePixelRatio ||\r\n    ctx.backingStorePixelRatio ||\r\n    1\r\n  );\r\n}\r\nfunction utf16to8(str) {\r\n  let out, i, len, c;\r\n  out = \"\";\r\n  len = str.length;\r\n  for (i = 0; i < len; i++) {\r\n    c = str.charCodeAt(i);\r\n    if (c >= 0x0001 && c <= 0x007f) {\r\n      out += str.charAt(i);\r\n    } else if (c > 0x07ff) {\r\n      out += String.fromCharCode(0xe0 | ((c >> 12) & 0x0f));\r\n      out += String.fromCharCode(0x80 | ((c >> 6) & 0x3f));\r\n      out += String.fromCharCode(0x80 | ((c >> 0) & 0x3f));\r\n    } else {\r\n      out += String.fromCharCode(0xc0 | ((c >> 6) & 0x1f));\r\n      out += String.fromCharCode(0x80 | ((c >> 0) & 0x3f));\r\n    }\r\n  }\r\n  return out;\r\n}\r\n</script>\r\n\r\n<style>\r\n.qrcode-container {\r\n  padding-top: 0.2rem;\r\n  padding-right: 0.2rem;\r\n  padding-left: 0.2rem;\r\n  background-color: #fff;\r\n}\r\n</style>\r\n"],"mappings":"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"}]}