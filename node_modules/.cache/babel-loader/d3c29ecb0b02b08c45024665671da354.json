{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\FormCenter\\formMixin.js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\FormCenter\\formMixin.js","mtime":1705912800023},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0Rm9ybURhdGEgfSBmcm9tICcuL2FwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogdGhpcy4kcm91dGUucGFyYW1zLnR5cGUsCiAgICAgIGJpeklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuYml6SWQKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZmxvd0NvbmZpZygpIHsKICAgICAgbGV0IHRlbXAgPSB7fTsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ3ZpZXcnIHx8IHRoaXMudHlwZSA9PT0gJ2V4ZWN1dGUnKSB7CiAgICAgICAgT2JqZWN0LmtleXModGhpcy5mb3JtRGF0YSkuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAgdGVtcFtrZXldID0gJ3JlYWRvbmx5JzsKICAgICAgICB9KTsKICAgICAgfQogICAgICBjb25zdCB0YXNrS2V5ID0gdGhpcy4kcm91dGUucGFyYW1zLnRhc2tLZXk7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdleGVjdXRlJyAmJiAodGFza0tleSA9PT0gJ1VzZXJUYXNrXzAnIHx8IHRhc2tLZXkgPT09ICdmYXdrZXNfY3VzdG9tX2Zsb3dfc3RhcnQnKSkgewogICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZm9ybURhdGEpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgIHRlbXBba2V5XSA9ICcnOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuY3VzdG9tQ29uZmlnICYmIHRoaXMuY3VzdG9tQ29uZmlnKHRlbXApOwogICAgICByZXR1cm4gdGVtcDsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRlbWl0KCdzZXRGb3JtTmFtZScsIHRoaXMuZm9ybU5hbWUpOyAvL+iuvue9ruihqOWNleW3puS4iuinkuW8ueeql+WQjeensAogICAgdGhpcy4kZW1pdCgnc2V0TW9kZWxLZXknLCB0aGlzLm1vZGVsS2V5KTsgLy/orr7nva5tb2RlbEtleQogICAgdGhpcy4kZW1pdCgnc2V0RW50aXR5TmFtZScsIHRoaXMuZW50aXR5TmFtZSk7IC8v6K6+572u5a6e5L2T5a+56LGh5ZCN56ew77yM6ZyA6KaB6K+i6Zeu5ZCO56uvCiAgICB0aGlzLiRlbWl0KCdzZXRTZXJ2aWNlJywgdGhpcy5zZXJ2aWNlKTsKICAgIHRoaXMuJGVtaXQoJ3NldFByZVNhdmVWYWxpZGF0ZVByb3BzJywgdGhpcy5wcmVTYXZlVmFsaWRhdGVQcm9wcyk7CiAgICBpZiAodGhpcy50eXBlICE9PSAnYWRkJykgewogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIGVudGl0eU5hbWU6IHRoaXMuZW50aXR5TmFtZSwKICAgICAgICBiaXpJZDogdGhpcy5iaXpJZAogICAgICB9OwogICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmRldGFpbEVudGl0eU5hbWVMaXN0KSAmJiB0aGlzLmRldGFpbEVudGl0eU5hbWVMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICBwYXJhbXMuZGV0YWlsRW50aXR5TmFtZUxpc3QgPSB0aGlzLmRldGFpbEVudGl0eU5hbWVMaXN0OwogICAgICB9CiAgICAgIGdldEZvcm1EYXRhKHRoaXMuc2VydmljZS5pbml0aWFsLCBwYXJhbXMpLnRoZW4oYXN5bmMgcmVzID0+IHsKICAgICAgICAvLyDoi6XkuJrliqHooajljZXkuK3lrprkuYnkuoZiZWZvcmVJbml05pa55rOVCiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5iZWZvcmVJbml0ICYmIChhd2FpdCB0aGlzLmJlZm9yZUluaXQocmVzKSk7CiAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgdGhpcy5mb3JtRGF0YSA9IHJlc3VsdC5mb3JtRGF0YTsKICAgICAgICAgIHRoaXMuZGV0YWlsUGFyYW1MaXN0ID0gcmVzdWx0LmRldGFpbFBhcmFtTGlzdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5mb3JtRGF0YSA9IHJlcy5kYXRhLmVudGl0eU9iamVjdDsKICAgICAgICAgIHRoaXMuZGV0YWlsUGFyYW1MaXN0ID0gcmVzLmRhdGEuZGV0YWlsUGFyYW1MaXN0IHx8IHRoaXMuZGV0YWlsUGFyYW1MaXN0OwogICAgICAgIH0KICAgICAgICAvLyDlm57loavooajljZXlkozlrZDooajkv6Hmga/liLBGb3JtY2VudGVy57uE5Lu25LitCiAgICAgICAgdGhpcy4kZW1pdCgnc2V0Rm9ybURhdGEnLCB0aGlzLmZvcm1EYXRhKTsKICAgICAgICB0aGlzLiRlbWl0KCdzZXREZXRhaWxQYXJhbUxpc3QnLCB0aGlzLmRldGFpbFBhcmFtTGlzdCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuZm9ybURhdGEgPSB7fTsKICAgIHRoaXMuZGV0YWlsUGFyYW1MaXN0ID0gW107CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDpqbzls7DovazmjaLkuIvliJLnur8KICAgIHRvTGluZShuYW1lKSB7CiAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoLyhbQS1aXSkvZywgJ18kMScpLnRvTG93ZXJDYXNlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["getFormData","data","type","$route","params","bizId","computed","flowConfig","temp","Object","keys","formData","forEach","key","taskKey","customConfig","created","$emit","formName","modelKey","entityName","service","preSaveValidateProps","Array","isArray","detailEntityNameList","length","initial","then","res","result","beforeInit","detailParamList","entityObject","beforeDestroy","methods","toLine","name","replace","toLowerCase"],"sources":["D:/Code/Project/WL/xasw-mobile/src/views/FormCenter/formMixin.js"],"sourcesContent":["import { getFormData } from './api'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      type: this.$route.params.type,\r\n      bizId: this.$route.params.bizId,\r\n    }\r\n  },\r\n  computed: {\r\n    flowConfig() {\r\n      let temp = {}\r\n      if (this.type === 'view' || this.type === 'execute') {\r\n        Object.keys(this.formData).forEach((key) => {\r\n          temp[key] = 'readonly'\r\n        })\r\n      }\r\n      const taskKey = this.$route.params.taskKey\r\n      if (\r\n        this.type === 'execute' &&\r\n        (taskKey === 'UserTask_0' || taskKey === 'fawkes_custom_flow_start')\r\n      ) {\r\n        Object.keys(this.formData).forEach((key) => {\r\n          temp[key] = ''\r\n        })\r\n      }\r\n      this.customConfig && this.customConfig(temp)\r\n      return temp\r\n    },\r\n  },\r\n  created() {\r\n    this.$emit('setFormName', this.formName) //设置表单左上角弹窗名称\r\n    this.$emit('setModelKey', this.modelKey) //设置modelKey\r\n    this.$emit('setEntityName', this.entityName) //设置实体对象名称，需要询问后端\r\n    this.$emit('setService', this.service)\r\n    this.$emit('setPreSaveValidateProps', this.preSaveValidateProps)\r\n    if (this.type !== 'add') {\r\n      let params = {\r\n        entityName: this.entityName,\r\n        bizId: this.bizId,\r\n      }\r\n      if (Array.isArray(this.detailEntityNameList) && this.detailEntityNameList.length > 0) {\r\n        params.detailEntityNameList = this.detailEntityNameList\r\n      }\r\n      getFormData(this.service.initial, params).then(async (res) => {\r\n        // 若业务表单中定义了beforeInit方法\r\n        const result = this.beforeInit && (await this.beforeInit(res))\r\n        if (result) {\r\n          this.formData = result.formData\r\n          this.detailParamList = result.detailParamList\r\n        } else {\r\n          this.formData = res.data.entityObject\r\n          this.detailParamList = res.data.detailParamList || this.detailParamList\r\n        }\r\n        // 回填表单和子表信息到Formcenter组件中\r\n        this.$emit('setFormData', this.formData)\r\n        this.$emit('setDetailParamList', this.detailParamList)\r\n      })\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.formData = {}\r\n    this.detailParamList = []\r\n  },\r\n  methods: {\r\n    // 驼峰转换下划线\r\n    toLine(name) {\r\n      return name.replace(/([A-Z])/g, '_$1').toLowerCase()\r\n    },\r\n  },\r\n}\r\n"],"mappings":"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"}]}