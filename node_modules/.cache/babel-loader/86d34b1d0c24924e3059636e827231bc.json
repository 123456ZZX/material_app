{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\inspectionManage\\daily-task.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\inspectionManage\\daily-task.vue","mtime":1708928163428},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBidXMgZnJvbSAnLi4vLi4vdmlld3MvaW5zcGVjdE1hcC91dGlscy9CdXMuanMnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnOwppbXBvcnQgTWFwQ29tcCBmcm9tICcuLi8uLi92aWV3cy9pbnNwZWN0TWFwL2luZGV4LnZ1ZSc7CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmltcG9ydCAqIGFzIGFwaSBmcm9tICcuL2FwaSc7CmltcG9ydCB7IFRvYXN0LCBEaWFsb2csIE5vdGlmeSB9IGZyb20gJ2Zhd2tlcy1tb2JpbGUtbGliJzsKaW1wb3J0ICogYXMgdHVyZiBmcm9tICdAdHVyZi90dXJmJzsKaW1wb3J0IFVwbG9hZGVyIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWQvVXBsb2FkZXIudnVlJzsKaW1wb3J0IHByb2JsZW1DYXJkSW5mbyBmcm9tICcuL3Byb2JsZW1DYXJkSW5mbyc7CmltcG9ydCBBUEkgZnJvbSAiQC9jb21tb24vY29uZmlnLmpzIjsKaW1wb3J0IF9jbG9uZURlZXAgZnJvbSAnbG9kYXNoL2Nsb25lRGVlcCc7CmNvbnN0IG1hcE9iaiA9IHsKICBtYXA6IG51bGwsCiAgbWFwSW5zdGFuY2U6IG51bGwKfTsKbGV0IHBhdXNlU3RhdGVUcmFja1BvaW50cyA9IFtdOwpsZXQgcGF1c2VTdGF0ZVBpcGVJZExpc3QgPSBbXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdkYWlseS10YXNrJywKICBjb21wb25lbnRzOiB7CiAgICBNYXBDb21wLAogICAgVXBsb2FkZXIsCiAgICBwcm9ibGVtQ2FyZEluZm8KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93S2V5TGlzdDogZmFsc2UsCiAgICAgIGJ1dHRvbkxpc3Q6IFtdLAogICAgICB1bkluc3BLZXlEZXRhaWxMaXN0OiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiB0cnVlLAogICAgICBjdXJyZW50U2VsZWN0OiAn5YWo6YOoJywKICAgICAgaXNSZXN1bWU6IHRydWUsCiAgICAgIGlmTGVhdmVUYXNrOiBmYWxzZSwKICAgICAgc3RvcFJlYXNvbjogJycsCiAgICAgIGlmRW5kVGFzazogZmFsc2UsCiAgICAgIGxlZ2VuZENvbmZpZzogW10sCiAgICAgIGlmVGlwczogZmFsc2UsCiAgICAgIHJlcG9ydERhdGFJc0xvYWRlZDogZmFsc2UsCiAgICAgIC8vIOW3oeajgOS7u+WKoeS4i+aJgOacieW3oeajgOeuoee6vwogICAgICBhbGxUYXNrTGluZXM6IFtdLAogICAgICBpc1ZpZXc6IHRydWUsCiAgICAgIGFjdGl2ZTogMCwKICAgICAgZGV2aWNlTmFtZTogJycsCiAgICAgIGhhc1NpZ25JbjogZmFsc2UsCiAgICAgIHNob3dQb3BvdmVyOiBmYWxzZSwKICAgICAgYWN0aW9uczogW3sKICAgICAgICB0ZXh0OiAn6Zeu6aKY5LiK5oqlJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+iuvuaWvee8uumZtycKICAgICAgfV0sCiAgICAgIGN1cnJlbnRSYXRlOiAwLAogICAgICAvLyDmjqfliLblhbPplK7ngrnliJfooajmmL7pmpAKICAgICAgcG9pbnRMaXN0U2hvdzogZmFsc2UsCiAgICAgIC8vIOWFqOWxgOWPkeWjsOWHveaVsAogICAgICAvLyDorrDlvZXlvIDlp4vlt6Hmo4DnmoTml7bpl7TvvIznlKjkuo7liKTmlq3mmK/lkKblnKjlvIDlp4vlt6Hmo4DnmoQxMHPlhoUKICAgICAgc3RhcnRSZWNvcmRUaW1lcjogJycsCiAgICAgIG5hdmJhclRpdGxlOiAn5pel5bi45Lu75YqhJywKICAgICAgLy8g5LiK5oql5aSx6LSl55qE5beh5qOA6L2o6L+554K55L2N5pWw57uECiAgICAgIHJlcG9ydEZhaWxUcmFja1BvaW50czogW10sCiAgICAgIGlzU2hvd1JvdXRlOiB0cnVlLAogICAgICBpbnNwQnVzaW5lc3NUeXBlOiAnJywKICAgICAgcmVjb3JkRGF0YTogW10sCiAgICAgIC8vIOW9k+WJjeW3oeajgOWRmOaJgOWkhOS9jee9rgogICAgICBjdXJyZW50UG9zaXRpb246IG51bGwsCiAgICAgIGxpbmVzOiBbXSwKICAgICAgLy8g5beh5qOA5ZGY5L+h5oGvCiAgICAgIHVzZXJJbmZvOiB7fSwKICAgICAgaWZSZWNvcmRpbmc6IGZhbHNlLAogICAgICBzZWxlY3RFdmVudFR5cGU6IGZhbHNlLAogICAgICBldmVudFR5cGVMaXN0OiBbXSwKICAgICAgc2lnblNob3c6IGZhbHNlLAogICAgICBhdHRhY2htZW50OiAnJywKICAgICAgc2lnbkZvcm06IHsKICAgICAgICBkZXZpY2VTdGF0dXM6ICcxJywKICAgICAgICBpbnNwSW1hZ2VzTGlzdDogW10sCiAgICAgICAgcmVtYXJrOiAnJywKICAgICAgICBpc1JlcG9ydDogJycsCiAgICAgICAgdGFza0lkOiAnJywKICAgICAgICBwb2ludElkOiAnJywKICAgICAgICBsaXF1aWRMZXZlbDogJycKICAgICAgfSwKICAgICAgdGFza0RldGFpbDogewogICAgICAgIGNvdmVyYWdlOiAnMC8wJywKICAgICAgICByZXBvcnRSYXRlOiAnMC8wJywKICAgICAgICBwbGFuRW5kVGltZTogJycKICAgICAgfSwKICAgICAgZW5nSW5mb0RUTzoge30sCiAgICAgIHRhc2tSZXN0VGltZTogMCwKICAgICAgcmVwb3J0Rm9vdGVyU2hvdzogZmFsc2UsCiAgICAgIGZlYXR1cmU6IHt9LAogICAgICBwbGFuRGV0YWlsOiB7fSwKICAgICAgLy8g55So5LqO5Zyw5Zu+5Lit5pi+56S66IyD5Zu05ZKM5YWz6ZSu54K5CiAgICAgIGluc3BSYW5nZUxpc3Q6IFtdLAogICAgICByYW5nZUxpc3Q6IFtdLAogICAgICBrZXlEZXRhaWxMaXN0OiBbXSwKICAgICAgaXNSdW5MaXN0OiBbewogICAgICAgIG5hbWU6ICfmraPluLgnLAogICAgICAgIHZhbHVlOiAnMScKICAgICAgfSwgewogICAgICAgIG5hbWU6ICflvILluLgnLAogICAgICAgIHZhbHVlOiAnMCcKICAgICAgfV0sCiAgICAgIHJlcG9ydENob3NlOiBbewogICAgICAgIG5hbWU6ICfpl67popjkuIrmiqUnLAogICAgICAgIHZhbHVlOiAn6Zeu6aKY5LiK5oqlJwogICAgICB9LCB7CiAgICAgICAgbmFtZTogJ+aWsOWinue8uumZtycsCiAgICAgICAgdmFsdWU6ICfmlrDlop7nvLrpmbcnCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAn5peg6ZyA5LiK5oqlJywKICAgICAgICB2YWx1ZTogJ+aXoOmcgOS4iuaKpScKICAgICAgfV0sCiAgICAgIHJ1bGVzOiB7fSwKICAgICAgcHJldmlld1VSTDogJy9zeXMtc3RvcmFnZS9kb3dubG9hZF9pbWFnZT9mOHM9JywKICAgICAgdXBpbWdQcmV2aWV3OiBbXSwKICAgICAgaGVhZGVyczoge30sCiAgICAgIHVybDogewogICAgICAgIC8vIOacrOmhtemdouS9v+eUqOWIsOeahHVybAogICAgICAgIHVwbG9hZEZpbGU6ICdzeXMtc3RvcmFnZS91cGxvYWQnLAogICAgICAgIGZpbmRGaWxlOiAnZWNpZGktY21wL2ZpbGUvY21wRmlsZUdyb3VwL2ZpbmRGaWxlc0J5R3JvdXBJZCcKICAgICAgfSwKICAgICAgcG9sbGluZ0ZsYWc6IGZhbHNlLAogICAgICBwb2xsaW5nR2FwVGltZTogMywKICAgICAgdHJhY2tQb2ludExpc3Q6IFtdLAogICAgICB0cmFja1BvaW50VGltZUxpc3Q6IFtdLAogICAgICBvdmVyU3BlZWRUcmFja0xpbmVMaXN0OiBbXSwKICAgICAgdHJhY2tMb2NhdGlvbl9zdGFydDogJycsCiAgICAgIHRyYWNrTG9jYXRpb25fZW5kOiAnJywKICAgICAgc2hvd1Zpc2libGU6IGZhbHNlLAogICAgICByZXBvcnRTaG93OiBmYWxzZSwKICAgICAgLy8g6Zeu6aKY5LiK5oql6Z2i5p2/5pi+56S6CiAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLiRzdG9yYWdlLmdldCgnYWNjZXNzX3Rva2VuJyksCiAgICAgIGhlYWRlcjoge30sCiAgICAgIGZvcm1Ub2tlbjogJycsCiAgICAgIC8vIOmXrumimOS4iuaKpWxpc3QKICAgICAgcHJvYmxlbURhdGFMaXN0MTogW10sCiAgICAgIC8vIOiuvuaWvee8uumZt2xpc3QKICAgICAgcHJvYmxlbURhdGFMaXN0MjogW10sCiAgICAgIC8vIOa2suS9jei+k+WFpeahhuaYr+WQpuaYvuekugogICAgICB3YXRlckxldmVsU2hvdzogZmFsc2UsCiAgICAgIC8vIOW3oeajgOimgeeCuWxpc3TmlbDmja4KICAgICAga2V5UG9pbnRzSW5zcGVjdGlvbkxpc3Q6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGJ1dHRvbkFyZWFTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAnLS13aWR0aCc6IHRoaXMuYnV0dG9uTGlzdC5sZW5ndGggKiAoODAgKyAxMCkgKyAncHgnCiAgICAgIH07CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8g6I635Y+W6Zeu6aKY5LiK5oql5ZKM6K6+5pa957y66Zm35pWw5o2uCiAgICB0aGlzLmdldENhcmRMaXN0RGF0YSgpOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBhdXNlIiwgdGhpcy5wYXVzZSwgZmFsc2UpOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicmVzdW1lIiwgdGhpcy5yZXN1bWUsIGZhbHNlKTsKICAgIHRoaXMudXNlckluZm8gPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbzsKICAgIGNvbnNvbGUubG9nKCd0aGlzLnVzZXJJbmZvOiAnLCB0aGlzLnVzZXJJbmZvKTsKICAgIHRoaXMuaXNTdGFydCA9IGZhbHNlOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0YXJ0UmVjb3JkTGluZXMnLCAnZW5kJyk7CiAgICB0aGlzLm5hdmJhclRpdGxlID0gJ+aXpeW4uOS7u+WKoSc7CiAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICBidXMuJG9mZignc3RhcnRTaWduSW4nKS4kb24oJ3N0YXJ0U2lnbkluJywgZmVhdHVyZSA9PiB7CiAgICAgIHRoYXQuc3RhcnRTaWduSW4oZmVhdHVyZSk7CiAgICB9KTsKICAgIHRoaXMuaXNWaWV3ID0gdGhpcy4kcm91dGUucXVlcnkuaXNWaWV3OwogICAgY29uc3QgaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQ7CiAgICB0aGlzLmdldFRhc2tCeUlkKGlkKTsKICAgIHRoaXMuZ2V0VHJhY2tSZWNvcmRzQnlJZChpZCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuS2V5UG9pbnRMaXN0KCkgewogICAgICB0aGlzLnNob3dLZXlMaXN0ID0gdHJ1ZTsKICAgIH0sCiAgICBnb1RvRGVhbChvYmopIHsKICAgICAgaWYgKG9iai5zdGFydExvbmdpdHVkZSAmJiBvYmouc3RhcnRMYXRpdHVkZSkgewogICAgICAgIHRoaXMuZmx5VG9Qb2ludChbb2JqLnN0YXJ0TG9uZ2l0dWRlLCBvYmouc3RhcnRMYXRpdHVkZV0pOwogICAgICB9IGVsc2UgewogICAgICAgIFRvYXN0Lndhcm5pbmcoewogICAgICAgICAgbWVzc2FnZTogJ+W9k+WJjeiuvuaWveaXoOWcsOeQhuWdkOagh+S/oeaBrycsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZUJpelR5cGUodHlwZSkgewogICAgICB0aGlzLmN1cnJlbnRTZWxlY3QgPSB0eXBlOwogICAgICB0aGlzLnVuSW5zcEtleURldGFpbExpc3QgPSBbXTsKICAgICAgaWYgKHR5cGUgPT0gJ+WFqOmDqCcpIHsKICAgICAgICB0aGlzLnVuSW5zcEtleURldGFpbExpc3QgPSB0aGlzLmtleURldGFpbExpc3QuZmlsdGVyKGl0ID0+ICFpdC5kZXZpY2VTdGF0dXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudW5JbnNwS2V5RGV0YWlsTGlzdCA9IHRoaXMua2V5RGV0YWlsTGlzdC5maWx0ZXIoaXQgPT4gIWl0LmRldmljZVN0YXR1cyAmJiBpdC5iaXpUeXBlID09IHR5cGUpOwogICAgICB9CiAgICB9LAogICAgLy8g6I635Y+W6Zeu6aKY5LiK5oql5ZKM6K6+5pa957y66Zm35pWw5o2uCiAgICBnZXRDYXJkTGlzdERhdGEoKSB7CiAgICAgIC8vIOiOt+WPlmhlYWRlcu+8jOafpeivouW3peWNleeUqAogICAgICBheGlvcyh7CiAgICAgICAgdXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX1RISVJEX1JFUVVFU1RfVVJMICsgJy9tYWluL3VzZXJDZW50ZXJBcGkvc3NvL3Rva2VuQnlUb2tlbicsCiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy5hY2Nlc3NUb2tlbgogICAgICAgIH0sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljIGIzVjBkMjl5YXpwM2NHY3lNREl3JwogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgdGhpcy5mb3JtVG9rZW4gPSByZXMuZGF0YS5yZXN1bHREYXRhLnRva2VuOwogICAgICAgICAgdGhpcy5oZWFkZXIgPSB7CiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIHRoaXMuZm9ybVRva2VuCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgZ2V0UHJvYmxlbURhdGFMaXN0KHBhcmFtcykgewogICAgICB0aGlzLnByb2JsZW1EYXRhTGlzdDEgPSBbXTsKICAgICAgdGhpcy5wcm9ibGVtRGF0YUxpc3QyID0gW107CiAgICAgIGxldCBjb21tb25QYXJhbXMgPSBPYmplY3QuYXNzaWduKHsKICAgICAgICBzeXNDb2RlOiAnb3V0d29yaycsCiAgICAgICAgLy8gdG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgcGFnZTogewogICAgICAgICAgY3VycmVudDogMSwKICAgICAgICAgIHNpemU6IDk5OTk5IC8vIOafpeWFqOmDqAogICAgICAgIH0KICAgICAgfSwgcGFyYW1zKTsKICAgICAgLy8g6Zeu6aKY5LiK5oqlCiAgICAgIGxldCBwYXJhbXMxID0gewogICAgICAgIC4uLmNvbW1vblBhcmFtcywKICAgICAgICBzbWFsbFR5cGU6ICdhYm5vcm1hbF9pbmZvcm0nCiAgICAgIH07CiAgICAgIC8vIOiuvuaWvee8uumZtwogICAgICBsZXQgcGFyYW1zMiA9IHsKICAgICAgICAuLi5jb21tb25QYXJhbXMsCiAgICAgICAgc21hbGxUeXBlOiAnZGVmZWN0JwogICAgICB9OwogICAgICBsZXQgcHJvYmxlbVBvaW50RmVhdHVyZXMgPSBbXTsKICAgICAgLy8g6Zeu6aKY5LiK5oqlCiAgICAgIGF3YWl0IHRoaXMuZ2V0QXhpb3NEYXRhKHBhcmFtczEsIHRoaXMucHJvYmxlbURhdGFMaXN0MSk7CiAgICAgIC8vIOiuvuaWvee8uumZtwogICAgICBhd2FpdCB0aGlzLmdldEF4aW9zRGF0YShwYXJhbXMyLCB0aGlzLnByb2JsZW1EYXRhTGlzdDIpOwogICAgICBsZXQgYWxsUHJvYmxlbSA9IHRoaXMucHJvYmxlbURhdGFMaXN0MS5jb25jYXQodGhpcy5wcm9ibGVtRGF0YUxpc3QyKTsKICAgICAgYWxsUHJvYmxlbS5mb3JFYWNoKGl0ID0+IHsKICAgICAgICBwcm9ibGVtUG9pbnRGZWF0dXJlcy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBpdC5sbmdsYXQKICAgICAgICAgIH0sCiAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgIGlkOiBpdC5pZCwKICAgICAgICAgICAgdGl0bGU6IGl0LnRpdGxlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLiRyZWZzLm15bWFwLmFkZEluc3BFdmVudExheWVyKHByb2JsZW1Qb2ludEZlYXR1cmVzKTsKICAgICAgdGhpcy5yZXBvcnREYXRhSXNMb2FkZWQgPSB0cnVlOwogICAgfSwKICAgIGdldEF4aW9zRGF0YShwYXJhbXMsIHByb2JsZW1EYXRhTGlzdCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGF4aW9zKHsKICAgICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9USElSRF9SRVFVRVNUX1VSTCArICcvbWFpbi9vdXR3b3JrYXBpL3RpY2tldFN0YXRpc3RpY0NsaWVudC9nZXRUaWNrZXRMaXN0JywKICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgZGF0YTogcGFyYW1zLAogICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXIKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgcmVzLmRhdGEucmVzdWx0RGF0YS5yZWNvcmRzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgdmFyIF9pdGVtJGZvcm1WYWx1ZSRkZXRhaSwgX2l0ZW0kZm9ybVZhbHVlLCBfaXRlbSRmb3JtVmFsdWUyLCBfaXRlbSRmb3JtVmFsdWUzOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpdGVtOiAnLCBpdGVtKTsKICAgICAgICAgICAgICBwcm9ibGVtRGF0YUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgICAgICAgIC8vIOW3peWNlUlECiAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICAgICAgICAgIC8vIOW3peWNleagh+mimAogICAgICAgICAgICAgICAgdGlja2V0U3RhdHVzTmFtZTogaXRlbS50aWNrZXRTdGF0dXNOYW1lLAogICAgICAgICAgICAgICAgaGFuZGxlVHlwZTogaXRlbS5mb3JtVmFsdWUuaGFuZGxlVHlwZSwKICAgICAgICAgICAgICAgIC8vIOaPj+i/sAogICAgICAgICAgICAgICAgY3JlYXRlQnlOYW1lOiBpdGVtLmNyZWF0ZUJ5TmFtZSwKICAgICAgICAgICAgICAgIC8vIOWIm+W7uuS6ugogICAgICAgICAgICAgICAgY3JlYXRlVGltZTogaXRlbS5jcmVhdGVUaW1lLnN1YnN0cmluZygwLCAxMCksCiAgICAgICAgICAgICAgICAvLyDliJvlu7rml7bpl7QKICAgICAgICAgICAgICAgIGRlZmVjdEZyb206IGl0ZW0uZm9ybVZhbHVlLmRlZmVjdEZyb20sCiAgICAgICAgICAgICAgICBmYXVsdFR5cGVzOiAoKF9pdGVtJGZvcm1WYWx1ZSRkZXRhaSA9IGl0ZW0uZm9ybVZhbHVlLmRldGFpbCkgPT09IG51bGwgfHwgX2l0ZW0kZm9ybVZhbHVlJGRldGFpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRmb3JtVmFsdWUkZGV0YWkuZGVmZWN0VHlwZSkgfHwgaXRlbS5mb3JtVmFsdWUuZmF1bHRUeXBlcywKICAgICAgICAgICAgICAgIC8vIGZpbGVVcmw6IGl0ZW0uZm9ybVZhbHVlPy5oYW5kbGVJbWdzPy5bMF0/LmZpbGVVcmwsCiAgICAgICAgICAgICAgICAvLyDlm77niYflnLDlnYAKICAgICAgICAgICAgICAgIHVybDogKF9pdGVtJGZvcm1WYWx1ZSA9IGl0ZW0uZm9ybVZhbHVlKSA9PT0gbnVsbCB8fCBfaXRlbSRmb3JtVmFsdWUgPT09IHZvaWQgMCB8fCAoX2l0ZW0kZm9ybVZhbHVlID0gX2l0ZW0kZm9ybVZhbHVlLmZpbGVzKSA9PT0gbnVsbCB8fCBfaXRlbSRmb3JtVmFsdWUgPT09IHZvaWQgMCB8fCAoX2l0ZW0kZm9ybVZhbHVlID0gX2l0ZW0kZm9ybVZhbHVlWzBdKSA9PT0gbnVsbCB8fCBfaXRlbSRmb3JtVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGZvcm1WYWx1ZS51cmwsCiAgICAgICAgICAgICAgICAvLyDlj5HnlJ/nu4/nuqzluqYKICAgICAgICAgICAgICAgIGxuZ2xhdDogW2l0ZW0uYXBwZWFsTG5nLCBpdGVtLmFwcGVhbExhdF0gfHwgW2l0ZW0uZm9ybVZhbHVlLmRldmljZURldGFpbC5sb25naXR1ZGUsIGl0ZW0uZm9ybVZhbHVlLmRldmljZURldGFpbC5sYXRpdHVkZV0sCiAgICAgICAgICAgICAgICAvLyBkZXZpY2VUeXBlOiBpdGVtLmZvcm1WYWx1ZT8uZGV2aWNlVHlwZSB8fCBbXSwKICAgICAgICAgICAgICAgIGRldmljZVR5cGU6ICgoX2l0ZW0kZm9ybVZhbHVlMiA9IGl0ZW0uZm9ybVZhbHVlKSA9PT0gbnVsbCB8fCBfaXRlbSRmb3JtVmFsdWUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRmb3JtVmFsdWUyLmRldmljZVR5cGUpIHx8ICgoX2l0ZW0kZm9ybVZhbHVlMyA9IGl0ZW0uZm9ybVZhbHVlKSA9PT0gbnVsbCB8fCBfaXRlbSRmb3JtVmFsdWUzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRmb3JtVmFsdWUzLmRldmljZV90eXBlKSB8fCBbXSwKICAgICAgICAgICAgICAgIHF1ZXN0aW9uRGVzY3JpYmU6IGl0ZW0uZm9ybVZhbHVlLnF1ZXN0aW9uRGVzY3JpYmUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIHByb2JsZW1EYXRhTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAvLyAgIC8vIGNvbnNvbGUubG9nKCflm77niYflnLDlnYAnLCBpdGVtLnVybCkKICAgICAgICAgIC8vIH0pCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmXrumimOS4iuaKpeeCueWHu+agh+mimOOAgeiuvuaWvee8uumZt+eCueWHu+WNoeeJh+i/m+WFpeivpuaDhemhtSAgCiAgICB0b0RldGFpbFBhbmVsKGNhcmREZXRhaWwpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdkZXRhaWxQcm9ibGVtT3JkZXInLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBpZDogY2FyZERldGFpbC5pZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y2h54mH5a6a5L2NCiAgICBmbHlUb1BvaW50KGxuZ2xhdCkgewogICAgICBtYXBPYmoubWFwLmZseVRvKHsKICAgICAgICBjZW50ZXI6IGxuZ2xhdCwKICAgICAgICB6b29tOiAxNy41CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4iuaKpQogICAgcmVwb3J0Q2xpY2soKSB7CiAgICAgIGlmICh0aGlzLnJlcG9ydERhdGFJc0xvYWRlZCkgewogICAgICAgIHRoaXMucmVwb3J0U2hvdyA9IHRydWU7CiAgICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnZXZlbnRQb2ludHNMYXllcicsICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBUb2FzdC5sb2FkaW5nKHsKICAgICAgICAgIG1lc3NhZ2U6ICfkuIrmiqXmlbDmja7liqDovb3kuK3jgILjgILjgIInLAogICAgICAgICAgbG9hZGluZ1R5cGU6ICdzcGlubmVyJywKICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ2V2ZW50UG9pbnRzTGF5ZXInLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICB9LAogICAgZmlsZUNoYW5nZShmaWxlKSB7CiAgICAgIHRoaXMuc2lnbkZvcm0uaW5zcEltYWdlc0xpc3QgPSBbXTsKICAgICAgaWYgKGZpbGUuZmlsZUxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLmF0dGFjaG1lbnQgPSAnJzsKICAgICAgfQogICAgICBmaWxlLmZpbGVMaXN0LmZvckVhY2goaXQgPT4gewogICAgICAgIHRoaXMuc2lnbkZvcm0uaW5zcEltYWdlc0xpc3QucHVzaCh7CiAgICAgICAgICBmaWxlSWQ6IGl0LnJlc3BvbnNlLmdyb3VwVG9rZW4sCiAgICAgICAgICBpbWFnZXNOYW1lOiBpdC51cmwKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2lnbkZvcm0pOwogICAgfSwKICAgIGNvbnRpbnVlVGFzaygpIHsKICAgICAgdGhpcy5zdG9wUmVhc29uID0gJyc7CiAgICAgIHRoaXMuaWZFbmRUYXNrID0gZmFsc2U7CiAgICB9LAogICAgc3RvcFRhc2soKSB7CiAgICAgIGlmICh0aGlzLnN0b3BSZWFzb24gPT0gJycpIHsKICAgICAgICBUb2FzdC53YXJuaW5nKHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnu4jmraLljp/lm6AnLAogICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5pZkVuZFRhc2sgPSBmYWxzZTsKICAgICAgdGhpcy5lbmRSZWNvcmRDb25maXJtKCdlbmQnKTsKICAgIH0sCiAgICBhc3luYyBlbmRUYXNrKCkgewogICAgICBpZiAodGhpcy5pc1ZpZXcpIHsKICAgICAgICBUb2FzdCh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+l5beh5qOA5Lu75Yqh5bey57uT5p2fJywKICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIGJ1cy4kb2ZmKCd1cGRhdGVEYXRhJykKICAgICAgYXdhaXQgdGhpcy5nZXRUYXNrQnlJZCh0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQpOwogICAgICBsZXQgaGFzSW5zcEtwID0gdGhpcy5jaGFuZ2VUb0luc3BDb3VudCh0aGlzLnRhc2tEZXRhaWwucmVwb3J0UmF0ZSk7CiAgICAgIGxldCBhbGxJbnNwS3AgPSB0aGlzLmNoYW5nZVRvQWxsSW5zcENvdW50KHRoaXMudGFza0RldGFpbC5yZXBvcnRSYXRlKTsKICAgICAgaWYgKGFsbEluc3BLcCAtIGhhc0luc3BLcCA9PSAwICYmIHRoaXMuY2hhbmdlVG9SYXRlKHRoaXMudGFza0RldGFpbC5jb3ZlcmFnZSkgPT0gJzEwMCUnKSB7CiAgICAgICAgdGhpcy5lbmRSZWNvcmRDb25maXJtKCdlbmQnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlmRW5kVGFzayA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBvcGVuUG9wdXAoKSB7CiAgICAgIGlmICh0aGlzLmlzVmlldykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnNob3dQb3BvdmVyID0gdHJ1ZTsKICAgIH0sCiAgICBvblNlbGVjdCh2YWwpIHsKICAgICAgaWYgKHRoaXMuaXNWaWV3KSB7CiAgICAgICAgVG9hc3QoewogICAgICAgICAgbWVzc2FnZTogJ+ivpeW3oeajgOS7u+WKoeW3sue7k+adnycsCiAgICAgICAgICBkdXJhdGlvbjogJzE1MDAnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuaWZUaXBzID0gdHJ1ZTsKICAgICAgbWFwT2JqLm1hcC5vZmYoJ2NsaWNrJywgJ2tleXBvaW50c0xheWVyJywgdGhpcy4kcmVmcy5teW1hcC5zaWduSW5CdWZmZXIpOwogICAgICB2YWwudGV4dCA9PSAn6Zeu6aKY5LiK5oqlJyA/IG1hcE9iai5tYXAub24oJ2NsaWNrJywgdGhpcy5zZWxlY3RSZXBvcnRQb2ludCkgOiBtYXBPYmoubWFwLm9uKCdjbGljaycsIHRoaXMuc2VsZWN0Rmxhd1BvaW50KTsKICAgIH0sCiAgICBzZWxlY3RSZXBvcnRQb2ludChlKSB7CiAgICAgIGxldCBmZWF0dXJlcyA9IG1hcE9iai5tYXAucXVlcnlSZW5kZXJlZEZlYXR1cmVzKGUucG9pbnQpOwogICAgICBpZiAodGhpcy5pZlRpcHMpIHsKICAgICAgICB0aGlzLmlmVGlwcyA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmIChmZWF0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgaWYgKGZlYXR1cmVzWzBdLnNvdXJjZSAhPSAiaW5zcFVzZXIiCiAgICAgICAgLy8gJiYgZmVhdHVyZXNbMF0uc291cmNlICE9ICJpbml0SW5zcExpbmVTb3VyY2UiIAogICAgICAgICYmIGZlYXR1cmVzWzBdLnNvdXJjZSAhPSAia2V5cG9pbnRzIiAmJiBmZWF0dXJlc1swXS5nZW9tZXRyeS50eXBlID09PSAiUG9pbnQiKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLm15bWFwLmFkZEV2ZW50T2JqTWFya2VyKGZlYXR1cmVzWzBdLCAnZGV2aWNlJywgJ2V2ZW50JywgewogICAgICAgICAgICBncmlkSWQ6IHRoaXMucGxhbkRldGFpbC5ncmlkSWQsCiAgICAgICAgICAgIGdyaWROYW1lOiB0aGlzLnBsYW5EZXRhaWwuZ3JpZE5hbWUsCiAgICAgICAgICAgIGdyaWRNYW5hZ2VyOiB7CiAgICAgICAgICAgICAgZnVsbE5hbWU6IHRoaXMucGxhbkRldGFpbC5ncmlkTWFuYWdlciwKICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy5wbGFuRGV0YWlsLnVzZXJOYW1lLAogICAgICAgICAgICAgIHVzZXJJZDogdGhpcy5wbGFuRGV0YWlsLnVzZXJJZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGZlYXR1cmVzLmxlbmd0aCA+IDEgJiYgZmVhdHVyZXNbMV0uc291cmNlICE9ICJldmVudFBvaW50cyIgJiYgZmVhdHVyZXNbMV0uc291cmNlICE9ICJpbnNwVXNlciIgJiYgZmVhdHVyZXNbMV0uc291cmNlICE9ICJrZXlwb2ludHMiICYmIGZlYXR1cmVzWzFdLmdlb21ldHJ5LnR5cGUgPT09ICJQb2ludCIpIHsKICAgICAgICAgIHRoaXMuJHJlZnMubXltYXAuYWRkRXZlbnRPYmpNYXJrZXIoZmVhdHVyZXNbMV0sICdkZXZpY2UnLCAnZXZlbnQnLCB7CiAgICAgICAgICAgIGdyaWRJZDogdGhpcy5wbGFuRGV0YWlsLmdyaWRJZCwKICAgICAgICAgICAgZ3JpZE5hbWU6IHRoaXMucGxhbkRldGFpbC5ncmlkTmFtZSwKICAgICAgICAgICAgZ3JpZE1hbmFnZXI6IHsKICAgICAgICAgICAgICBmdWxsTmFtZTogdGhpcy5wbGFuRGV0YWlsLmdyaWRNYW5hZ2VyLAogICAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnBsYW5EZXRhaWwudXNlck5hbWUsCiAgICAgICAgICAgICAgdXNlcklkOiB0aGlzLnBsYW5EZXRhaWwudXNlcklkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLm15bWFwLmFkZEV2ZW50T2JqTWFya2VyKGUubG5nTGF0LCAnbG5nbGF0JywgJ2V2ZW50JywgewogICAgICAgICAgZ3JpZElkOiB0aGlzLnBsYW5EZXRhaWwuZ3JpZElkLAogICAgICAgICAgZ3JpZE5hbWU6IHRoaXMucGxhbkRldGFpbC5ncmlkTmFtZSwKICAgICAgICAgIGdyaWRNYW5hZ2VyOiB7CiAgICAgICAgICAgIGZ1bGxOYW1lOiB0aGlzLnBsYW5EZXRhaWwuZ3JpZE1hbmFnZXIsCiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnBsYW5EZXRhaWwudXNlck5hbWUsCiAgICAgICAgICAgIHVzZXJJZDogdGhpcy5wbGFuRGV0YWlsLnVzZXJJZAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIG1hcE9iai5tYXAub24oJ2NsaWNrJywgJ2tleXBvaW50c0xheWVyJywgdGhpcy4kcmVmcy5teW1hcC5zaWduSW5CdWZmZXIpOwogICAgICBtYXBPYmoubWFwLm9mZignY2xpY2snLCB0aGlzLnNlbGVjdFJlcG9ydFBvaW50KTsKICAgIH0sCiAgICBzZWxlY3RGbGF3UG9pbnQoZSkgewogICAgICBsZXQgZmVhdHVyZXMgPSBtYXBPYmoubWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLnBvaW50KTsKICAgICAgaWYgKHRoaXMuaWZUaXBzKSB7CiAgICAgICAgdGhpcy5pZlRpcHMgPSBmYWxzZTsKICAgICAgfQogICAgICBpZiAoZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgIGlmIChmZWF0dXJlc1swXS5zb3VyY2UgIT0gImV2ZW50UG9pbnRzIiAmJiBmZWF0dXJlc1swXS5zb3VyY2UgIT0gImluc3BVc2VyIgogICAgICAgIC8vICYmIGZlYXR1cmVzWzBdLnNvdXJjZSAhPSAiaW5pdEluc3BMaW5lU291cmNlIiAKICAgICAgICAmJiBmZWF0dXJlc1swXS5zb3VyY2UgIT0gImtleXBvaW50cyIgJiYgZmVhdHVyZXNbMF0uZ2VvbWV0cnkudHlwZSA9PT0gIlBvaW50IikgewogICAgICAgICAgdGhpcy4kcmVmcy5teW1hcC5hZGRFdmVudE9iak1hcmtlcihmZWF0dXJlc1swXSwgJ2RldmljZScsICdmbGF3JywgewogICAgICAgICAgICBncmlkSWQ6IHRoaXMucGxhbkRldGFpbC5ncmlkSWQsCiAgICAgICAgICAgIGdyaWROYW1lOiB0aGlzLnBsYW5EZXRhaWwuZ3JpZE5hbWUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZXMubGVuZ3RoID4gMSAmJiBmZWF0dXJlc1sxXS5zb3VyY2UgIT0gImV2ZW50UG9pbnRzIiAmJiBmZWF0dXJlc1sxXS5zb3VyY2UgIT0gImluc3BVc2VyIiAmJiBmZWF0dXJlc1sxXS5zb3VyY2UgIT0gImtleXBvaW50cyIgJiYgZmVhdHVyZXNbMV0uZ2VvbWV0cnkudHlwZSA9PT0gIlBvaW50IikgewogICAgICAgICAgdGhpcy4kcmVmcy5teW1hcC5hZGRFdmVudE9iak1hcmtlcihmZWF0dXJlc1sxXSwgJ2RldmljZScsICdmbGF3JywgewogICAgICAgICAgICBncmlkSWQ6IHRoaXMucGxhbkRldGFpbC5ncmlkSWQsCiAgICAgICAgICAgIGdyaWROYW1lOiB0aGlzLnBsYW5EZXRhaWwuZ3JpZE5hbWUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLm15bWFwLmFkZEV2ZW50T2JqTWFya2VyKGUubG5nTGF0LCAnbG5nbGF0JywgJ2ZsYXcnLCB7CiAgICAgICAgICBncmlkSWQ6IHRoaXMucGxhbkRldGFpbC5ncmlkSWQsCiAgICAgICAgICBncmlkTmFtZTogdGhpcy5wbGFuRGV0YWlsLmdyaWROYW1lCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgbWFwT2JqLm1hcC5vbignY2xpY2snLCAna2V5cG9pbnRzTGF5ZXInLCB0aGlzLiRyZWZzLm15bWFwLnNpZ25JbkJ1ZmZlcik7CiAgICAgIG1hcE9iai5tYXAub2ZmKCdjbGljaycsIHRoaXMuc2VsZWN0Rmxhd1BvaW50KTsKICAgIH0sCiAgICBnZXRSZXN0VGltZSh0aW1lKSB7CiAgICAgIHJldHVybiB0aW1lID8gbmV3IERhdGUodGltZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoKS5nZXRUaW1lKCkgOiAwOwogICAgfSwKICAgIGNoYW5nZVRvSW5zcENvdW50KHJlcG9ydFJhdGUpIHsKICAgICAgaWYgKHJlcG9ydFJhdGUuaW5jbHVkZXMoJy8nKSkgewogICAgICAgIHJldHVybiBOdW1iZXIocmVwb3J0UmF0ZS5zcGxpdCgnLycpWzBdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVRvQWxsSW5zcENvdW50KHJlcG9ydFJhdGUpIHsKICAgICAgaWYgKHJlcG9ydFJhdGUuaW5jbHVkZXMoJy8nKSkgewogICAgICAgIHJldHVybiBOdW1iZXIocmVwb3J0UmF0ZS5zcGxpdCgnLycpWzFdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVRvUmF0ZShjb3ZlcmFnZSkgewogICAgICBpZiAoY292ZXJhZ2UuaW5jbHVkZXMoJy8nKSkgewogICAgICAgIGxldCBpbnNwID0gTnVtYmVyKGNvdmVyYWdlLnNwbGl0KCcvJylbMF0pOwogICAgICAgIGxldCB1bmluc3AgPSBOdW1iZXIoY292ZXJhZ2Uuc3BsaXQoJy8nKVsxXSk7CiAgICAgICAgaWYgKHVuaW5zcCkgewogICAgICAgICAgcmV0dXJuIChpbnNwIC8gdW5pbnNwICogMTAwKS50b0ZpeGVkKDIpICsgJyUnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJzAlJzsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcwJSc7CiAgICAgIH0KICAgIH0sCiAgICBtYXBMb2FkZWQobWFwSW5zdGFuY2UpIHsKICAgICAgY29uc29sZS5sb2coJ21hcExvYWRlZGRkZGRkZGQnKTsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UgPSBtYXBJbnN0YW5jZTsKICAgICAgbWFwT2JqLm1hcCA9IG1hcEluc3RhbmNlLm1hcDsKICAgICAgLy8g5beh5qOA5qih5oufCiAgICAgIC8vIG1hcE9iai5tYXAub24oJ2NsaWNrJywgZSA9PiB7CiAgICAgIC8vICAgaWYgKHRoYXQudHJhY2tQb2ludExpc3QubGVuZ3RoID09IDApIHsKICAgICAgLy8gICAgIHRoYXQudHJhY2tQb2ludExpc3QucHVzaChbZS5sbmdMYXQubG5nLCBlLmxuZ0xhdC5sYXRdKQogICAgICAvLyAgIH0gZWxzZSB7CiAgICAgIC8vICAgICB0aGF0LmRyYXdJbnNwTGluZSh7IGxvbmdpdHVkZTogZS5sbmdMYXQubG5nLCBsYXRpdHVkZTogZS5sbmdMYXQubGF0LCBsb2NUaW1lOiB0aGF0LiRkYXlqcygpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpLCBsb2NUeXBlOiAnR1BTJyB9KQogICAgICAvLyAgIH0KICAgICAgLy8gfSkKICAgICAgbWFwT2JqLm1hcC5vbignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgdGhpcy5zaG93S2V5TGlzdCA9IGZhbHNlOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRNYXBJbWcoKTsKICAgICAgaWYgKHR5cGVvZiB5dWFuY2h1ICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgeXVhbmNodS5sb2NhdGlvbkFNYXAucmVxdWVzdFNpbmdsZUxvY2F0aW9uKFsnMSddLCByZXMgPT4gewogICAgICAgICAgdGhhdC5jdXJyZW50UG9zaXRpb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICAgIC4uLnRoYXQuY3VycmVudFBvc2l0aW9uCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy4kcmVmcy5teW1hcC5zZXRJbnNwVXNlclBvc2l0aW9uKHBhcmFtKTsKICAgICAgICB9LCBlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycj0nLCBlcnIpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIC8vIOW3oeajgOaooeaLnwogICAgICAvLyBtYXBPYmoubWFwLm9uKCdjbGljaycsIGUgPT4gewogICAgICAvLyAgIHRoYXQuY3VycmVudFBvc2l0aW9uID0gewogICAgICAvLyAgICAgbG9uZ2l0dWRlOiBlLmxuZ0xhdC5sbmcsCiAgICAgIC8vICAgICBsYXRpdHVkZTogZS5sbmdMYXQubGF0LAogICAgICAvLyAgICAgbG9jVGltZTogdGhhdC4kZGF5anMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKSwKICAgICAgLy8gICAgIGxvY1R5cGU6ICdHUFMnLAogICAgICAvLyAgIH0KICAgICAgLy8gICBjb25zdCBwYXJhbSA9IHsKICAgICAgLy8gICAgIC4uLnRoYXQuY3VycmVudFBvc2l0aW9uLAogICAgICAvLyAgIH0KICAgICAgLy8gICB0aGlzLiRyZWZzLm15bWFwLnNldEluc3BVc2VyUG9zaXRpb24ocGFyYW0pCiAgICAgIC8vICAgLy8gaWYgKHRoYXQudHJhY2tQb2ludExpc3QubGVuZ3RoID09IDApIHsKICAgICAgLy8gICAvLyAgIHRoYXQudHJhY2tQb2ludExpc3QucHVzaChbZS5sbmdMYXQubG5nLCBlLmxuZ0xhdC5sYXRdKQogICAgICAvLyAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgLy8gICB0aGF0LmRyYXdJbnNwTGluZSh7IGxvbmdpdHVkZTogZS5sbmdMYXQubG5nLCBsYXRpdHVkZTogZS5sbmdMYXQubGF0LCBsb2NUaW1lOiB0aGF0LiRkYXlqcygpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpLCBsb2NUeXBlOiAnR1BTJyB9KQogICAgICAvLyAgIC8vIH0KICAgICAgLy8gfSkKICAgIH0sCiAgICAvLyDliLfmlrDku7vliqEKICAgIHJlZnJlc2hUYXNrKCkgewogICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tJZDsKICAgICAgdGhpcy5nZXRUYXNrQnlJZChpZCwgJ3JlZnJlc2gnKTsKICAgIH0sCiAgICBhc3luYyBnZXRUcmFja1JlY29yZHNCeUlkKGlkKSB7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoewogICAgICAgIHVybDogJy94YXN3LXBpcGUtb3BlcmF0aW9uL2luc3BUYXNrL3RyYWNrJywKICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQsCiAgICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgICAgcGFnZVNpemU6IDk5OTkKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB9CiAgICB9LAogICAgLy8g5qC55o2u5Lu75YqhaWTojrflj5blt6Hmo4DnirblhrUKICAgIGFzeW5jIGdldFRhc2tCeUlkKGlkLCB0eXBlID0gbnVsbCkgewogICAgICBsZXQgdG9hc3QgPSBUb2FzdC5sb2FkaW5nKHsKICAgICAgICBtZXNzYWdlOiAn5Zyw5Zu+5Yqg6L295LitLi4uJywKICAgICAgICBsb2FkaW5nVHlwZTogJ3NwaW5uZXInLAogICAgICAgIGR1cmF0aW9uOiAwLAogICAgICAgIGZvcmJpZENsaWNrOiB0cnVlCiAgICAgIH0pOwogICAgICAvLyDlpITnkIblt7Llt6Hmo4DnrqHnur/nmoTmjqXlj6MKICAgICAgY29uc3QgcmVjb3JkTGluZXMgPSBhd2FpdCBhcGkucmVjb3JkZWRQaXBlTGluZSh7CiAgICAgICAgdGFza0lkOiBpZCwKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNpemU6IDk5OTkKICAgICAgfSk7CiAgICAgIHRoaXMubGluZXMgPSBbXTsKICAgICAgaWYgKHJlY29yZExpbmVzLnN0YXR1cykgewogICAgICAgIHRoaXMubGluZXMgPSByZWNvcmRMaW5lcy5kYXRhLnJlY29yZHMubWFwKGl0ZW0gPT4gaXRlbS5waXBlSWQpOwogICAgICB9CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoewogICAgICAgIHVybDogJy94YXN3LXBpcGUtb3BlcmF0aW9uL2luc3BUYXNrL2dldEJ5SWQnLAogICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpZCwKICAgICAgICAgIGJpelNjb3BlOiB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrVHlwZQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cykgewogICAgICAgIHRoaXMudGFza0RldGFpbCA9IHJlcy5kYXRhLmluc3BUYXNrOwogICAgICAgIHRoaXMucGxhbkRldGFpbCA9IHJlcy5kYXRhLmluc3BQbGFuOwogICAgICAgIHRoaXMuYnV0dG9uTGlzdCA9IFsn5YWo6YOoJ10uY29uY2F0KHRoaXMucGxhbkRldGFpbC5iaXpUeXBlLnNwbGl0KCcsJykpOwogICAgICAgIHRoaXMuaW5zcFJhbmdlTGlzdCA9IHJlcy5kYXRhLmRldGFpbExpc3QubWFwKHJhbmdlID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRhc2tJZDogaWQsCiAgICAgICAgICAgIC4uLnJhbmdlCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5sZWdlbmRDb25maWcgPSBbewogICAgICAgICAgICBsYWJlbDogJ+axoeawtCcsCiAgICAgICAgICAgIGNsaWNrRmxhZzogdGhpcy5wbGFuRGV0YWlsLmJpelR5cGUuaW5jbHVkZXMoJ+axoeawtCcpID8gdHJ1ZSA6IGZhbHNlCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGxhYmVsOiAn6Zuo5rC0JywKICAgICAgICAgICAgY2xpY2tGbGFnOiB0aGlzLnBsYW5EZXRhaWwuYml6VHlwZS5pbmNsdWRlcygn6Zuo5rC0JykgPyB0cnVlIDogZmFsc2UKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbGFiZWw6ICfkvpvmsLQnLAogICAgICAgICAgICBjbGlja0ZsYWc6IHRoaXMucGxhbkRldGFpbC5iaXpUeXBlLmluY2x1ZGVzKCfkvpvmsLQnKSA/IHRydWUgOiBmYWxzZQogICAgICAgICAgfSwgewogICAgICAgICAgICBsYWJlbDogJ+WGjeeUn+awtCcsCiAgICAgICAgICAgIGNsaWNrRmxhZzogdGhpcy5wbGFuRGV0YWlsLmJpelR5cGUuaW5jbHVkZXMoJ+WGjeeUn+awtCcpID8gdHJ1ZSA6IGZhbHNlCiAgICAgICAgICB9XTsKICAgICAgICB9LCA1MDAwKTsKICAgICAgICAvLyDkv67mlLnmnKrlt6Hmo4AoMCnku7vliqHnirbmgIHoh7Plt6Hmo4DkuK0oMSkKICAgICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuaXNOZXcgJiYgdGhpcy50YXNrRGV0YWlsLnRhc2tTdGF0dXMgIT0gMSkgewogICAgICAgICAgdGhpcy5zdGFydE9yRW5kVGFza1JlY29yZCgxKTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGUgIT0gJ3JlZnJlc2gnKSB7CiAgICAgICAgICBjb25zdCBhbGxUYXNrTGluZXMgPSBhd2FpdCBhcGkuZ2V0QWxsVGFza0xpbmVzKHsKICAgICAgICAgICAgZGV2VHlwZTogJ+euoee6vycsCiAgICAgICAgICAgIGdyaWRJZDogdGhpcy5wbGFuRGV0YWlsLmdyaWRJZCwKICAgICAgICAgICAgcGFnZU51bTogMSwKICAgICAgICAgICAgcGFnZVNpemU6IDk5OTk5OSwKICAgICAgICAgICAgYml6U2NvcGU6IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tUeXBlLAogICAgICAgICAgICBiaXpUeXBlOiB0aGlzLnBsYW5EZXRhaWwuYml6VHlwZQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoYWxsVGFza0xpbmVzLnN0YXR1cykgewogICAgICAgICAgICB0aGlzLmFsbFRhc2tMaW5lcyA9IFtdOwogICAgICAgICAgICBhbGxUYXNrTGluZXMuZGF0YS5saXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5hbGxUYXNrTGluZXMucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCiAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBKU09OLnBhcnNlKGl0ZW0uZ2VvbSksCiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgICAgICAgICBsZW5ndGg6IGl0ZW1bJ2xlbmd0aCddLAogICAgICAgICAgICAgICAgICBiaXpUeXBlOiBpdGVtLmJpelR5cGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuJHJlZnMubXltYXAuc2V0QWxsSW5zcExpbmVTb3VyY2UodGhpcy5hbGxUYXNrTGluZXMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb25zdCBrcFJlcyA9IGF3YWl0IHJlcXVlc3QoewogICAgICAgICAgdXJsOiAnL3hhc3ctcGlwZS1vcGVyYXRpb24vaW5zcFRhc2svcG9pbnQnLAogICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBpZCwKICAgICAgICAgICAgZ3JpZElkOiB0aGlzLnBsYW5EZXRhaWwuZ3JpZElkLAogICAgICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgICAgICBwYWdlU2l6ZTogOTk5OSwKICAgICAgICAgICAgYml6U2NvcGU6IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tUeXBlLAogICAgICAgICAgICBiaXpUeXBlOiB0aGlzLnBsYW5EZXRhaWwuYml6VHlwZQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMua2V5RGV0YWlsTGlzdCA9IFtdOwogICAgICAgIGlmIChrcFJlcyAmJiBrcFJlcy5zdGF0dXMpIHsKICAgICAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMoa3BSZXMuZGF0YSk7CiAgICAgICAgICBrZXlzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIHRoaXMua2V5RGV0YWlsTGlzdC5wdXNoKC4uLmtwUmVzLmRhdGFbaXRlbV0ubGlzdCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMudW5JbnNwS2V5RGV0YWlsTGlzdCA9IHRoaXMua2V5RGV0YWlsTGlzdC5maWx0ZXIoaXQgPT4gIWl0LmRldmljZVN0YXR1cyk7CiAgICAgICAgfQogICAgICAgIGxldCBjb21wbGV0aW9uID0gdGhpcy5jaGFuZ2VUb1JhdGUodGhpcy50YXNrRGV0YWlsLmNvdmVyYWdlKTsKICAgICAgICB0aGlzLm5hdmJhclRpdGxlID0gdGhpcy50YXNrRGV0YWlsLnRhc2tOYW1lOwogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gMzBz5ZCO5Y+W5raICiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICB9LCAzMDAwMCk7CiAgICAgICAgICAgIGlmICh0aGF0LiRyZWZzLm15bWFwICYmIHRoYXQuJHJlZnMubXltYXAuaXNPbkxvYWRlZCgpKSB7CiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgICAgdGhhdC4kcmVmcy5teW1hcC5hZGRLZXlQb2ludHModGhhdC5rZXlEZXRhaWxMaXN0KTsKICAgICAgICAgICAgICBpZiAodHlwZSAhPSAncmVmcmVzaCcpIHsKICAgICAgICAgICAgICAgIHRoYXQuJHJlZnMubXltYXAuYWRkUmFuZ2VMaXN0KHRoYXQuaW5zcFJhbmdlTGlzdCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgIGV4dFBhcmFtOiB7CiAgICAgICAgICAgICAgICAgIHRhc2tfaWQ6IHRoYXQuJHJvdXRlLnF1ZXJ5LnRhc2tJZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgLy8g6Zeu6aKY5LiK5oql44CB6K6+5pa957y66Zm35o6l5Y+jCiAgICAgICAgICAgICAgdGhhdC5nZXRQcm9ibGVtRGF0YUxpc3QocGFyYW1zKTsKICAgICAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLmFkZEluc3BSZWNvcmRUaWxlTGluZVNvdXJjZSh0aGF0LmxpbmVzLCBjb21wbGV0aW9uKTsKICAgICAgICAgICAgICB0b2FzdC5jbGVhcigpOwogICAgICAgICAgICAgIGlmICghdGhhdC5jdXJyZW50UG9zaXRpb24pIHJldHVybjsKICAgICAgICAgICAgICBjb25zdCBwYXJhbSA9IHsKICAgICAgICAgICAgICAgIC4uLnRoYXQuY3VycmVudFBvc2l0aW9uCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLnNldEluc3BVc2VyUG9zaXRpb24ocGFyYW0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBUb2FzdCh7CiAgICAgICAgICBtZXNzYWdlOiAn572R57uc54q25oCB6L6D5beu77yM5Yqg6L295Lu75Yqh5aSx6LSlJywKICAgICAgICAgIGljb246ICd3YXJuJywKICAgICAgICAgIGR1cmF0aW9uOiAzMDAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBwYXVzZSgpIHsKICAgICAgY29uc29sZS5sb2coJ+i/m+WFpeWQjuWPsCcpOwogICAgICBpZiAodGhpcy5pZlJlY29yZGluZyAmJiB0aGlzLmlzUmVzdW1lKSB7CiAgICAgICAgdGhpcy5pc1Jlc3VtZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgcmVzdW1lKCkgewogICAgICBjb25zb2xlLmxvZygn6L+b5YWl5YmN5Y+wJyk7CiAgICAgIGlmICh0aGlzLmlmUmVjb3JkaW5nKSB7CiAgICAgICAgdGhpcy5pc1Jlc3VtZSA9IHRydWU7CiAgICAgICAgcGF1c2VTdGF0ZVRyYWNrUG9pbnRzLmxlbmd0aCA+IDAgJiYgdGhpcy51cExvYWRQYXVzZVN0YXRlVHJhY2tQb2ludHModGhpcy5kZWVwQ2xvbmUocGF1c2VTdGF0ZVRyYWNrUG9pbnRzKSk7CiAgICAgICAgcGF1c2VTdGF0ZVBpcGVJZExpc3QubGVuZ3RoID4gMCAmJiB0aGlzLnVwTG9hZFBhdXNlU3RhdGVQaXBlSWRMaXN0KHRoaXMuZGVlcENsb25lKHBhdXNlU3RhdGVQaXBlSWRMaXN0KSk7CiAgICAgIH0KICAgIH0sCiAgICB1cExvYWRQYXVzZVN0YXRlUGlwZUlkTGlzdChkYXRhKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgYXBpLnJlY29yZEluc3BMaW5lKGRhdGEpLnRoZW4oYXN5bmMgcmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgY29uc29sZS5sb2coJ+WQjuWPsOW3oeajgOeuoee6v+ihpeWFheaVsOaNruS4iuS8oOaIkOWKnycpOwogICAgICAgICAgcGF1c2VTdGF0ZVBpcGVJZExpc3Quc3BsaWNlKDAsIGRhdGEubGVuZ3RoKTsgLy8g56e76Zmk5LiK5Lyg5oiQ5Yqf55qE5pWw5o2u44CC6YG/5YWN6YeN5aSN5LiK5LygCiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KHsKICAgICAgICAgICAgdXJsOiAnL3hhc3ctcGlwZS1vcGVyYXRpb24vaW5zcFRhc2svZ2V0QnlJZCcsCiAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIGlkOiB0aGF0LiRyb3V0ZS5xdWVyeS50YXNrSWQsCiAgICAgICAgICAgICAgYml6U2NvcGU6IHRoYXQuJHJvdXRlLnF1ZXJ5LnRhc2tUeXBlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgICAgdGhhdC50YXNrRGV0YWlsID0gcmVzLmRhdGEuaW5zcFRhc2s7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoYXQuJHJlZnMubXltYXAudXBsb2FkRmlsZWRQaXBlSWRMaXN0LnB1c2goLi4uZGF0YSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy51cExvYWRQYXVzZVN0YXRlUGlwZUlkTGlzdChkYXRhKTsKICAgICAgICB9LCA1ICogMTAwMCk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwTG9hZFBhdXNlU3RhdGVUcmFja1BvaW50cyhkYXRhKSB7CiAgICAgIGFwaS5pbnNwZWN0aW9uVHJhY2soZGF0YSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cykgewogICAgICAgICAgY29uc29sZS5sb2coJ+WQjuWPsOW3oeajgOi9qOi/ueihpeWFheeCueS9jeS4iuS8oOaIkOWKnycpOwogICAgICAgICAgcGF1c2VTdGF0ZVRyYWNrUG9pbnRzLnNwbGljZSgwLCBkYXRhLmxlbmd0aCk7IC8vIOenu+mZpOS4iuS8oOaIkOWKn+eahOeCueS9jeOAgumBv+WFjemHjeWkjeS4iuS8oAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5ZCO5Y+w5beh5qOA6L2o6L+56KGl5YWF54K55L2N5LiK5Lyg5byC5bi4Jyk7CiAgICAgICAgICB0aGlzLnJlcG9ydEZhaWxUcmFja1BvaW50cy5wdXNoKC4uLmRhdGEpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMudXBMb2FkUGF1c2VTdGF0ZVRyYWNrUG9pbnRzKGRhdGEpOwogICAgICAgIH0sIDUgKiAxMDAwKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6L2u6K+iIGN1cnJlbnRQb3NpdGlvbu+8jOe7mOWItui9qOi/uee6vwogICAgcG9sbGluZygpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBpZiAodGhhdC5wb2xsaW5nRmxhZykgewogICAgICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgeXVhbmNodS5sb2NhdGlvbkFNYXAucmVxdWVzdExvY2F0aW9ucyhbdGhhdC4kcm91dGUucXVlcnkudGFza1R5cGUgPT0gJ+S6uuW3oScgPyAnNCcgOiAnMicsICcxJywgJzIwJywgJzEwMCcsICcwJywgdHJ1ZV0sIHJlcyA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIHRoYXQuZHJhd0luc3BMaW5lKHJlcyk7CiAgICAgICAgICB9LCBlcnIgPT4gewogICAgICAgICAgICAvLyBUb2FzdC5lcnJvcih7CiAgICAgICAgICAgIC8vICAgbWVzc2FnZTogJ2VycicgKyBlcnIsCiAgICAgICAgICAgIC8vICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkcmF3SW5zcExpbmUocG9zaXRpb24pIHsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuY3VycmVudFBvc2l0aW9uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwb3NpdGlvbikpOwogICAgICB0aGF0LmN1cnJlbnRQb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24odGhhdC5jdXJyZW50UG9zaXRpb24sIHsKICAgICAgICBkaXJlY3Rpb246IDAKICAgICAgfSk7CiAgICAgIGlmICh0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb2NUeXBlICE9ICdTQU1FX1JFUScgJiYgdGhhdC5jdXJyZW50UG9zaXRpb24ubG9jVHlwZSAhPSAnRklYX0NBQ0hFJykgewogICAgICAgIC8vIOi/h+a7pOe8k+WtmOWumuS9jeaVsOaNrgogICAgICAgIGxldCBsYXN0UG9pbnQgPSB0aGF0LnRyYWNrUG9pbnRMaXN0W3RoYXQudHJhY2tQb2ludExpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgbGV0IGRpc3RhbmNlID0gdGhhdC5HZXREaXN0YW5jZShsYXN0UG9pbnQsIFt0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUsIHRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlXSkgKiAxMDAwOwogICAgICAgIC8vIOiusOW9lei/h+eoi+eCuQogICAgICAgIHRoYXQucG9zdFRyYWNrRGF0YV9Qb2ludCh0aGF0LnRyYWNrUG9pbnRMaXN0W3RoYXQudHJhY2tQb2ludExpc3QubGVuZ3RoIC0gMV0sIHRoYXQudHJhY2tQb2ludFRpbWVMaXN0W3RoYXQudHJhY2tQb2ludFRpbWVMaXN0Lmxlbmd0aCAtIDFdLCBkaXN0YW5jZSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAvLyDmlLnlj5jlt6Hmo4Dovajov7nnvJPlhrLljLrojIPlm7TlhoXnmoTnrqHnur/popzoibIKICAgICAgICAgICAgbGV0IGdlb20gPSB7CiAgICAgICAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLAogICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbW2xhc3RQb2ludFswXSwgbGFzdFBvaW50WzFdXSwgW3RoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSwgdGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGVdXQogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICB0aGF0LmNoYW5nZUluc3BMaW5lU291cmNlQnlTcGVlZChnZW9tLCByZXNvbHZlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHByb21pc2UudGhlbihyID0+IHsKICAgICAgICAgICAgICBpZiAocikgewogICAgICAgICAgICAgICAgdGhhdC50cmFja1BvaW50TGlzdC5wdXNoKFt0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUsIHRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlXSk7CiAgICAgICAgICAgICAgICB0aGF0LnRyYWNrUG9pbnRUaW1lTGlzdC5wdXNoKHRoYXQuY3VycmVudFBvc2l0aW9uLmxvY1RpbWUpOwogICAgICAgICAgICAgICAgLy8g5p6E6YCg5Li05pe257q/5a+56LGhCiAgICAgICAgICAgICAgICBsZXQganNvbkxpbmUgPSB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge30sCiAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLAogICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiB0aGF0LnRyYWNrUG9pbnRMaXN0CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjb25zdCBjb29yZCA9IFtwYXJzZUZsb2F0KHRoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSksIHBhcnNlRmxvYXQodGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGUpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gdHVyZi5wb2ludChjb29yZCk7CiAgICAgICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgiaW5zcFVzZXIiLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICAgICAgICAgIGZlYXR1cmVzOiBbcG9pbnRdCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxldCBqc29uTGluZUZlYXR1cmVDb2xsZWN0aW9uID0gewogICAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgICAgICAgICBmZWF0dXJlczogW2pzb25MaW5lXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmIChtYXBPYmoubWFwLmdldFNvdXJjZSgndHJhY2tMaW5lU291cmNlX25vdycpKSB7CiAgICAgICAgICAgICAgICAgIG1hcE9iai5tYXAuZ2V0U291cmNlKCd0cmFja0xpbmVTb3VyY2Vfbm93Jykuc2V0RGF0YShqc29uTGluZUZlYXR1cmVDb2xsZWN0aW9uKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIG1hcE9iai5tYXAuYWRkU291cmNlKCd0cmFja0xpbmVTb3VyY2Vfbm93JywgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdnZW9qc29uJywKICAgICAgICAgICAgICAgICAgICBkYXRhOiBqc29uTGluZUZlYXR1cmVDb2xsZWN0aW9uCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoJ3RyYWNrTGluZUxheWVyX25vdycpKSB7fSBlbHNlIHsKICAgICAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAgICAgICAgICAgaWQ6ICd0cmFja0xpbmVMYXllcl9ub3cnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICd0cmFja0xpbmVTb3VyY2Vfbm93JywKICAgICAgICAgICAgICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICdsaW5lLWNhcCc6ICdyb3VuZCcsCiAgICAgICAgICAgICAgICAgICAgICAnbGluZS1qb2luJzogJ3JvdW5kJywKICAgICAgICAgICAgICAgICAgICAgICdsaW5lLXNvcnQta2V5JzogMSwKICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJwogICAgICAgICAgICAgICAgICAgICAgLy8gdmlzaWJpbGl0eTogIm5vbmUiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwYWludDogewogICAgICAgICAgICAgICAgICAgICAgJ2xpbmUtY29sb3InOiAnI2FkZGQ1MicsCiAgICAgICAgICAgICAgICAgICAgICAnbGluZS13aWR0aCc6IDUsCiAgICAgICAgICAgICAgICAgICAgICAnbGluZS1vcGFjaXR5JzogMC44CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCAnaW5zcFVzZXJMYXllcicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoJ3RyYWNrTGluZUxheWVyX2Fycm93JykpIHt9IGVsc2UgewogICAgICAgICAgICAgICAgICBtYXBPYmoubWFwLmFkZExheWVyKHsKICAgICAgICAgICAgICAgICAgICBpZDogJ3RyYWNrTGluZUxheWVyX2Fycm93JywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3ltYm9sJywKICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICd0cmFja0xpbmVTb3VyY2Vfbm93JywKICAgICAgICAgICAgICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICdzeW1ib2wtcGxhY2VtZW50JzogJ2xpbmUnLAogICAgICAgICAgICAgICAgICAgICAgJ3N5bWJvbC1zcGFjaW5nJzogMjAsCiAgICAgICAgICAgICAgICAgICAgICAnaWNvbi1pbWFnZSc6ICdhcnJvd0ljb24nLAogICAgICAgICAgICAgICAgICAgICAgJ2ljb24tc2l6ZSc6IDAuNSwKICAgICAgICAgICAgICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgJ3N5bWJvbC1zb3J0LWtleSc6IDMsCiAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZScKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sICdpbnNwVXNlckxheWVyJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOagueaNrumAn+W6puaUueWPmOW3oeajgOeuoee6v+minOiJsgogICAgY2hhbmdlSW5zcExpbmVTb3VyY2VCeVNwZWVkKHBvc2l0aW9uLCByZXNvbHZlKSB7CiAgICAgIC8vIGNvbnN0IGNvb3JkID0gW3BhcnNlRmxvYXQocG9zaXRpb24ubG9uZ2l0dWRlKSwgcGFyc2VGbG9hdChwb3NpdGlvbi5sYXRpdHVkZSldOwogICAgICAvLyBjb25zdCBwb2ludCA9IHR1cmYucG9pbnQoY29vcmQpOwogICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgdHJ5IHsKICAgICAgICAvLyDmlLnlj5jlkajlm7TopoHntKDnmoTnirbmgIEKICAgICAgICBsZXQgYnVmZmVyZWQgPSB0dXJmLmJ1ZmZlcihwb3NpdGlvbiwgdGhhdC4kcm91dGUucXVlcnkudGFza1R5cGUgPT0gJ+S6uuW3oScgPyAwLjAyNSA6IDAuMDQ1LCB7CiAgICAgICAgICB1bml0OiAna2lsb21ldGVycycKICAgICAgICB9KTsKICAgICAgICB0aGF0LmNoYW5nZUluc3BMaW5lU3RhdGUoYnVmZmVyZWQsIHJlc29sdmUpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDorr7nva7lt6Hmo4DnrqHnur/kuLrlt7Llt6Hmo4AKICAgIGNoYW5nZUluc3BMaW5lU3RhdGUoZ2VvbWV0cnksIHJlc29sdmUpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAvLyDlsIblnLDnkIblnZDmoIfns7vovazljJbkuLrlsY/luZXlnZDmoIfns7sKICAgICAgZnVuY3Rpb24gZ2VvVHJhbnNUb1BpeGVsKGdlb20pIHsKICAgICAgICBjb25zdCBwb2x5Z29uQm94ID0gdHVyZi5iYm94KGdlb20pOwogICAgICAgIGNvbnN0IHNvdXRoV2VzdCA9IFtwb2x5Z29uQm94WzBdLCBwb2x5Z29uQm94WzFdXTsKICAgICAgICBjb25zdCBub3J0aEVhc3QgPSBbcG9seWdvbkJveFsyXSwgcG9seWdvbkJveFszXV07CiAgICAgICAgbGV0IHNvdXRoV2VzdFBvaW50UGl4ZWwgPSBtYXBPYmoubWFwLnByb2plY3Qoc291dGhXZXN0KTsKICAgICAgICBsZXQgbm9ydGhFYXN0UG9pbnRQaXhlbCA9IG1hcE9iai5tYXAucHJvamVjdChub3J0aEVhc3QpOwogICAgICAgIC8vIOWinuWkp2Jib3jnmoTmn6Xor6LojIPlm7QKICAgICAgICBzb3V0aFdlc3RQb2ludFBpeGVsID0gW3NvdXRoV2VzdFBvaW50UGl4ZWwueCAtIDUwLCBzb3V0aFdlc3RQb2ludFBpeGVsLnkgKyA1MF07CiAgICAgICAgbm9ydGhFYXN0UG9pbnRQaXhlbCA9IFtub3J0aEVhc3RQb2ludFBpeGVsLnggKyA1MCwgbm9ydGhFYXN0UG9pbnRQaXhlbC55IC0gNTBdOwogICAgICAgIHJldHVybiBbc291dGhXZXN0UG9pbnRQaXhlbCwgbm9ydGhFYXN0UG9pbnRQaXhlbF07CiAgICAgIH0KICAgICAgLy8g5a+55q+P5Liq5YiS5YiG5Ye65p2l55qEYmJveOi/m+ihjOWkhOeQhgogICAgICBmdW5jdGlvbiBjaHVuayhnZW9tLCByZXNvbHZlKSB7CiAgICAgICAgY29uc3QgYm94RmVhdHVyZXMgPSBtYXBPYmoubWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhnZW9UcmFuc1RvUGl4ZWwoZ2VvbSksIHsKICAgICAgICAgIGxheWVyczogWyJpbml0SW5zcExpbmVMYXllciJdCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coYm94RmVhdHVyZXMsICdib3hGZWF0dXJlcycpOwogICAgICAgIGxldCB0ZW1wUGlwZUxpc3QgPSBbXTsKICAgICAgICBib3hGZWF0dXJlcy5mb3JFYWNoKGZlYXQgPT4gewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdHVyZi5ib29sZWFuRGlzam9pbnQoZmVhdC5nZW9tZXRyeSwgZ2VvbWV0cnkpOwogICAgICAgICAgICAvLyDlpoLmnpzmn6Xlh7rnmoTopoHntKDkuI7nnJ/lrp7nmoTojIPlm7Tnm7jkuqTkuJTmsqHmnInooqvlt6Hmo4Dov4fvvIzliJnmlLnlj5jlhbbnirbmgIEs5bm26K6w5b2V5YW25YWz6ZSu5a2XCiAgICAgICAgICAgIGlmICghcmVzdWx0ICYmICFmZWF0LnN0YXRlLmlzSW5zcCkgewogICAgICAgICAgICAgIG1hcE9iai5tYXAuc2V0RmVhdHVyZVN0YXRlKHsKICAgICAgICAgICAgICAgIHNvdXJjZTogZmVhdC5zb3VyY2UsCiAgICAgICAgICAgICAgICBpZDogZmVhdC5pZAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGlzSW5zcDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmICghdGVtcFBpcGVMaXN0Lm1hcChpdCA9PiBpdC5waXBlSWQpLmluY2x1ZGVzKGZlYXQuaWQpKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZSA9IHRoYXQuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7CiAgICAgICAgICAgICAgICB0ZW1wUGlwZUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgIGluc3BEYXRlOiBkYXRlLAogICAgICAgICAgICAgICAgICBwaXBlSWQ6IGZlYXQuaWQsCiAgICAgICAgICAgICAgICAgIGV4dDM6IGZlYXQucHJvcGVydGllcy5iaXpUeXBlLAogICAgICAgICAgICAgICAgICBwaXBlTGVuZ3RoOiBmZWF0LnByb3BlcnRpZXNbJ2xlbmd0aCddIHx8IDAsCiAgICAgICAgICAgICAgICAgIHRhc2tJZDogdGhhdC4kcm91dGUucXVlcnkudGFza0lkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAodGhhdC5pc1Jlc3VtZSkgewogICAgICAgICAgdGVtcFBpcGVMaXN0Lmxlbmd0aCA+IDAgJiYgYXBpLnJlY29yZEluc3BMaW5lKHRlbXBQaXBlTGlzdCkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoewogICAgICAgICAgICAgICAgdXJsOiAnL3hhc3ctcGlwZS1vcGVyYXRpb24vaW5zcFRhc2svZ2V0QnlJZCcsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIGlkOiB0aGF0LiRyb3V0ZS5xdWVyeS50YXNrSWQsCiAgICAgICAgICAgICAgICAgIGJpelNjb3BlOiB0aGF0LiRyb3V0ZS5xdWVyeS50YXNrVHlwZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICB0aGF0LnRhc2tEZXRhaWwgPSByZXMuZGF0YS5pbnNwVGFzazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOWksei0peeahHRlbXBQaXBlTGlzdDogJywgdGVtcFBpcGVMaXN0KTsKICAgICAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLnVwbG9hZEZpbGVkUGlwZUlkTGlzdC5wdXNoKC4uLnRlbXBQaXBlTGlzdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZW1wUGlwZUxpc3QubGVuZ3RoID4gMCAmJiBwYXVzZVN0YXRlUGlwZUlkTGlzdC5wdXNoKC4uLnRlbXBQaXBlTGlzdCk7CiAgICAgICAgfQogICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgIH0KICAgICAgLy8gZnVuY3Rpb24gY2IoZmVhdHVyZXMpIHsKICAgICAgLy8gICBpZiAoZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAvLyAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIC8vICAgICAgIGNodW5rKGZlYXR1cmVzLnNoaWZ0KCkpOwogICAgICAvLyAgICAgICBjYihmZWF0dXJlcyk7CiAgICAgIC8vICAgICB9LCAxMDApOwogICAgICAvLyAgIH0KICAgICAgLy8gfQogICAgICBjaHVuayhnZW9tZXRyeSwgcmVzb2x2ZSk7CiAgICAgIC8vIGNiKFtnZW9tZXRyeV0pOwogICAgfSwKICAgIC8vIOe7mOWItui1t+Wni+eCuQogICAgZHJhd1N0YXJ0UG9pbnQoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAodHlwZW9mIHl1YW5jaHUgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHl1YW5jaHUubG9jYXRpb25BTWFwLnJlcXVlc3RTaW5nbGVMb2NhdGlvbihbJzEnXSwgcmVzID0+IHsKICAgICAgICAgICAgdGhhdC5jdXJyZW50UG9zaXRpb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgICBjb25zdCBwYXJhbSA9IHsKICAgICAgICAgICAgICAuLi50aGF0LmN1cnJlbnRQb3NpdGlvbgogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLnNldEluc3BVc2VyUG9zaXRpb24ocGFyYW0pOwogICAgICAgICAgICBpZiAodGhhdC5jdXJyZW50UG9zaXRpb24gIT0gbnVsbCkgewogICAgICAgICAgICAgIGxldCByZWNvcmREYXRhID0gW107CiAgICAgICAgICAgICAgcmVjb3JkRGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgIHRhc2tJZDogdGhhdC50YXNrRGV0YWlsLmlkLAogICAgICAgICAgICAgICAgLy8g5Lu75YqhaWQKICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdGhhdC5jdXJyZW50UG9zaXRpb24ubG9uZ2l0dWRlLAogICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlLAogICAgICAgICAgICAgICAgaW5zcFRpbWU6IHRoYXQuY3VycmVudFBvc2l0aW9uLmxvY1RpbWUsCiAgICAgICAgICAgICAgICBkaXN0YW5jZTogMCwKICAgICAgICAgICAgICAgIC8vIOesrOS4gOS4queCuei3neemu+S4ujAKICAgICAgICAgICAgICAgIGluc3BEYXRlOiB0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb2NUaW1lLAogICAgICAgICAgICAgICAgaW5zcGVjdG9yOiB0aGF0LnVzZXJJbmZvLnVzZXJGdWxsTmFtZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGFwaS5pbnNwZWN0aW9uVHJhY2socmVjb3JkRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgIC8vIOS9v+eUqOS4iuaKpeeCueS9jeS9nOS4uui1t+eCuQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6LW35aeL54K55a2Y5YKo5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgIHRoYXQudHJhY2tQb2ludExpc3QucHVzaChbdGhhdC5jdXJyZW50UG9zaXRpb24ubG9uZ2l0dWRlLCB0aGF0LmN1cnJlbnRQb3NpdGlvbi5sYXRpdHVkZV0pOwogICAgICAgICAgICAgICAgICB0aGF0LnRyYWNrUG9pbnRUaW1lTGlzdC5wdXNoKHRoYXQuY3VycmVudFBvc2l0aW9uLmxvY1RpbWUpOwogICAgICAgICAgICAgICAgICBsZXQganNvblBvaW50ID0gewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSwKICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BvaW50JywKICAgICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbdGhhdC5jdXJyZW50UG9zaXRpb24ubG9uZ2l0dWRlLCB0aGF0LmN1cnJlbnRQb3NpdGlvbi5sYXRpdHVkZV0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGxldCBqc29uUG9pbnRGZWF0dXJlQ29sbGVjdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzOiBbanNvblBvaW50XQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBpZiAobWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3N0YXJ0UG9pbnRTb3VyY2Vfbm93JykpIHsKICAgICAgICAgICAgICAgICAgICBtYXBPYmoubWFwLmdldFNvdXJjZSgnc3RhcnRQb2ludFNvdXJjZV9ub3cnKS5zZXREYXRhKGpzb25Qb2ludEZlYXR1cmVDb2xsZWN0aW9uKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtYXBPYmoubWFwLmFkZFNvdXJjZSgnc3RhcnRQb2ludFNvdXJjZV9ub3cnLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBqc29uUG9pbnRGZWF0dXJlQ29sbGVjdGlvbgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChtYXBPYmoubWFwLmdldExheWVyKCdzdGFydFBvaW50TGF5ZXJfbm93JykpIHt9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG1hcE9iai5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgICAgICAgICAgICAgaWQ6ICdzdGFydFBvaW50TGF5ZXJfbm93JywKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaXJjbGUnLAogICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnc3RhcnRQb2ludFNvdXJjZV9ub3cnLAogICAgICAgICAgICAgICAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdjaXJjbGUtc29ydC1rZXknOiA1LAogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZScKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmlzaWJpbGl0eTogIm5vbmUiCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NpcmNsZS1yYWRpdXMnOiAzLAogICAgICAgICAgICAgICAgICAgICAgICAnY2lyY2xlLXN0cm9rZS13aWR0aCc6IDUsCiAgICAgICAgICAgICAgICAgICAgICAgICdjaXJjbGUtc3Ryb2tlLWNvbG9yJzogJyMyQTgzRTYnLAogICAgICAgICAgICAgICAgICAgICAgICAnY2lyY2xlLWNvbG9yJzogJ3doaXRlJwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sICdpbnNwVXNlckxheWVyJyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgLy8gbGFiZWwKICAgICAgICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoJ3N0YXJ0UG9pbnRfbGFiZWwnKSkge30gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAgICAgICAgICAgICBpZDogJ3N0YXJ0UG9pbnRfbGFiZWwnLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N5bWJvbCcsCiAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICdzdGFydFBvaW50U291cmNlX25vdycsCiAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ3N5bWJvbC1wbGFjZW1lbnQnOiAncG9pbnQnLAogICAgICAgICAgICAgICAgICAgICAgICAnaWNvbi1pbWFnZSc6ICdzdGFydF9wb2ludCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdpY29uLXNpemUnOiAwLjYsCiAgICAgICAgICAgICAgICAgICAgICAgICdpY29uLW9mZnNldCc6IFswLCAtMzVdLAogICAgICAgICAgICAgICAgICAgICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3N5bWJvbC1zb3J0LWtleSc6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJwogICAgICAgICAgICAgICAgICAgICAgICAvLyB2aXNpYmlsaXR5OiAibm9uZSIKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBlcnIgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyPScsIGVycik7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOe7mOWItue7iOatoueCuQogICAgYXN5bmMgZHJhd0VuZFBvaW50KHR5cGUpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBpZiAodGhhdC5jdXJyZW50UG9zaXRpb24gIT0gbnVsbCkgewogICAgICAgIGxldCBsYXN0UG9pbnQgPSB0aGF0LnRyYWNrUG9pbnRMaXN0W3RoYXQudHJhY2tQb2ludExpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgbGV0IGRpc3RhbmNlID0gdGhhdC5HZXREaXN0YW5jZShsYXN0UG9pbnQsIFt0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUsIHRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlXSkgKiAxMDAwOwogICAgICAgIGxldCB0b2FzdCA9IFRvYXN0LmxvYWRpbmcoewogICAgICAgICAgbWVzc2FnZTogJ+eoi+W6j+WFs+mXreS4rScsCiAgICAgICAgICBsb2FkaW5nVHlwZTogJ3NwaW5uZXInLAogICAgICAgICAgZHVyYXRpb246IDAsCiAgICAgICAgICBmb3JiaWRDbGljazogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIC8vIOiusOW9lee7iOatoueCuQogICAgICAgIHRoYXQucG9zdFRyYWNrRGF0YV9Qb2ludCh0aGF0LnRyYWNrUG9pbnRMaXN0W3RoYXQudHJhY2tQb2ludExpc3QubGVuZ3RoIC0gMV0sIHRoYXQudHJhY2tQb2ludFRpbWVMaXN0W3RoYXQudHJhY2tQb2ludFRpbWVMaXN0Lmxlbmd0aCAtIDFdLCBkaXN0YW5jZSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICB0b2FzdC5jbG9zZSgpOwogICAgICAgICAgICBUb2FzdC5pbmZvKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn5pqC5YGc5oiQ5YqfJywKICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKHR5cGVvZiB5dWFuY2h1ICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgeXVhbmNodS5sb2NhdGlvbkFNYXAuc3RvcFJlcXVlc3RMb2NhdGlvbnMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGF0LnRyYWNrUG9pbnRMaXN0LnB1c2goW3RoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSwgdGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGVdKTsKICAgICAgICAgICAgdGhhdC50cmFja1BvaW50VGltZUxpc3QucHVzaCh0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb2NUaW1lKTsKICAgICAgICAgICAgbGV0IGpzb25Qb2ludCA9IHsKICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCiAgICAgICAgICAgICAgcHJvcGVydGllczoge30sCiAgICAgICAgICAgICAgZ2VvbWV0cnk6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCiAgICAgICAgICAgICAgICBjb29yZGluYXRlczogW3RoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSwgdGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGVdCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQganNvblBvaW50RmVhdHVyZUNvbGxlY3Rpb24gPSB7CiAgICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgICAgICBmZWF0dXJlczogW2pzb25Qb2ludF0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCdlbmRQb2ludFNvdXJjZV9ub3cnKSkgewogICAgICAgICAgICAgIG1hcE9iai5tYXAuZ2V0U291cmNlKCdlbmRQb2ludFNvdXJjZV9ub3cnKS5zZXREYXRhKGpzb25Qb2ludEZlYXR1cmVDb2xsZWN0aW9uKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtYXBPYmoubWFwLmFkZFNvdXJjZSgnZW5kUG9pbnRTb3VyY2Vfbm93JywgewogICAgICAgICAgICAgICAgdHlwZTogJ2dlb2pzb24nLAogICAgICAgICAgICAgICAgZGF0YToganNvblBvaW50RmVhdHVyZUNvbGxlY3Rpb24KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobWFwT2JqLm1hcC5nZXRMYXllcignZW5kUG9pbnRMYXllcl9ub3cnKSkge30gZWxzZSB7CiAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAgICAgICBpZDogJ2VuZFBvaW50TGF5ZXJfbm93JywKICAgICAgICAgICAgICAgIHR5cGU6ICdjaXJjbGUnLAogICAgICAgICAgICAgICAgc291cmNlOiAnZW5kUG9pbnRTb3VyY2Vfbm93JywKICAgICAgICAgICAgICAgIGxheW91dDogewogICAgICAgICAgICAgICAgICAnY2lyY2xlLXNvcnQta2V5JzogNSwKICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnCiAgICAgICAgICAgICAgICAgIC8vIHZpc2liaWxpdHk6ICJub25lIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICAgICAgICdjaXJjbGUtcmFkaXVzJzogMywKICAgICAgICAgICAgICAgICAgJ2NpcmNsZS1zdHJva2Utd2lkdGgnOiA1LAogICAgICAgICAgICAgICAgICAnY2lyY2xlLXN0cm9rZS1jb2xvcic6ICcjYWRkZDUyJywKICAgICAgICAgICAgICAgICAgJ2NpcmNsZS1jb2xvcic6ICd3aGl0ZScKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCAnaW5zcFVzZXJMYXllcicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDooaXlhYV0cmFja2xpbmUKICAgICAgICAgICAgbGV0IGpzb25MaW5lID0gewogICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSwKICAgICAgICAgICAgICBnZW9tZXRyeTogewogICAgICAgICAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLAogICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHRoYXQudHJhY2tQb2ludExpc3QKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGxldCBqc29uTGluZUZlYXR1cmVDb2xsZWN0aW9uID0gewogICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAgICAgZmVhdHVyZXM6IFtqc29uTGluZV0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCd0cmFja0xpbmVTb3VyY2Vfbm93JykpIHsKICAgICAgICAgICAgICBtYXBPYmoubWFwLmdldFNvdXJjZSgndHJhY2tMaW5lU291cmNlX25vdycpLnNldERhdGEoanNvbkxpbmVGZWF0dXJlQ29sbGVjdGlvbik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRTb3VyY2UoJ3RyYWNrTGluZVNvdXJjZV9ub3cnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsCiAgICAgICAgICAgICAgICBkYXRhOiBqc29uTGluZUZlYXR1cmVDb2xsZWN0aW9uCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoJ3RyYWNrTGluZUxheWVyX25vdycpKSB7fSBlbHNlIHsKICAgICAgICAgICAgICBtYXBPYmoubWFwLmFkZExheWVyKHsKICAgICAgICAgICAgICAgIGlkOiAndHJhY2tMaW5lTGF5ZXJfbm93JywKICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICAgIHNvdXJjZTogJ3RyYWNrTGluZVNvdXJjZV9ub3cnLAogICAgICAgICAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAgICAgICAgICdsaW5lLWNhcCc6ICdyb3VuZCcsCiAgICAgICAgICAgICAgICAgICdsaW5lLWpvaW4nOiAncm91bmQnLAogICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZScKICAgICAgICAgICAgICAgICAgLy8gdmlzaWJpbGl0eTogIm5vbmUiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgICAgICAgJ2xpbmUtY29sb3InOiAnI2FkZGQ1MicsCiAgICAgICAgICAgICAgICAgICdsaW5lLXdpZHRoJzogNSwKICAgICAgICAgICAgICAgICAgJ2xpbmUtb3BhY2l0eSc6IDAuOAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sICdpbnNwVXNlckxheWVyJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gbGFiZWwKICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoJ2VuZFBvaW50X2xhYmVsJykpIHt9IGVsc2UgewogICAgICAgICAgICAgIG1hcE9iai5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgICAgICAgaWQ6ICdlbmRQb2ludF9sYWJlbCcsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3ltYm9sJywKICAgICAgICAgICAgICAgIHNvdXJjZTogJ2VuZFBvaW50U291cmNlX25vdycsCiAgICAgICAgICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICAgICAgICAgJ3N5bWJvbC1wbGFjZW1lbnQnOiAncG9pbnQnLAogICAgICAgICAgICAgICAgICAnaWNvbi1pbWFnZSc6ICdlbmRfcG9pbnQnLAogICAgICAgICAgICAgICAgICAnaWNvbi1zaXplJzogMC42LAogICAgICAgICAgICAgICAgICAnaWNvbi1vZmZzZXQnOiBbMCwgLTM1XSwKICAgICAgICAgICAgICAgICAgJ2ljb24tYWxsb3ctb3ZlcmxhcCc6IHRydWUsCiAgICAgICAgICAgICAgICAgICdzeW1ib2wtc29ydC1rZXknOiAyLAogICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZScKICAgICAgICAgICAgICAgICAgLy8gdmlzaWJpbGl0eTogIm5vbmUiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g5LiK5Lyg5LmL5YmN5LiK5Lyg5aSx6LSl55qE54K55L2NCiAgICAgICAgICAgIHRoYXQucmVwb3J0RmFpbFRyYWNrUG9pbnRzLmxlbmd0aCA+IDAgJiYgdGhhdC5wb3N0RmFpbFRyYWNrRGF0YSgpOwogICAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLnVwbG9hZEZpbGVkUGlwZUlkTGlzdC5sZW5ndGggPiAwICYmIGFwaS5yZWNvcmRJbnNwTGluZSh0aGF0LiRyZWZzLm15bWFwLnVwbG9hZEZpbGVkUGlwZUlkTGlzdCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn566h57q/6KGl5YWF5LiK5Lyg5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLnVwbG9hZEZpbGVkUGlwZUlkTGlzdCA9IFtdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICh0eXBlID09ICdlbmQnKSB7CiAgICAgICAgICAgICAgdGhpcy5zdGFydE9yRW5kVGFza1JlY29yZCgyKTsgLy8g5bey5beh5qOA54q25oCBICcyJwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMucG9sbGluZ0ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmlmUmVjb3JkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0YXJ0UmVjb3JkTGluZXMnLCAnZW5kJyk7CiAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3BhdXNlJykgewogICAgICAgICAgICAgICAgVG9hc3Quc3VjY2Vzcyh7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmmoLlgZzmiJDlip8nLAogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hUYXNrKCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdsZWF2ZScpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBUb2FzdC5lcnJvcih7CiAgICAgICAgICAgICAgbWVzc2FnZTogdHlwZSA9PSAnZW5kJyA/ICfnu5PmnZ/lpLHotKUnIDogJ+aaguWBnOWksei0pScKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IHR5cGUgPSB0eXBlOwogICAgICAgIGxldCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhhdC5kcmF3RW5kUG9pbnQodHlwZSk7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBwb3N0RmFpbFRyYWNrRGF0YSgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBhd2FpdCBhcGkuaW5zcGVjdGlvblRyYWNrKHRoYXQucmVwb3J0RmFpbFRyYWNrUG9pbnRzKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcyAmJiByZXMuc3RhdHVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn6L2o6L+55a2Y5YKo5oiQ5YqfJyk7CiAgICAgICAgICB0aGF0LnJlcG9ydEZhaWxUcmFja1BvaW50cyA9IFtdOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZygn5beh5qOA6L2o6L+55a2Y5YKo5aSx6LSl77yaJyArIGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWNleeCuS3lkI7nq6/orrDlvZXovajov7nmlbDmja4KICAgIHBvc3RUcmFja0RhdGFfUG9pbnQocG9pbnREYXRhLCB0aW1lRGF0YSwgZGlzdGFuY2UpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBwb2ludERhdGEubGVuZ3RoOyBwKyspIHsKICAgICAgICAgIHBvaW50RGF0YVtwXSA9IE51bWJlcihwb2ludERhdGFbcF0pOwogICAgICAgIH0KICAgICAgICBsZXQgZGF0ZV9ub3cgPSBkYXlqcygpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpOwogICAgICAgIGxldCByZWNvcmREYXRhID0gW107CiAgICAgICAgcmVjb3JkRGF0YS5wdXNoKHsKICAgICAgICAgIHRhc2tJZDogdGhhdC50YXNrRGV0YWlsLmlkLAogICAgICAgICAgaW5zcERhdGU6IHRpbWVEYXRhLAogICAgICAgICAgaW5zcFRpbWU6IGRhdGVfbm93LAogICAgICAgICAgZGlzdGFuY2UsCiAgICAgICAgICBpbnNwZWN0b3I6IHRoYXQudXNlckluZm8udXNlckZ1bGxuYW1lLAogICAgICAgICAgbG9uZ2l0dWRlOiBwb2ludERhdGFbMF0sCiAgICAgICAgICBsYXRpdHVkZTogcG9pbnREYXRhWzFdCiAgICAgICAgfSk7CiAgICAgICAgaWYgKHRoYXQuaXNSZXN1bWUpIHsKICAgICAgICAgIGF3YWl0IGFwaS5pbnNwZWN0aW9uVHJhY2socmVjb3JkRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6L2o6L+55a2Y5YKo5oiQ5YqfJywgcmVjb3JkRGF0YSk7CiAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDkuIrkvKDlpLHotKXnmoTngrnkvY3vvIzmmoLml7blrZjlnKhhcHDnq68KICAgICAgICAgICAgICB0aGF0LnJlcG9ydEZhaWxUcmFja1BvaW50cy5wdXNoKHJlY29yZERhdGEpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGF0LnJlcG9ydEZhaWxUcmFja1BvaW50czogJywgdGhhdC5yZXBvcnRGYWlsVHJhY2tQb2ludHMpOwogICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwYXVzZVN0YXRlVHJhY2tQb2ludHMucHVzaCguLi5yZWNvcmREYXRhKTsKICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzdGFydE9yRW5kVGFza1JlY29yZChzdGF0dXMpIHsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgcGxhbklkOiB0aGlzLnBsYW5EZXRhaWwuaWQsCiAgICAgICAgdGFza05hbWU6IHRoaXMudGFza0RldGFpbC50YXNrTmFtZSwKICAgICAgICB0YXNrQ29kZTogdGhpcy50YXNrRGV0YWlsLnRhc2tDb2RlLAogICAgICAgIHRhc2tTdGF0dXM6IHN0YXR1cywKICAgICAgICBpZDogdGhpcy50YXNrRGV0YWlsLmlkLAogICAgICAgIHRhc2tUeXBlOiB0aGlzLnRhc2tEZXRhaWwudGFza1R5cGUsCiAgICAgICAgYml6VHlwZTogdGhpcy5wbGFuRGV0YWlsLmJpelR5cGUsCiAgICAgICAgZXh0MTogc3RhdHVzID09IDIgPyB0aGlzLnN0b3BSZWFzb24gOiAnJwogICAgICB9OwogICAgICBpZiAoc3RhdHVzID09IDEpIHsKICAgICAgICBkYXRhLnBsYW5TdGFydFRpbWUgPSB0aGlzLiRkYXlqcygpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpOwogICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PSAyKSB7CiAgICAgICAgZGF0YS5wbGFuRW5kVGltZSA9IHRoaXMuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7CiAgICAgIH0KICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBhcGkuY2hhbmdlVGFza1N0YXR1cyhkYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgIGlmIChzdGF0dXMgPT0gMikgewogICAgICAgICAgICBUb2FzdC5zdWNjZXNzKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn57uT5p2f5oiQ5YqfJywKICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGF0LnBvbGxpbmdGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGF0LmlmUmVjb3JkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3RhcnRSZWNvcmRMaW5lcycsICdlbmQnKTsKICAgICAgICAgICAgICAgIHRoYXQuaXNWaWV3ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoYXQuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHN0YXR1cyA9PSAyKSB7CiAgICAgICAgICAgIFRvYXN0LmVycm9yKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn57uT5p2f5aSx6LSlLCDor7fph43or5UnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5riF6Zmk57yT5a2Y55qE6L2o6L+55pWw5o2uCiAgICBjbGVhckJ1ZmZlclRyYWNrKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuaXNSZXN1bWUgPSB0cnVlOwogICAgICB0aGF0LmlmUmVjb3JkaW5nID0gZmFsc2U7CiAgICAgIHRoYXQuY3VycmVudFBvc2l0aW9uID0gbnVsbDsKICAgICAgLy/mlbDnu4TlvZLpm7YKICAgICAgdGhhdC50cmFja1BvaW50TGlzdCA9IFtdOwogICAgICB0aGF0LnRyYWNrUG9pbnRUaW1lTGlzdCA9IFtdOwogICAgICB0aGF0Lm92ZXJTcGVlZFRyYWNrTGluZUxpc3QgPSBbXTsKICAgICAgcGF1c2VTdGF0ZVRyYWNrUG9pbnRzID0gW107CiAgICAgIHBhdXNlU3RhdGVQaXBlSWRMaXN0ID0gW107CiAgICAgIC8v5pWw5o2u5rqQ5riF56m6CiAgICAgIGlmIChtYXBPYmoubWFwLmdldFNvdXJjZSgndHJhY2tMaW5lU291cmNlX25vdycpKSB7CiAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3RyYWNrTGluZVNvdXJjZV9ub3cnKS5zZXREYXRhKHsKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAobWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3RyYWNrTGluZVNvdXJjZV9vdmVyU3BlZWQnKSkgewogICAgICAgIG1hcE9iai5tYXAuZ2V0U291cmNlKCd0cmFja0xpbmVTb3VyY2Vfb3ZlclNwZWVkJykuc2V0RGF0YSh7CiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCdzdGFydFBvaW50U291cmNlX25vdycpKSB7CiAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3N0YXJ0UG9pbnRTb3VyY2Vfbm93Jykuc2V0RGF0YSh7CiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCdlbmRQb2ludFNvdXJjZV9ub3cnKSkgewogICAgICAgIG1hcE9iai5tYXAuZ2V0U291cmNlKCdlbmRQb2ludFNvdXJjZV9ub3cnKS5zZXREYXRhKHsKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFkZE1hcEltZygpIHsKICAgICAgbWFwT2JqLm1hcC5sb2FkSW1hZ2UocmVxdWlyZSgnQGFzc2V0cy9pbWcvaW5zcGVjdGlvbi93aGl0ZV9hcnJvd19yaWdodC5wbmcnKSwgZnVuY3Rpb24gKGVycm9yLCBpbWFnZSkgewogICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7CiAgICAgICAgaWYgKCFtYXBPYmoubWFwLmhhc0ltYWdlKCdhcnJvd0ljb24nKSkgewogICAgICAgICAgbWFwT2JqLm1hcC5hZGRJbWFnZSgnYXJyb3dJY29uJywgaW1hZ2UsIHt9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwLmxvYWRJbWFnZShyZXF1aXJlKCdAYXNzZXRzL2ltZy9pbnNwZWN0aW9uL2ljb25fc3RhcnRpbmdfcG9pbnQucG5nJyksIGZ1bmN0aW9uIChlcnJvciwgaW1hZ2UpIHsKICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yOwogICAgICAgIGlmICghbWFwT2JqLm1hcC5oYXNJbWFnZSgnc3RhcnRfcG9pbnQnKSkgewogICAgICAgICAgbWFwT2JqLm1hcC5hZGRJbWFnZSgnc3RhcnRfcG9pbnQnLCBpbWFnZSwge30pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXAubG9hZEltYWdlKHJlcXVpcmUoJ0Bhc3NldHMvaW1nL2luc3BlY3Rpb24vaWNvbl9hdF9lbmQucG5nJyksIGZ1bmN0aW9uIChlcnJvciwgaW1hZ2UpIHsKICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yOwogICAgICAgIGlmICghbWFwT2JqLm1hcC5oYXNJbWFnZSgnZW5kX3BvaW50JykpIHsKICAgICAgICAgIG1hcE9iai5tYXAuYWRkSW1hZ2UoJ2VuZF9wb2ludCcsIGltYWdlLCB7fSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDlvIDlp4vorrDlvZUg5LiK5Lyg6LW354K55oiQ5Yqf5ZCO5omN6L+b5YWl5beh5qOA6L+H56iLCiAgICBzdGFydEluc3BSZWNvcmQoKSB7CiAgICAgIGlmICh0aGlzLmlzVmlldykgewogICAgICAgIFRvYXN0KHsKICAgICAgICAgIG1lc3NhZ2U6ICfor6Xlt6Hmo4Dku7vliqHlt7Lnu5PmnZ8nLAogICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmN1cnJlbnRQb3NpdGlvbiB8fCAhdGhpcy5jdXJyZW50UG9zaXRpb24ubG9uZ2l0dWRlKSB7CiAgICAgICAgVG9hc3Qud2FybmluZyh7CiAgICAgICAgICBtZXNzYWdlOiAn5b2T5YmNR1BT5L+h5Y+35byx77yM6K+356iN5ZCO5bCd6K+VJywKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuY2xlYXJCdWZmZXJUcmFjaygpOwogICAgICBsZXQgdG9hc3QgPSBUb2FzdC5sb2FkaW5nKHsKICAgICAgICBtZXNzYWdlOiAn56iL5bqP5ZCv5Yqo5LitJywKICAgICAgICBsb2FkaW5nVHlwZTogJ3NwaW5uZXInLAogICAgICAgIGR1cmF0aW9uOiAwLAogICAgICAgIGZvcmJpZENsaWNrOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmRyYXdTdGFydFBvaW50KCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIHRvYXN0LmNsb3NlKCk7CiAgICAgICAgICBUb2FzdC5pbmZvKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+W8gOWni+iusOW9lScsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMucG9sbGluZ0ZsYWcgPSB0cnVlOwogICAgICAgICAgdGhpcy5pZlJlY29yZGluZyA9IHRydWU7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3RhcnRSZWNvcmRMaW5lcycsICdzdGFydCcpOwogICAgICAgICAgLy8g5byA5aeL6L2u6K+iCiAgICAgICAgICB0aGlzLnBvbGxpbmcoKTsKICAgICAgICAgIC8vIOiusOW9leW9k+WJjeaXtumXtAogICAgICAgICAgdGhpcy5zdGFydFJlY29yZFRpbWVyID0gbmV3IERhdGUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgVG9hc3QuZXJyb3IoewogICAgICAgICAgICBtZXNzYWdlOiAn5o6l5Y+j5byC5bi477yM5peg5rOV5byA5aeL5Lu75YqhJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIFRvYXN0LmVycm9yKHsKICAgICAgICAgIG1lc3NhZ2U6ICfnvZHnu5znirbmgIHlvILluLjvvIzmraPlnKjph43or5UnLAogICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICB9KTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuZHJhd1N0YXJ0UG9pbnQoKTsKICAgICAgICB9LCA1MDAwKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g57uT5p2f6K6w5b2VCiAgICBlbmRSZWNvcmQodHlwZSkgewogICAgICBsZXQgZGlmZiA9IE1hdGguZmxvb3IoKG5ldyBEYXRlKCkgLSB0aGlzLnN0YXJ0UmVjb3JkVGltZXIpIC8gMTAwMCk7CiAgICAgIGlmIChkaWZmIDw9IDEwKSB7CiAgICAgICAgVG9hc3QuaW5mbyh7CiAgICAgICAgICBtZXNzYWdlOiBg57uT5p2f5aSq5b+r5LqGLOivtyR7MTAgLSBkaWZmfeenkuWQjuWGjeivlWAsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmVuZFJlY29yZENvbmZpcm0odHlwZSk7CiAgICB9LAogICAgLy8g57uT5p2f6K6w5b2V56Gu6K6kCiAgICBlbmRSZWNvcmRDb25maXJtKHR5cGUpIHsKICAgICAgdGhpcy5kcmF3RW5kUG9pbnQodHlwZSk7CiAgICB9LAogICAgLy8g5byA5aeL5a6a5L2NCiAgICBzdGFydExvY2F0aW9uKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHl1YW5jaHUubG9jYXRpb25BTWFwLnJlcXVlc3RTaW5nbGVMb2NhdGlvbihbJzEnXSwgcmVzID0+IHsKICAgICAgICB0aGF0LmN1cnJlbnRQb3NpdGlvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICAuLi50aGF0LmN1cnJlbnRQb3NpdGlvbgogICAgICAgIH07CiAgICAgICAgaWYgKCF0aGF0LmN1cnJlbnRQb3NpdGlvbiB8fCAhdGhhdC5jdXJyZW50UG9zaXRpb24ubG9uZ2l0dWRlIHx8ICF0aGF0LmN1cnJlbnRQb3NpdGlvbi5sYXRpdHVkZSkgewogICAgICAgICAgVG9hc3QuZXJyb3IoewogICAgICAgICAgICBtZXNzYWdlOiAn6I635Y+W5L2N572u5aSx6LSlIScsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgY29vcmQgPSBbcGFyc2VGbG9hdCh0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUpLCBwYXJzZUZsb2F0KHRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlKV07CiAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLnNldEluc3BVc2VyUG9zaXRpb24ocGFyYW0pOwogICAgICAgICAgdGhhdC5mbHlUb1BvaW50KGNvb3JkKTsKICAgICAgICB9CiAgICAgIH0sIGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2Vycj0nLCBlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBnb0V2ZW50T3JGbGF3RGV0YWlsKGZlYXR1cmUsIHR5cGUpIHsKICAgICAgbGV0IGN1cnJlbnRQb2ludCA9IGZlYXR1cmU7CiAgICAgIGNvbnNvbGUubG9nKGZlYXR1cmUpOwogICAgICBjdXJyZW50UG9pbnQgPSBmZWF0dXJlOwogICAgICBjdXJyZW50UG9pbnQuYmlnVHlwZSA9IGZlYXR1cmUuYml6VHlwZSB8fCAnJzsKICAgICAgY3VycmVudFBvaW50LmdyaWRJZCA9IHRoaXMucGxhbkRldGFpbC5ncmlkSWQ7CiAgICAgIGN1cnJlbnRQb2ludC5ncmlkTmFtZSA9IHRoaXMucGxhbkRldGFpbC5ncmlkTmFtZTsKICAgICAgY3VycmVudFBvaW50LmdyaWRNYW5hZ2VyID0gewogICAgICAgIGZ1bGxOYW1lOiB0aGlzLnBsYW5EZXRhaWwuZ3JpZE1hbmFnZXIsCiAgICAgICAgdXNlcm5hbWU6IHRoaXMucGxhbkRldGFpbC51c2VyTmFtZQogICAgICB9OwogICAgICBjdXJyZW50UG9pbnQubG5nID0gZmVhdHVyZS5nZW9tLmNvb3JkaW5hdGVzWzBdOwogICAgICBjdXJyZW50UG9pbnQubGF0ID0gZmVhdHVyZS5nZW9tLmNvb3JkaW5hdGVzWzFdOwogICAgICBjdXJyZW50UG9pbnQucm9hZF9uYW1lID0gZmVhdHVyZS5yb2FkIHx8ICcnOwogICAgICBjdXJyZW50UG9pbnQuc21hbGxUeXBlID0gZmVhdHVyZS5kZXZpY2VUeXBlIHx8ICcnOwogICAgICBjdXJyZW50UG9pbnQuY29kZSA9IGZlYXR1cmUuZGV2aWNlSWQgfHwgJyc7CiAgICAgIGN1cnJlbnRQb2ludC50YXNrSWQgPSB0aGlzLnRhc2tEZXRhaWwuaWQ7CiAgICAgIGlmICh0eXBlID09ICdldmVudCcpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnYWRkUHJvYmxlbUluZGV4JywKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIG1zZzogY3VycmVudFBvaW50LAogICAgICAgICAgICB0b2tlbjogdGhpcy5mb3JtVG9rZW4sCiAgICAgICAgICAgIHRhc2tJZDogdGhpcy4kcm91dGUucXVlcnkudGFza0lkLAogICAgICAgICAgICBmcm9tOiAnaW5zcCcKICAgICAgICAgIH0sCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgdHlwZTogJ2FkZCcKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnYWRkRmxhd3MnLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgbXNnOiBjdXJyZW50UG9pbnQsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLmZvcm1Ub2tlbiwKICAgICAgICAgICAgdGFza0lkOiB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQsCiAgICAgICAgICAgIGZyb206ICdpbnNwJwogICAgICAgICAgfSwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB0eXBlOiAnYWRkJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8g56Gu6K6kCiAgICBvbkNvbmZpcm0oKSB7CiAgICAgIGlmICh0cnVlKSB7CiAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgIGxldCBmZWF0dXJlID0gdGhpcy5zaWduRm9ybS5mZWF0dXJlOwogICAgICAgIGxldCBjb3B5U2lnbkZvcm0gPSB0aGlzLmRlZXBDbG9uZSh0aGlzLnNpZ25Gb3JtKTsKICAgICAgICBpZiAodGhhdC5hdHRhY2htZW50ID09ICcnKSB7CiAgICAgICAgICBOb3RpZnkoewogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+35LiK5Lyg6ZmE5Lu2JwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIOa2suS9jei+k+WFpeahhuaYr+WQpuaYvuekuu+8iOaxoeawtOajgOafpeS6leW/hemhu+Whq+WGmea2suS9jeWtl+aute+8iQogICAgICAgIGlmICh0aGlzLndhdGVyTGV2ZWxTaG93ID09IHRydWUpIHsKICAgICAgICAgIGlmIChjb3B5U2lnbkZvcm0ubGlxdWlkTGV2ZWwgPT0gJycpIHsKICAgICAgICAgICAgTm90aWZ5KHsKICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmtrLkvY0nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvcHlTaWduRm9ybS5pbnNwRGF0ZSA9IGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7CiAgICAgICAgY29weVNpZ25Gb3JtLmV4dDEgPSBjb3B5U2lnbkZvcm0ucmVtYXJrOyAvLyDlpIfms6gKICAgICAgICBjb3B5U2lnbkZvcm0uZXh0MiA9ICcxJzsgLy8g5beh5qOA6K6w5b2V55qEZXh0MuWtl+aute+8jOm7mOiupOS4ujHvvIjlvoXlpI3moLjvvInvvIzlt7LpgJrov4fkuLoy77yM5bey6YCA5Zue5Li6MwogICAgICAgIGRlbGV0ZSBjb3B5U2lnbkZvcm0uZmVhdHVyZTsKCiAgICAgICAgLy8gcmVzdWx0TGlzdOmAmui/h+W3oeajgOimgeeCuWxpc3TlpITnkIblubbmt7vliqDliLBmb3Jt5LitCiAgICAgICAgbGV0IHJlc3VsdExpc3QgPSBbXTsKICAgICAgICBsZXQgdGV4dEluRmxhZyA9IGZhbHNlOwogICAgICAgIC8vIOW3oeajgOimgeeCuWxpc3TmlbDmja4KICAgICAgICBpZiAodGhpcy5rZXlQb2ludHNJbnNwZWN0aW9uTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmtleVBvaW50c0luc3BlY3Rpb25MaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIHJlc3VsdExpc3QucHVzaCh7CiAgICAgICAgICAgICAgbWFpbklkOiBpdGVtLmlkLAogICAgICAgICAgICAgIC8vIOW3oeajgOimgeeCuWlkCiAgICAgICAgICAgICAgbWFpblBvaW50OiBpdGVtLm1haW5Qb2ludCwKICAgICAgICAgICAgICAvLyDlt6Hmo4DopoHngrnlkI3np7AKICAgICAgICAgICAgICBtYWluVmFsdWU6IGl0ZW0ubWFpblZhbHVlLAogICAgICAgICAgICAgIC8vIOivpeimgeeCueW3oeajgOe7k+aenAogICAgICAgICAgICAgIGV4dDE6IGl0ZW0uaW5wdXRUeXBlIC8vIOW3oeajgOimgeeCuei+k+WFpeexu+Wei++8jOeUqOS6juafpeivouivpuaDheaXtuWIpOaWrWh0bWznu5PmnoQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0TGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAvLyDkuI3kuLonJ+aIluiAheWFqOepuuagvAogICAgICAgICAgICBpZiAocmVzdWx0TGlzdFtpXS5tYWluVmFsdWUgPT0gJycgfHwgcmVzdWx0TGlzdFtpXS5tYWluVmFsdWUudHJpbSgpID09ICcnKSB7CiAgICAgICAgICAgICAgdGV4dEluRmxhZyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRleHRJbkZsYWcpIHsKICAgICAgICAgIE5vdGlmeSh7CiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7flsIblt6Hmo4DopoHngrnooaXlhYXlrozmlbQnCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29weVNpZ25Gb3JtLnJlc3VsdExpc3QgPSByZXN1bHRMaXN0OwogICAgICAgIGNvbnNvbGUubG9nKCfmj5DkuqTlj4LmlbAnLCBfY2xvbmVEZWVwKGNvcHlTaWduRm9ybSkpOwogICAgICAgIGFwaS5zaWduSW4oY29weVNpZ25Gb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMpIHsKICAgICAgICAgICAgVG9hc3Quc3VjY2Vzcyh7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ+atpOWFs+mUrueCueetvuWIsOaIkOWKnycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgICAgLy8g5beh5qOA5LqL5Lu25LiK5oqlCiAgICAgICAgICAgICAgICBpZiAoY29weVNpZ25Gb3JtLmlzUmVwb3J0ID09ICfpl67popjkuIrmiqUnKSB7CiAgICAgICAgICAgICAgICAgIHRoYXQuZ29FdmVudE9yRmxhd0RldGFpbChmZWF0dXJlLCAnZXZlbnQnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29weVNpZ25Gb3JtLmlzUmVwb3J0ID09ICfmlrDlop7nvLrpmbcnKSB7CiAgICAgICAgICAgICAgICAgIHRoYXQuZ29FdmVudE9yRmxhd0RldGFpbChmZWF0dXJlLCAnZmxhdycpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhhdC5yZWZyZXNoVGFzaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBUb2FzdC5lcnJvcih7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ+atpOWFs+mUrueCueetvuWIsOWksei0pScsCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnNpZ25TaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNpZ25Gb3JtLnJlbWFyayA9ICcnOwogICAgICAgICAgdGhpcy5zaWduRm9ybS5saXF1aWRMZXZlbCA9ICcnOwogICAgICAgICAgdGhpcy5zaWduRm9ybS5kZXZpY2VTdGF0dXMgPSAnMCc7CiAgICAgICAgICB0aGlzLnNpZ25Gb3JtLmlzUmVwb3J0ID0gJyc7CiAgICAgICAgICB0aGlzLnNpZ25Gb3JtLmluc3BJbWFnZXNMaXN0ID0gW107CiAgICAgICAgICB0aGlzLmF0dGFjaG1lbnQgPSAnJzsKICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCdidWZmZXJlZCcsIHsKICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaXNSZXBvcnRFdmVudCIsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygn6aqM6K+B5aSx6LSlJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlj5bmtogKICAgIG9uQ2FuY2VsKCkgewogICAgICB0aGlzLnNpZ25TaG93ID0gZmFsc2U7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCdidWZmZXJlZCcsIHsKICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgIGZlYXR1cmVzOiBbXQogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxMZWF2ZSgpIHsKICAgICAgdGhpcy5pZkxlYXZlVGFzayA9IGZhbHNlOwogICAgfSwKICAgIGNvbmZpcm1MZWF2ZSgpIHsKICAgICAgdGhpcy5pZkxlYXZlVGFzayA9IGZhbHNlOwogICAgICB0aGlzLmVuZFJlY29yZCgnbGVhdmUnKTsKICAgIH0sCiAgICBjbGlja0JhY2soKSB7CiAgICAgIGlmICh0aGlzLmlmUmVjb3JkaW5nKSB7CiAgICAgICAgdGhpcy5pZkxlYXZlVGFzayA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgfQogICAgfSwKICAgIC8vIOetvuWIsAogICAgYXN5bmMgc3RhcnRTaWduSW4oZmVhdHVyZSkgewogICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS3nrb7liLAtLS0tLS0tLScsIGZlYXR1cmUpOwogICAgICBpZiAoZmVhdHVyZS5iaXpUeXBlID09ICfmsaHmsLQnICYmIGZlYXR1cmUuZGV2aWNlVHlwZSA9PSAn5qOA5p+l5LqVJykgewogICAgICAgIC8vIOa2suS9jei+k+WFpeahhuaYr+WQpuaYvuekugogICAgICAgIHRoaXMud2F0ZXJMZXZlbFNob3cgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMud2F0ZXJMZXZlbFNob3cgPSBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLnBvaW50TGlzdFNob3cgPSBmYWxzZTsKICAgICAgdGhpcy5hdHRhY2htZW50ID0gJyc7CiAgICAgIHRoaXMuc2lnbkZvcm0uaXNSZXBvcnQgPSAnJzsKICAgICAgdGhpcy5kZXZpY2VOYW1lID0gZmVhdHVyZS5kZXZpY2VUeXBlICsgKGZlYXR1cmUuZGV2aWNlSWQgfHwgJycpOwogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyAgZGV2aWNlU3RhdHVz54q25oCB77yIMOato+W4uCAx5byC5bi4IDLmnKrlt6Hmo4DvvIkg5beh5qOA6K6w5b2V55qEZXh0MuWtl+aute+8jOm7mOiupOS4ujHvvIjlvoXlpI3moLjvvInvvIzlt7LpgJrov4fkuLoy77yM5bey6YCA5Zue5Li6MwogICAgICBpZiAoIWZlYXR1cmUuZGV2aWNlU3RhdHVzIHx8IGZlYXR1cmUuZGV2aWNlU3RhdHVzID09ICcyJyB8fCBmZWF0dXJlLmV4dDIgPT0gJzMnKSB7CiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmlzVmlldykgewogICAgICAgICAgVG9hc3Qud2FybmluZyh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfku7vliqHlt7Lnu5PmnZ/vvIzml6Dms5Xnu6fnu63miZPljaEnLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgICBtYXBPYmoubWFwLmdldFNvdXJjZSgnYnVmZmVyZWQnKSAmJiBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgnYnVmZmVyZWQnLCB7CiAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIOWIqeeUqGZlYXR1cmXmnaXliKTmlq3mmK/lkKblpITkuo4zNW3ojIPlm7TlhoXvvIzlpoLmnpzlpITkuo7vvIzlj6/ku6Xov5vooYznrb7liLDvvIzlkKbliJnkuI3og73ov5vooYznrb7liLAKICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY3VycmVudFBvc2l0aW9uOwogICAgICAgIGlmICghcG9zaXRpb24pIHsKICAgICAgICAgIFRvYXN0Lndhcm5pbmcoewogICAgICAgICAgICBtZXNzYWdlOiAn6I635Y+W5LiN5Yiw5beh5qOA5Lq65L2N572uJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ2J1ZmZlcmVkJykgJiYgbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEoJ2J1ZmZlcmVkJywgewogICAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb29yZCA9IFtwYXJzZUZsb2F0KHBvc2l0aW9uLmxvbmdpdHVkZSksIHBhcnNlRmxvYXQocG9zaXRpb24ubGF0aXR1ZGUpXTsKICAgICAgICBjb25zdCBwb2ludCA9IHR1cmYucG9pbnQoY29vcmQpOwogICAgICAgIGNvbnN0IGVuZ0dlb20gPSBmZWF0dXJlLmdlb207CiAgICAgICAgY29uc3QgYnVmZmVyZWQgPSB0dXJmLmJ1ZmZlcihlbmdHZW9tLCAwLjAyMCwgewogICAgICAgICAgdW5pdDogJ2tpbG9tZXRlcnMnCiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgaXNJbkJ1ZmZlciA9IHR1cmYuaW5zaWRlKHBvaW50LCBidWZmZXJlZCk7CiAgICAgICAgaWYgKCFpc0luQnVmZmVyKSB7CiAgICAgICAgICBUb2FzdC53YXJuaW5nKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+acquWkhOS6juivpeWFs+mUrueCueiMg+WbtOWGhScsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coJ2ZlYXR1cmXmlbDmja4nLCBmZWF0dXJlKTsKICAgICAgICAvLyDlt6Hmo4DopoHngrlsaXN05pWw5o2uCiAgICAgICAgdGhpcy5rZXlQb2ludHNJbnNwZWN0aW9uTGlzdCA9IFtdOwogICAgICAgIGxldCBwYXJhbXM0ID0gewogICAgICAgICAgYml6VHlwZTogZmVhdHVyZS5iaXpUeXBlLAogICAgICAgICAgLy8g5Lia5Yqh57G75Z6L77yI5rGh5rC077yJCiAgICAgICAgICBvYmplY3RUeXBlOiBmZWF0dXJlLmRldmljZVR5cGUgLy8g5beh5qOA5a+56LGh57G75Z6L5ZCN56ew77yI5qOA5p+l5LqV77yJCiAgICAgICAgfTsKICAgICAgICAvLyBhcHDnq6/moLnmja7nsbvlnovmn6Xor6LlkK/nlKjnmoTlt6Hmo4DopoHngrnliJfooagKICAgICAgICBhcGkuaW5zcFBvaW50Q2hlY2tMaXN0KHBhcmFtczQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHZhciBfcmVzJGRhdGE7CiAgICAgICAgICB0aGlzLmtleVBvaW50c0luc3BlY3Rpb25MaXN0ID0gKHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHZvaWQgMCB8fCAoX3JlcyRkYXRhID0gcmVzLmRhdGEpID09PSBudWxsIHx8IF9yZXMkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcyRkYXRhLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubWFpblN0YXR1cyA9PT0gIuWQr+eUqOS4rSI7CiAgICAgICAgICAgIC8vIGl0ZW0gPSB7CiAgICAgICAgICAgIC8vICAgImlkIjogIjE2NTU4NDMwMDc3NjgyMzYwMzMiLAogICAgICAgICAgICAvLyAgICJjcmVhdGVCeSI6ICJmYXdrZXMiLAogICAgICAgICAgICAvLyAgICJjcmVhdGVEYXRlIjogIjIwMjMtMDUtMDkgMTU6NTE6NTEiLAogICAgICAgICAgICAvLyAgICJ1cGRhdGVCeSI6IG51bGwsCiAgICAgICAgICAgIC8vICAgInVwZGF0ZURhdGUiOiBudWxsLAogICAgICAgICAgICAvLyAgICJkZWxldGVGbGFnIjogMCwKICAgICAgICAgICAgLy8gICAibWFpblBvaW50IjogIuS6leWGheaYr+WQpuacieWkp+mHj+a3pOenr+aIluadgueJqeW9seWTjeaOkuawtCIsCiAgICAgICAgICAgIC8vICAgImlucHV0VHlwZSI6ICLmmK8v5ZCmIiwKICAgICAgICAgICAgLy8gICAidW5pdCI6ICIvIiwKICAgICAgICAgICAgLy8gICAibWFpblN0YXR1cyI6ICLlkK/nlKjkuK0iLAogICAgICAgICAgICAvLyAgICJiaXpUeXBlIjogIuaxoeawtCIsCiAgICAgICAgICAgIC8vICAgIm9iamVjdFR5cGUiOiAi5qOA5p+l5LqVIiwKICAgICAgICAgICAgLy8gICAicmVtYXJrcyI6IG51bGwsCiAgICAgICAgICAgIC8vICAgInBvcnRhbElkIjogbnVsbCwKICAgICAgICAgICAgLy8gICAidGVuYW50SWQiOiAxMDAwMDAKICAgICAgICAgICAgLy8gfQogICAgICAgICAgfSkpIHx8IFtdOwogICAgICAgICAgLy8g5beh5qOA6KaB54K5bGlzdOaVsOaNrgogICAgICAgICAgaWYgKHRoaXMua2V5UG9pbnRzSW5zcGVjdGlvbkxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmtleVBvaW50c0luc3BlY3Rpb25MaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgbGV0IGlUID0gWycnXTsKICAgICAgICAgICAgICAvLyDlpoLmnpxpbnB1dFR5cGXkuK3lrZjlnKgnLyfvvIzliJnlsIblhbbovazmjaLmiJDmlbDnu4TvvIzlt6Hmo4DopoHngrnnu5PmnpxtYWluVmFsdWXpu5jorqTkuLrnrKzkuIDkuKrlgLzvvIgiaW5wdXRUeXBlIjogIuaYry/lkKYiLO+8ie+8jOWQpuWImW1haW5WYWx1ZeS4uicnCiAgICAgICAgICAgICAgaWYgKGl0ZW0uaW5wdXRUeXBlLmluZGV4T2YoJy8nKSA+IC0xKSB7CiAgICAgICAgICAgICAgICBpVCA9IGl0ZW0uaW5wdXRUeXBlLnNwbGl0KCcvJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuJHNldChpdGVtLCAnbWFpblZhbHVlJywgaVRbMF0pOyAvLyDor6XopoHngrnlt6Hmo4Dnu5PmnpwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyB0aGlzLmtleVBvaW50c0luc3BlY3Rpb25MaXN0ID0gWwogICAgICAgICAgLy8gICB7CiAgICAgICAgICAvLyAgICAgImlkIjogIjE2NTU4NDMwMDc3NjgyMzYwMzMiLAogICAgICAgICAgLy8gICAgICJjcmVhdGVCeSI6ICJmYXdrZXMiLAogICAgICAgICAgLy8gICAgICJjcmVhdGVEYXRlIjogIjIwMjMtMDUtMDkgMTU6NTE6NTEiLAogICAgICAgICAgLy8gICAgICJ1cGRhdGVCeSI6IG51bGwsCiAgICAgICAgICAvLyAgICAgInVwZGF0ZURhdGUiOiBudWxsLAogICAgICAgICAgLy8gICAgICJkZWxldGVGbGFnIjogMCwKICAgICAgICAgIC8vICAgICAibWFpblBvaW50IjogIua1i+ivleato+W4uOW8guW4uOa1i+ivleato+W4uOW8guW4uOa1i+ivleato+W4uOW8guW4uOa1i+ivleato+W4uOW8guW4uCIsCiAgICAgICAgICAvLyAgICAgImlucHV0VHlwZSI6ICLmraPluLgv5byC5bi4IiwKICAgICAgICAgIC8vICAgICAidW5pdCI6ICIvIiwKICAgICAgICAgIC8vICAgICAibWFpblN0YXR1cyI6ICLlkK/nlKjkuK0iLAogICAgICAgICAgLy8gICAgICJiaXpUeXBlIjogIuaxoeawtCIsCiAgICAgICAgICAvLyAgICAgIm9iamVjdFR5cGUiOiAi5qOA5p+l5LqVIiwKICAgICAgICAgIC8vICAgICAicmVtYXJrcyI6IG51bGwsCiAgICAgICAgICAvLyAgICAgInBvcnRhbElkIjogbnVsbCwKICAgICAgICAgIC8vICAgICAidGVuYW50SWQiOiAxMDAwMDAsCiAgICAgICAgICAvLyAgICAgIm1haW5WYWx1ZSI6ICLmraPluLgiCiAgICAgICAgICAvLyAgIH0sCiAgICAgICAgICAvLyAgIHsKICAgICAgICAgIC8vICAgICAiaWQiOiAiMTY1NTg0MzAwNzc2ODIzNjAzNCIsCiAgICAgICAgICAvLyAgICAgImNyZWF0ZUJ5IjogImZhd2tlcyIsCiAgICAgICAgICAvLyAgICAgImNyZWF0ZURhdGUiOiAiMjAyMy0wNS0wOSAxNTo1MTo1MSIsCiAgICAgICAgICAvLyAgICAgInVwZGF0ZUJ5IjogbnVsbCwKICAgICAgICAgIC8vICAgICAidXBkYXRlRGF0ZSI6IG51bGwsCiAgICAgICAgICAvLyAgICAgImRlbGV0ZUZsYWciOiAwLAogICAgICAgICAgLy8gICAgICJtYWluUG9pbnQiOiAi5rWL6K+V5byA5ZCv5YWz6Zet5rWL6K+V5byA5ZCv5YWz6Zet5rWL6K+V5byA5ZCv5YWz6Zet5rWL6K+V5byA5ZCv5YWz6ZetIiwKICAgICAgICAgIC8vICAgICAiaW5wdXRUeXBlIjogIuW8gOWQry/lhbPpl60iLAogICAgICAgICAgLy8gICAgICJ1bml0IjogIi8iLAogICAgICAgICAgLy8gICAgICJtYWluU3RhdHVzIjogIuWQr+eUqOS4rSIsCiAgICAgICAgICAvLyAgICAgImJpelR5cGUiOiAi5rGh5rC0IiwKICAgICAgICAgIC8vICAgICAib2JqZWN0VHlwZSI6ICLmo4Dmn6XkupUiLAogICAgICAgICAgLy8gICAgICJyZW1hcmtzIjogbnVsbCwKICAgICAgICAgIC8vICAgICAicG9ydGFsSWQiOiBudWxsLAogICAgICAgICAgLy8gICAgICJ0ZW5hbnRJZCI6IDEwMDAwMCwKICAgICAgICAgIC8vICAgICAibWFpblZhbHVlIjogIuWFs+mXrSIKICAgICAgICAgIC8vICAgfSwKICAgICAgICAgIC8vICAgewogICAgICAgICAgLy8gICAgICJpZCI6ICIxNjU1ODQzMDA3NzY4MjM2MDM1IiwKICAgICAgICAgIC8vICAgICAiY3JlYXRlQnkiOiAiZmF3a2VzIiwKICAgICAgICAgIC8vICAgICAiY3JlYXRlRGF0ZSI6ICIyMDIzLTA1LTA5IDE1OjUxOjUxIiwKICAgICAgICAgIC8vICAgICAidXBkYXRlQnkiOiBudWxsLAogICAgICAgICAgLy8gICAgICJ1cGRhdGVEYXRlIjogbnVsbCwKICAgICAgICAgIC8vICAgICAiZGVsZXRlRmxhZyI6IDAsCiAgICAgICAgICAvLyAgICAgIm1haW5Qb2ludCI6ICLmtYvor5XmmK/lkKbmtYvor5XmmK/lkKbmtYvor5XmmK/lkKbmtYvor5XmmK/lkKYiLAogICAgICAgICAgLy8gICAgICJpbnB1dFR5cGUiOiAi5pivL+WQpiIsCiAgICAgICAgICAvLyAgICAgInVuaXQiOiAiLyIsCiAgICAgICAgICAvLyAgICAgIm1haW5TdGF0dXMiOiAi5ZCv55So5LitIiwKICAgICAgICAgIC8vICAgICAiYml6VHlwZSI6ICLmsaHmsLQiLAogICAgICAgICAgLy8gICAgICJvYmplY3RUeXBlIjogIuajgOafpeS6lSIsCiAgICAgICAgICAvLyAgICAgInJlbWFya3MiOiBudWxsLAogICAgICAgICAgLy8gICAgICJwb3J0YWxJZCI6IG51bGwsCiAgICAgICAgICAvLyAgICAgInRlbmFudElkIjogMTAwMDAwLAogICAgICAgICAgLy8gICAgICJtYWluVmFsdWUiOiAi5pivIgogICAgICAgICAgLy8gICB9LAogICAgICAgICAgLy8gICB7CiAgICAgICAgICAvLyAgICAgImlkIjogIjE2NTU4NDMwMDc3NjgyMzYwMzUiLAogICAgICAgICAgLy8gICAgICJjcmVhdGVCeSI6ICJmYXdrZXMiLAogICAgICAgICAgLy8gICAgICJjcmVhdGVEYXRlIjogIjIwMjMtMDUtMDkgMTU6NTE6NTEiLAogICAgICAgICAgLy8gICAgICJ1cGRhdGVCeSI6IG51bGwsCiAgICAgICAgICAvLyAgICAgInVwZGF0ZURhdGUiOiBudWxsLAogICAgICAgICAgLy8gICAgICJkZWxldGVGbGFnIjogMCwKICAgICAgICAgIC8vICAgICAibWFpblBvaW50IjogIua1i+ivleaVsOWAvOa1i+ivleaVsOWAvOa1i+ivleaVsOWAvOa1i+ivleaVsOWAvCIsCiAgICAgICAgICAvLyAgICAgImlucHV0VHlwZSI6ICLmlbDlgLwiLAogICAgICAgICAgLy8gICAgICJ1bml0IjogIi8iLAogICAgICAgICAgLy8gICAgICJtYWluU3RhdHVzIjogIuWQr+eUqOS4rSIsCiAgICAgICAgICAvLyAgICAgImJpelR5cGUiOiAi5rGh5rC0IiwKICAgICAgICAgIC8vICAgICAib2JqZWN0VHlwZSI6ICLmo4Dmn6XkupUiLAogICAgICAgICAgLy8gICAgICJyZW1hcmtzIjogbnVsbCwKICAgICAgICAgIC8vICAgICAicG9ydGFsSWQiOiBudWxsLAogICAgICAgICAgLy8gICAgICJ0ZW5hbnRJZCI6IDEwMDAwMCwKICAgICAgICAgIC8vICAgICAibWFpblZhbHVlIjogIiIKICAgICAgICAgIC8vICAgfQogICAgICAgICAgLy8gXQogICAgICAgICAgY29uc29sZS5sb2coJ+W9k+WJjeS4muWKoeWPiuiuvuaWveexu+Wei+S4i+eahOW3oeajgOimgeeCuWxpc3QnLCBfY2xvbmVEZWVwKHRoaXMua2V5UG9pbnRzSW5zcGVjdGlvbkxpc3QpKTsKICAgICAgICB9KS5jYXRjaChlcnIgPT4ge30pLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy5zaWduU2hvdyA9IHRydWU7CiAgICAgICAgICAvLyDmnKrlt6Hmo4AKICAgICAgICAgIHRoaXMuaGFzU2lnbkluID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNpZ25Gb3JtLnJlbWFyayA9ICcnOwogICAgICAgICAgdGhpcy5zaWduRm9ybS5saXF1aWRMZXZlbCA9ICcnOwogICAgICAgICAgdGhpcy5zaWduRm9ybS5leHQzID0gZmVhdHVyZS5iaXpUeXBlOwogICAgICAgICAgdGhpcy5zaWduRm9ybS5kZXZpY2VTdGF0dXMgPSAnMCc7CiAgICAgICAgICB0aGlzLnNpZ25Gb3JtLmluc3BJbWFnZXNMaXN0ID0gW107CiAgICAgICAgICB0aGlzLnNpZ25Gb3JtLnBvaW50SWQgPSBmZWF0dXJlLmlkOwogICAgICAgICAgdGhpcy5zaWduRm9ybS50YXNrSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQsIHRoaXMuc2lnbkZvcm0uZmVhdHVyZSA9IGZlYXR1cmU7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IHRvYXN0ID0gVG9hc3QubG9hZGluZyh7CiAgICAgICAgICBtZXNzYWdlOiAn5q2j5Zyo5Yqg6L29JywKICAgICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgICAgbG9hZGluZ1R5cGU6ICdzcGlubmVyJywKICAgICAgICAgIGR1cmF0aW9uOiAwCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5oYXNTaWduSW4gPSB0cnVlOwogICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgc2l6ZTogOTk5LAogICAgICAgICAgZGV2aWNlU3RhdHVzOiBmZWF0dXJlLmRldmljZVN0YXR1cywKICAgICAgICAgIHBvaW50SWQ6IGZlYXR1cmUuaWQsCiAgICAgICAgICB0YXNrSWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tJZAogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdCh7CiAgICAgICAgICB1cmw6ICcveGFzdy1waXBlLW9wZXJhdGlvbi9pbnNwUG9pbnRSZWNvcmQvcGFnZScsCiAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICB9KTsKICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMpIHsKICAgICAgICAgIGxldCByZXN1bHQgPSByZXMuZGF0YS5yZWNvcmRzWzBdOwogICAgICAgICAgdGhpcy5zaWduRm9ybS5kZXZpY2VTdGF0dXMgPSByZXN1bHQuZGV2aWNlU3RhdHVzOwogICAgICAgICAgdGhpcy5zaWduRm9ybS5yZW1hcmsgPSByZXN1bHQuZXh0MTsKICAgICAgICAgIHRoaXMuc2lnbkZvcm0ubGlxdWlkTGV2ZWwgPSByZXN1bHQubGlxdWlkTGV2ZWw7CiAgICAgICAgICB0aGlzLnNpZ25Gb3JtLmlzUmVwb3J0ID0gcmVzdWx0LmlzUmVwb3J0OwogICAgICAgICAgY29uc3QgYXR0ID0gYXdhaXQgcmVxdWVzdCh7CiAgICAgICAgICAgIHVybDogJy94YXN3LXBpcGUtb3BlcmF0aW9uL2luc3BQb2ludFJlY29yZCcsCiAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIGlkOiByZXN1bHQuaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoYXR0ICYmIGF0dC5zdGF0dXMpIHsKICAgICAgICAgICAgdmFyIF9hdHQkZGF0YTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+W3suW3oeajgOWFs+mUrueCueivpuaDheaVsOaNricsIF9jbG9uZURlZXAoYXR0KSk7CiAgICAgICAgICAgIHRoaXMuc2lnbkZvcm0uaW5zcEltYWdlc0xpc3QgPSBhdHQuZGF0YS5pbnNwSW1hZ2VzTGlzdDsKICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50ID0gYXR0LmRhdGEuaW5zcEltYWdlc0xpc3RbMF0uZmlsZUlkOwogICAgICAgICAgICAvLyDlt6Hmo4DopoHngrlsaXN0CiAgICAgICAgICAgIHRoaXMua2V5UG9pbnRzSW5zcGVjdGlvbkxpc3QgPSAoYXR0ID09PSBudWxsIHx8IGF0dCA9PT0gdm9pZCAwIHx8IChfYXR0JGRhdGEgPSBhdHQuZGF0YSkgPT09IG51bGwgfHwgX2F0dCRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXR0JGRhdGEucmVzdWx0TGlzdCkgfHwgW107CiAgICAgICAgICB9CiAgICAgICAgICB0b2FzdC5jbGVhcigpOwogICAgICAgICAgdGhpcy5zaWduU2hvdyA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5rex5ou36LSdCiAgICBkZWVwQ2xvbmUoZGF0YSkgewogICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICB9LAogICAgcmVwb3J0RXZlbnQoZmVhdHVyZSkgewogICAgICB0aGlzLnJlcG9ydEZvb3RlclNob3cgPSBmYWxzZTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvcGFnZXMvaW5zcGVjdGlvbk1hbmFnZS9hZGQtZXZlbnQnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICB0YXNrSWQ6IHRoaXMudGFza0RldGFpbC50YXNrSWQsCiAgICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLAogICAgICAgICAgcmFuZ2VMaXN0OiB0aGlzLnJhbmdlTGlzdCwKICAgICAgICAgIHRhc2tEZXRhaWw6IHRoaXMudGFza0RldGFpbAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgR2V0RGlzdGFuY2UoY29vcmRBcnJheTEsIGNvb3JkQXJyYXkyKSB7CiAgICAgIGxldCBsbmcxID0gY29vcmRBcnJheTFbMF07CiAgICAgIGxldCBsYXQxID0gY29vcmRBcnJheTFbMV07CiAgICAgIGxldCBsbmcyID0gY29vcmRBcnJheTJbMF07CiAgICAgIGxldCBsYXQyID0gY29vcmRBcnJheTJbMV07CiAgICAgIGxldCByYWRMYXQxID0gbGF0MSAqIE1hdGguUEkgLyAxODAuMDsKICAgICAgbGV0IHJhZExhdDIgPSBsYXQyICogTWF0aC5QSSAvIDE4MC4wOwogICAgICBsZXQgYSA9IHJhZExhdDEgLSByYWRMYXQyOwogICAgICBsZXQgYiA9IGxuZzEgKiBNYXRoLlBJIC8gMTgwLjAgLSBsbmcyICogTWF0aC5QSSAvIDE4MC4wOwogICAgICBsZXQgcyA9IDIgKiBNYXRoLmFzaW4oTWF0aC5zcXJ0KE1hdGgucG93KE1hdGguc2luKGEgLyAyKSwgMikgKyBNYXRoLmNvcyhyYWRMYXQxKSAqIE1hdGguY29zKHJhZExhdDIpICogTWF0aC5wb3coTWF0aC5zaW4oYiAvIDIpLCAyKSkpOwogICAgICBzID0gcyAqIDYzNzguMTM3OyAvLyBFQVJUSF9SQURJVVM7CiAgICAgIHMgPSBNYXRoLnJvdW5kKHMgKiAxMDAwMCkgLyAxMDAwMDsKICAgICAgcmV0dXJuIHM7CiAgICB9LAogICAgcmVzZXRNYXBWaWV3KCkgewogICAgICB0aGlzLiRyZWZzLm15bWFwICYmIG1hcE9iai5tYXAucmVzZXROb3J0aFBpdGNoKCk7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgVG9hc3QuY2xlYXIoKTsKICAgIHRoaXMucG9sbGluZ0ZsYWcgPSBmYWxzZTsKICAgIHRoaXMuY2xlYXJCdWZmZXJUcmFjaygpOwogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicGF1c2UiLCB0aGlzLnBhdXNlKTsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc3VtZSIsIHRoaXMucmVzdW1lKTsKICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgewogICAgICB5dWFuY2h1LmxvY2F0aW9uQU1hcC5zdG9wUmVxdWVzdExvY2F0aW9ucygpOwogICAgfQogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3N0YXJ0UmVjb3JkTGluZXMnKTsKICAgIGJ1cy4kb2ZmKCdzdGFydFNpZ25JbicpOwogIH0KfTs="},{"version":3,"names":["bus","axios","dayjs","MapComp","request","api","Toast","Dialog","Notify","turf","Uploader","problemCardInfo","API","_cloneDeep","mapObj","map","mapInstance","pauseStateTrackPoints","pauseStatePipeIdList","name","components","data","showKeyList","buttonList","unInspKeyDetailList","loading","finished","currentSelect","isResume","ifLeaveTask","stopReason","ifEndTask","legendConfig","ifTips","reportDataIsLoaded","allTaskLines","isView","active","deviceName","hasSignIn","showPopover","actions","text","currentRate","pointListShow","startRecordTimer","navbarTitle","reportFailTrackPoints","isShowRoute","inspBusinessType","recordData","currentPosition","lines","userInfo","ifRecording","selectEventType","eventTypeList","signShow","attachment","signForm","deviceStatus","inspImagesList","remark","isReport","taskId","pointId","liquidLevel","taskDetail","coverage","reportRate","planEndTime","engInfoDTO","taskRestTime","reportFooterShow","feature","planDetail","inspRangeList","rangeList","keyDetailList","isRunList","value","reportChose","rules","previewURL","upimgPreview","headers","url","uploadFile","findFile","pollingFlag","pollingGapTime","trackPointList","trackPointTimeList","overSpeedTrackLineList","trackLocation_start","trackLocation_end","showVisible","reportShow","accessToken","$storage","get","header","formToken","problemDataList1","problemDataList2","waterLevelShow","keyPointsInspectionList","computed","buttonAreaStyle","length","created","getCardListData","mounted","document","addEventListener","pause","resume","$store","state","console","log","isStart","localStorage","setItem","that","$off","$on","startSignIn","$route","query","id","getTaskById","getTrackRecordsById","methods","openKeyPointList","goToDeal","obj","startLongitude","startLatitude","flyToPoint","warning","message","duration","changeBizType","type","filter","it","bizType","process","env","VUE_APP_THIRD_REQUEST_URL","method","params","token","Authorization","then","res","status","resultData","getProblemDataList","commonParams","Object","assign","sysCode","page","current","size","params1","smallType","params2","problemPointFeatures","getAxiosData","allProblem","concat","forEach","push","geometry","coordinates","lnglat","properties","title","$refs","mymap","addInspEventLayer","problemDataList","Promise","resolve","reject","records","item","_item$formValue$detai","_item$formValue","_item$formValue2","_item$formValue3","ticketStatusName","handleType","formValue","createByName","createTime","substring","defectFrom","faultTypes","detail","defectType","files","appealLng","appealLat","deviceDetail","longitude","latitude","deviceType","device_type","questionDescribe","toDetailPanel","cardDetail","$router","flyTo","center","zoom","reportClick","setLayoutProperty","loadingType","handleClose","fileChange","file","fileList","fileId","response","groupToken","imagesName","continueTask","stopTask","endRecordConfirm","endTask","hasInspKp","changeToInspCount","allInspKp","changeToAllInspCount","changeToRate","openPopup","onSelect","val","off","signInBuffer","on","selectReportPoint","selectFlawPoint","e","features","queryRenderedFeatures","point","source","addEventObjMarker","gridId","gridName","gridManager","fullName","username","userName","userId","lngLat","getRestTime","time","Date","getTime","includes","Number","split","insp","uninsp","toFixed","mapLoaded","addMapImg","yuanchu","locationAMap","requestSingleLocation","JSON","parse","stringify","param","setInspUserPosition","err","refreshTask","pageNum","pageSize","toast","forbidClick","recordLines","recordedPipeLine","pipeId","bizScope","taskType","inspTask","inspPlan","detailList","range","setTimeout","label","clickFlag","isNew","taskStatus","startOrEndTaskRecord","getAllTaskLines","devType","list","geom","setAllInspLineSource","kpRes","keys","completion","taskName","timer","setInterval","clearInterval","isOnLoaded","addKeyPoints","addRangeList","extParam","task_id","addInspRecordTileLineSource","clear","icon","upLoadPauseStateTrackPoints","deepClone","upLoadPauseStatePipeIdList","recordInspLine","splice","uploadFiledPipeIdList","catch","inspectionTrack","polling","requestLocations","drawInspLine","position","direction","locType","lastPoint","distance","GetDistance","postTrackData_Point","promise","changeInspLineSourceBySpeed","r","locTime","jsonLine","coord","parseFloat","setSourceData","jsonLineFeatureCollection","getSource","setData","addSource","getLayer","addLayer","layout","visibility","paint","buffered","buffer","unit","changeInspLineState","geoTransToPixel","polygonBox","bbox","southWest","northEast","southWestPointPixel","project","northEastPointPixel","x","y","chunk","boxFeatures","layers","tempPipeList","feat","result","booleanDisjoint","isInsp","setFeatureState","date","$dayjs","format","inspDate","ext3","pipeLength","error","drawStartPoint","inspTime","inspector","userFullName","jsonPoint","jsonPointFeatureCollection","drawEndPoint","close","info","stopRequestLocations","postFailTrackData","success","go","pointData","timeData","p","date_now","userFullname","planId","taskCode","ext1","planStartTime","changeTaskStatus","onClose","clearBufferTrack","loadImage","require","image","hasImage","addImage","startInspRecord","endRecord","diff","Math","floor","startLocation","goEventOrFlawDetail","currentPoint","bigType","lng","lat","road_name","road","code","deviceId","msg","from","onConfirm","copySignForm","ext2","resultList","textInFlag","mainId","mainPoint","mainValue","inputType","i","trim","signIn","onCancel","cancelLeave","confirmLeave","clickBack","engGeom","isInBuffer","inside","params4","objectType","inspPointCheckList","_res$data","mainStatus","iT","indexOf","$set","finally","att","_att$data","reportEvent","path","coordArray1","coordArray2","lng1","lat1","lng2","lat2","radLat1","PI","radLat2","a","b","s","asin","sqrt","pow","sin","cos","round","resetMapView","resetNorthPitch","beforeDestroy","removeEventListener","removeItem"],"sources":["src/views/inspectionManage/daily-task.vue"],"sourcesContent":["<template>\r\n  <div class=\"task-map full-width\">\r\n    <!-- 导航栏 -->\r\n    <div class=\"navbar-box\">\r\n      <fm-nav-bar :title=\"navbarTitle\" left-arrow @click-left=\"clickBack\" @click-right=\"openPopup\">\r\n        <template #right>\r\n          <fm-popover :visible.sync=\"showPopover\" trigger=\"click\" :actions=\"actions\" @select=\"onSelect\"\r\n            placement=\"bottom-end\">\r\n            <template #reference>\r\n              <img style=\"width: 34px\" v-if=\"!isView\" :src=\"require('@/assets/img/inspection/增加.png')\" />\r\n            </template>\r\n          </fm-popover>\r\n        </template>\r\n      </fm-nav-bar>\r\n    </div>\r\n    <!-- 地图 -->\r\n    <MapComp ref=\"mymap\" :ifInspection=\"true\" @mapLoaded=\"mapLoaded\" :legendConfig=\"legendConfig\"></MapComp>\r\n    <!-- <fm-popup\r\n      :visible.sync=\"pointListShow\"\r\n      close-on-click-modal\r\n      :close-on-popstate=\"true\"\r\n      position=\"bottom\"\r\n      safe-area-inset-bottom\r\n    >\r\n      <fm-tabs type=\"card\" style=\"padding-top: 20px\">\r\n        <fm-tab label=\"未上报关键点\">\r\n          <fm-empty v-if=\"keyDetailList.length <= 0\" description=\"暂无数据\" mode=\"list\"></fm-empty>\r\n        </fm-tab>\r\n        <fm-tab label=\"已上报关键点\">\r\n          <fm-empty v-if=\"keyDetailList.length <= 0\" description=\"暂无数据\" mode=\"list\"></fm-empty>\r\n        </fm-tab>\r\n      </fm-tabs>\r\n    </fm-popup> -->\r\n    <!-- 开始记录与结束记录 -->\r\n    <div class=\"start-record\" v-show=\"!isView\">\r\n      <img v-if=\"!ifRecording\" :src=\"require('@/assets/img/inspection/暂停.png')\" @click=\"startInspRecord\" />\r\n      <img v-else :src=\"require('@/assets/img/inspection/开始.png')\" @click=\"endRecord('pause')\" />\r\n    </div>\r\n    <!-- 数据面板 -->\r\n    <div class=\"controlCard\" v-show=\"!isView\">\r\n      <div class=\"controlContent\">\r\n        <div class=\"infoContent\">\r\n          <div class=\"endControl\">\r\n            <div class=\"leftText\">\r\n              <img :src=\"require('@/assets/img/inspection/剩余时间.png')\" />\r\n              <fm-count-down style=\"margin: auto\" :time=\"getRestTime(taskDetail.taskEndTime)\" format=\"DD天HH小时\" />\r\n            </div>\r\n            <div class=\"rightButton\">\r\n              <fm-button v-show=\"ifRecording\" class=\"endBtn\" round @click=\"endTask\">结束</fm-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"bottomSide\">\r\n            <div class=\"block\">\r\n              <div class=\"rate\" style=\"font-size: 18px\">\r\n                <div class=\"centerStyle\">\r\n                  {{ changeToRate(taskDetail.coverage) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"name\" style=\"font-size: 14px\">覆盖率</div>\r\n            </div>\r\n\r\n            <div class=\"block\" @click=\"openKeyPointList\" style=\"cursor: pointer;\">\r\n              <div class=\"rate\">\r\n                <div class=\"centerStyle\">\r\n                  <div class=\"inspKp\" style=\"font-size: 19px\">\r\n                    {{ changeToInspCount(taskDetail.reportRate) }}\r\n                  </div>\r\n                  <div class=\"uninspKp\" style=\"font-size: 14px\">\r\n                    /{{ changeToAllInspCount(taskDetail.reportRate) }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"name\" style=\"font-size: 14px\">关键点</div>\r\n            </div>\r\n\r\n            <div class=\"block\" @click=\"reportClick\" style=\"cursor: pointer;\">\r\n              <div class=\"rate\" style=\"font-size: 18px\">\r\n                <div class=\"centerStyle\">\r\n                  {{ problemDataList1.length + problemDataList2.length }}\r\n                </div>\r\n              </div>\r\n              <div class=\"name\" style=\"font-size: 14px\">上报</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"viewCard\" v-show=\"isView\">\r\n      <div class=\"controlContent\">\r\n        <div class=\"infoContent\">\r\n          <div class=\"bottomSide\">\r\n            <div class=\"block\">\r\n              <div class=\"rate\" style=\"font-size: 18px\">\r\n                <div class=\"centerStyle\">\r\n                  {{ changeToRate(taskDetail.coverage) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"name\" style=\"font-size: 14px\">覆盖率</div>\r\n            </div>\r\n\r\n            <div class=\"block\" @click=\"openKeyPointList\" style=\"cursor: pointer;\">\r\n              <div class=\"rate\">\r\n                <div class=\"centerStyle\">\r\n                  <div class=\"inspKp\" style=\"font-size: 19px\">\r\n                    {{ changeToInspCount(taskDetail.reportRate) }}\r\n                  </div>\r\n                  <div class=\"uninspKp\" style=\"font-size: 14px\">\r\n                    /{{ changeToAllInspCount(taskDetail.reportRate) }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"name\" style=\"font-size: 14px\">关键点</div>\r\n            </div>\r\n\r\n            <div class=\"block\" @click=\"reportClick\" style=\"cursor: pointer;\">\r\n              <div class=\"rate\" style=\"font-size: 18px\">\r\n                <div class=\"centerStyle\">\r\n                  {{ problemDataList1.length + problemDataList2.length }}\r\n                </div>\r\n              </div>\r\n              <div class=\"name\" style=\"font-size: 14px\">上报</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 轨迹显示与定位功能 -->\r\n    <div class=\"tool-box\">\r\n      <div class=\"location\" @click=\"startLocation\">\r\n        <fm-image class=\"location-image\" :src=\"require('@/assets/img/inspection/location.png')\"></fm-image>\r\n      </div>\r\n    </div>\r\n    <!-- 签到框 -->\r\n    <fm-popup :visible.sync=\"signShow\" :modal=\"false\" round position=\"bottom\"\r\n      :style=\"{ height: signForm.deviceStatus == '1' ? '60%' : '50%' }\">\r\n      <div class=\"popup-view\">\r\n        <fm-form ref=\"signForm\">\r\n          <div class=\"title\">\r\n            <img :src=\"require('@/assets/img/inspection/sideIcon.png')\" />\r\n            <div class=\"deviceId\">{{ deviceName }}</div>\r\n          </div>\r\n          <fm-field :name=\"signForm.deviceStatus\" error label=\"运行情况\" required>\r\n            <template #input>\r\n              <fm-radio-group v-model=\"signForm.deviceStatus\" :disabled=\"hasSignIn\" direction=\"horizontal\">\r\n                <fm-radio name=\"0\">正常</fm-radio>\r\n                <fm-radio name=\"1\">异常</fm-radio>\r\n              </fm-radio-group>\r\n            </template>\r\n          </fm-field>\r\n          <fm-field v-if=\"signForm.deviceStatus == '1'\" :disabled=\"hasSignIn\" label=\"是否上报\" required>\r\n          </fm-field>\r\n          <fm-field :name=\"signForm.isReport\" v-if=\"signForm.deviceStatus == '1'\">\r\n            <template #input>\r\n              <fm-radio-group v-model=\"signForm.isReport\" :disabled=\"hasSignIn\" direction=\"horizontal\">\r\n                <fm-radio v-for=\"(item, index) in reportChose\" :key=\"index\" :name=\"item.value\">{{ item.name }}\r\n                </fm-radio>\r\n              </fm-radio-group>\r\n            </template>\r\n          </fm-field>\r\n\r\n          <!--\r\n            { value: \"正常/异常\", label: \"正常/异常\" },\r\n            { value: \"开启/关闭\", label: \"开启/关闭\" },\r\n            { value: \"是/否\", label: \"是/否\" },\r\n            { value: \"数值\", label: \"数值\" },\r\n          -->\r\n          <!-- 巡检要点list，已巡检和未巡检要点从不同接口中获取 -->\r\n          <fm-field v-for=\"(item, index) in keyPointsInspectionList\" :key=\"item.id\" :label=\"item.mainPoint\" required>\r\n            <template #input>\r\n              <fm-radio-group v-if=\"item.inputType == '正常/异常' || item.ext1 == '正常/异常'\" v-model=\"item.mainValue\" :disabled=\"hasSignIn\">\r\n                <fm-radio name=\"正常\">正常</fm-radio>\r\n                <fm-radio name=\"异常\">异常</fm-radio>\r\n              </fm-radio-group>\r\n              <fm-radio-group v-if=\"item.inputType == '开启/关闭' || item.ext1 == '开启/关闭'\" v-model=\"item.mainValue\" :disabled=\"hasSignIn\">\r\n                <fm-radio name=\"开启\">开启</fm-radio>\r\n                <fm-radio name=\"关闭\">关闭</fm-radio>\r\n              </fm-radio-group>\r\n              <fm-radio-group v-if=\"item.inputType == '是/否' || item.ext1 == '是/否'\" v-model=\"item.mainValue\" :disabled=\"hasSignIn\">\r\n                <fm-radio name=\"是\">是</fm-radio>\r\n                <fm-radio name=\"否\">否</fm-radio>\r\n              </fm-radio-group>\r\n              <fm-field v-if=\"item.inputType == '数值' || item.ext1 == '数值'\" type=\"number\" v-model=\"item.mainValue\" :disabled=\"hasSignIn\" />\r\n            </template>\r\n          </fm-field>\r\n\r\n          <uploader v-model=\"attachment\" @fileChange=\"fileChange\" multiple :maxImagesCount=\"2\" :deletable=\"!hasSignIn\" :disabled=\"hasSignIn\"\r\n            type=\"image\" />\r\n          <fm-field v-if=\"waterLevelShow\" label=\"液位（米）\" type=\"number\" required name=\"liquidLevel\" placehold=\"请输入液位\" :disabled=\"hasSignIn\"\r\n            v-model=\"signForm.liquidLevel\">\r\n          </fm-field>\r\n          <fm-field label=\"备注\" name=\"remark\" type=\"textarea\" placehold=\"请输入\" :disabled=\"hasSignIn\"\r\n            v-model=\"signForm.remark\">\r\n          </fm-field>\r\n        </fm-form>\r\n      </div>\r\n      <div class=\"btnArea\" v-show=\"!hasSignIn\">\r\n        <fm-button class=\"btn1\" @click=\"onCancel\" round type=\"default\">取消</fm-button>\r\n        <fm-button class=\"btn2\" @click=\"onConfirm\" round type=\"primary\">提交</fm-button>\r\n      </div>\r\n      <div class=\"btnArea\" v-show=\"hasSignIn\">\r\n        <fm-button class=\"btn\" @click=\"onCancel\" round type=\"default\">关闭</fm-button>\r\n      </div>\r\n    </fm-popup>\r\n    <fm-popup :visible.sync=\"reportShow\" @close=\"handleClose\" round position=\"bottom\"\r\n      :overlay-style=\"{ background: 'rgba(0, 0, 0, 0.1)' }\" :style=\"{ height: '50%' }\">\r\n      <fm-tabs v-model=\"active\" swipeable style=\"height: 100%\">\r\n        <fm-tab label=\"问题上报\">\r\n          <div v-for=\"(item, index) in problemDataList1\" :key=\"index\">\r\n            <problemCardInfo type=\"001\" :cardInfo=\"item\" @toDetailPanel=\"toDetailPanel\" @flyToPoint=\"flyToPoint\">\r\n            </problemCardInfo>\r\n          </div>\r\n        </fm-tab>\r\n        <fm-tab label=\"设施缺陷\">\r\n          <div v-for=\"(item, index) in problemDataList2\" :key=\"index\">\r\n            <problemCardInfo type=\"002\" :cardInfo=\"item\" @toDetailPanel=\"toDetailPanel\" @flyToPoint=\"flyToPoint\">\r\n            </problemCardInfo>\r\n          </div>\r\n        </fm-tab>\r\n      </fm-tabs>\r\n    </fm-popup>\r\n\r\n    <!-- 提示层 -->\r\n    <div v-show=\"ifTips\" class=\"tip-tools\">\r\n      <img :src=\"require('@/assets/img/tips.png')\" class=\"tipImg\" />\r\n      <div class=\"context\">请在地图上选择设施或者点位</div>\r\n    </div>\r\n    <fm-overlay :show=\"ifEndTask\" z-index=\"10\">\r\n      <div class=\"confirm-tip\">\r\n        <div class=\"contentSelf\">\r\n          <div class=\"icon\">\r\n            <img :src=\"require('@/assets/img/inspection/终止.png')\" width=\"60\" style=\"margin: auto\" />\r\n          </div>\r\n          <div class=\"info\">\r\n            <span>{{ `您还有${changeToAllInspCount(taskDetail.reportRate) - changeToInspCount(taskDetail.reportRate)}个关键点未打卡，确定提前中止巡检任务？` }}</span>\r\n          </div>\r\n          <div class=\"input\">\r\n            <fm-field v-model=\"stopReason\" placeholder=\"请输入终止原因\" rows=\"3\" autosize type=\"textarea\" maxlength=\"200\" show-word-limit></fm-field>\r\n          </div>\r\n        </div>\r\n        <div class=\"confirm_btn\">\r\n          <div class=\"btn1 btn2\" @click=\"continueTask\">继续任务</div>\r\n          <div class=\"btn1\" @click=\"stopTask\">中止任务</div>\r\n        </div>\r\n      </div>\r\n    </fm-overlay>\r\n    <fm-overlay :show=\"ifLeaveTask\" z-index=\"10\">\r\n      <div class=\"confirm-tip\">\r\n        <div class=\"contentSelf\">\r\n          <div class=\"icon\">\r\n            <img :src=\"require('@/assets/img/inspection/终止.png')\" width=\"60\" style=\"margin: auto\" />\r\n          </div>\r\n          <div class=\"info\">\r\n            <span>{{ '当前为巡检状态，继续退出会暂停巡检，请确定是否退出?' }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"confirm_btn\">\r\n          <div class=\"btn1 btn2\" @click=\"cancelLeave\">取消</div>\r\n          <div class=\"btn1\" @click=\"confirmLeave\">退出</div>\r\n        </div>\r\n      </div>\r\n    </fm-overlay>\r\n    <!-- 关键点列表 -->\r\n    <div class=\"content\" :class=\"showKeyList ? '' : 'inactive'\">\r\n      <div class=\"contentArea\">\r\n        <div style=\"overflow-x: scroll; height: 74px;\">\r\n          <div class=\"buttonArea\" :style=\"buttonAreaStyle\">\r\n            <fm-button\r\n              round\r\n              v-for=\"it of buttonList\"\r\n              :key=\"it\"\r\n              class=\"button\"\r\n              :style=\"currentSelect == it ? { 'color': '#1B67D8', 'background': '#DDE8F9' } : {}\"\r\n              @click=\"changeBizType(it)\"\r\n            >{{ it }}</fm-button>\r\n          </div>\r\n        </div>\r\n        <div class=\"listArea\">\r\n          <fm-list\r\n            v-model=\"loading\"\r\n            :finished=\"finished\"\r\n            finished-text=\"到底了\"\r\n          >\r\n            <div v-for=\"(it, idx) of unInspKeyDetailList\" :key=\"it.id\" class=\"list\">\r\n              <div class=\"list_num\">{{ idx + 1 }}</div>\r\n              <div class=\"list_type\">{{ it.deviceType || '' }}</div>\r\n              <div class=\"list_id\">{{ it.deviceId || '' }}</div>\r\n              <div class=\"list_deal\" @click=\"goToDeal(it)\">\r\n                定位\r\n                <img\r\n                  width=\"24\"\r\n                  height=\"24\"\r\n                  style=\"margin: auto 0 auto 4px;\"\r\n                  :src=\"require('@/assets/img/maintenance/deal.png')\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </fm-list>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport bus from '../../views/inspectMap/utils/Bus.js'\r\nimport axios from 'axios'\r\nimport dayjs from 'dayjs'\r\nimport MapComp from '../../views/inspectMap/index.vue'\r\nimport request from '@/utils/request'\r\nimport * as api from './api'\r\nimport { Toast, Dialog, Notify } from 'fawkes-mobile-lib'\r\nimport * as turf from '@turf/turf'\r\nimport Uploader from '@/components/upload/Uploader.vue'\r\nimport problemCardInfo from './problemCardInfo';\r\nimport API from \"@/common/config.js\";\r\nimport _cloneDeep from 'lodash/cloneDeep'\r\nconst mapObj = {\r\n  map: null,\r\n  mapInstance: null,\r\n}\r\nlet pauseStateTrackPoints = []\r\nlet pauseStatePipeIdList = []\r\nexport default {\r\n  name: 'daily-task',\r\n  components: {\r\n    MapComp,\r\n    Uploader,\r\n    problemCardInfo\r\n  },\r\n  data() {\r\n    return {\r\n      showKeyList: false,\r\n      buttonList: [],\r\n      unInspKeyDetailList: [],\r\n      loading: false,\r\n      finished: true,\r\n      currentSelect: '全部',\r\n      isResume: true,\r\n      ifLeaveTask: false,\r\n      stopReason: '',\r\n      ifEndTask: false,\r\n      legendConfig: [],\r\n      ifTips: false,\r\n      reportDataIsLoaded: false,\r\n      // 巡检任务下所有巡检管线\r\n      allTaskLines: [],\r\n      isView: true,\r\n      active: 0,\r\n      deviceName: '',\r\n      hasSignIn: false,\r\n      showPopover: false,\r\n      actions: [\r\n        {\r\n          text: '问题上报',\r\n        },\r\n        {\r\n          text: '设施缺陷',\r\n        },\r\n      ],\r\n      currentRate: 0,\r\n      // 控制关键点列表显隐\r\n      pointListShow: false,\r\n      // 全局发声函数\r\n      // 记录开始巡检的时间，用于判断是否在开始巡检的10s内\r\n      startRecordTimer: '',\r\n      navbarTitle: '日常任务',\r\n      // 上报失败的巡检轨迹点位数组\r\n      reportFailTrackPoints: [],\r\n      isShowRoute: true,\r\n      inspBusinessType: '',\r\n      recordData: [],\r\n      // 当前巡检员所处位置\r\n      currentPosition: null,\r\n      lines: [],\r\n      // 巡检员信息\r\n      userInfo: {},\r\n      ifRecording: false,\r\n      selectEventType: false,\r\n      eventTypeList: [],\r\n      signShow: false,\r\n      attachment: '',\r\n      signForm: {\r\n        deviceStatus: '1',\r\n        inspImagesList: [],\r\n        remark: '',\r\n        isReport: '',\r\n        taskId: '',\r\n        pointId: '',\r\n        liquidLevel: '',\r\n      },\r\n      taskDetail: {\r\n        coverage: '0/0',\r\n        reportRate: '0/0',\r\n        planEndTime: '',\r\n      },\r\n      engInfoDTO: {},\r\n      taskRestTime: 0,\r\n      reportFooterShow: false,\r\n      feature: {},\r\n      planDetail: {},\r\n      // 用于地图中显示范围和关键点\r\n      inspRangeList: [],\r\n      rangeList: [],\r\n      keyDetailList: [],\r\n      isRunList: [\r\n        {\r\n          name: '正常',\r\n          value: '1',\r\n        },\r\n        {\r\n          name: '异常',\r\n          value: '0',\r\n        },\r\n      ],\r\n      reportChose: [\r\n        {\r\n          name: '问题上报',\r\n          value: '问题上报',\r\n        },\r\n        {\r\n          name: '新增缺陷',\r\n          value: '新增缺陷',\r\n        },\r\n        {\r\n          name: '无需上报',\r\n          value: '无需上报',\r\n        },\r\n      ],\r\n      rules: {\r\n      },\r\n      previewURL: '/sys-storage/download_image?f8s=',\r\n      upimgPreview: [],\r\n      headers: {},\r\n      url: {\r\n        // 本页面使用到的url\r\n        uploadFile: 'sys-storage/upload',\r\n        findFile: 'ecidi-cmp/file/cmpFileGroup/findFilesByGroupId',\r\n      },\r\n      pollingFlag: false,\r\n      pollingGapTime: 3,\r\n      trackPointList: [],\r\n      trackPointTimeList: [],\r\n      overSpeedTrackLineList: [],\r\n      trackLocation_start: '',\r\n      trackLocation_end: '',\r\n      showVisible: false,\r\n      reportShow: false, // 问题上报面板显示\r\n      accessToken: this.$storage.get('access_token'),\r\n      header: {},\r\n      formToken: '',\r\n      // 问题上报list\r\n      problemDataList1: [],\r\n      // 设施缺陷list\r\n      problemDataList2: [],\r\n      // 液位输入框是否显示\r\n      waterLevelShow: false,\r\n      // 巡检要点list数据\r\n      keyPointsInspectionList: [],\r\n    }\r\n  },\r\n  computed: {\r\n    buttonAreaStyle() {\r\n      return {\r\n        '--width': this.buttonList.length * (80 + 10) + 'px',\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    // 获取问题上报和设施缺陷数据\r\n    this.getCardListData()\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"pause\", this.pause, false)\r\n    document.addEventListener(\"resume\", this.resume, false)\r\n    this.userInfo = this.$store.state.userInfo\r\n    console.log('this.userInfo: ', this.userInfo);\r\n    this.isStart = false\r\n    localStorage.setItem('startRecordLines', 'end')\r\n    this.navbarTitle = '日常任务'\r\n    let that = this\r\n    bus.$off('startSignIn').$on('startSignIn', (feature) => {\r\n      that.startSignIn(feature)\r\n    })\r\n    this.isView = this.$route.query.isView\r\n    const id = this.$route.query.taskId\r\n    this.getTaskById(id)\r\n    this.getTrackRecordsById(id)\r\n  },\r\n  methods: {\r\n    openKeyPointList() {\r\n      this.showKeyList = true\r\n    },\r\n    goToDeal(obj) {\r\n      if (obj.startLongitude && obj.startLatitude) {\r\n        this.flyToPoint([obj.startLongitude, obj.startLatitude])\r\n      } else {\r\n        Toast.warning({\r\n          message: '当前设施无地理坐标信息',\r\n          duration: 2000\r\n        })\r\n        return\r\n      }\r\n    },\r\n    changeBizType(type) {\r\n      this.currentSelect = type\r\n      this.unInspKeyDetailList = []\r\n      if (type == '全部') {\r\n        this.unInspKeyDetailList = this.keyDetailList.filter(it => !it.deviceStatus)\r\n      } else {\r\n        this.unInspKeyDetailList = this.keyDetailList.filter(it => !it.deviceStatus && it.bizType == type)\r\n      }\r\n    },\r\n    // 获取问题上报和设施缺陷数据\r\n    getCardListData() {\r\n      // 获取header，查询工单用\r\n      axios({\r\n        url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/userCenterApi/sso/tokenByToken',\r\n        method: 'post',\r\n        params: {\r\n          token: this.accessToken,\r\n        },\r\n        headers: {\r\n          Authorization: 'Basic b3V0d29yazp3cGcyMDIw',\r\n        },\r\n      }).then((res) => {\r\n        if (res.status == 200) {\r\n          this.formToken = res.data.resultData.token\r\n          this.header = {\r\n            'Content-Type': 'application/json',\r\n            Authorization: 'Bearer ' + this.formToken,\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async getProblemDataList(params) {\r\n      this.problemDataList1 = []\r\n      this.problemDataList2 = []\r\n\r\n      let commonParams = Object.assign({\r\n        sysCode: 'outwork',\r\n        // token: this.accessToken,\r\n        page: {\r\n          current: 1,\r\n          size: 99999, // 查全部\r\n        }\r\n      }, params)\r\n      // 问题上报\r\n      let params1 = {\r\n        ...commonParams,\r\n        smallType: 'abnormal_inform'\r\n      }\r\n      // 设施缺陷\r\n      let params2 = {\r\n        ...commonParams,\r\n        smallType: 'defect'\r\n      }\r\n      let problemPointFeatures = []\r\n      // 问题上报\r\n      await this.getAxiosData(params1, this.problemDataList1)\r\n      // 设施缺陷\r\n      await this.getAxiosData(params2, this.problemDataList2)\r\n      let allProblem = this.problemDataList1.concat(this.problemDataList2)\r\n      allProblem.forEach(it => {\r\n        problemPointFeatures.push({\r\n          type: 'Feature',\r\n          geometry: {\r\n            type: 'Point',\r\n            coordinates: it.lnglat\r\n          },\r\n          properties: {\r\n            id: it.id,\r\n            title: it.title\r\n          }\r\n        })\r\n      })\r\n      this.$refs.mymap.addInspEventLayer(problemPointFeatures)\r\n      this.reportDataIsLoaded = true\r\n    },\r\n    getAxiosData(params, problemDataList) {\r\n      return new Promise((resolve, reject) => {\r\n        axios({\r\n          url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/outworkapi/ticketStatisticClient/getTicketList',\r\n          method: 'post',\r\n          data: params,\r\n          headers: this.header,\r\n        }).then((res) => {\r\n          if (res.status == 200) {\r\n            res.data.resultData.records.forEach((item) => {\r\n              console.log('item: ', item);\r\n              problemDataList.push({\r\n                id: item.id, // 工单ID\r\n                title: item.title, // 工单标题\r\n                ticketStatusName: item.ticketStatusName,\r\n                handleType: item.formValue.handleType, // 描述\r\n                createByName: item.createByName, // 创建人\r\n                createTime: item.createTime.substring(0, 10), // 创建时间\r\n                defectFrom: item.formValue.defectFrom,\r\n                faultTypes: item.formValue.detail?.defectType || item.formValue.faultTypes,\r\n                // fileUrl: item.formValue?.handleImgs?.[0]?.fileUrl,\r\n                // 图片地址\r\n                url: item.formValue?.files?.[0]?.url,\r\n                // 发生经纬度\r\n                lnglat: [item.appealLng, item.appealLat] || [item.formValue.deviceDetail.longitude, item.formValue.deviceDetail.latitude],\r\n                // deviceType: item.formValue?.deviceType || [],\r\n                deviceType: item.formValue?.deviceType || item.formValue?.device_type || [],\r\n                questionDescribe: item.formValue.questionDescribe,\r\n              })\r\n            })\r\n            resolve()\r\n          }\r\n          // problemDataList.forEach((item) => {\r\n          //   // console.log('图片地址', item.url)\r\n          // })\r\n        })\r\n      })\r\n    },\r\n    // 问题上报点击标题、设施缺陷点击卡片进入详情页  \r\n    toDetailPanel(cardDetail) {\r\n      this.$router.push({\r\n        name: 'detailProblemOrder',\r\n        query: { id: cardDetail.id }\r\n      })\r\n    },\r\n    // 卡片定位\r\n    flyToPoint(lnglat) {\r\n      mapObj.map.flyTo({ center: lnglat, zoom: 17.5 })\r\n    },\r\n    // 上报\r\n    reportClick() {\r\n      if (this.reportDataIsLoaded) {\r\n        this.reportShow = true\r\n        mapObj.map.setLayoutProperty('eventPointsLayer', 'visibility', 'visible')\r\n      } else {\r\n        Toast.loading({\r\n          message: '上报数据加载中。。。',\r\n          loadingType: 'spinner',\r\n          duration: 1500\r\n        })\r\n        return\r\n      }\r\n    },\r\n    handleClose() {\r\n      mapObj.map.setLayoutProperty('eventPointsLayer', 'visibility', 'none')\r\n    },\r\n    fileChange(file) {\r\n      this.signForm.inspImagesList = []\r\n      if (file.fileList.length == 0) {\r\n        this.attachment = ''\r\n      }\r\n      file.fileList.forEach(it => {\r\n        this.signForm.inspImagesList.push(\r\n          {\r\n            fileId: it.response.groupToken,\r\n            imagesName: it.url\r\n          }\r\n        )\r\n      })\r\n      console.log(this.signForm)\r\n    },\r\n    continueTask() {\r\n      this.stopReason = ''\r\n      this.ifEndTask = false\r\n    },\r\n    stopTask() {\r\n      if (this.stopReason == '') {\r\n        Toast.warning({\r\n          message: '请输入终止原因',\r\n          duration: 1500\r\n        })\r\n        return\r\n      }\r\n      this.ifEndTask = false\r\n      this.endRecordConfirm('end')\r\n    },\r\n    async endTask() {\r\n      if (this.isView) {\r\n        Toast({\r\n          message: '该巡检任务已结束',\r\n          duration: 1500\r\n        })\r\n        return\r\n      }\r\n      // bus.$off('updateData')\r\n      await this.getTaskById(this.$route.query.taskId)\r\n      let hasInspKp = this.changeToInspCount(this.taskDetail.reportRate)\r\n      let allInspKp = this.changeToAllInspCount(this.taskDetail.reportRate)\r\n      if ((allInspKp - hasInspKp == 0) && this.changeToRate(this.taskDetail.coverage) == '100%') {\r\n        this.endRecordConfirm('end')\r\n      } else {\r\n        this.ifEndTask = true\r\n      }\r\n    },\r\n    openPopup() {\r\n      if (this.isView) {\r\n        return\r\n      }\r\n      this.showPopover = true\r\n    },\r\n    onSelect(val) {\r\n      if (this.isView) {\r\n        Toast({\r\n          message: '该巡检任务已结束',\r\n          duration: '1500'\r\n        })\r\n        return\r\n      }\r\n      this.ifTips = true\r\n      mapObj.map.off('click', 'keypointsLayer', this.$refs.mymap.signInBuffer)\r\n      val.text == '问题上报' ? mapObj.map.on('click', this.selectReportPoint) : mapObj.map.on('click', this.selectFlawPoint)\r\n    },\r\n    selectReportPoint(e) {\r\n      let features = mapObj.map.queryRenderedFeatures(e.point)\r\n      if (this.ifTips) {\r\n        this.ifTips = false\r\n      }\r\n      if (features.length > 0) {\r\n        if (\r\n          features[0].source != \"inspUser\"\r\n          // && features[0].source != \"initInspLineSource\" \r\n          && features[0].source != \"keypoints\"\r\n          && (features[0].geometry.type === \"Point\")\r\n        ) {\r\n          this.$refs.mymap.addEventObjMarker(features[0], 'device', 'event', { gridId: this.planDetail.gridId, gridName: this.planDetail.gridName, gridManager: { fullName: this.planDetail.gridManager, username: this.planDetail.userName, userId: this.planDetail.userId } });\r\n        } else if (features.length > 1\r\n          && features[1].source != \"eventPoints\"\r\n          && features[1].source != \"inspUser\"\r\n          && features[1].source != \"keypoints\"\r\n          && (features[1].geometry.type === \"Point\")\r\n        ) {\r\n          this.$refs.mymap.addEventObjMarker(features[1], 'device', 'event', { gridId: this.planDetail.gridId, gridName: this.planDetail.gridName, gridManager: { fullName: this.planDetail.gridManager, username: this.planDetail.userName, userId: this.planDetail.userId } });\r\n        }\r\n      } else {\r\n        this.$refs.mymap.addEventObjMarker(e.lngLat, 'lnglat', 'event', { gridId: this.planDetail.gridId, gridName: this.planDetail.gridName, gridManager: { fullName: this.planDetail.gridManager, username: this.planDetail.userName, userId: this.planDetail.userId } });\r\n      }\r\n      mapObj.map.on('click', 'keypointsLayer', this.$refs.mymap.signInBuffer)\r\n      mapObj.map.off('click', this.selectReportPoint)\r\n    },\r\n    selectFlawPoint(e) {\r\n      let features = mapObj.map.queryRenderedFeatures(e.point)\r\n      if (this.ifTips) {\r\n        this.ifTips = false\r\n      }\r\n      if (features.length > 0) {\r\n        if (\r\n          features[0].source != \"eventPoints\"\r\n          && features[0].source != \"inspUser\"\r\n          // && features[0].source != \"initInspLineSource\" \r\n          && features[0].source != \"keypoints\"\r\n          && (features[0].geometry.type === \"Point\")\r\n        ) {\r\n          this.$refs.mymap.addEventObjMarker(features[0], 'device', 'flaw', { gridId: this.planDetail.gridId, gridName: this.planDetail.gridName });\r\n        } else if (features.length > 1\r\n          && features[1].source != \"eventPoints\"\r\n          && features[1].source != \"inspUser\"\r\n          && features[1].source != \"keypoints\"\r\n          && (features[1].geometry.type === \"Point\")\r\n        ) {\r\n          this.$refs.mymap.addEventObjMarker(features[1], 'device', 'flaw', { gridId: this.planDetail.gridId, gridName: this.planDetail.gridName });\r\n        }\r\n      } else {\r\n        this.$refs.mymap.addEventObjMarker(e.lngLat, 'lnglat', 'flaw', { gridId: this.planDetail.gridId, gridName: this.planDetail.gridName });\r\n      }\r\n      mapObj.map.on('click', 'keypointsLayer', this.$refs.mymap.signInBuffer)\r\n      mapObj.map.off('click', this.selectFlawPoint)\r\n    },\r\n    getRestTime(time) {\r\n      return time ? new Date(time).getTime() - new Date().getTime() : 0\r\n    },\r\n    changeToInspCount(reportRate) {\r\n      if (reportRate.includes('/')) {\r\n        return Number(reportRate.split('/')[0])\r\n      } else {\r\n        return 0\r\n      }\r\n    },\r\n    changeToAllInspCount(reportRate) {\r\n      if (reportRate.includes('/')) {\r\n        return Number(reportRate.split('/')[1])\r\n      } else {\r\n        return 0\r\n      }\r\n    },\r\n    changeToRate(coverage) {\r\n      if (coverage.includes('/')) {\r\n        let insp = Number(coverage.split('/')[0])\r\n        let uninsp = Number(coverage.split('/')[1])\r\n        if (uninsp) {\r\n          return ((insp / uninsp) * 100).toFixed(2) + '%'\r\n        } else {\r\n          return '0%'\r\n        }\r\n      } else {\r\n        return '0%'\r\n      }\r\n    },\r\n    mapLoaded(mapInstance) {\r\n      console.log('mapLoadedddddddd')\r\n      let that = this\r\n      mapObj.mapInstance = mapInstance\r\n      mapObj.map = mapInstance.map\r\n      // 巡检模拟\r\n      // mapObj.map.on('click', e => {\r\n      //   if (that.trackPointList.length == 0) {\r\n      //     that.trackPointList.push([e.lngLat.lng, e.lngLat.lat])\r\n      //   } else {\r\n      //     that.drawInspLine({ longitude: e.lngLat.lng, latitude: e.lngLat.lat, locTime: that.$dayjs().format('YYYY-MM-DD HH:mm:ss'), locType: 'GPS' })\r\n      //   }\r\n      // })\r\n      mapObj.map.on('click', () => {\r\n        this.showKeyList = false\r\n      })\r\n      this.addMapImg()\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.locationAMap.requestSingleLocation(\r\n          ['1'],\r\n          (res) => {\r\n            that.currentPosition = JSON.parse(JSON.stringify(res))\r\n            const param = {\r\n              ...that.currentPosition,\r\n            }\r\n            this.$refs.mymap.setInspUserPosition(param)\r\n          },\r\n          (err) => {\r\n            console.log('err=', err)\r\n          }\r\n        )\r\n      }\r\n      // // 巡检模拟\r\n      // mapObj.map.on('click', e => {\r\n      //   that.currentPosition = {\r\n      //     longitude: e.lngLat.lng,\r\n      //     latitude: e.lngLat.lat,\r\n      //     locTime: that.$dayjs().format('YYYY-MM-DD HH:mm:ss'),\r\n      //     locType: 'GPS',\r\n      //   }\r\n      //   const param = {\r\n      //     ...that.currentPosition,\r\n      //   }\r\n      //   this.$refs.mymap.setInspUserPosition(param)\r\n      //   // if (that.trackPointList.length == 0) {\r\n      //   //   that.trackPointList.push([e.lngLat.lng, e.lngLat.lat])\r\n      //   // } else {\r\n      //   //   that.drawInspLine({ longitude: e.lngLat.lng, latitude: e.lngLat.lat, locTime: that.$dayjs().format('YYYY-MM-DD HH:mm:ss'), locType: 'GPS' })\r\n      //   // }\r\n      // })\r\n    },\r\n    // 刷新任务\r\n    refreshTask() {\r\n      const id = this.$route.query.taskId\r\n      this.getTaskById(id, 'refresh')\r\n    },\r\n    async getTrackRecordsById(id) {\r\n      const res = await request({\r\n        url: '/xasw-pipe-operation/inspTask/track',\r\n        method: 'get',\r\n        params: { id, pageNum: 1, pageSize: 9999 },\r\n      })\r\n      if (res && res.status) {\r\n        console.log(res)\r\n      }\r\n    },\r\n    // 根据任务id获取巡检状况\r\n    async getTaskById(id, type = null) {\r\n      let toast = Toast.loading({\r\n        message: '地图加载中...',\r\n        loadingType: 'spinner',\r\n        duration: 0,\r\n        forbidClick: true\r\n      })\r\n      // 处理已巡检管线的接口\r\n      const recordLines = await api.recordedPipeLine({\r\n        taskId: id,\r\n        page: 1,\r\n        size: 9999\r\n      })\r\n      this.lines = []\r\n      if (recordLines.status) {\r\n        this.lines = recordLines.data.records.map((item) => item.pipeId)\r\n      }\r\n      const res = await request({\r\n        url: '/xasw-pipe-operation/inspTask/getById',\r\n        method: 'get',\r\n        params: { id, bizScope: this.$route.query.taskType }\r\n      })\r\n      if (res && res.status) {\r\n        this.taskDetail = res.data.inspTask\r\n        this.planDetail = res.data.inspPlan\r\n        this.buttonList = ['全部'].concat(this.planDetail.bizType.split(','))\r\n        this.inspRangeList = res.data.detailList.map((range) => {\r\n          return {\r\n            taskId: id,\r\n            ...range,\r\n          }\r\n        })\r\n        setTimeout(() => {\r\n          this.legendConfig = [\r\n            {\r\n              label: '污水',\r\n              clickFlag: this.planDetail.bizType.includes('污水') ? true : false\r\n            },\r\n            {\r\n              label: '雨水',\r\n              clickFlag: this.planDetail.bizType.includes('雨水') ? true : false\r\n            },\r\n            {\r\n              label: '供水',\r\n              clickFlag: this.planDetail.bizType.includes('供水') ? true : false\r\n            },\r\n            {\r\n              label: '再生水',\r\n              clickFlag: this.planDetail.bizType.includes('再生水') ? true : false\r\n            }\r\n          ];\r\n        }, 5000)\r\n        // 修改未巡检(0)任务状态至巡检中(1)\r\n        if (this.$route.query.isNew && this.taskDetail.taskStatus != 1) {\r\n          this.startOrEndTaskRecord(1)\r\n        }\r\n        if (type != 'refresh') {\r\n          const allTaskLines = await api.getAllTaskLines({\r\n            devType: '管线',\r\n            gridId: this.planDetail.gridId,\r\n            pageNum: 1,\r\n            pageSize: 999999,\r\n            bizScope: this.$route.query.taskType,\r\n            bizType: this.planDetail.bizType\r\n          })\r\n          if (allTaskLines.status) {\r\n            this.allTaskLines = []\r\n            allTaskLines.data.list.forEach(item => {\r\n              this.allTaskLines.push({\r\n                type: 'Feature',\r\n                id: item.id,\r\n                geometry: JSON.parse(item.geom),\r\n                properties: {\r\n                  id: item.id,\r\n                  length: item['length'],\r\n                  bizType: item.bizType\r\n                }\r\n              })\r\n            })\r\n            this.$refs.mymap.setAllInspLineSource(this.allTaskLines)\r\n          }\r\n        }\r\n        const kpRes = await request({\r\n          url: '/xasw-pipe-operation/inspTask/point',\r\n          method: 'get',\r\n          params: { id, gridId: this.planDetail.gridId, pageNum: 1, pageSize: 9999, bizScope: this.$route.query.taskType, bizType: this.planDetail.bizType },\r\n        })\r\n        this.keyDetailList = []\r\n        if (kpRes && kpRes.status) {\r\n          let keys = Object.keys(kpRes.data)\r\n          keys.forEach((item) => {\r\n            this.keyDetailList.push(...kpRes.data[item].list)\r\n          })\r\n          this.unInspKeyDetailList = this.keyDetailList.filter(it => !it.deviceStatus)\r\n        }\r\n        let completion = this.changeToRate(this.taskDetail.coverage)\r\n        this.navbarTitle = this.taskDetail.taskName\r\n        try {\r\n          const that = this\r\n          let timer = setInterval(function () {\r\n            // 30s后取消\r\n            setTimeout(() => {\r\n              clearInterval(timer)\r\n            }, 30000)\r\n            if (that.$refs.mymap && that.$refs.mymap.isOnLoaded()) {\r\n              clearInterval(timer)\r\n              that.$refs.mymap.addKeyPoints(that.keyDetailList)\r\n              if (type != 'refresh') {\r\n                that.$refs.mymap.addRangeList(that.inspRangeList)\r\n              }\r\n              const params = {\r\n                extParam: {\r\n                  task_id: that.$route.query.taskId\r\n                }\r\n              }\r\n              // 问题上报、设施缺陷接口\r\n              that.getProblemDataList(params)\r\n              that.$refs.mymap.addInspRecordTileLineSource(that.lines, completion)\r\n              toast.clear()\r\n              if (!that.currentPosition) return\r\n              const param = {\r\n                ...that.currentPosition,\r\n              }\r\n              that.$refs.mymap.setInspUserPosition(param)\r\n            }\r\n          }, 500)\r\n        } catch (e) {\r\n          console.log(e)\r\n        }\r\n      } else {\r\n        Toast({\r\n          message: '网络状态较差，加载任务失败',\r\n          icon: 'warn',\r\n          duration: 3000\r\n        })\r\n      }\r\n    },\r\n    pause() {\r\n      console.log('进入后台')\r\n      if (this.ifRecording && this.isResume) {\r\n        this.isResume = false\r\n      }\r\n    },\r\n    resume() {\r\n      console.log('进入前台')\r\n      if (this.ifRecording) {\r\n        this.isResume = true\r\n        pauseStateTrackPoints.length > 0 && this.upLoadPauseStateTrackPoints(this.deepClone(pauseStateTrackPoints))\r\n        pauseStatePipeIdList.length > 0 && this.upLoadPauseStatePipeIdList(this.deepClone(pauseStatePipeIdList))\r\n      }\r\n    },\r\n    upLoadPauseStatePipeIdList(data) {\r\n      let that = this\r\n      api.recordInspLine(data).then(async res => {\r\n        if (res.status) {\r\n          console.log('后台巡检管线补充数据上传成功')\r\n          pauseStatePipeIdList.splice(0, data.length) // 移除上传成功的数据。避免重复上传\r\n          const res = await request({\r\n            url: '/xasw-pipe-operation/inspTask/getById',\r\n            method: 'get',\r\n            params: { id: that.$route.query.taskId, bizScope: that.$route.query.taskType }\r\n          })\r\n          if (res.status) {\r\n            that.taskDetail = res.data.inspTask\r\n          }\r\n        } else {\r\n          that.$refs.mymap.uploadFiledPipeIdList.push(...data)\r\n        }\r\n      }).catch(err => {\r\n        setTimeout(() => {\r\n          this.upLoadPauseStatePipeIdList(data)\r\n        }, 5 * 1000)\r\n      })\r\n    },\r\n    upLoadPauseStateTrackPoints(data) {\r\n      api.inspectionTrack(data).then((res) => {\r\n        if (res && res.status) {\r\n          console.log('后台巡检轨迹补充点位上传成功')\r\n          pauseStateTrackPoints.splice(0, data.length) // 移除上传成功的点位。避免重复上传\r\n        } else {\r\n          console.log('后台巡检轨迹补充点位上传异常')\r\n          this.reportFailTrackPoints.push(...data)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setTimeout(() => {\r\n          this.upLoadPauseStateTrackPoints(data)\r\n        }, 5 * 1000)\r\n      })\r\n    },\r\n    // 轮询 currentPosition，绘制轨迹线\r\n    polling() {\r\n      let that = this\r\n      if (that.pollingFlag) {\r\n        if (typeof yuanchu != 'undefined') {\r\n          yuanchu.locationAMap.requestLocations(\r\n            [that.$route.query.taskType == '人巡' ? '4' : '2', '1', '20', '100', '0', true],\r\n            (res) => {\r\n              console.log(res)\r\n              that.drawInspLine(res)\r\n            },\r\n            (err) => {\r\n              // Toast.error({\r\n              //   message: 'err' + err,\r\n              //   duration: 2000,\r\n              // })\r\n            }\r\n          )\r\n        }\r\n      }\r\n    },\r\n    drawInspLine(position) {\r\n      const that = this\r\n      that.currentPosition = JSON.parse(JSON.stringify(position))\r\n      that.currentPosition = Object.assign(that.currentPosition, {\r\n        direction: 0\r\n      })\r\n      if (that.currentPosition.locType != 'SAME_REQ' && that.currentPosition.locType != 'FIX_CACHE') { // 过滤缓存定位数据\r\n        let lastPoint = that.trackPointList[that.trackPointList.length - 1]\r\n        let distance = that.GetDistance(lastPoint, [that.currentPosition.longitude, that.currentPosition.latitude]) * 1000\r\n        // 记录过程点\r\n        that.postTrackData_Point(\r\n          that.trackPointList[that.trackPointList.length - 1],\r\n          that.trackPointTimeList[that.trackPointTimeList.length - 1],\r\n          distance\r\n        ).then(res => {\r\n          if (res) {\r\n            // 改变巡检轨迹缓冲区范围内的管线颜色\r\n            let geom = {\r\n              type: 'LineString',\r\n              coordinates: [\r\n                [lastPoint[0], lastPoint[1]],\r\n                [that.currentPosition.longitude, that.currentPosition.latitude],\r\n              ]\r\n            }\r\n            let promise = new Promise((resolve, reject) => {\r\n              that.changeInspLineSourceBySpeed(geom, resolve)\r\n            })\r\n            promise.then(r => {\r\n              if (r) {\r\n                that.trackPointList.push([\r\n                  that.currentPosition.longitude,\r\n                  that.currentPosition.latitude\r\n                ])\r\n                that.trackPointTimeList.push(that.currentPosition.locTime)\r\n                // 构造临时线对象\r\n                let jsonLine = {\r\n                  type: 'Feature',\r\n                  properties: {},\r\n                  geometry: {\r\n                    type: 'LineString',\r\n                    coordinates: that.trackPointList,\r\n                  },\r\n                }\r\n                const coord = [parseFloat(that.currentPosition.longitude), parseFloat(that.currentPosition.latitude)];\r\n                const point = turf.point(coord);\r\n                mapObj.mapInstance.setSourceData(\"inspUser\", {\r\n                  type: \"FeatureCollection\",\r\n                  features: [point]\r\n                })\r\n                let jsonLineFeatureCollection = {\r\n                  type: 'FeatureCollection',\r\n                  features: [jsonLine],\r\n                }\r\n                if (mapObj.map.getSource('trackLineSource_now')) {\r\n                  mapObj.map.getSource('trackLineSource_now').setData(jsonLineFeatureCollection)\r\n                } else {\r\n                  mapObj.map.addSource('trackLineSource_now', {\r\n                    type: 'geojson',\r\n                    data: jsonLineFeatureCollection,\r\n                  })\r\n                }\r\n                if (mapObj.map.getLayer('trackLineLayer_now')) {\r\n                } else {\r\n                  mapObj.map.addLayer({\r\n                    id: 'trackLineLayer_now',\r\n                    type: 'line',\r\n                    source: 'trackLineSource_now',\r\n                    layout: {\r\n                      'line-cap': 'round',\r\n                      'line-join': 'round',\r\n                      'line-sort-key': 1,\r\n                      visibility: 'visible',\r\n                      // visibility: \"none\"\r\n                    },\r\n                    paint: {\r\n                      'line-color': '#addd52',\r\n                      'line-width': 5,\r\n                      'line-opacity': 0.8\r\n                    },\r\n                  }, 'inspUserLayer')\r\n                }\r\n                if (mapObj.map.getLayer('trackLineLayer_arrow')) {\r\n                } else {\r\n                  mapObj.map.addLayer({\r\n                    id: 'trackLineLayer_arrow',\r\n                    type: 'symbol',\r\n                    source: 'trackLineSource_now',\r\n                    layout: {\r\n                      'symbol-placement': 'line',\r\n                      'symbol-spacing': 20,\r\n                      'icon-image': 'arrowIcon',\r\n                      'icon-size': 0.5,\r\n                      'icon-allow-overlap': true,\r\n                      'symbol-sort-key': 3,\r\n                      visibility: 'visible'\r\n                    },\r\n                  }, 'inspUserLayer')\r\n                }\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 根据速度改变巡检管线颜色\r\n    changeInspLineSourceBySpeed(position, resolve) {\r\n      // const coord = [parseFloat(position.longitude), parseFloat(position.latitude)];\r\n      // const point = turf.point(coord);\r\n      const that = this\r\n      try {\r\n        // 改变周围要素的状态\r\n        let buffered = turf.buffer(position, that.$route.query.taskType == '人巡' ? 0.025 : 0.045, { unit: 'kilometers' });\r\n        that.changeInspLineState(buffered, resolve);\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    // 设置巡检管线为已巡检\r\n    changeInspLineState(geometry, resolve) {\r\n      let that = this\r\n      // 将地理坐标系转化为屏幕坐标系\r\n      function geoTransToPixel(geom) {\r\n        const polygonBox = turf.bbox(geom);\r\n        const southWest = [polygonBox[0], polygonBox[1]];\r\n        const northEast = [polygonBox[2], polygonBox[3]];\r\n        let southWestPointPixel = mapObj.map.project(southWest);\r\n        let northEastPointPixel = mapObj.map.project(northEast);\r\n        // 增大bbox的查询范围\r\n        southWestPointPixel = [\r\n          southWestPointPixel.x - 50,\r\n          southWestPointPixel.y + 50\r\n        ]\r\n        northEastPointPixel = [\r\n          northEastPointPixel.x + 50,\r\n          northEastPointPixel.y - 50\r\n        ]\r\n        return [southWestPointPixel, northEastPointPixel];\r\n      }\r\n      // 对每个划分出来的bbox进行处理\r\n      function chunk(geom, resolve) {\r\n        const boxFeatures = mapObj.map.queryRenderedFeatures(geoTransToPixel(geom), {\r\n          layers: [\"initInspLineLayer\"]\r\n        });\r\n        console.log(boxFeatures, 'boxFeatures')\r\n        let tempPipeList = []\r\n        boxFeatures.forEach(feat => {\r\n          try {\r\n            const result = turf.booleanDisjoint(feat.geometry, geometry)\r\n            // 如果查出的要素与真实的范围相交且没有被巡检过，则改变其状态,并记录其关键字\r\n            if (!result && !feat.state.isInsp) {\r\n              mapObj.map.setFeatureState({\r\n                source: feat.source,\r\n                id: feat.id\r\n              }, { isInsp: true })\r\n              if (!tempPipeList.map(it => it.pipeId).includes(feat.id)) {\r\n                let date = that.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n                tempPipeList.push({\r\n                  inspDate: date,\r\n                  pipeId: feat.id,\r\n                  ext3: feat.properties.bizType,\r\n                  pipeLength: feat.properties['length'] || 0,\r\n                  taskId: that.$route.query.taskId\r\n                })\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.log(error)\r\n          }\r\n        })\r\n        if (that.isResume) {\r\n          tempPipeList.length > 0 && api.recordInspLine(tempPipeList).then(async res => {\r\n            if (res.status) {\r\n              const res = await request({\r\n                url: '/xasw-pipe-operation/inspTask/getById',\r\n                method: 'get',\r\n                params: { id: that.$route.query.taskId, bizScope: that.$route.query.taskType }\r\n              })\r\n              if (res.status) {\r\n                that.taskDetail = res.data.inspTask\r\n              }\r\n            } else {\r\n              console.log('上传失败的tempPipeList: ', tempPipeList);\r\n              that.$refs.mymap.uploadFiledPipeIdList.push(...tempPipeList)\r\n            }\r\n          })\r\n        } else {\r\n          tempPipeList.length > 0 && pauseStatePipeIdList.push(...tempPipeList)\r\n        }\r\n        resolve(true)\r\n      }\r\n      // function cb(features) {\r\n      //   if (features.length > 0) {\r\n      //     setTimeout(() => {\r\n      //       chunk(features.shift());\r\n      //       cb(features);\r\n      //     }, 100);\r\n      //   }\r\n      // }\r\n      chunk(geometry, resolve)\r\n      // cb([geometry]);\r\n    },\r\n    // 绘制起始点\r\n    drawStartPoint() {\r\n      let that = this\r\n      return new Promise(function (resolve, reject) {\r\n        if (typeof yuanchu != 'undefined') {\r\n          yuanchu.locationAMap.requestSingleLocation(\r\n            ['1'],\r\n            (res) => {\r\n              that.currentPosition = JSON.parse(JSON.stringify(res))\r\n              const param = {\r\n                ...that.currentPosition,\r\n              }\r\n              console.log(res)\r\n              that.$refs.mymap.setInspUserPosition(param)\r\n              if (that.currentPosition != null) {\r\n                let recordData = []\r\n                recordData.push({\r\n                  taskId: that.taskDetail.id, // 任务id\r\n                  longitude: that.currentPosition.longitude,\r\n                  latitude: that.currentPosition.latitude,\r\n                  inspTime: that.currentPosition.locTime,\r\n                  distance: 0, // 第一个点距离为0\r\n                  inspDate: that.currentPosition.locTime,\r\n                  inspector: that.userInfo.userFullName,\r\n                })\r\n                api.inspectionTrack(recordData)\r\n                  .then((res) => {\r\n                    if (res && res.status) {\r\n                      // 使用上报点位作为起点\r\n                      console.log('起始点存储成功')\r\n                      that.trackPointList.push([that.currentPosition.longitude, that.currentPosition.latitude])\r\n                      that.trackPointTimeList.push(that.currentPosition.locTime)\r\n                      let jsonPoint = {\r\n                        type: 'Feature',\r\n                        properties: {},\r\n                        geometry: {\r\n                          type: 'Point',\r\n                          coordinates: [that.currentPosition.longitude, that.currentPosition.latitude],\r\n                        },\r\n                      }\r\n                      let jsonPointFeatureCollection = {\r\n                        type: 'FeatureCollection',\r\n                        features: [jsonPoint],\r\n                      }\r\n                      if (mapObj.map.getSource('startPointSource_now')) {\r\n                        mapObj.map.getSource('startPointSource_now').setData(jsonPointFeatureCollection)\r\n                      } else {\r\n                        mapObj.map.addSource('startPointSource_now', {\r\n                          type: 'geojson',\r\n                          data: jsonPointFeatureCollection,\r\n                        })\r\n                      }\r\n                      if (mapObj.map.getLayer('startPointLayer_now')) {\r\n                      } else {\r\n                        mapObj.map.addLayer({\r\n                          id: 'startPointLayer_now',\r\n                          type: 'circle',\r\n                          source: 'startPointSource_now',\r\n                          layout: {\r\n                            'circle-sort-key': 5,\r\n                            visibility: 'visible',\r\n                            // visibility: \"none\"\r\n                          },\r\n                          paint: {\r\n                            'circle-radius': 3,\r\n                            'circle-stroke-width': 5,\r\n                            'circle-stroke-color': '#2A83E6',\r\n                            'circle-color': 'white',\r\n                          },\r\n                        }, 'inspUserLayer')\r\n                      }\r\n                      // label\r\n                      if (mapObj.map.getLayer('startPoint_label')) {\r\n                      } else {\r\n                        mapObj.map.addLayer({\r\n                          id: 'startPoint_label',\r\n                          type: 'symbol',\r\n                          source: 'startPointSource_now',\r\n                          layout: {\r\n                            'symbol-placement': 'point',\r\n                            'icon-image': 'start_point',\r\n                            'icon-size': 0.6,\r\n                            'icon-offset': [0, -35],\r\n                            'icon-allow-overlap': true,\r\n                            'symbol-sort-key': 2,\r\n                            visibility: 'visible',\r\n                            // visibility: \"none\"\r\n                          },\r\n                        })\r\n                      }\r\n                      resolve(true)\r\n                    } else {\r\n                      resolve(false)\r\n                    }\r\n                  })\r\n                  .catch((err) => {\r\n                    reject(err)\r\n                  })\r\n              }\r\n            },\r\n            (err) => {\r\n              console.log('err=', err)\r\n            }\r\n          )\r\n        }\r\n      })\r\n    },\r\n    // 绘制终止点\r\n    async drawEndPoint(type) {\r\n      let that = this\r\n      if (that.currentPosition != null) {\r\n        let lastPoint = that.trackPointList[that.trackPointList.length - 1]\r\n        let distance = that.GetDistance(lastPoint, [that.currentPosition.longitude, that.currentPosition.latitude]) * 1000\r\n        let toast = Toast.loading({\r\n          message: '程序关闭中',\r\n          loadingType: 'spinner',\r\n          duration: 0,\r\n          forbidClick: true\r\n        })\r\n        // 记录终止点\r\n        that.postTrackData_Point(\r\n          that.trackPointList[that.trackPointList.length - 1],\r\n          that.trackPointTimeList[that.trackPointTimeList.length - 1],\r\n          distance\r\n        ).then(res => {\r\n          if (res) {\r\n            toast.close()\r\n            Toast.info({\r\n              message: '暂停成功',\r\n              duration: 1000\r\n            })\r\n            if (typeof yuanchu != 'undefined') {\r\n              yuanchu.locationAMap.stopRequestLocations()\r\n            }\r\n            that.trackPointList.push([that.currentPosition.longitude, that.currentPosition.latitude])\r\n            that.trackPointTimeList.push(that.currentPosition.locTime)\r\n            let jsonPoint = {\r\n              type: 'Feature',\r\n              properties: {},\r\n              geometry: {\r\n                type: 'Point',\r\n                coordinates: [that.currentPosition.longitude, that.currentPosition.latitude],\r\n              },\r\n            }\r\n            let jsonPointFeatureCollection = {\r\n              type: 'FeatureCollection',\r\n              features: [jsonPoint],\r\n            }\r\n            if (mapObj.map.getSource('endPointSource_now')) {\r\n              mapObj.map.getSource('endPointSource_now').setData(jsonPointFeatureCollection)\r\n            } else {\r\n              mapObj.map.addSource('endPointSource_now', {\r\n                type: 'geojson',\r\n                data: jsonPointFeatureCollection,\r\n              })\r\n            }\r\n            if (mapObj.map.getLayer('endPointLayer_now')) {\r\n            } else {\r\n              mapObj.map.addLayer({\r\n                id: 'endPointLayer_now',\r\n                type: 'circle',\r\n                source: 'endPointSource_now',\r\n                layout: {\r\n                  'circle-sort-key': 5,\r\n                  visibility: 'visible',\r\n                  // visibility: \"none\"\r\n                },\r\n                paint: {\r\n                  'circle-radius': 3,\r\n                  'circle-stroke-width': 5,\r\n                  'circle-stroke-color': '#addd52',\r\n                  'circle-color': 'white',\r\n                },\r\n              }, 'inspUserLayer')\r\n            }\r\n\r\n            // 补充trackline\r\n            let jsonLine = {\r\n              type: 'Feature',\r\n              properties: {},\r\n              geometry: {\r\n                type: 'LineString',\r\n                coordinates: that.trackPointList,\r\n              },\r\n            }\r\n            let jsonLineFeatureCollection = {\r\n              type: 'FeatureCollection',\r\n              features: [jsonLine],\r\n            }\r\n            if (mapObj.map.getSource('trackLineSource_now')) {\r\n              mapObj.map.getSource('trackLineSource_now').setData(jsonLineFeatureCollection)\r\n            } else {\r\n              mapObj.map.addSource('trackLineSource_now', {\r\n                type: 'geojson',\r\n                data: jsonLineFeatureCollection,\r\n              })\r\n            }\r\n            if (mapObj.map.getLayer('trackLineLayer_now')) {\r\n            } else {\r\n              mapObj.map.addLayer({\r\n                id: 'trackLineLayer_now',\r\n                type: 'line',\r\n                source: 'trackLineSource_now',\r\n                layout: {\r\n                  'line-cap': 'round',\r\n                  'line-join': 'round',\r\n                  visibility: 'visible',\r\n                  // visibility: \"none\"\r\n                },\r\n                paint: {\r\n                  'line-color': '#addd52',\r\n                  'line-width': 5,\r\n                  'line-opacity': 0.8,\r\n                },\r\n              }, 'inspUserLayer')\r\n            }\r\n            // label\r\n            if (mapObj.map.getLayer('endPoint_label')) {\r\n            } else {\r\n              mapObj.map.addLayer({\r\n                id: 'endPoint_label',\r\n                type: 'symbol',\r\n                source: 'endPointSource_now',\r\n                layout: {\r\n                  'symbol-placement': 'point',\r\n                  'icon-image': 'end_point',\r\n                  'icon-size': 0.6,\r\n                  'icon-offset': [0, -35],\r\n                  'icon-allow-overlap': true,\r\n                  'symbol-sort-key': 2,\r\n                  visibility: 'visible',\r\n                  // visibility: \"none\"\r\n                },\r\n              })\r\n            }\r\n            // 上传之前上传失败的点位\r\n            that.reportFailTrackPoints.length > 0 && that.postFailTrackData()\r\n            that.$refs.mymap.uploadFiledPipeIdList.length > 0 && api.recordInspLine(that.$refs.mymap.uploadFiledPipeIdList).then(res => {\r\n              if (res.status) {\r\n                console.log('管线补充上传成功')\r\n                that.$refs.mymap.uploadFiledPipeIdList = []\r\n              }\r\n            })\r\n            if (type == 'end') {\r\n              this.startOrEndTaskRecord(2) // 已巡检状态 '2'\r\n            } else {\r\n              this.pollingFlag = false\r\n              this.ifRecording = false\r\n              localStorage.setItem('startRecordLines', 'end')\r\n              if (type == 'pause') {\r\n                Toast.success({\r\n                  message: '暂停成功',\r\n                  duration: 2000\r\n                })\r\n                this.refreshTask()\r\n              } else if (type == 'leave') {\r\n                this.$router.go(-1)\r\n              }\r\n            }\r\n          } else {\r\n            Toast.error({\r\n              message: type == 'end' ? '结束失败' : '暂停失败'\r\n            })\r\n          }\r\n        })\r\n      } else {\r\n        let type = type\r\n        let timer = setTimeout(() => {\r\n          that.drawEndPoint(type)\r\n        }, 1000)\r\n      }\r\n    },\r\n    async postFailTrackData() {\r\n      let that = this\r\n      await api\r\n        .inspectionTrack(that.reportFailTrackPoints)\r\n        .then((res) => {\r\n          if (res && res.status) {\r\n            console.log('轨迹存储成功')\r\n            that.reportFailTrackPoints = []\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log('巡检轨迹存储失败：' + err)\r\n        })\r\n    },\r\n\r\n    // 单点-后端记录轨迹数据\r\n    postTrackData_Point(pointData, timeData, distance) {\r\n      return new Promise(async (resolve, reject) => {\r\n        let that = this\r\n        for (let p = 0; p < pointData.length; p++) {\r\n          pointData[p] = Number(pointData[p])\r\n        }\r\n        let date_now = dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n        let recordData = []\r\n        recordData.push({\r\n          taskId: that.taskDetail.id,\r\n          inspDate: timeData,\r\n          inspTime: date_now,\r\n          distance,\r\n          inspector: that.userInfo.userFullname,\r\n          longitude: pointData[0],\r\n          latitude: pointData[1],\r\n        })\r\n        if (that.isResume) {\r\n          await api\r\n            .inspectionTrack(recordData)\r\n            .then((res) => {\r\n              if (res && res.status) {\r\n                console.log('轨迹存储成功', recordData)\r\n                resolve(true)\r\n              } else {\r\n                // 上传失败的点位，暂时存在app端\r\n                that.reportFailTrackPoints.push(recordData)\r\n                console.log('that.reportFailTrackPoints: ', that.reportFailTrackPoints);\r\n                resolve(true)\r\n              }\r\n            })\r\n        } else {\r\n          pauseStateTrackPoints.push(...recordData)\r\n          resolve(true)\r\n        }\r\n      })\r\n    },\r\n    startOrEndTaskRecord(status) {\r\n      let data = {\r\n        planId: this.planDetail.id,\r\n        taskName: this.taskDetail.taskName,\r\n        taskCode: this.taskDetail.taskCode,\r\n        taskStatus: status,\r\n        id: this.taskDetail.id,\r\n        taskType: this.taskDetail.taskType,\r\n        bizType: this.planDetail.bizType,\r\n        ext1: status == 2 ? this.stopReason : ''\r\n      }\r\n      if (status == 1) {\r\n        data.planStartTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n      } else if (status == 2) {\r\n        data.planEndTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n      }\r\n      let that = this\r\n      api.changeTaskStatus(data).then((res) => {\r\n        if (res.status) {\r\n          if (status == 2) {\r\n            Toast.success({\r\n              message: '结束成功',\r\n              duration: 2000,\r\n              onClose: () => {\r\n                that.pollingFlag = false\r\n                that.ifRecording = false\r\n                localStorage.setItem('startRecordLines', 'end')\r\n                that.isView = true\r\n                that.$router.go(-1)\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          if (status == 2) {\r\n            Toast.error({\r\n              message: '结束失败, 请重试',\r\n              duration: 1500\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 清除缓存的轨迹数据\r\n    clearBufferTrack() {\r\n      let that = this\r\n      that.isResume = true\r\n      that.ifRecording = false\r\n      that.currentPosition = null\r\n      //数组归零\r\n      that.trackPointList = []\r\n      that.trackPointTimeList = []\r\n      that.overSpeedTrackLineList = []\r\n      pauseStateTrackPoints = []\r\n      pauseStatePipeIdList = []\r\n      //数据源清空\r\n      if (mapObj.map.getSource('trackLineSource_now')) {\r\n        mapObj.map.getSource('trackLineSource_now').setData({\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        })\r\n      }\r\n      if (mapObj.map.getSource('trackLineSource_overSpeed')) {\r\n        mapObj.map.getSource('trackLineSource_overSpeed').setData({\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        })\r\n      }\r\n      if (mapObj.map.getSource('startPointSource_now')) {\r\n        mapObj.map.getSource('startPointSource_now').setData({\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        })\r\n      }\r\n\r\n      if (mapObj.map.getSource('endPointSource_now')) {\r\n        mapObj.map.getSource('endPointSource_now').setData({\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        })\r\n      }\r\n    },\r\n    addMapImg() {\r\n      mapObj.map.loadImage(\r\n        require('@assets/img/inspection/white_arrow_right.png'),\r\n        function (error, image) {\r\n          if (error) throw error\r\n          if (!mapObj.map.hasImage('arrowIcon')) {\r\n            mapObj.map.addImage('arrowIcon', image, {})\r\n          }\r\n        }\r\n      )\r\n      mapObj.map.loadImage(\r\n        require('@assets/img/inspection/icon_starting_point.png'),\r\n        function (error, image) {\r\n          if (error) throw error\r\n          if (!mapObj.map.hasImage('start_point')) {\r\n            mapObj.map.addImage('start_point', image, {})\r\n          }\r\n        }\r\n      )\r\n      mapObj.map.loadImage(\r\n        require('@assets/img/inspection/icon_at_end.png'),\r\n        function (error, image) {\r\n          if (error) throw error\r\n          if (!mapObj.map.hasImage('end_point')) {\r\n            mapObj.map.addImage('end_point', image, {})\r\n          }\r\n        }\r\n      )\r\n    },\r\n    // 开始记录 上传起点成功后才进入巡检过程\r\n    startInspRecord() {\r\n      if (this.isView) {\r\n        Toast({\r\n          message: '该巡检任务已结束',\r\n          duration: 1500\r\n        })\r\n        return\r\n      }\r\n      if (!this.currentPosition || !this.currentPosition.longitude) {\r\n        Toast.warning({\r\n          message: '当前GPS信号弱，请稍后尝试',\r\n          duration: 2000\r\n        })\r\n        return\r\n      }\r\n      this.clearBufferTrack()\r\n      let toast = Toast.loading({\r\n        message: '程序启动中',\r\n        loadingType: 'spinner',\r\n        duration: 0,\r\n        forbidClick: true\r\n      })\r\n      this.drawStartPoint()\r\n        .then((res) => {\r\n          if (res) {\r\n            toast.close()\r\n            Toast.info({\r\n              message: '开始记录',\r\n              duration: 1500\r\n            })\r\n            this.pollingFlag = true\r\n            this.ifRecording = true\r\n            localStorage.setItem('startRecordLines', 'start')\r\n            // 开始轮询\r\n            this.polling()\r\n            // 记录当前时间\r\n            this.startRecordTimer = new Date()\r\n          } else {\r\n            Toast.error({\r\n              message: '接口异常，无法开始任务',\r\n              duration: 2000\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n          Toast.error({\r\n            message: '网络状态异常，正在重试',\r\n            duration: 2000\r\n          })\r\n          setTimeout(() => {\r\n            this.drawStartPoint()\r\n          }, 5000)\r\n        })\r\n    },\r\n    // 结束记录\r\n    endRecord(type) {\r\n      let diff = Math.floor((new Date() - this.startRecordTimer) / 1000)\r\n      if (diff <= 10) {\r\n        Toast.info({\r\n          message: `结束太快了,请${10 - diff}秒后再试`,\r\n          duration: 1000\r\n        })\r\n        return\r\n      }\r\n      this.endRecordConfirm(type)\r\n    },\r\n    // 结束记录确认\r\n    endRecordConfirm(type) {\r\n      this.drawEndPoint(type)\r\n    },\r\n    // 开始定位\r\n    startLocation() {\r\n      let that = this\r\n      yuanchu.locationAMap.requestSingleLocation(\r\n        ['1'],\r\n        (res) => {\r\n          that.currentPosition = JSON.parse(JSON.stringify(res))\r\n          const param = {\r\n            ...that.currentPosition,\r\n          }\r\n          if (!that.currentPosition || !that.currentPosition.longitude || !that.currentPosition.latitude) {\r\n            Toast.error({\r\n              message: '获取位置失败!',\r\n              duration: 2000\r\n            })\r\n            return\r\n          } else {\r\n            const coord = [parseFloat(that.currentPosition.longitude), parseFloat(that.currentPosition.latitude)]\r\n            that.$refs.mymap.setInspUserPosition(param)\r\n            that.flyToPoint(coord)\r\n          }\r\n        },\r\n        (err) => {\r\n          console.log('err=', err)\r\n        }\r\n      )\r\n    },\r\n    goEventOrFlawDetail(feature, type) {\r\n      let currentPoint = feature\r\n      console.log(feature)\r\n      currentPoint = feature\r\n      currentPoint.bigType = feature.bizType || ''\r\n      currentPoint.gridId = this.planDetail.gridId\r\n      currentPoint.gridName = this.planDetail.gridName\r\n      currentPoint.gridManager = { fullName: this.planDetail.gridManager, username: this.planDetail.userName }\r\n      currentPoint.lng = feature.geom.coordinates[0]\r\n      currentPoint.lat = feature.geom.coordinates[1]\r\n      currentPoint.road_name = feature.road || ''\r\n      currentPoint.smallType = feature.deviceType || ''\r\n      currentPoint.code = feature.deviceId || ''\r\n      currentPoint.taskId = this.taskDetail.id\r\n      if (type == 'event') {\r\n        this.$router.push({\r\n          name: 'addProblemIndex',\r\n          query: { msg: currentPoint, token: this.formToken, taskId: this.$route.query.taskId, from: 'insp' },\r\n          params: { type: 'add' },\r\n        })\r\n      } else {\r\n        this.$router.push({\r\n          name: 'addFlaws',\r\n          query: { msg: currentPoint, token: this.formToken, taskId: this.$route.query.taskId, from: 'insp' },\r\n          params: { type: 'add' }\r\n        })\r\n      }\r\n    },\r\n    // 确认\r\n    onConfirm() {\r\n      if (true) {\r\n        let that = this\r\n        let feature = this.signForm.feature\r\n        let copySignForm = this.deepClone(this.signForm)\r\n        if (that.attachment == '') {\r\n          Notify({ type: 'error', message: '请上传附件' })\r\n          return\r\n        }\r\n        // 液位输入框是否显示（污水检查井必须填写液位字段）\r\n        if (this.waterLevelShow == true) {\r\n          if (copySignForm.liquidLevel == '') {\r\n            Notify({ type: 'error', message: '请输入液位' })\r\n            return\r\n          }\r\n        }\r\n        copySignForm.inspDate = dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n        copySignForm.ext1 = copySignForm.remark // 备注\r\n        copySignForm.ext2 = '1' // 巡检记录的ext2字段，默认为1（待复核），已通过为2，已退回为3\r\n        delete copySignForm.feature\r\n\r\n        // resultList通过巡检要点list处理并添加到form中\r\n        let resultList = []\r\n        let textInFlag = false\r\n        // 巡检要点list数据\r\n        if (this.keyPointsInspectionList.length > 0) {\r\n          this.keyPointsInspectionList.forEach(item => {\r\n            resultList.push({\r\n              mainId: item.id, // 巡检要点id\r\n              mainPoint: item.mainPoint, // 巡检要点名称\r\n              mainValue: item.mainValue, // 该要点巡检结果\r\n              ext1: item.inputType, // 巡检要点输入类型，用于查询详情时判断html结构\r\n            })\r\n          })\r\n          for (let i = 0; i < resultList.length; i++) {\r\n            // 不为''或者全空格\r\n            if (resultList[i].mainValue == '' || resultList[i].mainValue.trim() == '') {\r\n              textInFlag = true\r\n            }\r\n          }\r\n        }\r\n        if (textInFlag) {\r\n          Notify({ type: 'error', message: '请将巡检要点补充完整' })\r\n          return\r\n        }\r\n        copySignForm.resultList = resultList\r\n        console.log('提交参数', _cloneDeep(copySignForm));\r\n        \r\n        api.signIn(copySignForm).then((res) => {\r\n          if (res && res.status) {\r\n            Toast.success({\r\n              message: '此关键点签到成功',\r\n              duration: 1000,\r\n              forbidClick: true,\r\n              onClose: () => {\r\n                // 巡检事件上报\r\n                if (copySignForm.isReport == '问题上报') {\r\n                  that.goEventOrFlawDetail(feature, 'event');\r\n                } else if (copySignForm.isReport == '新增缺陷') {\r\n                  that.goEventOrFlawDetail(feature, 'flaw');\r\n                } else {\r\n                  that.refreshTask()\r\n                }\r\n              }\r\n            })\r\n          } else {\r\n            Toast.error({\r\n              message: '此关键点签到失败',\r\n              duration: 2000\r\n            })\r\n          }\r\n          this.signShow = false\r\n          this.signForm.remark = ''\r\n          this.signForm.liquidLevel = ''\r\n          this.signForm.deviceStatus = '0'\r\n          this.signForm.isReport = ''\r\n          this.signForm.inspImagesList = []\r\n          this.attachment = ''\r\n          mapObj.mapInstance.setSourceData('buffered', {\r\n            type: 'FeatureCollection',\r\n            features: [],\r\n          })\r\n        })\r\n        // localStorage.setItem(\"isReportEvent\", false);\r\n      } else {\r\n        console.log('验证失败')\r\n      }\r\n    },\r\n    // 取消\r\n    onCancel() {\r\n      this.signShow = false\r\n      mapObj.mapInstance.setSourceData('buffered', {\r\n        type: 'FeatureCollection',\r\n        features: [],\r\n      })\r\n    },\r\n    cancelLeave() {\r\n      this.ifLeaveTask = false\r\n    },\r\n    confirmLeave() {\r\n      this.ifLeaveTask = false\r\n      this.endRecord('leave')\r\n    },\r\n    clickBack() {\r\n      if (this.ifRecording) {\r\n        this.ifLeaveTask = true\r\n      } else {\r\n        this.$router.go(-1)\r\n      }\r\n    },\r\n    // 签到\r\n    async startSignIn(feature) {\r\n      console.log('--------签到--------', feature);\r\n      if (feature.bizType == '污水' && feature.deviceType == '检查井') {\r\n        // 液位输入框是否显示\r\n        this.waterLevelShow = true\r\n      } else {\r\n        this.waterLevelShow = false\r\n      }\r\n      this.pointListShow = false\r\n      this.attachment = ''\r\n      this.signForm.isReport = ''\r\n      this.deviceName = feature.deviceType + (feature.deviceId || '')\r\n      // -----------------------------------------------------------------------------------------------------\r\n      //  deviceStatus状态（0正常 1异常 2未巡检） 巡检记录的ext2字段，默认为1（待复核），已通过为2，已退回为3\r\n      if (!feature.deviceStatus || feature.deviceStatus == '2' || feature.ext2 == '3') {\r\n        if (this.$route.query.isView) {\r\n          Toast.warning({\r\n            message: '任务已结束，无法继续打卡',\r\n            duration: 2000\r\n          })\r\n          mapObj.map.getSource('buffered') &&\r\n            mapObj.mapInstance.setSourceData('buffered', {\r\n              type: 'FeatureCollection',\r\n              features: [],\r\n            })\r\n          return\r\n        }\r\n        // 利用feature来判断是否处于35m范围内，如果处于，可以进行签到，否则不能进行签到\r\n        const position = this.currentPosition\r\n        if (!position) {\r\n          Toast.warning({\r\n            message: '获取不到巡检人位置',\r\n            duration: 2000\r\n          })\r\n          mapObj.map.getSource('buffered') &&\r\n          mapObj.mapInstance.setSourceData('buffered', {\r\n            type: 'FeatureCollection',\r\n            features: [],\r\n          })\r\n          return\r\n        }\r\n        const coord = [\r\n          parseFloat(position.longitude),\r\n          parseFloat(position.latitude),\r\n        ]\r\n        const point = turf.point(coord)\r\n        const engGeom = feature.geom\r\n        const buffered = turf.buffer(engGeom, 0.020, { unit: 'kilometers' })\r\n        const isInBuffer = turf.inside(point, buffered)\r\n        if (!isInBuffer) {\r\n          Toast.warning({\r\n            message: '未处于该关键点范围内',\r\n            duration: 2000\r\n          })\r\n          return\r\n        }\r\n        console.log('feature数据', feature);\r\n        // 巡检要点list数据\r\n        this.keyPointsInspectionList = []\r\n        let params4 = {\r\n          bizType: feature.bizType, // 业务类型（污水）\r\n          objectType: feature.deviceType, // 巡检对象类型名称（检查井）\r\n        }\r\n        // app端根据类型查询启用的巡检要点列表\r\n        api.inspPointCheckList(params4)\r\n          .then(res => {\r\n            this.keyPointsInspectionList = res?.data?.filter((item) => {\r\n              return item.mainStatus === \"启用中\"\r\n              // item = {\r\n              //   \"id\": \"1655843007768236033\",\r\n              //   \"createBy\": \"fawkes\",\r\n              //   \"createDate\": \"2023-05-09 15:51:51\",\r\n              //   \"updateBy\": null,\r\n              //   \"updateDate\": null,\r\n              //   \"deleteFlag\": 0,\r\n              //   \"mainPoint\": \"井内是否有大量淤积或杂物影响排水\",\r\n              //   \"inputType\": \"是/否\",\r\n              //   \"unit\": \"/\",\r\n              //   \"mainStatus\": \"启用中\",\r\n              //   \"bizType\": \"污水\",\r\n              //   \"objectType\": \"检查井\",\r\n              //   \"remarks\": null,\r\n              //   \"portalId\": null,\r\n              //   \"tenantId\": 100000\r\n              // }\r\n            }) || []\r\n            // 巡检要点list数据\r\n            if (this.keyPointsInspectionList.length > 0) {\r\n              this.keyPointsInspectionList.forEach((item) => {\r\n                let iT = ['']\r\n                // 如果inputType中存在'/'，则将其转换成数组，巡检要点结果mainValue默认为第一个值（\"inputType\": \"是/否\",），否则mainValue为''\r\n                if (item.inputType.indexOf('/') > -1) {\r\n                  iT = item.inputType.split('/')\r\n                }\r\n                this.$set(item, 'mainValue', iT[0]) // 该要点巡检结果\r\n              })\r\n            }\r\n            // this.keyPointsInspectionList = [\r\n            //   {\r\n            //     \"id\": \"1655843007768236033\",\r\n            //     \"createBy\": \"fawkes\",\r\n            //     \"createDate\": \"2023-05-09 15:51:51\",\r\n            //     \"updateBy\": null,\r\n            //     \"updateDate\": null,\r\n            //     \"deleteFlag\": 0,\r\n            //     \"mainPoint\": \"测试正常异常测试正常异常测试正常异常测试正常异常\",\r\n            //     \"inputType\": \"正常/异常\",\r\n            //     \"unit\": \"/\",\r\n            //     \"mainStatus\": \"启用中\",\r\n            //     \"bizType\": \"污水\",\r\n            //     \"objectType\": \"检查井\",\r\n            //     \"remarks\": null,\r\n            //     \"portalId\": null,\r\n            //     \"tenantId\": 100000,\r\n            //     \"mainValue\": \"正常\"\r\n            //   },\r\n            //   {\r\n            //     \"id\": \"1655843007768236034\",\r\n            //     \"createBy\": \"fawkes\",\r\n            //     \"createDate\": \"2023-05-09 15:51:51\",\r\n            //     \"updateBy\": null,\r\n            //     \"updateDate\": null,\r\n            //     \"deleteFlag\": 0,\r\n            //     \"mainPoint\": \"测试开启关闭测试开启关闭测试开启关闭测试开启关闭\",\r\n            //     \"inputType\": \"开启/关闭\",\r\n            //     \"unit\": \"/\",\r\n            //     \"mainStatus\": \"启用中\",\r\n            //     \"bizType\": \"污水\",\r\n            //     \"objectType\": \"检查井\",\r\n            //     \"remarks\": null,\r\n            //     \"portalId\": null,\r\n            //     \"tenantId\": 100000,\r\n            //     \"mainValue\": \"关闭\"\r\n            //   },\r\n            //   {\r\n            //     \"id\": \"1655843007768236035\",\r\n            //     \"createBy\": \"fawkes\",\r\n            //     \"createDate\": \"2023-05-09 15:51:51\",\r\n            //     \"updateBy\": null,\r\n            //     \"updateDate\": null,\r\n            //     \"deleteFlag\": 0,\r\n            //     \"mainPoint\": \"测试是否测试是否测试是否测试是否\",\r\n            //     \"inputType\": \"是/否\",\r\n            //     \"unit\": \"/\",\r\n            //     \"mainStatus\": \"启用中\",\r\n            //     \"bizType\": \"污水\",\r\n            //     \"objectType\": \"检查井\",\r\n            //     \"remarks\": null,\r\n            //     \"portalId\": null,\r\n            //     \"tenantId\": 100000,\r\n            //     \"mainValue\": \"是\"\r\n            //   },\r\n            //   {\r\n            //     \"id\": \"1655843007768236035\",\r\n            //     \"createBy\": \"fawkes\",\r\n            //     \"createDate\": \"2023-05-09 15:51:51\",\r\n            //     \"updateBy\": null,\r\n            //     \"updateDate\": null,\r\n            //     \"deleteFlag\": 0,\r\n            //     \"mainPoint\": \"测试数值测试数值测试数值测试数值\",\r\n            //     \"inputType\": \"数值\",\r\n            //     \"unit\": \"/\",\r\n            //     \"mainStatus\": \"启用中\",\r\n            //     \"bizType\": \"污水\",\r\n            //     \"objectType\": \"检查井\",\r\n            //     \"remarks\": null,\r\n            //     \"portalId\": null,\r\n            //     \"tenantId\": 100000,\r\n            //     \"mainValue\": \"\"\r\n            //   }\r\n            // ]\r\n            console.log('当前业务及设施类型下的巡检要点list', _cloneDeep(this.keyPointsInspectionList),);\r\n          })\r\n          .catch(err => { })\r\n          .finally(() => {\r\n            this.signShow = true\r\n            // 未巡检\r\n            this.hasSignIn = false\r\n            this.signForm.remark = ''\r\n            this.signForm.liquidLevel = ''\r\n            this.signForm.ext3 = feature.bizType\r\n            this.signForm.deviceStatus = '0'\r\n            this.signForm.inspImagesList = []\r\n            this.signForm.pointId = feature.id\r\n            this.signForm.taskId = this.$route.query.taskId,\r\n            this.signForm.feature = feature\r\n          })\r\n      } else {\r\n        let toast = Toast.loading({\r\n          message: '正在加载',\r\n          forbidClick: true,\r\n          loadingType: 'spinner',\r\n          duration: 0\r\n        })\r\n        this.hasSignIn = true\r\n        let params = {\r\n          page: 1,\r\n          size: 999,\r\n          deviceStatus: feature.deviceStatus,\r\n          pointId: feature.id,\r\n          taskId: this.$route.query.taskId,\r\n        }\r\n        const res = await request({\r\n          url: '/xasw-pipe-operation/inspPointRecord/page',\r\n          method: 'get',\r\n          params: params,\r\n        })\r\n        if (res && res.status) {\r\n          let result = res.data.records[0]\r\n          this.signForm.deviceStatus = result.deviceStatus\r\n          this.signForm.remark = result.ext1\r\n          this.signForm.liquidLevel = result.liquidLevel\r\n          this.signForm.isReport = result.isReport\r\n          const att = await request({\r\n            url: '/xasw-pipe-operation/inspPointRecord',\r\n            method: 'get',\r\n            params: { id: result.id }\r\n          })\r\n          if (att && att.status) {\r\n            console.log('已巡检关键点详情数据', _cloneDeep(att));\r\n            this.signForm.inspImagesList = att.data.inspImagesList\r\n            this.attachment = att.data.inspImagesList[0].fileId\r\n            // 巡检要点list\r\n            this.keyPointsInspectionList = att?.data?.resultList || []\r\n          }\r\n          toast.clear()\r\n          this.signShow = true\r\n        }\r\n      }\r\n    },\r\n    // 深拷贝\r\n    deepClone(data) {\r\n      return JSON.parse(JSON.stringify(data))\r\n    },\r\n    reportEvent(feature) {\r\n      this.reportFooterShow = false\r\n      this.$router.push({\r\n        path: '/pages/inspectionManage/add-event',\r\n        query: {\r\n          taskId: this.taskDetail.taskId,\r\n          feature: feature,\r\n          rangeList: this.rangeList,\r\n          taskDetail: this.taskDetail,\r\n        },\r\n      })\r\n    },\r\n    GetDistance(coordArray1, coordArray2) {\r\n      let lng1 = coordArray1[0]\r\n      let lat1 = coordArray1[1]\r\n      let lng2 = coordArray2[0]\r\n      let lat2 = coordArray2[1]\r\n      let radLat1 = (lat1 * Math.PI) / 180.0\r\n      let radLat2 = (lat2 * Math.PI) / 180.0\r\n      let a = radLat1 - radLat2\r\n      let b = (lng1 * Math.PI) / 180.0 - (lng2 * Math.PI) / 180.0\r\n      let s =\r\n        2 *\r\n        Math.asin(\r\n          Math.sqrt(\r\n            Math.pow(Math.sin(a / 2), 2) +\r\n            Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)\r\n          )\r\n        )\r\n      s = s * 6378.137 // EARTH_RADIUS;\r\n      s = Math.round(s * 10000) / 10000\r\n      return s\r\n    },\r\n    resetMapView() {\r\n      this.$refs.mymap && mapObj.map.resetNorthPitch()\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    Toast.clear()\r\n    this.pollingFlag = false\r\n    this.clearBufferTrack()\r\n    document.removeEventListener(\"pause\", this.pause)\r\n    document.removeEventListener(\"resume\", this.resume)\r\n    if (typeof yuanchu != 'undefined') {\r\n      yuanchu.locationAMap.stopRequestLocations()\r\n    }\r\n    localStorage.removeItem('startRecordLines')\r\n    bus.$off('startSignIn')\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n//隐藏滚动条\r\n&::-webkit-scrollbar {\r\n  display: none; //Chrome | Safari\r\n}\r\n/deep/.mapboxgl-popup-content {\r\n  width: auto;\r\n  min-width: 280px;\r\n  height: 50px;\r\n  padding: 24px 36px;\r\n  border-radius: 18px;\r\n  box-shadow: 10px 10px 30px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.task-map {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n\r\n  .content {\r\n    width: 100%;\r\n    height: 40%;\r\n    background: #ffffff;\r\n    box-shadow: 0px -6px 12px 0px rgba(104, 115, 127, 0.1);\r\n    border-radius: 30px 30px 0 0;\r\n    position: absolute;\r\n    bottom: 0;\r\n    z-index: 4;\r\n    transition: all 0.5s;\r\n    .contentArea {\r\n      width: 100%;\r\n      height: 100%;\r\n      background: #f5f7f9;\r\n      display: flex;\r\n      flex-direction: column;\r\n      .buttonArea {\r\n        width: var(--width);\r\n        padding: 30px 20px;\r\n        display: flex;\r\n        .button {\r\n          min-width: 160px;\r\n          margin: 0 10px;\r\n          border: none;\r\n          box-shadow: 0px 4px 16px 0px rgba(104, 115, 127, 0.06);\r\n        }\r\n      }\r\n      .listArea {\r\n        margin: 0 4%;\r\n        background: #ffffff;\r\n        height: calc(100% - 148px);\r\n        padding: 20px 36px 0;\r\n        border-radius: 16px 16px 0 0;\r\n        overflow-y: scroll;\r\n        .list {\r\n          height: 45px;\r\n          display: flex;\r\n          padding: 40px 0;\r\n          border-bottom: 1px solid #eeeeee;\r\n          .list_num {\r\n            min-width: 60px;\r\n            margin-right: 30px;\r\n            margin-left: 10px;\r\n            height: 43px;\r\n            font-size: 36px;\r\n            font-family: Helvetica-Bold, Helvetica;\r\n            font-weight: bold;\r\n            color: #1b67d8;\r\n            line-height: 43px;\r\n          }\r\n          .list_type {\r\n            min-width: 160px;\r\n            height: 45px;\r\n            font-size: 32px;\r\n            font-family: PingFangSC-Regular, PingFang SC;\r\n            font-weight: 400;\r\n            color: #333333;\r\n            line-height: 45px;\r\n          }\r\n          .list_id {\r\n            min-width: 200px;\r\n            height: 45px;\r\n            font-size: 32px;\r\n            font-family: PingFangSC-Regular, PingFang SC;\r\n            font-weight: 400;\r\n            color: #333333;\r\n            line-height: 45px;\r\n          }\r\n          .list_deal {\r\n            height: 45px;\r\n            font-size: 32px;\r\n            font-family: PingFangSC-Regular, PingFang SC;\r\n            font-weight: 400;\r\n            color: #1b67d8;\r\n            line-height: 45px;\r\n            display: flex;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .inactive {\r\n    height: 0;\r\n  }\r\n\r\n  .tip-tools {\r\n    position: fixed;\r\n    display: flex;\r\n    top: 15%;\r\n    left: 200px;\r\n    border-radius: 16px;\r\n    padding: 24px;\r\n    background: #FFFFFF;\r\n    box-shadow: 0px 10px 18px 0px rgba(0, 0, 0, 0.06);\r\n    border: 2px solid rgba(23, 144, 254, 0.6);\r\n\r\n    .tipImg {\r\n      width: 32px;\r\n      height: 32px;\r\n      margin-right: 16px;\r\n    }\r\n\r\n    .context {\r\n      font-size: 24px;\r\n      font-family: MicrosoftYaHei;\r\n      color: #1B67D8;\r\n      line-height: 31px;\r\n    }\r\n  }\r\n\r\n  .confirm-tip {\r\n    width: 80%;\r\n    height: 44%;\r\n    margin: auto;\r\n    background: #FFFFFF;\r\n    border-radius: 16px;\r\n    margin: 50% auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    /deep/.contentSelf {\r\n      height: calc(100% - 164px);\r\n      padding: 32px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      .icon {\r\n        width: 100%;\r\n        height: 100px;\r\n        display: flex;\r\n        margin: 24px 0 28px;\r\n      }\r\n      .info {\r\n        height: auto;\r\n        font-size: 28px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #555555;\r\n        line-height: 40px;\r\n        text-align: center;\r\n      }\r\n    }\r\n    /deep/.confirm_btn {\r\n      width: 100%;\r\n      height: 100px;\r\n      display: flex;\r\n      .btn1 {\r\n        width: 50%;\r\n        height: 100%;\r\n        border-top: 1px solid #DCDEE3;\r\n        font-size: 32px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #333333;\r\n        line-height: 100px;\r\n        text-align: center;\r\n      }\r\n      .btn2 {\r\n        border-right: 1px solid #DCDEE3;\r\n      }\r\n    }\r\n  }\r\n\r\n  .alert {\r\n    top: 2.22rem;\r\n    position: fixed;\r\n    width: 100%;\r\n    z-index: 4;\r\n    background-color: #62707c;\r\n    opacity: 0.5;\r\n    font-size: 1rem;\r\n\r\n    .u-alert-content {\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  .progress {\r\n    width: 80%;\r\n    height: 1rem;\r\n    background-color: #fff;\r\n    box-shadow: 0 0.4rem 0.6rem 0 rgba(0, 0, 0, 0.2);\r\n    border-radius: 0.1rem;\r\n    margin: 0 0.3rem;\r\n    padding: 0.1rem 0.15rem;\r\n    position: fixed;\r\n    top: 2.5rem;\r\n\r\n    &-box {\r\n      width: 100%;\r\n      margin: 0.3rem 0;\r\n      display: flex;\r\n\r\n      .pro-dot {\r\n        width: 0.3rem;\r\n        height: 0.3rem;\r\n        border-radius: 50%;\r\n        float: left;\r\n        margin: auto 0.3rem;\r\n      }\r\n\r\n      .pro-text {\r\n        line-height: 0.5rem;\r\n        display: flex;\r\n        font-size: 12px;\r\n        float: left;\r\n      }\r\n    }\r\n  }\r\n\r\n  .pro-circle {\r\n    position: fixed;\r\n    width: 1rem;\r\n    height: 1rem;\r\n    right: 0.1rem;\r\n    padding: 0.1rem;\r\n    top: 2.5rem;\r\n    // margin: 0.27rem 0rem;\r\n    background-color: #fff;\r\n    z-index: 3;\r\n    box-shadow: 0rem 0.22rem 0.61rem 0rem rgba(0, 0, 0, 0.2);\r\n    border-radius: 0.1rem;\r\n\r\n    .progress-text-view {\r\n      font-size: 0.4rem;\r\n      z-index: 4;\r\n\r\n      .progress-text-up {\r\n        color: #306cc8;\r\n      }\r\n\r\n      .progress-text-down {\r\n        border-top: 0.05rem solid #555555;\r\n      }\r\n    }\r\n  }\r\n\r\n  .point-list {\r\n    position: fixed;\r\n    width: 1.2rem;\r\n    height: 1.2rem;\r\n    left: 0.3rem;\r\n    bottom: 2rem;\r\n    background-color: #fff;\r\n    z-index: 3;\r\n    box-shadow: 0rem 0.22rem 0.61rem 0rem rgba(0, 0, 0, 0.2);\r\n    border-radius: 0.27rem;\r\n\r\n    .list-image {\r\n      margin: 0.18rem;\r\n      width: 0.82rem;\r\n      height: 0.82rem;\r\n    }\r\n  }\r\n\r\n  .footer {\r\n    width: inherit;\r\n    padding: 1.11rem 0.83rem;\r\n    color: #333333;\r\n    background-color: #ffffff;\r\n    height: 3.55rem;\r\n    z-index: 4;\r\n    position: fixed;\r\n    bottom: 0rem;\r\n\r\n    &-content {\r\n      float: left;\r\n    }\r\n\r\n    &-btn {\r\n      float: right;\r\n      width: 4.44rem;\r\n      height: 1.77rem;\r\n      line-height: 1.77rem;\r\n      border-radius: 0.88rem;\r\n    }\r\n  }\r\n\r\n  .start-record {\r\n    position: absolute;\r\n    z-index: 3;\r\n    left: 50%;\r\n    bottom: 235px;\r\n    transform: translate(-50%, 0);\r\n\r\n    img {\r\n      width: 140px;\r\n      height: 140px;\r\n    }\r\n  }\r\n\r\n  .controlCard {\r\n    width: 100%;\r\n    height: 328px;\r\n    position: absolute;\r\n    bottom: 0;\r\n    background-image: url('~@/assets/img/inspection/controlBg.png');\r\n    background-repeat: no-repeat;\r\n    background-size: 100%;\r\n\r\n    .controlContent {\r\n      margin: 60px 30px 0;\r\n      display: flex;\r\n      flex-direction: column;\r\n\r\n      .infoContent {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n        margin-bottom: 24px;\r\n\r\n        .block {\r\n          text-align: center;\r\n          width: 210px;\r\n          height: 160px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          background: rgba(27, 103, 216, 0.05);\r\n          border-radius: 16px;\r\n          // margin: 0 20px;\r\n\r\n          .rate {\r\n            width: 100%;\r\n            height: 50%;\r\n            display: flex;\r\n            align-items: center;\r\n            margin: auto;\r\n            font-size: 48px;\r\n            font-family: Helvetica-Bold, Helvetica;\r\n            font-weight: bold;\r\n            color: #306cc8;\r\n\r\n            .centerStyle {\r\n              margin: auto;\r\n              display: flex;\r\n              align-items: center;\r\n              font-size: 38px;\r\n              font-family: Helvetica-Bold, Helvetica;\r\n              font-weight: bold;\r\n\r\n              .inspKp {\r\n                padding-bottom: 3px;\r\n                padding-right: 3px;\r\n                color: #306cc8;\r\n              }\r\n\r\n              .uninspKp {\r\n                color: #191919;\r\n                letter-spacing: 3px;\r\n              }\r\n            }\r\n          }\r\n\r\n          .name {\r\n            font-size: 14px;\r\n            font-family: PingFangSC-Regular, PingFang SC;\r\n            font-weight: 400;\r\n            color: #555555;\r\n            width: 100%;\r\n            height: 33%;\r\n          }\r\n        }\r\n      }\r\n\r\n      .bottomSide {\r\n        width: 100%;\r\n        display: flex;\r\n        margin-top: 24px;\r\n        justify-content: space-around;\r\n      }\r\n\r\n      .endControl {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n\r\n        .leftText {\r\n          width: 27%;\r\n          display: flex;\r\n          justify-content: space-around;\r\n          align-items: center;\r\n\r\n          img {\r\n            width: 32px;\r\n            height: 32px;\r\n            margin: auto;\r\n          }\r\n\r\n          /deep/.fm-count-down {\r\n            font-size: 24px;\r\n            color: #306cc8;\r\n          }\r\n        }\r\n\r\n        .rightButton {\r\n          display: flex;\r\n\r\n          .endBtn {\r\n            font-size: 24px;\r\n            width: 120px;\r\n            height: 60px;\r\n            background: #ffffff;\r\n            color: #306cc8;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .viewCard {\r\n    width: 100%;\r\n    height: 260px;\r\n    position: absolute;\r\n    bottom: 0;\r\n    background: #FFFFFF;\r\n    box-shadow: 0px 0px 18px 0px rgba(104, 115, 127, 0.18);\r\n    // background-image: url('~@/assets/img/inspection/controlBg.png');\r\n    // background-repeat: no-repeat;\r\n    // background-size: 100%;\r\n\r\n    .controlContent {\r\n      margin: 32px 30px 0;\r\n      display: flex;\r\n      flex-direction: column;\r\n\r\n      .infoContent {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n        margin-bottom: 24px;\r\n\r\n        .block {\r\n          text-align: center;\r\n          width: 210px;\r\n          height: 160px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          background: rgba(27, 103, 216, 0.05);\r\n          border-radius: 16px;\r\n          // margin: 0 20px;\r\n\r\n          .rate {\r\n            width: 100%;\r\n            height: 50%;\r\n            display: flex;\r\n            align-items: center;\r\n            margin: auto;\r\n            font-size: 48px;\r\n            font-family: Helvetica-Bold, Helvetica;\r\n            font-weight: bold;\r\n            color: #306cc8;\r\n\r\n            .centerStyle {\r\n              margin: auto;\r\n              display: flex;\r\n              align-items: center;\r\n              font-size: 38px;\r\n              font-family: Helvetica-Bold, Helvetica;\r\n              font-weight: bold;\r\n\r\n              .inspKp {\r\n                padding-bottom: 3px;\r\n                padding-right: 3px;\r\n                color: #306cc8;\r\n              }\r\n\r\n              .uninspKp {\r\n                color: #191919;\r\n                letter-spacing: 3px;\r\n              }\r\n            }\r\n          }\r\n\r\n          .name {\r\n            font-size: 14px;\r\n            font-family: PingFangSC-Regular, PingFang SC;\r\n            font-weight: 400;\r\n            color: #555555;\r\n            width: 100%;\r\n            height: 33%;\r\n          }\r\n        }\r\n      }\r\n\r\n      .bottomSide {\r\n        width: 100%;\r\n        display: flex;\r\n        margin-top: 24px;\r\n        justify-content: space-around;\r\n      }\r\n\r\n      .endControl {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n\r\n        .leftText {\r\n          width: 27%;\r\n          display: flex;\r\n          justify-content: space-around;\r\n          align-items: center;\r\n\r\n          img {\r\n            width: 32px;\r\n            height: 32px;\r\n            margin: auto;\r\n          }\r\n\r\n          /deep/.fm-count-down {\r\n            font-size: 24px;\r\n            color: #306cc8;\r\n          }\r\n        }\r\n\r\n        .rightButton {\r\n          display: flex;\r\n\r\n          .endBtn {\r\n            font-size: 24px;\r\n            width: 120px;\r\n            height: 60px;\r\n            background: #ffffff;\r\n            color: #306cc8;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .tool-box {\r\n    position: fixed;\r\n    width: 1.2rem;\r\n    height: auto;\r\n    right: 0.3rem;\r\n    bottom: 350px;\r\n\r\n    .refresh {\r\n      width: 1.2rem;\r\n      height: 1.2rem;\r\n      margin-bottom: 0.55rem;\r\n      background-color: #fff;\r\n      z-index: 3;\r\n      box-shadow: 0rem 0.22rem 0.61rem 0rem rgba(0, 0, 0, 0.2);\r\n      border-radius: 0.27rem;\r\n\r\n      &-image {\r\n        margin: 0.18rem;\r\n        width: 0.82rem;\r\n        height: 0.82rem;\r\n      }\r\n    }\r\n\r\n    .route {\r\n      width: 1.2rem;\r\n      height: 1.2rem;\r\n      margin-bottom: 0.55rem;\r\n      background-color: #fff;\r\n      z-index: 3;\r\n      box-shadow: 0rem 0.22rem 0.61rem 0rem rgba(0, 0, 0, 0.2);\r\n      border-radius: 0.27rem;\r\n\r\n      &-image {\r\n        margin: 0.18rem;\r\n        width: 0.82rem;\r\n        height: 0.82rem;\r\n      }\r\n    }\r\n\r\n    .location {\r\n      width: 1.2rem;\r\n      height: 1.2rem;\r\n      background-color: #fff;\r\n      z-index: 3;\r\n      box-shadow: 0rem 0.22rem 0.61rem 0rem rgba(0, 0, 0, 0.2);\r\n      border-radius: 60px;\r\n\r\n      &-image {\r\n        margin: 0.18rem;\r\n        width: 0.82rem;\r\n        height: 0.82rem;\r\n      }\r\n    }\r\n  }\r\n\r\n  /deep/.fm-popup {\r\n    background: #f5f7f9;\r\n  }\r\n\r\n  .popup-view {\r\n    height: auto;\r\n    width: auto;\r\n    margin: 32px;\r\n    overflow: scroll;\r\n    border-radius: 32px;\r\n    background-color: #fff;\r\n\r\n    /deep/.fm-radio--horizontal {\r\n      margin-right: 20px;\r\n    }\r\n\r\n    .title {\r\n      display: flex;\r\n      margin-top: 32px;\r\n      padding-bottom: 32px;\r\n      border-bottom: 1px #f5f5f5 solid;\r\n\r\n      img {\r\n        width: 6px;\r\n        height: 40px;\r\n      }\r\n\r\n      .deviceId {\r\n        margin-left: 32px;\r\n        font-size: 36px;\r\n        font-family: PingFangSC-Semibold, PingFang SC;\r\n        font-weight: 600;\r\n        color: #191919;\r\n        line-height: 50px;\r\n      }\r\n    }\r\n\r\n    /deep/.fm-uploader__wrapper {\r\n      margin-left: 16px;\r\n    }\r\n\r\n    .preview-cover {\r\n      position: absolute;\r\n      bottom: 0;\r\n      box-sizing: border-box;\r\n      width: 100%;\r\n      padding: 4px;\r\n      color: #fff;\r\n      font-size: 12px;\r\n      text-align: center;\r\n      background: rgba(0, 0, 0, 0.3);\r\n    }\r\n  }\r\n\r\n  .btnArea {\r\n    display: flex;\r\n\r\n    .btn {\r\n      width: 94%;\r\n      margin: 0 auto;\r\n    }\r\n\r\n    .btn1 {\r\n      width: 44%;\r\n      margin: 0 12px 0 30px;\r\n    }\r\n\r\n    .btn2 {\r\n      width: 44%;\r\n      margin: 0 30px 0 12px;\r\n    }\r\n  }\r\n\r\n  .confirm-pop {\r\n    .title {\r\n      border-left: 0.22rem solid #306cc8;\r\n      margin: 0.27rem;\r\n      padding-left: 0.55rem;\r\n    }\r\n\r\n    .content {\r\n      border-top: 0.027rem solid rgba(128, 128, 128, 0.322);\r\n      width: 11.66rem;\r\n      padding: 1.33rem;\r\n      text-align: center;\r\n      background-color: #fff;\r\n\r\n      &-view {\r\n        font-size: 0.88rem;\r\n      }\r\n\r\n      .confirm-btn {\r\n        margin-top: 2.22rem;\r\n        justify-items: center;\r\n\r\n        .popup-btn {\r\n          float: left;\r\n          width: 3.33rem;\r\n          height: 1.77rem;\r\n          border-radius: 0.27rem;\r\n\r\n          &-l {\r\n            margin-left: 0.55rem;\r\n            margin-right: 0.55rem;\r\n          }\r\n\r\n          &-r {\r\n            margin-left: 0.55rem;\r\n            margin-right: 0.55rem;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";AAgTA,OAAAA,GAAA;AACA,OAAAC,KAAA;AACA,OAAAC,KAAA;AACA,OAAAC,OAAA;AACA,OAAAC,OAAA;AACA,YAAAC,GAAA;AACA,SAAAC,KAAA,EAAAC,MAAA,EAAAC,MAAA;AACA,YAAAC,IAAA;AACA,OAAAC,QAAA;AACA,OAAAC,eAAA;AACA,OAAAC,GAAA;AACA,OAAAC,UAAA;AACA,MAAAC,MAAA;EACAC,GAAA;EACAC,WAAA;AACA;AACA,IAAAC,qBAAA;AACA,IAAAC,oBAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAjB,OAAA;IACAO,QAAA;IACAC;EACA;EACAU,KAAA;IACA;MACAC,WAAA;MACAC,UAAA;MACAC,mBAAA;MACAC,OAAA;MACAC,QAAA;MACAC,aAAA;MACAC,QAAA;MACAC,WAAA;MACAC,UAAA;MACAC,SAAA;MACAC,YAAA;MACAC,MAAA;MACAC,kBAAA;MACA;MACAC,YAAA;MACAC,MAAA;MACAC,MAAA;MACAC,UAAA;MACAC,SAAA;MACAC,WAAA;MACAC,OAAA,GACA;QACAC,IAAA;MACA,GACA;QACAA,IAAA;MACA,EACA;MACAC,WAAA;MACA;MACAC,aAAA;MACA;MACA;MACAC,gBAAA;MACAC,WAAA;MACA;MACAC,qBAAA;MACAC,WAAA;MACAC,gBAAA;MACAC,UAAA;MACA;MACAC,eAAA;MACAC,KAAA;MACA;MACAC,QAAA;MACAC,WAAA;MACAC,eAAA;MACAC,aAAA;MACAC,QAAA;MACAC,UAAA;MACAC,QAAA;QACAC,YAAA;QACAC,cAAA;QACAC,MAAA;QACAC,QAAA;QACAC,MAAA;QACAC,OAAA;QACAC,WAAA;MACA;MACAC,UAAA;QACAC,QAAA;QACAC,UAAA;QACAC,WAAA;MACA;MACAC,UAAA;MACAC,YAAA;MACAC,gBAAA;MACAC,OAAA;MACAC,UAAA;MACA;MACAC,aAAA;MACAC,SAAA;MACAC,aAAA;MACAC,SAAA,GACA;QACA5D,IAAA;QACA6D,KAAA;MACA,GACA;QACA7D,IAAA;QACA6D,KAAA;MACA,EACA;MACAC,WAAA,GACA;QACA9D,IAAA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AA,EAAA2G,QAAA;QACA,KAAA8F,UAAA;UACA7b,KAAA,CAAAsI,OAAA;YACAC,OAAA;YACAC,QAAA;UACA;UACA;QACA;QACAvB,OAAA,CAAAC,GAAA,cAAA9C,OAAA;QACA;QACA,KAAAgC,uBAAA;QACA,IAAA2V,OAAA;UACAlT,OAAA,EAAAzE,OAAA,CAAAyE,OAAA;UAAA;UACAmT,UAAA,EAAA5X,OAAA,CAAAwI,UAAA;QACA;QACA;QACA7M,GAAA,CAAAkc,kBAAA,CAAAF,OAAA,EACA1S,IAAA,CAAAC,GAAA;UAAA,IAAA4S,SAAA;UACA,KAAA9V,uBAAA,IAAAkD,GAAA,aAAAA,GAAA,gBAAA4S,SAAA,GAAA5S,GAAA,CAAAvI,IAAA,cAAAmb,SAAA,uBAAAA,SAAA,CAAAvT,MAAA,CAAA4C,IAAA;YACA,OAAAA,IAAA,CAAA4Q,UAAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;UACA,SAAA/V,uBAAA,CAAAG,MAAA;YACA,KAAAH,uBAAA,CAAAoE,OAAA,CAAAe,IAAA;cACA,IAAA6Q,EAAA;cACA;cACA,IAAA7Q,IAAA,CAAA6P,SAAA,CAAAiB,OAAA;gBACAD,EAAA,GAAA7Q,IAAA,CAAA6P,SAAA,CAAA/K,KAAA;cACA;cACA,KAAAiM,IAAA,CAAA/Q,IAAA,eAAA6Q,EAAA;YACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACAnV,OAAA,CA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"}]}