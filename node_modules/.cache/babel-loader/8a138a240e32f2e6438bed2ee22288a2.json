{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\utils\\encryption\\sm4.js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\utils\\encryption\\sm4.js","mtime":1708928163352},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoNCiAqIEBEZXNjcmlwdGlvbjogU000IOWKoOWvhi/op6Plr4YNCiAqIEBBdXRob3I6IHllX3hmDQogKiBARGF0ZTogMjAyMS0wMi0wNCAxMDoxMzo1OA0KICogQExhc3RFZGl0VGltZTogMjAyMS0wOC0zMSAxNDowMzo0MA0KICogQExhc3RFZGl0b3JzOiBQbGVhc2Ugc2V0IExhc3RFZGl0b3JzDQogKiBAUmVmZXJlbmNlOg0KICovCgppbXBvcnQgeyBzbTIgfSBmcm9tICJzbS1jcnlwdG8iOwovLyAjU00y5ZCO56uv5YWs6ZKlCmxldCBTTTJfQkFDS19QVUJMSUNLX0tFWSA9ICIwNDIwMzVjZmZlYWNkYTE0ZjRhNzY4NDI1MDcwZGI4ZmJlMTM2YzcyYjgzNTgxOGM1NTVkZWJlMzMwYzFkMjIwZGE1MTRjYTQ2NmI2YzE3MWNjMjQ0NTg0NGM3MGNiMDAzMmVlN2RmMGI0YTExZmQ0MDk3YTkyOTc3MGZjMzNjMDdkIjsKLy8gI1NNMuWJjeerr+err+WFrOmSpQovLyBsZXQgU00yX1BVQkxJQ0tfS0VZID0gJzA0NWFhMDAxNWNjMWI2YmZkZWZhNWFmZDQwNDZjNzhiNWIwOTBjZDY1OGQ5MmEyNjMxNWJmZjZjODA1YjFmY2ZiMjc5YjNiNWJhZDE2OGZmMWExZmRiN2VkOTFkNDEwMWVmMzRhZTYyOTE0M2ZkYjkyMWM2NDNmNzNkYmI5Y2QxM2UnCi8vICNTTTLnp4HpkqUKbGV0IFNNMl9QUklWQVRFX0tFWSA9ICIzZWY5ZWZlYWYwNTRhZGJmYWZkZjEwNmM5NTEwZmNiZGZiNGNkZmYyYmQ1MmYxNmRlOWJiYzAwNWEzOWZlOTcwIjsKLy8gbGV0IFNNMl9QUklWQVRFX0tFWSA9ICdmYWRmODJjNDcxMjg3MTBlMGU1Y2NiMjFjOWM1ZmI4NmZmNWI1ZjcyYWE3YjE3YzFmN2Q3NzkwMjNiMDA0NDk3JwovLyAjU0005a+G6ZKlCmxldCBTTTRfS0VZID0gIjQzODY5Mzk5QzE0MTFBM0JFNzFBOTlCMzUxMjNBRUZDIjsKLy/nlJ/miJBTTTTlr4bpkqUKLy8gZnVuY3Rpb24gZ2V0S2V5KGxlbmd0aCA9IDMyKSB7Ci8vICAgbGV0IHJhbmRvbSA9ICcwMTIzNDU2Nzg5QUJDREVGJwovLyAgIGxldCBzdHIgPSAnJwoKLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7Ci8vICAgICBzdHIgPSBzdHIgKyByYW5kb20uY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KSkKLy8gICB9CgovLyAgIHJldHVybiBzdHIKLy8gfQoKLy/liqDlr4YKZnVuY3Rpb24gZW5jcnlwdChwbGFpbnRleHQsIGtleSkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogIGNvbnN0IHNtNCA9IG5ldyBTbTR1dGlscyhrZXkpOwogIGlmIChwbGFpbnRleHQgaW5zdGFuY2VvZiBPYmplY3QpIHsKICAgIHBsYWludGV4dCA9IEpTT04uc3RyaW5naWZ5KHBsYWludGV4dCk7CiAgfQogIGNvbnN0IGVuY3J5cHREYXRhID0gc200LmVuY3J5cHREYXRhX0VDQihwbGFpbnRleHQpOwogIGlmICghZW5jcnlwdERhdGEpIHsKICAgIHJldHVybiBmYWxzZTsKICB9IGVsc2UgewogICAgcmV0dXJuIGVuY3J5cHREYXRhOwogIH0KfQoKLy/mjqXlj6PmlbDmja7liqDlr4YKZXhwb3J0IGZ1bmN0aW9uIFNNNEVuY3J5cHQoZGF0YSkgewogIC8vIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHsKICAvL+S7jua1j+iniOWZqOe8k+WtmOS4reiOt+WPllNNNAogIC8vIGNvbnN0IFNNNF9LRVkgPSBzdG9yYWdlLmdldCgnc200X2tleScpCgogIC8vIGlmICghU000X0tFWSkgewogIC8vICAgICBTTTRfS0VZID0gZ2V0S2V5KCkgLy/ojrflj5ZTTTTlr4bpkqUKICAvLyAgICAgc3RvcmFnZS5zZXQoJ3NtNF9rZXknLCBTTTRfS0VZKSAvL+WwhlNNNOWvhumSpeWtmOWCqOWIsOa1j+iniOWZqOe8k+WtmOS4rQogIC8vIH0KCiAgY29uc3QgZW5jcnlwdERhdGEgPSBlbmNyeXB0KGRhdGEsIFNNNF9LRVkpOwogIGlmICghZW5jcnlwdERhdGEpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ+aVsOaNruWKoOWvhuWksei0pScpOwogICAgLy8gcmVqKGZhbHNlKQogICAgcmV0dXJuOwogIH0KCiAgLy8gY29uc3QgZW5jcnlwdFNNNCA9ICcwNCcgKyBzbTIuZG9FbmNyeXB0KFNNNF9LRVksIFNNMl9QVUJMSUNLX0tFWSwgMCkgLy/lsIZTTTRfS0VZ5L2/55SoU00y5YWs6ZKl6L+b6KGM5Yqg5a+GCgogIHJldHVybiBlbmNyeXB0RGF0YTsKICAvLyB9KQp9CgovL+ino+WvhgpmdW5jdGlvbiBkZWNyeXB0KGNpcGhlcnRleHQsIGtleSkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogIGNvbnN0IHNtNCA9IG5ldyBTbTR1dGlscyhrZXkpOwogIGxldCBkZWNyeXB0RGF0YSA9IHNtNC5kZWNyeXB0RGF0YV9FQ0IoY2lwaGVydGV4dCk7CiAgaWYgKCFkZWNyeXB0RGF0YSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBpZiAoZGVjcnlwdERhdGEuY2hhckF0KDApID09PSAieyIgfHwgZGVjcnlwdERhdGEuY2hhckF0KDApID09PSAiWyIpIHsKICAgIGRlY3J5cHREYXRhID0gSlNPTi5wYXJzZShkZWNyeXB0RGF0YSk7CiAgfQogIHJldHVybiBkZWNyeXB0RGF0YTsKfQoKLy/mjqXlj6PmlbDmja7liqDlr4YKZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRfU000KGRhdGEpIHsKICAvLyByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7CiAgLy/ku47mtY/op4jlmajnvJPlrZjkuK3ojrflj5ZTTTQKICAvLyBjb25zdCBTTTRfS0VZID0gc3RvcmFnZS5nZXQoJ3NtNF9rZXknKQoKICAvLyBpZiAoIVNNNF9LRVkpIHsKICAvLyAgICAgU000X0tFWSA9IGdldEtleSgpIC8v6I635Y+WU0005a+G6ZKlCiAgLy8gICAgIHN0b3JhZ2Uuc2V0KCdzbTRfa2V5JywgU000X0tFWSkgLy/lsIZTTTTlr4bpkqXlrZjlgqjliLDmtY/op4jlmajnvJPlrZjkuK0KICAvLyB9CgogIGNvbnN0IGVuY3J5cHREYXRhID0gZW5jcnlwdChkYXRhLCBTTTRfS0VZKTsKICBpZiAoIWVuY3J5cHREYXRhKSB7CiAgICBjb25zb2xlLndhcm4oIuaVsOaNruWKoOWvhuWksei0pSIpOwogICAgLy8gcmVqKGZhbHNlKQogICAgcmV0dXJuOwogIH0KCiAgLy8gY29uc3QgZW5jcnlwdFNNNCA9ICcwNCcgKyBzbTIuZG9FbmNyeXB0KFNNNF9LRVksIFNNMl9QVUJMSUNLX0tFWSwgMCkgLy/lsIZTTTRfS0VZ5L2/55SoU00y5YWs6ZKl6L+b6KGM5Yqg5a+GCgogIHJldHVybiBlbmNyeXB0RGF0YTsKICAvLyB9KQp9CgovL+aOpeWPo+aVsOaNruino+WvhgpleHBvcnQgZnVuY3Rpb24gZGVjcnlwdF9TTTQoZGF0YSkgewogIC8vIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHsKICAvLyBjb25zdCBTTTRfS0VZID0gc20yLmRvRGVjcnlwdChkYXRhLCBTTTJfUFJJVkFURV9LRVksIDApIC8v5L2/55SoU00y56eB6ZKl6Kej5a+G6I635Y+WU000X0tFWQoKICBpZiAoIVNNNF9LRVkpIHsKICAgIGNvbnNvbGUud2FybigiU0005a+G6ZKl6Kej5a+G5aSx6LSlIik7CiAgICAvLyByZWooZmFsc2UpCiAgICByZXR1cm47CiAgfQogIGNvbnN0IGRlY3J5cHREYXRhID0gZGVjcnlwdChkYXRhLCBTTTRfS0VZKTsgLy/kvb/nlKhTTTRfS0VZ6Kej5a+GCiAgaWYgKCFkZWNyeXB0RGF0YSkgewogICAgY29uc29sZS53YXJuKCLmlbDmja7op6Plr4blpLHotKUiKTsKICAgIC8vIHJlaihmYWxzZSkKICAgIHJldHVybjsKICB9CiAgcmV0dXJuIGRlY3J5cHREYXRhOwogIC8vIH0pCn0KZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRfU00yKGRhdGEpIHsKICBjb25zdCBlbmNyeXB0U00yID0gIjA0IiArIHNtMi5kb0VuY3J5cHQoZGF0YSwgU00yX0JBQ0tfUFVCTElDS19LRVksIDApOwogIHJldHVybiBlbmNyeXB0U00yOwp9CmV4cG9ydCBmdW5jdGlvbiBkZWNyeXB0X1NNMihkYXRhKSB7CiAgZGF0YSA9IGRhdGEuc2xpY2UoMik7CiAgY29uc3QgZGVjcnlwdFNNMiA9IHNtMi5kb0RlY3J5cHQoZGF0YSwgU00yX1BSSVZBVEVfS0VZLCAwKTsKICByZXR1cm4gZGVjcnlwdFNNMjsKfQ=="},{"version":3,"names":["sm2","SM2_BACK_PUBLICK_KEY","SM2_PRIVATE_KEY","SM4_KEY","encrypt","plaintext","key","sm4","Sm4utils","Object","JSON","stringify","encryptData","encryptData_ECB","SM4Encrypt","data","console","error","decrypt","ciphertext","decryptData","decryptData_ECB","charAt","parse","encrypt_SM4","warn","decrypt_SM4","encrypt_SM2","encryptSM2","doEncrypt","decrypt_SM2","slice","decryptSM2","doDecrypt"],"sources":["E:/ty_project/xasw-yy/revenue/xasw-mobile/src/utils/encryption/sm4.js"],"sourcesContent":["/*\r\n * @Description: SM4 加密/解密\r\n * @Author: ye_xf\r\n * @Date: 2021-02-04 10:13:58\r\n * @LastEditTime: 2021-08-31 14:03:40\r\n * @LastEditors: Please set LastEditors\r\n * @Reference:\r\n */\r\n\r\nimport { sm2 } from \"sm-crypto\";\r\n// #SM2后端公钥\r\nlet SM2_BACK_PUBLICK_KEY =\r\n  \"042035cffeacda14f4a768425070db8fbe136c72b835818c555debe330c1d220da514ca466b6c171cc2445844c70cb0032ee7df0b4a11fd4097a929770fc33c07d\";\r\n// #SM2前端端公钥\r\n// let SM2_PUBLICK_KEY = '045aa0015cc1b6bfdefa5afd4046c78b5b090cd658d92a26315bff6c805b1fcfb279b3b5bad168ff1a1fdb7ed91d4101ef34ae629143fdb921c643f73dbb9cd13e'\r\n// #SM2私钥\r\nlet SM2_PRIVATE_KEY = \"3ef9efeaf054adbfafdf106c9510fcbdfb4cdff2bd52f16de9bbc005a39fe970\";\r\n// let SM2_PRIVATE_KEY = 'fadf82c47128710e0e5ccb21c9c5fb86ff5b5f72aa7b17c1f7d779023b004497'\r\n// #SM4密钥\r\nlet SM4_KEY = \"43869399C1411A3BE71A99B35123AEFC\";\r\n//生成SM4密钥\r\n// function getKey(length = 32) {\r\n//   let random = '0123456789ABCDEF'\r\n//   let str = ''\r\n\r\n//   for (let i = 0; i < length; i++) {\r\n//     str = str + random.charAt(Math.floor(Math.random() * 16))\r\n//   }\r\n\r\n//   return str\r\n// }\r\n\r\n//加密\r\nfunction encrypt(plaintext, key) {\r\n  // eslint-disable-next-line no-undef\r\n  const sm4 = new Sm4utils(key);\r\n\r\n  if (plaintext instanceof Object) {\r\n    plaintext = JSON.stringify(plaintext);\r\n  }\r\n\r\n  const encryptData = sm4.encryptData_ECB(plaintext);\r\n\r\n  if (!encryptData) {\r\n    return false;\r\n  } else {\r\n    return encryptData;\r\n  }\r\n}\r\n\r\n//接口数据加密\r\nexport function SM4Encrypt (data) {\r\n  // return new Promise((res, rej) => {\r\n  //从浏览器缓存中获取SM4\r\n  // const SM4_KEY = storage.get('sm4_key')\r\n\r\n  // if (!SM4_KEY) {\r\n  //     SM4_KEY = getKey() //获取SM4密钥\r\n  //     storage.set('sm4_key', SM4_KEY) //将SM4密钥存储到浏览器缓存中\r\n  // }\r\n\r\n  const encryptData = encrypt(data, SM4_KEY)\r\n\r\n  if (!encryptData) {\r\n    console.error('数据加密失败')\r\n    // rej(false)\r\n    return\r\n  }\r\n\r\n  // const encryptSM4 = '04' + sm2.doEncrypt(SM4_KEY, SM2_PUBLICK_KEY, 0) //将SM4_KEY使用SM2公钥进行加密\r\n\r\n  return encryptData\r\n  // })\r\n}\r\n\r\n//解密\r\nfunction decrypt(ciphertext, key) {\r\n  // eslint-disable-next-line no-undef\r\n  const sm4 = new Sm4utils(key);\r\n  let decryptData = sm4.decryptData_ECB(ciphertext);\r\n\r\n  if (!decryptData) {\r\n    return false;\r\n  }\r\n\r\n  if (decryptData.charAt(0) === \"{\" || decryptData.charAt(0) === \"[\") {\r\n    decryptData = JSON.parse(decryptData);\r\n  }\r\n\r\n  return decryptData;\r\n}\r\n\r\n//接口数据加密\r\nexport function encrypt_SM4(data) {\r\n  // return new Promise((res, rej) => {\r\n  //从浏览器缓存中获取SM4\r\n  // const SM4_KEY = storage.get('sm4_key')\r\n\r\n  // if (!SM4_KEY) {\r\n  //     SM4_KEY = getKey() //获取SM4密钥\r\n  //     storage.set('sm4_key', SM4_KEY) //将SM4密钥存储到浏览器缓存中\r\n  // }\r\n\r\n  const encryptData = encrypt(data, SM4_KEY);\r\n\r\n  if (!encryptData) {\r\n    console.warn(\"数据加密失败\");\r\n    // rej(false)\r\n    return;\r\n  }\r\n\r\n  // const encryptSM4 = '04' + sm2.doEncrypt(SM4_KEY, SM2_PUBLICK_KEY, 0) //将SM4_KEY使用SM2公钥进行加密\r\n\r\n  return encryptData;\r\n  // })\r\n}\r\n\r\n//接口数据解密\r\nexport function decrypt_SM4(data) {\r\n  // return new Promise((res, rej) => {\r\n  // const SM4_KEY = sm2.doDecrypt(data, SM2_PRIVATE_KEY, 0) //使用SM2私钥解密获取SM4_KEY\r\n\r\n  if (!SM4_KEY) {\r\n    console.warn(\"SM4密钥解密失败\");\r\n    // rej(false)\r\n    return;\r\n  }\r\n\r\n  const decryptData = decrypt(data, SM4_KEY); //使用SM4_KEY解密\r\n  if (!decryptData) {\r\n    console.warn(\"数据解密失败\");\r\n    // rej(false)\r\n    return;\r\n  }\r\n\r\n  return decryptData;\r\n  // })\r\n}\r\nexport function encrypt_SM2(data) {\r\n  const encryptSM2 = \"04\" + sm2.doEncrypt(data, SM2_BACK_PUBLICK_KEY, 0);\r\n  return encryptSM2;\r\n}\r\nexport function decrypt_SM2(data) {\r\n  data = data.slice(2);\r\n\r\n  const decryptSM2 = sm2.doDecrypt(data, SM2_PRIVATE_KEY, 0);\r\n\r\n  return decryptSM2;\r\n}\r\n"],"mappings":"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"}]}