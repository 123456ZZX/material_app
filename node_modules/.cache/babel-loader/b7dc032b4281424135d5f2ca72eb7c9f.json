{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\inspectMap\\mixins\\mixins.js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\inspectMap\\mixins\\mixins.js","mtime":1705912915824},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UtYWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCB7IGdpc0RvbWFpbiB9IGZyb20gJy4uL3NldHRpbmdzLmpzJzsKaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tICcuLi91dGlscy9hY3Rpb24uanMnOwppbXBvcnQgYnVzIGZyb20gIi4uL3V0aWxzL0J1cy5qcyI7CmltcG9ydCB7IHNob3dQcm9wZXJ0aWVzMiB9IGZyb20gIkAvY29tbW9uL3Byb3BlcnRpZXMuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnOwppbXBvcnQgY291bnRUaW1lUG9wIGZyb20gIi4uL2NvbXBvbmVudHMvY291bnRUaW1lUG9wLnZ1ZSI7CmltcG9ydCBsYXllcnMgZnJvbSAnLi9sYXllckNvbmZpZyc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBib3JkZXIgZnJvbSAnLi4vdXRpbHMvYm9yZGVyLmpzb24nOwppbXBvcnQgQVBJIGZyb20gJ0AvY29tbW9uL2NvbmZpZy5qcyc7CmltcG9ydCBiYXNlVXJsIGZyb20gIkAvY29tbW9uL2NvbmZpZy5qcyI7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInOwppbXBvcnQgUG9wdXAgZnJvbSAnLi4vY29tcG9uZW50cy9wb3B1cC52dWUnOwpjb25zdCBQb3B1cEl0ZW0gPSBWdWUuZXh0ZW5kKFBvcHVwKTsKaW1wb3J0ICogYXMgdHVyZiBmcm9tICdAdHVyZi90dXJmJzsKaW1wb3J0IHsgcmVjb3JkSW5zcExpbmUgfSBmcm9tICcuLi8uLi9pbnNwZWN0aW9uTWFuYWdlL2FwaS5qcyc7CmNvbnN0IENvdW50VGltZVBvcCA9IFZ1ZS5leHRlbmQoY291bnRUaW1lUG9wKTsKY29uc3QgbGF5ZXJfeXVoYW5nX3dzID0gW3sKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NnX3N5bWJvbCIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImZpbHRlciI6IFsnYWxsJywgWydoYXMnLCAnY2FsaWJlciddLCBbJ2FueScsIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcwJ10sIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcxJ11dXSwKICAic291cmNlIjogInl1aGFuZ193c193c2ciLAogICJzb3VyY2UtbGF5ZXIiOiAid3Nfd3NnIiwKICAibGF5b3V0IjogewogICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCiAgICAic3ltYm9sLXBsYWNlbWVudCI6ICJsaW5lIiwKICAgICJzeW1ib2wtc3BhY2luZyI6IFsnaW50ZXJwb2xhdGUnLCBbJ2xpbmVhciddLCBbJ3pvb20nXSwgMTAsIDUsIDE1LCA1MCwgMTgsIDEwMF0sCiAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRlIjogMCwKICAgICJpY29uLXJvdGF0ZSI6IFsiKiIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiZmxvd2RpciJdXSwgMTgwXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIsCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAiaWNvbi1wYWRkaW5nIjogMiwKICAgICJpY29uLW9mZnNldCI6IFswLCAtNV0sCiAgICAidGV4dC1wYWRkaW5nIjogMCwKICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAogICAgImljb24taW1hZ2UiOiAiamlhbnRvdSIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogInJnYmEoMTQ1LCA4MCwgOSwgMSkiLAogICAgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NnIiwKICAidHlwZSI6ICJsaW5lIiwKICAic291cmNlIjogInl1aGFuZ193c193c2ciLAogICJzb3VyY2UtbGF5ZXIiOiAid3Nfd3NnIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDE0NSwgODAsIDksIDEpIiwKICAgICJsaW5lLXdpZHRoIjogWyIrIiwgWyIvIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJjYWxpYmVyIl1dLCA1MDBdLCAwLjJdCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ3dzX3dzX3BqZ19zeW1ib2wiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDExLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3BqZyIsCiAgImZpbHRlciI6IFsnYW55JywgWyc9PScsIFsnZ2V0JywgJ2Zsb3dkaXInXSwgJzAnXSwgWyc9PScsIFsnZ2V0JywgJ2Zsb3dkaXInXSwgJzEnXV0sCiAgInNvdXJjZS1sYXllciI6ICJwc19wamciLAogICJsYXlvdXQiOiB7CiAgICAidGV4dC1maWVsZCI6IFsiY29uY2F0IiwgIkROIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwKICAgICJzeW1ib2wtcGxhY2VtZW50IjogImxpbmUiLAogICAgInN5bWJvbC1zcGFjaW5nIjogWydpbnRlcnBvbGF0ZScsIFsnbGluZWFyJ10sIFsnem9vbSddLCAxMCwgNSwgMTUsIDUwLCAxOCwgMTAwXSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGUiOiAwLAogICAgImljb24tcm90YXRlIjogWyIqIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJmbG93ZGlyIl1dLCAxODBdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIiwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJpY29uLXBhZGRpbmciOiAyLAogICAgImljb24tb2Zmc2V0IjogWzAsIC01XSwKICAgICJ0ZXh0LXBhZGRpbmciOiAwLAogICAgImljb24tdGV4dC1maXQiOiAibm9uZSIsCiAgICAiaWNvbi1pbWFnZSI6ICJwamdqdCIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogIiNGMjYyRkYiLAogICAgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nd3Nfd3NfcGpnIiwKICAidHlwZSI6ICJsaW5lIiwKICAic291cmNlIjogInl1aGFuZ193c19wamciLAogICJzb3VyY2UtbGF5ZXIiOiAicHNfcGpnIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTEsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICIjRjI2MkZGIiwKICAgICJsaW5lLXdpZHRoIjogWyIrIiwgWyIvIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJjYWxpYmVyIl1dLCA1MDBdLCAwLjJdCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ3dzX3dzX3dzZ3d5aiIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfd3Nfd3Nnd3lqIiwKICAic291cmNlLWxheWVyIjogIndzX3dzZ3d5aiIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDExLAogICJsYXlvdXQiOiB7CiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgImxpbmUtY29sb3IiOiAiI2RlNWEwMyIsCiAgICAibGluZS13aWR0aCI6IFsiKyIsIFsiLyIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwgNTAwXSwgMC4yXQogIH0KfSwgewogICJpZCI6ICJ5dWhhbmd3c193c193c2d3eWpfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxMSwKICAic291cmNlIjogInl1aGFuZ193c193c2d3eWoiLAogICJmaWx0ZXIiOiBbJ2FueScsIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcwJ10sIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcxJ11dLAogICJzb3VyY2UtbGF5ZXIiOiAid3Nfd3Nnd3lqIiwKICAibGF5b3V0IjogewogICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCiAgICAic3ltYm9sLXBsYWNlbWVudCI6ICJsaW5lIiwKICAgICJzeW1ib2wtc3BhY2luZyI6IFsnaW50ZXJwb2xhdGUnLCBbJ2xpbmVhciddLCBbJ3pvb20nXSwgMTAsIDUsIDE1LCA1MCwgMTgsIDEwMF0sCiAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRlIjogMCwKICAgICJpY29uLXJvdGF0ZSI6IFsiKiIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiZmxvd2RpciJdXSwgMTgwXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIsCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAiaWNvbi1wYWRkaW5nIjogMiwKICAgICJpY29uLW9mZnNldCI6IFswLCAtNV0sCiAgICAidGV4dC1wYWRkaW5nIjogMCwKICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAogICAgImljb24taW1hZ2UiOiAid3lqZ3hqdCIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogIiNkZTVhMDMiLAogICAgImljb24tY29sb3IiOiAiI2RlNWEwMyIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn1dOwpjb25zdCBsYXllcl95dWhhbmdfZ3MgPSBbewogICJpZCI6ICJ5dWhhbmdnc19nc183NW1teXhnZCIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfNzVtbSIsCiAgInNvdXJjZS1sYXllciI6ICJnc183NW1teXhnZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE1LAogICJsYXlvdXQiOiB7CiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgImxpbmUtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJsaW5lLXdpZHRoIjogWyIrIiwgWyIvIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJjYWxpYmVyIl1dLCA1MDBdLCAwLjJdCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ2dzX2dzXzc1XzMwMG1tZ2QiLAogICJ0eXBlIjogImxpbmUiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzXzc1LTMwMG1tIiwKICAic291cmNlLWxheWVyIjogImdzXzc1XzMwMG1tZ2QiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJsaW5lLWNvbG9yIjogInJnYmEoNTcsIDE1NCwgMjM0LCAxKSIsCiAgICAibGluZS13aWR0aCI6IFsiKyIsIFsiLyIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwgNTAwXSwgMC4yXQogIH0KfSwgewogICJpZCI6ICJ5dWhhbmdnc19nc18zMDBfNTAwbW1nZCIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfMzAwLTUwMG1tIiwKICAic291cmNlLWxheWVyIjogImdzXzMwMF81MDBtbWdkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTMsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDU3LCAxNTQsIDIzNCwgMSkiLAogICAgImxpbmUtd2lkdGgiOiBbIisiLCBbIi8iLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImNhbGliZXIiXV0sIDUwMF0sIDAuMl0KICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nZ3NfZ3NfNTAwXzgwMG1tZ2QiLAogICJ0eXBlIjogImxpbmUiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzXzUwMC04MDBtbSIsCiAgInNvdXJjZS1sYXllciI6ICJnc181MDBfODAwbW1nZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDEyLAogICJsYXlvdXQiOiB7CiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgImxpbmUtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJsaW5lLXdpZHRoIjogWyIrIiwgWyIvIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJjYWxpYmVyIl1dLCA1MDBdLCAwLjJdCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ2dzX2dzXzgwMG1teXNnZCIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfODAwbW0iLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfODAwbW15c2dkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDU3LCAxNTQsIDIzNCwgMSkiLAogICAgImxpbmUtd2lkdGgiOiBbIisiLCBbIi8iLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImNhbGliZXIiXV0sIDUwMF0sIDAuMl0KICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nZ3NfZ3NfeXNneCIsCiAgInR5cGUiOiAibGluZSIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfeXNneCIsCiAgInNvdXJjZS1sYXllciI6ICJnc195c2d4IiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDE2OCwgMTY4LCAwLCAxKSIsCiAgICAibGluZS13aWR0aCI6IFsiKyIsIFsiLyIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwgNTAwXSwgMC4yXQogIH0KfSwKLy8gewovLyAgICAgImlkIjogInl1aGFuZ2dzX2dzX2ZxZ3giLAovLyAgICAgInR5cGUiOiAibGluZSIsCi8vICAgICAic291cmNlIjogInl1aGFuZ19nc19mcWd4IiwKLy8gICAgICJzb3VyY2UtbGF5ZXIiOiAiZ3NfZnFneCIsCi8vICAgICAibWF4em9vbSI6MjQsCi8vICAgICAibWluem9vbSI6IDE1LAovLyAgICAgImxheW91dCI6IHsgInZpc2liaWxpdHkiOiAidmlzaWJsZSIgfSwKLy8gICAgICJwYWludCI6IHsKLy8gICAgICAgICAibGluZS1jb2xvciI6ICJyZ2JhKDE2OCwgMTY4LCAwLCAxKSIsCi8vICAgICAgICAgImxpbmUtd2lkdGgiOiBbIisiLCBbIi8iLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImNhbGliZXIiXV0sIDUwMF0sIDAuMl0KLy8gICAgIH0KLy8gfSwKewogICJpZCI6ICJ5dWhhbmdnc19nc183NW1teXhnZF9zeW1ib2wiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfNzVtbSIsCiAgInNvdXJjZS1sYXllciI6ICJnc183NW1teXhnZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE1LAogICJsYXlvdXQiOiB7CiAgICAidGV4dC1maWVsZCI6IFsiY29uY2F0IiwgIkROIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwKICAgICJzeW1ib2wtcGxhY2VtZW50IjogImxpbmUiLAogICAgInN5bWJvbC1zcGFjaW5nIjogWydpbnRlcnBvbGF0ZScsIFsnbGluZWFyJ10sIFsnem9vbSddLCAxMCwgNSwgMTUsIDUwLCAxOCwgMTAwXSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGUiOiAwLAogICAgImljb24tcm90YXRlIjogWyIqIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJmbG93ZGlyIl1dLCAxODBdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIiwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJpY29uLXBhZGRpbmciOiAyLAogICAgImljb24tb2Zmc2V0IjogWzAsIC01XSwKICAgICJ0ZXh0LXBhZGRpbmciOiAwLAogICAgImljb24tdGV4dC1maXQiOiAibm9uZSIsCiAgICAvLyAiaWNvbi1pbWFnZSI6ICJHUy1qaWFudG91IiwKICAgICJ0ZXh0LW1heC13aWR0aCI6IDEwLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAic3ltYm9sLXotb3JkZXIiOiAiYXV0byIsCiAgICAidGV4dC1qdXN0aWZ5IjogImNlbnRlciIsCiAgICAidGV4dC13cml0aW5nLW1vZGUiOiBbXSwKICAgICJpY29uLXNpemUiOiAxLjYsCiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgInRleHQtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJpY29uLWNvbG9yIjogInJnYmEoNTksIDU1LCA1NSwgMSkiLAogICAgJ3RleHQtaGFsby1jb2xvcic6ICIjZmZmZmZmIiwKICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ2dzX2dzXzc1XzMwMG1tZ2Rfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzXzc1LTMwMG1tIiwKICAic291cmNlLWxheWVyIjogImdzXzc1XzMwMG1tZ2QiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCiAgICAic3ltYm9sLXBsYWNlbWVudCI6ICJsaW5lIiwKICAgICJzeW1ib2wtc3BhY2luZyI6IFsnaW50ZXJwb2xhdGUnLCBbJ2xpbmVhciddLCBbJ3pvb20nXSwgMTAsIDUsIDE1LCA1MCwgMTgsIDEwMF0sCiAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRlIjogMCwKICAgICJpY29uLXJvdGF0ZSI6IFsiKiIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiZmxvd2RpciJdXSwgMTgwXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIsCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAiaWNvbi1wYWRkaW5nIjogMiwKICAgICJpY29uLW9mZnNldCI6IFswLCAtNV0sCiAgICAidGV4dC1wYWRkaW5nIjogMCwKICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAogICAgLy8gImljb24taW1hZ2UiOiAiR1MtamlhbnRvdSIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogInJnYmEoNTcsIDE1NCwgMjM0LCAxKSIsCiAgICAiaWNvbi1jb2xvciI6ICJyZ2JhKDU5LCA1NSwgNTUsIDEpIiwKICAgICd0ZXh0LWhhbG8tY29sb3InOiAiI2ZmZmZmZiIsCiAgICAndGV4dC1oYWxvLXdpZHRoJzogMQogIH0KfSwgewogICJpZCI6ICJ5dWhhbmdnc19nc18zMDBfNTAwbW1nZF9zeW1ib2wiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfMzAwLTUwMG1tIiwKICAic291cmNlLWxheWVyIjogImdzXzMwMF81MDBtbWdkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTMsCiAgImxheW91dCI6IHsKICAgICJ0ZXh0LWZpZWxkIjogWyJjb25jYXQiLCAiRE4iLCBbImdldCIsICJjYWxpYmVyIl1dLAogICAgInN5bWJvbC1wbGFjZW1lbnQiOiAibGluZSIsCiAgICAic3ltYm9sLXNwYWNpbmciOiBbJ2ludGVycG9sYXRlJywgWydsaW5lYXInXSwgWyd6b29tJ10sIDEwLCA1LCAxNSwgNTAsIDE4LCAxMDBdLAogICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0ZSI6IDAsCiAgICAiaWNvbi1yb3RhdGUiOiBbIioiLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImZsb3dkaXIiXV0sIDE4MF0sCiAgICAidGV4dC1zaXplIjogMTYsCiAgICAidGV4dC1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInRleHQtcGl0Y2gtYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgImljb24tcGFkZGluZyI6IDIsCiAgICAiaWNvbi1vZmZzZXQiOiBbMCwgLTVdLAogICAgInRleHQtcGFkZGluZyI6IDAsCiAgICAiaWNvbi10ZXh0LWZpdCI6ICJub25lIiwKICAgIC8vICJpY29uLWltYWdlIjogIkdTLWppYW50b3UiLAogICAgInRleHQtbWF4LXdpZHRoIjogMTAsCiAgICAiaWNvbi1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJzeW1ib2wtei1vcmRlciI6ICJhdXRvIiwKICAgICJ0ZXh0LWp1c3RpZnkiOiAiY2VudGVyIiwKICAgICJ0ZXh0LXdyaXRpbmctbW9kZSI6IFtdLAogICAgImljb24tc2l6ZSI6IDEuNiwKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAidGV4dC1jb2xvciI6ICJyZ2JhKDU3LCAxNTQsIDIzNCwgMSkiLAogICAgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sIHsKICAiaWQiOiAieXVoYW5nZ3NfZ3NfNTAwXzgwMG1tZ2Rfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzXzUwMC04MDBtbSIsCiAgInNvdXJjZS1sYXllciI6ICJnc181MDBfODAwbW1nZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDEyLAogICJsYXlvdXQiOiB7CiAgICAidGV4dC1maWVsZCI6IFsiY29uY2F0IiwgIkROIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwKICAgICJzeW1ib2wtcGxhY2VtZW50IjogImxpbmUiLAogICAgInN5bWJvbC1zcGFjaW5nIjogWydpbnRlcnBvbGF0ZScsIFsnbGluZWFyJ10sIFsnem9vbSddLCAxMCwgNSwgMTUsIDUwLCAxOCwgMTAwXSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGUiOiAwLAogICAgImljb24tcm90YXRlIjogWyIqIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJmbG93ZGlyIl1dLCAxODBdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIiwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJpY29uLXBhZGRpbmciOiAyLAogICAgImljb24tb2Zmc2V0IjogWzAsIC01XSwKICAgICJ0ZXh0LXBhZGRpbmciOiAwLAogICAgImljb24tdGV4dC1maXQiOiAibm9uZSIsCiAgICAvLyAiaWNvbi1pbWFnZSI6ICJHUy1qaWFudG91IiwKICAgICJ0ZXh0LW1heC13aWR0aCI6IDEwLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAic3ltYm9sLXotb3JkZXIiOiAiYXV0byIsCiAgICAidGV4dC1qdXN0aWZ5IjogImNlbnRlciIsCiAgICAidGV4dC13cml0aW5nLW1vZGUiOiBbXSwKICAgICJpY29uLXNpemUiOiAxLjYsCiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgInRleHQtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJpY29uLWNvbG9yIjogInJnYmEoNTksIDU1LCA1NSwgMSkiLAogICAgJ3RleHQtaGFsby1jb2xvcic6ICIjZmZmZmZmIiwKICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxCiAgfQp9LCB7CiAgImlkIjogInl1aGFuZ2dzX2dzXzgwMG1teXNnZF9zeW1ib2wiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfODAwbW0iLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfODAwbW15c2dkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ0ZXh0LWZpZWxkIjogWyJjb25jYXQiLCAiRE4iLCBbImdldCIsICJjYWxpYmVyIl1dLAogICAgInN5bWJvbC1wbGFjZW1lbnQiOiAibGluZSIsCiAgICAic3ltYm9sLXNwYWNpbmciOiBbJ2ludGVycG9sYXRlJywgWydsaW5lYXInXSwgWyd6b29tJ10sIDEwLCA1LCAxNSwgNTAsIDE4LCAxMDBdLAogICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0ZSI6IDAsCiAgICAiaWNvbi1yb3RhdGUiOiBbIioiLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImZsb3dkaXIiXV0sIDE4MF0sCiAgICAidGV4dC1zaXplIjogMTYsCiAgICAidGV4dC1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInRleHQtcGl0Y2gtYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgImljb24tcGFkZGluZyI6IDIsCiAgICAiaWNvbi1vZmZzZXQiOiBbMCwgLTVdLAogICAgInRleHQtcGFkZGluZyI6IDAsCiAgICAiaWNvbi10ZXh0LWZpdCI6ICJub25lIiwKICAgIC8vICJpY29uLWltYWdlIjogIkdTLWppYW50b3UiLAogICAgInRleHQtbWF4LXdpZHRoIjogMTAsCiAgICAiaWNvbi1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJzeW1ib2wtei1vcmRlciI6ICJhdXRvIiwKICAgICJ0ZXh0LWp1c3RpZnkiOiAiY2VudGVyIiwKICAgICJ0ZXh0LXdyaXRpbmctbW9kZSI6IFtdLAogICAgImljb24tc2l6ZSI6IDEuNiwKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAidGV4dC1jb2xvciI6ICJyZ2JhKDU3LCAxNTQsIDIzNCwgMSkiLAogICAgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsCiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sCi8vIHsKLy8gICAgICJpZCI6ICJ5dWhhbmdnc19nc19nc3F0Z2pnZF9zeW1ib2wiLAovLyAgICAgInR5cGUiOiAic3ltYm9sIiwKLy8gICAgICJzb3VyY2UiOiAieXVoYW5nX2dzX2dzcXRnamdkIiwKLy8gICAgICJzb3VyY2UtbGF5ZXIiOiAiZ3NfZ3NxdGdqZ2QiLAovLyAgICAgIm1heHpvb20iOjI0LAovLyAgICAgIm1pbnpvb20iOiAxNiwKLy8gICAgICJsYXlvdXQiOiB7Ci8vICAgICAgICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCi8vICAgICAgICAgInN5bWJvbC1wbGFjZW1lbnQiOiAibGluZSIsCi8vICAgICAgICAgInN5bWJvbC1zcGFjaW5nIjogWwovLyAgICAgICAgICAgICAnaW50ZXJwb2xhdGUnLAovLyAgICAgICAgICAgICBbJ2xpbmVhciddLAovLyAgICAgICAgICAgICBbJ3pvb20nXSwKLy8gICAgICAgICAgICAgMTAsCi8vICAgICAgICAgICAgIDUsCi8vICAgICAgICAgICAgIDE1LAovLyAgICAgICAgICAgICA1MCwKLy8gICAgICAgICAgICAgMTgsCi8vICAgICAgICAgICAgIDEwMAovLyAgICAgICAgIF0sCi8vICAgICAgICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCi8vICAgICAgICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCi8vICAgICAgICAgInRleHQtcm90YXRlIjogMCwKLy8gICAgICAgICAiaWNvbi1yb3RhdGUiOiBbIioiLCBbInRvLW51bWJlciIsIFsiZ2V0IiwgImZsb3dkaXIiXV0sIDE4MF0sCi8vICAgICAgICAgInRleHQtc2l6ZSI6IDE2LAovLyAgICAgICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAovLyAgICAgICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAovLyAgICAgICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAovLyAgICAgICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAovLyAgICAgICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiLAovLyAgICAgICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKLy8gICAgICAgICAiaWNvbi1wYWRkaW5nIjogMiwKLy8gICAgICAgICAiaWNvbi1vZmZzZXQiOiBbMCwgLTVdLAovLyAgICAgICAgICJ0ZXh0LXBhZGRpbmciOiAwLAovLyAgICAgICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAovLyAgICAgICAgIC8vICJpY29uLWltYWdlIjogIkdTLWppYW50b3UiLAovLyAgICAgICAgICJ0ZXh0LW1heC13aWR0aCI6IDEwLAovLyAgICAgICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAovLyAgICAgICAgICJzeW1ib2wtei1vcmRlciI6ICJhdXRvIiwKLy8gICAgICAgICAidGV4dC1qdXN0aWZ5IjogImNlbnRlciIsCi8vICAgICAgICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCi8vICAgICAgICAgImljb24tc2l6ZSI6IDEuNiwKLy8gICAgICAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgovLyAgICAgfSwKLy8gICAgICJwYWludCI6IHsgInRleHQtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwgImljb24tY29sb3IiOiAicmdiYSg1OSwgNTUsIDU1LCAxKSIsJ3RleHQtaGFsby1jb2xvcic6IiNmZmZmZmYiLCd0ZXh0LWhhbG8td2lkdGgnOjEgfQovLyB9LAp7CiAgImlkIjogInl1aGFuZ2dzX2dzX3lzZ3hfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX3lzZ3giLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfeXNneCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDEwLAogICJsYXlvdXQiOiB7CiAgICAidGV4dC1maWVsZCI6IFsiY29uY2F0IiwgIkROIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwKICAgICJzeW1ib2wtcGxhY2VtZW50IjogImxpbmUiLAogICAgInN5bWJvbC1zcGFjaW5nIjogWydpbnRlcnBvbGF0ZScsIFsnbGluZWFyJ10sIFsnem9vbSddLCAxMCwgNSwgMTUsIDUwLCAxOCwgMTAwXSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24tcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGUiOiAwLAogICAgImljb24tcm90YXRlIjogWyIqIiwgWyJ0by1udW1iZXIiLCBbImdldCIsICJmbG93ZGlyIl1dLCAxODBdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIiwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJpY29uLXBhZGRpbmciOiAyLAogICAgImljb24tb2Zmc2V0IjogWzAsIC01XSwKICAgICJ0ZXh0LXBhZGRpbmciOiAwLAogICAgImljb24tdGV4dC1maXQiOiAibm9uZSIsCiAgICAvLyAiaWNvbi1pbWFnZSI6ICJHUy1qaWFudG91IiwKICAgICJ0ZXh0LW1heC13aWR0aCI6IDEyLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAic3ltYm9sLXotb3JkZXIiOiAiYXV0byIsCiAgICAidGV4dC1qdXN0aWZ5IjogImNlbnRlciIsCiAgICAidGV4dC13cml0aW5nLW1vZGUiOiBbXSwKICAgICJpY29uLXNpemUiOiAxLjYsCiAgICAidmlzaWJpbGl0eSI6ICJ2aXNpYmxlIgogIH0sCiAgInBhaW50IjogewogICAgInRleHQtY29sb3IiOiAicmdiYSg1NywgMTU0LCAyMzQsIDEpIiwKICAgICJpY29uLWNvbG9yIjogInJnYmEoNTksIDU1LCA1NSwgMSkiLAogICAgJ3RleHQtaGFsby1jb2xvcic6ICIjZmZmZmZmIiwKICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxCiAgfQp9XTsKY29uc3QgbGF5ZXJfeXVoYW5nX3lzID0gW3sKICAiaWQiOiAieXVoYW5neXNfeXNfeXNnIiwKICAidHlwZSI6ICJsaW5lIiwKICAic291cmNlIjogInl1aGFuZ195c195c2ciLAogICJzb3VyY2UtbGF5ZXIiOiAieXNfeXNnIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJ2aXNpYmlsaXR5IjogInZpc2libGUiCiAgfSwKICAicGFpbnQiOiB7CiAgICAibGluZS1jb2xvciI6ICJyZ2JhKDM5LCA1NCwgMTU1LCAxKSIsCiAgICAibGluZS13aWR0aCI6IFsiKyIsIFsiLyIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiY2FsaWJlciJdXSwgNTAwXSwgMC4yXQogIH0KfSwgewogICJpZCI6ICJ5dWhhbmd5c195c195c2dfc3ltYm9sIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3lzX3lzZyIsCiAgInNvdXJjZS1sYXllciI6ICJ5c195c2ciLAogICJmaWx0ZXIiOiBbJ2FueScsIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcwJ10sIFsnPT0nLCBbJ2dldCcsICdmbG93ZGlyJ10sICcxJ11dLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxMCwKICAibGF5b3V0IjogewogICAgInRleHQtZmllbGQiOiBbImNvbmNhdCIsICJETiIsIFsiZ2V0IiwgImNhbGliZXIiXV0sCiAgICAic3ltYm9sLXBsYWNlbWVudCI6ICJsaW5lIiwKICAgICJzeW1ib2wtc3BhY2luZyI6IFsnaW50ZXJwb2xhdGUnLCBbJ2xpbmVhciddLCBbJ3pvb20nXSwgMTAsIDUsIDE1LCA1MCwgMTgsIDEwMF0sCiAgICAiaWNvbi1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRlIjogMCwKICAgICJpY29uLXJvdGF0ZSI6IFsiKiIsIFsidG8tbnVtYmVyIiwgWyJnZXQiLCAiZmxvd2RpciJdXSwgMTgwXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIsCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAiaWNvbi1wYWRkaW5nIjogMiwKICAgICJpY29uLW9mZnNldCI6IFswLCAtNV0sCiAgICAidGV4dC1wYWRkaW5nIjogMCwKICAgICJpY29uLXRleHQtZml0IjogIm5vbmUiLAogICAgImljb24taW1hZ2UiOiAiWVMtamlhbnRvdSIsCiAgICAidGV4dC1tYXgtd2lkdGgiOiAxMCwKICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInN5bWJvbC16LW9yZGVyIjogImF1dG8iLAogICAgInRleHQtanVzdGlmeSI6ICJjZW50ZXIiLAogICAgInRleHQtd3JpdGluZy1tb2RlIjogW10sCiAgICAiaWNvbi1zaXplIjogMS42LAogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIKICB9LAogICJwYWludCI6IHsKICAgICJ0ZXh0LWNvbG9yIjogInJnYmEoMzksIDU0LCAxNTUsIDEpIiwKICAgICJpY29uLWNvbG9yIjogInJnYmEoNTksIDU1LCA1NSwgMSkiLAogICAgJ3RleHQtaGFsby1jb2xvcic6ICIjZmZmZmZmIiwKICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxCiAgfQp9XTsKY29uc3QgbGF5ZXJfeXVoYW5nX3lzX2ljb24gPSBbewogIC8v6Zuo5rC05Y+jCiAgImlkIjogInl1aGFuZ3dzX3lzX3lzayIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ195c195c2siLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAic291cmNlLWxheWVyIjogInlzX3lzayIsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInl1c2h1aS15dXNodWlrb3UiLAogICAgImljb24tc2l6ZSI6IDEKICB9Cn0sIHsKICAvL+mbqOawtOS6lQogICJpZCI6ICJ5dWhhbmd5c195c195c2pjaiIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAibWluem9vbSI6IDE1LAogICJtYXh6b29tIjogMjQsCiAgInNvdXJjZSI6ICJ5dWhhbmdfeXNfeXNqIiwKICAic291cmNlLWxheWVyIjogInlzX3lzaiIsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInl1c2h1aS15dXNodWlqaW5nIiwKICAgICJpY29uLXNpemUiOiAxCiAgfQogIC8vICdwYWludCc6ewogIC8vICAgICAnY2lyY2xlLWNvbG9yJzoicmVkIiwKICAvLyAgICAgJ2NpcmNsZS1yYWRpdXMnOjMKICAvLyB9Cn0sIHsKICAvL+iKgueCuQogICJpZCI6ICJ5dWhhbmd5c195c195c2pkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ195c195c2dkIiwKICAic291cmNlLWxheWVyIjogInlzX3lzZ2QiLAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICLpm6jmsLQiLAogICAgImljb24tc2l6ZSI6IDEKICB9Cn0sIHsKICAvL+mbqOawtOaOkuaUvuWPowogICJpZCI6ICJ5dWhhbmd5c195c195c3BmayIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgInNvdXJjZSI6ICJ5dWhhbmdfeXNfeXNwZmsiLAogICJzb3VyY2UtbGF5ZXIiOiAieXNfeXNwZmsiLAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJ5dXNodWktcGFpZmFuZ2tvdSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwKLy8geyAgIAovLyAgICAgLy/nm5HmtYvngrkKLy8gICAgICJpZCI6ICJ5dWhhbmd5c195c195c2pjZCIsCi8vICAgICAidHlwZSI6ICJzeW1ib2wiLAovLyAgICAgInNvdXJjZSI6ICJ5dWhhbmdfeXNfeXNqY2QiLAovLyAgICAgIm1heHpvb20iOjI0LAovLyAgICAgIm1pbnpvb20iOiAxNSwKLy8gICAgICJzb3VyY2UtbGF5ZXIiOiAieXNfeXNqY2QiLAovLyAgICAgImxheW91dCI6ewovLyAgICAgICAgICJpY29uLWltYWdlIjoieXVzaHVpLWppYW5jZWRpYW4iLAovLyAgICAgICAgICJpY29uLXNpemUiOjEKLy8gICAgIH0KLy8gfSwKewogIC8v6Zuo5rC05rO156uZCiAgImlkIjogInl1aGFuZ3lzX3lzX3lzYnoiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfeXNfeXNieiIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDExLAogICJzb3VyY2UtbGF5ZXIiOiAieXNfeXNieiIsCiAgJ2ZpbHRlcic6IFsnYW55JywgWydhbGwnLCBbJz09JywgWydnZXQnLCAnZGlzcGxheV9sZXZlbCddLCAxXSwgWyc+PScsIFsnem9vbSddLCAxMV1dLCBbJ2FsbCcsIFsnPT0nLCBbJ2dldCcsICdkaXNwbGF5X2xldmVsJ10sIDJdLCBbJz49JywgWyd6b29tJ10sIDEyXV0sIFsnYWxsJywgWyc9PScsIFsnZ2V0JywgJ2Rpc3BsYXlfbGV2ZWwnXSwgM10sIFsnPj0nLCBbJ3pvb20nXSwgMTNdXV0sCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInl1c2h1aS1iZW5nemhhbiIsCiAgICAiaWNvbi1zaXplIjogMSwKICAgICJ0ZXh0LWZpZWxkIjogWyJnZXQiLCAibmFtZSJdLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgInRleHQtc2l6ZSI6IDEwLAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIgogIH0KfV07CmNvbnN0IGxheWVyX3l1aGFuZ193c19pY29uID0gW3sKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NjIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3dzYyIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2MiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxMSwKICAibGF5b3V0IjogewogICAgInZpc2liaWxpdHkiOiAidmlzaWJsZSIsCiAgICAiaWNvbi1pbWFnZSI6ICJ3dXNodWktc2h1aWNoYW5nIiwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAiaWNvbi1zaXplIjogMSwKICAgICJ0ZXh0LWZpZWxkIjogWyJnZXQiLCAibmFtZSJdLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgInRleHQtc2l6ZSI6IDE2LAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIgogIH0KfSwgewogIC8v6Ze46ZeoCiAgImlkIjogInl1aGFuZ3dzX3dzX3dzem0iLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfd3Nfd3N6bSIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c3ptIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTQsCiAgImxheW91dCI6IHsKICAgICJpY29uLXJvdGF0ZSI6IDM2MCwKICAgICJpY29uLWltYWdlIjogInd1c2h1aS16aGFtZW4iCiAgfQp9LCB7CiAgLy/msaHmsLTlj6MKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NrIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3dzayIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2siLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAid3VzaHVpLXd1c2h1aWtvdSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v566h54K5CiAgImlkIjogInl1aGFuZ3dzX3dzX3dzZ2QiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfd3Nfd3NnZCIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2dkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInd1c2h1aSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v5o6S5pS+5Y+jCiAgImlkIjogInl1aGFuZ3dzX3dzX3dzcGZrIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3dzcGZrIiwKICAic291cmNlLWxheWVyIjogIndzX3dzcGZrIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogInd1c2h1aS1wYWlmYW5na291IiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9LCB7CiAgLy/ms7Xnq5kKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NieiIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ193c193c2J6IiwKICAic291cmNlLWxheWVyIjogIndzX3dzYnpfd2l0aF9pb3QiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAnZmlsdGVyJzogWydhbnknLCBbJ2FsbCcsIFsnPT0nLCBbJ2dldCcsICdkaXNwbGF5X2xldmVsJ10sIDFdLCBbJz49JywgWyd6b29tJ10sIDExXV0sIFsnYWxsJywgWyc9PScsIFsnZ2V0JywgJ2Rpc3BsYXlfbGV2ZWwnXSwgMl0sIFsnPj0nLCBbJ3pvb20nXSwgMTJdXSwgWydhbGwnLCBbJz09JywgWydnZXQnLCAnZGlzcGxheV9sZXZlbCddLCAzXSwgWyc+PScsIFsnem9vbSddLCAxM11dXSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAid3VzaHVpLWJlbmd6aGFuIiwKICAgICJpY29uLXNpemUiOiAxLAogICAgInRleHQtZmllbGQiOiBbImdldCIsICJuYW1lIl0sCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAidGV4dC1zaXplIjogMTAsCiAgICAidGV4dC1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInRleHQtcGl0Y2gtYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiCiAgfQp9LCB7CiAgLy/pmIDpl6gKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NmbSIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ193c193c2ZtIiwKICAic291cmNlLWxheWVyIjogIndzX3dzZm0iLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAid3VzaHVpLWZhbWVuIiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9LCB7CiAgLy/msaHmsLTkupUKICAiaWQiOiAieXVoYW5nd3Nfd3Nfd3NqIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX3dzX3dzaiIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2oiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAid3VzaHVpLXd1c2h1aWppbmciLAogICAgImljb24tc2l6ZSI6IDEKICB9Cn0sIHsKICAvL+ebkea1i+eCuQogICJpZCI6ICJ5dWhhbmd3c193c193c2pjZCIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ193c193c2pjZCIsCiAgInNvdXJjZS1sYXllciI6ICJ3c193c2pjZCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE1LAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJ3dXNodWktamlhbmNlZGlhbiIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfV07CmNvbnN0IGxheWVyX3l1aGFuZ19nc19pY29uID0gW3sKICAvL+S+m+awtOazteermQogICJpZCI6ICJ5dWhhbmdnc19nc19nc2J6IiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX2dzYnoiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfanlkIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgJ2ZpbHRlcic6IFsnYW55JywgWydhbGwnLCBbJz09JywgWydnZXQnLCAnZGlzcGxheV9sZXZlbCddLCAxXSwgWyc+PScsIFsnem9vbSddLCAxMV1dLCBbJ2FsbCcsIFsnPT0nLCBbJ2dldCcsICdkaXNwbGF5X2xldmVsJ10sIDJdLCBbJz49JywgWyd6b29tJ10sIDEyXV0sIFsnYWxsJywgWyc9PScsIFsnZ2V0JywgJ2Rpc3BsYXlfbGV2ZWwnXSwgM10sIFsnPj0nLCBbJ3pvb20nXSwgMTNdXV0sCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogImdvbmdzaHVpLWJlbmd6aGFuIiwKICAgICJpY29uLXNpemUiOiAxLAogICAgInRleHQtZmllbGQiOiBbImdldCIsICJuYW1lIl0sCiAgICAidGV4dC1vZmZzZXQiOiBbMCwgMV0sCiAgICAidGV4dC1zaXplIjogMTAsCiAgICAidGV4dC1hbGxvdy1vdmVybGFwIjogdHJ1ZSwKICAgICJ0ZXh0LWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgInRleHQtcGl0Y2gtYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiCiAgfQp9LCB7CiAgLy/kvpvmsLTpmIDpl6gKICAiaWQiOiAieXVoYW5nZ3NfZ3NfZm0iLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfZm0iLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfZm0iLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNywKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiBbJ2Nhc2UnLCBbJz09JywgWydnZXQnLCAnZGlzcGxheSddLCAn5YeP5Y6L6ZiAJ10sICdnb25nc2h1aS1qaWFueWFmYScsICd5aWJhbmZhbWVuJ10sCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v6Ieq5p2l5rC05Y6CCiAgImlkIjogInl1aGFuZ2dzX2dzX2dzYyIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ19nc19nc2MiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfZ3NjIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTAsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogImdvbmdzaHVpLXNodWljaGFuZyIsCiAgICAiaWNvbi1zaXplIjogMSwKICAgICJpY29uLWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1maWVsZCI6IFsiZ2V0IiwgIm5hbWUiXSwKICAgICJ0ZXh0LW9mZnNldCI6IFswLCAxXSwKICAgICJ0ZXh0LXNpemUiOiAxNiwKICAgICJ0ZXh0LWFsbG93LW92ZXJsYXAiOiB0cnVlLAogICAgInRleHQtaWdub3JlLXBsYWNlbWVudCI6IHRydWUsCiAgICAidGV4dC1waXRjaC1hbGlnbm1lbnQiOiAibWFwIiwKICAgICJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtYW5jaG9yIjogImNlbnRlciIKICB9LAogIHBhaW50OiB7CiAgICAndGV4dC1oYWxvLWNvbG9yJzogIiNmZmZmZmYiLAogICAgJ3RleHQtaGFsby13aWR0aCc6IDEKICB9Cn0sIHsKICAvL+awtOihqOeusQogICJpZCI6ICJ5dWhhbmdnc19nc19zYngiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3Nfc2J4IiwKICAic291cmNlLWxheWVyIjogImdzX3NieCIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE4LAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJzaHVpYmlhb3hpYW5na3VhbmciLAogICAgImljb24tc2l6ZSI6IDEsCiAgICAidGV4dC1maWVsZCI6IFsnY2FzZScsIFsndG8tYm9vbGVhbicsIFsiZ2V0IiwgIm1ldGVyY250Il1dLCAnMCcsIFsiZ2V0IiwgIm1ldGVyY250Il1dLAogICAgInRleHQtc2l6ZSI6IDEyLAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LWFuY2hvciI6ICJjZW50ZXIiCiAgfSwKICBwYWludDogewogICAgInRleHQtY29sb3IiOiAnIzM5OWFlYScKICB9Cn0sIHsKICAvL+ebkea1i+eCuQogICJpZCI6ICJ5dWhhbmdnc19nc19qY2QiLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfZ3NqY2QiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfbW9uaXRvciIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE0LAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJnb25nc2h1aS1qaWFuY2VkaWFuIiwKICAgICJpY29uLXNpemUiOiAxLAogICAgInRleHQtb2Zmc2V0IjogWzAsIDFdLAogICAgInRleHQtc2l6ZSI6IDEwLAogICAgInRleHQtYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAidGV4dC1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6ICJtYXAiLAogICAgInRleHQtcm90YXRpb24tYWxpZ25tZW50IjogIm1hcCIsCiAgICAidGV4dC1hbmNob3IiOiAiY2VudGVyIgogIH0KfSwgewogIC8v6IqC54K5CiAgImlkIjogInl1aGFuZ2dzX2dzX2pkIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX2xqZCIsCiAgInNvdXJjZS1sYXllciI6ICJnc19samQiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxOCwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAi5L6b5rC0IiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9LCB7CiAgLy/mtojngavmoJMKICAiaWQiOiAieXVoYW5nZ3NfZ3NfeGhzIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX3hmcyIsCiAgInNvdXJjZS1sYXllciI6ICJnc194ZnMiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNiwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAieGlhb2h1b3NodWFuIiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9LCB7CiAgLy/mjpLmsJTpmIAKICAiaWQiOiAieXVoYW5nZ3NfZ3NfcHFmIiwKICAidHlwZSI6ICJzeW1ib2wiLAogICJzb3VyY2UiOiAieXVoYW5nX2dzX3BxZiIsCiAgInNvdXJjZS1sYXllciI6ICJnc19wcWYiLAogICJtYXh6b29tIjogMjQsCiAgIm1pbnpvb20iOiAxNSwKICAibGF5b3V0IjogewogICAgImljb24taW1hZ2UiOiAiZ29uZ3NodWktcGFpcWlmYSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v5o6S5rGh6ZiACiAgImlkIjogInl1aGFuZ2dzX2dzX3B3ZiIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ19nc19wd2YiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfcHdmIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogImdvbmdzaHVpLXBhaXd1ZmEiLAogICAgImljb24tc2l6ZSI6IDEKICB9Cn0sIHsKICAvL+aOkuaxoeWPowogICJpZCI6ICJ5dWhhbmdnc19nc19wd2siLAogICJ0eXBlIjogInN5bWJvbCIsCiAgInNvdXJjZSI6ICJ5dWhhbmdfZ3NfcHdrIiwKICAic291cmNlLWxheWVyIjogImdzX3B3ayIsCiAgIm1heHpvb20iOiAyNCwKICAibWluem9vbSI6IDE1LAogICJsYXlvdXQiOiB7CiAgICAiaWNvbi1pbWFnZSI6ICJnb25nc2h1aS1wYWl3dWtvdSIsCiAgICAiaWNvbi1zaXplIjogMQogIH0KfSwgewogIC8v6aKE55WZ5Y+jCiAgImlkIjogInl1aGFuZ2dzX2dzX3lsayIsCiAgInR5cGUiOiAic3ltYm9sIiwKICAic291cmNlIjogInl1aGFuZ19nc195bGsiLAogICJzb3VyY2UtbGF5ZXIiOiAiZ3NfeWxrIiwKICAibWF4em9vbSI6IDI0LAogICJtaW56b29tIjogMTUsCiAgImxheW91dCI6IHsKICAgICJpY29uLWltYWdlIjogImdvbmdzaHVpLXl1bGl1a291IiwKICAgICJpY29uLXNpemUiOiAxCiAgfQp9XTsKY29uc3QgTGF5ZXJUeXBlID0gewogICfkvpvmsLQnOiBbbGF5ZXJfeXVoYW5nX2dzLCBsYXllcl95dWhhbmdfZ3NfaWNvbl0sCiAgJ+mbqOawtCc6IFtsYXllcl95dWhhbmdfeXMsIGxheWVyX3l1aGFuZ195c19pY29uXSwKICAn5rGh5rC0JzogW2xheWVyX3l1aGFuZ193cywgbGF5ZXJfeXVoYW5nX3dzX2ljb25dCn07CmNvbnN0IG1hcE9iaiA9IHsKICBtYXA6IG51bGwsCiAgbWFwSW5zdGFuY2U6IG51bGwKfTsKY29uc3QgcmVjb3JkRmVhdHVyZXMgPSBbXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJtaXhpbnMiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWRGaWxlZFBpcGVJZExpc3Q6IFtdLAogICAgICAvLyDkuIrkvKDlpLHotKXnmoTlt7Llt6Hmo4DnrqHnur9pZAogICAgICBjdXJyZW50UG9pbnQ6IG51bGwsCiAgICAgIEdTTDogWyJjYXNlIiwgWyJhbnkiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAiRk0iXSwgWyI9PSIsIFsiZ2V0IiwgIlNCTEIiXSwgIlBRRiJdLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAiUE5GIl1dLCAieWJmbSIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJKWUQiXSwgImdzLWJ6IiwgWyI9PSIsIFsiZ2V0IiwgIlNCTEIiXSwgIlBXSyJdLCAieWJmbSIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJYSFMiXSwgInhocyIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJEQiJdLCAiemR5aCIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJKU0QiXSwgInNieCIsCiAgICAgIC8vIFsnPT0nLFsnZ2V0JywgIlNCTEIiXSwgJ+iHquadpeawtOWOgiddLCfkvpvmsLQt5rC05Y6CJywKICAgICAgImdzIl0sCiAgICAgIFlTTDogWyJjYXNlIiwgWyI9PSIsIFsiZ2V0IiwgIlNCTEIiXSwgIuazteermSJdLCAieXMtYnoiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5o6S5pS+5Y+jIl0sICJ5cy1wZmsiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi6Zuo5rC05Y+jIl0sICJ5cy15c2siLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi6Zuo5rC05LqVIl0sICJ5cy15c2oiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi55uR5rWL54K5Il0sICJ5cy1qY2QiLCAieXMiXSwKICAgICAgV1NMOiBbImNhc2UiLCBbImFueSIsIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJGTSJdLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5rGh5rC06ZiA6ZeoIl0sIFsiPT0iLCBbImdldCIsICJTQkxCIl0sICJQ5rGh5rC06Ze46ZeoTkYiXV0sICJ5YmZtIiwgWyI9PSIsIFsiZ2V0IiwgIlNCTEIiXSwgIuazteermSJdLCAid3MtYnoiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5o6S5pS+5Y+jIl0sICJ3cy1wZmsiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5rGh5rC05Y+jIl0sICJ3cy13c2siLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi5rGh5rC05LqVIl0sICJ3cy13c2oiLCBbIj09IiwgWyJnZXQiLCAiU0JMQiJdLCAi55uR5rWL54K5Il0sICJ3cy1qY2QiLAogICAgICAvLyBbJz09JyxbJ2dldCcsICJTQkxCIl0sICfmsaHmsLTljoInXSwgInd1c2h1aS1zaHVpY2hhbmciLAogICAgICAid3MiXSwKICAgICAgYmFzZU1hcHVybDogW2dpc0RvbWFpbiArICIvaXNlcnZlci9zZXJ2aWNlcy9tYXAtbXZ0LVl1SGFuZ1NodWlXdURpVHVRaWVQaWFuL3Jlc3Rqc3IvdjEvdmVjdG9ydGlsZS9tYXBzL+S9meadreawtOWKoeW6leWbvuWIh+eJhy9zdHlsZS5qc29uIiwgZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL21hcC1tdnQtSmlhblpodUhlTHZEaS9yZXN0anNyL3YxL3ZlY3RvcnRpbGUvbWFwcy/lu7rnrZHlkoznu7/lnLAvc3R5bGUuanNvbiIsIGdpc0RvbWFpbiArICIvaXNlcnZlci9zZXJ2aWNlcy9tYXAtbXZ0LVl1SGFuZ1F1SGFuZ1poZW5nUXVIdWFTaGlMaWFuZ1dhUGlhbi9yZXN0anNyL3YxL3ZlY3RvcnRpbGUvbWFwcy/kvZnmna3ljLrooYzmlL/ljLrliJLnn6Lph4/nk6bniYcvc3R5bGUuanNvbiIsIGdpc0RvbWFpbiArICIvaXNlcnZlci9zZXJ2aWNlcy9tYXAtbXZ0LVl1SGFuZ1NodWlXdUx1V2FuZ1NodWlYaURpVHVRaWVQaWFuL3Jlc3Rqc3IvdjEvdmVjdG9ydGlsZS9tYXBzL+S9meadreawtOWKoei3r+e9keawtOezu+W6leWbvuWIh+eJhy9zdHlsZS5qc29uIl0sCiAgICAgIGJ6TGF5ZXJVcmxzOiBbZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL21hcC1tdnQtR29uZ1NodWlHdWFuWGlhbkJpYW9aaHUvcmVzdGpzci92MS92ZWN0b3J0aWxlL21hcHMv5L6b5rC0566h57q/5qCH5rOoL3N0eWxlLmpzb24iLCBnaXNEb21haW4gKyAiL2lzZXJ2ZXIvc2VydmljZXMvbWFwLW12dC1ZdVNodWlHdWFuWGlhbkJpYW9aaHUyL3Jlc3Rqc3IvdjEvdmVjdG9ydGlsZS9tYXBzL+mbqOawtOeuoee6v+agh+azqC9zdHlsZS5qc29uIiwgZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL21hcC1tdnQtV3VTaHVpR3VhblhpYW5CaWFvWmh1Mi9yZXN0anNyL3YxL3ZlY3RvcnRpbGUvbWFwcy/msaHmsLTnrqHnur/moIfms6gvc3R5bGUuanNvbiJdLAogICAgICB0aW1lcjogW10sCiAgICAgIC8v5L6b5rC055+i6YeP55Om54mH5pyN5YqhCiAgICAgIGdzVXJsOiBnaXNEb21haW4gKyAiL2lzZXJ2ZXIvc2VydmljZXMvbWFwLW12dC1Hb25nU2h1aS9yZXN0anNyL3YxL3ZlY3RvcnRpbGUvbWFwcy/kvpvmsLQvc3R5bGUuanNvbiIsCiAgICAgIC8v6Zuo5rC055+i6YeP55Om54mH5pyN5YqhCiAgICAgIHlzVXJsOiBnaXNEb21haW4gKyAiL2lzZXJ2ZXIvc2VydmljZXMvbWFwLW12dC1ZdVNodWkvcmVzdGpzci92MS92ZWN0b3J0aWxlL21hcHMv6Zuo5rC0L3N0eWxlLmpzb24iLAogICAgICAvL+axoeawtOefoumHj+eTpueJh+acjeWKoQogICAgICB3c1VybDogZ2lzRG9tYWluICsgIi9pc2VydmVyL3NlcnZpY2VzL21hcC1tdnQtV3VTaHVpL3Jlc3Rqc3IvdjEvdmVjdG9ydGlsZS9tYXBzL+axoeawtC9zdHlsZS5qc29uIiwKICAgICAgc3dMYXllcjogewogICAgICAgICfkvpvmsLQnOiBbXSwKICAgICAgICAn6Zuo5rC0JzogW10sCiAgICAgICAgJ+axoeawtCc6IFtdCiAgICAgIH0sCiAgICAgIHZtOiBudWxsLAogICAgICBkZXZpY2VMYXllcnM6IFtdLAogICAgICBmYWN0b3J5TmFtZU1hcmtlcnM6IFtdLAogICAgICAvL+mAieS4reiuvuaWvQogICAgICBjaG9vc2VEZXZpY2U6IFtdLAogICAgICBkaXlQb2ludDoge30sCiAgICAgIC8v5Y2P5Yqe5Lq6CiAgICAgIG1hcmtlcjogbnVsbCwKICAgICAgaXNPbkxvYWQ6IGZhbHNlLAogICAgICBldmVudDogIiIsCiAgICAgIGRhdGFiYXNlTmFtZXM6IFsn5L6b5rC0OuS+m+awtOeuoemBkycsICfkvpvmsLQ6VDc1bW3ku6XkuIvnrqHpgZMnLCAn5L6b5rC0OlQ4MDBtbeS7peS4iueuoemBkycsICfkvpvmsLQ6VDc1XzMwMG1t566h6YGTJywgJ+S+m+awtDpUMzAwXzUwMG1t566h6YGTJywgJ+S+m+awtDpUNTAwXzgwMG1t566h6YGTJywgJ+S+m+awtDrmjpLmsJTpmIAnLCAn5L6b5rC0OuaOkuaxoemYgCcsICfkvpvmsLQ66ZiA6ZeoJywgJ+e9kee7nOWIhuaekDrpm6jmsLTnrqEnLCAn572R57uc5YiG5p6QOumbqOawtOS6lScsICfnvZHnu5zliIbmnpA66Zuo5rC05rO156uZJywgJ+e9kee7nOWIhuaekDrpm6jmsLTlj6MnLCAn572R57uc5YiG5p6QOumbqOawtOaOkuaUvuWPoycsICfnvZHnu5zliIbmnpA66Zuo5rC0566h54K5JywgJ+e9kee7nOWIhuaekDrmsaHmsLTnrqEnLCAn572R57uc5YiG5p6QOuaxoeawtOS6lScsICfnvZHnu5zliIbmnpA65rGh5rC05rO156uZJywgJ+e9kee7nOWIhuaekDrmsaHmsLTlj6MnLCAn572R57uc5YiG5p6QOuaxoeawtOaOkuaUvuWPoycsICfnvZHnu5zliIbmnpA65rGh5rC06ZiA6ZeoJywgJ+e9kee7nOWIhuaekDrmsaHmsLTnrqHngrknLCAn572R57uc5YiG5p6QOuaxoeawtOebkea1i+eCuScsICfkvpvmsLQ65LiJ6YCaJywgJ+S+m+awtDrmtojpmLLmoJMnLCAn5L6b5rC0Oui/nuaOpeeCuScsICfkvpvmsLQ65Yqg5Y6L54K5JywgJ+S+m+awtDrlm5vpgJonLCAn5L6b5rC0OumihOeVmeWPoycsICfkvpvmsLQ65rC06KGo566xJywgJ+S+m+awtDrmjpLmsaHlj6MnLCAn5L6b5rC0OuWkp+ihqCddLAogICAgICBnc0RhdGFiYXNlTmFtZXM6IFsn5L6b5rC0OuS+m+awtOeuoemBkycsICfkvpvmsLQ6VDc1bW3ku6XkuIvnrqHpgZMnLCAn5L6b5rC0OlQ4MDBtbeS7peS4iueuoemBkycsICfkvpvmsLQ6VDc1XzMwMG1t566h6YGTJywgJ+S+m+awtDpUMzAwXzUwMG1t566h6YGTJywgJ+S+m+awtDpUNTAwXzgwMG1t566h6YGTJywgJ+S+m+awtDrmjpLmsJTpmIAnLCAn5L6b5rC0OuaOkuaxoemYgCcsICfkvpvmsLQ66ZiA6ZeoJywgJ+S+m+awtDrkuInpgJonLCAn5L6b5rC0Oua2iOmYsuagkycsICfkvpvmsLQ66L+e5o6l54K5JywgJ+S+m+awtDrliqDljovngrknLCAn5L6b5rC0OuWbm+mAmicsICfkvpvmsLQ66aKE55WZ5Y+jJywgJ+S+m+awtDrmsLTooajnrrEnLCAn5L6b5rC0OuaOkuaxoeWPoycsICfkvpvmsLQ65aSn6KGoJ10sCiAgICAgIHlzRGF0YWJhc2VOYW1lczogWyfnvZHnu5zliIbmnpA66Zuo5rC0566hJywgJ+e9kee7nOWIhuaekDrpm6jmsLTkupUnLCAn572R57uc5YiG5p6QOumbqOawtOazteermScsICfnvZHnu5zliIbmnpA66Zuo5rC05Y+jJywgJ+e9kee7nOWIhuaekDrpm6jmsLTmjpLmlL7lj6MnLCAn572R57uc5YiG5p6QOumbqOawtOeuoeeCuSddLAogICAgICB3c0RhdGFiYXNlTmFtZXM6IFsn572R57uc5YiG5p6QOuaxoeawtOeuoScsICfnvZHnu5zliIbmnpA65rGh5rC05LqVJywgJ+e9kee7nOWIhuaekDrmsaHmsLTms7Xnq5knLCAn572R57uc5YiG5p6QOuaxoeawtOWPoycsICfnvZHnu5zliIbmnpA65rGh5rC05o6S5pS+5Y+jJywgJ+e9kee7nOWIhuaekDrmsaHmsLTpmIDpl6gnLCAn572R57uc5YiG5p6QOuaxoeawtOeuoeeCuScsICfnvZHnu5zliIbmnpA65rGh5rC055uR5rWL54K5J10sCiAgICAgIGRhdGFiYXNlTmFtZXMxOiBbJ+S+m+awtDrmjpLmsJTpmIAnLCAn5L6b5rC0OuaOkuaxoemYgCcsICfkvpvmsLQ66ZiA6ZeoJywgJ+e9kee7nOWIhuaekDrpm6jmsLTnrqEnLCAn572R57uc5YiG5p6QOumbqOawtOS6lScsICfnvZHnu5zliIbmnpA66Zuo5rC05rO156uZJywgJ+e9kee7nOWIhuaekDrpm6jmsLTlj6MnLCAn572R57uc5YiG5p6QOumbqOawtOaOkuaUvuWPoycsICfnvZHnu5zliIbmnpA66Zuo5rC0566h54K5JywgJ+e9kee7nOWIhuaekDrmsaHmsLTnrqEnLCAn572R57uc5YiG5p6QOuaxoeawtOS6lScsICfnvZHnu5zliIbmnpA65rGh5rC05rO156uZJywgJ+e9kee7nOWIhuaekDrmsaHmsLTlj6MnLCAn572R57uc5YiG5p6QOuaxoeawtOaOkuaUvuWPoycsICfnvZHnu5zliIbmnpA65rGh5rC06ZiA6ZeoJywgJ+e9kee7nOWIhuaekDrmsaHmsLTnrqHngrknLCAn572R57uc5YiG5p6QOuaxoeawtOebkea1i+eCuScsICfkvpvmsLQ65LiJ6YCaJywgJ+S+m+awtDrmtojpmLLmoJMnLCAn5L6b5rC0Oui/nuaOpeeCuScsICfkvpvmsLQ65Yqg5Y6L54K5JywgJ+S+m+awtDrlm5vpgJonLCAn5L6b5rC0OumihOeVmeWPoycsICfkvpvmsLQ65rC06KGo566xJywgJ+S+m+awtDrmjpLmsaHlj6MnLCAn5L6b5rC0OuWkp+ihqCddLAogICAgICBnc0RhdGFiYXNlTmFtZXMxOiBbJ+S+m+awtDrmjpLmsJTpmIAnLCAn5L6b5rC0OuaOkuaxoemYgCcsICfkvpvmsLQ66ZiA6ZeoJywgJ+S+m+awtDrkuInpgJonLCAn5L6b5rC0Oua2iOmYsuagkycsICfkvpvmsLQ66L+e5o6l54K5JywgJ+S+m+awtDrliqDljovngrknLCAn5L6b5rC0OuWbm+mAmicsICfkvpvmsLQ66aKE55WZ5Y+jJywgJ+S+m+awtDrmsLTooajnrrEnLCAn5L6b5rC0OuaOkuaxoeWPoycsICfkvpvmsLQ65aSn6KGoJ10sCiAgICAgIHlzRGF0YWJhc2VOYW1lczE6IFsn572R57uc5YiG5p6QOumbqOawtOeuoScsICfnvZHnu5zliIbmnpA66Zuo5rC05LqVJywgJ+e9kee7nOWIhuaekDrpm6jmsLTms7Xnq5knLCAn572R57uc5YiG5p6QOumbqOawtOWPoycsICfnvZHnu5zliIbmnpA66Zuo5rC05o6S5pS+5Y+jJywgJ+e9kee7nOWIhuaekDrpm6jmsLTnrqHngrknXSwKICAgICAgd3NEYXRhYmFzZU5hbWVzMTogWyfnvZHnu5zliIbmnpA65rGh5rC0566hJywgJ+e9kee7nOWIhuaekDrmsaHmsLTkupUnLCAn572R57uc5YiG5p6QOuaxoeawtOazteermScsICfnvZHnu5zliIbmnpA65rGh5rC05Y+jJywgJ+e9kee7nOWIhuaekDrmsaHmsLTmjpLmlL7lj6MnLCAn572R57uc5YiG5p6QOuaxoeawtOmYgOmXqCcsICfnvZHnu5zliIbmnpA65rGh5rC0566h54K5JywgJ+e9kee7nOWIhuaekDrmsaHmsLTnm5HmtYvngrknXSwKICAgICAgZ3NMYXllcnM6IFtdLAogICAgICB5c0xheWVyczogW10sCiAgICAgIHdzTGF5ZXJzOiBbXSwKICAgICAgcmVjb3JkVGltZXI6IG51bGwsCiAgICAgIC8vIOW9k+WJjeWFs+mUrueCuQogICAgICBjdXJyZW50S2V5UG9pbnQ6IG51bGwsCiAgICAgIC8vIOW9k+WJjeW6lOaApeS7u+WKoeeahG1hcmtlcgogICAgICBjdXJyZW50RW1lTWFya2VyOiBudWxsLAogICAgICBjYWxsYmFjazogbnVsbCwKICAgICAgZGF0YU5hbWVzOiBbXSwKICAgICAgbmF2TWFya2VyczogW10sCiAgICAgIGZlYXR1cmVzTGluZTogW10sCiAgICAgIGFyZWFNYXJrZXJzOiBbXSwKICAgICAgbWFya2Vyc0xpbmVQb2ludHM6IFtdLAogICAgICBtYXJrZXJzQXJlYVBvaW50czogW10sCiAgICAgIGFsbERpc3RhbmNlOiBudWxsLAogICAgICBuYXZpZ2F0b3JNYXJrZXI6IG51bGwsCiAgICAgIG5hdmlnYXRvck1hcmtlcjI6IG51bGwsCiAgICAgIGxpbmVNYXJrZXJzOiBbXSwKICAgICAgYXJlYU1hcmtlcjogbnVsbCwKICAgICAgZmlyc3RQb2ludDogW10sCiAgICAgIGJveEZlYXR1cmVzOiBbXSwKICAgICAgbXVsdGlUYXNrU0FMOiBbXSwKICAgICAgLy8g5a2X5YW4CiAgICAgIGRpY3Rpb25hcnk6IHt9LAogICAgICBldmVudFR5cGVMaXN0OiB7fSwKICAgICAgYWNjZXNzVG9rZW46IHRoaXMuJHN0b3JhZ2UuZ2V0KCdhY2Nlc3NfdG9rZW4nKSwKICAgICAgZm9ybVRva2VuOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyDojrflj5ZoZWFkZXLvvIzmn6Xor6Llt6XljZXnlKgKICAgIGF4aW9zKHsKICAgICAgdXJsOiBBUEkuVlVFX0FQUF9XUEdfVVJMICsgJy9tYWluL3VzZXJDZW50ZXJBcGkvc3NvL3Rva2VuQnlUb2tlbicsCiAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICBwYXJhbXM6IHsKICAgICAgICB0b2tlbjogdGhpcy5hY2Nlc3NUb2tlbgogICAgICB9LAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljIGIzVjBkMjl5YXpwM2NHY3lNREl3JwogICAgICB9CiAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgIHRoaXMuZm9ybVRva2VuID0gcmVzLmRhdGEucmVzdWx0RGF0YS50b2tlbjsKICAgICAgfQogICAgfSk7CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgbWFwTG9hZChtYXBJbnN0YW5jZSkgewogICAgICBtYXBPYmoubWFwID0gbWFwSW5zdGFuY2UubWFwOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UgPSBtYXBJbnN0YW5jZTsKICAgIH0sCiAgICBnZXRFdmVudFR5cGVMaXN0KCkgewogICAgICBpZiAodGhpcy5kaWN0aW9uYXJ5Lmxlbmd0aCA+IDApIHsKICAgICAgICAvLyDlpITnkIblrZflhbjvvIzlsIblhbbovazmjaLkuLrlr7nosaHvvIzkvr/kuo7lm57mmL7kuovku7blkI3np7AKICAgICAgICBsZXQgZGV0YWlsTGlzdCA9IHRoaXMuZGljdGlvbmFyeS5maWx0ZXIoCiAgICAgICAgLy8g5a+554m55a6a5LqL5Lu25YmN57yA5aSE55CGCiAgICAgICAgaXRlbSA9PiBpdGVtLmNvZGUuaW5kZXhPZignaW5zcGVjdGlvbl9ldmVudF90eXBlXycpICE9PSAtMSk7CiAgICAgICAgbGV0IGV2ZW50Q29kZUxpc3QgPSBbXTsKICAgICAgICBkZXRhaWxMaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBldmVudENvZGVMaXN0ID0gZXZlbnRDb2RlTGlzdC5jb25jYXQoaXRlbS5kaWN0aW9uYXJ5RGV0YWlsTGlzdCk7CiAgICAgICAgfSk7CiAgICAgICAgLy8g6L2s5o2i5Li65a+56LGhCiAgICAgICAgZXZlbnRDb2RlTGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgdGhpcy5ldmVudFR5cGVMaXN0W2l0ZW0uY29kZV0gPSBpdGVtLnpoOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIFRvYXN0KHsKICAgICAgICAgIHRpdGxlOiAi5a2X5YW45Yqg6L295aSx6LSlIgogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaXNPbkxvYWRlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNPbkxvYWQgJiYgbWFwT2JqLm1hcEluc3RhbmNlICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXA7CiAgICB9LAogICAgLy/pgJrnlKjmlrnms5UKICAgIGFzeW5jIGFkZENvbW1vbkxheWVyKCkgewogICAgICBmb3IgYXdhaXQgKGNvbnN0IHVybCBvZiB0aGlzLmJhc2VNYXB1cmwpIHsKICAgICAgICBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU3VwZXJTdHlsZURhdGEodXJsKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGFkZFBpcGVMYXllcigpIHsKICAgICAgbGV0IG1hcCA9IG1hcE9iai5tYXA7CiAgICAgIGxldCBlbnYgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0VOVjsKICAgICAgLy/lupXlm74KICAgICAgYXdhaXQgYXhpb3MuZ2V0KEFQSS5WVUVfQVBQX01BUF9SRVFVRVNUX1VSTCArICIvYXBpL3N3YW4vbWFwV29ya3Nob3BTb3VyY2UvZGV0YWlsP2lkPTE1NTc2NTAyNzM4OTUyODg4MzQiKS50aGVuKHJlcyA9PiB7CiAgICAgICAgbGV0IGxheWVycyA9IEpTT04ucGFyc2UocmVzLmRhdGEuZGF0YS5jb21iaW5lSnNvbkRhdGEpOwogICAgICAgIE9iamVjdC5rZXlzKGxheWVycy5zb3VyY2VzKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICBpZiAoZW52ID09ICJwcm9kdWN0aW9uIikgewogICAgICAgICAgICBsZXQgdGVtcCA9IGxheWVycy5zb3VyY2VzW2tleV0udGlsZXNbMF07CiAgICAgICAgICAgIC8vIHRlbXAgPSB0ZW1wLnJlcGxhY2VBbGwoIjE3Mi4yMC43OS42NTo4MDA4IiwgInhhc3cuaGRlYy5jb20iKTsKCiAgICAgICAgICAgIHRlbXAgPSB0ZW1wLnJlcGxhY2VBbGwoIjE3Mi4yMy4wLjEyMzo4MDA4IiwgInhhc3cuaGRlYy5jb20iKTsKICAgICAgICAgICAgbGF5ZXJzLnNvdXJjZXNba2V5XS50aWxlc1swXSA9IHRlbXA7CiAgICAgICAgICB9CiAgICAgICAgICBtYXAuYWRkU291cmNlKGtleSwgbGF5ZXJzLnNvdXJjZXNba2V5XSk7CiAgICAgICAgfSk7CiAgICAgICAgbGF5ZXJzLmxheWVycy5mb3JFYWNoKGxheWVyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdsYXllcjogJywgbGF5ZXIpOwogICAgICAgICAgaWYgKCFsYXllci5sYXlvdXQgfHwgbGF5ZXIubGF5b3V0LnZpc2liaWxpdHkgPT0gInZpc2libGUiKSB7CiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEJhc2VMYXllcnMucHVzaChsYXllcik7IC8v5o6n5Yi25Zyw5Zu+5pi+6ZqQCiAgICAgICAgICB9CiAgICAgICAgICBtYXAuYWRkTGF5ZXIobGF5ZXIpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChlID0+IHt9KS5maW5hbGx5KCgpID0+IHt9KTsKICAgICAgLy/nrqHnur8KICAgICAgYXdhaXQgYXhpb3MuZ2V0KEFQSS5WVUVfQVBQX01BUF9SRVFVRVNUX1VSTCArICIvYXBpL3N3YW4vbWFwV29ya3Nob3BTb3VyY2UvZGV0YWlsP2lkPTE1NDg1NzM0MTI5NjM3NDk4ODkiKS50aGVuKHJlcyA9PiB7CiAgICAgICAgbGV0IGxheWVycyA9IEpTT04ucGFyc2UocmVzLmRhdGEuZGF0YS5qc29uRGF0YSk7CiAgICAgICAgT2JqZWN0LmtleXMobGF5ZXJzLnNvdXJjZXMpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgIGlmIChlbnYgPT0gInByb2R1Y3Rpb24iKSB7CiAgICAgICAgICAgIGxldCB0ZW1wID0gbGF5ZXJzLnNvdXJjZXNba2V5XS50aWxlc1swXTsKICAgICAgICAgICAgLy8gdGVtcCA9IHRlbXAucmVwbGFjZUFsbCgiMTcyLjIwLjc5LjY1OjgwMDgiLCAieGFzdy5oZGVjLmNvbSIpOwogICAgICAgICAgICB0ZW1wID0gdGVtcC5yZXBsYWNlQWxsKCIxNzIuMjMuMC4xMjM6ODAwOCIsICJ4YXN3LmhkZWMuY29tIik7CiAgICAgICAgICAgIGxheWVycy5zb3VyY2VzW2tleV0udGlsZXNbMF0gPSB0ZW1wOwogICAgICAgICAgfQogICAgICAgICAgbWFwLmFkZFNvdXJjZShrZXksIGxheWVycy5zb3VyY2VzW2tleV0pOwogICAgICAgIH0pOwogICAgICAgIGxheWVycy5sYXllcnMuZm9yRWFjaChsYXllciA9PiB7CiAgICAgICAgICBtYXAuYWRkTGF5ZXIobGF5ZXIpOwogICAgICAgICAgLy/lm77lsYLnp7vlhaXnp7vpmaTku6Xlj4rngrnlh7vkuovku7YKICAgICAgICAgIC8vIG1hcC5vbigibW91c2VlbnRlciIsIGxheWVyLmlkLCB0aGlzLmhhbmRsZUxheWVyRW50ZXIpOwogICAgICAgICAgLy8gbWFwLm9uKCJtb3VzZW91dCIsIGxheWVyLmlkLCB0aGlzLmhhbmRsZUxheWVyTGVhdmUpOwogICAgICAgICAgLy8gbWFwLm9uKCJjbGljayIsIGxheWVyLmlkLCB0aGlzLmhhbmRsZUxheWVyQ2xpY2spOyAKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZSA9PiB7fSkuZmluYWxseSgoKSA9PiB7fSk7CiAgICAgIGF3YWl0IHRoaXMuYWRkTGluZUdlb0xheWVyKCk7CiAgICAgIC8vIOi+ueahhgogICAgICBhd2FpdCBtYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAibWFwQm9yZGVyIiwKICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgc291cmNlOiB7CiAgICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgICBkYXRhOiBib3JkZXIKICAgICAgICB9LAogICAgICAgIGxheW91dDogewogICAgICAgICAgImxpbmUtam9pbiI6ICJyb3VuZCIsCiAgICAgICAgICAibGluZS1jYXAiOiAicm91bmQiCiAgICAgICAgfSwKICAgICAgICBwYWludDogewogICAgICAgICAgImxpbmUtY29sb3IiOiAiIzE3RTlGRSIsCiAgICAgICAgICAibGluZS1vcGFjaXR5IjogMC40LAogICAgICAgICAgImxpbmUtd2lkdGgiOiAyCiAgICAgICAgfQogICAgICB9KTsKICAgICAgYXdhaXQgdGhpcy5hZGRLZXlQb2ludExheWVyKCk7CiAgICAgIC8vIHRoaXMuaXNPbkxvYWQgPSB0cnVlOwogICAgfSwKICAgIC8vIGFzeW5jIGFkZFBpcGVMYXllcigpIHsKICAgIC8vICAgdGhpcy5pc09uTG9hZCA9IHRydWU7CiAgICAvLyAgIGF3YWl0IG1hcE9iai5tYXBJbnN0YW5jZS4oKQogICAgLy8gICAvLyBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuYWRkVGltZXJTb3VyY2UoKTsKICAgIC8vICAgLy8gdGhpcy5zd0xheWVyWyfpm6jmsLQnXSA9IG1hcE9iai5tYXBJbnN0YW5jZS5hZGRUaW1lckxheWVyKCfpm6jmsLQnKTsKICAgIC8vICAgLy8gdGhpcy5zd0xheWVyWyfmsaHmsLQnXSA9IG1hcE9iai5tYXBJbnN0YW5jZS5hZGRUaW1lckxheWVyKCfmsaHmsLQnKTsKICAgIC8vICAgLy8gdGhpcy5zd0xheWVyWyfkvpvmsLQnXSA9IGF3YWl0IG1hcE9iai5tYXBJbnN0YW5jZS5hZGRUaW1lckxheWVyKCfkvpvmsLQnKTsKICAgIC8vICAgLy8gbGV0IGdzTGF5ZXJUeXBlID0gTGF5ZXJUeXBlWyfkvpvmsLQnXVswXS5jb25jYXQoTGF5ZXJUeXBlWyfkvpvmsLQnXVsxXSkKICAgIC8vICAgLy8gZ3NMYXllclR5cGUuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgIC8vICAgLy8gICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KGl0ZW0uaWQsICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgIC8vICAgLy8gfSkKICAgIC8vICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgnbGlnaHRMYXllcicsIHsKICAgIC8vICAgLy8gICB0eXBlOiAiZ2VvanNvbiIsCiAgICAvLyAgIC8vICAgZGF0YTogewogICAgLy8gICAvLyAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgIC8vICAgLy8gICAgIGZlYXR1cmVzOiBbXQogICAgLy8gICAvLyAgIH0KICAgIC8vICAgLy8gfSk7CiAgICAvLyAgIC8vIHRoaXMuc3dMYXllclsn5L6b5rC0J10gPSBhd2FpdCB0aGlzLnBpcGVTZXR0aW5ncyh0aGlzLmdzVXJsLCB0aGlzLkdTTCk7CiAgICAvLyAgIC8vIHRoaXMuc3dMYXllclsn6Zuo5rC0J10gPSBhd2FpdCB0aGlzLnBpcGVTZXR0aW5ncyh0aGlzLnlzVXJsLCB0aGlzLllTTCk7CiAgICAvLyAgIC8vIHRoaXMuc3dMYXllclsn5rGh5rC0J10gPSBhd2FpdCB0aGlzLnBpcGVTZXR0aW5ncyh0aGlzLndzVXJsLCB0aGlzLldTTCk7CiAgICAvLyAgIC8vIGZvciBhd2FpdCAoY29uc3QgdXJsIG9mIHRoaXMuYnpMYXllclVybHMpIHsKICAgIC8vICAgLy8gICBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU3VwZXJTdHlsZURhdGEodXJsKTsKICAgIC8vICAgLy8gfQogICAgLy8gICAvLyBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgLy8gICAvLyAgIGlkOiAibGlnaHRQb2ludCIsCiAgICAvLyAgIC8vICAgdHlwZTogInN5bWJvbCIsCiAgICAvLyAgIC8vICAgc291cmNlOiAibGlnaHRMYXllciIsCiAgICAvLyAgIC8vICAgZmlsdGVyOiBbIj09IiwgIiR0eXBlIiwgIlBvaW50Il0sCiAgICAvLyAgIC8vICAgbGF5b3V0OiB7CiAgICAvLyAgIC8vICAgICAnaWNvbi1zaXplJzogMS40LAogICAgLy8gICAvLyAgICAgJ2ljb24taW1hZ2UnOiBbLi4udGhpcy5HU0wuc2xpY2UoMCwgdGhpcy5HU0wubGVuZ3RoIC0gMSksIC4uLnRoaXMuV1NMLnNsaWNlKDEsIHRoaXMuV1NMLmxlbmd0aCAtIDEpLCAuLi50aGlzLllTTC5zbGljZSgxKV0sCiAgICAvLyAgIC8vICAgICAnaWNvbi1pZ25vcmUtcGxhY2VtZW50JzogdHJ1ZSwKICAgIC8vICAgLy8gICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlCiAgICAvLyAgIC8vICAgfQogICAgLy8gICAvLyB9LCAibGlnaHRMYXllciIpCiAgICAvLyAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAvLyAgIC8vICAgaWQ6ICJsaWdodExpbmUiLAogICAgLy8gICAvLyAgIHR5cGU6ICJsaW5lIiwKICAgIC8vICAgLy8gICBzb3VyY2U6ICJsaWdodExheWVyIiwKICAgIC8vICAgLy8gICBmaWx0ZXI6IFsiPT0iLCAiJHR5cGUiLCAiTGluZVN0cmluZyJdLAogICAgLy8gICAvLyAgIHBhaW50OiB7CiAgICAvLyAgIC8vICAgICAnbGluZS13aWR0aCc6IDMsCiAgICAvLyAgIC8vICAgICAnbGluZS1jb2xvcic6ICJyZWQiLAogICAgLy8gICAvLyAgIH0KICAgIC8vICAgLy8gfSwgImxpZ2h0TGF5ZXIiKTsKICAgIC8vICAgLy8gdGhpcy5pc09uTG9hZCA9IHRydWU7CiAgICAvLyAgIC8vIGlmICh0aGlzLnRyaXBsZVZpc2libGUpIHsKICAgIC8vICAgLy8gICB0aGlzLmdzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAvLyAgIC8vICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMuZ3NMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAvLyAgIC8vICAgfSkKICAgIC8vICAgLy8gfQogICAgLy8gfSwKICAgIGFzeW5jIHBpcGVTZXR0aW5ncyh1cmwsIHNldHRpbmcpIHsKICAgICAgbGV0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSBhd2FpdCBhY3Rpb25zLmdldEFjdGlvbih1cmwpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKGRhdGEubmFtZSwgZGF0YS5zb3VyY2VzW2RhdGEubmFtZV0pOwogICAgICBkYXRhLmxheWVycyA9IGRhdGEubGF5ZXJzLmZpbHRlcihpdGVtID0+IHsKICAgICAgICByZXR1cm4gaXRlbS50eXBlICE9PSAiYmFja2dyb3VuZCI7CiAgICAgIH0pOwogICAgICAvLyBkYXRhLnNvdXJjZXNbZGF0YS5uYW1lXS50aWxlc1swXSA9IGdpc0RvbWFpbiArICcvaXNlcnZlcicgKyBkYXRhLnNvdXJjZXNbZGF0YS5uYW1lXS50aWxlc1swXS5zcGxpdCgnaXNlcnZlcicpWzFdOwogICAgICBsZXQgbGF5ZXJzID0gZGF0YS5sYXllcnM7CiAgICAgIHN3aXRjaCAoZGF0YS5uYW1lKSB7CiAgICAgICAgY2FzZSAn5L6b5rC0JzoKICAgICAgICAgIHRoaXMuZ3NMYXllcnMgPSBsYXllcnMubWFwKGxheWVyID0+IHsKICAgICAgICAgICAgcmV0dXJuIGxheWVyLmlkOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICfpm6jmsLQnOgogICAgICAgICAgdGhpcy55c0xheWVycyA9IGxheWVycy5tYXAobGF5ZXIgPT4gewogICAgICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ+axoeawtCc6CiAgICAgICAgICB0aGlzLndzTGF5ZXJzID0gbGF5ZXJzLm1hcChsYXllciA9PiB7CiAgICAgICAgICAgIHJldHVybiBsYXllci5pZDsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGRhdGEubGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4gewogICAgICAgIGRlbGV0ZSBsYXllci5tYXh6b29tOwogICAgICAgIGlmIChsYXllci5sYXlvdXQgJiYgbGF5ZXIubGF5b3V0LnZpc2liaWxpdHkgPT0gInZpc2libGUiICYmIGxheWVyLnR5cGUgPT0gImxpbmUiKSB7CiAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIobGF5ZXIsICdkZXZpY2VNYXAnKTsKICAgICAgICB9IGVsc2UgaWYgKGxheWVyLmxheW91dCAmJiBsYXllci5sYXlvdXQudmlzaWJpbGl0eSA9PSAidmlzaWJsZSIgJiYgbGF5ZXIudHlwZSA9PSAiY2lyY2xlIikgewogICAgICAgICAgbGF5ZXIudHlwZSA9ICJzeW1ib2wiOwogICAgICAgICAgbGF5ZXIucGFpbnQgPSB7fTsKICAgICAgICAgIGxheWVyLmxheW91dCA9IHsKICAgICAgICAgICAgImljb24taW1hZ2UiOiBzZXR0aW5nLAogICAgICAgICAgICAiaWNvbi1zaXplIjogMQogICAgICAgICAgfTsKICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcihsYXllciwgJ2RldmljZU1hcCcpOwogICAgICAgIH0KICAgICAgICB0aGlzLmRldmljZUxheWVycy5wdXNoKGxheWVyLmlkKTsKICAgICAgICAvLyBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCdjbGljaycsbGF5ZXIuaWQsdGhpcy5sYXllckNsaWNrKQogICAgICB9KTsKICAgIH0sCiAgICBhZGRVc2VyKCkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCd1c2VyJywgewogICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICBpZDogInVzZXIiLAogICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgIHNvdXJjZTogInVzZXIiLAogICAgICAgIGxheW91dDogewogICAgICAgICAgImljb24taW1hZ2UiOiAidXNlciIsCiAgICAgICAgICAiaWNvbi1zaXplIjogMC4yNSwKICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlLAogICAgICAgICAgJ2ljb24taWdub3JlLXBsYWNlbWVudCc6IHRydWUKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vSDXlrprkvY0KICAgIGFzeW5jIGdldFVzZXJQb3NpdGlvbigpIHsKICAgICAgLy8gbGV0IHA7CiAgICAgIC8vIGlmwqAobmF2aWdhdG9yLmdlb2xvY2F0aW9uKXsKICAgICAgLy8gICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbigocG9zaXRpb24pID0+IHsKICAgICAgLy8gICAgIHAgPSBbcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSxwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGVdOwogICAgICAvLyAgICAgYWxlcnQocCkKICAgICAgLy8gICB9LChlcnJvcikgPT4gewogICAgICAvLyAgICAgc3dpdGNoKGVycm9yLmNvZGUpwqB7CiAgICAgIC8vICAgICAgIGNhc2XCoGVycm9yLlBFUk1JU1NJT05fREVOSUVEOsKgCiAgICAgIC8vICAgICAgICAgYWxlcnQoIuWumuS9jeWksei0pSznlKjmiLfmi5Lnu53or7fmsYLlnLDnkIblrprkvY0iKTsKICAgICAgLy8gICAgICAgICBicmVhazsKICAgICAgLy8gICAgICAgY2FzZcKgZXJyb3IuUE9TSVRJT05fVU5BVkFJTEFCTEU6CiAgICAgIC8vICAgICAgICAgYWxlcnQoIuWumuS9jeWksei0pSzkvY3nva7kv6Hmga/mmK/kuI3lj6/nlKgiKTsKICAgICAgLy8gICAgICAgICBicmVhazsKICAgICAgLy8gICAgICAgY2FzZcKgZXJyb3IuVElNRU9VVDoKICAgICAgLy8gICAgICAgICBhbGVydCgi5a6a5L2N5aSx6LSlLOivt+axguiOt+WPlueUqOaIt+S9jee9rui2heaXtiIpOwogICAgICAvLyAgICAgICAgIGJyZWFrOwogICAgICAvLyAgICAgICBjYXNlwqBlcnJvci5VTktOT1dOX0VSUk9SOgogICAgICAvLyAgICAgICAgIGFsZXJ0KCLlrprkvY3lpLHotKUs5a6a5L2N57O757uf5aSx5pWIIik7CiAgICAgIC8vICAgICAgICAgYnJlYWs7CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICB9KTvCoAogICAgICAvLyB9ZWxzZXvCoAogICAgICAvLyAgIGFsZXJ0KCLkuI3mlK/mjIHlnLDnkIblrprkvY3jgIIiKTvCoAogICAgICAvLyB9CiAgICAgIGxldCBwb2ludCA9IGF3YWl0IGFjdGlvbnMuZ2V0UG9zaXRpb24oKTsKICAgICAgcmV0dXJuIHBvaW50OwogICAgfSwKICAgIHNldFVzZXJQb3NpdGlvbihwb3NpdGlvbikgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgndXNlcicsIHsKICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgIGZlYXR1cmVzOiBwb3NpdGlvbi5sZW5ndGggPiAwID8gW3R1cmYucG9pbnQocG9zaXRpb24pXSA6IFtdCiAgICAgIH0pOwogICAgfSwKICAgIGZseVRvKHsKICAgICAgcG9zaXRpb24sCiAgICAgIHpvb20KICAgIH0pIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmZseVRvKHBvc2l0aW9uLCB6b29tKTsKICAgIH0sCiAgICBwb3NpdGlvbihjb29yZHMpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnBvc2l0aW9uKGNvb3Jkcyk7CiAgICB9LAogICAgLy/lhazlj7jpgInmi6kKICAgIC8v5Lyg5YWs5Y+45pWw57uEIOS+i+WmgjpbJ+S4tOW5s+S+m+aOkuawtCddCiAgICBhc3luYyBjaG9vc2VGYWN0b3J5KGZhY3RvcnkpIHsKICAgICAgbGV0IGZhYyA9IGZhY3RvcnlbZmFjdG9yeS5sZW5ndGggLSAxXTsKICAgICAgbGV0IGZhYzAgPSBmYWN0b3J5WzBdOwogICAgICB0aGlzLmZhY3RvcnlOYW1lTWFya2Vycy5mb3JFYWNoKG1hcmtlciA9PiB7CiAgICAgICAgbWFya2VyLnJlbW92ZSgpOwogICAgICB9KTsKICAgICAgaWYgKGZhYzAubGFiZWwgIT09ICLmna3lt57kvZnmna3msLTliqHmjqfogqHpm4blm6IiKSB7CiAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5nZXRBY3Rpb24oIi95aHN3LWRyYWluYWdlLWVudGl0eS91c2VyTWFwL29yZ1RyZWUiLCB7CiAgICAgICAgICBvcmdObzogZmFjLmxhYmVsID09PSAn5YWo6YOoJyA/IGZhYzAudmFsdWUgOiBmYWMudmFsdWUKICAgICAgICB9KTsKICAgICAgICBsZXQgYXJyID0gW107CiAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgYXJyID0gbWFwT2JqLm1hcEluc3RhbmNlLml0ZXJhdGlvbihyZXMuZGF0YSwgJ2NoaWxkcmVuJywgWydjb21wYW55TmFtZScsICdnZW9tJ10pOwogICAgICAgIH0KICAgICAgICBpZiAoZmFjdG9yeS5sZW5ndGggPT0gMSkgewogICAgICAgICAgYXJyLnNoaWZ0KCk7CiAgICAgICAgfQogICAgICAgIGxldCBjb29yZHNBcnIgPSBbXTsKICAgICAgICBsZXQgZmFjdG9yeU5hbWVNYXJrZXJzID0gW107CiAgICAgICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBjb29yZHNBcnIucHVzaChpdGVtLmdlb20uY29vcmRpbmF0ZXMpOwogICAgICAgICAgbGV0IGNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKGl0ZW0uZ2VvbS5jb29yZGluYXRlc1swXSk7CiAgICAgICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBlbGUuaW5uZXJIVE1MID0gYDxzcGFuIHN0eWxlPSJjb2xvcjojNDk1NjY1O2ZvbnQtc2l6ZToxOHB4O2ZvbnQtd2VpZ2h0OmJvbGQiPiR7aXRlbS5jb21wYW55TmFtZX08L3NwYW4+YDsKICAgICAgICAgIGZhY3RvcnlOYW1lTWFya2Vycy5wdXNoKG1hcE9iai5tYXBJbnN0YW5jZS5hZGRNYXJrZXIoZWxlLCBjZW50ZXIpKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmZhY3RvcnlOYW1lTWFya2VycyA9IGZhY3RvcnlOYW1lTWFya2VyczsKICAgICAgICB0aGlzLm1ha2VMb2NhdGlvbihyZXMuZGF0YVswXS5nZW9tLmNvb3JkaW5hdGVzKTsKICAgICAgICB0aGlzLnBhaW50aW5nUmFuZ2UoewogICAgICAgICAgcG9zaXRpb246IGNvb3Jkc0FyciwKICAgICAgICAgIGxpbmVEYXNoYXJyYXk6IFszLCA0XQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWFrZUxvY2F0aW9uKCk7CiAgICAgICAgdGhpcy5wYWludGluZ1JhbmdlKHt9KTsKICAgICAgfQogICAgfSwKICAgIHJhbmRvbVN0cmluZyhsZW4pIHsKICAgICAgbGVuID0gbGVuIHx8IDMyOwogICAgICBsZXQgJGNoYXJzID0gJ0FCQ0RFRkdISktNTlBRUlNUV1hZWmFiY2RlZmhpamttbnByc3R3eHl6MjM0NTY3OCc7CiAgICAgIGxldCBtYXhQb3MgPSAkY2hhcnMubGVuZ3RoOwogICAgICBsZXQgcHdkID0gJyc7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBwd2QgKz0gJGNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXhQb3MpKTsKICAgICAgfQogICAgICByZXR1cm4gcHdkOwogICAgfSwKICAgIGluaXRNYXJrZXIoaSwgdyA9IDIwLCBoID0gMjApIHsKICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICBlbGUuc3JjID0gaTsKICAgICAgZWxlLnN0eWxlLndpZHRoID0gdzsKICAgICAgZWxlLnN0eWxlLmhlaWdodCA9IGg7CiAgICAgIHJldHVybiBlbGU7CiAgICB9LAogICAgbWFwT25Mb2FkKGNhbGxiYWNrKSB7CiAgICAgIGlmICh0aGlzLmlzT25Mb2FkKSB7CiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy5pc09uTG9hZCkgewogICAgICAgICAgICB0aGlzLnRpbWVyLmZvckVhY2godGltZXIgPT4gewogICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy50aW1lciA9IG51bGw7CiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgICAgICB0aGlzLnRpbWVyLnB1c2godGltZXIpOwogICAgICB9CiAgICB9LAogICAgLyoqDQogICAgICogQG5hbWU65Lia5Yqh5Luj56CBDQogICAgICovCiAgICAvL+euoee9keWSjOiuvuaWveWinuWKoOeCueWHu+mAieS4reS6i+S7tu+8jOmAieS4reiuvuaWveS/oeaBr+WCqOWtmOiHs3RoaXMuY2hvb3NlRGV2aWNlCiAgICBhZGREZXZpY2VMYXllcnNDbGlja0V2ZW50KHRoYXQsIGlzU1cgPSBmYWxzZSkgewogICAgICBsZXQgZGV2aWNlTGF5ZXJzID0gdGhpcy5kZXZpY2VMYXllcnMubGVuZ3RoID4gMCA/IHRoaXMuZGV2aWNlTGF5ZXJzIDogbWFwT2JqLm1hcEluc3RhbmNlLmRldmljZUxheWVyczsKICAgICAgdGhpcy52bSA9IHRoYXQgfHwgbnVsbDsKICAgICAgZGV2aWNlTGF5ZXJzLmZvckVhY2gobGF5ZXJJZCA9PiB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbignY2xpY2snLCBsYXllcklkLCBpc1NXID8gdGhpcy5sYXllckNsaWNrMSA6IHRoaXMubGF5ZXJDbGljayk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZURldmljZUxheWVyc0NsaWNrRXZlbnQoaXNTVyA9IGZhbHNlKSB7CiAgICAgIGxldCBkZXZpY2VMYXllcnMgPSB0aGlzLmRldmljZUxheWVycy5sZW5ndGggPiAwID8gdGhpcy5kZXZpY2VMYXllcnMgOiBtYXBPYmoubWFwSW5zdGFuY2UuZGV2aWNlTGF5ZXJzOwogICAgICBkZXZpY2VMYXllcnMuZm9yRWFjaChsYXllcklkID0+IHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9mZignY2xpY2snLCBsYXllcklkLCBpc1NXID8gdGhpcy5sYXllckNsaWNrMSA6IHRoaXMubGF5ZXJDbGljayk7CiAgICAgIH0pOwogICAgICB0aGlzLnZtID0gbnVsbDsKICAgIH0sCiAgICBsYXllckNsaWNrKGUpIHsKICAgICAgbGV0IGluZGV4ID0gdGhpcy5jaG9vc2VEZXZpY2UuZmluZEluZGV4KGl0ZW0gPT4gewogICAgICAgIHJldHVybiBpdGVtLnByb3BlcnRpZXMuaWQgPT0gZS5mZWF0dXJlc1swXS5pZDsKICAgICAgfSk7CiAgICAgIGxldCBkZXZpY2UgPSBudWxsOwogICAgICBsZXQgb3BlcmF0aW9uTW9kZSA9ICIiOwogICAgICBpZiAoaW5kZXggPT0gLTEpIHsKICAgICAgICBsZXQgZmVhdHVyZSA9IGUuZmVhdHVyZXNbMF07CiAgICAgICAgZGV2aWNlID0gewogICAgICAgICAgdHlwZTogImZlYXR1cmUiLAogICAgICAgICAgZ2VvbWV0cnk6IGZlYXR1cmUuZ2VvbWV0cnksCiAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgIC4uLmZlYXR1cmUucHJvcGVydGllcywKICAgICAgICAgICAgaWQ6IGZlYXR1cmUuaWQKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuY2hvb3NlRGV2aWNlLnB1c2goZGV2aWNlKTsKICAgICAgICBvcGVyYXRpb25Nb2RlID0gJ2FkZCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGV2aWNlID0gdGhpcy5jaG9vc2VEZXZpY2VbaW5kZXhdOwogICAgICAgIHRoaXMuY2hvb3NlRGV2aWNlLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgb3BlcmF0aW9uTW9kZSA9ICdyZW1vdmUnOwogICAgICB9CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCdsaWdodExheWVyJywgewogICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgZmVhdHVyZXM6IHRoaXMuY2hvb3NlRGV2aWNlCiAgICAgIH0pOwogICAgICB0aGlzLnZtICYmIHRoaXMudm0uJGVtaXQoJ2dldERldmljZScsIHRoaXMuY2hvb3NlRGV2aWNlLCB7CiAgICAgICAgb3BlcmF0aW9uTW9kZSwKICAgICAgICBkZXZpY2UKICAgICAgfSk7CiAgICAgIGRldmljZSA9IG51bGw7CiAgICB9LAogICAgLyoqDQogICAgICog5LiJ572R5ZCI5LiADQogICAgICovCiAgICBsYXllckNsaWNrMShlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdlIDo+PiAnLCBlKTsKICAgICAgbGV0IGZlYXR1cmUgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhbW2UucG9pbnQueCAtIDIsIGUucG9pbnQueSAtIDJdLCBbZS5wb2ludC54ICsgMiwgZS5wb2ludC55ICsgMl1dKVswXTsKICAgICAgaWYgKGZlYXR1cmUgJiYgZmVhdHVyZS5wcm9wZXJ0aWVzLmRldmljZWlkICYmICFmZWF0dXJlLmxheWVyLmlkLmluY2x1ZGVzKCdfc3ltYm9sJykpIHsKICAgICAgICBjb25zb2xlLmxvZygnZmVhdHVyZSA6Pj4gJywgZmVhdHVyZSk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEoJ2xpZ2h0TGF5ZXInLCB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXM6IFtmZWF0dXJlXQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJGVtaXQoJ2dldERldmljZScsIGZlYXR1cmUpOwogICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMuZGlzcGxheS5pbmRleE9mKCfnrqHnur8nKSA+IC0xKSB7CiAgICAgICAgICBsZXQgbG9jYXRpb24gPSBbZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVswXSwgZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsxXSAtIDAuMDAwNV07CiAgICAgICAgICB0aGlzLmZseVRvKHsKICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLAogICAgICAgICAgICB6b29tOiAxNwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxldCBsb2NhdGlvbjIgPSBbZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXSwgZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1sxXSAtIDAuMDAwNV07CiAgICAgICAgICB0aGlzLmZseVRvKHsKICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uMiwKICAgICAgICAgICAgem9vbTogMTcKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8v5p+l55yL5pe25Zue5pi+CiAgICBlY2hvV3hEZXZlaWNlKGZlYXR1cmVzKSB7CiAgICAgIHRoaXMuY2hvb3NlRGV2aWNlID0gZmVhdHVyZXM7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCdsaWdodExheWVyJywgewogICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgZmVhdHVyZXM6IHRoaXMuY2hvb3NlRGV2aWNlCiAgICAgIH0pOwogICAgfSwKICAgIC8v5re75Yqg5bim5rWu56qX5LqL5Lu25Zu+5qCHCiAgICBhZGRFdmVudE1hcmtlcih7CiAgICAgIHBvc2l0aW9uLAogICAgICBldmVudAogICAgfSkgewogICAgICBsZXQgZWxlID0gdGhpcy5pbml0TWFya2VyKHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAvZXZlbnRQb2ludC5wbmcnKSwgMTAsIDEwKTsKICAgICAgbGV0IG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgIGVsZW1lbnQ6IGVsZQogICAgICB9KTsKICAgICAgbWFya2VyLnNldExuZ0xhdChwb3NpdGlvbikuc2V0UG9wdXAobWFwT2JqLm1hcEluc3RhbmNlLm5ld1BvcHVwKHsKICAgICAgICBvZmZzZXQ6IFswLCAtMTBdLAogICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZQogICAgICB9KS5zZXRIVE1MKGA8c3Ryb25nPiR7ZXZlbnR9PC9zdHJvbmc+YCkpLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApOwogICAgICBtYXJrZXIudG9nZ2xlUG9wdXAoKTsKICAgIH0sCiAgICAvL+WIh+aNouWcsOWbviBuYW1lOnRkdHx8eXh0fHxiYXNlTWFwCiAgICBjaGFuZ2VNYXAobmFtZSkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuY2hhbmdlQmFzZU1hcChuYW1lKTsKICAgIH0sCiAgICAvKioNCiAgICAgKiBAbmFtZTrnu7Tkv67pg6jku70NCiAgICAgKi8KICAgIGFkZE9yZ2FuaXplck1hcmtlcih7CiAgICAgIHBvc2l0aW9uLAogICAgICBkaXN0YW5jZQogICAgfSkgewogICAgICBsZXQgZWxlID0gdGhpcy5pbml0TWFya2VyKHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAvZ2oucG5nJykpOwogICAgICB0aGlzLm1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgIGVsZW1lbnQ6IGVsZQogICAgICB9KTsKICAgICAgdGhpcy5tYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5zZXRQb3B1cChtYXBPYmoubWFwSW5zdGFuY2UubmV3UG9wdXAoewogICAgICAgIG9mZnNldDogWzAsIC0xMF0sCiAgICAgICAgY2xvc2VCdXR0b246IGZhbHNlCiAgICAgIH0pLnNldEhUTUwoYDxzdHJvbmc+JHtkaXN0YW5jZX08L3N0cm9uZz5gKSkuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgIHRoaXMubWFya2VyLnRvZ2dsZVBvcHVwKCk7CiAgICB9LAogICAgLy/mm7TmlrDljY/lip7kurrlkZjkvY3nva4KICAgIHVwZGF0ZU9yZ2FuaXplclBvc2l0aW9uKHsKICAgICAgcG9zaXRpb24sCiAgICAgIGRpc3RhbmNlCiAgICB9KSB7CiAgICAgIHRoaXMubWFya2VyLnNldExuZ0xhdChwb3NpdGlvbikuZ2V0UG9wdXAoKS5zZXRIVE1MKGA8c3Ryb25nPiR7ZGlzdGFuY2V9PC9zdHJvbmc+YCk7CiAgICB9LAogICAgLy/np7vpmaTljY/lip7kurrlkZgKICAgIHJlbW92ZU9yZ2FuaXplck1hcmtlcigpIHsKICAgICAgdGhpcy5tYXJrZXIucmVtb3ZlKCk7CiAgICAgIHRoaXMubWFya2VyID0gbnVsbDsKICAgIH0sCiAgICAvLyDngrnlh7vlnLDlm77mt7vliqDoh6rlrprkuYnpgInmi6nnu7Tkv67orr7mlr0KICAgIHN0YXJ0QWRkRGl5UG9pbnQoZXZlbnQsIHZtKSB7CiAgICAgIHRoaXMuZXZlbnQgPSBldmVudDsKICAgICAgdGhpcy52bSA9IHZtOwogICAgICBtYXBPYmoubWFwLm9uKCdjbGljaycsIHRoaXMuQWRkRGl5UG9pbnQpOwogICAgfSwKICAgIEFkZERpeVBvaW50KGUpIHsKICAgICAgdGhpcy5hZGREaXlyTWFya2VyKHsKICAgICAgICBwb3NpdGlvbjogW2UubG5nTGF0LmxuZywgZS5sbmdMYXQubGF0XSwKICAgICAgICBuYW1lOiBldmVudAogICAgICB9KTsKICAgIH0sCiAgICAvLyDlnLDlm77lvZXlhaXorr7mlr3mt7vliqDlm77moIcKICAgIGFkZERpeXJNYXJrZXIoewogICAgICBwb3NpdGlvbiwKICAgICAgbmFtZQogICAgfSkgewogICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgIGVsZS5zcmMgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL2RpeVBvaW50LnBuZycpOwogICAgICBlbGUuc3R5bGUud2lkdGggPSAnMjBweCc7CiAgICAgIGVsZS5zdHlsZS5oZWlnaHQgPSAnMjBweCc7CiAgICAgIHRoaXMuZGl5UG9pbnQubWFya2VyICYmIHRoaXMuZGl5UG9pbnQubWFya2VyLnJlbW92ZSgpOwogICAgICBsZXQgbWFya2VyID0gbWFwT2JqLm1hcEluc3RhbmNlLm5ld01hcmtlcih7CiAgICAgICAgZWxlbWVudDogZWxlCiAgICAgIH0pOwogICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5zZXRQb3B1cChtYXBPYmoubWFwSW5zdGFuY2UubmV3UG9wdXAoewogICAgICAgIG9mZnNldDogWy0xLCAwXQogICAgICB9KS5zZXRIVE1MKGA8c3Ryb25nPiR7bmFtZX08L3N0cm9uZz5gKSkuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgIHRoaXMuZGl5UG9pbnQgPSB7CiAgICAgICAgbmFtZSwKICAgICAgICBwb3NpdGlvbiwKICAgICAgICBtYXJrZXIKICAgICAgfTsKICAgICAgdGhpcy52bS4kZW1pdCgnZ2V0RGl5UG9pbnQnLCB0aGlzLmRpeVBvaW50KTsKICAgIH0sCiAgICAvL+enu+mZpOaWsOW9leWFpeiuvuaWveWbvuaghwogICAgcmVtb3ZlRGl5TWFya2VyKCkgewogICAgICB0aGlzLmRpeVBvaW50Lm1hcmtlci5yZW1vdmUoKTsKICAgICAgdGhpcy5kaXlQb2ludC5tYXJrZXIgPSBudWxsOwogICAgfSwKICAgIC8v57uT5p2f6Ieq5a6a5LmJ6YCJ5oup57u05L+u6K6+5pa9CiAgICBlbmREaXlQb2ludCgpIHsKICAgICAgbWFwT2JqLm1hcC5vZmYoJ2NsaWNrJywgdGhpcy5BZGREaXlQb2ludCk7CiAgICAgIHRoaXMudm0gPSBudWxsOwogICAgfSwKICAgIC8qKg0KICAgICAqIEBuYW1lOuWFu+aKpOmDqOS7vQ0KICAgICAqLwogICAgYWRkTmF2aWdhdG9yUG9pbnQocG9pbnQpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBpZiAodGhhdC5uYXZpZ2F0b3JNYXJrZXIpIHRoYXQubmF2aWdhdG9yTWFya2VyLnJlbW92ZSgpOwogICAgICBpZiAodGhhdC5uYXZpZ2F0b3JNYXJrZXIyKSB0aGF0Lm5hdmlnYXRvck1hcmtlcjIucmVtb3ZlKCk7CiAgICAgIGxldCBlbGUgPSB0aGF0LmluaXRNYXJrZXIocmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC9ldmVudFBvaW50LnBuZycpLCAyNSwgMjUpOwogICAgICBsZXQgbWFya2VyID0gbWFwT2JqLm1hcEluc3RhbmNlLm5ld01hcmtlcih7CiAgICAgICAgZWxlbWVudDogZWxlCiAgICAgIH0pOwogICAgICBpZiAocG9pbnQpIHsKICAgICAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICBsZXQgZWxlMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgZWxlMi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0icGFkZGluZzogMHB4IDVweDsgYm9yZGVyOiAxcHggc29saWQgI2VlZTsgYm9yZGVyLXJhZGl1czogMnB4OyBiYWNrZ3JvdW5kOiAjZmZmOyBjb2xvcjogIzJBODNFNiI+5Y675a+86IiqPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICBsZXQgbWFya2VyMiA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgICAgICBlbGVtZW50OiBlbGUyLAogICAgICAgICAgICBvZmZzZXQ6IFszNSwgMF0KICAgICAgICAgIH0pOwogICAgICAgICAgZWxlMi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgdGhhdC5uYXZpZ2F0b3JNYXJrZXIyLnJlbW92ZSgpOwogICAgICAgICAgICB0aGF0LiRlbWl0KCdnb1RvTmF2aWdhdG9yJywgcG9pbnQpOwogICAgICAgICAgfSk7CiAgICAgICAgICBtYXJrZXIyLnNldExuZ0xhdChwb2ludCkuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgICAgICB0aGF0Lm5hdmlnYXRvck1hcmtlcjIgPSBtYXJrZXIyOwogICAgICAgIH0pOwogICAgICAgIG1hcmtlci5zZXRMbmdMYXQocG9pbnQpLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApOwogICAgICAgIHRoYXQubmF2aWdhdG9yTWFya2VyID0gbWFya2VyOwogICAgICAgIHRoYXQuJGVtaXQoJ2dldE5hdmlnYXRvclBvaW50JywgcG9pbnQpOwogICAgICB9CiAgICB9LAogICAgLy8g5rWL6LedCiAgICBhZGROYXZpZ2F0b3JQb2ludHNMaW5lKHBvaW50KSB7CiAgICAgIGlmIChwb2ludCkgewogICAgICAgIHRoaXMubWFya2Vyc0xpbmVQb2ludHMucHVzaChwb2ludCk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigiUG9pbnRzTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJQb2ludHNMYXllciIpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJQb2ludFNvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJQb2ludFNvdXJjZSIpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoIkxpbmVMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoIkxpbmVMYXllciIpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJMaW5lU291cmNlIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoIkxpbmVTb3VyY2UiKTsKICAgICAgICBsZXQgdGVtcCA9IHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlIiwKICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgIHR5cGU6ICJQb2ludCIsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBwb2ludAogICAgICAgICAgfSwKICAgICAgICAgIHByb3BlcnRpZXM6IHt9CiAgICAgICAgfTsKICAgICAgICB0aGlzLm5hdk1hcmtlcnMucHVzaCh0ZW1wKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCdQb2ludFNvdXJjZScsIHsKICAgICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgZmVhdHVyZXM6IHRoaXMubmF2TWFya2VycwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgJ2lkJzogJ1BvaW50c0xheWVyJywKICAgICAgICAgICd0eXBlJzogJ3N5bWJvbCcsCiAgICAgICAgICAnc291cmNlJzogJ1BvaW50U291cmNlJywKICAgICAgICAgICdsYXlvdXQnOiB7CiAgICAgICAgICAgICdpY29uLWltYWdlJzogJ2RpeVBvaW50JywKICAgICAgICAgICAgJ2ljb24tc2l6ZSc6IDAuOAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmICh0aGlzLm5hdk1hcmtlcnMubGVuZ3RoID4gMSkgewogICAgICAgICAgbGV0IGRpc3RhbmNlID0gdHVyZi5kaXN0YW5jZSh0dXJmLnBvaW50KHRoaXMubWFya2Vyc0xpbmVQb2ludHNbdGhpcy5uYXZNYXJrZXJzLmxlbmd0aCAtIDJdKSwgdHVyZi5wb2ludCh0aGlzLm1hcmtlcnNMaW5lUG9pbnRzW3RoaXMubmF2TWFya2Vycy5sZW5ndGggLSAxXSkpICogMTAwMDsKICAgICAgICAgIHRoaXMuYWxsRGlzdGFuY2UgPSBOdW1iZXIoZGlzdGFuY2UpICsgTnVtYmVyKHRoaXMuYWxsRGlzdGFuY2UpOwogICAgICAgICAgbGV0IGZlYXR1cmUgPSB7CiAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlIiwKICAgICAgICAgICAgZ2VvbWV0cnk6IHsKICAgICAgICAgICAgICB0eXBlOiAiTGluZVN0cmluZyIsCiAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHRoaXMubWFya2Vyc0xpbmVQb2ludHMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICAgIGRpc3RhbmNlOiB0aGlzLmFsbERpc3RhbmNlLnRvRml4ZWQoMikgKyAnIG0nCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmZlYXR1cmVzTGluZS5wdXNoKGZlYXR1cmUpOwogICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgnTGluZVNvdXJjZScsIHsKICAgICAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgICBmZWF0dXJlczogdGhpcy5mZWF0dXJlc0xpbmUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICAgICAgJ2lkJzogJ0xpbmVMYXllcicsCiAgICAgICAgICAgICd0eXBlJzogJ2xpbmUnLAogICAgICAgICAgICAnc291cmNlJzogJ0xpbmVTb3VyY2UnLAogICAgICAgICAgICBwYWludDogewogICAgICAgICAgICAgICJsaW5lLWNvbG9yIjogJyNGRjRBNEEnLAogICAgICAgICAgICAgICJsaW5lLXdpZHRoIjogMwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAnUG9pbnRzTGF5ZXInKTsKICAgICAgICAgIGxldCBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iY29sb3I6ICNGRjRBNEEiPiR7KHRoaXMuYWxsRGlzdGFuY2UgLyAxMDAwKS50b0ZpeGVkKDIpICsgJyBrbSd9PC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICBsZXQgbWFya2VyID0gbWFwT2JqLm1hcEluc3RhbmNlLm5ld01hcmtlcih7CiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZSwKICAgICAgICAgICAgb2Zmc2V0OiBbMCwgMTVdCiAgICAgICAgICB9KTsKICAgICAgICAgIG1hcmtlci5zZXRMbmdMYXQocG9pbnQpLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApOwogICAgICAgICAgdGhpcy5saW5lTWFya2Vycy5wdXNoKG1hcmtlcik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5rWL6Z2iCiAgICBhZGROYXZpZ2F0b3JQb2ludHNBcmVhKHBvaW50KSB7CiAgICAgIGlmICh0aGlzLmZpcnN0UG9pbnQubGVuZ3RoID09PSAwKSB0aGlzLmZpcnN0UG9pbnQgPSBwb2ludDsKICAgICAgaWYgKHBvaW50KSB7CiAgICAgICAgdGhpcy5tYXJrZXJzQXJlYVBvaW50cy5wdXNoKHBvaW50KTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJQb2ludEFMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoIlBvaW50QUxheWVyIik7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigiQXJlYXNMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoIkFyZWFzTGF5ZXIiKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgiUG9pbnRBU291cmNlIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoIlBvaW50QVNvdXJjZSIpOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJBcmVhc1NvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJBcmVhc1NvdXJjZSIpOwogICAgICAgIGxldCB0ZW1wID0gewogICAgICAgICAgdHlwZTogIkZlYXR1cmUiLAogICAgICAgICAgZ2VvbWV0cnk6IHsKICAgICAgICAgICAgdHlwZTogIlBvaW50IiwKICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHBvaW50CiAgICAgICAgICB9LAogICAgICAgICAgcHJvcGVydGllczoge30KICAgICAgICB9OwogICAgICAgIHRoaXMuYXJlYU1hcmtlcnMucHVzaCh0ZW1wKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCdQb2ludEFTb3VyY2UnLCB7CiAgICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICAgIGZlYXR1cmVzOiB0aGlzLmFyZWFNYXJrZXJzCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAnaWQnOiAnUG9pbnRBTGF5ZXInLAogICAgICAgICAgJ3R5cGUnOiAnc3ltYm9sJywKICAgICAgICAgICdzb3VyY2UnOiAnUG9pbnRBU291cmNlJywKICAgICAgICAgICdsYXlvdXQnOiB7CiAgICAgICAgICAgICdpY29uLWltYWdlJzogJ2RpeVBvaW50JywKICAgICAgICAgICAgJ2ljb24tc2l6ZSc6IDAuOAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGxldCBmZWF0dXJlID0gdGhpcy5tYXJrZXJzQXJlYVBvaW50cy5jb25jYXQoW3RoaXMuZmlyc3RQb2ludF0pOwogICAgICAgIGxldCBmZWF0dXJlcyA9IHR1cmYucG9seWdvbihbZmVhdHVyZV0pOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoJ0FyZWFzU291cmNlJywgewogICAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgICBmZWF0dXJlczogW2ZlYXR1cmVzXQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgJ2lkJzogJ0FyZWFzTGF5ZXInLAogICAgICAgICAgJ3R5cGUnOiAnZmlsbCcsCiAgICAgICAgICAnc291cmNlJzogJ0FyZWFzU291cmNlJywKICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICdmaWxsLWNvbG9yJzogJyNGRjRBNEEnLAogICAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC40CiAgICAgICAgICB9CiAgICAgICAgfSwgJ1BvaW50QUxheWVyJyk7CiAgICAgICAgbGV0IGRpc3RhbmNlID0gdHVyZi5hcmVhKGZlYXR1cmVzKTsKICAgICAgICBpZiAodGhpcy5hcmVhTWFya2VyKSB0aGlzLmFyZWFNYXJrZXIucmVtb3ZlKCk7CiAgICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iY29sb3I6ICNGRjRBNEEiPiR7KGRpc3RhbmNlIC8gMTAwMCAvIDEwMDApLnRvRml4ZWQoMikgKyAnIGttwrInfTwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgIGxldCBtYXJrZXIgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3TWFya2VyKHsKICAgICAgICAgIGVsZW1lbnQ6IGVsZSwKICAgICAgICAgIG9mZnNldDogWzAsIDE1XQogICAgICAgIH0pOwogICAgICAgIG1hcmtlci5zZXRMbmdMYXQocG9pbnQpLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApOwogICAgICAgIHRoaXMuYXJlYU1hcmtlciA9IG1hcmtlcjsKICAgICAgfQogICAgfSwKICAgIGFkZE5hdmlnYXRpb25Db250cm9sKCkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZENvbnRyb2wobmV3IG1hcGJveGdsLk5hdmlnYXRpb25Db250cm9sKCksICd0b3AtbGVmdCcpOwogICAgfSwKICAgIGFkZEZ1bGxzY3JlZW5Db250cm9sKCkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZENvbnRyb2wobmV3IG1hcGJveGdsLkZ1bGxzY3JlZW5Db250cm9sKCkpOwogICAgfSwKICAgIGFkZFNjYWxlQ29udHJvbCgpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRDb250cm9sKG5ldyBtYXBib3hnbC5TY2FsZUNvbnRyb2woKSwgImJvdHRvbS1yaWdodCIpOwogICAgfSwKICAgIGNsZWFyTmF2aWdhdG9yUG9pbnQoKSB7CiAgICAgIGlmICh0aGlzLm5hdmlnYXRvck1hcmtlcikgewogICAgICAgIHRoaXMubmF2aWdhdG9yTWFya2VyLnJlbW92ZSgpOwogICAgICB9CiAgICAgIDsKICAgICAgaWYgKHRoaXMubmF2aWdhdG9yTWFya2VyMikgewogICAgICAgIHRoaXMubmF2aWdhdG9yTWFya2VyMi5yZW1vdmUoKTsKICAgICAgfQogICAgICA7CiAgICAgIGlmICh0aGlzLmxpbmVNYXJrZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmxpbmVNYXJrZXJzLmZvckVhY2gobWFya2VyID0+IHsKICAgICAgICAgIG1hcmtlci5yZW1vdmUoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAodGhpcy5hcmVhTWFya2VyKSB0aGlzLmFyZWFNYXJrZXIucmVtb3ZlKCk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoIkxpbmVMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoIkxpbmVMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgiTGluZVNvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJMaW5lU291cmNlIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoIlBvaW50c0xheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigiUG9pbnRzTGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoInBvaW50U291cmNlIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoInBvaW50U291cmNlIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoIlBvaW50QUxheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigiUG9pbnRBTGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigiQXJlYXNMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoIkFyZWFzTGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoInBvaW50QVNvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJwb2ludEFTb3VyY2UiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoIkFyZWFzU291cmNlIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoIkFyZWFzU291cmNlIik7CiAgICAgIHRoaXMubmF2TWFya2VycyA9IFtdOwogICAgICB0aGlzLmxpbmVNYXJrZXJzID0gW107CiAgICAgIHRoaXMuZmVhdHVyZXNMaW5lID0gW107CiAgICAgIHRoaXMuYXJlYU1hcmtlcnMgPSBbXTsKICAgICAgdGhpcy5maXJzdFBvaW50ID0gW107CiAgICAgIHRoaXMubWFya2Vyc0xpbmVQb2ludHMgPSBbXTsKICAgICAgdGhpcy5tYXJrZXJzQXJlYVBvaW50cyA9IFtdOwogICAgICB0aGlzLmFsbERpc3RhbmNlID0gbnVsbDsKICAgIH0sCiAgICBlY2hvWWhEZXZlaWNlKHsKICAgICAgdW5jdXJlZCwKICAgICAgY3VyaW5nCiAgICB9LCBjYWxsYmFjaykgewogICAgICBpZiAoIW1hcE9iai5tYXBJbnN0YW5jZS5nZXRMYXllcigndW5jdXJlZExpbmUnKSkgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoJ3VuY3VyZWQnLCB7CiAgICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgICBpZDogInVuY3VyZWRMaW5lIiwKICAgICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICAgIHNvdXJjZTogInVuY3VyZWQiLAogICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgJ2xpbmUtd2lkdGgnOiAzLAogICAgICAgICAgICAnbGluZS1jb2xvcic6ICIjZmZhMDFlIgogICAgICAgICAgfQogICAgICAgIH0sICdjdXJlJyk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICAgIGlkOiAidW5jdXJlZFBvaW50IiwKICAgICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgICAgZmlsdGVyOiBbIj09IiwgJyR0eXBlJywgIlBvaW50Il0sCiAgICAgICAgICBzb3VyY2U6ICJ1bmN1cmVkIiwKICAgICAgICAgIGZpbHRlcjogWyc9PScsICckdHlwZScsICdQb2ludCddLAogICAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAgICdpY29uLXNpemUnOiAxLAogICAgICAgICAgICAnaWNvbi1pbWFnZSc6ICJldmVudFBvaW50IgogICAgICAgICAgfQogICAgICAgIH0sICdjdXJlJyk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgnY3VyaW5nJywgewogICAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgICAgaWQ6ICJjdXJpbmdMaW5lIiwKICAgICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICAgIHNvdXJjZTogImN1cmluZyIsCiAgICAgICAgICBwYWludDogewogICAgICAgICAgICAnbGluZS13aWR0aCc6IDEwLAogICAgICAgICAgICAnbGluZS1jb2xvcic6ICIjMzlkOThhIgogICAgICAgICAgfQogICAgICAgIH0sICdjdXJlJyk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICAgIGlkOiAiY3VyaW5nUG9pbnQiLAogICAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgICBmaWx0ZXI6IFsiPT0iLCAnJHR5cGUnLCAiUG9pbnQiXSwKICAgICAgICAgIHNvdXJjZTogImN1cmluZyIsCiAgICAgICAgICBmaWx0ZXI6IFsnPT0nLCAnJHR5cGUnLCAnUG9pbnQnXSwKICAgICAgICAgIGxheW91dDogewogICAgICAgICAgICAnaWNvbi1zaXplJzogMSwKICAgICAgICAgICAgJ2ljb24taW1hZ2UnOiAiZXZlbnRMaW5lIgogICAgICAgICAgfQogICAgICAgIH0sICdjdXJlJyk7CiAgICAgIH0KICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vZmYoJ2NsaWNrJywgdGhpcy5jYWxsYmFjayk7CiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub24oJ2NsaWNrJywgY2FsbGJhY2spOwogICAgICB9CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCd1bmN1cmVkJywgewogICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgZmVhdHVyZXM6IHVuY3VyZWQKICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCdjdXJpbmcnLCB7CiAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICBmZWF0dXJlczogY3VyaW5nCiAgICAgIH0pOwogICAgICB0aGlzLm1ha2VQb3NpdGlvbih1bmN1cmVkLmNvbmNhdChjdXJpbmcpKTsKICAgIH0sCiAgICBtYWtlUG9zaXRpb24oZmVhdHVyZXMpIHsKICAgICAgaWYgKGZlYXR1cmVzLmxlbmd0aCkgewogICAgICAgIGxldCBiYm94ID0gdHVyZi5iYm94KHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlcwogICAgICAgIH0pOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZml0Qm91bmRzKGJib3gsIHsKICAgICAgICAgIHBhZGRpbmc6IHsKICAgICAgICAgICAgdG9wOiAxMCwKICAgICAgICAgICAgYm90dG9tOiAyNSwKICAgICAgICAgICAgbGVmdDogMTUsCiAgICAgICAgICAgIHJpZ2h0OiA1CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5maXRCb3VuZHMoW1sxMjAuMzgxODg0ODQ0OTgwNDUsIDMwLjU2ODY4NTQ3NTc4MDg4XSwgWzExOS41MTU0OTA5NzU1NDI5NSwgMzAuMTc4MzU2OTg3NzIwNjEyXV0sIHsKICAgICAgICAgIGxpbmVhcjogZmFsc2UKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8v6LaF5Zu+5Yeg5L2V5p+l6K+iCiAgICBhc3luYyBnZXREYXRhV2l0aFNwYXRpYWwoewogICAgICBkYXRhc2V0TmFtZXMgPSB0aGlzLndzRGF0YWJhc2VOYW1lczEsCiAgICAgIGdlb21ldHJ5CiAgICB9KSB7CiAgICAgIHJldHVybiBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuZ2V0RGF0YVdpdGhTcGF0aWFsKHsKICAgICAgICBkYXRhc2V0TmFtZXMsCiAgICAgICAgZ2VvbWV0cnkKICAgICAgfSk7CiAgICB9LAogICAgLy/otoXlm77lh6DkvZXmnaHku7bmn6Xor6IKICAgIGFzeW5jIGdldERhdGFXaXRoU3BhdGlhbEF0dCh7CiAgICAgIGRhdGFzZXROYW1lcyA9IHRoaXMuZGF0YU5hbWVzLAogICAgICBnZW9tZXRyeSwKICAgICAgc3FsCiAgICB9KSB7CiAgICAgIHJldHVybiBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuZ2V0RGF0YVdpdGhTcGF0aWFsQXR0KHsKICAgICAgICBkYXRhc2V0TmFtZXMsCiAgICAgICAgZ2VvbWV0cnksCiAgICAgICAgc3FsCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGdldERhdGFXaXRoU3FsKHsKICAgICAgZGF0YXNldE5hbWVzID0gdGhpcy5kYXRhYmFzZU5hbWVzMSwKICAgICAgc3FsCiAgICB9KSB7CiAgICAgIHJldHVybiBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UuZ2V0RGF0YVdpdGhTcWwoZGF0YXNldE5hbWVzLCBzcWwpOwogICAgfSwKICAgIC8v5p+l6K+i54K55Ye75aSE54m55b6BCiAgICBxdWVyeVJlbmRlcmVkRmVhdHVyZXMoZSkgewogICAgICByZXR1cm4gbWFwT2JqLm1hcEluc3RhbmNlLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlKTsKICAgIH0sCiAgICAvL+i/m+WFpeWFu+aKpOWxleekuuWFu+aKpOmdouWMugogICAgc2hvd1BvbG9neShmZWF0dXJlcykgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCd5aFBvbG9neScsIHsKICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgIGZlYXR1cmVzCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICBpZDogInloUG9sb2d5IiwKICAgICAgICBzb3VyY2U6ICJ5aFBvbG9neSIsCiAgICAgICAgdHlwZTogImZpbGwiLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAnZmlsbC1jb2xvcic6ICIjMkE4M0U2IiwKICAgICAgICAgICdmaWxsLW9wYWNpdHknOiAwLjIKICAgICAgICB9CiAgICAgIH0sICd5aHBwcCcsICd1c2VyJyk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJ5aExpbmUiLAogICAgICAgIHNvdXJjZTogInloUG9sb2d5IiwKICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICdsaW5lLWNvbG9yJzogIiMyQTgzRTYiLAogICAgICAgICAgJ2xpbmUtd2lkdGgnOiAyCiAgICAgICAgfQogICAgICB9LCAneWhwcHAnLCAndXNlcicpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCd5aFBvbG9neTEnLCB7CiAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgIGlkOiAieWhQb2xvZ3kxIiwKICAgICAgICBzb3VyY2U6ICJ5aFBvbG9neTEiLAogICAgICAgIHR5cGU6ICJmaWxsIiwKICAgICAgICBwYWludDogewogICAgICAgICAgJ2ZpbGwtY29sb3InOiAiIzJBODNFNiIsCiAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC4yCiAgICAgICAgfQogICAgICB9LCAneWhwcHAnLCAndXNlcicpOwogICAgfSwKICAgIC8v5Yik5pat5piv5ZCm5Yiw6L6+5oyH5a6a6IyD5Zu0CiAgICBjaGVja1Bvc2l0aW9uKHBvaW50LCBmZWF0dXJlcykgewogICAgICB0aGlzLmRhdGFOYW1lcyA9IFtdOwogICAgICBsZXQgdGVtcEZlYXR1cmUgPSBmZWF0dXJlcy5maW5kKGZlYXR1cmUgPT4gdHVyZi5pbnNpZGUocG9pbnQsIGZlYXR1cmUpKTsKICAgICAgaWYgKHRlbXBGZWF0dXJlICYmIHRlbXBGZWF0dXJlLnByb3BlcnRpZXMgJiYgdGVtcEZlYXR1cmUucHJvcGVydGllcy5idXNpbmVzc1R5cGUgPT09ICfkvpvmsLQnKSB7CiAgICAgICAgdGhpcy5kYXRhTmFtZXMgPSB0aGlzLmdzRGF0YWJhc2VOYW1lczE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kYXRhTmFtZXMgPSB0aGlzLndzRGF0YWJhc2VOYW1lczE7CiAgICAgIH0KICAgICAgbGV0IHB0c1dpdGhpbiA9IHR1cmYud2l0aGluKHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW3R1cmYucG9pbnQocG9pbnQpXSksIHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oZmVhdHVyZXMpKTsKICAgICAgaWYgKHB0c1dpdGhpbi5mZWF0dXJlcy5sZW5ndGggIT09IDApIHsKICAgICAgICByZXR1cm4gZmVhdHVyZXMuZmluZChmZWF0dXJlID0+IHR1cmYuaW5zaWRlKHBvaW50LCBmZWF0dXJlKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIC8v55Sf5oiQMmtt5Li65Y2K5b6E55qE5ZyGLOW5tuafpeaJvuiuvuaWvQogICAgYXN5bmMgc2V0QnVmZmVyKHBvaW50LCByYWRpdXMgPSAwLjAzNSwgZmVhdHVyZSkgewogICAgICBsZXQgYnVmZmVyZWQgPSB0dXJmLmJ1ZmZlcih0dXJmLnBvaW50KHBvaW50KSwgcmFkaXVzLCAna2lsb21ldGVycycpOwogICAgICBpZiAoZmVhdHVyZSkgewogICAgICAgIHJldHVybiB0dXJmLmludGVyc2VjdChidWZmZXJlZCwgZmVhdHVyZSk7CiAgICAgIH0KICAgICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgneWhQb2xvZ3knLCd2aXNpYmlsaXR5Jywnbm9uZScpOwogICAgICAvLyBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgneWhQb2xvZ3kxJyx7CiAgICAgIC8vICAgdHlwZToiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAvLyAgIGZlYXR1cmVzOltidWZmZXJlZF0KICAgICAgLy8gfSk7CiAgICAgIHJldHVybiBidWZmZXJlZDsKICAgIH0sCiAgICAvL+WIsOi+vumUmeivr++8jOWbnumAgAogICAgcG9sb2d5QmFjaygpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgneWhQb2xvZ3kxJywgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KCd5aFBvbG9neScsICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKICAgIH0sCiAgICAvL+enu+mZpOWFu+aKpOaJgOaciemdouWMugogICAgcmVtb3ZlQWxsWUgoKSB7CiAgICAgIGlmIChtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgneWhQb2xvZ3kxJykpIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UucmVtb3ZlR3JvdXBMYXllcigneWhwcHAnKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UucmVtb3ZlU291cmNlKCd5aFBvbG9neTEnKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UucmVtb3ZlU291cmNlKCd5aFBvbG9neScpOwogICAgICB9CiAgICB9LAogICAgLy8g6LaF5Zu+6ZuG5ZCI5p+l6K+i6YCa6L+H566h5b6E57qn5Yir5ZKM54m55a6a55qE5pWw5o2u6ZuGCiAgICBhc3luYyBnZXREYXRhV2l0aFNwYXRpYWxBbmRQaXBlTGV2ZWwoewogICAgICBpbnNwQnVzaW5lc3NUeXBlLAogICAgICBnZW9tLAogICAgICBwaXBlTGV2ZWwKICAgIH0pIHsKICAgICAgbGV0IGRhdGFzZXROYW1lcyA9IFtdOwogICAgICBsZXQgaXNTdXBwbHkgPSBmYWxzZTsKICAgICAgc3dpdGNoIChpbnNwQnVzaW5lc3NUeXBlKSB7CiAgICAgICAgY2FzZSAiV0FURVJfU1VQUExZIjoKICAgICAgICAgIGRhdGFzZXROYW1lcyA9IHRoaXMuZ3NEYXRhYmFzZU5hbWVzOwogICAgICAgICAgaXNTdXBwbHkgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkFJX1dBVEVSIjoKICAgICAgICAgIGRhdGFzZXROYW1lcyA9IHRoaXMueXNEYXRhYmFzZU5hbWVzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUE9MTFVURURfV0FURVIiOgogICAgICAgICAgZGF0YXNldE5hbWVzID0gdGhpcy53c0RhdGFiYXNlTmFtZXM7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgZGF0YXNldE5hbWVzID0gdGhpcy5kYXRhYmFzZU5hbWVzOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgcmV0dXJuIGF3YWl0IG1hcE9iai5tYXBJbnN0YW5jZS5nZXREYXRhV2l0aFNwYXRpYWxBbmRQaXBlTGV2ZWwoewogICAgICAgIGRhdGFzZXROYW1lcywKICAgICAgICBnZW9tLAogICAgICAgIHBpcGVMZXZlbCwKICAgICAgICBpc1N1cHBseQogICAgICB9KTsKICAgIH0sCiAgICAvLyDnlLvljYrlvoTkuLpyYWRpdXPnmoTlnIbojIPlm7QKICAgIGRyYXdCdWZmZXIocG9pbnQsIHJhZGl1cyA9IDAuMDM1KSB7CiAgICAgIGxldCBidWZmZXJlZCA9IHR1cmYuYnVmZmVyKHBvaW50LCByYWRpdXMsIHsKICAgICAgICB1bml0OiAna2lsb21ldGVycycKICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5zZXRTb3VyY2VEYXRhKCdidWZmZXJlZCcsIHsKICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgIGZlYXR1cmVzOiBbYnVmZmVyZWRdCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOa3u+WKoOe8k+WGsuWMuueahOWbvuWxggogICAgYWRkQnVmZmVyTGF5ZXIoKSB7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoJ2J1ZmZlcmVkJywgewogICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICBpZDogImJ1ZmZlckxheWVyIiwKICAgICAgICB0eXBlOiAiZmlsbCIsCiAgICAgICAgc291cmNlOiAiYnVmZmVyZWQiLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAiZmlsbC1jb2xvciI6ICIjRkZCNkMxIiwKICAgICAgICAgICJmaWxsLW9wYWNpdHkiOiAwLjUKICAgICAgICB9CiAgICAgIH0sICdsaWdodExheWVyJyk7CiAgICB9LAogICAgYXN5bmMgYWRkSW5zcExheWVyKCkgewogICAgICBhd2FpdCBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogInJhbmdlUGlwZXNMYXllciIsCiAgICAgICAgc291cmNlOiAiMTU0OTAwMDY4NjM4MDg3OTg3MyIsCiAgICAgICAgInNvdXJjZS1sYXllciI6ICIxNTQ5MDAwNjg2MzgwODc5ODczIiwKICAgICAgICAibWV0YWRhdGEiOiB7CiAgICAgICAgICAibGF5ZXJJZCI6ICIxNTQ5MDAwNjg2MzgwODc5ODczIgogICAgICAgIH0sCiAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAidmlzaWJpbGl0eSI6ICJub25lIgogICAgICAgIH0sCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgIC8vICJsaW5lLWNvbG9yIjogWwogICAgICAgICAgLy8gICAnY2FzZScsCiAgICAgICAgICAvLyAgIFsnYm9vbGVhbicsIFsnZmVhdHVyZS1zdGF0ZScsICdpbnNwJ10sIGZhbHNlXSwKICAgICAgICAgIC8vICAgIiMwMDk0NWUiLAogICAgICAgICAgLy8gICAiI2ZmMDAwMCIKICAgICAgICAgIC8vIF0sCiAgICAgICAgICAibGluZS1jb2xvciI6ICIjNDRCQTVBIiwKICAgICAgICAgICJsaW5lLXdpZHRoIjogMwogICAgICAgIH0KICAgICAgfSwgJ21hcEJvcmRlcicpOwogICAgfSwKICAgIC8vIOa3u+WKoOW3oeajgOiMg+WbtCzmmoLml7bkuLpwb2x5Z29u57G75Z6LCiAgICBhZGRSYW5nZUxheWVyKGdlb20sIGlkeCkgewogICAgICBpZiAoIW1hcE9iai5tYXAuZ2V0U291cmNlKCJyYW5nZVNvdXJjZV8iICsgaWR4KSkgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoInJhbmdlU291cmNlXyIgKyBpZHgsIHsKICAgICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgZmVhdHVyZXM6IFtnZW9tXQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICghbWFwT2JqLm1hcC5nZXRMYXllcigicmFuZ2VMYXllcl8iICsgaWR4KSkgewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgICBpZDogInJhbmdlTGF5ZXJfIiArIGlkeCwKICAgICAgICAgIHR5cGU6ICJmaWxsIiwKICAgICAgICAgIHNvdXJjZTogInJhbmdlU291cmNlXyIgKyBpZHgsCiAgICAgICAgICAibWV0YWRhdGEiOiB7CiAgICAgICAgICAgICJsYXllcklkIjogInJhbmdlU291cmNlXyIgKyBpZHgKICAgICAgICAgIH0sCiAgICAgICAgICBwYWludDogewogICAgICAgICAgICAiZmlsbC1jb2xvciI6ICIjNUFEOEU1IgogICAgICAgICAgICAvLyAiZmlsbC1vcGFjaXR5IjogMQogICAgICAgICAgfQogICAgICAgIH0sICdrZXlwb2ludHNMYXllcicpOwogICAgICB9CiAgICB9LAogICAgLy8g5qC55o2u566h5b6E57qn5Yir44CB6IyD5Zu044CB5Lia5Yqh57G75Z6L5p+l6K+i6IyD5Zu05YaF55qE55+i6YeP55Om54mHCiAgICBhc3luYyBhZGRSYW5nZU1WVChwYXJhbXMpIHsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQucmVtb3ZlUmFuZ2VNVlQoKTsKICAgICAgLyoqDQogICAgICBjb25zdCBnZW9tU3RyID0gcGFyYW1zLmdlb207DQogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGF0LiRhcGkucG9zdEFjdGlvbigiL3loc3ctcG9zdGdpcy9hZGRRdWVyeVBsYW5lIiwgZ2VvbVN0cik7DQogICAgICBsZXQgaWQ7DQogICAgICBpZiAocmVzLnN0YXR1cykgew0KICAgICAgICBpZCA9IHJlcy5kYXRhIHx8ICcxMzk4NTQ4OTc3ODM3Njc0NDk4JzsNCiAgICAgIH0NCiAgICAgIGxldCBwaXBlVHlwZTsNCiAgICAgIHN3aXRjaCAocGFyYW1zLmluc3BCdXNpbmVzc1R5cGUpIHsNCiAgICAgICAgY2FzZSAiV0FURVJfU1VQUExZIjoNCiAgICAgICAgICBwaXBlVHlwZSA9ICLkvpvmsLTnrqHnur8iOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJSQUlfV0FURVIiOg0KICAgICAgICAgIHBpcGVUeXBlID0gIumbqOawtOeuoee6vyI7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIlBPTExVVEVEX1dBVEVSIjoNCiAgICAgICAgICBwaXBlVHlwZSA9ICLmsaHmsLTnrqHnur8iOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJPUklHSU5fV0FURVIiOg0KICAgICAgICAgIHBpcGVUeXBlID0gIua6kOawtOeuoee6vyI7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIlJJVkVSX1dBVEVSIjoNCiAgICAgICAgICBwaXBlVHlwZSA9ICLmjpLmsZ/nrqEiOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgICAgLy8gY29uc3QgcmVzMiA9IGF3YWl0IHRoYXQuJGFwaS5nZXRBY3Rpb24oIi8iKQ0KICAgICAgbGV0IHVybDsNCiAgICAgIGlmIChwYXJhbXMuY2FsaWJlcnMpIHsNCiAgICAgICAgdXJsID0gYmFzZVVybC51cmxfY29uZmlnICsgYC95aHN3LXBvc3RnaXMvZ2V0QWxsTGluZUhhc2hJbnNwL3t4fS97eX0ve3p9P3JhbmdJZD0ke2lkfSZjYWxpYnJlcz0ke3BhcmFtcy5jYWxpYmVyc30mdHlwZT0ke3BpcGVUeXBlfSZlbmREYXRlPSR7cGFyYW1zLmVuZERhdGV9YDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBjYWxpYmVyU3RyID0gd2luZG93LmJ0b2EoSlNPTi5zdHJpbmdpZnkocGFyYW1zLmNhbGliZXJWT1MpKTsNCiAgICAgICAgdXJsID0gYmFzZVVybC51cmxfY29uZmlnICsgYC95aHN3LXBvc3RnaXMvZ2V0QWxsTGluZUluZm9JbnNwTXVsdGlwbGUve3h9L3t5fS97en0/aWQ9JHtpZH0mY2FsaWJlclZPTGlzdFN0cj0ke2NhbGliZXJTdHJ9JnR5cGU9JHtwaXBlVHlwZX0mZW5kRGF0ZT0ke3BhcmFtcy5lbmREYXRlfWA7DQogICAgICB9DQogICAgICAqLwogICAgICBsZXQgdXJsID0gYmFzZVVybC51cmxfY29uZmlnICsgYG9wcy1pbnNwZWN0aW9uL2dldEFsbExpbmVUYXNrL3t4fS97eX0ve3p9P3Rhc2tJZD0ke3BhcmFtcy50YXNrSWR9YDsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgicmFuZ2VQaXBlVmVjdG9yIiwgewogICAgICAgIHR5cGU6ICJ2ZWN0b3IiLAogICAgICAgIHRpbGVzOiBbdXJsXSwKICAgICAgICBwcm9tb3RlSWQ6ICdndWlkJwogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJyYW5nZVBpcGVzTGF5ZXIiLAogICAgICAgIHNvdXJjZTogInJhbmdlUGlwZVZlY3RvciIsCiAgICAgICAgInNvdXJjZS1sYXllciI6ICJsaW5lIiwKICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICJsaW5lLWNvbG9yIjogWydjYXNlJywgWydib29sZWFuJywgWydmZWF0dXJlLXN0YXRlJywgJ2luc3AnXSwgZmFsc2VdLCAiIzAwOTQ1ZSIsICIjZmYwMDAwIl0sCiAgICAgICAgICAibGluZS13aWR0aCI6IDMKICAgICAgICB9CiAgICAgIH0sICdrZXlwb2ludHNMYXllcicpOwogICAgICAvLyDpgInkuK3lvZPliY3nrqHnur/lm77lsYIKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgiY3VySW5zcExpbmVTb3VyY2UiLCB7CiAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogImN1ckluc3BMaW5lTGF5ZXIiLAogICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICBzb3VyY2U6ICJjdXJJbnNwTGluZVNvdXJjZSIsCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICJsaW5lLWNvbG9yIjogIiM0MjY0RkIiLAogICAgICAgICAgImxpbmUtd2lkdGgiOiA4CiAgICAgICAgfQogICAgICB9LCAia2V5cG9pbnRzTGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJjdXJJbnNwUG9pbnRMYXllciIsCiAgICAgICAgdHlwZTogImNpcmNsZSIsCiAgICAgICAgc291cmNlOiAiY3VySW5zcExpbmVTb3VyY2UiLAogICAgICAgIGZpbHRlcjogWyc9PScsICckdHlwZScsICdQb2ludCddLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAiY2lyY2xlLWNvbG9yIjogIiNGRkEwMUUiLAogICAgICAgICAgImNpcmNsZS1yYWRpdXMiOiA4CiAgICAgICAgfQogICAgICB9LCAia2V5cG9pbnRzTGF5ZXIiKTsKICAgICAgLy8g5a+5566h57q/6L+b6KGM5LiK5oqlCiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub24oJ2NsaWNrJywgJ3JhbmdlUGlwZXNMYXllcicsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgbGV0IGZlYXR1cmVzID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZS5wb2ludCwgewogICAgICAgICAgbGF5ZXJzOiBbInJhbmdlUGlwZXNMYXllciJdCiAgICAgICAgfSk7CiAgICAgICAgdGhhdC5zZXRMaW5lR2VvU291cmNlKFtmZWF0dXJlc1swXV0sICJjdXJJbnNwTGluZVNvdXJjZSIpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDnp7vpmaTlt6Hmo4DnrqHnur9NVlQKICAgIHJlbW92ZVJhbmdlTVZUKCkgewogICAgICAvLyDlpoLmnpzlrZjlnKjojIPlm7TnmoRNVlTlm77lsYLvvIzlsLHnp7vpmaTor6Xlm77lsYIKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigicmFuZ2VQaXBlc0xheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigicmFuZ2VQaXBlc0xheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJyYW5nZVBpcGVWZWN0b3IiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgicmFuZ2VQaXBlVmVjdG9yIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoImN1ckluc3BMaW5lTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJjdXJJbnNwTGluZUxheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoImN1ckluc3BQb2ludExheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigiY3VySW5zcFBvaW50TGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoImN1ckluc3BMaW5lU291cmNlIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoImN1ckluc3BMaW5lU291cmNlIik7CiAgICAgIC8vIOa4heepuuatpOasoeW3oeajgOS/neWtmOeahOimgee0oAogICAgICByZWNvcmRGZWF0dXJlcyA9IFtdOwogICAgfSwKICAgIC8vIOiuvue9ruW3oeajgOiMg+WbtAogICAgc2V0UmFuZ2VMYXllcihyYW5nZUxpc3QsIGlmRW1lcmdlbmN5ID0gZmFsc2UpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICByYW5nZUxpc3QuZm9yRWFjaChyYW5nZSA9PiB7CiAgICAgICAgLy8g5aaC5p6c5Li65bqU5oCl5Lu75Yqh77yM5LiN5Yqg6L29566h57q/5pWw5o2uCiAgICAgICAgaWYgKCFpZkVtZXJnZW5jeSkgewogICAgICAgICAgLy8g5pu/5o2i5Li65paw55qE6LaF5Zu+5p+l6K+i5pa55rOVCiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICAgIHRhc2tJZDogcmFuZ2UudGFza0lkID8gcmFuZ2UudGFza0lkIDogdW5kZWZpbmVkLAogICAgICAgICAgICBjYWxpYmVyczogcmFuZ2UuY2FsaWJlcnMgPyByYW5nZS5jYWxpYmVycyA6IHVuZGVmaW5lZCwKICAgICAgICAgICAgY2FsaWJlclZPUzogcmFuZ2UuY2FsaWJlclZPUyA/IHJhbmdlLmNhbGliZXJWT1MgOiB1bmRlZmluZWQsCiAgICAgICAgICAgIGVuZERhdGU6IHJhbmdlLmVuZERhdGUgPyByYW5nZS5lbmREYXRlIDogdW5kZWZpbmVkLAogICAgICAgICAgICBpbnNwQnVzaW5lc3NUeXBlOiByYW5nZS5pbnNwQnVzaW5lc3NUeXBlLAogICAgICAgICAgICBnZW9tOiByYW5nZS5nZW9tZXRyeSwKICAgICAgICAgICAgcGlwZUxldmVsOiByYW5nZS5waXBlTGV2ZWwKICAgICAgICAgIH07CiAgICAgICAgICAvLyDpq5jkuq7nrqHnur/mm7/mjaLnn6Lph4/nk6bniYcKICAgICAgICAgIHRoaXMuYWRkUmFuZ2VNVlQocGFyYW1zKTsKCiAgICAgICAgICAvLyB0aGF0LmdldERhdGFXaXRoU3BhdGlhbEFuZFBpcGVMZXZlbChwYXJhbXMpCiAgICAgICAgICAvLyAgIC50aGVuKGRldmljZXMgPT4gewogICAgICAgICAgLy8gICAgIGlmIChkZXZpY2VzLmRhdGEuZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgLy8gICAgICAgbGV0IGZlYXR1cmVzID0gZGV2aWNlcy5kYXRhLmZlYXR1cmVzOwogICAgICAgICAgLy8gICAgICAgdGhhdC5oYW5kbGVJbnNwRGF0YShmZWF0dXJlcywgZmFsc2UsICFpZkVtZXJnZW5jeSk7CiAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgLy8gICB9KQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoYXQuc2V0TGluZUdlb1NvdXJjZShyYW5nZUxpc3QsICJyYW5nZVNvdXJjZSIpOwogICAgfSwKICAgIC8vIOWcqOWbvuWxguS4rea3u+WKoOWFs+mUrueCue+8jOS8mOWMluaAp+iDvQogICAgYWRkS2V5UG9pbnRMYXllcigpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRTb3VyY2UoJ2tleXBvaW50cycsIHsKICAgICAgICB0eXBlOiAnZ2VvanNvbicsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0sCiAgICAgICAgcHJvbW90ZUlkOiAnZW5nSWQnCiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogJ2tleXBvaW50c0xheWVyJywKICAgICAgICB0eXBlOiAnc3ltYm9sJywKICAgICAgICBzb3VyY2U6ICdrZXlwb2ludHMnLAogICAgICAgIGxheW91dDogewogICAgICAgICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAgICAgICAiaWNvbi1pZ25vcmUtcGxhY2VtZW50IjogdHJ1ZSwKICAgICAgICAgICJpY29uLWltYWdlIjogWydjYXNlJywgWyc9PScsIFsnZ2V0JywgJ2lzR3JlZW4nXSwgdHJ1ZV0sICfmraPluLgnLCBbJz09JywgWydnZXQnLCAnaXNSZWQnXSwgdHJ1ZV0sICflvILluLgnLCBbJz09JywgWydnZXQnLCAnaXNCbHVlJ10sIHRydWVdLCAn5pyq5beh5qOAJywgJ+acquW3oeajgCddLAogICAgICAgICAgJ2ljb24tc2l6ZSc6IDAuNCwKICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiBmYWxzZSwKICAgICAgICAgICdpY29uLWlnbm9yZS1wbGFjZW1lbnQnOiBmYWxzZQogICAgICAgIH0KICAgICAgfSwgJ21hcEJvcmRlcicpOwogICAgICBtYXBPYmoubWFwLm9uKCdjbGljaycsICdrZXlwb2ludHNMYXllcicsIHRoaXMuc2lnbkluQnVmZmVyKTsKICAgIH0sCiAgICBzaWduSW5CdWZmZXIoZSkgewogICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0YXJ0UmVjb3JkTGluZXMnKSA9PSAnc3RhcnQnKSB7CiAgICAgICAgbGV0IGZlYXR1cmVzID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZS5wb2ludCwgewogICAgICAgICAgbGF5ZXJzOiBbImtleXBvaW50c0xheWVyIl0KICAgICAgICB9KTsKICAgICAgICBpZiAoZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgZmVhdCA9IEpTT04ucGFyc2UoZmVhdHVyZXNbMF0ucHJvcGVydGllcy5mZWF0dXJlKTsKICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcihmZWF0Lmdlb20pOwogICAgICAgICAgYnVzLiRlbWl0KCJzdGFydFNpZ25JbiIsIGZlYXQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBUb2FzdCh7CiAgICAgICAgICBtZXNzYWdlOiAn5beh5qOA5pyq5byA5aeL77yM5peg5rOV5omT5Y2h562+5YiwJywKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgc2V0S2V5UG9pbnRMYXllcihmZWF0dXJlcykgewogICAgICBsZXQgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCdrZXlwb2ludHMnKSkgewogICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEoJ2tleXBvaW50cycsIHsKICAgICAgICAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgZmVhdHVyZXM6IGZlYXR1cmVzCiAgICAgICAgICB9KTsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgIH0KICAgICAgfSwgMTAwKTsKICAgIH0sCiAgICAvLyDmt7vliqDlhbPplK7ngrltYXJrZXIKICAgIGFkZEtleVBvaW50TWFya2VyKGZlYXR1cmUsIGlmRGV0YWlsID0gZmFsc2UpIHsKICAgICAgbGV0IHBvc2l0aW9uID0gZmVhdHVyZS5lbmdHZW9tLmNvb3JkaW5hdGVzOwogICAgICBsZXQgbmFtZSA9IGZlYXR1cmUuZW5nTnVtIHx8ICLlhbPplK7ngrnlkI3np7AiOwogICAgICBjb25zdCBzcmMgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvaW5zcGVjdGlvbi9pY29uX2tleV9wb2ludF9waW5rLnBuZycpOwogICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8aW1nIGlkPSJrZXlwb2ludF8ke2ZlYXR1cmUuZW5nSWR9IiBzcmM9IiR7c3JjfSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KICAgICAgICBgOwogICAgICBsZXQgbWFya2VyID0gbWFwT2JqLm1hcEluc3RhbmNlLm5ld01hcmtlcih7CiAgICAgICAgZWxlbWVudDogZWxlLAogICAgICAgIG9mZnNldDogWzAsIC0xMF0KICAgICAgfSk7CiAgICAgIC8vIGNvbnN0IG1hcmtlckhUTUwgPSBgCiAgICAgIC8vICAgICA8ZGl2PgogICAgICAvLyAgICAgICA8ZGl2CiAgICAgIC8vICAgICAgICAgc3R5bGU9ImZsb2F0OiBsZWZ0OyIKICAgICAgLy8gICAgICAgPgogICAgICAvLyAgICAgICAgIDxzdHJvbmc+JHtuYW1lfTwvc3Ryb25nPgogICAgICAvLyAgICAgICA8L2Rpdj4KICAgICAgLy8gICAgICAgPGJ1dHRvbgogICAgICAvLyAgICAgICAgIGlkPSJidG5fJHtmZWF0dXJlLmVuZ0lkfSIKICAgICAgLy8gICAgICAgICBzdHlsZT0iY29sb3I6ICNmZmY7YmFja2dyb3VuZC1jb2xvcjogIzJBODNFNjtib3JkZXItY29sb3I6ICNmZmY7Ym9yZGVyLXdpZHRoOjBweDsiCiAgICAgIC8vICAgICAgID7nrb7liLA8L2J1dHRvbj4KICAgICAgLy8gICAgIDwvZGl2PgogICAgICAvLyAgIGAKICAgICAgLy8gY29uc3QgbWFya2VySFRNTERldGFpbCA9IGAKICAgICAgLy8gICAgIDxkaXY+CiAgICAgIC8vICAgICAgIDxkaXYKICAgICAgLy8gICAgICAgICBzdHlsZT0iZmxvYXQ6IGxlZnQ7IgogICAgICAvLyAgICAgICA+CiAgICAgIC8vICAgICAgICAgPHN0cm9uZz4ke25hbWV9PC9zdHJvbmc+CiAgICAgIC8vICAgICAgIDwvZGl2PgogICAgICAvLyAgICAgPC9kaXY+CiAgICAgIC8vICAgYAogICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKICAgICAgLy8gICAuc2V0UG9wdXAobWFwT2JqLm1hcEluc3RhbmNlLm5ld1BvcHVwKHsgb2Zmc2V0OiBbMCwgLTE1XSwgY2xvc2VCdXR0b246IGZhbHNlIH0pCiAgICAgIC8vICAgICAuc2V0SFRNTChpZkRldGFpbCA/IG1hcmtlckhUTUxEZXRhaWwgOiBtYXJrZXJIVE1MKSkKICAgICAgLy8gICAuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgIC8vIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICBpZiAoIWlmRGV0YWlsKSB7CiAgICAgICAgLy8g5a+55oyJ6ZKu5re75Yqg5LqL5Lu277yM6L+b6KGM6LCD5Ye6562+5Yiw5qGGCiAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJ0bl8iICsgZmVhdHVyZS5lbmdJZCkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZSkgPT4gewogICAgICAgIC8vICAgYnVzLiRlbWl0KCJzdGFydFNpZ25JbiIsIGZlYXR1cmUpOwogICAgICAgIC8vICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAvLyB9KQogICAgICAgIC8vIOWvuWltZ+a3u+WKoOeCueWHu+S6i+S7tgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJrZXlwb2ludF8iICsgZmVhdHVyZS5lbmdJZCkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBlID0+IHsKICAgICAgICAgIC8vIOiOt+WPluW9k+WJjeeCueWHu+eahOWFs+mUrueCuQogICAgICAgICAgbGV0IGNsaWNrS2V5UG9pbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgia2V5cG9pbnRfIiArIGZlYXR1cmUuZW5nSWQpOwogICAgICAgICAgaWYgKGNsaWNrS2V5UG9pbnQpIHsKICAgICAgICAgICAgaWYgKGNsaWNrS2V5UG9pbnQgPT0gdGhpcy5jdXJyZW50S2V5UG9pbnQpIHsKICAgICAgICAgICAgICAvLyDlpoLmnpzlvZPliY3ngrnlh7vnmoTlhbPplK7ngrnkuI7lhajlsYDnmoTlvZPliY3lhbPplK7ngrnnm7jlkIzvvIzljbPph43lpI3ngrnlh7vlj5bmtojmlL7lpKfmiJbov5vooYzmlL7lpKcKICAgICAgICAgICAgICBpZiAoY2xpY2tLZXlQb2ludC5zdHlsZS53aWR0aCA9PSAiMjRweCIpIHsKICAgICAgICAgICAgICAgIGNsaWNrS2V5UG9pbnQuc3R5bGUud2lkdGggPSAiNDBweCI7CiAgICAgICAgICAgICAgICBjbGlja0tleVBvaW50LnN0eWxlLmhlaWdodCA9ICI0MHB4IjsKICAgICAgICAgICAgICAgIC8vIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgICAgICAgICAgdGhpcy5kcmF3QnVmZmVyKGZlYXR1cmUuZW5nR2VvbSk7CiAgICAgICAgICAgICAgICBidXMuJGVtaXQoInN0YXJ0U2lnbkluIiwgZmVhdHVyZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNsaWNrS2V5UG9pbnQuc3R5bGUud2lkdGggPSAiMjRweCI7CiAgICAgICAgICAgICAgICBjbGlja0tleVBvaW50LnN0eWxlLmhlaWdodCA9ICIyNHB4IjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEtleVBvaW50KSB7CiAgICAgICAgICAgICAgICAvLyDliJ3lp4vmg4XlhrXkuIvvvIzmmoLkuI3orr7nva7lhajlsYDnmoTlvZPliY3lhbPplK7ngrnnmoTlpKflsI/vvIzlpoLmnpzlt7Lnu4/lrZjlnKjlhajlsYDlvZPliY3lhbPplK7ngrnvvIzliJnlsIblhbbmgaLlpI3ljp/nirYKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEtleVBvaW50LnN0eWxlLndpZHRoID0gIjI0cHgiOwogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50S2V5UG9pbnQuc3R5bGUuaGVpZ2h0ID0gIjI0cHgiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyDmlL7lpKflvZPliY3ngrnlh7vnmoTlhbPplK7ngrkKICAgICAgICAgICAgICBjbGlja0tleVBvaW50LnN0eWxlLndpZHRoID0gIjQwcHgiOwogICAgICAgICAgICAgIGNsaWNrS2V5UG9pbnQuc3R5bGUuaGVpZ2h0ID0gIjQwcHgiOwogICAgICAgICAgICAgIC8vIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgICAgICAgIHRoaXMuZHJhd0J1ZmZlcihmZWF0dXJlLmVuZ0dlb20pOwogICAgICAgICAgICAgIGJ1cy4kZW1pdCgic3RhcnRTaWduSW4iLCBmZWF0dXJlKTsKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRLZXlQb2ludCA9IGNsaWNrS2V5UG9pbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVLZXlQb2ludE1hcmtlcihpZHMpIHsKICAgICAgaWRzLmZvckVhY2goaWQgPT4gewogICAgICAgIGxldCBjdXJyZW50RWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImtleXBvaW50XyIgKyBpZCk7CiAgICAgICAgaWYgKGN1cnJlbnRFbGUpIHsKICAgICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaUueWPmOWFs+mUrueCuW1hcmtlcueahOminOiJsu+8jOabv+aNouWbvueJh+WcsOWdgCwgc3RhdHVz5Li6dHJ1ZeaYvuekuue7v+iJsu+8jOS4umZhbHNl5pi+56S65Lu96ImyCiAgICBjaGFuZ2VLZXlQb2ludE1hcmtlcihlbmdJZCwgc3RhdHVzKSB7CiAgICAgIGNvbnN0IHNyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9pbnNwZWN0aW9uL2ljb25fa2V5X3BvaW50X3BpbmsucG5nJyk7CiAgICAgIGNvbnN0IHNyYzIgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvaW5zcGVjdGlvbi9pY29uX2tleV9wb2ludF9ncmVlbi5wbmcnKTsKICAgICAgbGV0IGNsaWNrS2V5UG9pbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgia2V5cG9pbnRfIiArIGVuZ0lkKTsKICAgICAgaWYgKGNsaWNrS2V5UG9pbnQpIHsKICAgICAgICBpZiAoc3RhdHVzKSB7CiAgICAgICAgICBjbGlja0tleVBvaW50LnNyYyA9IHNyYzI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNsaWNrS2V5UG9pbnQuc3JjID0gc3JjOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOenu+mZpOaJgOacieW6lOaApeW3oeajgG1hcmtlcgogICAgcmVtb3ZlSW5zcEVtZU1hcmtlcihpZHMpIHsKICAgICAgaWRzLmZvckVhY2goaWQgPT4gewogICAgICAgIC8vIOWmguaenOWtmOWcqGlk5Li6ZXZlbnRPYmpfb25l55qE5YWD57Sg77yM5YiZ5Yig6Zmk5q2k5YWD57Sg6YeN5paw5Yib5bu677yM5L+d5oyB5YWo5bGA5Y+q5pyJ5LiA5Liq5q2k5YWD57SgCiAgICAgICAgbGV0IGN1cnJlbnRFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZW1lXyIgKyBpZCk7CiAgICAgICAgaWYgKGN1cnJlbnRFbGUpIHsKICAgICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOa3u+WKoOW6lOaApeW3oeajgOeahG1hcmtlcgogICAgYWRkSW5zcEVtZU1hcmtlcihmZWF0dXJlLCBpZkRldGFpbCA9IGZhbHNlKSB7CiAgICAgIGxldCBwb3NpdGlvbjsKICAgICAgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvbHlnb24nIHx8IGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ011bHRpUG9seWdvbicpIHsKICAgICAgICBjb25zdCBjZW50ZXIgPSB0dXJmLmNlbnRlcihmZWF0dXJlLmdlb21ldHJ5KTsKICAgICAgICBwb3NpdGlvbiA9IGNlbnRlci5nZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgfSBlbHNlIGlmIChmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdMaW5lU3RyaW5nJykgewogICAgICAgIGNvbnN0IGNlbnRlciA9IHR1cmYuY2VudGVyKGZlYXR1cmUuZ2VvbWV0cnkpOwogICAgICAgIHBvc2l0aW9uID0gY2VudGVyLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICB9IGVsc2UgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvaW50JykgewogICAgICAgIHBvc2l0aW9uID0gZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgfQogICAgICBpZiAoIXBvc2l0aW9uKSByZXR1cm47CiAgICAgIGxldCBuYW1lID0gZmVhdHVyZS5wcm9wZXJ0aWVzLm5hbWUgfHwgIuW3oeajgOiMg+WbtCI7CiAgICAgIGNvbnN0IHNyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9pbnNwZWN0aW9uL2ljb25fZW1lcmdlbmN5X3BvaW50LnBuZycpOwogICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8aW1nIGlkPSJlbWVfJHtmZWF0dXJlLmlkfSIgc3JjPSIke3NyY30iIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PC9pbWc+CiAgICAgICAgYDsKICAgICAgbGV0IG1hcmtlciA9IG1hcE9iai5tYXBJbnN0YW5jZS5uZXdNYXJrZXIoewogICAgICAgIGVsZW1lbnQ6IGVsZSwKICAgICAgICBvZmZzZXQ6IFswLCAtNV0KICAgICAgfSk7CiAgICAgIGNvbnN0IG1hcmtlckhUTUwgPSBgCiAgICAgICAgICA8ZGl2IGlkPSJiYXNlXyR7ZmVhdHVyZS5pZH0iPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgYDsKICAgICAgaWYgKCFpZkRldGFpbCkgewogICAgICAgIG1hcmtlci5zZXRMbmdMYXQocG9zaXRpb24pLnNldFBvcHVwKG1hcE9iai5tYXBJbnN0YW5jZS5uZXdQb3B1cCh7CiAgICAgICAgICBvZmZzZXQ6IFswLCAtMTVdLAogICAgICAgICAgY2xvc2VCdXR0b246IGZhbHNlCiAgICAgICAgfSkuc2V0SFRNTChtYXJrZXJIVE1MKSkuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgICAgbWFya2VyLnRvZ2dsZVBvcHVwKCk7CiAgICAgICAgbGV0IGNvdW50VGltZSA9IG5ldyBDb3VudFRpbWVQb3AoewogICAgICAgICAgcHJvcHNEYXRhOiB7CiAgICAgICAgICAgIHJlc3RUaW1lOiBmZWF0dXJlLnJlc3RUaW1lCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY291bnRUaW1lLiRtb3VudChgI2Jhc2VfJHtmZWF0dXJlLmlkfWApOwogICAgICAgIC8vIOWvuWltZ+a3u+WKoOeCueWHu+S6i+S7tgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbWVfIiArIGZlYXR1cmUuaWQpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZSA9PiB7CiAgICAgICAgICAvLyDojrflj5blvZPliY3ngrnlh7vnmoTlhbPplK7ngrkKICAgICAgICAgIGxldCBjbGlja0VtZU1hcmtlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbWVfIiArIGZlYXR1cmUuaWQpOwogICAgICAgICAgaWYgKGNsaWNrRW1lTWFya2VyKSB7CiAgICAgICAgICAgIGlmIChjbGlja0VtZU1hcmtlciA9PSB0aGlzLmN1cnJlbnRFbWVNYXJrZXIpIHsKICAgICAgICAgICAgICBpZiAoY2xpY2tFbWVNYXJrZXIuc3R5bGUud2lkdGggPT0gIjI0cHgiKSB7CiAgICAgICAgICAgICAgICBjbGlja0VtZU1hcmtlci5zdHlsZS53aWR0aCA9ICI0MHB4IjsKICAgICAgICAgICAgICAgIGNsaWNrRW1lTWFya2VyLnN0eWxlLmhlaWdodCA9ICI0MHB4IjsKICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgic3RhcnRFbWVTaWduSW4iLCBmZWF0dXJlKTsKICAgICAgICAgICAgICAgIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjbGlja0VtZU1hcmtlci5zdHlsZS53aWR0aCA9ICIyNHB4IjsKICAgICAgICAgICAgICAgIGNsaWNrRW1lTWFya2VyLnN0eWxlLmhlaWdodCA9ICIyNHB4IjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEVtZU1hcmtlcikgewogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RW1lTWFya2VyLnN0eWxlLndpZHRoID0gIjI0cHgiOwogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RW1lTWFya2VyLnN0eWxlLmhlaWdodCA9ICIyNHB4IjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2xpY2tFbWVNYXJrZXIuc3R5bGUud2lkdGggPSAiNDBweCI7CiAgICAgICAgICAgICAgY2xpY2tFbWVNYXJrZXIuc3R5bGUuaGVpZ2h0ID0gIjQwcHgiOwogICAgICAgICAgICAgIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgICAgICAgICAgIGJ1cy4kZW1pdCgic3RhcnRFbWVTaWduSW4iLCBmZWF0dXJlKTsKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFbWVNYXJrZXIgPSBjbGlja0VtZU1hcmtlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOW3oeajgOS6i+S7tm1hcmtlcgogICAgYWRkSW5zcEV2ZW50TWFya2VyKGZlYXR1cmUpIHsKICAgICAgbGV0IHBvc2l0aW9uOwogICAgICBpZiAoZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnUG9seWdvbicgfHwgZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnTXVsdGlQb2x5Z29uJykgewogICAgICAgIGNvbnN0IGNlbnRlciA9IHR1cmYuY2VudGVyKGZlYXR1cmUuZ2VvbWV0cnkpOwogICAgICAgIHBvc2l0aW9uID0gY2VudGVyLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICB9IGVsc2UgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSB7CiAgICAgICAgY29uc3QgY2VudGVyID0gdHVyZi5jZW50ZXIoZmVhdHVyZS5nZW9tZXRyeSk7CiAgICAgICAgcG9zaXRpb24gPSBjZW50ZXIuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7CiAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5nZW9tZXRyeS50eXBlID09PSAnUG9pbnQnKSB7CiAgICAgICAgcG9zaXRpb24gPSBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICB9CiAgICAgIGlmICghcG9zaXRpb24pIHJldHVybjsKICAgICAgY29uc3Qgc3JjID0gcmVxdWlyZSgnQC9hc3NldHMvaW1nL2luc3BlY3Rpb24vaWNvbl9ldmVudF9tYXAucG5nJyk7CiAgICAgIGxldCBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgZWxlLmlubmVySFRNTCA9IGAKICAgICAgICAgIDxpbWcgaWQ9ImV2ZW50XyR7ZmVhdHVyZS5pZH0iIHNyYz0iJHtzcmN9IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPjwvaW1nPgogICAgICAgIGA7CiAgICAgIGxldCBtYXJrZXIgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3TWFya2VyKHsKICAgICAgICBlbGVtZW50OiBlbGUsCiAgICAgICAgb2Zmc2V0OiBbMCwgMTBdCiAgICAgIH0pOwogICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5zZXRQb3B1cChtYXBPYmoubWFwSW5zdGFuY2UubmV3UG9wdXAoewogICAgICAgIG9mZnNldDogWzAsIDBdLAogICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZQogICAgICB9KS5zZXRIVE1MKGAKICAgICAgICAgICAgPGRpdiBzdHlsZT0iY29sb3I6ICMzMzMzMzM7Ij4KICAgICAgICAgICAgICA8c3Ryb25nPiR7dGhpcy5ldmVudFR5cGVMaXN0W2ZlYXR1cmUuZXZlbnRUeXBlXSB8fCAn5LiK5oql5LqL5Lu2J308L3N0cm9uZz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICBgKSkuYWRkVG8obWFwT2JqLm1hcEluc3RhbmNlLm1hcCk7CiAgICAgIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgfSwKICAgIC8vIOa3u+WKoOW3oeajgOS6i+S7tuWcqOWbvuWxguS4rQogICAgYWRkSW5zcEV2ZW50TGF5ZXIoZmVhdHVyZXMpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBtYXBPYmoubWFwLmxvYWRJbWFnZShyZXF1aXJlKCdAL2Fzc2V0cy9pbWcvaW5zcGVjdGlvbi9pY29uX2V2ZW50X21hcC5wbmcnKSwgZnVuY3Rpb24gKGVycm9yLCBpbWFnZSkgewogICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7CiAgICAgICAgaWYgKCFtYXBPYmoubWFwLmhhc0ltYWdlKCdldmVudC1tYXJrZXInKSkgewogICAgICAgICAgbWFwT2JqLm1hcC5hZGRJbWFnZSgnZXZlbnQtbWFya2VyJywgaW1hZ2UpOwogICAgICAgIH0KICAgICAgICBtYXBPYmoubWFwLmFkZFNvdXJjZSgnZXZlbnRQb2ludHMnLCB7CiAgICAgICAgICAndHlwZSc6ICdnZW9qc29uJywKICAgICAgICAgICdkYXRhJzogewogICAgICAgICAgICAndHlwZSc6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAgICdmZWF0dXJlcyc6IGZlYXR1cmVzCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAnaWQnOiAnZXZlbnRQb2ludHNMYXllcicsCiAgICAgICAgICAndHlwZSc6ICdzeW1ib2wnLAogICAgICAgICAgJ3NvdXJjZSc6ICdldmVudFBvaW50cycsCiAgICAgICAgICAnbGF5b3V0JzogewogICAgICAgICAgICAidmlzaWJpbGl0eSI6ICdub25lJywKICAgICAgICAgICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAgICAgICAgIC8v6Ieq5Yqo6YG/6K6p5bGe5oCnCiAgICAgICAgICAgICJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOiB0cnVlLAogICAgICAgICAgICAnaWNvbi1pbWFnZSc6ICdldmVudC1tYXJrZXInLAogICAgICAgICAgICAnaWNvbi1zaXplJzogMC40LAogICAgICAgICAgICAnaWNvbi1vZmZzZXQnOiBbMCwgMTBdCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICAvLyBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCdjbGljaycsICdldmVudFBvaW50c0xheWVyJywgZnVuY3Rpb24gKGUpIHsKICAgICAgLy8gICBsZXQgZmVhdHVyZXMgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLnBvaW50LCB7CiAgICAgIC8vICAgICBsYXllcnM6IFsiZXZlbnRQb2ludHNMYXllciJdCiAgICAgIC8vICAgfSk7CiAgICAgIC8vICAgbGV0IGV2ZW50VHlwZSA9ICIiOwogICAgICAvLyAgIGZlYXR1cmVzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIC8vICAgICBpZiAoaXRlbS5wcm9wZXJ0aWVzICYmIGl0ZW0ucHJvcGVydGllcy5ldmVudFR5cGUpIHsKICAgICAgLy8gICAgICAgZXZlbnRUeXBlICs9IHRoYXQuZXZlbnRUeXBlTGlzdFtpdGVtLnByb3BlcnRpZXMuZXZlbnRUeXBlXSArICIgIjsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9KTsKICAgICAgLy8gICBsZXQgcG9wdXAgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3UG9wdXAoeyBvZmZzZXQ6IFswLCAtNV0sIGNsb3NlQnV0dG9uOiBmYWxzZSB9KQogICAgICAvLyAgICAgLnNldExuZ0xhdChlLmxuZ0xhdCkKICAgICAgLy8gICAgIC5zZXRIVE1MKGA8aDM+JHtldmVudFR5cGV9PC9oMz5gKQogICAgICAvLyAgICAgLmFkZFRvKG1hcE9iai5tYXBJbnN0YW5jZS5tYXApCiAgICAgIC8vIH0pCiAgICB9LAogICAgLy8g5re75Yqg5LiK5oql5a+56LGh55qEbWFya2VyCiAgICBhZGRFdmVudE9iak1hcmtlcihmZWF0dXJlLCB0eXBlLCBncmlkT2JqKSB7CiAgICAgIGxldCBwb3NpdGlvbjsKICAgICAgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvbHlnb24nIHx8IGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ011bHRpUG9seWdvbicpIHsKICAgICAgICBjb25zdCBjZW50ZXIgPSB0dXJmLmNlbnRlcihmZWF0dXJlLmdlb21ldHJ5KTsKICAgICAgICBwb3NpdGlvbiA9IGNlbnRlci5nZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgfSBlbHNlIGlmIChmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdMaW5lU3RyaW5nJykgewogICAgICAgIGNvbnN0IGNlbnRlciA9IHR1cmYuY2VudGVyKGZlYXR1cmUuZ2VvbWV0cnkpOwogICAgICAgIHBvc2l0aW9uID0gY2VudGVyLmdlb21ldHJ5LmNvb3JkaW5hdGVzOwogICAgICB9IGVsc2UgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvaW50JykgewogICAgICAgIHBvc2l0aW9uID0gZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgfQogICAgICB0aGlzLmN1cnJlbnRQb2ludCA9IGZlYXR1cmU7CiAgICAgIHRoaXMuY3VycmVudFBvaW50LnRhc2tJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhc2tJZDsKICAgICAgdGhpcy5jdXJyZW50UG9pbnQuZ3JpZElkID0gZ3JpZE9iai5ncmlkSWQ7CiAgICAgIHRoaXMuY3VycmVudFBvaW50LmdyaWROYW1lID0gZ3JpZE9iai5ncmlkTmFtZTsKICAgICAgdGhpcy5jdXJyZW50UG9pbnQuY29kZSA9IGZlYXR1cmUucHJvcGVydGllcy5tYW5ob2xlX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLmNvbWJfY29kZSB8fCAnJzsKICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYml6VHlwZSA9IGZlYXR1cmUucHJvcGVydGllcy5tYW5ob2xlX3R5cGUgfHwgJyc7CiAgICAgIHRoaXMuY3VycmVudFBvaW50LmxuZyA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07CiAgICAgIHRoaXMuY3VycmVudFBvaW50LmxhdCA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV07CiAgICAgIC8vIOimgee0oOaJgOWcqOWbvuWxgklE5ZKM5bGe5oCn5L+h5oGvCiAgICAgIHRoaXMuY3VycmVudFBvaW50LmxheWVySUQgPSBmZWF0dXJlLmxheWVyLmlkOwogICAgICB0aGlzLmN1cnJlbnRQb2ludC5sYXllclR5cGUgPSBmZWF0dXJlLmxheWVyLnR5cGU7CiAgICAgIHRoaXMuY3VycmVudFBvaW50LnByb3BlcnRpZXMgPSBmZWF0dXJlLnByb3BlcnRpZXM7CiAgICAgIC8vIOW6leWbvuimgee0oG5hbWVfbG9jYWzmiJborr7mlr3opoHntKByb2FkX25hbWUsaWQKICAgICAgdGhpcy5jdXJyZW50UG9pbnQucm9hZF9uYW1lID0gZmVhdHVyZS5wcm9wZXJ0aWVzLnJvYWRfbmFtZTsKICAgICAgdGhpcy5jdXJyZW50UG9pbnQuaWQgPSBmZWF0dXJlLnByb3BlcnRpZXMuaWQ7CiAgICAgIHRoaXMuY3VycmVudFBvaW50LmNvZGUgPSBmZWF0dXJlLnByb3BlcnRpZXMubWFuaG9sZV9jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5nYXRlX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLm91dGxldF9jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5jb21iX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLnZhbHZlX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLnB1bXBfc3RhdGlvbl9jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5wbGFudF9jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5wdW1wX2NvZGUgfHwgZmVhdHVyZS5wcm9wZXJ0aWVzLmZpcmVfY29ja19jb2RlIHx8IGZlYXR1cmUucHJvcGVydGllcy5zdGFydF9jb2RlICsgJywnICsgZmVhdHVyZS5wcm9wZXJ0aWVzLmVuZF9jb2RlIHx8ICcnOwogICAgICAvLyDopoHntKDlr7nosaHnsbvlnovvvIjkuJrliqHnsbvlnosv6K6+5pa957G75Z6L77yJCiAgICAgIHN3aXRjaCAoZmVhdHVyZS5sYXllci5pZCkgewogICAgICAgIC8vIOmbqOawtAogICAgICAgIGNhc2UgInJkX21hcF9jb21iIjoKICAgICAgICAgIC8vY29tYuS4gOWumuaYr+mbqOawtOWPowogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICfpm6jmsLQnOwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+mbqOawtOWPoyc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJyZF9tYXBfb3V0ZmFsbCI6CiAgICAgICAgICAvL+aOkuaUvuWPoyAxLembqOawtO+8myAyLeaxoeawtO+8myAzLeWQiOa1ge+8myA0LeWFtuS7lgogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9IGZlYXR1cmUucHJvcGVydGllcy5waXBlX3R5cGU7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn5o6S5pS+5Y+jJzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInJkX21hcF9tYW5ob2xlIjoKICAgICAgICAgIC8v5qOA5p+l5LqVICAxLembqOawtO+8mzIt5rGh5rC0CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gZmVhdHVyZS5wcm9wZXJ0aWVzLm1hbmhvbGVfdHlwZTsKICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICfmo4Dmn6XkupUnOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicmRfbWFwX2dhdGUiOgogICAgICAgICAgLy/pl7jpl6ggMS3pm6jmsLTvvJsgMi3msaHmsLTvvJsgMy3lkIjmtYHvvJsgNC3lhbbku5YKICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSBmZWF0dXJlLnByb3BlcnRpZXMucGlwZV90eXBlOwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+mXuOmXqCc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJyZF9tYXBfZHJhaW5waXBlX3lzX2JpZyI6CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+mbqOawtCc7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn6Zuo5rC0566h57q/JzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInJkX21hcF9kcmFpbnBpcGVfeXNfc21hbGwiOgogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICfpm6jmsLQnOwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+mbqOawtOeuoee6vyc7CiAgICAgICAgICBicmVhazsKICAgICAgICAvLyDmsaHmsLQKICAgICAgICBjYXNlICJyZF9tYXBfZHJhaW5waXBlX3dzX2JpZyI6CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+axoeawtCc7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn5rGh5rC0566h57q/JzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInJkX21hcF9kcmFpbnBpcGVfd3Nfc21hbGwiOgogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICfmsaHmsLQnOwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+axoeawtOeuoee6vyc7CiAgICAgICAgICBicmVhazsKICAgICAgICAvLyDnu5nmsLQKICAgICAgICBjYXNlICJtYXBfc3VwcGx5X2ZpcmVoeWRyYW50IjoKICAgICAgICAgIC8v5raI54Gr5qCT5LiA5a6a5piv57uZ5rC0CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+e7meawtCc7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn5raI54Gr5qCTJzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIm1hcF9zdXBwbHlfdmFsdmUiOgogICAgICAgICAgLy/pmIDpl6h2YWx2ZeS4gOWumuaYr+e7meawtAogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICfnu5nmsLQnOwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+mYgOmXqCc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJtYXBfc3VwcGx5X3BpcGVfZGlzdHJpYnV0ZSI6CiAgICAgICAgICAvL+mFjeawtOeuoee6vwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICfnu5nmsLQnOwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ+mFjeawtOeuoee6vyc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJtYXBfc3VwcGx5X3BpcGVfZGVsaXZlcnkiOgogICAgICAgICAgLy/ovpPmsLTnrqHnur8KICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSAnc3VwcGx5JzsKICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICfovpPmsLTnrqHnur8nOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAibWFwX3N1cHBseV9waXBlX2NpcmN1bGF0aW5nIjoKICAgICAgICAgIC8v5Zue5rC0566h57q/CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5iaWdUeXBlID0gJ+e7meawtCc7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludC5zbWFsbFR5cGUgPSAn5Zue5rC0566h57q/JzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIm1hcF93YXRlcndvcmsiOgogICAgICAgICAgLy/kvpvmsLTljoIKICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSAn57uZ5rC0JzsKICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICfkvpvmsLTljoInOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy8g5YaN55Sf5rC0CiAgICAgICAgY2FzZSAibWFwX3JlY3ljbGVfcGlwZSI6CiAgICAgICAgICAvL+WGjeeUn+awtOeuoee6vwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuYmlnVHlwZSA9ICflho3nlJ/msLQnOwogICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnQuc21hbGxUeXBlID0gJ3BpcGVsaW5lJzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIm1hcF93YXRlcndvcmsiOgogICAgICAgICAgLy/lho3nlJ/msLTljoIKICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LmJpZ1R5cGUgPSAn5YaN55Sf5rC0JzsKICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50LnNtYWxsVHlwZSA9ICflho3nlJ/msLTljoInOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY29uc3Qgc3JjID0gcmVxdWlyZShgQC9hc3NldHMvaW1nL2xlZ2VuZC/kuovku7bkuIrmiqUucG5nYCk7CiAgICAgIC8vIOWmguaenOWtmOWcqGlk5Li6ZXZlbnRPYmpfb25l55qE5YWD57Sg77yM5YiZ5Yig6Zmk5q2k5YWD57Sg6YeN5paw5Yib5bu677yM5L+d5oyB5YWo5bGA5Y+q5pyJ5LiA5Liq5q2k5YWD57SgCiAgICAgIGxldCBjdXJyZW50RWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV2ZW50T2JqX29uZSIpOwogICAgICBpZiAoY3VycmVudEVsZSkgewogICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgfQogICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8aW1nIGlkPSJldmVudE9ial9vbmUiIHNyYz0iJHtzcmN9IiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiPgogICAgICAgIGA7CiAgICAgIGxldCBtYXJrZXIgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3TWFya2VyKHsKICAgICAgICBlbGVtZW50OiBlbGUKICAgICAgfSk7CiAgICAgIG1hcmtlci5zZXRMbmdMYXQocG9zaXRpb24pLnNldFBvcHVwKG1hcE9iai5tYXBJbnN0YW5jZS5uZXdQb3B1cCh7CiAgICAgICAgb2Zmc2V0OiBbMCwgLTddLAogICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZQogICAgICB9KS5zZXRIVE1MKGA8ZGl2IGlkPSJkZXZpY2VEZXRhaWwiPjwvZGl2PmApKS5hZGRUbyhtYXBPYmoubWFwKTsKICAgICAgbGV0IHBvcCA9IG5ldyBQb3B1cEl0ZW0oewogICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgZGV2aWNlQ29kZTogdGhpcy5jdXJyZW50UG9pbnQuY29kZSwKICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICBpc0RldmljZTogdHJ1ZSwKICAgICAgICAgIGZ1bjogdGhpcy5nb1RvRGV0YWlsCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHBvcC4kbW91bnQoJyNkZXZpY2VEZXRhaWwnKTsKICAgICAgfSk7CiAgICAgIG1hcmtlci50b2dnbGVQb3B1cCgpOwogICAgfSwKICAgIGdvVG9EZXRhaWwodHlwZSkgewogICAgICBpZiAodHlwZSA9PSAnZXZlbnQnKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ2FkZFByb2JsZW1JbmRleCcsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBtc2c6IHRoaXMuY3VycmVudFBvaW50LAogICAgICAgICAgICB0b2tlbjogdGhpcy5mb3JtVG9rZW4sCiAgICAgICAgICAgIHRhc2tJZDogdGhpcy4kcm91dGUucXVlcnkudGFza0lkCiAgICAgICAgICB9LAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHR5cGU6ICdhZGQnCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ2FkZEZsYXdzJywKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIG1zZzogdGhpcy5jdXJyZW50UG9pbnQsCiAgICAgICAgICAgIHRva2VuOiB0aGlzLmZvcm1Ub2tlbiwKICAgICAgICAgICAgdGFza0lkOiB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQKICAgICAgICAgIH0sCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgdHlwZTogJ2FkZCcKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOenu+mZpOS4iuaKpeS6i+S7tueahOWvueixoW1hcmtlcgogICAgcmVtb3ZlRXZlbnRPYmpNYXJrZXIoKSB7CiAgICAgIC8vIOWmguaenOWtmOWcqGlk5Li6ZXZlbnRPYmpfb25l55qE5YWD57Sg77yM5YiZ5Yig6Zmk5q2k5YWD57Sg6YeN5paw5Yib5bu677yM5L+d5oyB5YWo5bGA5Y+q5pyJ5LiA5Liq5q2k5YWD57SgCiAgICAgIGxldCBjdXJyZW50RWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV2ZW50T2JqX29uZSIpOwogICAgICBpZiAoY3VycmVudEVsZSkgewogICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgICAvLyBidXMuJGVtaXQoInJlcG9ydEluc3BFdmVudCIsIHt9LCBmYWxzZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliqDovb3lt6Hmo4DkurrnmoQx5YWs6YeM5Lul5YaF55qE566h57q/5pWw5o2uCiAgICBhZGRJbnNwQnVmZmVyRGF0YShwb3NpdGlvbiwgcmFkaXVzID0gMC41KSB7CiAgICAgIGxldCBidWZmZXJlZCA9IHR1cmYuYnVmZmVyKHBvc2l0aW9uLCByYWRpdXMsICdraWxvbWV0ZXJzJyk7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBpbnNwQnVzaW5lc3NUeXBlOiBwb3NpdGlvbi5pbnNwQnVzaW5lc3NUeXBlLAogICAgICAgIGdlb206IGJ1ZmZlcmVkLmdlb21ldHJ5LAogICAgICAgIHBpcGVMZXZlbDogcG9zaXRpb24ucGlwZUxldmVsCiAgICAgICAgLy8gcGlwZUxldmVsOiB7CiAgICAgICAgLy8gICBwaXBlTWF4OiBudWxsLAogICAgICAgIC8vICAgcGlwZU1pbjogbnVsbAogICAgICAgIC8vIH0KICAgICAgICAvLyBwaXBlTGV2ZWw6IG51bGwKICAgICAgfTsKICAgICAgLy8gdGhpcy5nZXREYXRhV2l0aFNwYXRpYWwoeyBnZW9tZXRyeTogYnVmZmVyZWQuZ2VvbWV0cnl9KQogICAgICB0aGlzLmdldERhdGFXaXRoU3BhdGlhbEFuZFBpcGVMZXZlbChwYXJhbXMpLnRoZW4oZGV2aWNlcyA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coImRldmljZXM9PT4iLCBkZXZpY2VzKTsKICAgICAgICBpZiAoZGV2aWNlcy5kYXRhLmZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGxldCBmZWF0dXJlcyA9IGRldmljZXMuZGF0YS5mZWF0dXJlczsKICAgICAgICAgIHRoaXMuaGFuZGxlSW5zcERhdGEoZmVhdHVyZXMsIHRydWUsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOi/lOWbnnJhZGl1c+S4uuWNiuW+hOiMg+WbtOeahOW3peeoi+WvueixoeaVsOaNrgogICAgYXN5bmMgZ2V0SW5zcERhdGFJblJhbmdlKHBvc2l0aW9uLCByYWRpdXMgPSAwLjAzNSkgewogICAgICBsZXQgYnVmZmVyZWQgPSB0dXJmLmJ1ZmZlcihwb3NpdGlvbiwgcmFkaXVzLCAna2lsb21ldGVycycpOwogICAgICAvLyBjb25zdCBkZXZpY2VzID0gYXdhaXQgdGhpcy5nZXREYXRhV2l0aFNwYXRpYWwoe2dlb21ldHJ5OiBidWZmZXJlZC5nZW9tZXRyeX0pOwogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgaW5zcEJ1c2luZXNzVHlwZTogcG9zaXRpb24uaW5zcEJ1c2luZXNzVHlwZSwKICAgICAgICBnZW9tOiBidWZmZXJlZC5nZW9tZXRyeSwKICAgICAgICAvLyBwaXBlTGV2ZWw6IHBvc2l0aW9uLnBpcGVMZXZlbAogICAgICAgIC8vIHBpcGVMZXZlbDogewogICAgICAgIC8vICAgcGlwZU1heDogbnVsbCwKICAgICAgICAvLyAgIHBpcGVNaW46IG51bGwKICAgICAgICAvLyB9CiAgICAgICAgcGlwZUxldmVsOiBudWxsCiAgICAgIH07CiAgICAgIGNvbnN0IGRldmljZXMgPSBhd2FpdCB0aGlzLmdldERhdGFXaXRoU3BhdGlhbEFuZFBpcGVMZXZlbChwYXJhbXMpOwogICAgICBsZXQgZmVhdHVyZXNEYXRhID0gW107CiAgICAgIGlmIChkZXZpY2VzLmRhdGEuZmVhdHVyZXMubGVuZ3RoID4gMCkgewogICAgICAgIGxldCBmZWF0dXJlcyA9IGRldmljZXMuZGF0YS5mZWF0dXJlczsKICAgICAgICBmZWF0dXJlcy5tYXAoaXRlbSA9PiB7CiAgICAgICAgICBsZXQgcGFyYW1zT2JqID0ge307CiAgICAgICAgICBsZXQgZmllbGROYW1lcyA9IGl0ZW0uZmllbGROYW1lczsKICAgICAgICAgIGxldCBmaWVsZFZhbHVlcyA9IGl0ZW0uZmllbGRWYWx1ZXM7CiAgICAgICAgICBsZXQgbHhuSW5kZXggPSBmaWVsZE5hbWVzLmZpbmRJbmRleChpdCA9PiBpdCA9PSAiTFhOIik7CiAgICAgICAgICBsZXQgcGlwZUluZGV4ID0gZmllbGROYW1lcy5maW5kSW5kZXgoaXQgPT4gaXQgPT0gIlBJUEVUWVBFIik7CiAgICAgICAgICBsZXQgcHJvcGVydGllcyA9IGx4bkluZGV4ID8gc2hvd1Byb3BlcnRpZXMyW2Ake2ZpZWxkVmFsdWVzW3BpcGVJbmRleF19YF0gOiBwaXBlSW5kZXggPyBzaG93UHJvcGVydGllczJbYCR7ZmllbGRWYWx1ZXNbcGlwZUluZGV4XX1gXSA6IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZE5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosIGAke2ZpZWxkTmFtZXNbaV19YCwgZmllbGRWYWx1ZXNbaV0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGZpZWxkTmFtZXMuZmluZEluZGV4KGl0ID0+IGl0ID09ICJMRU5HVEgiKSA+IC0xKSB7CiAgICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosICJVTklUIiwgIuexsyIpOwogICAgICAgICAgICB0aGlzLiRzZXQocGFyYW1zT2JqLCAiTEVOR1RIIiwgZmllbGRWYWx1ZXNbZmllbGROYW1lcy5maW5kSW5kZXgoaSA9PiBpID09ICJMRU5HVEgiKV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHBhcmFtc09iaiwgIlVOSVQiLCAi5LiqIik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRzZXQocGFyYW1zT2JqLCAiSUQiLCBpdGVtLklEKTsKICAgICAgICAgIGxldCB0ZW1wR2VvbWV0cnkgPSB0dXJmLmZlYXR1cmUoewogICAgICAgICAgICB0eXBlOiBpdGVtLmdlb21ldHJ5LnR5cGUgPT09ICJMSU5FIiA/ICJMaW5lU3RyaW5nIiA6ICJQb2ludCIsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBpdGVtLmdlb21ldHJ5LnBvaW50cy5tYXAocG9pbnQgPT4gW3BvaW50LngsIHBvaW50LnldKQogICAgICAgICAgfSwgcGFyYW1zT2JqKTsKICAgICAgICAgIHRoaXMuJHNldCh0ZW1wR2VvbWV0cnksICJpZCIsIGl0ZW0uSUQpOwogICAgICAgICAgZmVhdHVyZXNEYXRhLnB1c2godGVtcEdlb21ldHJ5KTsKICAgICAgICAgIGxldCBnZW9tZXRyeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGVtcEdlb21ldHJ5KSk7CiAgICAgICAgICB0aGlzLiRzZXQocGFyYW1zT2JqLCBgZ2VvbWV0cnlgLCBnZW9tZXRyeSk7CiAgICAgICAgICByZXR1cm4gcGFyYW1zT2JqOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBmZWF0dXJlc0RhdGE7CiAgICB9LAogICAgLy8g6L+U5ZuecmFkaXVz5Li65Y2K5b6E6IyD5Zu055qE5bel56iL5a+56LGh5pWw5o2uCiAgICBhc3luYyBnZXRJbnNwRGF0YUluUmFuZ2VUaWxlKHBvc2l0aW9uLCByYWRpdXMgPSAwLjAzNSkgewogICAgICBsZXQgcGlwZVR5cGU7CiAgICAgIHN3aXRjaCAocG9zaXRpb24uaW5zcEJ1c2luZXNzVHlwZSkgewogICAgICAgIGNhc2UgIldBVEVSX1NVUFBMWSI6CiAgICAgICAgICBwaXBlVHlwZSA9ICLkvpvmsLTnrqHnur8iOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkFJX1dBVEVSIjoKICAgICAgICAgIHBpcGVUeXBlID0gIumbqOawtOeuoee6vyI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJQT0xMVVRFRF9XQVRFUiI6CiAgICAgICAgICBwaXBlVHlwZSA9ICLmsaHmsLTnrqHnur8iOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiT1JJR0lOX1dBVEVSIjoKICAgICAgICAgIHBpcGVUeXBlID0gIua6kOawtOeuoee6vyI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSSVZFUl9XQVRFUiI6CiAgICAgICAgICBwaXBlVHlwZSA9ICLmjpLmsZ/nrqEiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBnZW9tUG9pbnQ6IHBvc2l0aW9uLmdlb21ldHJ5LAogICAgICAgIHBpcGVUeXBlOiBwaXBlVHlwZSwKICAgICAgICByYWRpdXM6IHJhZGl1cywKICAgICAgICB0eXBlOiAi57q/IgogICAgICB9OwogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRhcGkuZ2V0QWN0aW9uKCcveWhzdy1wb3N0Z2lzL2dldEFsbFBvaW50T3JMaW5lR2VvbUluc3AnLCBwYXJhbXMpOwogICAgICBjb25zb2xlLmxvZygiZ2V0IGFsbCBQb2ludCBvciBMaW5lIGdlb209PT4iLCByZXMuZGF0YSk7CiAgICB9LAogICAgLy8g5aSE55CG566h57q/562J5beh5qOA5pWw5o2u5pWw5o2uCiAgICBoYW5kbGVJbnNwRGF0YShkYXRhLCBpbnNwVXNlciA9IGZhbHNlLCB1bkluc3BMaW5lU291cmNlID0gZmFsc2UpIHsKICAgICAgbGV0IGZlYXR1cmVzRGF0YSA9IFtdOwogICAgICBkYXRhLm1hcChpdGVtID0+IHsKICAgICAgICBsZXQgcGFyYW1zT2JqID0ge307CiAgICAgICAgbGV0IGZpZWxkTmFtZXMgPSBpdGVtLmZpZWxkTmFtZXM7CiAgICAgICAgbGV0IGZpZWxkVmFsdWVzID0gaXRlbS5maWVsZFZhbHVlczsKICAgICAgICBsZXQgbHhuSW5kZXggPSBmaWVsZE5hbWVzLmZpbmRJbmRleChpdCA9PiBpdCA9PSAiTFhOIik7CiAgICAgICAgbGV0IHBpcGVJbmRleCA9IGZpZWxkTmFtZXMuZmluZEluZGV4KGl0ID0+IGl0ID09ICJQSVBFVFlQRSIpOwogICAgICAgIGxldCBwcm9wZXJ0aWVzID0gbHhuSW5kZXggPyBzaG93UHJvcGVydGllczJbYCR7ZmllbGRWYWx1ZXNbcGlwZUluZGV4XX1gXSA6IHBpcGVJbmRleCA/IHNob3dQcm9wZXJ0aWVzMltgJHtmaWVsZFZhbHVlc1twaXBlSW5kZXhdfWBdIDogW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZE5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLiRzZXQocGFyYW1zT2JqLCBgJHtmaWVsZE5hbWVzW2ldfWAsIGZpZWxkVmFsdWVzW2ldKTsKICAgICAgICB9CiAgICAgICAgaWYgKGZpZWxkTmFtZXMuZmluZEluZGV4KGl0ID0+IGl0ID09ICJMRU5HVEgiKSA+IC0xKSB7CiAgICAgICAgICB0aGlzLiRzZXQocGFyYW1zT2JqLCAiVU5JVCIsICLnsbMiKTsKICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosICJMRU5HVEgiLCBmaWVsZFZhbHVlc1tmaWVsZE5hbWVzLmZpbmRJbmRleChpID0+IGkgPT0gIkxFTkdUSCIpXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosICJVTklUIiwgIuS4qiIpOwogICAgICAgIH0KICAgICAgICB0aGlzLiRzZXQocGFyYW1zT2JqLCAiSUQiLCBpdGVtLklEKTsKICAgICAgICBsZXQgdGVtcEdlb21ldHJ5ID0gdHVyZi5mZWF0dXJlKHsKICAgICAgICAgIHR5cGU6IGl0ZW0uZ2VvbWV0cnkudHlwZSA9PT0gIkxJTkUiID8gIkxpbmVTdHJpbmciIDogIlBvaW50IiwKICAgICAgICAgIGNvb3JkaW5hdGVzOiBpdGVtLmdlb21ldHJ5LnBvaW50cy5tYXAocG9pbnQgPT4gW3BvaW50LngsIHBvaW50LnldKQogICAgICAgIH0sIHBhcmFtc09iaik7CiAgICAgICAgdGhpcy4kc2V0KHRlbXBHZW9tZXRyeSwgImlkIiwgaXRlbS5JRCk7CiAgICAgICAgZmVhdHVyZXNEYXRhLnB1c2godGVtcEdlb21ldHJ5KTsKICAgICAgICBsZXQgZ2VvbWV0cnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRlbXBHZW9tZXRyeSkpOwogICAgICAgIHRoaXMuJHNldChwYXJhbXNPYmosIGBnZW9tZXRyeWAsIGdlb21ldHJ5KTsKICAgICAgICByZXR1cm4gcGFyYW1zT2JqOwogICAgICB9KTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAobWFwT2JqLm1hcEluc3RhbmNlICYmIHRoYXQubWFwLmdldFNvdXJjZSgidW5JbnNwTGluZVNvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuaXNTb3VyY2VMb2FkZWQoInJhbmdlU291cmNlIikpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgIGlmIChpbnNwVXNlcikgewogICAgICAgICAgICAgIHRoYXQuc2V0TGluZUdlb1NvdXJjZShmZWF0dXJlc0RhdGEsICJpbnNwVXNlckxpbmVTb3VyY2UiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGF0LnNldExpbmVHZW9Tb3VyY2UoZmVhdHVyZXNEYXRhLCAiaW5pdEluc3BMaW5lU291cmNlIik7CiAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5pyq5beh5qOA57q/5pWw5o2u5rqQCiAgICAgICAgICAgICAgaWYgKHVuSW5zcExpbmVTb3VyY2UpIHsKICAgICAgICAgICAgICAgIHRoYXQuc2V0TGluZUdlb1NvdXJjZShmZWF0dXJlc0RhdGEsICJ1bkluc3BMaW5lU291cmNlIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9LAogICAgLy8g6K6+572u57q/5pWw5o2u5rqQLGRhdGHmmK/mlbDnu4TvvIxzb3VyY2XkuLrmlbDmja7mupDlkI3np7AKICAgIHNldExpbmVHZW9Tb3VyY2UoZGF0YSwgc291cmNlKSB7CiAgICAgIGlmIChzb3VyY2UgPT09ICJpbnNwVXNlckxpbmVTb3VyY2UiKSB7CiAgICAgICAgZGF0YSA9IGRhdGE7CiAgICAgIH0gZWxzZSBpZiAoc291cmNlID09PSAiY3VySW5zcExpbmVTb3VyY2UiKSB7CiAgICAgICAgLy8g5aaC5p6c5pWw5o2u5rqQ5pivY3VySW5zcExpbmVTb3VyY2XvvIzliJnop6blj5HnrqHnur/ku7vliqHkuIrmiqUKICAgICAgICAvLyBpZiAoZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gICBidXMuJGVtaXQoInJlcG9ydEluc3BFdmVudCIsIGRhdGFbMF0sIHRydWUpOwogICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgLy8gICBidXMuJGVtaXQoInJlcG9ydEluc3BFdmVudCIsIHt9LCBmYWxzZSk7CiAgICAgICAgLy8gfQogICAgICB9IGVsc2UgewogICAgICAgIGxldCBzb3VyY2VEYXRhID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2Uoc291cmNlKTsKICAgICAgICBkYXRhID0gZGF0YS5jb25jYXQoc291cmNlRGF0YS5fZGF0YS5mZWF0dXJlcyk7CiAgICAgICAgLy8g5pWw57uE5a+56LGh5Y676YeNCiAgICAgICAgbGV0IG9iaiA9IHt9OwogICAgICAgIGRhdGEgPSBkYXRhLnJlZHVjZShmdW5jdGlvbiAoaXRlbSwgbmV4dCkgewogICAgICAgICAgb2JqW25leHQuaWRdID8gJycgOiBvYmpbbmV4dC5pZF0gPSB0cnVlICYmIGl0ZW0ucHVzaChuZXh0KTsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0sIFtdKTsKICAgICAgfQogICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YShzb3VyY2UsIHsKICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgIGZlYXR1cmVzOiBkYXRhCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWwhueuoee6v+aVsOaNruS7juS4gOS4quWbvuWxguaUueWIsOWPpuS4gOS4quWbvuWxggogICAgY2hhbmdlSW5zcExpbmVTb3VyY2UoZGF0YSwgZnJvbVNvdXJjZSwgdG9Tb3VyY2UpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyDlpoLmnpxmcm9tU291cmNlRGF0YeWcqHRvU291cmNlRGF0YeS5i+WQjuWKoOi9ve+8jOWImWZpbHRlcui/h+a7pOWksei0pe+8jOaaguaXtuWwhnRv55qE5Zu+5bGC5pS+5ZyoZnJvbeS4iuaWuQogICAgICAgIGxldCBmcm9tU291cmNlRGF0YSA9IG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKGZyb21Tb3VyY2UpOwogICAgICAgIGxldCB0b1NvdXJjZURhdGEgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSh0b1NvdXJjZSk7CiAgICAgICAgbGV0IGZyb21EYXRhID0gZnJvbVNvdXJjZURhdGEuX2RhdGEuZmVhdHVyZXMuZmlsdGVyKHggPT4gZGF0YS5ldmVyeSh5ID0+IHkuaWQgIT09IHguaWQpKTsKICAgICAgICBkYXRhID0gZnJvbVNvdXJjZURhdGEuX2RhdGEuZmVhdHVyZXMuZmlsdGVyKHggPT4gZGF0YS5zb21lKHkgPT4geS5pZCA9PT0geC5pZCkpOwogICAgICAgIGxldCB0b0RhdGEgPSBkYXRhLmNvbmNhdCh0b1NvdXJjZURhdGEuX2RhdGEuZmVhdHVyZXMpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCJmcm9tRGF0YT09PiIsZnJvbVNvdXJjZURhdGEuX2RhdGEsdG9Tb3VyY2VEYXRhLl9kYXRhLCBmcm9tRGF0YSwgdG9EYXRhKTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YShmcm9tU291cmNlLCB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXM6IGZyb21EYXRhCiAgICAgICAgfSk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEodG9Tb3VyY2UsIHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlczogdG9EYXRhCiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfQogICAgfSwKICAgIHNldEFsbEluc3BMaW5lU291cmNlKGRhdGEpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgICBsZXQgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAodGhhdC5pc09uTG9hZGVkKCkgJiYgbWFwT2JqLm1hcC5nZXRTb3VyY2UoImluaXRJbnNwTGluZVNvdXJjZSIpICYmIG1hcE9iai5tYXAuaXNTb3VyY2VMb2FkZWQoImluaXRJbnNwTGluZVNvdXJjZSIpKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2Uuc2V0U291cmNlRGF0YSgnaW5pdEluc3BMaW5lU291cmNlJywgewogICAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICAgICAgZmVhdHVyZXM6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9LAogICAgYWRkSW5zcFJlY29yZExpbmVTb3VyY2UoZGF0YSkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZFNvdXJjZSgnJyk7CiAgICB9LAogICAgLy8g5bey5beh5qOA566h57q/5Zue5pi+LCDmtonlj4rmlbDmja7pgY3ljobvvIzlpoLmnpzmlbDph4/lt6jlpKfvvIzpnIDopoHlpITnkIYKICAgIGFkZEluc3BSZWNvcmRUaWxlTGluZVNvdXJjZShkYXRhLCBjb21wbGV0aW9uID0gbnVsbCkgewogICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgdHJ5IHsKICAgICAgICBUb2FzdC5sb2FkaW5nKHsKICAgICAgICAgIG1lc3NhZ2U6ICLliqDovb3lnLDlm77nrqHnur/kuK0uLi4iCiAgICAgICAgfSk7CiAgICAgICAgZGF0YSA9IFsuLi5uZXcgU2V0KGRhdGEpXTsKICAgICAgICByZWNvcmRGZWF0dXJlcy5sZW5ndGggPSAwOwogICAgICAgIHJlY29yZEZlYXR1cmVzLnB1c2goLi4uZGF0YSk7CiAgICAgICAgbGV0IGZsYWcgPSBmYWxzZTsKICAgICAgICB0aGF0LnJlY29yZFRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKGZsYWcpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGF0LnJlY29yZFRpbWVyKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoYXQuaXNPbkxvYWRlZCgpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJpbml0SW5zcExpbmVTb3VyY2UiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmlzU291cmNlTG9hZGVkKCJpbml0SW5zcExpbmVTb3VyY2UiKSkgewogICAgICAgICAgICBsZXQgZmlsdGVyRGF0YSA9IFsiaW4iLCAiaWQiXTsKICAgICAgICAgICAgZmlsdGVyRGF0YS5wdXNoKC4uLnJlY29yZEZlYXR1cmVzKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZmlsdGVyRGF0YSk7CiAgICAgICAgICAgIGNvbnN0IGJveEZlYXR1cmVzID0gbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5xdWVyeVNvdXJjZUZlYXR1cmVzKCJpbml0SW5zcExpbmVTb3VyY2UiLCB7CiAgICAgICAgICAgICAgZmlsdGVyOiBmaWx0ZXJEYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zb2xlLmxvZyhib3hGZWF0dXJlcyk7CiAgICAgICAgICAgIGJveEZlYXR1cmVzLmZvckVhY2goZmVhdCA9PiB7CiAgICAgICAgICAgICAgLy8g5aaC5p6c5LiN5a2Y5Zyo6L+Z5Liqc3RhdGUKICAgICAgICAgICAgICBpZiAoIWZlYXQuc3RhdGUgfHwgIWZlYXQuc3RhdGUuaXNJbnNwKSB7CiAgICAgICAgICAgICAgICBtYXBPYmoubWFwLnNldEZlYXR1cmVTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIHNvdXJjZTogImluaXRJbnNwTGluZVNvdXJjZSIsCiAgICAgICAgICAgICAgICAgIGlkOiBmZWF0LmlkCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGlzSW5zcDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSwgNTAwKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliJ3lp4vljJblm77lsYLvvIzliJ3lp4vnrqHnur/lm77lsYLvvIzlt7Llt6Hmo4DnrqHnur/lm77lsYLvvIzmnKrlt6Hmo4DnrqHnur/lm77lsYLvvIzpgInkuK3lvZPliY3nrqHnur/lm77lsYIKICAgIGFkZExpbmVHZW9MYXllcigpIHsKICAgICAgLy8g5beh5qOA5Lq65ZGY6IyD5Zu0566h57q/CiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoImluc3BVc2VyTGluZVNvdXJjZSIsIHsKICAgICAgLy8gICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgIC8vICAgZGF0YTogewogICAgICAvLyAgICAgdHlwZTogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgLy8gICAgIGZlYXR1cmVzOiBbXQogICAgICAvLyAgIH0KICAgICAgLy8gfSk7CiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgIC8vICAgaWQ6ICJpbnNwVXNlckxpbmVMYXllciIsCiAgICAgIC8vICAgdHlwZTogImxpbmUiLAogICAgICAvLyAgIHNvdXJjZTogImluc3BVc2VyTGluZVNvdXJjZSIsCiAgICAgIC8vICAgcGFpbnQ6IHsKICAgICAgLy8gICAgICJsaW5lLWNvbG9yIjogIiM0MjY0RkIiLAogICAgICAvLyAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgIC8vICAgfQogICAgICAvLyB9LCAicmFuZ2VMYXllciIpOwogICAgICAvLyDliJ3lp4vljJbnrqHnur/lm77lsYIKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgiaW5pdEluc3BMaW5lU291cmNlIiwgewogICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICBpZDogImluaXRJbnNwTGluZUxheWVyIiwKICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgc291cmNlOiAiaW5pdEluc3BMaW5lU291cmNlIiwKICAgICAgICBwYWludDogewogICAgICAgICAgImxpbmUtY29sb3IiOiBbJ2Nhc2UnLCBbJ2Jvb2xlYW4nLCBbJ2ZlYXR1cmUtc3RhdGUnLCAnaXNJbnNwJ10sIGZhbHNlXSwgIiM0NEJBNUEiLCAiI0ZGMDAwMCJdLAogICAgICAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgICAgfQogICAgICB9LCAicmRfbWFwX291dGZhbGwiKTsKICAgICAgLy8g5pyq5beh5qOA566h57q/5Zu+5bGCCiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoInVuSW5zcExpbmVTb3VyY2UiLCB7CiAgICAgIC8vICAgdHlwZTogImdlb2pzb24iLAogICAgICAvLyAgIGRhdGE6IHsKICAgICAgLy8gICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgIC8vICAgICBmZWF0dXJlczogW10KICAgICAgLy8gICB9CiAgICAgIC8vIH0pOwogICAgICAvLyBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAvLyAgIGlkOiAidW5JbnNwTGluZUxheWVyIiwKICAgICAgLy8gICB0eXBlOiAibGluZSIsCiAgICAgIC8vICAgc291cmNlOiAidW5JbnNwTGluZVNvdXJjZSIsCiAgICAgIC8vICAgcGFpbnQ6IHsKICAgICAgLy8gICAgICJsaW5lLWNvbG9yIjogIiNGRjAwMDAiLAogICAgICAvLyAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgIC8vICAgfQogICAgICAvLyB9LCAiaW5pdEluc3BMaW5lTGF5ZXIiKTsKICAgICAgLy8g5bey5beh5qOA566h57q/5Zu+5bGCCiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoImluc3BMaW5lU291cmNlIiwgewogICAgICAvLyAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgLy8gICBkYXRhOiB7CiAgICAgIC8vICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAvLyAgICAgZmVhdHVyZXM6IFtdCiAgICAgIC8vICAgfQogICAgICAvLyB9KTsKICAgICAgLy8gbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgLy8gICBpZDogImluc3BMaW5lTGF5ZXIiLAogICAgICAvLyAgIHR5cGU6ICJsaW5lIiwKICAgICAgLy8gICBzb3VyY2U6ICJpbnNwTGluZVNvdXJjZSIsCiAgICAgIC8vICAgcGFpbnQ6IHsKICAgICAgLy8gICAgICJsaW5lLWNvbG9yIjogIiM0NEJBNUEiLAogICAgICAvLyAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgIC8vICAgfQogICAgICAvLyB9LCAidW5JbnNwTGluZUxheWVyIik7CiAgICB9LAogICAgc2V0UmVjb3JkRGF0YSh2YWwpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJyYW5nZUwiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJyYW5nZUwiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigicmFuZ2VNIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigicmFuZ2VNIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJyYW5nZVMiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgicmFuZ2VTIik7CiAgICAgIHZhbC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGl0ZW0uZGV2aWNlX2lkID0gaXRlbS5lcXVpcG1lbnRJZDsKICAgICAgICBpdGVtLmdlb21ldHJ5ID0gaXRlbS5nZW9tVGVtcCA/IGl0ZW0uZ2VvbVRlbXAgOiBpdGVtLmdlb207CiAgICAgICAgaWYgKFsn54Ot54K5JywgJ+eDreeCueeUqOaIt+e+pCcsICfng63ngrnmoIfnrb4nXS5pbmNsdWRlcyhpdGVtLnloVHlwZSkpIHsKICAgICAgICAgIGl0ZW0uaWNvbk5hbWUgPSB0aGlzLmdldEljb25OYW1lKCdkb25lJywgaXRlbSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigieWhQaXBlUG9pbnRzTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJ5aFBpcGVQb2ludHNMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgieWhQaXBlUG9pbnRzIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoInloUGlwZVBvaW50cyIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ5aFBpcGVMaW5lc0xheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigieWhQaXBlTGluZXNMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgieWhQaXBlTGluZXMiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgieWhQaXBlTGluZXMiKTsKICAgICAgbGV0IGZlYXR1cmVzID0gdmFsLm1hcChpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbS5nZW9tZXRyeS50eXBlID09PSAnUG9pbnQnKSByZXR1cm4gewogICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICBwcm9wZXJ0aWVzOiBpdGVtLAogICAgICAgICAgZ2VvbWV0cnk6IGl0ZW0uZ2VvbWV0cnksCiAgICAgICAgICB0eXBlOiAiRmVhdHVyZSIKICAgICAgICB9OwogICAgICB9KTsKICAgICAgbGV0IGZlYXR1cmVzMiA9IHZhbC5tYXAoaXRlbSA9PiB7CiAgICAgICAgaWYgKGl0ZW0uZ2VvbWV0cnkudHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSByZXR1cm4gewogICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICBwcm9wZXJ0aWVzOiBpdGVtLAogICAgICAgICAgZ2VvbWV0cnk6IGl0ZW0uZ2VvbWV0cnksCiAgICAgICAgICB0eXBlOiAiRmVhdHVyZSIKICAgICAgICB9OwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2coJ2ZlYXR1cmVzIDo+PiAnLCBmZWF0dXJlcyk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkU291cmNlKCd5aFBpcGVQb2ludHMnLCB7CiAgICAgICAgJ3R5cGUnOiAnZ2VvanNvbicsCiAgICAgICAgJ2RhdGEnOiB7CiAgICAgICAgICAndHlwZSc6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAnZmVhdHVyZXMnOiBmZWF0dXJlcy5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgICAgIHJldHVybiBpdGVtICE9IHVuZGVmaW5lZDsKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJ5aFBpcGVQb2ludHNMYXllciIsCiAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgc291cmNlOiAieWhQaXBlUG9pbnRzIiwKICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgLy8gImljb24taW1hZ2UiOiBmZWF0dXJlc1swXS5wcm9wZXJ0aWVzLnloVHlwZSA/IGZlYXR1cmVzWzBdLnByb3BlcnRpZXMueWhUeXBlLmluZGV4T2YoJ+WFu+aKpCcpPi0xID8gIndzajMiIDogZmVhdHVyZXNbMF0ucHJvcGVydGllcy55aFR5cGUuaW5kZXhPZign54Ot54K5Jyk+LTEgPyAid2NyZCIgOiAicnd3YyIgOiAid3NqMyIsCiAgICAgICAgICAiaWNvbi1pbWFnZSI6IFsnY2FzZScsIFsiPT0iLCBbImhhcyIsICJ5aFR5cGUiXSwgZmFsc2VdLCAid3NqMyIsIFsiYW55IiwgWyI9PSIsIFsiZ2V0IiwgInloVHlwZSJdLCAi5LqV5YW75oqkIl0sIFsiPT0iLCBbImdldCIsICJ5aFR5cGUiXSwgIueuoee9keWFu+aKpCJdXSwgIndzajMiLCBbImFueSIsIFsiPT0iLCBbImdldCIsICJ5aFR5cGUiXSwgIueDreeCuSJdLCBbIj09IiwgWyJnZXQiLCAieWhUeXBlIl0sICLng63ngrnmoIfnrb4iXSwgWyI9PSIsIFsiZ2V0IiwgInloVHlwZSJdLCAi54Ot54K555So5oi3576kIl1dLCBbImdldCIsICJpY29uTmFtZSJdLCBbImFueSIsIFsiPT0iLCBbImdldCIsICJ5aFR5cGUiXSwgIueUqOaIt+e+pOS7u+WKoSJdLCBbIj09IiwgWyJnZXQiLCAieWhUeXBlIl0sICLmoIfnrb7ku7vliqEiXSwgWyI9PSIsIFsiZ2V0IiwgInloVHlwZSJdLCAi6K6+5aSH5Lu75YqhIl0sIFsiPT0iLCBbImdldCIsICJ5aFR5cGUiXSwgIuS6leS7u+WKoSJdLCBbIj09IiwgWyJnZXQiLCAieWhUeXBlIl0sICLnrqHnvZHku7vliqEiXV0sCiAgICAgICAgICAvLyAicnd3YyIsCiAgICAgICAgICBbImNhc2UiLCBbIj09IiwgWyJnZXQiLCAiYXBwcm92ZVN0YXR1cyJdLCAyXSwgInRoIiwgInJ3d2MiXSwgIndzajMiXSwKICAgICAgICAgICJpY29uLXNpemUiOiAwLjU1LAogICAgICAgICAgJ2ljb24tYWxsb3ctb3ZlcmxhcCc6IHRydWUKICAgICAgICB9CiAgICAgIH0sICJ1c2VyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkU291cmNlKCd5aFBpcGVMaW5lcycsIHsKICAgICAgICAndHlwZSc6ICdnZW9qc29uJywKICAgICAgICAnZGF0YSc6IHsKICAgICAgICAgICd0eXBlJzogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgICdmZWF0dXJlcyc6IGZlYXR1cmVzMi5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgICAgIHJldHVybiBpdGVtICE9IHVuZGVmaW5lZDsKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJ5aFBpcGVMaW5lc0xheWVyIiwKICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgc291cmNlOiAieWhQaXBlTGluZXMiLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAibGluZS1jb2xvciI6ICIjNDRCQTVBIiwKICAgICAgICAgICJsaW5lLXdpZHRoIjogMy41CiAgICAgICAgfQogICAgICB9LCAidXNlciIpOwogICAgfSwKICAgIGdldEljb25OYW1lKHR5cGUsIG9iaikgewogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlICd0b2RvJzoKICAgICAgICAgIHN3aXRjaCAob2JqLm5hbWUpIHsKICAgICAgICAgICAgY2FzZSAn5L2O5L+d5oi3JzoKICAgICAgICAgICAgICByZXR1cm4gJ2RiaCc7CiAgICAgICAgICAgIGNhc2UgJ+mVv+i+iCc6CiAgICAgICAgICAgICAgcmV0dXJuICd6Yic7CiAgICAgICAgICAgIGNhc2UgJ+i/neinhOeUqOaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICd3Z3loJzsKICAgICAgICAgICAgY2FzZSAn5LiA5bm05YaF6ZSA5oi3JzoKICAgICAgICAgICAgICByZXR1cm4gJ3lubnhoJzsKICAgICAgICAgICAgY2FzZSAn5LiA5bm05YaF5oql5YGcJzoKICAgICAgICAgICAgICByZXR1cm4gJ3lubmJ0JzsKICAgICAgICAgICAgY2FzZSAn5Z+65bu66KGo5o6S5p+lJzoKICAgICAgICAgICAgICByZXR1cm4gJ2pqYic7CiAgICAgICAgICAgIGNhc2UgJ+S4ieacn+mbtuWQqCc6CiAgICAgICAgICAgICAgcmV0dXJuICdsZCc7CiAgICAgICAgICAgIGNhc2UgJ+Wkp+a1gemHj+WuouaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICdkbGwnOwogICAgICAgICAgICBjYXNlICflpJrmnJ/pm7blkKgnOgogICAgICAgICAgICAgIHJldHVybiAnbGQnOwogICAgICAgICAgICBjYXNlICfmsaHmsLTljZXni6zorqHph4/nlKjmiLcnOgogICAgICAgICAgICAgIHJldHVybiAnd3NkZGpseWgnOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHJldHVybiAnaG90ZGF0YSc7CiAgICAgICAgICB9CiAgICAgICAgY2FzZSAnc2VsZWN0ZWQnOgogICAgICAgICAgc3dpdGNoIChvYmoubmFtZSkgewogICAgICAgICAgICBjYXNlICfkvY7kv53miLcnOgogICAgICAgICAgICAgIHJldHVybiAnZGJoeHonOwogICAgICAgICAgICBjYXNlICfplb/ovognOgogICAgICAgICAgICAgIHJldHVybiAnemJ4eic7CiAgICAgICAgICAgIGNhc2UgJ+i/neinhOeUqOaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICd3Z3loeHonOwogICAgICAgICAgICBjYXNlICfkuIDlubTlhoXplIDmiLcnOgogICAgICAgICAgICAgIHJldHVybiAneW5ueGh4eic7CiAgICAgICAgICAgIGNhc2UgJ+S4gOW5tOWGheaKpeWBnCc6CiAgICAgICAgICAgICAgcmV0dXJuICd5bm5idHh6JzsKICAgICAgICAgICAgY2FzZSAn5Z+65bu66KGo5o6S5p+lJzoKICAgICAgICAgICAgICByZXR1cm4gJ2pqYnh6JzsKICAgICAgICAgICAgY2FzZSAn5LiJ5pyf6Zu25ZCoJzoKICAgICAgICAgICAgICByZXR1cm4gJ2xkeHonOwogICAgICAgICAgICBjYXNlICflpKfmtYHph4/lrqLmiLcnOgogICAgICAgICAgICAgIHJldHVybiAnZGxseHonOwogICAgICAgICAgICBjYXNlICflpJrmnJ/pm7blkKgnOgogICAgICAgICAgICAgIHJldHVybiAnbGR4eic7CiAgICAgICAgICAgIGNhc2UgJ+axoeawtOWNleeLrOiuoemHj+eUqOaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICd3c2Rkamx5aHh6JzsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICByZXR1cm4gJ3h6cmQnOwogICAgICAgICAgfQogICAgICAgIGNhc2UgJ2RvbmUnOgogICAgICAgICAgc3dpdGNoIChvYmoubmFtZSkgewogICAgICAgICAgICBjYXNlICfkvY7kv53miLcnOgogICAgICAgICAgICAgIHJldHVybiAnZGJod2MnOwogICAgICAgICAgICBjYXNlICfplb/ovognOgogICAgICAgICAgICAgIHJldHVybiAnemJ3Yyc7CiAgICAgICAgICAgIGNhc2UgJ+i/neinhOeUqOaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICd3Z3lod2MnOwogICAgICAgICAgICBjYXNlICfkuIDlubTlhoXplIDmiLcnOgogICAgICAgICAgICAgIHJldHVybiAneW5ueGh3Yyc7CiAgICAgICAgICAgIGNhc2UgJ+S4gOW5tOWGheaKpeWBnCc6CiAgICAgICAgICAgICAgcmV0dXJuICd5bm5idHdjJzsKICAgICAgICAgICAgY2FzZSAn5Z+65bu66KGo5o6S5p+lJzoKICAgICAgICAgICAgICByZXR1cm4gJ2pqYndjJzsKICAgICAgICAgICAgY2FzZSAn5LiJ5pyf6Zu25ZCoJzoKICAgICAgICAgICAgICByZXR1cm4gJ2xkd2MnOwogICAgICAgICAgICBjYXNlICflpKfmtYHph4/lrqLmiLcnOgogICAgICAgICAgICAgIHJldHVybiAnZGxsd2MnOwogICAgICAgICAgICBjYXNlICflpJrmnJ/pm7blkKgnOgogICAgICAgICAgICAgIHJldHVybiAnbGR3Yyc7CiAgICAgICAgICAgIGNhc2UgJ+axoeawtOWNleeLrOiuoemHj+eUqOaItyc6CiAgICAgICAgICAgICAgcmV0dXJuICd3c2Rkamx5aHdjJzsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICByZXR1cm4gJ3djcmQnOwogICAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2V0SG90RGF0YShob3RkYXRhLCBpbmRleCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIC8vIGhvdGRhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgLy8gICBpdGVtLmRldmljZV9pZCA9IGl0ZW0uY29kZTsKICAgICAgLy8gICBpdGVtLmdlb21ldHJ5ID0gewogICAgICAvLyAgICAgdHlwZTogJ1BvaW50JywKICAgICAgLy8gICAgIGNvb3JkaW5hdGVzOiBbaXRlbS5sb25naSwgaXRlbS5sYXRpXQogICAgICAvLyAgIH07CiAgICAgIC8vIH0pCiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoImhvdERhdGFMYXllciIgKyBTdHJpbmcoaW5kZXgpKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJob3REYXRhTGF5ZXIiICsgU3RyaW5nKGluZGV4KSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJob3REYXRhU291cmNlIiArIFN0cmluZyhpbmRleCkpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJob3REYXRhU291cmNlIiArIFN0cmluZyhpbmRleCkpOwogICAgICBob3RkYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgaXRlbS5pY29uTmFtZSA9IHRoaXMuZ2V0SWNvbk5hbWUoJ3RvZG8nLCBpdGVtKTsKICAgICAgfSk7CiAgICAgIGxldCBmZWF0dXJlcyA9IGhvdGRhdGEubWFwKGl0ZW0gPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogaXRlbS5jb2RlLAogICAgICAgICAgcHJvcGVydGllczogaXRlbSwKICAgICAgICAgIGdlb21ldHJ5OiBpdGVtLmdlb21ldHJ5LAogICAgICAgICAgdHlwZTogIkZlYXR1cmUiCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKCdmZWF0dXJlcyA6Pj4gJywgZmVhdHVyZXMpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZFNvdXJjZSgnaG90RGF0YVNvdXJjZScgKyBTdHJpbmcoaW5kZXgpLCB7CiAgICAgICAgJ3R5cGUnOiAnZ2VvanNvbicsCiAgICAgICAgJ2RhdGEnOiB7CiAgICAgICAgICAndHlwZSc6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAnZmVhdHVyZXMnOiBmZWF0dXJlcwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAiaG90RGF0YUxheWVyIiArIFN0cmluZyhpbmRleCksCiAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgc291cmNlOiAiaG90RGF0YVNvdXJjZSIgKyBTdHJpbmcoaW5kZXgpLAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAiaWNvbi1pbWFnZSI6IFsiZ2V0IiwgImljb25OYW1lIl0sCiAgICAgICAgICAiaWNvbi1zaXplIjogMC41LAogICAgICAgICAgJ2ljb24tYWxsb3ctb3ZlcmxhcCc6IHRydWUKICAgICAgICB9CiAgICAgIH0sICd1blBvaW50TGF5ZXIwJyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U3R5bGUoKSkKICAgIH0sCiAgICAvLyDojrflj5bojIPlm7TlhoXorr7mlr0KICAgIGdldFJhbmdzKHRhc2tJZCwgY2FsbGJhY2spIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ1bkxpbmVMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInVuTGluZUxheWVyIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInVuUG9pbnRMYXllciIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInVuUG9pbnRMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ1blBvaW50TGF5ZXJCaWFvemh1IikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigidW5Qb2ludExheWVyQmlhb3podSIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgieWhQaXBlVmVjdG9yU291cmNlIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoInloUGlwZVZlY3RvclNvdXJjZSIpOwogICAgICBsZXQgdXJsID0gYmFzZVVybC51cmxfY29uZmlnICsgYC95aHN3LW1haW50YWluL21haW50YWluVGFzay9yZXN1bHRtdnQve3h9L3t5fS97en0/dGFza0lkPSR7dGFza0lkfWA7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoYHloUGlwZVZlY3RvclNvdXJjZWAsIHsKICAgICAgICB0eXBlOiAidmVjdG9yIiwKICAgICAgICB0aWxlczogW3VybF0sCiAgICAgICAgcHJvbW90ZUlkOiAnaWQnCiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogInVuTGluZUxheWVyIiwKICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgc291cmNlOiAieWhQaXBlVmVjdG9yU291cmNlIiwKICAgICAgICAic291cmNlLWxheWVyIjogImxpbmUiLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAibGluZS1jb2xvciI6ICIjZmYwMDAwIiwKICAgICAgICAgICJsaW5lLXdpZHRoIjogMwogICAgICAgIH0KICAgICAgfSwgJ3VzZXInKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJ1blBvaW50TGF5ZXIiLAogICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgIHNvdXJjZTogInloUGlwZVZlY3RvclNvdXJjZSIsCiAgICAgICAgInNvdXJjZS1sYXllciI6ICJwb2ludCIsCiAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICJpY29uLWltYWdlIjogIndzajEiLAogICAgICAgICAgImljb24tc2l6ZSI6IDAuNSwKICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlCiAgICAgICAgfQogICAgICB9LCAndXNlcicpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogInVuUG9pbnRMYXllckJpYW96aHUiLAogICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgIHNvdXJjZTogInl1aGFuZ193c193c2oiLAogICAgICAgICJzb3VyY2UtbGF5ZXIiOiAid3Nfd3NqIiwKICAgICAgICAibWluem9vbSI6IDE4LAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAidGV4dC1maWVsZCI6IFsnY29uY2F0JywgWyJnZXQiLCAiZmxvb3JlbGV2YXRpb24iXSwgJy8nLCBbImdldCIsICJkZXB0aCJdXSwKICAgICAgICAgICJ0ZXh0LW9mZnNldCI6IFsxLCAxXQogICAgICAgIH0KICAgICAgfSwgJ3VzZXInKTsKICAgICAgY29uc29sZS5sb2cobWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoInloUGlwZVZlY3RvclNvdXJjZSIpKTsKICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vZmYoJ2NsaWNrJywgdGhpcy5jYWxsYmFjayk7CiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub24oJ2NsaWNrJywgY2FsbGJhY2spOwogICAgICB9CiAgICB9LAogICAgZ2V0R3JpZFJhbmdzKHRhc2tJZCwgY2FsbGJhY2ssIGlmTXVsdGkpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICB0aGF0Lm11bHRpVGFza1NBTC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInVuTGluZUxheWVyIiArIGl0ZW0pICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInVuTGluZUxheWVyIiArIGl0ZW0pOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInVuUG9pbnRMYXllciIgKyBpdGVtKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJ1blBvaW50TGF5ZXIiICsgaXRlbSk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoInloUGlwZVZlY3RvclNvdXJjZSIgKyBpdGVtKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgieWhQaXBlVmVjdG9yU291cmNlIiArIGl0ZW0pOwogICAgICB9KTsKICAgICAgdGhhdC5tdWx0aVRhc2tTQUwgPSBbXTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigidW5MaW5lTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJ1bkxpbmVMYXllciIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ1blBvaW50TGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZUxheWVyKCJ1blBvaW50TGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigidW5Qb2ludExheWVyQmlhb3podSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInVuUG9pbnRMYXllckJpYW96aHUiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRTb3VyY2UoInloUGlwZVZlY3RvclNvdXJjZSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlU291cmNlKCJ5aFBpcGVWZWN0b3JTb3VyY2UiKTsKICAgICAgY29uc29sZS5sb2codGFza0lkKTsKICAgICAgaWYgKCFpZk11bHRpKSB7CiAgICAgICAgbGV0IHVybCA9IGJhc2VVcmwudXJsX2NvbmZpZyArIGAveWhzdy1ncmlkL21haW50YWluVGFzay9yZXN1bHRtdnQve3h9L3t5fS97en0/dGFza0lkPSR7dGFza0lkfWA7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZShgeWhQaXBlVmVjdG9yU291cmNlYCwgewogICAgICAgICAgdHlwZTogInZlY3RvciIsCiAgICAgICAgICB0aWxlczogW3VybF0sCiAgICAgICAgICBwcm9tb3RlSWQ6ICdpZCcKICAgICAgICB9KTsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICAgIGlkOiAidW5MaW5lTGF5ZXIwIiwKICAgICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICAgIHNvdXJjZTogInloUGlwZVZlY3RvclNvdXJjZSIsCiAgICAgICAgICAic291cmNlLWxheWVyIjogImxpbmUiLAogICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgImxpbmUtY29sb3IiOiAiI2ZmMDAwMCIsCiAgICAgICAgICAgICJsaW5lLXdpZHRoIjogMwogICAgICAgICAgfQogICAgICAgIH0sICd1c2VyJyk7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgICBpZDogInVuUG9pbnRMYXllcjAiLAogICAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgICBzb3VyY2U6ICJ5aFBpcGVWZWN0b3JTb3VyY2UiLAogICAgICAgICAgInNvdXJjZS1sYXllciI6ICJwb2ludCIsCiAgICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgICAiaWNvbi1pbWFnZSI6ICJydzEiLAogICAgICAgICAgICAiaWNvbi1zaXplIjogMC41LAogICAgICAgICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0sICd1c2VyJyk7CiAgICAgICAgdGhhdC5tdWx0aVRhc2tTQUwucHVzaCgnMCcpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGxldCB1cmxBcnJheSA9IHRhc2tJZC5tYXAoKGl0ZW0pPT57CiAgICAgICAgLy8gICByZXR1cm4gYmFzZVVybC51cmxfY29uZmlnICsgYC95aHN3LWdyaWQvbWFpbnRhaW5UYXNrL3Jlc3VsdG12dC97eH0ve3l9L3t6fT90YXNrSWQ9JHtpdGVtfWAKICAgICAgICAvLyB9KQogICAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoYHloUGlwZVZlY3RvclNvdXJjZWAsIHsKICAgICAgICAvLyAgIHR5cGU6ICJ2ZWN0b3IiLAogICAgICAgIC8vICAgdGlsZXM6IHVybEFycmF5LAogICAgICAgIC8vICAgcHJvbW90ZUlkOiAnaWQnCiAgICAgICAgLy8gfSkKICAgICAgICB0YXNrSWQuZm9yRWFjaCgodGFzaywgaW5kZXgpID0+IHsKICAgICAgICAgIGxldCB1cmwgPSBiYXNlVXJsLnVybF9jb25maWcgKyBgL3loc3ctZ3JpZC9tYWludGFpblRhc2svcmVzdWx0bXZ0L3t4fS97eX0ve3p9P3Rhc2tJZD0ke3Rhc2t9YDsKICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UoYHloUGlwZVZlY3RvclNvdXJjZWAgKyBTdHJpbmcoaW5kZXgpLCB7CiAgICAgICAgICAgIHR5cGU6ICJ2ZWN0b3IiLAogICAgICAgICAgICB0aWxlczogW3VybF0sCiAgICAgICAgICAgIHByb21vdGVJZDogJ2lkJwogICAgICAgICAgfSk7CiAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICAgICAgaWQ6ICJ1bkxpbmVMYXllciIgKyBTdHJpbmcoaW5kZXgpLAogICAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICAgIHNvdXJjZTogInloUGlwZVZlY3RvclNvdXJjZSIgKyBTdHJpbmcoaW5kZXgpLAogICAgICAgICAgICAic291cmNlLWxheWVyIjogImxpbmUiLAogICAgICAgICAgICBwYWludDogewogICAgICAgICAgICAgICJsaW5lLWNvbG9yIjogIiNmZjAwMDAiLAogICAgICAgICAgICAgICJsaW5lLXdpZHRoIjogMwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAndXNlcicpOwogICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAgIGlkOiAidW5Qb2ludExheWVyIiArIFN0cmluZyhpbmRleCksCiAgICAgICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgICAgICBzb3VyY2U6ICJ5aFBpcGVWZWN0b3JTb3VyY2UiICsgU3RyaW5nKGluZGV4KSwKICAgICAgICAgICAgInNvdXJjZS1sYXllciI6ICJwb2ludCIsCiAgICAgICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAgICAgImljb24taW1hZ2UiOiAicnciICsgU3RyaW5nKGluZGV4ICUgOCksCiAgICAgICAgICAgICAgImljb24tc2l6ZSI6IDAuNSwKICAgICAgICAgICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9LCAndXNlcicpOwogICAgICAgICAgdGhhdC5tdWx0aVRhc2tTQUwucHVzaChTdHJpbmcoaW5kZXgpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAvLyAgIGlkOiAidW5MaW5lTGF5ZXIiLAogICAgICAvLyAgIHR5cGU6ICJsaW5lIiwKICAgICAgLy8gICBzb3VyY2U6ICJ5aFBpcGVWZWN0b3JTb3VyY2UiLAogICAgICAvLyAgICJzb3VyY2UtbGF5ZXIiOiAibGluZSIsCiAgICAgIC8vICAgcGFpbnQ6IHsKICAgICAgLy8gICAgICJsaW5lLWNvbG9yIjogIiNmZjAwMDAiLAogICAgICAvLyAgICAgImxpbmUtd2lkdGgiOiAzCiAgICAgIC8vICAgfQogICAgICAvLyB9LCAnY3VyZScpCiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgIC8vICAgaWQ6ICJ1blBvaW50TGF5ZXIiLAogICAgICAvLyAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAvLyAgIHNvdXJjZTogInloUGlwZVZlY3RvclNvdXJjZSIsCiAgICAgIC8vICAgInNvdXJjZS1sYXllciI6ICJwb2ludCIsCiAgICAgIC8vICAgImxheW91dCI6IHsKICAgICAgLy8gICAgICJpY29uLWltYWdlIjogIndzajEiLAogICAgICAvLyAgICAgImljb24tc2l6ZSI6IDAuNSwKICAgICAgLy8gICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlCgogICAgICAvLyAgIH0KICAgICAgLy8gfSwgJ2N1cmUnKQogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogInVuUG9pbnRMYXllckJpYW96aHUiLAogICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgIHNvdXJjZTogInl1aGFuZ193c193c2oiLAogICAgICAgICJzb3VyY2UtbGF5ZXIiOiAid3Nfd3NqIiwKICAgICAgICAibWluem9vbSI6IDE4LAogICAgICAgICJsYXlvdXQiOiB7CiAgICAgICAgICAidGV4dC1maWVsZCI6IFsnY29uY2F0JywgWyJnZXQiLCAiZmxvb3JlbGV2YXRpb24iXSwgJy8nLCBbImdldCIsICJkZXB0aCJdXSwKICAgICAgICAgICJ0ZXh0LW9mZnNldCI6IFsxLCAxXQogICAgICAgIH0KICAgICAgfSwgJ3VzZXInKTsKICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vZmYoJ2NsaWNrJywgdGhpcy5jYWxsYmFjayk7CiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub24oJ2NsaWNrJywgY2FsbGJhY2spOwogICAgICB9CiAgICB9LAogICAgc2V0UmFuZ0ZpbHRlcihkb25lLCBzdGF0dXMpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldExheWVyKCJ5aFBpcGVMaW5lc0xheWVyIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgneWhQaXBlTGluZXNMYXllcicsICd2aXNpYmlsaXR5Jywgc3RhdHVzID8gJ25vbmUnIDogJ3Zpc2libGUnKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigieWhQaXBlUG9pbnRzTGF5ZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KCd5aFBpcGVQb2ludHNMYXllcicsICd2aXNpYmlsaXR5Jywgc3RhdHVzID8gJ25vbmUnIDogJ3Zpc2libGUnKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRGaWx0ZXIoJ3VuTGluZUxheWVyJywgc3RhdHVzID8gWyc9PScsIFsnaW5kZXgtb2YnLCBbImdldCIsICJkZXZpY2VfaWQiXSwgWydsaXRlcmFsJywgZG9uZV1dLCAtMV0gOiBudWxsKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRGaWx0ZXIoJ3VuUG9pbnRMYXllcicsIHN0YXR1cyA/IFsnPT0nLCBbJ2luZGV4LW9mJywgWyJnZXQiLCAiZGV2aWNlX2lkIl0sIFsnbGl0ZXJhbCcsIGRvbmVdXSwgLTFdIDogbnVsbCk7CiAgICB9LAogICAgcmFuZ0NsaWNrKGZlYXR1cmUpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZyhmZWF0dXJlKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigicmFuZ2VMIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigicmFuZ2VMIik7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0TGF5ZXIoInJhbmdlTSIpICYmIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucmVtb3ZlTGF5ZXIoInJhbmdlTSIpOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgicmFuZ2VTIikgJiYgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVTb3VyY2UoInJhbmdlUyIpOwogICAgICB2YXIgZmVhdHVyZXMgPSBmZWF0dXJlWzBdOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmFkZFNvdXJjZSgncmFuZ2VTJywgewogICAgICAgICd0eXBlJzogJ2dlb2pzb24nLAogICAgICAgICdkYXRhJzogewogICAgICAgICAgJ3R5cGUnOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgJ2ZlYXR1cmVzJzogW2ZlYXR1cmVzXQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChmZWF0dXJlcy5nZW9tZXRyeS50eXBlID09PSAnTGluZVN0cmluZycpIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgICAgaWQ6ICJyYW5nZUwiLAogICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgc291cmNlOiAicmFuZ2VTIiwKICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICJsaW5lLWNvbG9yIjogIiNGRkZGMDAiLAogICAgICAgICAgICAibGluZS13aWR0aCI6IDcKICAgICAgICAgIH0KICAgICAgICB9LCAiaW5pdEluc3BMaW5lTGF5ZXIiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkTGF5ZXIoewogICAgICAgICAgaWQ6ICJyYW5nZU0iLAogICAgICAgICAgdHlwZTogInN5bWJvbCIsCiAgICAgICAgICBzb3VyY2U6ICJyYW5nZVMiLAogICAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICAgImljb24taW1hZ2UiOiBmZWF0dXJlcy5wcm9wZXJ0aWVzLnloVHlwZSA/IGZlYXR1cmVzLnByb3BlcnRpZXMueWhUeXBlLmluZGV4T2YoJ+WFu+aKpCcpID4gLTEgPyAid3NqMiIgOiBmZWF0dXJlcy5wcm9wZXJ0aWVzLnloVHlwZS5pbmRleE9mKCfng63ngrknKSA+IC0xID8gdGhpcy5nZXRJY29uTmFtZSgnc2VsZWN0ZWQnLCBmZWF0dXJlcy5wcm9wZXJ0aWVzKSA6IGZlYXR1cmVzLnByb3BlcnRpZXMuYXBwcm92ZVN0YXR1cyA9PSAyID8gInRoeHoiIDogInJ3eHoiIDogIndzajIiLAogICAgICAgICAgICAiaWNvbi1zaXplIjogZmVhdHVyZXMucHJvcGVydGllcy55aFR5cGUgPyBmZWF0dXJlcy5wcm9wZXJ0aWVzLnloVHlwZS5pbmRleE9mKCflhbvmiqQnKSA+IC0xID8gMC43IDogMC41IDogMC43CiAgICAgICAgICB9CiAgICAgICAgfSwgInloUGlwZVBvaW50c0xheWVyIik7CiAgICAgIH0KICAgICAgbGV0IGNvb3JkaW5hdGVzID0gZmVhdHVyZXMuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvaW50JyA/IGZlYXR1cmVzLmdlb21ldHJ5LmNvb3JkaW5hdGVzIDogZmVhdHVyZXMuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07CiAgICAgIHRoYXQuZmx5VG8oewogICAgICAgIHBvc2l0aW9uOiBjb29yZGluYXRlcywKICAgICAgICB6b29tOiAxNwogICAgICB9KTsKICAgIH0sCiAgICBsaXN0TGljaWsodmFsKSB7CiAgICAgIGxldCBuZXdEYXRhID0gdmFsLm5ldy5pdGVtOwogICAgICBsZXQgZmVhdHVyZXMgPSBbewogICAgICAgIHR5cGU6ICdmZWF0dXJlJywKICAgICAgICBnZW9tZXRyeTogSlNPTi5wYXJzZShuZXdEYXRhLmdlb20pLAogICAgICAgIHByb3BlcnRpZXM6IG5ld0RhdGEKICAgICAgfV07CiAgICAgIHRoaXMucmFuZ0NsaWNrKGZlYXR1cmVzKTsKICAgIH0sCiAgICAvKioNCiAgICAgKiDmj5DkvpvlnZDmoIfmlbDnu4TvvIzov5Tlm57kuK3lv4Pngrks6ZmQ57q/5ZKM6Z2iDQogICAgICogQHBhcmFtIHsqfSBwb3NpdGlvbiDlnZDmoIfmlbDnu4QNCiAgICAgKi8KICAgIGdldENlbnRlcihwb3NpdGlvbikgewogICAgICBsZXQgY29vcmQgPSBbXTsKICAgICAgbGV0IGNlbnRlcjsKICAgICAgaWYgKHBvc2l0aW9uIGluc3RhbmNlb2YgQXJyYXkgJiYgcG9zaXRpb24ubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgbGV0IHBvczEgPSBwb3NpdGlvblswXTsKICAgICAgICBpZiAocG9zMSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICBsZXQgcG9zMiA9IHBvczFbMF07CiAgICAgICAgICBpZiAocG9zMiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAgIGNlbnRlciA9IHR1cmYuY2VudGVyKHR1cmYucG9seWdvbihwb3NpdGlvbikpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2VudGVyID0gdHVyZi5jZW50ZXIodHVyZi5saW5lU3RyaW5nKHBvc2l0aW9uKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChjZW50ZXIpIHsKICAgICAgICBjb29yZCA9IGNlbnRlci5nZW9tZXRyeS5jb29yZGluYXRlczsKICAgICAgfQogICAgICByZXR1cm4gY29vcmQ7CiAgICB9LAogICAgcGFpbnRpbmdSYW5nZSh7CiAgICAgIHBvc2l0aW9uID0gW10sCiAgICAgIGNvbG9yID0gIiNmZjRhNGEiLAogICAgICBsaW5lV2lkdGggPSAzLAogICAgICBjaXJjbGVSYWRpdXMgPSAzLAogICAgICBib2xkQm9yZGVyLAogICAgICBib3JkZXJXaWR0aCA9IDUsCiAgICAgIGlzUmVwYWludCA9IHRydWUsCiAgICAgIGxpbmVEYXNoYXJyYXkKICAgIH0pIHsKICAgICAgbGV0IGZlYXR1cmVzID0gW107CiAgICAgIGlmIChwb3NpdGlvbiBpbnN0YW5jZW9mIEFycmF5ICYmIHBvc2l0aW9uWzBdIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICBsZXQgcG9zMSA9IHBvc2l0aW9uWzBdOwogICAgICAgIGlmIChwb3MxWzBdIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgIHBvc2l0aW9uLmZvckVhY2gobGluZSA9PiB7CiAgICAgICAgICAgIGxldCBmZWF0dXJlOwogICAgICAgICAgICBpZiAodGhpcy5nZXRBcnJheUdlbyhsaW5lKSA9PSAyKSB7CiAgICAgICAgICAgICAgZmVhdHVyZSA9IHR1cmYubGluZVN0cmluZyhsaW5lKTsKICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0QXJyYXlHZW8obGluZSkgPT0gMykgewogICAgICAgICAgICAgIGZlYXR1cmUgPSB0dXJmLm11bHRpTGluZVN0cmluZyhsaW5lKTsKICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0QXJyYXlHZW8obGluZSkgPT0gNCkgewogICAgICAgICAgICAgIGZlYXR1cmUgPSB0dXJmLnBvbHlnb25Ub0xpbmUodHVyZi5tdWx0aVBvbHlnb24obGluZSkpOwogICAgICAgICAgICAgIGZlYXR1cmUuZmVhdHVyZXMuZm9yRWFjaChmID0+IHsKICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGJvbGRCb3JkZXIgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgICBmZWF0dXJlcyA9IGZlYXR1cmVzLmNvbmNhdCh0dXJmLmxpbmVTdHJpbmcoYm9sZEJvcmRlciwgewogICAgICAgICAgICAgIG5hbWU6ICJib2xkQm9yZGVyIgogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHRoaXMuYWRkUmFuZ2VMYXllcjIoewogICAgICAgICAgICAgIGZlYXR1cmVzLAogICAgICAgICAgICAgIGNvbG9yLAogICAgICAgICAgICAgIGxpbmVXaWR0aCwKICAgICAgICAgICAgICBsaW5lRGFzaGFycmF5LAogICAgICAgICAgICAgIGJvcmRlcldpZHRoLAogICAgICAgICAgICAgIGlzUmVwYWludAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYWRkUmFuZ2VMYXllcjIoewogICAgICAgICAgICAgIGZlYXR1cmVzLAogICAgICAgICAgICAgIGNvbG9yLAogICAgICAgICAgICAgIGxpbmVXaWR0aCwKICAgICAgICAgICAgICBsaW5lRGFzaGFycmF5LAogICAgICAgICAgICAgIGlzUmVwYWludAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IGZlYXR1cmUgPSB0dXJmLmxpbmVTdHJpbmcocG9zaXRpb24pOwogICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTsKICAgICAgICAgIHRoaXMuYWRkUmFuZ2VMYXllcjIoewogICAgICAgICAgICBmZWF0dXJlcywKICAgICAgICAgICAgY29sb3IsCiAgICAgICAgICAgIGxpbmVXaWR0aCwKICAgICAgICAgICAgbGluZURhc2hhcnJheSwKICAgICAgICAgICAgaXNSZXBhaW50CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocG9zaXRpb24gaW5zdGFuY2VvZiBBcnJheSAmJiBwb3NpdGlvbi5sZW5ndGggIT09IDApIHsKICAgICAgICBsZXQgZmVhdHVyZSA9IHR1cmYucG9pbnQocG9zaXRpb24pOwogICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7CiAgICAgICAgdGhpcy5hZGRSYW5nZUxheWVyMih7CiAgICAgICAgICBmZWF0dXJlcywKICAgICAgICAgIGNvbG9yLAogICAgICAgICAgY2lyY2xlUmFkaXVzLAogICAgICAgICAgaXNSZXBhaW50CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hZGRSYW5nZUxheWVyMih7CiAgICAgICAgICBmZWF0dXJlcywKICAgICAgICAgIGNvbG9yLAogICAgICAgICAgaXNSZXBhaW50CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRBcnJheUdlbyhhcnIgPSBbXSkgewogICAgICBsZXQgbnVtID0gMDsKICAgICAgZnVuY3Rpb24gYmwoYXJyKSB7CiAgICAgICAgaWYgKGFyciBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICBudW0rKzsKICAgICAgICAgIGJsKGFyclswXSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJsKGFycik7CiAgICAgIHJldHVybiBudW07CiAgICB9LAogICAgYWRkUmFuZ2VMYXllcjIoewogICAgICBmZWF0dXJlcywKICAgICAgY29sb3IsCiAgICAgIGxpbmVXaWR0aCwKICAgICAgbGluZURhc2hhcnJheSwKICAgICAgY2lyY2xlUmFkaXVzLAogICAgICBib3JkZXJXaWR0aCwKICAgICAgaXNSZXBhaW50CiAgICB9KSB7CiAgICAgIC8vIGxldCB0aGF0ID0gdGhpczsKICAgICAgY29uc29sZS5sb2coJ2ZlYXR1cmVzIDo+PiAnLCBmZWF0dXJlcyk7CiAgICAgIGxldCBsYXllcklkID0gInJhbmdlTGF5ZXIyIjsKICAgICAgLy8gZnVuY3Rpb24gbWFrZUlkKGlkID0gInJhbmdlTGF5ZXIyIil7CiAgICAgIC8vICAgICBpZih0aGF0Lm1hcC5nZXRTb3VyY2UoaWQpKXsKICAgICAgLy8gICAgICAgICBtYWtlSWQoaWQrKykKICAgICAgLy8gICAgIH1lbHNlewogICAgICAvLyAgICAgICAgIGxheWVySWQgPSBpZDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gfQogICAgICAvLyBtYWtlSWQoKTsKICAgICAgaWYgKGlzUmVwYWludCkgewogICAgICAgIHRoaXMucmVtb3ZlUmFuZ2VMYXllcigpOwogICAgICB9CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRTb3VyY2UobGF5ZXJJZCwgewogICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXMKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoY2lyY2xlUmFkaXVzKSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICAgIGlkOiBsYXllcklkLAogICAgICAgICAgc291cmNlOiBsYXllcklkLAogICAgICAgICAgdHlwZTogImNpcmNsZSIsCiAgICAgICAgICBwYWludDogewogICAgICAgICAgICAiY2lyY2xlLXJhZGl1cyI6IGNpcmNsZVJhZGl1cywKICAgICAgICAgICAgImNpcmNsZS1jb2xvciI6IGNvbG9yCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAobGluZVdpZHRoKSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICAgIGlkOiBsYXllcklkLAogICAgICAgICAgc291cmNlOiBsYXllcklkLAogICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgImxpbmUtY29sb3IiOiBjb2xvciwKICAgICAgICAgICAgImxpbmUtd2lkdGgiOiBbJ2Nhc2UnLCBbJz09JywgWydnZXQnLCAnbmFtZSddLCAnYm9sZEJvcmRlciddLCBib3JkZXJXaWR0aCB8fCAwLCBsaW5lV2lkdGhdLAogICAgICAgICAgICAibGluZS1kYXNoYXJyYXkiOiBsaW5lRGFzaGFycmF5IHx8IFtdCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVSYW5nZUxheWVyKCkgewogICAgICBpZiAobWFwT2JqLm1hcEluc3RhbmNlLm1hcC5nZXRMYXllcigicmFuZ2VMYXllcjIiKSkgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5yZW1vdmVMYXllcigicmFuZ2VMYXllcjIiKTsKICAgICAgaWYgKG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0U291cmNlKCJyYW5nZUxheWVyMiIpKSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnJlbW92ZVNvdXJjZSgicmFuZ2VMYXllcjIiKTsKICAgIH0sCiAgICAvKioNCiAgICAgKiDngrnvvIzlpJrngrnvvIznur/vvIzlpJrnur/vvIzpnaLvvIzlpJrpnaLlrprkvY0NCiAgICAgKiBAcGFyYW0geyp9IHBvc2l0aW9uIOWumuS9jeWdkOaghw0KICAgICAqIEBwYXJhbSB7Kn0gcmVzZXQg6Iul5LiN5Lyg5Z2Q5qCH77yM5piv5ZCm5a6a5L2N5Yiw5Yid5aeL5L2N572uDQogICAgICovCiAgICBtYWtlTG9jYXRpb24ocG9zaXRpb24sIHJlc2V0ID0gdHJ1ZSkgewogICAgICBsZXQgdHlwZSA9ICcnOwogICAgICBpZiAocG9zaXRpb24gaW5zdGFuY2VvZiBBcnJheSAmJiBwb3NpdGlvbi5sZW5ndGggIT09IDApIHsKICAgICAgICBpZiAocG9zaXRpb25bMF0gaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgbGV0IHBvczEgPSBwb3NpdGlvblswXTsKICAgICAgICAgIGlmIChwb3MxWzBdIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgbGV0IHBvczIgPSBwb3MxWzBdOwogICAgICAgICAgICBpZiAocG9zMlswXSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAgICAgdmFyIG11bHRpcG9seWdvbiA9IHR1cmYubXVsdGlQb2x5Z29uKHBvc2l0aW9uKTsKICAgICAgICAgICAgICB2YXIgYmJveCA9IHR1cmYuYmJveChtdWx0aXBvbHlnb24pOwogICAgICAgICAgICAgIHZhciBiYm94UG9seWdvbiA9IHR1cmYuYmJveFBvbHlnb24oYmJveCk7CiAgICAgICAgICAgICAgdHlwZSA9ICdtdWx0aXBvbHlnb24nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBwb2x5Z29uID0gdHVyZi5wb2x5Z29uKHBvc2l0aW9uKTsKICAgICAgICAgICAgICB2YXIgYmJveCA9IHR1cmYuYmJveChwb2x5Z29uKTsKICAgICAgICAgICAgICB2YXIgYmJveFBvbHlnb24gPSB0dXJmLmJib3hQb2x5Z29uKGJib3gpOwogICAgICAgICAgICAgIHR5cGUgPSAncG9seWdvbic7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBsaW5lID0gdHVyZi5saW5lU3RyaW5nKHBvc2l0aW9uKTsKICAgICAgICAgICAgdmFyIGJib3ggPSB0dXJmLmJib3gobGluZSk7CiAgICAgICAgICAgIHZhciBiYm94UG9seWdvbiA9IHR1cmYuYmJveFBvbHlnb24oYmJveCk7CiAgICAgICAgICAgIHR5cGUgPSAnbGluZSc7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgdjIgPSBuZXcgbWFwYm94Z2wuTG5nTGF0Qm91bmRzKGJib3hQb2x5Z29uLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzBdLCBiYm94UG9seWdvbi5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsyXSk7CiAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmZpdEJvdW5kcyh2MiwgewogICAgICAgICAgICBsaW5lYXI6IGZhbHNlLAogICAgICAgICAgICBwYWRkaW5nOiB7CiAgICAgICAgICAgICAgdG9wOiA2MCwKICAgICAgICAgICAgICBib3R0b206IDYwLAogICAgICAgICAgICAgIGxlZnQ6IDYwLAogICAgICAgICAgICAgIHJpZ2h0OiA2MAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5mbHlUbyh7CiAgICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbiwKICAgICAgICAgICAgem9vbTogMTQKICAgICAgICAgIH0pOwogICAgICAgICAgdHlwZSA9ICdwb2ludCc7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHJlc2V0KSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5maXRCb3VuZHMoW1sxMjAuMzgxODg0ODQ0OTgwNDUsIDMwLjU2ODY4NTQ3NTc4MDg4XSwgWzExOS41MTU0OTA5NzU1NDI5NSwgMzAuMTc4MzU2OTg3NzIwNjEyXV0sIHsKICAgICAgICAgIGxpbmVhcjogZmFsc2UKICAgICAgICB9KTsKICAgICAgICB0eXBlID0gJ2VyclBvc2l0aW9uJzsKICAgICAgfQogICAgICByZXR1cm4gdHlwZTsKICAgIH0sCiAgICAvLyDliIfmjaLkvpvmsLTvvIzpm6jmsLTvvIzmsaHmsLTnk6bniYcKICAgIGFzeW5jIGNoYW5nZVBpcGVUaWxlTGF5ZXIoaW5zcEJ1c2luZXNzVHlwZSkgewogICAgICBtYXBPYmoubWFwSW5zdGFuY2UuYWRkU291cmNlKCdsaWdodExheWVyJywgewogICAgICAgIHR5cGU6ICJnZW9qc29uIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0eXBlOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICBpZDogImxpZ2h0UG9pbnQiLAogICAgICAgIHR5cGU6ICJzeW1ib2wiLAogICAgICAgIHNvdXJjZTogImxpZ2h0TGF5ZXIiLAogICAgICAgIGZpbHRlcjogWyI9PSIsICIkdHlwZSIsICJQb2ludCJdLAogICAgICAgIGxheW91dDogewogICAgICAgICAgJ2ljb24tc2l6ZSc6IDEuNCwKICAgICAgICAgICdpY29uLWltYWdlJzogWy4uLnRoaXMuR1NMLnNsaWNlKDAsIHRoaXMuR1NMLmxlbmd0aCAtIDEpLCAuLi50aGlzLldTTC5zbGljZSgxLCB0aGlzLldTTC5sZW5ndGggLSAxKSwgLi4udGhpcy5ZU0wuc2xpY2UoMSldLAogICAgICAgICAgJ2ljb24taWdub3JlLXBsYWNlbWVudCc6IHRydWUsCiAgICAgICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZQogICAgICAgIH0KICAgICAgfSwgImxpZ2h0TGF5ZXIiKTsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZExheWVyKHsKICAgICAgICBpZDogImxpZ2h0TGluZSIsCiAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgIHNvdXJjZTogImxpZ2h0TGF5ZXIiLAogICAgICAgIGZpbHRlcjogWyI9PSIsICIkdHlwZSIsICJMaW5lU3RyaW5nIl0sCiAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICdsaW5lLXdpZHRoJzogMywKICAgICAgICAgICdsaW5lLWNvbG9yJzogInJlZCIKICAgICAgICB9CiAgICAgIH0sICJsaWdodExheWVyIik7CiAgICAgIHRoaXMuYWRkQnVmZmVyTGF5ZXIoKTsKICAgICAgdGhpcy5hZGRSYW5nZUxheWVyKCk7CiAgICAgIHRoaXMuYWRkSW5zcFVzZXJMYXllcigpOwogICAgICB0aGlzLmFkZEtleVBvaW50TGF5ZXIoKTsKICAgICAgdGhpcy5pc09uTG9hZCA9IHRydWU7CiAgICB9LAogICAgLy8g6YCa6L+H5Lia5Yqh57G75Z6L5pS55Y+Y5Zu+5bGC5pi+56S6CiAgICBjaGFuZ2VQaXBlVGlsZUxheWVyQnlCdXNpbmVzcyh0eXBlKSB7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgIldBVEVSX1NVUFBMWSI6CiAgICAgICAgICB0aGlzLmdzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkodGhpcy5nc0xheWVyc1tpbmRleF0sICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy55c0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMueXNMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMud3NMYXllcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLndzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSQUlfV0FURVIiOgogICAgICAgICAgdGhpcy55c0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMueXNMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZ3NMYXllcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLmdzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLndzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkodGhpcy53c0xheWVyc1tpbmRleF0sICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUE9MTFVURURfV0FURVIiOgogICAgICAgICAgdGhpcy53c0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMud3NMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMueXNMYXllcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLnlzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmdzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkodGhpcy5nc0xheWVyc1tpbmRleF0sICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRoaXMud3NMYXllcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSh0aGlzLndzTGF5ZXJzW2luZGV4XSwgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnlzTGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuc2V0TGF5b3V0UHJvcGVydHkodGhpcy55c0xheWVyc1tpbmRleF0sICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5nc0xheWVycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLnNldExheW91dFByb3BlcnR5KHRoaXMuZ3NMYXllcnNbaW5kZXhdLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CiAgICAgICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRoYXQuaXNPbkxvYWRlZCgpKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UuY2hhbmdlQlpMYXllcih0eXBlKTsKICAgICAgICAgIH0KICAgICAgICB9LCAxMDApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDpgJrov4fkuJrliqHnsbvlnovmlLnlj5jlm77lsYLmmL7npLog5LiJ572R5ZCI5LiACiAgICBjaGFuZ2VMYXllckJ5QnVzaW5lc3MoewogICAgICBncyA9ICdub25lJywKICAgICAgeXMgPSAnbm9uZScsCiAgICAgIHdzID0gJ25vbmUnCiAgICB9KSB7CiAgICAgIGlmICghbWFwT2JqLm1hcEluc3RhbmNlKSByZXR1cm47CiAgICAgIGxldCBnc0xheWVyVHlwZSA9IExheWVyVHlwZVsn5L6b5rC0J11bMF0uY29uY2F0KExheWVyVHlwZVsn5L6b5rC0J11bMV0pOwogICAgICBsZXQgd3NMYXllclR5cGUgPSBMYXllclR5cGVbJ+axoeawtCddWzBdLmNvbmNhdChMYXllclR5cGVbJ+axoeawtCddWzFdKTsKICAgICAgbGV0IHlzTGF5ZXJUeXBlID0gTGF5ZXJUeXBlWyfpm6jmsLQnXVswXS5jb25jYXQoTGF5ZXJUeXBlWyfpm6jmsLQnXVsxXSk7CiAgICAgIGdzTGF5ZXJUeXBlLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eShpdGVtLmlkLCAndmlzaWJpbGl0eScsIGdzKTsKICAgICAgfSk7CiAgICAgIHlzTGF5ZXJUeXBlLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eShpdGVtLmlkLCAndmlzaWJpbGl0eScsIHlzKTsKICAgICAgfSk7CiAgICAgIHdzTGF5ZXJUeXBlLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eShpdGVtLmlkLCAndmlzaWJpbGl0eScsIHdzKTsKICAgICAgfSk7CiAgICAgIHRoaXMuaXNPbkxvYWQgPSB0cnVlOwogICAgfSwKICAgIC8vIOa3u+WKoOW3oeajgOS6uuWRmAogICAgYWRkSW5zcFVzZXJMYXllcigpIHsKICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLmFkZFNvdXJjZSgiaW5zcFVzZXIiLCB7CiAgICAgICAgdHlwZTogImdlb2pzb24iLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICB9LAogICAgICAgIGdlbmVyYXRlSWQ6IHRydWUKICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5hZGRMYXllcih7CiAgICAgICAgaWQ6ICJpbnNwVXNlckxheWVyIiwKICAgICAgICB0eXBlOiAic3ltYm9sIiwKICAgICAgICBzb3VyY2U6ICJpbnNwVXNlciIsCiAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAiaWNvbi1pbWFnZSI6ICJ1c2VySW5zcCIsCiAgICAgICAgICAiaWNvbi1zaXplIjogMC4yLAogICAgICAgICAgImljb24tYWxsb3ctb3ZlcmxhcCI6IHRydWUsCiAgICAgICAgICAvL+iHquWKqOmBv+iuqeWxnuaApwogICAgICAgICAgImljb24taWdub3JlLXBsYWNlbWVudCI6IHRydWUKICAgICAgICB9CiAgICAgIH0sICJ1bkluc3BMaW5lTGF5ZXIiKTsKICAgIH0sCiAgICBnZXREaXJlY3Rpb24oKSB7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbmFic29sdXRlJywgdGhpcy5zZXRSb3RhdGUpOwogICAgfSwKICAgIC8vIOiuvue9ruW3oeajgOS6uuWRmOS9jee9rgogICAgc2V0SW5zcFVzZXJQb3NpdGlvbihwb3NpdGlvbikgewogICAgICAvLyB4Q29kZe+8jHlDb2Rl5Li657uP57qs5bqmCiAgICAgIGNvbnN0IGNvb3JkID0gW3BhcnNlRmxvYXQocG9zaXRpb24ubG9uZ2l0dWRlKSwgcGFyc2VGbG9hdChwb3NpdGlvbi5sYXRpdHVkZSldOwogICAgICBjb25zdCBwb2ludCA9IHR1cmYucG9pbnQoY29vcmQpOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICAgIC8vIOWumuaXtuWZqAogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOWmguaenOWcsOWbvuWunuS+i+WIm+W7uuOAgeW3oeajgOS6uuWRmOWbvuWxguWtmOWcqOS4lOWKoOi9veWujOavlQogICAgICAgICAgaWYgKHRoYXQuaXNPbkxvYWRlZCgpICYmIG1hcE9iai5tYXAuZ2V0U291cmNlKCJpbnNwVXNlciIpICYmIG1hcE9iai5tYXAuaXNTb3VyY2VMb2FkZWQoImluc3BVc2VyIikpIHsKICAgICAgICAgICAgLy8g5riF6Zmk5a6a5pe25ZmoCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICAvLyDlt6Hmo4DkurrlkZjlm77moIcKICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEoImluc3BVc2VyIiwgewogICAgICAgICAgICAgIHR5cGU6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgICAgICAgZmVhdHVyZXM6IFtwb2ludF0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoYXQuZ2V0RGlyZWN0aW9uKCk7CiAgICAgICAgICAgIC8vIOWmguaenOW8gOWni+W3oeajgO+8jOWcsOWbvuS7peS6uuWRmOS4uuS4reW/gwogICAgICAgICAgICBsZXQgY2hhbmdlTGluZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzdGFydFJlY29yZExpbmVzIik7CiAgICAgICAgICAgIC8vIOWmguaenOS4iuaKpeS6i+S7tu+8jOWPlua2iOWcsOWbvuiuvue9ruS4reW/g+aTjeS9nAogICAgICAgICAgICBsZXQgaXNSZXBvcnRFdmVudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpc1JlcG9ydEV2ZW50Iik7CiAgICAgICAgICAgIC8vIGlmIChjaGFuZ2VMaW5lICYmICFpc1JlcG9ydEV2ZW50KSB7CiAgICAgICAgICAgIC8vICAgbWFwT2JqLm1hcC5zZXRDZW50ZXIoY29vcmQpOwogICAgICAgICAgICAvLyB9CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CiAgICB9LAogICAgc2V0Um90YXRlKGUpIHsKICAgICAgbGV0IGJlYXJpbmcgPSBlLmFscGhhIC0gMTgwID49IDAgPyAxODAgLSBlLmFscGhhIDogMTgwIC0gZS5hbHBoYTsKICAgICAgLy8g6LCD5pW0572X55uY5pa55ZCRCiAgICAgIG1hcE9iai5tYXAgJiYgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgiaW5zcFVzZXJMYXllciIsICJpY29uLXJvdGF0ZSIsIGJlYXJpbmcpOwogICAgfSwKICAgIC8vIOiuvue9ruW3oeajgOeuoee6v+S4uuW3suW3oeajgAogICAgY2hhbmdlSW5zcExpbmVTdGF0ZShnZW9tZXRyeSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIC8vIOWwhuWcsOeQhuWdkOagh+ezu+i9rOWMluS4uuWxj+W5leWdkOagh+ezuwogICAgICBmdW5jdGlvbiBnZW9UcmFuc1RvUGl4ZWwoZ2VvbSkgewogICAgICAgIGNvbnN0IHBvbHlnb25Cb3ggPSB0dXJmLmJib3goZ2VvbSk7CiAgICAgICAgY29uc3Qgc291dGhXZXN0ID0gW3BvbHlnb25Cb3hbMF0sIHBvbHlnb25Cb3hbMV1dOwogICAgICAgIGNvbnN0IG5vcnRoRWFzdCA9IFtwb2x5Z29uQm94WzJdLCBwb2x5Z29uQm94WzNdXTsKICAgICAgICBsZXQgc291dGhXZXN0UG9pbnRQaXhlbCA9IG1hcE9iai5tYXAucHJvamVjdChzb3V0aFdlc3QpOwogICAgICAgIGxldCBub3J0aEVhc3RQb2ludFBpeGVsID0gbWFwT2JqLm1hcC5wcm9qZWN0KG5vcnRoRWFzdCk7CiAgICAgICAgLy8g5aKe5aSnYmJveOeahOafpeivouiMg+WbtAogICAgICAgIHNvdXRoV2VzdFBvaW50UGl4ZWwgPSBbc291dGhXZXN0UG9pbnRQaXhlbC54IC0gNTAsIHNvdXRoV2VzdFBvaW50UGl4ZWwueSArIDUwXTsKICAgICAgICBub3J0aEVhc3RQb2ludFBpeGVsID0gW25vcnRoRWFzdFBvaW50UGl4ZWwueCArIDUwLCBub3J0aEVhc3RQb2ludFBpeGVsLnkgLSA1MF07CiAgICAgICAgcmV0dXJuIFtzb3V0aFdlc3RQb2ludFBpeGVsLCBub3J0aEVhc3RQb2ludFBpeGVsXTsKICAgICAgfQogICAgICAvLyDlr7nmr4/kuKrliJLliIblh7rmnaXnmoRiYm946L+b6KGM5aSE55CGCiAgICAgIGZ1bmN0aW9uIGNodW5rKGdlb20pIHsKICAgICAgICBsZXQgd2FzTG9hZGVkID0gZmFsc2U7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbignc291cmNlZGF0YScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICh3YXNMb2FkZWQpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGJveEZlYXR1cmVzID0gbWFwT2JqLm1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZ2VvVHJhbnNUb1BpeGVsKGdlb20pLCB7CiAgICAgICAgICAgIGxheWVyczogWyJpbml0SW5zcExpbmVMYXllciJdCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnNvbGUubG9nKGJveEZlYXR1cmVzLCAnYm94RmVhdHVyZXMnKTsKICAgICAgICAgIGxldCB0ZW1wUGlwZUxpc3QgPSBbXTsKICAgICAgICAgIGJveEZlYXR1cmVzLmZvckVhY2goZmVhdCA9PiB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgLy8gY29uc3QgcmVzdWx0ID0gdHVyZi5pbnRlcnNlY3QoZmVhdC5nZW9tZXRyeSwgZ2VvbWV0cnkpOwogICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHR1cmYuYm9vbGVhbkRpc2pvaW50KGZlYXQuZ2VvbWV0cnksIGdlb21ldHJ5KTsKICAgICAgICAgICAgICAvLyDlpoLmnpzmn6Xlh7rnmoTopoHntKDkuI7nnJ/lrp7nmoTojIPlm7Tnm7jkuqTkuJTmsqHmnInooqvlt6Hmo4Dov4fvvIzliJnmlLnlj5jlhbbnirbmgIEs5bm26K6w5b2V5YW25YWz6ZSu5a2XCiAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgJiYgIWZlYXQuc3RhdGUuaXNJbnNwKSB7CiAgICAgICAgICAgICAgICBtYXBPYmoubWFwLnNldEZlYXR1cmVTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIHNvdXJjZTogZmVhdC5zb3VyY2UsCiAgICAgICAgICAgICAgICAgIGlkOiBmZWF0LmlkCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGlzSW5zcDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZSA9IHRoYXQuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpdCBvZiB0ZW1wUGlwZUxpc3QpIHsKICAgICAgICAgICAgICAgICAgaWYgKGl0LnBpcGVJZCAhPSBmZWF0LmlkKSB7CiAgICAgICAgICAgICAgICAgICAgdGVtcFBpcGVMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgaW5zcERhdGU6IGRhdGUsCiAgICAgICAgICAgICAgICAgICAgICBwaXBlSWQ6IGZlYXQuaWQsCiAgICAgICAgICAgICAgICAgICAgICBwaXBlTGVuZ3RoOiBmZWF0LnByb3BlcnRpZXNbJ2xlbmd0aCddIHx8IDAsCiAgICAgICAgICAgICAgICAgICAgICB0YXNrSWQ6IHRoYXQuJHJvdXRlLnF1ZXJ5LnRhc2tJZAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0ZW1wUGlwZUxpc3QubGVuZ3RoID4gMCAmJiByZWNvcmRJbnNwTGluZSh0ZW1wUGlwZUxpc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygn566h57q/5LiK5Lyg5oiQ5YqfJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOWksei0peeahHRlbXBQaXBlTGlzdDogJywgdGVtcFBpcGVMaXN0KTsKICAgICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVkUGlwZUlkTGlzdC5wdXNoKC4uLnRlbXBQaXBlTGlzdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgd2FzTG9hZGVkID0gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjYihmZWF0dXJlcykgewogICAgICAgIGlmIChmZWF0dXJlcy5sZW5ndGggPiAwICYmIHRoYXQuaXNPbkxvYWRlZCgpKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgY2h1bmsoZmVhdHVyZXMuc2hpZnQoKSk7CiAgICAgICAgICAgIGNiKGZlYXR1cmVzKTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0KICAgICAgfQogICAgICBjYihbZ2VvbWV0cnldKTsKICAgIH0sCiAgICBmaW5kSGFkSW5zcEZlYXR1cmUoKSB7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAocmVjb3JkRmVhdHVyZXMubGVuZ3RoIDw9IDApIHsKICAgICAgICAgICAgcmVzb2x2ZShbXSk7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZGF0YSA9IFsuLi5uZXcgU2V0KHJlY29yZEZlYXR1cmVzKV07CiAgICAgICAgICBsZXQgZmlsdGVyRGF0YSA9IFsiaW4iLCAiZ3VpZCJdOwogICAgICAgICAgZGF0YS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICBmaWx0ZXJEYXRhLnB1c2goZGF0YVtpbmRleF0pOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0aGF0LmlzT25Mb2FkZWQoKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgicmFuZ2VQaXBlVmVjdG9yIikpIHsKICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uY2UoImRhdGEiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjb25zdCBib3hGZWF0dXJlcyA9IG1hcE9iai5tYXBJbnN0YW5jZS5tYXAucXVlcnlTb3VyY2VGZWF0dXJlcygicmFuZ2VQaXBlVmVjdG9yIiwgewogICAgICAgICAgICAgICAgICBzb3VyY2VMYXllcjogImxpbmUiLAogICAgICAgICAgICAgICAgICBmaWx0ZXI6IGZpbHRlckRhdGEKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYm94RmVhdHVyZXMuZm9yRWFjaChmZWF0ID0+IHsKICAgICAgICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5zZXRGZWF0dXJlU3RhdGUoewogICAgICAgICAgICAgICAgICAgIHNvdXJjZTogInJhbmdlUGlwZVZlY3RvciIsCiAgICAgICAgICAgICAgICAgICAgc291cmNlTGF5ZXI6ICJsaW5lIiwKICAgICAgICAgICAgICAgICAgICBpZDogZmVhdC5pZAogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgaW5zcDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmVzb2x2ZShib3hGZWF0dXJlcyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOagueaNrumAn+W6puaUueWPmOW3oeajgOeuoee6v+minOiJsgogICAgYXN5bmMgY2hhbmdlSW5zcExpbmVTb3VyY2VCeVNwZWVkKHBvc2l0aW9uKSB7CiAgICAgIGNvbnN0IGNvb3JkID0gW3BhcnNlRmxvYXQocG9zaXRpb24ubG9uZ2l0dWRlKSwgcGFyc2VGbG9hdChwb3NpdGlvbi5sYXRpdHVkZSldOwogICAgICAvLyBjb25zdCBjb29yZCA9IFsxMTUuOTQ2NjM4NzQxODMxNCwgMzkuMDY2Mzg5MTY1MDkyNDNdIC8vIOa1i+ivlQogICAgICBjb25zdCBwb2ludCA9IHR1cmYucG9pbnQoY29vcmQpOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICh0aGF0LmlzT25Mb2FkZWQoKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldFNvdXJjZSgiaW5zcFVzZXIiKSAmJiBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmlzU291cmNlTG9hZGVkKCJpbnNwVXNlciIpKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICBsZXQgY2hhbmdlTGluZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzdGFydFJlY29yZExpbmVzIik7CiAgICAgICAgICAgIGlmIChjaGFuZ2VMaW5lID09ICdzdGFydCcpIHsKICAgICAgICAgICAgICAvLyDmlLnlj5jlkajlm7TopoHntKDnmoTnirbmgIEKICAgICAgICAgICAgICBsZXQgYnVmZmVyZWQgPSB0dXJmLmJ1ZmZlcihwb2ludCwgMC4wMzUsIHsKICAgICAgICAgICAgICAgIHVuaXQ6ICdraWxvbWV0ZXJzJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoYXQuY2hhbmdlSW5zcExpbmVTdGF0ZShidWZmZXJlZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCAxMDApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmlrDlop7kuIrmiqXkuovku7ZtYXJrZXIKICAgIGFkZFJlcG9ydEV2ZW50TWFya2VyKHBvc2l0aW9uLCBjYWxsYmFjaykgewogICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgY29uc3Qgc3JjID0gcmVxdWlyZShgQC9hc3NldHMvaW1nL2xlZ2VuZC9ldmVudFBvaW50LnBuZ2ApOwogICAgICAvLyDlpoLmnpzlrZjlnKhpZOS4umV2ZW50UG9pbnRNYXJrZXLnmoTlhYPntKDvvIzliJnliKDpmaTmraTlhYPntKDph43mlrDliJvlu7rvvIzkv53mjIHlhajlsYDlj6rmnInkuIDkuKrmraTlhYPntKAKICAgICAgbGV0IGN1cnJlbnRFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXZlbnRQb2ludE1hcmtlciIpOwogICAgICBpZiAoY3VycmVudEVsZSkgewogICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgfQogICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICA8aW1nIGlkPSJldmVudFBvaW50TWFya2VyIiBzcmM9IiR7c3JjfSIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIj4KICAgICAgICBgOwogICAgICBsZXQgbWFya2VyID0gbWFwT2JqLm1hcEluc3RhbmNlLm5ld01hcmtlcih7CiAgICAgICAgZWxlbWVudDogZWxlLAogICAgICAgIG9mZnNldDogWzAsIDBdCiAgICAgICAgLy8gZHJhZ2dhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvc2l0aW9uKS5hZGRUbyhtYXBPYmoubWFwSW5zdGFuY2UubWFwKTsKCiAgICAgIC8vIGZ1bmN0aW9uIG9uRHJhZ0VuZCgpIHsKICAgICAgLy8gICBsZXQgbG5nTGF0ID0gbWFya2VyLmdldExuZ0xhdCgpOwogICAgICAvLyAgIGNvbnNvbGUubG9nKCJvbkRyYWdFbmQ9PT4iLCBsbmdMYXQpOwogICAgICAvLyAgIGNvbnN0IHBvcyA9IFtsbmdMYXQubG5nLCBsbmdMYXQubGF0XTsKICAgICAgLy8gICBidXMuJGVtaXQoImV2ZW50TWFya2VyUG9zaXRpb24iLCBwb3MpOwogICAgICAvLyB9CiAgICAgIC8vIG1hcmtlci5vbignZHJhZ2VuZCcsIG9uRHJhZ0VuZCk7CiAgICAgIC8vIOabtOaNoumAieS9jee9rueahOS6pOS6kumAu+i+kQogICAgICBmdW5jdGlvbiBvblRvdWNoRW5kKCkgewogICAgICAgIGxldCBsbmdMYXQgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldENlbnRlcigpOwogICAgICAgIGNvbnN0IHBvcyA9IFtsbmdMYXQubG5nLCBsbmdMYXQubGF0XTsKICAgICAgICBidXMuJGVtaXQoImV2ZW50TWFya2VyUG9zaXRpb24iLCBwb3MpOwogICAgICB9CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub24oJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCk7CiAgICAgIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKCkgewogICAgICAgIGxldCBsbmdMYXQgPSBtYXBPYmoubWFwSW5zdGFuY2UubWFwLmdldENlbnRlcigpOwogICAgICAgIGNvbnN0IHBvcyA9IFtsbmdMYXQubG5nLCBsbmdMYXQubGF0XTsKICAgICAgICBtYXJrZXIuc2V0TG5nTGF0KHBvcyk7CiAgICAgIH0KICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vbigndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUpOwogICAgICBmdW5jdGlvbiBvbk1vdmVFbmQoKSB7CiAgICAgICAgbGV0IGxuZ0xhdCA9IG1hcE9iai5tYXBJbnN0YW5jZS5tYXAuZ2V0Q2VudGVyKCk7CiAgICAgICAgY29uc3QgcG9zID0gW2xuZ0xhdC5sbmcsIGxuZ0xhdC5sYXRdOwogICAgICAgIG1hcmtlci5zZXRMbmdMYXQocG9zKTsKICAgICAgfQogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCdtb3ZlZW5kJywgb25Nb3ZlRW5kKTsKICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLm1hcC5vZmYoJ2NsaWNrJywgdGhpcy5jYWxsYmFjayk7CiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub24oJ2NsaWNrJywgY2FsbGJhY2spOwogICAgICB9CiAgICB9LAogICAgYWRkQWxsVmlld3NMYXllcnModHlwZSA9ICfkvpvmsLQnKSB7CiAgICAgIGNvbnN0IGxheWVyID0gbGF5ZXJzW3R5cGVdOwogICAgICBtYXBPYmoubWFwSW5zdGFuY2UubWFwLm9uKCdjbGljaycsIHRoaXMubGF5ZXJDbGljazEpOwogICAgICAobGF5ZXIgfHwgW10pLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgaWYgKCFtYXBPYmoubWFwLmdldExheWVyKGl0ZW0ubGF5ZXIuaWQpKSB7CiAgICAgICAgICBtYXBPYmoubWFwLmFkZExheWVyKGl0ZW0ubGF5ZXIpOwogICAgICAgICAgaWYgKGl0ZW0ubWFya0lkICYmICFtYXBPYmoubWFwLmdldExheWVyKGl0ZW0ubWFya0lkLmlkKSkgbWFwT2JqLm1hcC5hZGRMYXllcihpdGVtLm1hcmtJZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVBbGxWaWV3c0xheWVycyh0eXBlID0gJ+S+m+awtCcpIHsKICAgICAgY29uc3QgbGF5ZXIgPSBsYXllcnNbdHlwZV07CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZS5tYXAub2ZmKCdjbGljaycsIHRoaXMubGF5ZXJDbGljazEpOwogICAgICAobGF5ZXIgfHwgW10pLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoaXRlbS5sYXllci5pZCkpIHsKICAgICAgICAgIG1hcE9iai5tYXAucmVtb3ZlTGF5ZXIoaXRlbS5sYXllci5pZCk7CiAgICAgICAgICBpZiAoaXRlbS5tYXJrSWQgJiYgbWFwT2JqLm1hcC5nZXRMYXllcihpdGVtLm1hcmtJZC5pZCkpIHRoaXNtYXAucmVtb3ZlTGF5ZXIoaXRlbS5tYXJrSWQuaWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2V0QWxsVmlld3NMYXllcnNWaXNpYmxlKHR5cGUgPSAn5L6b5rC0JywgdmlzaWJsZSA9ICd2aXNpYmxlJykgewogICAgICBjb25zdCBsYXllciA9IGxheWVyc1t0eXBlXTsKICAgICAgKGxheWVyIHx8IFtdKS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChtYXBPYmoubWFwLmdldExheWVyKGl0ZW0ubGF5ZXIuaWQpKSB7CiAgICAgICAgICBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KGl0ZW0ubGF5ZXIuaWQsICd2aXNpYmlsaXR5JywgdmlzaWJsZSk7CiAgICAgICAgICBpZiAoaXRlbS5tYXJrSWQgJiYgbWFwT2JqLm1hcC5nZXRMYXllcihpdGVtLm1hcmtJZC5pZCkpIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoaXRlbS5tYXJrSWQuaWQsICd2aXNpYmlsaXR5JywgdmlzaWJsZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["gisDomain","actions","bus","showProperties2","Vue","mapboxgl","countTimePop","layers","axios","border","API","baseUrl","Toast","Popup","PopupItem","extend","turf","recordInspLine","CountTimePop","layer_yuhang_ws","layer_yuhang_gs","layer_yuhang_ys","layer_yuhang_ys_icon","layer_yuhang_ws_icon","layer_yuhang_gs_icon","paint","LayerType","mapObj","map","mapInstance","recordFeatures","name","data","uploadFiledPipeIdList","currentPoint","GSL","YSL","WSL","baseMapurl","bzLayerUrls","timer","gsUrl","ysUrl","wsUrl","swLayer","vm","deviceLayers","factoryNameMarkers","chooseDevice","diyPoint","marker","isOnLoad","event","databaseNames","gsDatabaseNames","ysDatabaseNames","wsDatabaseNames","databaseNames1","gsDatabaseNames1","ysDatabaseNames1","wsDatabaseNames1","gsLayers","ysLayers","wsLayers","recordTimer","currentKeyPoint","currentEmeMarker","callback","dataNames","navMarkers","featuresLine","areaMarkers","markersLinePoints","markersAreaPoints","allDistance","navigatorMarker","navigatorMarker2","lineMarkers","areaMarker","firstPoint","boxFeatures","multiTaskSAL","dictionary","eventTypeList","accessToken","$storage","get","formToken","created","url","VUE_APP_WPG_URL","method","params","token","headers","Authorization","then","res","status","resultData","mounted","methods","mapLoad","getEventTypeList","length","detailList","filter","item","code","indexOf","eventCodeList","forEach","concat","dictionaryDetailList","zh","title","isOnLoaded","addCommonLayer","addSuperStyleData","addPipeLayer","env","process","VUE_APP_ENV","VUE_APP_MAP_REQUEST_URL","JSON","parse","combineJsonData","Object","keys","sources","key","temp","tiles","replaceAll","addSource","layer","console","log","layout","visibility","defaultBaseLayers","push","addLayer","catch","e","finally","jsonData","addLineGeoLayer","id","type","source","addKeyPointLayer","pipeSettings","setting","getAction","maxzoom","addUser","features","getUserPosition","point","getPosition","setUserPosition","position","setSourceData","flyTo","zoom","coords","chooseFactory","factory","fac","fac0","remove","label","$api","orgNo","value","arr","iteration","shift","coordsArr","geom","coordinates","center","getCenter","ele","document","createElement","innerHTML","companyName","addMarker","makeLocation","paintingRange","lineDasharray","randomString","len","$chars","maxPos","pwd","i","charAt","Math","floor","random","initMarker","w","h","src","style","width","height","mapOnLoad","setInterval","clearInterval","addDeviceLayersClickEvent","that","isSW","layerId","on","layerClick1","layerClick","removeDeviceLayersClickEvent","off","index","findIndex","properties","device","operationMode","feature","geometry","splice","$emit","queryRenderedFeatures","x","y","deviceid","includes","display","location","location2","echoWxDeveice","addEventMarker","require","newMarker","element","setLngLat","setPopup","newPopup","offset","closeButton","setHTML","addTo","togglePopup","changeMap","changeBaseMap","addOrganizerMarker","distance","updateOrganizerPosition","getPopup","removeOrganizerMarker","startAddDiyPoint","AddDiyPoint","addDiyrMarker","lngLat","lng","lat","removeDiyMarker","endDiyPoint","addNavigatorPoint","addEventListener","val","ele2","marker2","addNavigatorPointsLine","getLayer","removeLayer","getSource","removeSource","Number","toFixed","addNavigatorPointsArea","polygon","area","addNavigationControl","addControl","NavigationControl","addFullscreenControl","FullscreenControl","addScaleControl","ScaleControl","clearNavigatorPoint","echoYhDeveice","uncured","curing","makePosition","bbox","fitBounds","padding","top","bottom","left","right","linear","getDataWithSpatial","datasetNames","getDataWithSpatialAtt","sql","getDataWithSql","showPology","checkPosition","tempFeature","find","inside","businessType","ptsWithin","within","featureCollection","setBuffer","radius","buffered","buffer","intersect","pologyBack","setLayoutProperty","removeAllYH","removeGroupLayer","getDataWithSpatialAndPipeLevel","inspBusinessType","pipeLevel","isSupply","drawBuffer","unit","addBufferLayer","addInspLayer","addRangeLayer","idx","addRangeMVT","removeRangeMVT","url_config","taskId","promoteId","setLineGeoSource","setRangeLayer","rangeList","ifEmergency","range","undefined","calibers","caliberVOS","endDate","signInBuffer","localStorage","getItem","feat","message","duration","setKeyPointLayer","addKeyPointMarker","ifDetail","engGeom","engNum","engId","getElementById","clickKeyPoint","stopPropagation","removeKeyPointMarker","ids","currentEle","parentNode","removeChild","changeKeyPointMarker","src2","removeInspEmeMarker","addInspEmeMarker","markerHTML","countTime","propsData","restTime","$mount","clickEmeMarker","addInspEventMarker","eventType","addInspEventLayer","loadImage","error","image","hasImage","addImage","addEventObjMarker","gridObj","$route","query","gridId","gridName","manhole_code","comb_code","bizType","manhole_type","layerID","layerType","road_name","gate_code","outlet_code","valve_code","pump_station_code","plant_code","pump_code","fire_cock_code","start_code","end_code","bigType","smallType","pipe_type","pop","deviceCode","isDevice","fun","goToDetail","$nextTick","$router","msg","removeEventObjMarker","addInspBufferData","devices","handleInspData","getInspDataInRange","featuresData","paramsObj","fieldNames","fieldValues","lxnIndex","it","pipeIndex","$set","ID","tempGeometry","points","stringify","getInspDataInRangeTile","pipeType","geomPoint","inspUser","unInspLineSource","isSourceLoaded","sourceData","_data","obj","reduce","next","changeInspLineSource","fromSource","toSource","fromSourceData","toSourceData","fromData","every","some","toData","setAllInspLineSource","addInspRecordLineSource","addInspRecordTileLineSource","completion","loading","Set","flag","filterData","querySourceFeatures","state","isInsp","setFeatureState","setRecordData","device_id","equipmentId","geomTemp","yhType","iconName","getIconName","features2","setHotData","hotdata","String","getRangs","getGridRangs","ifMulti","task","setRangFilter","done","setFilter","rangClick","approveStatus","listLicik","newData","new","coord","Array","pos1","pos2","lineString","color","lineWidth","circleRadius","boldBorder","borderWidth","isRepaint","line","getArrayGeo","multiLineString","polygonToLine","multiPolygon","f","addRangeLayer2","num","bl","removeRangeLayer","reset","multipolygon","bboxPolygon","v2","LngLatBounds","changePipeTileLayer","slice","addInspUserLayer","changePipeTileLayerByBusiness","changeBZLayer","changeLayerByBusiness","gs","ys","ws","gsLayerType","wsLayerType","ysLayerType","generateId","getDirection","window","setRotate","setInspUserPosition","parseFloat","longitude","latitude","changeLine","isReportEvent","bearing","alpha","changeInspLineState","geoTransToPixel","polygonBox","southWest","northEast","southWestPointPixel","project","northEastPointPixel","chunk","wasLoaded","tempPipeList","result","booleanDisjoint","date","$dayjs","format","pipeId","inspDate","pipeLength","cb","setTimeout","findHadInspFeature","Promise","resolve","reject","once","sourceLayer","insp","changeInspLineSourceBySpeed","addReportEventMarker","onTouchEnd","pos","onTouchMove","onMoveEnd","addAllViewsLayers","markId","removeAllViewsLayers","thismap","setAllViewsLayersVisible","visible"],"sources":["E:/ty_project/xasw-yy/revenue/xasw-mobile/src/views/inspectMap/mixins/mixins.js"],"sourcesContent":["import { gisDomain } from '../settings.js';\r\nimport * as actions from '../utils/action.js';\r\nimport bus from \"../utils/Bus.js\";\r\nimport { showProperties2 } from \"@/common/properties.js\";\r\nimport Vue from 'vue';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport countTimePop from \"../components/countTimePop.vue\";\r\nimport layers from './layerConfig';\r\nimport axios from 'axios';\r\nimport border from '../utils/border.json';\r\nimport API from '@/common/config.js';\r\nimport baseUrl from \"@/common/config.js\"\r\nimport { Toast } from 'fawkes-mobile-lib';\r\nimport Popup from '../components/popup.vue'\r\nconst PopupItem = Vue.extend(Popup)\r\nimport * as turf from '@turf/turf'\r\nimport { recordInspLine } from '../../inspectionManage/api.js'\r\nconst CountTimePop = Vue.extend(countTimePop);\r\nconst layer_yuhang_ws = [\r\n  {\r\n    \"id\": \"yuhangws_ws_wsg_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"filter\": ['all', ['has', 'caliber'], ['any', ['==', ['get', 'flowdir'], '0'], ['==', ['get', 'flowdir'], '1']]],\r\n    \"source\": \"yuhang_ws_wsg\",\r\n    \"source-layer\": \"ws_wsg\",\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      \"icon-image\": \"jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(145, 80, 9, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_wsg\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_ws_wsg\",\r\n    \"source-layer\": \"ws_wsg\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(145, 80, 9, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_pjg_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"source\": \"yuhang_ws_pjg\",\r\n    \"filter\": ['any', ['==', ['get', 'flowdir'], '0'], ['==', ['get', 'flowdir'], '1']],\r\n    \"source-layer\": \"ps_pjg\",\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      \"icon-image\": \"pjgjt\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"#F262FF\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_pjg\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_ws_pjg\",\r\n    \"source-layer\": \"ps_pjg\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"#F262FF\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_wsgwyj\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_ws_wsgwyj\",\r\n    \"source-layer\": \"ws_wsgwyj\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"#de5a03\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhangws_ws_wsgwyj_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"source\": \"yuhang_ws_wsgwyj\",\r\n    \"filter\": ['any', ['==', ['get', 'flowdir'], '0'], ['==', ['get', 'flowdir'], '1']],\r\n    \"source-layer\": \"ws_wsgwyj\",\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      \"icon-image\": \"wyjgxjt\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"#de5a03\", \"icon-color\": \"#de5a03\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  }\r\n];\r\nconst layer_yuhang_gs = [\r\n  {\r\n    \"id\": \"yuhanggs_gs_75mmyxgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_75mm\",\r\n    \"source-layer\": \"gs_75mmyxgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_75_300mmgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_75-300mm\",\r\n    \"source-layer\": \"gs_75_300mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_300_500mmgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_300-500mm\",\r\n    \"source-layer\": \"gs_300_500mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 13,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_500_800mmgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_500-800mm\",\r\n    \"source-layer\": \"gs_500_800mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 12,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_800mmysgd\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_800mm\",\r\n    \"source-layer\": \"gs_800mmysgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(57, 154, 234, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_ysgx\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_gs_ysgx\",\r\n    \"source-layer\": \"gs_ysgx\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(168, 168, 0, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  },\r\n  // {\r\n  //     \"id\": \"yuhanggs_gs_fqgx\",\r\n  //     \"type\": \"line\",\r\n  //     \"source\": \"yuhang_gs_fqgx\",\r\n  //     \"source-layer\": \"gs_fqgx\",\r\n  //     \"maxzoom\":24,\r\n  //     \"minzoom\": 15,\r\n  //     \"layout\": { \"visibility\": \"visible\" },\r\n  //     \"paint\": {\r\n  //         \"line-color\": \"rgba(168, 168, 0, 1)\",\r\n  //         \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n  //     }\r\n  // },\r\n  {\r\n    \"id\": \"yuhanggs_gs_75mmyxgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_75mm\",\r\n    \"source-layer\": \"gs_75mmyxgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_75_300mmgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_75-300mm\",\r\n    \"source-layer\": \"gs_75_300mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_300_500mmgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_300-500mm\",\r\n    \"source-layer\": \"gs_300_500mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 13,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_500_800mmgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_500-800mm\",\r\n    \"source-layer\": \"gs_500_800mmgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 12,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  {\r\n    \"id\": \"yuhanggs_gs_800mmysgd_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_800mm\",\r\n    \"source-layer\": \"gs_800mmysgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n  // {\r\n  //     \"id\": \"yuhanggs_gs_gsqtgjgd_symbol\",\r\n  //     \"type\": \"symbol\",\r\n  //     \"source\": \"yuhang_gs_gsqtgjgd\",\r\n  //     \"source-layer\": \"gs_gsqtgjgd\",\r\n  //     \"maxzoom\":24,\r\n  //     \"minzoom\": 16,\r\n  //     \"layout\": {\r\n  //         \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n  //         \"symbol-placement\": \"line\",\r\n  //         \"symbol-spacing\": [\r\n  //             'interpolate',\r\n  //             ['linear'],\r\n  //             ['zoom'],\r\n  //             10,\r\n  //             5,\r\n  //             15,\r\n  //             50,\r\n  //             18,\r\n  //             100\r\n  //         ],\r\n  //         \"icon-allow-overlap\": true,\r\n  //         \"icon-rotation-alignment\": \"map\",\r\n  //         \"text-rotate\": 0,\r\n  //         \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n  //         \"text-size\": 16,\r\n  //         \"text-allow-overlap\": true,\r\n  //         \"text-ignore-placement\": true,\r\n  //         \"text-pitch-alignment\": \"map\",\r\n  //         \"text-rotation-alignment\": \"map\",\r\n  //         \"text-anchor\": \"center\",\r\n  //         \"text-offset\": [0, 1],\r\n  //         \"icon-padding\": 2,\r\n  //         \"icon-offset\": [0, -5],\r\n  //         \"text-padding\": 0,\r\n  //         \"icon-text-fit\": \"none\",\r\n  //         // \"icon-image\": \"GS-jiantou\",\r\n  //         \"text-max-width\": 10,\r\n  //         \"icon-ignore-placement\": true,\r\n  //         \"symbol-z-order\": \"auto\",\r\n  //         \"text-justify\": \"center\",\r\n  //         \"text-writing-mode\": [],\r\n  //         \"icon-size\": 1.6,\r\n  //         \"visibility\": \"visible\"\r\n  //     },\r\n  //     \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\",'text-halo-color':\"#ffffff\",'text-halo-width':1 }\r\n  // },\r\n  {\r\n    \"id\": \"yuhanggs_gs_ysgx_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_gs_ysgx\",\r\n    \"source-layer\": \"gs_ysgx\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      // \"icon-image\": \"GS-jiantou\",\r\n      \"text-max-width\": 12,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(57, 154, 234, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  },\r\n];\r\nconst layer_yuhang_ys = [\r\n  {\r\n    \"id\": \"yuhangys_ys_ysg\",\r\n    \"type\": \"line\",\r\n    \"source\": \"yuhang_ys_ysg\",\r\n    \"source-layer\": \"ys_ysg\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": { \"visibility\": \"visible\" },\r\n    \"paint\": {\r\n      \"line-color\": \"rgba(39, 54, 155, 1)\",\r\n      \"line-width\": [\"+\", [\"/\", [\"to-number\", [\"get\", \"caliber\"]], 500], 0.2]\r\n    }\r\n  }, {\r\n    \"id\": \"yuhangys_ys_ysg_symbol\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ys_ysg\",\r\n    \"source-layer\": \"ys_ysg\",\r\n    \"filter\": ['any', ['==', ['get', 'flowdir'], '0'], ['==', ['get', 'flowdir'], '1']],\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 10,\r\n    \"layout\": {\r\n      \"text-field\": [\"concat\", \"DN\", [\"get\", \"caliber\"]],\r\n      \"symbol-placement\": \"line\",\r\n      \"symbol-spacing\": [\r\n        'interpolate',\r\n        ['linear'],\r\n        ['zoom'],\r\n        10,\r\n        5,\r\n        15,\r\n        50,\r\n        18,\r\n        100\r\n      ],\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-rotation-alignment\": \"map\",\r\n      \"text-rotate\": 0,\r\n      \"icon-rotate\": [\"*\", [\"to-number\", [\"get\", \"flowdir\"]], 180],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n      \"text-offset\": [0, 1],\r\n      \"icon-padding\": 2,\r\n      \"icon-offset\": [0, -5],\r\n      \"text-padding\": 0,\r\n      \"icon-text-fit\": \"none\",\r\n      \"icon-image\": \"YS-jiantou\",\r\n      \"text-max-width\": 10,\r\n      \"icon-ignore-placement\": true,\r\n      \"symbol-z-order\": \"auto\",\r\n      \"text-justify\": \"center\",\r\n      \"text-writing-mode\": [],\r\n      \"icon-size\": 1.6,\r\n      \"visibility\": \"visible\"\r\n    },\r\n    \"paint\": { \"text-color\": \"rgba(39, 54, 155, 1)\", \"icon-color\": \"rgba(59, 55, 55, 1)\", 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n  }\r\n];\r\nconst layer_yuhang_ys_icon = [\r\n  {\r\n    //雨水口\r\n    \"id\": \"yuhangws_ys_ysk\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ys_ysk\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"source-layer\": \"ys_ysk\",\r\n    \"layout\": {\r\n      \"icon-image\": \"yushui-yushuikou\",\r\n      \"icon-size\": 1\r\n    }\r\n  }, {\r\n    //雨水井\r\n    \"id\": \"yuhangys_ys_ysjcj\",\r\n    \"type\": \"symbol\",\r\n    \"minzoom\": 15,\r\n    \"maxzoom\": 24,\r\n    \"source\": \"yuhang_ys_ysj\",\r\n    \"source-layer\": \"ys_ysj\",\r\n    \"layout\": {\r\n      \"icon-image\": \"yushui-yushuijing\",\r\n      \"icon-size\": 1\r\n    },\r\n    // 'paint':{\r\n    //     'circle-color':\"red\",\r\n    //     'circle-radius':3\r\n    // }\r\n  }, {\r\n    //节点\r\n    \"id\": \"yuhangys_ys_ysjd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ys_ysgd\",\r\n    \"source-layer\": \"ys_ysgd\",\r\n    \"layout\": {\r\n      \"icon-image\": \"雨水\",\r\n      \"icon-size\": 1\r\n    }\r\n  }, {\r\n    //雨水排放口\r\n    \"id\": \"yuhangys_ys_yspfk\",\r\n    \"type\": \"symbol\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"source\": \"yuhang_ys_yspfk\",\r\n    \"source-layer\": \"ys_yspfk\",\r\n    \"layout\": {\r\n      \"icon-image\": \"yushui-paifangkou\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  // {   \r\n  //     //监测点\r\n  //     \"id\": \"yuhangys_ys_ysjcd\",\r\n  //     \"type\": \"symbol\",\r\n  //     \"source\": \"yuhang_ys_ysjcd\",\r\n  //     \"maxzoom\":24,\r\n  //     \"minzoom\": 15,\r\n  //     \"source-layer\": \"ys_ysjcd\",\r\n  //     \"layout\":{\r\n  //         \"icon-image\":\"yushui-jiancedian\",\r\n  //         \"icon-size\":1\r\n  //     }\r\n  // },\r\n  {\r\n    //雨水泵站\r\n    \"id\": \"yuhangys_ys_ysbz\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ys_ysbz\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"source-layer\": \"ys_ysbz\",\r\n    'filter': [\r\n      'any',\r\n      ['all', ['==', ['get', 'display_level'], 1], ['>=', ['zoom'], 11]],\r\n      ['all', ['==', ['get', 'display_level'], 2], ['>=', ['zoom'], 12]],\r\n      ['all', ['==', ['get', 'display_level'], 3], ['>=', ['zoom'], 13]]\r\n    ],\r\n    \"layout\": {\r\n      \"icon-image\": \"yushui-bengzhan\",\r\n      \"icon-size\": 1,\r\n      \"text-field\": [\"get\", \"name\"],\r\n      \"text-offset\": [0, 1],\r\n      \"text-size\": 10,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n    }\r\n  }\r\n]\r\nconst layer_yuhang_ws_icon = [\r\n  {\r\n    \"id\": \"yuhangws_ws_wsc\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsc\",\r\n    \"source-layer\": \"ws_wsc\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 11,\r\n    \"layout\": {\r\n      \"visibility\": \"visible\",\r\n      \"icon-image\": \"wushui-shuichang\",\r\n      \"icon-allow-overlap\": true,\r\n      \"icon-ignore-placement\": true,\r\n      \"icon-size\": 1,\r\n      \"text-field\": [\"get\", \"name\"],\r\n      \"text-offset\": [0, 1],\r\n      \"text-size\": 16,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n    }\r\n  },\r\n  {\r\n    //闸门\r\n    \"id\": \"yuhangws_ws_wszm\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wszm\",\r\n    \"source-layer\": \"ws_wszm\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 14,\r\n    \"layout\": {\r\n      \"icon-rotate\": 360,\r\n      \"icon-image\": \"wushui-zhamen\",\r\n    }\r\n  },\r\n  {\r\n    //污水口\r\n    \"id\": \"yuhangws_ws_wsk\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsk\",\r\n    \"source-layer\": \"ws_wsk\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-wushuikou\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //管点\r\n    \"id\": \"yuhangws_ws_wsgd\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsgd\",\r\n    \"source-layer\": \"ws_wsgd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //排放口\r\n    \"id\": \"yuhangws_ws_wspfk\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wspfk\",\r\n    \"source-layer\": \"ws_wspfk\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-paifangkou\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //泵站\r\n    \"id\": \"yuhangws_ws_wsbz\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsbz\",\r\n    \"source-layer\": \"ws_wsbz_with_iot\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    'filter': [\r\n      'any',\r\n      ['all', ['==', ['get', 'display_level'], 1], ['>=', ['zoom'], 11]],\r\n      ['all', ['==', ['get', 'display_level'], 2], ['>=', ['zoom'], 12]],\r\n      ['all', ['==', ['get', 'display_level'], 3], ['>=', ['zoom'], 13]]\r\n    ],\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-bengzhan\",\r\n      \"icon-size\": 1,\r\n      \"text-field\": [\"get\", \"name\"],\r\n      \"text-offset\": [0, 1],\r\n      \"text-size\": 10,\r\n      \"text-allow-overlap\": true,\r\n      \"text-ignore-placement\": true,\r\n      \"text-pitch-alignment\": \"map\",\r\n      \"text-rotation-alignment\": \"map\",\r\n      \"text-anchor\": \"center\",\r\n    }\r\n  },\r\n  {\r\n    //阀门\r\n    \"id\": \"yuhangws_ws_wsfm\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsfm\",\r\n    \"source-layer\": \"ws_wsfm\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-famen\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //污水井\r\n    \"id\": \"yuhangws_ws_wsj\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsj\",\r\n    \"source-layer\": \"ws_wsj\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-wushuijing\",\r\n      \"icon-size\": 1\r\n    }\r\n  },\r\n  {\r\n    //监测点\r\n    \"id\": \"yuhangws_ws_wsjcd\",\r\n    \"type\": \"symbol\",\r\n    \"source\": \"yuhang_ws_wsjcd\",\r\n    \"source-layer\": \"ws_wsjcd\",\r\n    \"maxzoom\": 24,\r\n    \"minzoom\": 15,\r\n    \"layout\": {\r\n      \"icon-image\": \"wushui-jiancedian\",\r\n      \"icon-size\": 1\r\n    }\r\n  }\r\n]\r\nconst layer_yuhang_gs_icon = [{\r\n  //供水泵站\r\n  \"id\": \"yuhanggs_gs_gsbz\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_gsbz\",\r\n  \"source-layer\": \"gs_jyd\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 10,\r\n  'filter': [\r\n    'any',\r\n    ['all', ['==', ['get', 'display_level'], 1], ['>=', ['zoom'], 11]],\r\n    ['all', ['==', ['get', 'display_level'], 2], ['>=', ['zoom'], 12]],\r\n    ['all', ['==', ['get', 'display_level'], 3], ['>=', ['zoom'], 13]]\r\n  ],\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-bengzhan\",\r\n    \"icon-size\": 1,\r\n    \"text-field\": [\"get\", \"name\"],\r\n    \"text-offset\": [0, 1],\r\n    \"text-size\": 10,\r\n    \"text-allow-overlap\": true,\r\n    \"text-ignore-placement\": true,\r\n    \"text-pitch-alignment\": \"map\",\r\n    \"text-rotation-alignment\": \"map\",\r\n    \"text-anchor\": \"center\",\r\n  }\r\n},\r\n{\r\n  //供水阀门\r\n  \"id\": \"yuhanggs_gs_fm\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_fm\",\r\n  \"source-layer\": \"gs_fm\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 17,\r\n  \"layout\": {\r\n    \"icon-image\": [\r\n      'case',\r\n      ['==', ['get', 'display'], '减压阀'],\r\n      'gongshui-jianyafa',\r\n      'yibanfamen'\r\n    ],\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //自来水厂\r\n  \"id\": \"yuhanggs_gs_gsc\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_gsc\",\r\n  \"source-layer\": \"gs_gsc\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 10,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-shuichang\",\r\n    \"icon-size\": 1,\r\n    \"icon-allow-overlap\": true,\r\n    \"icon-ignore-placement\": true,\r\n    \"text-field\": [\"get\", \"name\"],\r\n    \"text-offset\": [0, 1],\r\n    \"text-size\": 16,\r\n    \"text-allow-overlap\": true,\r\n    \"text-ignore-placement\": true,\r\n    \"text-pitch-alignment\": \"map\",\r\n    \"text-rotation-alignment\": \"map\",\r\n    \"text-anchor\": \"center\",\r\n  },\r\n  paint: { 'text-halo-color': \"#ffffff\", 'text-halo-width': 1 }\r\n}, {\r\n  //水表箱\r\n  \"id\": \"yuhanggs_gs_sbx\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_sbx\",\r\n  \"source-layer\": \"gs_sbx\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 18,\r\n  \"layout\": {\r\n    \"icon-image\": \"shuibiaoxiangkuang\",\r\n    \"icon-size\": 1,\r\n    \"text-field\": [\r\n      'case',\r\n      ['to-boolean', [\"get\", \"metercnt\"]],\r\n      '0',\r\n      [\"get\", \"metercnt\"]\r\n    ],\r\n    \"text-size\": 12,\r\n    \"text-allow-overlap\": true,\r\n    \"text-ignore-placement\": true,\r\n    \"text-anchor\": \"center\",\r\n  },\r\n  paint: {\r\n    \"text-color\": '#399aea',\r\n  }\r\n},\r\n{\r\n  //监测点\r\n  \"id\": \"yuhanggs_gs_jcd\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_gsjcd\",\r\n  \"source-layer\": \"gs_monitor\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 14,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-jiancedian\",\r\n    \"icon-size\": 1,\r\n    \"text-offset\": [0, 1],\r\n    \"text-size\": 10,\r\n    \"text-allow-overlap\": true,\r\n    \"text-ignore-placement\": true,\r\n    \"text-pitch-alignment\": \"map\",\r\n    \"text-rotation-alignment\": \"map\",\r\n    \"text-anchor\": \"center\",\r\n  }\r\n},\r\n{\r\n  //节点\r\n  \"id\": \"yuhanggs_gs_jd\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_ljd\",\r\n  \"source-layer\": \"gs_ljd\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 18,\r\n  \"layout\": {\r\n    \"icon-image\": \"供水\",\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //消火栓\r\n  \"id\": \"yuhanggs_gs_xhs\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_xfs\",\r\n  \"source-layer\": \"gs_xfs\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 16,\r\n  \"layout\": {\r\n    \"icon-image\": \"xiaohuoshuan\",\r\n    \"icon-size\": 1\r\n  }\r\n},\r\n{\r\n  //排气阀\r\n  \"id\": \"yuhanggs_gs_pqf\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_pqf\",\r\n  \"source-layer\": \"gs_pqf\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 15,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-paiqifa\",\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //排污阀\r\n  \"id\": \"yuhanggs_gs_pwf\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_pwf\",\r\n  \"source-layer\": \"gs_pwf\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 15,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-paiwufa\",\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //排污口\r\n  \"id\": \"yuhanggs_gs_pwk\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_pwk\",\r\n  \"source-layer\": \"gs_pwk\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 15,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-paiwukou\",\r\n    \"icon-size\": 1\r\n  }\r\n}, {\r\n  //预留口\r\n  \"id\": \"yuhanggs_gs_ylk\",\r\n  \"type\": \"symbol\",\r\n  \"source\": \"yuhang_gs_ylk\",\r\n  \"source-layer\": \"gs_ylk\",\r\n  \"maxzoom\": 24,\r\n  \"minzoom\": 15,\r\n  \"layout\": {\r\n    \"icon-image\": \"gongshui-yuliukou\",\r\n    \"icon-size\": 1\r\n  }\r\n},\r\n]\r\nconst LayerType = {\r\n  '供水': [layer_yuhang_gs, layer_yuhang_gs_icon],\r\n  '雨水': [layer_yuhang_ys, layer_yuhang_ys_icon],\r\n  '污水': [layer_yuhang_ws, layer_yuhang_ws_icon],\r\n}\r\nconst mapObj = {\r\n  map: null,\r\n  mapInstance: null\r\n}\r\nconst recordFeatures = []\r\nexport default {\r\n  name: \"mixins\",\r\n  data() {\r\n    return {\r\n      uploadFiledPipeIdList: [], // 上传失败的已巡检管线id\r\n      currentPoint: null,\r\n      GSL: [\r\n        \"case\",\r\n        [\r\n          \"any\",\r\n          [\"==\", [\"get\", \"SBLB\"], \"FM\"],\r\n          [\"==\", [\"get\", \"SBLB\"], \"PQF\"],\r\n          [\"==\", [\"get\", \"SBLB\"], \"PNF\"],\r\n        ],\r\n        \"ybfm\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"JYD\"],\r\n        \"gs-bz\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"PWK\"],\r\n        \"ybfm\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"XHS\"],\r\n        \"xhs\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"DB\"],\r\n        \"zdyh\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"JSD\"],\r\n        \"sbx\",\r\n        // ['==',['get', \"SBLB\"], '自来水厂'],'供水-水厂',\r\n        \"gs\",\r\n      ],\r\n      YSL: [\r\n        \"case\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"泵站\"],\r\n        \"ys-bz\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"排放口\"],\r\n        \"ys-pfk\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"雨水口\"],\r\n        \"ys-ysk\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"雨水井\"],\r\n        \"ys-ysj\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"监测点\"],\r\n        \"ys-jcd\",\r\n        \"ys\",\r\n      ],\r\n      WSL: [\r\n        \"case\",\r\n        [\r\n          \"any\",\r\n          [\"==\", [\"get\", \"SBLB\"], \"FM\"],\r\n          [\"==\", [\"get\", \"SBLB\"], \"污水阀门\"],\r\n          [\"==\", [\"get\", \"SBLB\"], \"P污水闸门NF\"],\r\n        ],\r\n        \"ybfm\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"泵站\"],\r\n        \"ws-bz\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"排放口\"],\r\n        \"ws-pfk\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"污水口\"],\r\n        \"ws-wsk\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"污水井\"],\r\n        \"ws-wsj\",\r\n        [\"==\", [\"get\", \"SBLB\"], \"监测点\"],\r\n        \"ws-jcd\",\r\n        // ['==',['get', \"SBLB\"], '污水厂'], \"wushui-shuichang\",\r\n        \"ws\",\r\n      ],\r\n\r\n      baseMapurl: [\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuHangShuiWuDiTuQiePian/restjsr/v1/vectortile/maps/余杭水务底图切片/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-JianZhuHeLvDi/restjsr/v1/vectortile/maps/建筑和绿地/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuHangQuHangZhengQuHuaShiLiangWaPian/restjsr/v1/vectortile/maps/余杭区行政区划矢量瓦片/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuHangShuiWuLuWangShuiXiDiTuQiePian/restjsr/v1/vectortile/maps/余杭水务路网水系底图切片/style.json\",\r\n      ],\r\n      bzLayerUrls: [\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-GongShuiGuanXianBiaoZhu/restjsr/v1/vectortile/maps/供水管线标注/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuShuiGuanXianBiaoZhu2/restjsr/v1/vectortile/maps/雨水管线标注/style.json\",\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-WuShuiGuanXianBiaoZhu2/restjsr/v1/vectortile/maps/污水管线标注/style.json\",\r\n      ],\r\n      timer: [],\r\n      //供水矢量瓦片服务\r\n      gsUrl:\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-GongShui/restjsr/v1/vectortile/maps/供水/style.json\",\r\n      //雨水矢量瓦片服务\r\n      ysUrl:\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-YuShui/restjsr/v1/vectortile/maps/雨水/style.json\",\r\n      //污水矢量瓦片服务\r\n      wsUrl:\r\n        gisDomain +\r\n        \"/iserver/services/map-mvt-WuShui/restjsr/v1/vectortile/maps/污水/style.json\",\r\n\r\n      swLayer: {\r\n        '供水': [],\r\n        '雨水': [],\r\n        '污水': [],\r\n      },\r\n      vm: null,\r\n      deviceLayers: [],\r\n      factoryNameMarkers: [],\r\n\r\n      //选中设施\r\n      chooseDevice: [],\r\n\r\n      diyPoint: {},\r\n      //协办人\r\n      marker: null,\r\n      isOnLoad: false,\r\n      event: \"\",\r\n\r\n      databaseNames: ['供水:供水管道', '供水:T75mm以下管道', '供水:T800mm以上管道', '供水:T75_300mm管道', '供水:T300_500mm管道', '供水:T500_800mm管道', '供水:排气阀', '供水:排污阀', '供水:阀门', '网络分析:雨水管', '网络分析:雨水井', '网络分析:雨水泵站', '网络分析:雨水口', '网络分析:雨水排放口', '网络分析:雨水管点', '网络分析:污水管', '网络分析:污水井', '网络分析:污水泵站', '网络分析:污水口', '网络分析:污水排放口', '网络分析:污水阀门', '网络分析:污水管点', '网络分析:污水监测点', '供水:三通', '供水:消防栓', '供水:连接点', '供水:加压点', '供水:四通', '供水:预留口', '供水:水表箱', '供水:排污口', '供水:大表'],\r\n\r\n      gsDatabaseNames: ['供水:供水管道', '供水:T75mm以下管道', '供水:T800mm以上管道', '供水:T75_300mm管道', '供水:T300_500mm管道', '供水:T500_800mm管道', '供水:排气阀', '供水:排污阀', '供水:阀门', '供水:三通', '供水:消防栓', '供水:连接点', '供水:加压点', '供水:四通', '供水:预留口', '供水:水表箱', '供水:排污口', '供水:大表'],\r\n      ysDatabaseNames: ['网络分析:雨水管', '网络分析:雨水井', '网络分析:雨水泵站', '网络分析:雨水口', '网络分析:雨水排放口', '网络分析:雨水管点'],\r\n      wsDatabaseNames: ['网络分析:污水管', '网络分析:污水井', '网络分析:污水泵站', '网络分析:污水口', '网络分析:污水排放口', '网络分析:污水阀门', '网络分析:污水管点', '网络分析:污水监测点'],\r\n\r\n      databaseNames1: ['供水:排气阀', '供水:排污阀', '供水:阀门', '网络分析:雨水管', '网络分析:雨水井', '网络分析:雨水泵站', '网络分析:雨水口', '网络分析:雨水排放口', '网络分析:雨水管点', '网络分析:污水管', '网络分析:污水井', '网络分析:污水泵站', '网络分析:污水口', '网络分析:污水排放口', '网络分析:污水阀门', '网络分析:污水管点', '网络分析:污水监测点', '供水:三通', '供水:消防栓', '供水:连接点', '供水:加压点', '供水:四通', '供水:预留口', '供水:水表箱', '供水:排污口', '供水:大表'],\r\n\r\n      gsDatabaseNames1: ['供水:排气阀', '供水:排污阀', '供水:阀门', '供水:三通', '供水:消防栓', '供水:连接点', '供水:加压点', '供水:四通', '供水:预留口', '供水:水表箱', '供水:排污口', '供水:大表'],\r\n      ysDatabaseNames1: ['网络分析:雨水管', '网络分析:雨水井', '网络分析:雨水泵站', '网络分析:雨水口', '网络分析:雨水排放口', '网络分析:雨水管点'],\r\n      wsDatabaseNames1: ['网络分析:污水管', '网络分析:污水井', '网络分析:污水泵站', '网络分析:污水口', '网络分析:污水排放口', '网络分析:污水阀门', '网络分析:污水管点', '网络分析:污水监测点'],\r\n\r\n      gsLayers: [],\r\n      ysLayers: [],\r\n      wsLayers: [],\r\n      recordTimer: null,\r\n      // 当前关键点\r\n      currentKeyPoint: null,\r\n      // 当前应急任务的marker\r\n      currentEmeMarker: null,\r\n      callback: null,\r\n      dataNames: [],\r\n      navMarkers: [],\r\n      featuresLine: [],\r\n      areaMarkers: [],\r\n      markersLinePoints: [],\r\n      markersAreaPoints: [],\r\n      allDistance: null,\r\n      navigatorMarker: null,\r\n      navigatorMarker2: null,\r\n      lineMarkers: [],\r\n      areaMarker: null,\r\n      firstPoint: [],\r\n      boxFeatures: [],\r\n      multiTaskSAL: [],\r\n\r\n      // 字典\r\n      dictionary: {},\r\n      eventTypeList: {},\r\n      accessToken: this.$storage.get('access_token'),\r\n      formToken: ''\r\n    }\r\n  },\r\n  created() {\r\n    // 获取header，查询工单用\r\n    axios({\r\n      url: API.VUE_APP_WPG_URL + '/main/userCenterApi/sso/tokenByToken',\r\n      method: 'post',\r\n      params: {\r\n        token: this.accessToken,\r\n      },\r\n      headers: {\r\n        Authorization: 'Basic b3V0d29yazp3cGcyMDIw',\r\n      }\r\n    }).then((res) => {\r\n      if (res.status == 200) {\r\n        this.formToken = res.data.resultData.token\r\n      }\r\n    })\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    mapLoad(mapInstance) {\r\n      mapObj.map = mapInstance.map\r\n      mapObj.mapInstance = mapInstance\r\n    },\r\n    getEventTypeList() {\r\n      if (this.dictionary.length > 0) {\r\n        // 处理字典，将其转换为对象，便于回显事件名称\r\n        let detailList = this.dictionary.filter(\r\n          // 对特定事件前缀处理\r\n          (item) => item.code.indexOf('inspection_event_type_') !== -1\r\n        );\r\n        let eventCodeList = [];\r\n        detailList.forEach(item => {\r\n          eventCodeList = eventCodeList.concat(item.dictionaryDetailList);\r\n        });\r\n        // 转换为对象\r\n        eventCodeList.forEach((item) => {\r\n          this.eventTypeList[item.code] = item.zh;\r\n        });\r\n      } else {\r\n        Toast({\r\n          title: \"字典加载失败\",\r\n        });\r\n      }\r\n    },\r\n    isOnLoaded() {\r\n      return this.isOnLoad && mapObj.mapInstance && mapObj.mapInstance.map;\r\n    },\r\n    //通用方法\r\n    async addCommonLayer() {\r\n      for await (const url of this.baseMapurl) {\r\n        await mapObj.mapInstance.addSuperStyleData(url);\r\n      }\r\n    },\r\n    async addPipeLayer() {\r\n      let map = mapObj.map;\r\n      let env = process.env.VUE_APP_ENV;\r\n      //底图\r\n      await axios\r\n        .get(\r\n          API.VUE_APP_MAP_REQUEST_URL +\r\n          \"/api/swan/mapWorkshopSource/detail?id=1557650273895288834\"\r\n        )\r\n        .then((res) => {\r\n          let layers = JSON.parse(res.data.data.combineJsonData);\r\n\r\n          Object.keys(layers.sources).forEach((key) => {\r\n            if (env == \"production\") {\r\n              let temp = layers.sources[key].tiles[0];\r\n              // temp = temp.replaceAll(\"172.20.79.65:8008\", \"xasw.hdec.com\");\r\n              \r\n              temp = temp.replaceAll(\"172.23.0.123:8008\", \"xasw.hdec.com\");\r\n              layers.sources[key].tiles[0] = temp;\r\n            }\r\n            map.addSource(key, layers.sources[key]);\r\n          });\r\n          layers.layers.forEach((layer) => {\r\n            console.log('layer: ', layer);\r\n            if (!layer.layout || layer.layout.visibility == \"visible\") {\r\n              this.defaultBaseLayers.push(layer); //控制地图显隐\r\n            }\r\n            map.addLayer(layer);\r\n          });\r\n        })\r\n        .catch((e) => { })\r\n        .finally(() => { });\r\n      //管线\r\n      await axios\r\n        .get(\r\n          API.VUE_APP_MAP_REQUEST_URL +\r\n          \"/api/swan/mapWorkshopSource/detail?id=1548573412963749889\"\r\n        )\r\n        .then((res) => {\r\n          let layers = JSON.parse(res.data.data.jsonData);\r\n\r\n          Object.keys(layers.sources).forEach((key) => {\r\n            if (env == \"production\") {\r\n              let temp = layers.sources[key].tiles[0];\r\n              // temp = temp.replaceAll(\"172.20.79.65:8008\", \"xasw.hdec.com\");\r\n              temp = temp.replaceAll(\"172.23.0.123:8008\", \"xasw.hdec.com\");\r\n              layers.sources[key].tiles[0] = temp;\r\n            }\r\n            map.addSource(key, layers.sources[key]);\r\n          });\r\n          layers.layers.forEach((layer) => {\r\n            map.addLayer(layer);\r\n            //图层移入移除以及点击事件\r\n            // map.on(\"mouseenter\", layer.id, this.handleLayerEnter);\r\n            // map.on(\"mouseout\", layer.id, this.handleLayerLeave);\r\n            // map.on(\"click\", layer.id, this.handleLayerClick); \r\n          });\r\n        })\r\n        .catch((e) => { })\r\n        .finally(() => { });\r\n      await this.addLineGeoLayer();\r\n      // 边框\r\n      await map.addLayer({\r\n        id: \"mapBorder\",\r\n        type: \"line\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: border,\r\n        },\r\n        layout: {\r\n          \"line-join\": \"round\",\r\n          \"line-cap\": \"round\",\r\n        },\r\n        paint: {\r\n          \"line-color\": \"#17E9FE\",\r\n          \"line-opacity\": 0.4,\r\n          \"line-width\": 2,\r\n        },\r\n      });\r\n      await this.addKeyPointLayer();\r\n      // this.isOnLoad = true;\r\n    },\r\n    // async addPipeLayer() {\r\n    //   this.isOnLoad = true;\r\n    //   await mapObj.mapInstance.()\r\n    //   // await mapObj.mapInstance.addTimerSource();\r\n    //   // this.swLayer['雨水'] = mapObj.mapInstance.addTimerLayer('雨水');\r\n    //   // this.swLayer['污水'] = mapObj.mapInstance.addTimerLayer('污水');\r\n    //   // this.swLayer['供水'] = await mapObj.mapInstance.addTimerLayer('供水');\r\n    //   // let gsLayerType = LayerType['供水'][0].concat(LayerType['供水'][1])\r\n    //   // gsLayerType.forEach((item, index) => {\r\n    //   //   mapObj.mapInstance.map.setLayoutProperty(item.id, 'visibility', 'none');\r\n    //   // })\r\n    //   // mapObj.mapInstance.addSource('lightLayer', {\r\n    //   //   type: \"geojson\",\r\n    //   //   data: {\r\n    //   //     type: \"FeatureCollection\",\r\n    //   //     features: []\r\n    //   //   }\r\n    //   // });\r\n    //   // this.swLayer['供水'] = await this.pipeSettings(this.gsUrl, this.GSL);\r\n    //   // this.swLayer['雨水'] = await this.pipeSettings(this.ysUrl, this.YSL);\r\n    //   // this.swLayer['污水'] = await this.pipeSettings(this.wsUrl, this.WSL);\r\n    //   // for await (const url of this.bzLayerUrls) {\r\n    //   //   await mapObj.mapInstance.addSuperStyleData(url);\r\n    //   // }\r\n    //   // mapObj.mapInstance.addLayer({\r\n    //   //   id: \"lightPoint\",\r\n    //   //   type: \"symbol\",\r\n    //   //   source: \"lightLayer\",\r\n    //   //   filter: [\"==\", \"$type\", \"Point\"],\r\n    //   //   layout: {\r\n    //   //     'icon-size': 1.4,\r\n    //   //     'icon-image': [...this.GSL.slice(0, this.GSL.length - 1), ...this.WSL.slice(1, this.WSL.length - 1), ...this.YSL.slice(1)],\r\n    //   //     'icon-ignore-placement': true,\r\n    //   //     'icon-allow-overlap': true\r\n    //   //   }\r\n    //   // }, \"lightLayer\")\r\n    //   // mapObj.mapInstance.addLayer({\r\n    //   //   id: \"lightLine\",\r\n    //   //   type: \"line\",\r\n    //   //   source: \"lightLayer\",\r\n    //   //   filter: [\"==\", \"$type\", \"LineString\"],\r\n    //   //   paint: {\r\n    //   //     'line-width': 3,\r\n    //   //     'line-color': \"red\",\r\n    //   //   }\r\n    //   // }, \"lightLayer\");\r\n    //   // this.isOnLoad = true;\r\n    //   // if (this.tripleVisible) {\r\n    //   //   this.gsLayers.forEach((item, index) => {\r\n    //   //     mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'none');\r\n    //   //   })\r\n    //   // }\r\n    // },\r\n    async pipeSettings(url, setting) {\r\n      let { data } = await actions.getAction(url);\r\n      mapObj.mapInstance.addSource(data.name, data.sources[data.name]);\r\n      data.layers = data.layers.filter(item => { return item.type !== \"background\" })\r\n      // data.sources[data.name].tiles[0] = gisDomain + '/iserver' + data.sources[data.name].tiles[0].split('iserver')[1];\r\n      let layers = data.layers;\r\n      switch (data.name) {\r\n        case '供水':\r\n          this.gsLayers = layers.map(layer => { return layer.id });\r\n          break;\r\n        case '雨水':\r\n          this.ysLayers = layers.map(layer => { return layer.id });\r\n          break;\r\n        case '污水':\r\n          this.wsLayers = layers.map(layer => { return layer.id });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      data.layers.forEach(layer => {\r\n        delete layer.maxzoom;\r\n        if (layer.layout && layer.layout.visibility == \"visible\" && layer.type == \"line\") {\r\n          mapObj.mapInstance.addLayer(layer, 'deviceMap');\r\n        } else if (layer.layout && layer.layout.visibility == \"visible\" && layer.type == \"circle\") {\r\n          layer.type = \"symbol\";\r\n          layer.paint = {};\r\n          layer.layout = {\r\n            \"icon-image\": setting,\r\n            \"icon-size\": 1\r\n          }\r\n          mapObj.mapInstance.addLayer(layer, 'deviceMap');\r\n        }\r\n        this.deviceLayers.push(layer.id);\r\n        // mapObj.mapInstance.map.on('click',layer.id,this.layerClick)\r\n      });\r\n    },\r\n    addUser() {\r\n      mapObj.mapInstance.addSource('user', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      })\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"user\",\r\n        type: \"symbol\",\r\n        source: \"user\",\r\n        layout: {\r\n          \"icon-image\": \"user\",\r\n          \"icon-size\": 0.25,\r\n          'icon-allow-overlap': true,\r\n          'icon-ignore-placement': true\r\n        }\r\n      })\r\n    },\r\n    //H5定位\r\n    async getUserPosition() {\r\n      // let p;\r\n      // if (navigator.geolocation){\r\n      //   navigator.geolocation.watchPosition((position) => {\r\n      //     p = [position.coords.longitude,position.coords.latitude];\r\n      //     alert(p)\r\n      //   },(error) => {\r\n      //     switch(error.code) {\r\n      //       case error.PERMISSION_DENIED: \r\n      //         alert(\"定位失败,用户拒绝请求地理定位\");\r\n      //         break;\r\n      //       case error.POSITION_UNAVAILABLE:\r\n      //         alert(\"定位失败,位置信息是不可用\");\r\n      //         break;\r\n      //       case error.TIMEOUT:\r\n      //         alert(\"定位失败,请求获取用户位置超时\");\r\n      //         break;\r\n      //       case error.UNKNOWN_ERROR:\r\n      //         alert(\"定位失败,定位系统失效\");\r\n      //         break;\r\n      //       }\r\n      //   }); \r\n      // }else{ \r\n      //   alert(\"不支持地理定位。\"); \r\n      // }\r\n      let point = await actions.getPosition()\r\n      return point;\r\n    },\r\n    setUserPosition(position) {\r\n      mapObj.mapInstance.setSourceData('user', {\r\n        type: \"FeatureCollection\",\r\n        features: position.length > 0 ? [turf.point(position)] : []\r\n      })\r\n    },\r\n    flyTo({ position, zoom }) {\r\n      mapObj.mapInstance.flyTo(position, zoom);\r\n    },\r\n    position(coords) {\r\n      mapObj.mapInstance.position(coords);\r\n    },\r\n    //公司选择\r\n    //传公司数组 例如:['临平供排水']\r\n    async chooseFactory(factory) {\r\n      let fac = factory[factory.length - 1];\r\n      let fac0 = factory[0];\r\n      this.factoryNameMarkers.forEach(marker => {\r\n        marker.remove();\r\n      })\r\n      if (fac0.label !== \"杭州余杭水务控股集团\") {\r\n        let res = await this.$api.getAction(\"/yhsw-drainage-entity/userMap/orgTree\", {\r\n          orgNo: fac.label === '全部' ? fac0.value : fac.value\r\n        })\r\n        let arr = [];\r\n        if (res.data.length) {\r\n          arr = mapObj.mapInstance.iteration(res.data, 'children', ['companyName', 'geom'])\r\n        }\r\n        if (factory.length == 1) {\r\n          arr.shift();\r\n        }\r\n        let coordsArr = [];\r\n        let factoryNameMarkers = [];\r\n        arr.forEach(item => {\r\n          coordsArr.push(item.geom.coordinates)\r\n          let center = this.getCenter(item.geom.coordinates[0]);\r\n          let ele = document.createElement('div');\r\n          ele.innerHTML = `<span style=\"color:#495665;font-size:18px;font-weight:bold\">${item.companyName}</span>`\r\n          factoryNameMarkers.push(mapObj.mapInstance.addMarker(ele, center));\r\n        })\r\n        this.factoryNameMarkers = factoryNameMarkers;\r\n        this.makeLocation(res.data[0].geom.coordinates);\r\n        this.paintingRange({ position: coordsArr, lineDasharray: [3, 4] })\r\n      } else {\r\n        this.makeLocation();\r\n        this.paintingRange({});\r\n      }\r\n    },\r\n    randomString(len) {\r\n      len = len || 32;\r\n      let $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\r\n      let maxPos = $chars.length;\r\n      let pwd = '';\r\n      for (let i = 0; i < len; i++) {\r\n        pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n      }\r\n      return pwd;\r\n    },\r\n    initMarker(i, w = 20, h = 20) {\r\n      let ele = document.createElement('img');\r\n      ele.src = i;\r\n      ele.style.width = w;\r\n      ele.style.height = h;\r\n      return ele;\r\n    },\r\n    mapOnLoad(callback) {\r\n      if (this.isOnLoad) {\r\n        callback && callback()\r\n      } else {\r\n        let timer = setInterval(() => {\r\n          if (this.isOnLoad) {\r\n            this.timer.forEach(timer => {\r\n              clearInterval(timer)\r\n            })\r\n            this.timer = null;\r\n            callback && callback()\r\n          }\r\n        }, 100)\r\n        this.timer.push(timer);\r\n      }\r\n\r\n    },\r\n    /**\r\n     * @name:业务代码\r\n     */\r\n    //管网和设施增加点击选中事件，选中设施信息储存至this.chooseDevice\r\n    addDeviceLayersClickEvent(that, isSW = false) {\r\n      let deviceLayers = this.deviceLayers.length > 0 ? this.deviceLayers : mapObj.mapInstance.deviceLayers;\r\n      this.vm = that || null;\r\n      deviceLayers.forEach(layerId => {\r\n        mapObj.mapInstance.map.on('click', layerId, isSW ? this.layerClick1 : this.layerClick);\r\n      })\r\n    },\r\n    removeDeviceLayersClickEvent(isSW = false) {\r\n      let deviceLayers = this.deviceLayers.length > 0 ? this.deviceLayers : mapObj.mapInstance.deviceLayers;\r\n      deviceLayers.forEach(layerId => {\r\n        mapObj.mapInstance.map.off('click', layerId, isSW ? this.layerClick1 : this.layerClick);\r\n      });\r\n      this.vm = null;\r\n    },\r\n    layerClick(e) {\r\n      let index = this.chooseDevice.findIndex(item => { return item.properties.id == e.features[0].id });\r\n      let device = null;\r\n      let operationMode = \"\";\r\n      if (index == -1) {\r\n        let feature = e.features[0];\r\n        device = {\r\n          type: \"feature\",\r\n          geometry: feature.geometry,\r\n          properties: { ...feature.properties, id: feature.id }\r\n        };\r\n        this.chooseDevice.push(device);\r\n        operationMode = 'add';\r\n      } else {\r\n        device = this.chooseDevice[index];\r\n        this.chooseDevice.splice(index, 1)\r\n        operationMode = 'remove';\r\n      }\r\n      mapObj.mapInstance.setSourceData('lightLayer', {\r\n        type: \"FeatureCollection\",\r\n        features: this.chooseDevice\r\n      });\r\n      this.vm && this.vm.$emit('getDevice', this.chooseDevice, {\r\n        operationMode,\r\n        device\r\n      });\r\n      device = null;\r\n    },\r\n    /**\r\n     * 三网合一\r\n     */\r\n    layerClick1(e) {\r\n      console.log('e :>> ', e);\r\n\r\n      let feature = mapObj.mapInstance.map.queryRenderedFeatures([\r\n        [e.point.x - 2, e.point.y - 2],\r\n        [e.point.x + 2, e.point.y + 2]\r\n      ])[0];\r\n      if (feature && feature.properties.deviceid && !feature.layer.id.includes('_symbol')) {\r\n        console.log('feature :>> ', feature);\r\n        mapObj.mapInstance.setSourceData('lightLayer', {\r\n          type: \"FeatureCollection\",\r\n          features: [feature]\r\n        });\r\n        this.$emit('getDevice', feature);\r\n        if (feature.properties.display.indexOf('管线') > -1) {\r\n          let location = [feature.geometry.coordinates[0][0], feature.geometry.coordinates[0][1] - 0.0005]\r\n          this.flyTo({ position: location, zoom: 17 })\r\n        } else {\r\n          let location2 = [feature.geometry.coordinates[0], feature.geometry.coordinates[1] - 0.0005]\r\n          this.flyTo({ position: location2, zoom: 17 })\r\n        }\r\n      }\r\n    },\r\n    //查看时回显\r\n    echoWxDeveice(features) {\r\n      this.chooseDevice = features;\r\n      mapObj.mapInstance.setSourceData('lightLayer', {\r\n        type: \"FeatureCollection\",\r\n        features: this.chooseDevice\r\n      })\r\n    },\r\n    //添加带浮窗事件图标\r\n    addEventMarker({ position, event }) {\r\n      let ele = this.initMarker(require('@/assets/img/map/eventPoint.png'), 10, 10);\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele\r\n      });\r\n      marker.setLngLat(position).setPopup(mapObj.mapInstance.newPopup({ offset: [0, -10], closeButton: false }).setHTML(`<strong>${event}</strong>`)).addTo(mapObj.mapInstance.map);\r\n      marker.togglePopup();\r\n    },\r\n    //切换地图 name:tdt||yxt||baseMap\r\n    changeMap(name) {\r\n      mapObj.mapInstance.changeBaseMap(name);\r\n    },\r\n    /**\r\n     * @name:维修部份\r\n     */\r\n    addOrganizerMarker({ position, distance }) {\r\n      let ele = this.initMarker(require('@/assets/img/map/gj.png'));\r\n      this.marker = mapObj.mapInstance.newMarker({\r\n        element: ele\r\n      });\r\n      this.marker.setLngLat(position).setPopup(mapObj.mapInstance.newPopup({ offset: [0, -10], closeButton: false }).setHTML(`<strong>${distance}</strong>`)).addTo(mapObj.mapInstance.map);\r\n      this.marker.togglePopup();\r\n    },\r\n    //更新协办人员位置\r\n    updateOrganizerPosition({ position, distance }) {\r\n      this.marker.setLngLat(position).getPopup().setHTML(`<strong>${distance}</strong>`);\r\n    },\r\n    //移除协办人员\r\n    removeOrganizerMarker() {\r\n      this.marker.remove();\r\n      this.marker = null;\r\n    },\r\n    // 点击地图添加自定义选择维修设施\r\n    startAddDiyPoint(event, vm) {\r\n      this.event = event;\r\n      this.vm = vm;\r\n      mapObj.map.on('click', this.AddDiyPoint)\r\n    },\r\n    AddDiyPoint(e) {\r\n      this.addDiyrMarker({ position: [e.lngLat.lng, e.lngLat.lat], name: event })\r\n    },\r\n    // 地图录入设施添加图标\r\n    addDiyrMarker({ position, name }) {\r\n      let ele = document.createElement('img');\r\n      ele.src = require('@/assets/img/map/diyPoint.png');\r\n      ele.style.width = '20px';\r\n      ele.style.height = '20px';\r\n      this.diyPoint.marker && this.diyPoint.marker.remove();\r\n      let marker = mapObj.mapInstance.newMarker({ element: ele });\r\n      marker.setLngLat(position).setPopup(mapObj.mapInstance.newPopup({ offset: [-1, 0] }).setHTML(`<strong>${name}</strong>`)).addTo(mapObj.mapInstance.map);\r\n      this.diyPoint = { name, position, marker };\r\n      this.vm.$emit('getDiyPoint', this.diyPoint);\r\n    },\r\n    //移除新录入设施图标\r\n    removeDiyMarker() {\r\n      this.diyPoint.marker.remove();\r\n      this.diyPoint.marker = null;\r\n    },\r\n    //结束自定义选择维修设施\r\n    endDiyPoint() {\r\n      mapObj.map.off('click', this.AddDiyPoint);\r\n      this.vm = null;\r\n    },\r\n    /**\r\n     * @name:养护部份\r\n     */\r\n    addNavigatorPoint(point) {\r\n      let that = this;\r\n      if (that.navigatorMarker) that.navigatorMarker.remove();\r\n      if (that.navigatorMarker2) that.navigatorMarker2.remove();\r\n      let ele = that.initMarker(require('@/assets/img/map/eventPoint.png'), 25, 25);\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele\r\n      });\r\n      if (point) {\r\n        ele.addEventListener('click', function (val) {\r\n          let ele2 = document.createElement(\"div\");\r\n          ele2.innerHTML = `\r\n              <div style=\"padding: 0px 5px; border: 1px solid #eee; border-radius: 2px; background: #fff; color: #2A83E6\">去导航</div>\r\n            `\r\n          let marker2 = mapObj.mapInstance.newMarker({\r\n            element: ele2,\r\n            offset: [35, 0]\r\n          });\r\n          ele2.addEventListener('click', function (val) {\r\n            that.navigatorMarker2.remove();\r\n            that.$emit('goToNavigator', point)\r\n          })\r\n          marker2.setLngLat(point).addTo(mapObj.mapInstance.map);\r\n          that.navigatorMarker2 = marker2;\r\n        })\r\n        marker.setLngLat(point).addTo(mapObj.mapInstance.map);\r\n        that.navigatorMarker = marker;\r\n        that.$emit('getNavigatorPoint', point)\r\n      }\r\n    },\r\n    // 测距\r\n    addNavigatorPointsLine(point) {\r\n      if (point) {\r\n        this.markersLinePoints.push(point)\r\n        mapObj.mapInstance.map.getLayer(\"PointsLayer\") && mapObj.mapInstance.map.removeLayer(\"PointsLayer\");\r\n        mapObj.mapInstance.map.getSource(\"PointSource\") && mapObj.mapInstance.map.removeSource(\"PointSource\");\r\n        mapObj.mapInstance.map.getLayer(\"LineLayer\") && mapObj.mapInstance.map.removeLayer(\"LineLayer\");\r\n        mapObj.mapInstance.map.getSource(\"LineSource\") && mapObj.mapInstance.map.removeSource(\"LineSource\");\r\n        let temp = {\r\n          type: \"Feature\",\r\n          geometry: {\r\n            type: \"Point\",\r\n            coordinates: point\r\n          },\r\n          properties: {}\r\n        }\r\n        this.navMarkers.push(temp)\r\n        mapObj.mapInstance.addSource('PointSource', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: this.navMarkers\r\n          }\r\n        });\r\n        mapObj.mapInstance.map.addLayer({\r\n          'id': 'PointsLayer',\r\n          'type': 'symbol',\r\n          'source': 'PointSource',\r\n          'layout': {\r\n            'icon-image': 'diyPoint',\r\n            'icon-size': 0.8,\r\n          }\r\n        })\r\n        if (this.navMarkers.length > 1) {\r\n\r\n          let distance = turf.distance(turf.point(this.markersLinePoints[this.navMarkers.length - 2]), turf.point(this.markersLinePoints[this.navMarkers.length - 1])) * 1000;\r\n          this.allDistance = Number(distance) + Number(this.allDistance);\r\n          let feature = {\r\n            type: \"Feature\",\r\n            geometry: {\r\n              type: \"LineString\",\r\n              coordinates: this.markersLinePoints\r\n            },\r\n            properties: {\r\n              distance: this.allDistance.toFixed(2) + ' m'\r\n            }\r\n          }\r\n          this.featuresLine.push(feature)\r\n          mapObj.mapInstance.addSource('LineSource', {\r\n            type: \"geojson\",\r\n            data: {\r\n              type: \"FeatureCollection\",\r\n              features: this.featuresLine\r\n            }\r\n          });\r\n          mapObj.mapInstance.map.addLayer({\r\n            'id': 'LineLayer',\r\n            'type': 'line',\r\n            'source': 'LineSource',\r\n            paint: {\r\n              \"line-color\": '#FF4A4A',\r\n              \"line-width\": 3\r\n            }\r\n          }, 'PointsLayer')\r\n          let ele = document.createElement(\"div\");\r\n          ele.innerHTML = `\r\n              <div style=\"color: #FF4A4A\">${(this.allDistance / 1000).toFixed(2) + ' km'}</div>\r\n            `\r\n          let marker = mapObj.mapInstance.newMarker({\r\n            element: ele,\r\n            offset: [0, 15]\r\n          });\r\n          marker.setLngLat(point).addTo(mapObj.mapInstance.map);\r\n          this.lineMarkers.push(marker);\r\n\r\n        }\r\n      }\r\n    },\r\n    // 测面\r\n    addNavigatorPointsArea(point) {\r\n      if (this.firstPoint.length === 0) this.firstPoint = point;\r\n      if (point) {\r\n        this.markersAreaPoints.push(point)\r\n        mapObj.mapInstance.map.getLayer(\"PointALayer\") && mapObj.mapInstance.map.removeLayer(\"PointALayer\");\r\n        mapObj.mapInstance.map.getLayer(\"AreasLayer\") && mapObj.mapInstance.map.removeLayer(\"AreasLayer\");\r\n        mapObj.mapInstance.map.getSource(\"PointASource\") && mapObj.mapInstance.map.removeSource(\"PointASource\");\r\n        mapObj.mapInstance.map.getSource(\"AreasSource\") && mapObj.mapInstance.map.removeSource(\"AreasSource\");\r\n        let temp = {\r\n          type: \"Feature\",\r\n          geometry: {\r\n            type: \"Point\",\r\n            coordinates: point\r\n          },\r\n          properties: {}\r\n        }\r\n        this.areaMarkers.push(temp)\r\n        mapObj.mapInstance.addSource('PointASource', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: this.areaMarkers\r\n          }\r\n        });\r\n        mapObj.mapInstance.map.addLayer({\r\n          'id': 'PointALayer',\r\n          'type': 'symbol',\r\n          'source': 'PointASource',\r\n          'layout': {\r\n            'icon-image': 'diyPoint',\r\n            'icon-size': 0.8,\r\n          }\r\n        })\r\n        let feature = this.markersAreaPoints.concat([this.firstPoint]);\r\n        let features = turf.polygon([feature]);\r\n        mapObj.mapInstance.addSource('AreasSource', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [features]\r\n          }\r\n        });\r\n        mapObj.mapInstance.map.addLayer({\r\n          'id': 'AreasLayer',\r\n          'type': 'fill',\r\n          'source': 'AreasSource',\r\n          paint: {\r\n            'fill-color': '#FF4A4A',\r\n            'fill-opacity': 0.4\r\n          }\r\n        }, 'PointALayer')\r\n        let distance = turf.area(features);\r\n        if (this.areaMarker) this.areaMarker.remove();\r\n        let ele = document.createElement(\"div\");\r\n        ele.innerHTML = `\r\n              <div style=\"color: #FF4A4A\">${(distance / 1000 / 1000).toFixed(2) + ' km²'}</div>\r\n            `\r\n        let marker = mapObj.mapInstance.newMarker({\r\n          element: ele,\r\n          offset: [0, 15]\r\n        });\r\n        marker.setLngLat(point).addTo(mapObj.mapInstance.map);\r\n        this.areaMarker = marker;\r\n      }\r\n\r\n    },\r\n    addNavigationControl() {\r\n      mapObj.mapInstance.map.addControl(new mapboxgl.NavigationControl(), 'top-left');\r\n    },\r\n    addFullscreenControl() {\r\n      mapObj.mapInstance.map.addControl(new mapboxgl.FullscreenControl());\r\n    },\r\n    addScaleControl() {\r\n      mapObj.mapInstance.map.addControl(new mapboxgl.ScaleControl(), \"bottom-right\");\r\n    },\r\n    clearNavigatorPoint() {\r\n      if (this.navigatorMarker) {\r\n        this.navigatorMarker.remove()\r\n      };\r\n      if (this.navigatorMarker2) {\r\n        this.navigatorMarker2.remove()\r\n      };\r\n      if (this.lineMarkers.length > 0) {\r\n        this.lineMarkers.forEach(marker => {\r\n          marker.remove();\r\n        });\r\n      }\r\n      if (this.areaMarker) this.areaMarker.remove();\r\n      mapObj.mapInstance.map.getLayer(\"LineLayer\") && mapObj.mapInstance.map.removeLayer(\"LineLayer\");\r\n      mapObj.mapInstance.map.getSource(\"LineSource\") && mapObj.mapInstance.map.removeSource(\"LineSource\");\r\n      mapObj.mapInstance.map.getLayer(\"PointsLayer\") && mapObj.mapInstance.map.removeLayer(\"PointsLayer\");\r\n      mapObj.mapInstance.map.getSource(\"pointSource\") && mapObj.mapInstance.map.removeSource(\"pointSource\");\r\n      mapObj.mapInstance.map.getLayer(\"PointALayer\") && mapObj.mapInstance.map.removeLayer(\"PointALayer\");\r\n      mapObj.mapInstance.map.getLayer(\"AreasLayer\") && mapObj.mapInstance.map.removeLayer(\"AreasLayer\");\r\n      mapObj.mapInstance.map.getSource(\"pointASource\") && mapObj.mapInstance.map.removeSource(\"pointASource\");\r\n      mapObj.mapInstance.map.getSource(\"AreasSource\") && mapObj.mapInstance.map.removeSource(\"AreasSource\");\r\n      this.navMarkers = [];\r\n      this.lineMarkers = [];\r\n      this.featuresLine = [];\r\n      this.areaMarkers = [];\r\n      this.firstPoint = [];\r\n      this.markersLinePoints = [];\r\n      this.markersAreaPoints = [];\r\n      this.allDistance = null;\r\n    },\r\n    echoYhDeveice({ uncured, curing }, callback) {\r\n      if (!mapObj.mapInstance.getLayer('uncuredLine')) {\r\n        mapObj.mapInstance.addSource('uncured', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: []\r\n          }\r\n        })\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"uncuredLine\",\r\n          type: \"line\",\r\n          source: \"uncured\",\r\n          paint: {\r\n            'line-width': 3,\r\n            'line-color': \"#ffa01e\",\r\n          }\r\n        }, 'cure')\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"uncuredPoint\",\r\n          type: \"symbol\",\r\n          filter: [\"==\", '$type', \"Point\"],\r\n          source: \"uncured\",\r\n          filter: ['==', '$type', 'Point'],\r\n          layout: {\r\n            'icon-size': 1,\r\n            'icon-image': \"eventPoint\"\r\n          }\r\n        }, 'cure')\r\n\r\n        mapObj.mapInstance.addSource('curing', {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: []\r\n          }\r\n        })\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"curingLine\",\r\n          type: \"line\",\r\n          source: \"curing\",\r\n          paint: {\r\n            'line-width': 10,\r\n            'line-color': \"#39d98a\",\r\n          }\r\n        }, 'cure');\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"curingPoint\",\r\n          type: \"symbol\",\r\n          filter: [\"==\", '$type', \"Point\"],\r\n          source: \"curing\",\r\n          filter: ['==', '$type', 'Point'],\r\n          layout: {\r\n            'icon-size': 1,\r\n            'icon-image': \"eventLine\"\r\n          }\r\n        }, 'cure');\r\n      }\r\n\r\n      if (callback) {\r\n        mapObj.mapInstance.map.off('click', this.callback)\r\n        this.callback = callback;\r\n        mapObj.mapInstance.map.on('click', callback)\r\n      }\r\n      mapObj.mapInstance.setSourceData('uncured', {\r\n        type: \"FeatureCollection\",\r\n        features: uncured\r\n      })\r\n      mapObj.mapInstance.setSourceData('curing', {\r\n        type: \"FeatureCollection\",\r\n        features: curing\r\n      });\r\n      this.makePosition(uncured.concat(curing))\r\n    },\r\n    makePosition(features) {\r\n      if (features.length) {\r\n        let bbox = turf.bbox({\r\n          type: \"FeatureCollection\",\r\n          features\r\n        });\r\n        mapObj.mapInstance.map.fitBounds(bbox, {\r\n          padding: { top: 10, bottom: 25, left: 15, right: 5 }\r\n        });\r\n      } else {\r\n        mapObj.mapInstance.map.fitBounds([[120.38188484498045, 30.56868547578088], [119.51549097554295, 30.178356987720612]], {\r\n          linear: false\r\n        });\r\n      }\r\n    },\r\n    //超图几何查询\r\n    async getDataWithSpatial({ datasetNames = this.wsDatabaseNames1, geometry }) {\r\n      return await mapObj.mapInstance.getDataWithSpatial({ datasetNames, geometry });\r\n    },\r\n    //超图几何条件查询\r\n    async getDataWithSpatialAtt({ datasetNames = this.dataNames, geometry, sql }) {\r\n      return await mapObj.mapInstance.getDataWithSpatialAtt({ datasetNames, geometry, sql });\r\n    },\r\n    async getDataWithSql({ datasetNames = this.databaseNames1, sql }) {\r\n      return await mapObj.mapInstance.getDataWithSql(datasetNames, sql);\r\n    },\r\n    //查询点击处特征\r\n    queryRenderedFeatures(e) {\r\n      return mapObj.mapInstance.queryRenderedFeatures(e);\r\n    },\r\n    //进入养护展示养护面区\r\n    showPology(features) {\r\n      mapObj.mapInstance.addSource('yhPology', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features\r\n        }\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"yhPology\",\r\n        source: \"yhPology\",\r\n        type: \"fill\",\r\n        paint: {\r\n          'fill-color': \"#2A83E6\",\r\n          'fill-opacity': 0.2\r\n        }\r\n      }, 'yhppp', 'user');\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"yhLine\",\r\n        source: \"yhPology\",\r\n        type: \"line\",\r\n        paint: {\r\n          'line-color': \"#2A83E6\",\r\n          'line-width': 2\r\n        }\r\n      }, 'yhppp', 'user');\r\n      mapObj.mapInstance.addSource('yhPology1', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"yhPology1\",\r\n        source: \"yhPology1\",\r\n        type: \"fill\",\r\n        paint: {\r\n          'fill-color': \"#2A83E6\",\r\n          'fill-opacity': 0.2\r\n        }\r\n      }, 'yhppp', 'user')\r\n    },\r\n    //判断是否到达指定范围\r\n    checkPosition(point, features) {\r\n      this.dataNames = [];\r\n      let tempFeature = features.find(feature => turf.inside(point, feature));\r\n      if (tempFeature && tempFeature.properties && tempFeature.properties.businessType === '供水') {\r\n        this.dataNames = this.gsDatabaseNames1;\r\n      } else {\r\n        this.dataNames = this.wsDatabaseNames1;\r\n      }\r\n      let ptsWithin = turf.within(turf.featureCollection([turf.point(point)]), turf.featureCollection(features));\r\n      if (ptsWithin.features.length !== 0) {\r\n        return features.find(feature => turf.inside(point, feature));\r\n      }\r\n      return false\r\n    },\r\n    //生成2km为半径的圆,并查找设施\r\n    async setBuffer(point, radius = 0.035, feature) {\r\n      let buffered = turf.buffer(turf.point(point), radius, 'kilometers');\r\n      if (feature) {\r\n        return turf.intersect(buffered, feature);\r\n      }\r\n      // mapObj.mapInstance.map.setLayoutProperty('yhPology','visibility','none');\r\n      // mapObj.mapInstance.setSourceData('yhPology1',{\r\n      //   type:\"FeatureCollection\",\r\n      //   features:[buffered]\r\n      // });\r\n      return buffered;\r\n    },\r\n    //到达错误，回退\r\n    pologyBack() {\r\n      mapObj.mapInstance.map.setLayoutProperty('yhPology1', 'visibility', 'none');\r\n      mapObj.mapInstance.map.setLayoutProperty('yhPology', 'visibility', 'visible');\r\n    },\r\n    //移除养护所有面区\r\n    removeAllYH() {\r\n      if (mapObj.mapInstance.map.getSource('yhPology1')) {\r\n        mapObj.mapInstance.removeGroupLayer('yhppp');\r\n        mapObj.mapInstance.removeSource('yhPology1');\r\n        mapObj.mapInstance.removeSource('yhPology');\r\n      }\r\n\r\n    },\r\n    // 超图集合查询通过管径级别和特定的数据集\r\n    async getDataWithSpatialAndPipeLevel({ inspBusinessType, geom, pipeLevel }) {\r\n      let datasetNames = [];\r\n      let isSupply = false;\r\n      switch (inspBusinessType) {\r\n        case \"WATER_SUPPLY\":\r\n          datasetNames = this.gsDatabaseNames;\r\n          isSupply = true;\r\n          break;\r\n        case \"RAI_WATER\":\r\n          datasetNames = this.ysDatabaseNames;\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          datasetNames = this.wsDatabaseNames;\r\n          break;\r\n        default:\r\n          datasetNames = this.databaseNames;\r\n          break;\r\n      }\r\n      return await mapObj.mapInstance.getDataWithSpatialAndPipeLevel({ datasetNames, geom, pipeLevel, isSupply });\r\n    },\r\n    // 画半径为radius的圆范围\r\n    drawBuffer(point, radius = 0.035) {\r\n      let buffered = turf.buffer(point, radius, { unit: 'kilometers' });\r\n      mapObj.mapInstance.setSourceData('buffered', {\r\n        type: \"FeatureCollection\",\r\n        features: [buffered]\r\n      })\r\n    },\r\n    // 添加缓冲区的图层\r\n    addBufferLayer() {\r\n      mapObj.mapInstance.addSource('buffered', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      })\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"bufferLayer\",\r\n        type: \"fill\",\r\n        source: \"buffered\",\r\n        paint: {\r\n          \"fill-color\": \"#FFB6C1\",\r\n          \"fill-opacity\": 0.5\r\n        }\r\n      }, 'lightLayer');\r\n    },\r\n    async addInspLayer() {\r\n      await mapObj.mapInstance.map.addLayer({\r\n        id: \"rangePipesLayer\",\r\n        source: \"1549000686380879873\",\r\n        \"source-layer\": \"1549000686380879873\",\r\n        \"metadata\": {\r\n          \"layerId\": \"1549000686380879873\"\r\n        },\r\n        type: \"line\",\r\n        \"layout\": { \"visibility\": \"none\" },\r\n        paint: {\r\n          // \"line-color\": [\r\n          //   'case',\r\n          //   ['boolean', ['feature-state', 'insp'], false],\r\n          //   \"#00945e\",\r\n          //   \"#ff0000\"\r\n          // ],\r\n          \"line-color\": \"#44BA5A\",\r\n          \"line-width\": 3\r\n        }\r\n      }, 'mapBorder')\r\n    },\r\n    // 添加巡检范围,暂时为polygon类型\r\n    addRangeLayer(geom, idx) {\r\n      if (!mapObj.map.getSource(\"rangeSource_\" + idx)) {\r\n        mapObj.mapInstance.addSource(\"rangeSource_\" + idx, {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [geom]\r\n          }\r\n        });\r\n      }\r\n      if (!mapObj.map.getLayer(\"rangeLayer_\" + idx)) {\r\n        mapObj.mapInstance.addLayer({\r\n          id: \"rangeLayer_\" + idx,\r\n          type: \"fill\",\r\n          source: \"rangeSource_\" + idx,\r\n          \"metadata\": {\r\n            \"layerId\": \"rangeSource_\" + idx\r\n          },\r\n          paint: {\r\n            \"fill-color\": \"#5AD8E5\",\r\n            // \"fill-opacity\": 1\r\n          }\r\n        }, 'keypointsLayer');\r\n      }\r\n    },\r\n    // 根据管径级别、范围、业务类型查询范围内的矢量瓦片\r\n    async addRangeMVT(params) {\r\n      const that = this;\r\n      that.removeRangeMVT();\r\n      /**\r\n      const geomStr = params.geom;\r\n      const res = await that.$api.postAction(\"/yhsw-postgis/addQueryPlane\", geomStr);\r\n      let id;\r\n      if (res.status) {\r\n        id = res.data || '1398548977837674498';\r\n      }\r\n      let pipeType;\r\n      switch (params.inspBusinessType) {\r\n        case \"WATER_SUPPLY\":\r\n          pipeType = \"供水管线\";\r\n          break;\r\n        case \"RAI_WATER\":\r\n          pipeType = \"雨水管线\";\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          pipeType = \"污水管线\";\r\n          break;\r\n        case \"ORIGIN_WATER\":\r\n          pipeType = \"源水管线\";\r\n          break;\r\n        case \"RIVER_WATER\":\r\n          pipeType = \"排江管\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      // const res2 = await that.$api.getAction(\"/\")\r\n      let url;\r\n      if (params.calibers) {\r\n        url = baseUrl.url_config + `/yhsw-postgis/getAllLineHashInsp/{x}/{y}/{z}?rangId=${id}&calibres=${params.calibers}&type=${pipeType}&endDate=${params.endDate}`;\r\n      } else {\r\n        let caliberStr = window.btoa(JSON.stringify(params.caliberVOS));\r\n        url = baseUrl.url_config + `/yhsw-postgis/getAllLineInfoInspMultiple/{x}/{y}/{z}?id=${id}&caliberVOListStr=${caliberStr}&type=${pipeType}&endDate=${params.endDate}`;\r\n      }\r\n      */\r\n      let url = baseUrl.url_config + `ops-inspection/getAllLineTask/{x}/{y}/{z}?taskId=${params.taskId}`;\r\n      mapObj.mapInstance.addSource(\"rangePipeVector\", {\r\n        type: \"vector\",\r\n        tiles: [url],\r\n        promoteId: 'guid'\r\n      })\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"rangePipesLayer\",\r\n        source: \"rangePipeVector\",\r\n        \"source-layer\": \"line\",\r\n        type: \"line\",\r\n        paint: {\r\n          \"line-color\": [\r\n            'case',\r\n            ['boolean', ['feature-state', 'insp'], false],\r\n            \"#00945e\",\r\n            \"#ff0000\"\r\n          ],\r\n          \"line-width\": 3\r\n        }\r\n      }, 'keypointsLayer')\r\n      // 选中当前管线图层\r\n      mapObj.mapInstance.addSource(\"curInspLineSource\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"curInspLineLayer\",\r\n        type: \"line\",\r\n        source: \"curInspLineSource\",\r\n        paint: {\r\n          \"line-color\": \"#4264FB\",\r\n          \"line-width\": 8\r\n        }\r\n      }, \"keypointsLayer\");\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"curInspPointLayer\",\r\n        type: \"circle\",\r\n        source: \"curInspLineSource\",\r\n        filter: ['==', '$type', 'Point'],\r\n        paint: {\r\n          \"circle-color\": \"#FFA01E\",\r\n          \"circle-radius\": 8\r\n        },\r\n      }, \"keypointsLayer\")\r\n      // 对管线进行上报\r\n      mapObj.mapInstance.map.on('click', 'rangePipesLayer', function (e) {\r\n        let features = mapObj.mapInstance.map.queryRenderedFeatures(e.point, {\r\n          layers: [\"rangePipesLayer\"]\r\n        });\r\n        that.setLineGeoSource([features[0]], \"curInspLineSource\");\r\n      })\r\n    },\r\n    // 移除巡检管线MVT\r\n    removeRangeMVT() {\r\n      // 如果存在范围的MVT图层，就移除该图层\r\n      mapObj.mapInstance.map.getLayer(\"rangePipesLayer\") && mapObj.mapInstance.map.removeLayer(\"rangePipesLayer\");\r\n      mapObj.mapInstance.map.getSource(\"rangePipeVector\") && mapObj.mapInstance.map.removeSource(\"rangePipeVector\");\r\n      mapObj.mapInstance.map.getLayer(\"curInspLineLayer\") && mapObj.mapInstance.map.removeLayer(\"curInspLineLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"curInspPointLayer\") && mapObj.mapInstance.map.removeLayer(\"curInspPointLayer\");\r\n      mapObj.mapInstance.map.getSource(\"curInspLineSource\") && mapObj.mapInstance.map.removeSource(\"curInspLineSource\");\r\n      // 清空此次巡检保存的要素\r\n      recordFeatures = [];\r\n    },\r\n    // 设置巡检范围\r\n    setRangeLayer(rangeList, ifEmergency = false) {\r\n      let that = this;\r\n      rangeList.forEach((range) => {\r\n        // 如果为应急任务，不加载管线数据\r\n        if (!ifEmergency) {\r\n          // 替换为新的超图查询方法\r\n          const params = {\r\n            taskId: range.taskId ? range.taskId : undefined,\r\n            calibers: range.calibers ? range.calibers : undefined,\r\n            caliberVOS: range.caliberVOS ? range.caliberVOS : undefined,\r\n            endDate: range.endDate ? range.endDate : undefined,\r\n            inspBusinessType: range.inspBusinessType,\r\n            geom: range.geometry,\r\n            pipeLevel: range.pipeLevel\r\n          }\r\n          // 高亮管线替换矢量瓦片\r\n          this.addRangeMVT(params);\r\n\r\n          // that.getDataWithSpatialAndPipeLevel(params)\r\n          //   .then(devices => {\r\n          //     if (devices.data.features.length > 0) {\r\n          //       let features = devices.data.features;\r\n          //       that.handleInspData(features, false, !ifEmergency);\r\n          //     }\r\n          //   })\r\n        }\r\n      })\r\n      that.setLineGeoSource(rangeList, \"rangeSource\")\r\n    },\r\n    // 在图层中添加关键点，优化性能\r\n    addKeyPointLayer() {\r\n      mapObj.mapInstance.map.addSource('keypoints', {\r\n        type: 'geojson',\r\n        data: {\r\n          type: 'FeatureCollection',\r\n          features: []\r\n        },\r\n        promoteId: 'engId'\r\n      });\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: 'keypointsLayer',\r\n        type: 'symbol',\r\n        source: 'keypoints',\r\n        layout: {\r\n          \"icon-allow-overlap\": true,\r\n          \"icon-ignore-placement\": true,\r\n          \"icon-image\": [\r\n            'case',\r\n            ['==', ['get', 'isGreen'], true],\r\n            '正常',\r\n            ['==', ['get', 'isRed'], true],\r\n            '异常',\r\n            ['==', ['get', 'isBlue'], true],\r\n            '未巡检',\r\n            '未巡检'\r\n          ],\r\n          'icon-size': 0.4,\r\n          'icon-allow-overlap': false,\r\n          'icon-ignore-placement': false\r\n        }\r\n      }, 'mapBorder');\r\n      mapObj.map.on('click', 'keypointsLayer', this.signInBuffer)\r\n    },\r\n    signInBuffer(e) {\r\n      if (localStorage.getItem('startRecordLines') == 'start') {\r\n        let features = mapObj.mapInstance.map.queryRenderedFeatures(e.point, {\r\n          layers: [\"keypointsLayer\"]\r\n        });\r\n        if (features.length > 0) {\r\n          const feat = JSON.parse(features[0].properties.feature);\r\n          this.drawBuffer(feat.geom);\r\n          bus.$emit(\"startSignIn\", feat);\r\n        }\r\n      } else {\r\n        Toast({\r\n          message: '巡检未开始，无法打卡签到',\r\n          duration: 2000\r\n        })\r\n        return\r\n      }\r\n    },\r\n    setKeyPointLayer(features) {\r\n      let timer = setInterval(() => {\r\n        if (mapObj.map.getSource('keypoints')) {\r\n          mapObj.mapInstance.setSourceData('keypoints', {\r\n            type: \"FeatureCollection\",\r\n            features: features\r\n          });\r\n          clearInterval(timer)\r\n        }\r\n      }, 100)\r\n    },\r\n    // 添加关键点marker\r\n    addKeyPointMarker(feature, ifDetail = false) {\r\n      let position = feature.engGeom.coordinates;\r\n      let name = feature.engNum || \"关键点名称\";\r\n      const src = require('@/assets/img/inspection/icon_key_point_pink.png');\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"keypoint_${feature.engId}\" src=\"${src}\" width=\"24\" height=\"24\">\r\n        `\r\n\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n        offset: [0, -10]\r\n      });\r\n      // const markerHTML = `\r\n      //     <div>\r\n      //       <div\r\n      //         style=\"float: left;\"\r\n      //       >\r\n      //         <strong>${name}</strong>\r\n      //       </div>\r\n      //       <button\r\n      //         id=\"btn_${feature.engId}\"\r\n      //         style=\"color: #fff;background-color: #2A83E6;border-color: #fff;border-width:0px;\"\r\n      //       >签到</button>\r\n      //     </div>\r\n      //   `\r\n      // const markerHTMLDetail = `\r\n      //     <div>\r\n      //       <div\r\n      //         style=\"float: left;\"\r\n      //       >\r\n      //         <strong>${name}</strong>\r\n      //       </div>\r\n      //     </div>\r\n      //   `\r\n      marker\r\n        .setLngLat(position)\r\n        .addTo(mapObj.mapInstance.map);\r\n      //   .setPopup(mapObj.mapInstance.newPopup({ offset: [0, -15], closeButton: false })\r\n      //     .setHTML(ifDetail ? markerHTMLDetail : markerHTML))\r\n      //   .addTo(mapObj.mapInstance.map);\r\n      // marker.togglePopup();\r\n      if (!ifDetail) {\r\n        // 对按钮添加事件，进行调出签到框\r\n        // document.getElementById(\"btn_\" + feature.engId).addEventListener(\"click\", (e) => {\r\n        //   bus.$emit(\"startSignIn\", feature);\r\n        //   e.stopPropagation();\r\n        // })\r\n        // 对img添加点击事件\r\n        document.getElementById(\"keypoint_\" + feature.engId).addEventListener(\"click\", (e) => {\r\n          // 获取当前点击的关键点\r\n          let clickKeyPoint = document.getElementById(\"keypoint_\" + feature.engId);\r\n          if (clickKeyPoint) {\r\n            if (clickKeyPoint == this.currentKeyPoint) {\r\n              // 如果当前点击的关键点与全局的当前关键点相同，即重复点击取消放大或进行放大\r\n              if (clickKeyPoint.style.width == \"24px\") {\r\n                clickKeyPoint.style.width = \"40px\";\r\n                clickKeyPoint.style.height = \"40px\";\r\n                // marker.togglePopup();\r\n                this.drawBuffer(feature.engGeom);\r\n                bus.$emit(\"startSignIn\", feature);\r\n              } else {\r\n                clickKeyPoint.style.width = \"24px\";\r\n                clickKeyPoint.style.height = \"24px\";\r\n              }\r\n            } else {\r\n              if (this.currentKeyPoint) {\r\n                // 初始情况下，暂不设置全局的当前关键点的大小，如果已经存在全局当前关键点，则将其恢复原状\r\n                this.currentKeyPoint.style.width = \"24px\";\r\n                this.currentKeyPoint.style.height = \"24px\";\r\n              }\r\n              // 放大当前点击的关键点\r\n              clickKeyPoint.style.width = \"40px\";\r\n              clickKeyPoint.style.height = \"40px\";\r\n              // marker.togglePopup();\r\n              this.drawBuffer(feature.engGeom);\r\n              bus.$emit(\"startSignIn\", feature);\r\n              this.currentKeyPoint = clickKeyPoint;\r\n            }\r\n          }\r\n          e.stopPropagation();\r\n        })\r\n      }\r\n\r\n    },\r\n    removeKeyPointMarker(ids) {\r\n      ids.forEach(id => {\r\n        let currentEle = document.getElementById(\"keypoint_\" + id);\r\n        if (currentEle) {\r\n          currentEle.parentNode.removeChild(currentEle);\r\n        }\r\n      })\r\n    },\r\n    // 改变关键点marker的颜色，替换图片地址, status为true显示绿色，为false显示份色\r\n    changeKeyPointMarker(engId, status) {\r\n      const src = require('@/assets/img/inspection/icon_key_point_pink.png');\r\n      const src2 = require('@/assets/img/inspection/icon_key_point_green.png');\r\n      let clickKeyPoint = document.getElementById(\"keypoint_\" + engId);\r\n      if (clickKeyPoint) {\r\n        if (status) {\r\n          clickKeyPoint.src = src2;\r\n        } else {\r\n          clickKeyPoint.src = src;\r\n        }\r\n\r\n      }\r\n    },\r\n    // 移除所有应急巡检marker\r\n    removeInspEmeMarker(ids) {\r\n      ids.forEach(id => {\r\n        // 如果存在id为eventObj_one的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n        let currentEle = document.getElementById(\"eme_\" + id);\r\n        if (currentEle) {\r\n          currentEle.parentNode.removeChild(currentEle);\r\n        }\r\n      })\r\n    },\r\n    // 添加应急巡检的marker\r\n    addInspEmeMarker(feature, ifDetail = false) {\r\n      let position;\r\n      if (feature.geometry.type === 'Polygon' || feature.geometry.type === 'MultiPolygon') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'LineString') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'Point') {\r\n        position = feature.geometry.coordinates;\r\n      }\r\n      if (!position) return;\r\n      let name = feature.properties.name || \"巡检范围\";\r\n      const src = require('@/assets/img/inspection/icon_emergency_point.png');\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"eme_${feature.id}\" src=\"${src}\" width=\"24\" height=\"24\"></img>\r\n        `\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n        offset: [0, -5]\r\n      });\r\n      const markerHTML = `\r\n          <div id=\"base_${feature.id}\">\r\n          </div>\r\n        `\r\n      if (!ifDetail) {\r\n        marker\r\n          .setLngLat(position)\r\n          .setPopup(mapObj.mapInstance.newPopup({ offset: [0, -15], closeButton: false })\r\n            .setHTML(markerHTML))\r\n          .addTo(mapObj.mapInstance.map);\r\n        marker.togglePopup();\r\n        let countTime = new CountTimePop({ propsData: { restTime: feature.restTime } });\r\n        countTime.$mount(`#base_${feature.id}`);\r\n        // 对img添加点击事件\r\n        document.getElementById(\"eme_\" + feature.id).addEventListener(\"click\", (e) => {\r\n          // 获取当前点击的关键点\r\n          let clickEmeMarker = document.getElementById(\"eme_\" + feature.id);\r\n          if (clickEmeMarker) {\r\n            if (clickEmeMarker == this.currentEmeMarker) {\r\n              if (clickEmeMarker.style.width == \"24px\") {\r\n                clickEmeMarker.style.width = \"40px\";\r\n                clickEmeMarker.style.height = \"40px\";\r\n                bus.$emit(\"startEmeSignIn\", feature);\r\n                marker.togglePopup();\r\n              } else {\r\n                clickEmeMarker.style.width = \"24px\";\r\n                clickEmeMarker.style.height = \"24px\";\r\n              }\r\n            } else {\r\n              if (this.currentEmeMarker) {\r\n                this.currentEmeMarker.style.width = \"24px\";\r\n                this.currentEmeMarker.style.height = \"24px\";\r\n              }\r\n              clickEmeMarker.style.width = \"40px\";\r\n              clickEmeMarker.style.height = \"40px\";\r\n              marker.togglePopup();\r\n              bus.$emit(\"startEmeSignIn\", feature);\r\n              this.currentEmeMarker = clickEmeMarker;\r\n            }\r\n          }\r\n          e.stopPropagation();\r\n        })\r\n      } else {\r\n        marker\r\n          .setLngLat(position)\r\n          .addTo(mapObj.mapInstance.map);\r\n      }\r\n    },\r\n    // 添加巡检事件marker\r\n    addInspEventMarker(feature) {\r\n      let position;\r\n      if (feature.geometry.type === 'Polygon' || feature.geometry.type === 'MultiPolygon') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'LineString') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'Point') {\r\n        position = feature.geometry.coordinates;\r\n      }\r\n      if (!position) return;\r\n      const src = require('@/assets/img/inspection/icon_event_map.png');\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"event_${feature.id}\" src=\"${src}\" width=\"24\" height=\"24\"></img>\r\n        `\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n        offset: [0, 10]\r\n      });\r\n      marker\r\n        .setLngLat(position)\r\n        .setPopup(mapObj.mapInstance.newPopup({ offset: [0, 0], closeButton: false })\r\n          .setHTML(`\r\n            <div style=\"color: #333333;\">\r\n              <strong>${this.eventTypeList[feature.eventType] || '上报事件'}</strong>\r\n            </div>\r\n          `))\r\n        .addTo(mapObj.mapInstance.map);\r\n      marker.togglePopup();\r\n    },\r\n    // 添加巡检事件在图层中\r\n    addInspEventLayer(features) {\r\n      let that = this;\r\n      mapObj.map.loadImage(\r\n        require('@/assets/img/inspection/icon_event_map.png'),\r\n        function (error, image) {\r\n          if (error) throw error;\r\n          if (!mapObj.map.hasImage('event-marker')) {\r\n            mapObj.map.addImage('event-marker', image);\r\n          }\r\n          mapObj.map.addSource('eventPoints', {\r\n            'type': 'geojson',\r\n            'data': {\r\n              'type': 'FeatureCollection',\r\n              'features': features\r\n            }\r\n          });\r\n          mapObj.map.addLayer({\r\n            'id': 'eventPointsLayer',\r\n            'type': 'symbol',\r\n            'source': 'eventPoints',\r\n            'layout': {\r\n              \"visibility\": 'none',\r\n              \"icon-allow-overlap\": true,//自动避让属性\r\n              \"icon-ignore-placement\": true,\r\n              'icon-image': 'event-marker',\r\n              'icon-size': 0.4,\r\n              'icon-offset': [0, 10]\r\n            }\r\n          })\r\n        }\r\n      )\r\n      // mapObj.mapInstance.map.on('click', 'eventPointsLayer', function (e) {\r\n      //   let features = mapObj.mapInstance.map.queryRenderedFeatures(e.point, {\r\n      //     layers: [\"eventPointsLayer\"]\r\n      //   });\r\n      //   let eventType = \"\";\r\n      //   features.forEach(item => {\r\n      //     if (item.properties && item.properties.eventType) {\r\n      //       eventType += that.eventTypeList[item.properties.eventType] + \" \";\r\n      //     }\r\n      //   });\r\n      //   let popup = mapObj.mapInstance.newPopup({ offset: [0, -5], closeButton: false })\r\n      //     .setLngLat(e.lngLat)\r\n      //     .setHTML(`<h3>${eventType}</h3>`)\r\n      //     .addTo(mapObj.mapInstance.map)\r\n      // })\r\n    },\r\n    // 添加上报对象的marker\r\n    addEventObjMarker(feature, type, gridObj) {\r\n      let position;\r\n      if (feature.geometry.type === 'Polygon' || feature.geometry.type === 'MultiPolygon') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'LineString') {\r\n        const center = turf.center(feature.geometry);\r\n        position = center.geometry.coordinates;\r\n      } else if (feature.geometry.type === 'Point') {\r\n        position = feature.geometry.coordinates;\r\n      }\r\n      this.currentPoint = feature\r\n      this.currentPoint.taskId = this.$route.query.taskId\r\n      this.currentPoint.gridId = gridObj.gridId\r\n      this.currentPoint.gridName = gridObj.gridName\r\n      this.currentPoint.code = feature.properties.manhole_code || feature.properties.comb_code || ''\r\n      this.currentPoint.bizType = feature.properties.manhole_type || ''\r\n      this.currentPoint.lng = feature.geometry.coordinates[0]\r\n      this.currentPoint.lat = feature.geometry.coordinates[1]\r\n      // 要素所在图层ID和属性信息\r\n      this.currentPoint.layerID = feature.layer.id\r\n      this.currentPoint.layerType = feature.layer.type\r\n      this.currentPoint.properties = feature.properties\r\n      // 底图要素name_local或设施要素road_name,id\r\n      this.currentPoint.road_name = feature.properties.road_name\r\n      this.currentPoint.id = feature.properties.id\r\n      this.currentPoint.code = feature.properties.manhole_code || feature.properties.gate_code || feature.properties.outlet_code\r\n        || feature.properties.comb_code || feature.properties.valve_code || feature.properties.pump_station_code\r\n        || feature.properties.plant_code || feature.properties.pump_code || feature.properties.fire_cock_code\r\n        || feature.properties.start_code + ',' + feature.properties.end_code || ''\r\n      // 要素对象类型（业务类型/设施类型）\r\n      switch (feature.layer.id) {\r\n        // 雨水\r\n        case \"rd_map_comb\"://comb一定是雨水口\r\n          this.currentPoint.bigType = '雨水'\r\n          this.currentPoint.smallType = '雨水口'\r\n          break\r\n        case \"rd_map_outfall\"://排放口 1-雨水； 2-污水； 3-合流； 4-其他\r\n          this.currentPoint.bigType = feature.properties.pipe_type\r\n          this.currentPoint.smallType = '排放口'\r\n          break\r\n        case \"rd_map_manhole\"://检查井  1-雨水；2-污水\r\n          this.currentPoint.bigType = feature.properties.manhole_type\r\n          this.currentPoint.smallType = '检查井'\r\n          break\r\n        case \"rd_map_gate\"://闸门 1-雨水； 2-污水； 3-合流； 4-其他\r\n          this.currentPoint.bigType = feature.properties.pipe_type\r\n          this.currentPoint.smallType = '闸门'\r\n          break\r\n        case \"rd_map_drainpipe_ys_big\":\r\n          this.currentPoint.bigType = '雨水'\r\n          this.currentPoint.smallType = '雨水管线'\r\n          break\r\n        case \"rd_map_drainpipe_ys_small\":\r\n          this.currentPoint.bigType = '雨水'\r\n          this.currentPoint.smallType = '雨水管线'\r\n          break\r\n        // 污水\r\n        case \"rd_map_drainpipe_ws_big\":\r\n          this.currentPoint.bigType = '污水'\r\n          this.currentPoint.smallType = '污水管线'\r\n          break\r\n        case \"rd_map_drainpipe_ws_small\":\r\n          this.currentPoint.bigType = '污水'\r\n          this.currentPoint.smallType = '污水管线'\r\n          break\r\n        // 给水\r\n        case \"map_supply_firehydrant\"://消火栓一定是给水\r\n          this.currentPoint.bigType = '给水'\r\n          this.currentPoint.smallType = '消火栓'\r\n          break\r\n        case \"map_supply_valve\"://阀门valve一定是给水\r\n          this.currentPoint.bigType = '给水'\r\n          this.currentPoint.smallType = '阀门'\r\n          break\r\n        case \"map_supply_pipe_distribute\"://配水管线\r\n          this.currentPoint.bigType = '给水'\r\n          this.currentPoint.smallType = '配水管线'\r\n          break\r\n        case \"map_supply_pipe_delivery\"://输水管线\r\n          this.currentPoint.bigType = 'supply'\r\n          this.currentPoint.smallType = '输水管线'\r\n          break\r\n        case \"map_supply_pipe_circulating\"://回水管线\r\n          this.currentPoint.bigType = '给水'\r\n          this.currentPoint.smallType = '回水管线'\r\n          break\r\n        case \"map_waterwork\"://供水厂\r\n          this.currentPoint.bigType = '给水'\r\n          this.currentPoint.smallType = '供水厂'\r\n          break\r\n        // 再生水\r\n        case \"map_recycle_pipe\"://再生水管线\r\n          this.currentPoint.bigType = '再生水'\r\n          this.currentPoint.smallType = 'pipeline'\r\n          break\r\n        case \"map_waterwork\"://再生水厂\r\n          this.currentPoint.bigType = '再生水'\r\n          this.currentPoint.smallType = '再生水厂'\r\n          break\r\n      }\r\n\r\n      const src = require(`@/assets/img/legend/事件上报.png`);\r\n      // 如果存在id为eventObj_one的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n      let currentEle = document.getElementById(\"eventObj_one\");\r\n      if (currentEle) {\r\n        currentEle.parentNode.removeChild(currentEle);\r\n      }\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"eventObj_one\" src=\"${src}\" width=\"40\" height=\"40\">\r\n        `\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele\r\n      });\r\n      marker\r\n        .setLngLat(position)\r\n        .setPopup(mapObj.mapInstance.newPopup({ offset: [0, -7], closeButton: false })\r\n          .setHTML(`<div id=\"deviceDetail\"></div>`))\r\n        .addTo(mapObj.map);\r\n      let pop = new PopupItem({ propsData: { deviceCode: this.currentPoint.code, type: type, isDevice: true, fun: this.goToDetail } })\r\n      this.$nextTick(() => {\r\n        pop.$mount('#deviceDetail')\r\n      })\r\n      marker.togglePopup();\r\n\r\n    },\r\n    goToDetail(type) {\r\n      if (type == 'event') {\r\n        this.$router.push({\r\n          name: 'addProblemIndex',\r\n          query: { msg: this.currentPoint, token: this.formToken, taskId: this.$route.query.taskId },\r\n          params: { type: 'add' }\r\n        })\r\n      } else {\r\n        this.$router.push({\r\n          name: 'addFlaws',\r\n          query: { msg: this.currentPoint, token: this.formToken, taskId: this.$route.query.taskId },\r\n          params: { type: 'add' }\r\n        })\r\n      }\r\n    },\r\n    // 移除上报事件的对象marker\r\n    removeEventObjMarker() {\r\n      // 如果存在id为eventObj_one的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n      let currentEle = document.getElementById(\"eventObj_one\");\r\n      if (currentEle) {\r\n        currentEle.parentNode.removeChild(currentEle);\r\n        // bus.$emit(\"reportInspEvent\", {}, false);\r\n      }\r\n    },\r\n    // 加载巡检人的1公里以内的管线数据\r\n    addInspBufferData(position, radius = 0.5) {\r\n      let buffered = turf.buffer(position, radius, 'kilometers');\r\n      const params = {\r\n        inspBusinessType: position.inspBusinessType,\r\n        geom: buffered.geometry,\r\n        pipeLevel: position.pipeLevel\r\n        // pipeLevel: {\r\n        //   pipeMax: null,\r\n        //   pipeMin: null\r\n        // }\r\n        // pipeLevel: null\r\n      }\r\n      // this.getDataWithSpatial({ geometry: buffered.geometry})\r\n      this.getDataWithSpatialAndPipeLevel(params)\r\n        .then(devices => {\r\n          // console.log(\"devices==>\", devices);\r\n          if (devices.data.features.length > 0) {\r\n            let features = devices.data.features;\r\n            this.handleInspData(features, true, false);\r\n          }\r\n        })\r\n    },\r\n    // 返回radius为半径范围的工程对象数据\r\n    async getInspDataInRange(position, radius = 0.035) {\r\n      let buffered = turf.buffer(position, radius, 'kilometers');\r\n      // const devices = await this.getDataWithSpatial({geometry: buffered.geometry});\r\n      const params = {\r\n        inspBusinessType: position.inspBusinessType,\r\n        geom: buffered.geometry,\r\n        // pipeLevel: position.pipeLevel\r\n        // pipeLevel: {\r\n        //   pipeMax: null,\r\n        //   pipeMin: null\r\n        // }\r\n        pipeLevel: null\r\n      }\r\n      const devices = await this.getDataWithSpatialAndPipeLevel(params);\r\n      let featuresData = [];\r\n      if (devices.data.features.length > 0) {\r\n        let features = devices.data.features;\r\n        features.map(item => {\r\n          let paramsObj = {};\r\n          let fieldNames = item.fieldNames;\r\n          let fieldValues = item.fieldValues;\r\n          let lxnIndex = fieldNames.findIndex(it => it == \"LXN\");\r\n          let pipeIndex = fieldNames.findIndex(it => it == \"PIPETYPE\");\r\n          let properties = lxnIndex\r\n            ? showProperties2[`${fieldValues[pipeIndex]}`]\r\n            : pipeIndex\r\n              ? showProperties2[`${fieldValues[pipeIndex]}`]\r\n              : [];\r\n          for (let i = 0; i < fieldNames.length; i++) {\r\n            this.$set(paramsObj, `${fieldNames[i]}`, fieldValues[i]);\r\n          }\r\n          if (fieldNames.findIndex(it => it == \"LENGTH\") > -1) {\r\n            this.$set(paramsObj, \"UNIT\", \"米\");\r\n            this.$set(\r\n              paramsObj,\r\n              \"LENGTH\",\r\n              fieldValues[fieldNames.findIndex(i => i == \"LENGTH\")]\r\n            );\r\n          } else {\r\n            this.$set(paramsObj, \"UNIT\", \"个\");\r\n          }\r\n          this.$set(paramsObj, \"ID\", item.ID);\r\n          let tempGeometry = turf.feature(\r\n            {\r\n              type: item.geometry.type === \"LINE\" ? \"LineString\" : \"Point\",\r\n              coordinates: item.geometry.points.map(point => [\r\n                point.x,\r\n                point.y\r\n              ])\r\n            },\r\n            paramsObj\r\n          );\r\n          this.$set(tempGeometry, \"id\", item.ID);\r\n          featuresData.push(tempGeometry);\r\n          let geometry = JSON.parse(JSON.stringify(tempGeometry));\r\n          this.$set(paramsObj, `geometry`, geometry);\r\n          return paramsObj;\r\n        })\r\n      }\r\n      return featuresData;\r\n    },\r\n    // 返回radius为半径范围的工程对象数据\r\n    async getInspDataInRangeTile(position, radius = 0.035) {\r\n      let pipeType;\r\n      switch (position.inspBusinessType) {\r\n        case \"WATER_SUPPLY\":\r\n          pipeType = \"供水管线\";\r\n          break;\r\n        case \"RAI_WATER\":\r\n          pipeType = \"雨水管线\";\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          pipeType = \"污水管线\";\r\n          break;\r\n        case \"ORIGIN_WATER\":\r\n          pipeType = \"源水管线\";\r\n          break;\r\n        case \"RIVER_WATER\":\r\n          pipeType = \"排江管\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      const params = {\r\n        geomPoint: position.geometry,\r\n        pipeType: pipeType,\r\n        radius: radius,\r\n        type: \"线\"\r\n      }\r\n      const res = await this.$api.getAction('/yhsw-postgis/getAllPointOrLineGeomInsp', params);\r\n      console.log(\"get all Point or Line geom==>\", res.data);\r\n    },\r\n    // 处理管线等巡检数据数据\r\n    handleInspData(data, inspUser = false, unInspLineSource = false) {\r\n      let featuresData = [];\r\n      data.map(item => {\r\n        let paramsObj = {};\r\n        let fieldNames = item.fieldNames;\r\n        let fieldValues = item.fieldValues;\r\n        let lxnIndex = fieldNames.findIndex(it => it == \"LXN\");\r\n        let pipeIndex = fieldNames.findIndex(it => it == \"PIPETYPE\");\r\n        let properties = lxnIndex\r\n          ? showProperties2[`${fieldValues[pipeIndex]}`]\r\n          : pipeIndex\r\n            ? showProperties2[`${fieldValues[pipeIndex]}`]\r\n            : [];\r\n        for (let i = 0; i < fieldNames.length; i++) {\r\n          this.$set(paramsObj, `${fieldNames[i]}`, fieldValues[i]);\r\n        }\r\n        if (fieldNames.findIndex(it => it == \"LENGTH\") > -1) {\r\n          this.$set(paramsObj, \"UNIT\", \"米\");\r\n          this.$set(\r\n            paramsObj,\r\n            \"LENGTH\",\r\n            fieldValues[fieldNames.findIndex(i => i == \"LENGTH\")]\r\n          );\r\n        } else {\r\n          this.$set(paramsObj, \"UNIT\", \"个\");\r\n        }\r\n        this.$set(paramsObj, \"ID\", item.ID);\r\n        let tempGeometry = turf.feature(\r\n          {\r\n            type: item.geometry.type === \"LINE\" ? \"LineString\" : \"Point\",\r\n            coordinates: item.geometry.points.map(point => [\r\n              point.x,\r\n              point.y\r\n            ])\r\n          },\r\n          paramsObj\r\n        );\r\n        this.$set(tempGeometry, \"id\", item.ID);\r\n        featuresData.push(tempGeometry);\r\n        let geometry = JSON.parse(JSON.stringify(tempGeometry));\r\n        this.$set(paramsObj, `geometry`, geometry);\r\n        return paramsObj;\r\n      })\r\n      try {\r\n        const that = this;\r\n        var timer = setInterval(function () {\r\n          if (mapObj.mapInstance && that.map.getSource(\"unInspLineSource\") && mapObj.mapInstance.map.isSourceLoaded(\"rangeSource\")) {\r\n            clearInterval(timer);\r\n            if (inspUser) {\r\n              that.setLineGeoSource(featuresData, \"inspUserLineSource\");\r\n            } else {\r\n              that.setLineGeoSource(featuresData, \"initInspLineSource\");\r\n              // 如果是未巡检线数据源\r\n              if (unInspLineSource) {\r\n                that.setLineGeoSource(featuresData, \"unInspLineSource\");\r\n              }\r\n            }\r\n          }\r\n        }, 100);\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    // 设置线数据源,data是数组，source为数据源名称\r\n    setLineGeoSource(data, source) {\r\n      if (source === \"inspUserLineSource\") {\r\n        data = data;\r\n      } else if (source === \"curInspLineSource\") {\r\n        // 如果数据源是curInspLineSource，则触发管线任务上报\r\n        // if (data.length > 0) {\r\n        //   bus.$emit(\"reportInspEvent\", data[0], true);\r\n        // } else {\r\n        //   bus.$emit(\"reportInspEvent\", {}, false);\r\n        // }\r\n      } else {\r\n        let sourceData = mapObj.mapInstance.map.getSource(source);\r\n        data = data.concat(sourceData._data.features);\r\n        // 数组对象去重\r\n        let obj = {};\r\n        data = data.reduce(function (item, next) {\r\n          obj[next.id] ? '' : obj[next.id] = true && item.push(next);\r\n          return item;\r\n        }, []);\r\n      }\r\n      mapObj.mapInstance.setSourceData(source, {\r\n        type: \"FeatureCollection\",\r\n        features: data\r\n      });\r\n    },\r\n    // 将管线数据从一个图层改到另一个图层\r\n    changeInspLineSource(data, fromSource, toSource) {\r\n      try {\r\n        // 如果fromSourceData在toSourceData之后加载，则filter过滤失败，暂时将to的图层放在from上方\r\n        let fromSourceData = mapObj.mapInstance.map.getSource(fromSource);\r\n        let toSourceData = mapObj.mapInstance.map.getSource(toSource);\r\n\r\n        let fromData = fromSourceData._data.features.filter(x => data.every(y => y.id !== x.id));\r\n        data = fromSourceData._data.features.filter(x => data.some(y => y.id === x.id));\r\n        let toData = data.concat(toSourceData._data.features);\r\n        // console.log(\"fromData==>\",fromSourceData._data,toSourceData._data, fromData, toData);\r\n        mapObj.mapInstance.setSourceData(fromSource, {\r\n          type: \"FeatureCollection\",\r\n          features: fromData\r\n        })\r\n        mapObj.mapInstance.setSourceData(toSource, {\r\n          type: \"FeatureCollection\",\r\n          features: toData\r\n        });\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    setAllInspLineSource(data) {\r\n      try {\r\n        const that = this;\r\n        let timer = setInterval(function () {\r\n          if (that.isOnLoaded() && mapObj.map.getSource(\"initInspLineSource\") && mapObj.map.isSourceLoaded(\"initInspLineSource\")) {\r\n            clearInterval(timer)\r\n            mapObj.mapInstance.setSourceData('initInspLineSource', {\r\n              type: \"FeatureCollection\",\r\n              features: data\r\n            })\r\n          }\r\n        }, 100);\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    addInspRecordLineSource(data) {\r\n      mapObj.mapInstance.map.addSource('')\r\n    },\r\n    // 已巡检管线回显, 涉及数据遍历，如果数量巨大，需要处理\r\n    addInspRecordTileLineSource(data, completion = null) {\r\n      const that = this;\r\n      try {\r\n        Toast.loading({\r\n          message: \"加载地图管线中...\"\r\n        })\r\n        data = [...new Set(data)]\r\n        recordFeatures.length = 0\r\n        recordFeatures.push(...data)\r\n        let flag = false\r\n        that.recordTimer = setInterval(function () {\r\n          if (flag) {\r\n            clearInterval(that.recordTimer);\r\n            return\r\n          }\r\n          if (that.isOnLoaded() && mapObj.mapInstance.map.getSource(\"initInspLineSource\") && mapObj.mapInstance.map.isSourceLoaded(\"initInspLineSource\")) {\r\n            let filterData = [\"in\", \"id\"];\r\n            filterData.push(...recordFeatures)\r\n            console.log(filterData)\r\n\r\n            const boxFeatures = mapObj.mapInstance.map.querySourceFeatures(\"initInspLineSource\", {\r\n              filter: filterData\r\n            })\r\n            console.log(boxFeatures)\r\n            boxFeatures.forEach(feat => {\r\n              // 如果不存在这个state\r\n              if (!feat.state || !feat.state.isInsp) {\r\n                mapObj.map.setFeatureState({\r\n                  source: \"initInspLineSource\",\r\n                  id: feat.id\r\n                }, {\r\n                  isInsp: true\r\n                })\r\n              }\r\n            })\r\n            flag = true\r\n          }\r\n        }, 500);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    // 初始化图层，初始管线图层，已巡检管线图层，未巡检管线图层，选中当前管线图层\r\n    addLineGeoLayer() {\r\n      // 巡检人员范围管线\r\n      // mapObj.mapInstance.addSource(\"inspUserLineSource\", {\r\n      //   type: \"geojson\",\r\n      //   data: {\r\n      //     type: \"FeatureCollection\",\r\n      //     features: []\r\n      //   }\r\n      // });\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"inspUserLineLayer\",\r\n      //   type: \"line\",\r\n      //   source: \"inspUserLineSource\",\r\n      //   paint: {\r\n      //     \"line-color\": \"#4264FB\",\r\n      //     \"line-width\": 3\r\n      //   }\r\n      // }, \"rangeLayer\");\r\n      // 初始化管线图层\r\n      mapObj.mapInstance.addSource(\"initInspLineSource\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"initInspLineLayer\",\r\n        type: \"line\",\r\n        source: \"initInspLineSource\",\r\n        paint: {\r\n          \"line-color\": [\r\n            'case',\r\n            ['boolean', ['feature-state', 'isInsp'], false],\r\n            \"#44BA5A\",\r\n            \"#FF0000\"\r\n          ],\r\n          \"line-width\": 3\r\n        }\r\n      }, \"rd_map_outfall\");\r\n      // 未巡检管线图层\r\n      // mapObj.mapInstance.addSource(\"unInspLineSource\", {\r\n      //   type: \"geojson\",\r\n      //   data: {\r\n      //     type: \"FeatureCollection\",\r\n      //     features: []\r\n      //   }\r\n      // });\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"unInspLineLayer\",\r\n      //   type: \"line\",\r\n      //   source: \"unInspLineSource\",\r\n      //   paint: {\r\n      //     \"line-color\": \"#FF0000\",\r\n      //     \"line-width\": 3\r\n      //   }\r\n      // }, \"initInspLineLayer\");\r\n      // 已巡检管线图层\r\n      // mapObj.mapInstance.addSource(\"inspLineSource\", {\r\n      //   type: \"geojson\",\r\n      //   data: {\r\n      //     type: \"FeatureCollection\",\r\n      //     features: []\r\n      //   }\r\n      // });\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"inspLineLayer\",\r\n      //   type: \"line\",\r\n      //   source: \"inspLineSource\",\r\n      //   paint: {\r\n      //     \"line-color\": \"#44BA5A\",\r\n      //     \"line-width\": 3\r\n      //   }\r\n      // }, \"unInspLineLayer\");\r\n    },\r\n    setRecordData(val) {\r\n      let that = this;\r\n      mapObj.mapInstance.map.getLayer(\"rangeL\") && mapObj.mapInstance.map.removeLayer(\"rangeL\");\r\n      mapObj.mapInstance.map.getLayer(\"rangeM\") && mapObj.mapInstance.map.removeLayer(\"rangeM\");\r\n      mapObj.mapInstance.map.getSource(\"rangeS\") && mapObj.mapInstance.map.removeSource(\"rangeS\");\r\n      val.forEach(item => {\r\n        item.device_id = item.equipmentId;\r\n        item.geometry = item.geomTemp ? item.geomTemp : item.geom;\r\n        if (['热点', '热点用户群', '热点标签'].includes(item.yhType)) {\r\n          item.iconName = this.getIconName('done', item)\r\n        }\r\n      })\r\n      mapObj.mapInstance.map.getLayer(\"yhPipePointsLayer\") && mapObj.mapInstance.map.removeLayer(\"yhPipePointsLayer\");\r\n      mapObj.mapInstance.map.getSource(\"yhPipePoints\") && mapObj.mapInstance.map.removeSource(\"yhPipePoints\");\r\n      mapObj.mapInstance.map.getLayer(\"yhPipeLinesLayer\") && mapObj.mapInstance.map.removeLayer(\"yhPipeLinesLayer\");\r\n      mapObj.mapInstance.map.getSource(\"yhPipeLines\") && mapObj.mapInstance.map.removeSource(\"yhPipeLines\");\r\n      let features = val.map(item => {\r\n        if (item.geometry.type === 'Point')\r\n          return {\r\n            id: item.id,\r\n            properties: item,\r\n            geometry: item.geometry,\r\n            type: \"Feature\"\r\n          }\r\n      })\r\n      let features2 = val.map(item => {\r\n        if (item.geometry.type === 'LineString')\r\n          return {\r\n            id: item.id,\r\n            properties: item,\r\n            geometry: item.geometry,\r\n            type: \"Feature\"\r\n          }\r\n      })\r\n      console.log('features :>> ', features);\r\n      mapObj.mapInstance.map.addSource('yhPipePoints', {\r\n        'type': 'geojson',\r\n        'data': {\r\n          'type': 'FeatureCollection',\r\n          'features': features.filter((item) => {\r\n            return item != undefined\r\n          })\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer(\r\n        {\r\n          id: \"yhPipePointsLayer\",\r\n          type: \"symbol\",\r\n          source: \"yhPipePoints\",\r\n          \"layout\": {\r\n            // \"icon-image\": features[0].properties.yhType ? features[0].properties.yhType.indexOf('养护')>-1 ? \"wsj3\" : features[0].properties.yhType.indexOf('热点')>-1 ? \"wcrd\" : \"rwwc\" : \"wsj3\",\r\n            \"icon-image\": [\r\n              'case',\r\n              [\"==\", [\"has\", \"yhType\"], false],\r\n              \"wsj3\",\r\n              [\r\n                \"any\",\r\n                [\"==\", [\"get\", \"yhType\"], \"井养护\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"管网养护\"],\r\n              ],\r\n              \"wsj3\",\r\n              [\r\n                \"any\",\r\n                [\"==\", [\"get\", \"yhType\"], \"热点\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"热点标签\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"热点用户群\"],\r\n              ],\r\n              [\"get\", \"iconName\"],\r\n              [\r\n                \"any\",\r\n                [\"==\", [\"get\", \"yhType\"], \"用户群任务\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"标签任务\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"设备任务\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"井任务\"],\r\n                [\"==\", [\"get\", \"yhType\"], \"管网任务\"],\r\n              ],\r\n              // \"rwwc\",\r\n              [\r\n                \"case\",\r\n                [\"==\", [\"get\", \"approveStatus\"], 2],\r\n                \"th\",\r\n                \"rwwc\"\r\n              ],\r\n              \"wsj3\"\r\n            ],\r\n            \"icon-size\": 0.55,\r\n            'icon-allow-overlap': true\r\n          },\r\n        },\r\n        \"user\"\r\n      );\r\n      mapObj.mapInstance.map.addSource('yhPipeLines', {\r\n        'type': 'geojson',\r\n        'data': {\r\n          'type': 'FeatureCollection',\r\n          'features': features2.filter((item) => {\r\n            return item != undefined\r\n          })\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer(\r\n        {\r\n          id: \"yhPipeLinesLayer\",\r\n          type: \"line\",\r\n          source: \"yhPipeLines\",\r\n          paint: {\r\n            \"line-color\": \"#44BA5A\",\r\n            \"line-width\": 3.5\r\n          }\r\n        },\r\n        \"user\"\r\n      );\r\n    },\r\n    getIconName(type, obj) {\r\n      switch (type) {\r\n        case 'todo':\r\n          switch (obj.name) {\r\n            case '低保户':\r\n              return 'dbh'\r\n            case '长辈':\r\n              return 'zb'\r\n            case '违规用户':\r\n              return 'wgyh'\r\n            case '一年内销户':\r\n              return 'ynnxh'\r\n            case '一年内报停':\r\n              return 'ynnbt'\r\n            case '基建表排查':\r\n              return 'jjb'\r\n            case '三期零吨':\r\n              return 'ld'\r\n            case '大流量客户':\r\n              return 'dll'\r\n            case '多期零吨':\r\n              return 'ld'\r\n            case '污水单独计量用户':\r\n              return 'wsddjlyh'\r\n            default:\r\n              return 'hotdata'\r\n          }\r\n        case 'selected':\r\n          switch (obj.name) {\r\n            case '低保户':\r\n              return 'dbhxz'\r\n            case '长辈':\r\n              return 'zbxz'\r\n            case '违规用户':\r\n              return 'wgyhxz'\r\n            case '一年内销户':\r\n              return 'ynnxhxz'\r\n            case '一年内报停':\r\n              return 'ynnbtxz'\r\n            case '基建表排查':\r\n              return 'jjbxz'\r\n            case '三期零吨':\r\n              return 'ldxz'\r\n            case '大流量客户':\r\n              return 'dllxz'\r\n            case '多期零吨':\r\n              return 'ldxz'\r\n            case '污水单独计量用户':\r\n              return 'wsddjlyhxz'\r\n            default:\r\n              return 'xzrd'\r\n          }\r\n        case 'done':\r\n          switch (obj.name) {\r\n            case '低保户':\r\n              return 'dbhwc'\r\n            case '长辈':\r\n              return 'zbwc'\r\n            case '违规用户':\r\n              return 'wgyhwc'\r\n            case '一年内销户':\r\n              return 'ynnxhwc'\r\n            case '一年内报停':\r\n              return 'ynnbtwc'\r\n            case '基建表排查':\r\n              return 'jjbwc'\r\n            case '三期零吨':\r\n              return 'ldwc'\r\n            case '大流量客户':\r\n              return 'dllwc'\r\n            case '多期零吨':\r\n              return 'ldwc'\r\n            case '污水单独计量用户':\r\n              return 'wsddjlyhwc'\r\n            default:\r\n              return 'wcrd'\r\n          }\r\n      }\r\n    },\r\n    setHotData(hotdata, index) {\r\n      let that = this;\r\n      // hotdata.forEach(item => {\r\n      //   item.device_id = item.code;\r\n      //   item.geometry = {\r\n      //     type: 'Point',\r\n      //     coordinates: [item.longi, item.lati]\r\n      //   };\r\n      // })\r\n      mapObj.mapInstance.map.getLayer(\"hotDataLayer\" + String(index)) && mapObj.mapInstance.map.removeLayer(\"hotDataLayer\" + String(index));\r\n      mapObj.mapInstance.map.getSource(\"hotDataSource\" + String(index)) && mapObj.mapInstance.map.removeSource(\"hotDataSource\" + String(index));\r\n      hotdata.forEach((item) => {\r\n        item.iconName = this.getIconName('todo', item)\r\n      })\r\n      let features = hotdata.map(item => {\r\n        return {\r\n          id: item.code,\r\n          properties: item,\r\n          geometry: item.geometry,\r\n          type: \"Feature\"\r\n        }\r\n      })\r\n      console.log('features :>> ', features);\r\n      mapObj.mapInstance.map.addSource('hotDataSource' + String(index), {\r\n        'type': 'geojson',\r\n        'data': {\r\n          'type': 'FeatureCollection',\r\n          'features': features\r\n        }\r\n      });\r\n      mapObj.mapInstance.map.addLayer(\r\n        {\r\n          id: \"hotDataLayer\" + String(index),\r\n          type: \"symbol\",\r\n          source: \"hotDataSource\" + String(index),\r\n          \"layout\": {\r\n            \"icon-image\": [\"get\", \"iconName\"],\r\n            \"icon-size\": 0.5,\r\n            'icon-allow-overlap': true\r\n          },\r\n        }, 'unPointLayer0'\r\n      );\r\n      // console.log(mapObj.mapInstance.map.getStyle())\r\n    },\r\n    // 获取范围内设施\r\n    getRangs(taskId, callback) {\r\n      let that = this;\r\n      mapObj.mapInstance.map.getLayer(\"unLineLayer\") && mapObj.mapInstance.map.removeLayer(\"unLineLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"unPointLayer\") && mapObj.mapInstance.map.removeLayer(\"unPointLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"unPointLayerBiaozhu\") && mapObj.mapInstance.map.removeLayer(\"unPointLayerBiaozhu\");\r\n      mapObj.mapInstance.map.getSource(\"yhPipeVectorSource\") && mapObj.mapInstance.map.removeSource(\"yhPipeVectorSource\");\r\n      let url = baseUrl.url_config + `/yhsw-maintain/maintainTask/resultmvt/{x}/{y}/{z}?taskId=${taskId}`\r\n      mapObj.mapInstance.addSource(`yhPipeVectorSource`, {\r\n        type: \"vector\",\r\n        tiles: [url],\r\n        promoteId: 'id'\r\n      })\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"unLineLayer\",\r\n        type: \"line\",\r\n        source: \"yhPipeVectorSource\",\r\n        \"source-layer\": \"line\",\r\n        paint: {\r\n          \"line-color\": \"#ff0000\",\r\n          \"line-width\": 3\r\n        }\r\n      }, 'user')\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"unPointLayer\",\r\n        type: \"symbol\",\r\n        source: \"yhPipeVectorSource\",\r\n        \"source-layer\": \"point\",\r\n        \"layout\": {\r\n          \"icon-image\": \"wsj1\",\r\n          \"icon-size\": 0.5,\r\n          'icon-allow-overlap': true\r\n\r\n        }\r\n      }, 'user')\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"unPointLayerBiaozhu\",\r\n        type: \"symbol\",\r\n        source: \"yuhang_ws_wsj\",\r\n        \"source-layer\": \"ws_wsj\",\r\n        \"minzoom\": 18,\r\n        \"layout\": {\r\n          \"text-field\": ['concat', [\"get\", \"floorelevation\"], '/', [\"get\", \"depth\"]],\r\n          \"text-offset\": [1, 1]\r\n        }\r\n      }, 'user')\r\n      console.log(mapObj.mapInstance.map.getSource(\"yhPipeVectorSource\"))\r\n      if (callback) {\r\n        mapObj.mapInstance.map.off('click', this.callback)\r\n        this.callback = callback;\r\n        mapObj.mapInstance.map.on('click', callback)\r\n      }\r\n    },\r\n    getGridRangs(taskId, callback, ifMulti) {\r\n      let that = this;\r\n      that.multiTaskSAL.forEach((item) => {\r\n        mapObj.mapInstance.map.getLayer(\"unLineLayer\" + item) && mapObj.mapInstance.map.removeLayer(\"unLineLayer\" + item);\r\n        mapObj.mapInstance.map.getLayer(\"unPointLayer\" + item) && mapObj.mapInstance.map.removeLayer(\"unPointLayer\" + item);\r\n        mapObj.mapInstance.map.getSource(\"yhPipeVectorSource\" + item) && mapObj.mapInstance.map.removeSource(\"yhPipeVectorSource\" + item);\r\n      })\r\n      that.multiTaskSAL = []\r\n      mapObj.mapInstance.map.getLayer(\"unLineLayer\") && mapObj.mapInstance.map.removeLayer(\"unLineLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"unPointLayer\") && mapObj.mapInstance.map.removeLayer(\"unPointLayer\");\r\n      mapObj.mapInstance.map.getLayer(\"unPointLayerBiaozhu\") && mapObj.mapInstance.map.removeLayer(\"unPointLayerBiaozhu\");\r\n      mapObj.mapInstance.map.getSource(\"yhPipeVectorSource\") && mapObj.mapInstance.map.removeSource(\"yhPipeVectorSource\");\r\n      console.log(taskId)\r\n      if (!ifMulti) {\r\n        let url = baseUrl.url_config + `/yhsw-grid/maintainTask/resultmvt/{x}/{y}/{z}?taskId=${taskId}`\r\n        mapObj.mapInstance.addSource(`yhPipeVectorSource`, {\r\n          type: \"vector\",\r\n          tiles: [url],\r\n          promoteId: 'id'\r\n        })\r\n        mapObj.mapInstance.map.addLayer({\r\n          id: \"unLineLayer0\",\r\n          type: \"line\",\r\n          source: \"yhPipeVectorSource\",\r\n          \"source-layer\": \"line\",\r\n          paint: {\r\n            \"line-color\": \"#ff0000\",\r\n            \"line-width\": 3\r\n          }\r\n        }, 'user')\r\n        mapObj.mapInstance.map.addLayer({\r\n          id: \"unPointLayer0\",\r\n          type: \"symbol\",\r\n          source: \"yhPipeVectorSource\",\r\n          \"source-layer\": \"point\",\r\n          \"layout\": {\r\n            \"icon-image\": \"rw1\",\r\n            \"icon-size\": 0.5,\r\n            'icon-allow-overlap': true\r\n\r\n          }\r\n        }, 'user')\r\n        that.multiTaskSAL.push('0')\r\n      } else {\r\n        // let urlArray = taskId.map((item)=>{\r\n        //   return baseUrl.url_config + `/yhsw-grid/maintainTask/resultmvt/{x}/{y}/{z}?taskId=${item}`\r\n        // })\r\n        // mapObj.mapInstance.addSource(`yhPipeVectorSource`, {\r\n        //   type: \"vector\",\r\n        //   tiles: urlArray,\r\n        //   promoteId: 'id'\r\n        // })\r\n        taskId.forEach((task, index) => {\r\n          let url = baseUrl.url_config + `/yhsw-grid/maintainTask/resultmvt/{x}/{y}/{z}?taskId=${task}`\r\n          mapObj.mapInstance.addSource(`yhPipeVectorSource` + String(index), {\r\n            type: \"vector\",\r\n            tiles: [url],\r\n            promoteId: 'id'\r\n          })\r\n          mapObj.mapInstance.map.addLayer({\r\n            id: \"unLineLayer\" + String(index),\r\n            type: \"line\",\r\n            source: \"yhPipeVectorSource\" + String(index),\r\n            \"source-layer\": \"line\",\r\n            paint: {\r\n              \"line-color\": \"#ff0000\",\r\n              \"line-width\": 3\r\n            }\r\n          }, 'user')\r\n          mapObj.mapInstance.map.addLayer({\r\n            id: \"unPointLayer\" + String(index),\r\n            type: \"symbol\",\r\n            source: \"yhPipeVectorSource\" + String(index),\r\n            \"source-layer\": \"point\",\r\n            \"layout\": {\r\n              \"icon-image\": \"rw\" + String(index % 8),\r\n              \"icon-size\": 0.5,\r\n              'icon-allow-overlap': true\r\n\r\n            }\r\n          }, 'user')\r\n          that.multiTaskSAL.push(String(index))\r\n        })\r\n      }\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"unLineLayer\",\r\n      //   type: \"line\",\r\n      //   source: \"yhPipeVectorSource\",\r\n      //   \"source-layer\": \"line\",\r\n      //   paint: {\r\n      //     \"line-color\": \"#ff0000\",\r\n      //     \"line-width\": 3\r\n      //   }\r\n      // }, 'cure')\r\n      // mapObj.mapInstance.addLayer({\r\n      //   id: \"unPointLayer\",\r\n      //   type: \"symbol\",\r\n      //   source: \"yhPipeVectorSource\",\r\n      //   \"source-layer\": \"point\",\r\n      //   \"layout\": {\r\n      //     \"icon-image\": \"wsj1\",\r\n      //     \"icon-size\": 0.5,\r\n      //     'icon-allow-overlap': true\r\n\r\n      //   }\r\n      // }, 'cure')\r\n      mapObj.mapInstance.map.addLayer({\r\n        id: \"unPointLayerBiaozhu\",\r\n        type: \"symbol\",\r\n        source: \"yuhang_ws_wsj\",\r\n        \"source-layer\": \"ws_wsj\",\r\n        \"minzoom\": 18,\r\n        \"layout\": {\r\n          \"text-field\": ['concat', [\"get\", \"floorelevation\"], '/', [\"get\", \"depth\"]],\r\n          \"text-offset\": [1, 1]\r\n        }\r\n      }, 'user')\r\n      if (callback) {\r\n        mapObj.mapInstance.map.off('click', this.callback)\r\n        this.callback = callback;\r\n        mapObj.mapInstance.map.on('click', callback)\r\n      }\r\n    },\r\n    setRangFilter(done, status) {\r\n      let that = this\r\n      mapObj.mapInstance.map.getLayer(\"yhPipeLinesLayer\") && mapObj.mapInstance.map.setLayoutProperty('yhPipeLinesLayer', 'visibility', status ? 'none' : 'visible')\r\n      mapObj.mapInstance.map.getLayer(\"yhPipePointsLayer\") && mapObj.mapInstance.map.setLayoutProperty('yhPipePointsLayer', 'visibility', status ? 'none' : 'visible')\r\n      mapObj.mapInstance.map.setFilter('unLineLayer', status ? ['==', ['index-of', [\"get\", \"device_id\"], ['literal', done]], -1] : null)\r\n      mapObj.mapInstance.map.setFilter('unPointLayer', status ? ['==', ['index-of', [\"get\", \"device_id\"], ['literal', done]], -1] : null)\r\n    },\r\n    rangClick(feature) {\r\n      let that = this;\r\n      console.log(feature)\r\n      mapObj.mapInstance.map.getLayer(\"rangeL\") && mapObj.mapInstance.map.removeLayer(\"rangeL\");\r\n      mapObj.mapInstance.map.getLayer(\"rangeM\") && mapObj.mapInstance.map.removeLayer(\"rangeM\");\r\n      mapObj.mapInstance.map.getSource(\"rangeS\") && mapObj.mapInstance.map.removeSource(\"rangeS\");\r\n      var features = feature[0];\r\n      mapObj.mapInstance.map.addSource('rangeS', {\r\n        'type': 'geojson',\r\n        'data': {\r\n          'type': 'FeatureCollection',\r\n          'features': [features]\r\n        }\r\n      });\r\n      if (features.geometry.type === 'LineString') {\r\n        mapObj.mapInstance.addLayer(\r\n          {\r\n            id: \"rangeL\",\r\n            type: \"line\",\r\n            source: \"rangeS\",\r\n            paint: {\r\n              \"line-color\": \"#FFFF00\",\r\n              \"line-width\": 7,\r\n            },\r\n          },\r\n          \"initInspLineLayer\"\r\n        );\r\n      } else {\r\n        mapObj.mapInstance.addLayer(\r\n          {\r\n            id: \"rangeM\",\r\n            type: \"symbol\",\r\n            source: \"rangeS\",\r\n            \"layout\": {\r\n              \"icon-image\": features.properties.yhType ? features.properties.yhType.indexOf('养护') > -1 ? \"wsj2\" : features.properties.yhType.indexOf('热点') > -1 ? this.getIconName('selected', features.properties) : features.properties.approveStatus == 2 ? \"thxz\" : \"rwxz\" : \"wsj2\",\r\n              \"icon-size\": features.properties.yhType ? features.properties.yhType.indexOf('养护') > -1 ? 0.7 : 0.5 : 0.7\r\n            },\r\n          },\r\n          \"yhPipePointsLayer\"\r\n        );\r\n      }\r\n      let coordinates = features.geometry.type === 'Point' ? features.geometry.coordinates : features.geometry.coordinates[0];\r\n      that.flyTo({ position: coordinates, zoom: 17 })\r\n    },\r\n    listLicik(val) {\r\n      let newData = val.new.item;\r\n      let features = [{\r\n        type: 'feature',\r\n        geometry: JSON.parse(newData.geom),\r\n        properties: newData,\r\n      }]\r\n      this.rangClick(features)\r\n    },\r\n\r\n    /**\r\n     * 提供坐标数组，返回中心点,限线和面\r\n     * @param {*} position 坐标数组\r\n     */\r\n    getCenter(position) {\r\n      let coord = [];\r\n      let center;\r\n      if (position instanceof Array && position.length !== 0) {\r\n        let pos1 = position[0];\r\n        if (pos1 instanceof Array) {\r\n          let pos2 = pos1[0];\r\n          if (pos2 instanceof Array) {\r\n            center = turf.center(turf.polygon(position));\r\n          } else {\r\n            center = turf.center(turf.lineString(position));\r\n          }\r\n        }\r\n      }\r\n      if (center) {\r\n        coord = center.geometry.coordinates;\r\n      }\r\n      return coord;\r\n    },\r\n\r\n    paintingRange({\r\n      position = [],\r\n      color = \"#ff4a4a\",\r\n      lineWidth = 3,\r\n      circleRadius = 3,\r\n      boldBorder,\r\n      borderWidth = 5,\r\n      isRepaint = true,\r\n      lineDasharray\r\n    }) {\r\n      let features = [];\r\n      if (position instanceof Array && position[0] instanceof Array) {\r\n        let pos1 = position[0];\r\n        if (pos1[0] instanceof Array) {\r\n          position.forEach(line => {\r\n            let feature;\r\n            if (this.getArrayGeo(line) == 2) {\r\n              feature = turf.lineString(line);\r\n              features.push(feature);\r\n            } else if (this.getArrayGeo(line) == 3) {\r\n              feature = turf.multiLineString(line);\r\n              features.push(feature);\r\n            } else if (this.getArrayGeo(line) == 4) {\r\n              feature = turf.polygonToLine(turf.multiPolygon(line));\r\n              feature.features.forEach(f => {\r\n                features.push(f)\r\n              })\r\n            }\r\n          })\r\n          if (boldBorder instanceof Array) {\r\n            features = features.concat(turf.lineString(boldBorder, { name: \"boldBorder\" }));\r\n            this.addRangeLayer2({ features, color, lineWidth, lineDasharray, borderWidth, isRepaint })\r\n          } else {\r\n            this.addRangeLayer2({ features, color, lineWidth, lineDasharray, isRepaint })\r\n          }\r\n        } else {\r\n          let feature = turf.lineString(position);\r\n          features.push(feature);\r\n          this.addRangeLayer2({ features, color, lineWidth, lineDasharray, isRepaint })\r\n        }\r\n      } else if (position instanceof Array && position.length !== 0) {\r\n        let feature = turf.point(position);\r\n        features.push(feature);\r\n        this.addRangeLayer2({ features, color, circleRadius, isRepaint })\r\n      } else {\r\n        this.addRangeLayer2({ features, color, isRepaint });\r\n      }\r\n    },\r\n    getArrayGeo(arr = []) {\r\n      let num = 0;\r\n      function bl(arr) {\r\n        if (arr instanceof Array) {\r\n          num++;\r\n          bl(arr[0]);\r\n        }\r\n      }\r\n      bl(arr);\r\n      return num;\r\n    },\r\n    addRangeLayer2({ features, color, lineWidth, lineDasharray, circleRadius, borderWidth, isRepaint }) {\r\n      // let that = this;\r\n      console.log('features :>> ', features);\r\n      let layerId = \"rangeLayer2\";\r\n      // function makeId(id = \"rangeLayer2\"){\r\n      //     if(that.map.getSource(id)){\r\n      //         makeId(id++)\r\n      //     }else{\r\n      //         layerId = id;\r\n      //     }\r\n      // }\r\n      // makeId();\r\n      if (isRepaint) {\r\n        this.removeRangeLayer();\r\n      }\r\n      mapObj.mapInstance.addSource(layerId, {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features,\r\n        }\r\n      });\r\n      if (circleRadius) {\r\n        mapObj.mapInstance.addLayer({\r\n          id: layerId,\r\n          source: layerId,\r\n          type: \"circle\",\r\n          paint: {\r\n            \"circle-radius\": circleRadius,\r\n            \"circle-color\": color\r\n          }\r\n        })\r\n      } else if (lineWidth) {\r\n        mapObj.mapInstance.addLayer({\r\n          id: layerId,\r\n          source: layerId,\r\n          type: \"line\",\r\n          paint: {\r\n            \"line-color\": color,\r\n            \"line-width\": [\r\n              'case',\r\n              ['==', ['get', 'name'], 'boldBorder'],\r\n              borderWidth || 0,\r\n              lineWidth\r\n            ],\r\n            \"line-dasharray\": lineDasharray || []\r\n          }\r\n        })\r\n      }\r\n    },\r\n    removeRangeLayer() {\r\n      if (mapObj.mapInstance.map.getLayer(\"rangeLayer2\")) mapObj.mapInstance.map.removeLayer(\"rangeLayer2\");\r\n      if (mapObj.mapInstance.map.getSource(\"rangeLayer2\")) mapObj.mapInstance.map.removeSource(\"rangeLayer2\");\r\n    },\r\n\r\n    /**\r\n     * 点，多点，线，多线，面，多面定位\r\n     * @param {*} position 定位坐标\r\n     * @param {*} reset 若不传坐标，是否定位到初始位置\r\n     */\r\n    makeLocation(position, reset = true) {\r\n      let type = '';\r\n      if (position instanceof Array && position.length !== 0) {\r\n        if (position[0] instanceof Array) {\r\n          let pos1 = position[0];\r\n          if (pos1[0] instanceof Array) {\r\n            let pos2 = pos1[0]\r\n            if (pos2[0] instanceof Array) {\r\n              var multipolygon = turf.multiPolygon(position);\r\n              var bbox = turf.bbox(multipolygon);\r\n              var bboxPolygon = turf.bboxPolygon(bbox);\r\n              type = 'multipolygon';\r\n            } else {\r\n              var polygon = turf.polygon(position);\r\n              var bbox = turf.bbox(polygon);\r\n              var bboxPolygon = turf.bboxPolygon(bbox);\r\n              type = 'polygon';\r\n            }\r\n          } else {\r\n            var line = turf.lineString(position);\r\n            var bbox = turf.bbox(line);\r\n            var bboxPolygon = turf.bboxPolygon(bbox);\r\n            type = 'line';\r\n          }\r\n          var v2 = new mapboxgl.LngLatBounds(bboxPolygon.geometry.coordinates[0][0], bboxPolygon.geometry.coordinates[0][2])\r\n          mapObj.mapInstance.map.fitBounds(v2, {\r\n            linear: false,\r\n            padding: { top: 60, bottom: 60, left: 60, right: 60 }\r\n          });\r\n        } else {\r\n          this.flyTo({ position: position, zoom: 14 });\r\n          type = 'point';\r\n        }\r\n      } else if (reset) {\r\n        mapObj.mapInstance.map.fitBounds([[120.38188484498045, 30.56868547578088], [119.51549097554295, 30.178356987720612]], {\r\n          linear: false\r\n        });\r\n        type = 'errPosition'\r\n      }\r\n      return type;\r\n    },\r\n\r\n    // 切换供水，雨水，污水瓦片\r\n    async changePipeTileLayer(inspBusinessType) {\r\n      mapObj.mapInstance.addSource('lightLayer', {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        }\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"lightPoint\",\r\n        type: \"symbol\",\r\n        source: \"lightLayer\",\r\n        filter: [\"==\", \"$type\", \"Point\"],\r\n        layout: {\r\n          'icon-size': 1.4,\r\n          'icon-image': [...this.GSL.slice(0, this.GSL.length - 1), ...this.WSL.slice(1, this.WSL.length - 1), ...this.YSL.slice(1)],\r\n          'icon-ignore-placement': true,\r\n          'icon-allow-overlap': true\r\n        }\r\n      }, \"lightLayer\")\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"lightLine\",\r\n        type: \"line\",\r\n        source: \"lightLayer\",\r\n        filter: [\"==\", \"$type\", \"LineString\"],\r\n        paint: {\r\n          'line-width': 3,\r\n          'line-color': \"red\",\r\n        }\r\n      }, \"lightLayer\");\r\n      this.addBufferLayer();\r\n      this.addRangeLayer();\r\n      this.addInspUserLayer();\r\n      this.addKeyPointLayer();\r\n      this.isOnLoad = true;\r\n    },\r\n    // 通过业务类型改变图层显示\r\n    changePipeTileLayerByBusiness(type) {\r\n      switch (type) {\r\n        case \"WATER_SUPPLY\":\r\n          this.gsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'visible');\r\n          })\r\n          this.ysLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.ysLayers[index], 'visibility', 'none');\r\n          })\r\n          this.wsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.wsLayers[index], 'visibility', 'none');\r\n          })\r\n          break;\r\n        case \"RAI_WATER\":\r\n          this.ysLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.ysLayers[index], 'visibility', 'visible');\r\n          })\r\n          this.gsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'none');\r\n          })\r\n          this.wsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.wsLayers[index], 'visibility', 'none');\r\n          })\r\n          break;\r\n        case \"POLLUTED_WATER\":\r\n          this.wsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.wsLayers[index], 'visibility', 'visible');\r\n          })\r\n          this.ysLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.ysLayers[index], 'visibility', 'none');\r\n          })\r\n          this.gsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'none');\r\n          })\r\n          break;\r\n        default:\r\n          this.wsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.wsLayers[index], 'visibility', 'none');\r\n          })\r\n          this.ysLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.ysLayers[index], 'visibility', 'none');\r\n          })\r\n          this.gsLayers.forEach((item, index) => {\r\n            mapObj.mapInstance.map.setLayoutProperty(this.gsLayers[index], 'visibility', 'none');\r\n          })\r\n          break;\r\n      }\r\n      try {\r\n        const that = this;\r\n        var timer = setInterval(function () {\r\n          if (that.isOnLoaded()) {\r\n            clearInterval(timer);\r\n            mapObj.mapInstance.changeBZLayer(type);\r\n          }\r\n        }, 100)\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    // 通过业务类型改变图层显示 三网合一\r\n    changeLayerByBusiness({ gs = 'none', ys = 'none', ws = 'none' }) {\r\n      if (!mapObj.mapInstance) return\r\n      let gsLayerType = LayerType['供水'][0].concat(LayerType['供水'][1])\r\n      let wsLayerType = LayerType['污水'][0].concat(LayerType['污水'][1])\r\n      let ysLayerType = LayerType['雨水'][0].concat(LayerType['雨水'][1])\r\n      gsLayerType.forEach((item, index) => {\r\n        mapObj.mapInstance.map.setLayoutProperty(item.id, 'visibility', gs);\r\n      })\r\n      ysLayerType.forEach((item, index) => {\r\n        mapObj.mapInstance.map.setLayoutProperty(item.id, 'visibility', ys);\r\n      })\r\n      wsLayerType.forEach((item, index) => {\r\n        mapObj.mapInstance.map.setLayoutProperty(item.id, 'visibility', ws);\r\n      })\r\n      this.isOnLoad = true;\r\n    },\r\n    // 添加巡检人员\r\n    addInspUserLayer() {\r\n      mapObj.mapInstance.addSource(\"inspUser\", {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: []\r\n        },\r\n        generateId: true\r\n      });\r\n      mapObj.mapInstance.addLayer({\r\n        id: \"inspUserLayer\",\r\n        type: \"symbol\",\r\n        source: \"inspUser\",\r\n        layout: {\r\n          \"icon-image\": \"userInsp\",\r\n          \"icon-size\": 0.2,\r\n          \"icon-allow-overlap\": true,//自动避让属性\r\n          \"icon-ignore-placement\": true,\r\n        }\r\n      }, \"unInspLineLayer\");\r\n    },\r\n    getDirection() {\r\n      window.addEventListener('deviceorientationabsolute', this.setRotate)\r\n    },\r\n\r\n    // 设置巡检人员位置\r\n    setInspUserPosition(position) {\r\n      // xCode，yCode为经纬度\r\n      const coord = [parseFloat(position.longitude), parseFloat(position.latitude)];\r\n      const point = turf.point(coord);\r\n      try {\r\n        const that = this;\r\n        // 定时器\r\n        var timer = setInterval(function () {\r\n          // 如果地图实例创建、巡检人员图层存在且加载完毕\r\n          if (that.isOnLoaded()\r\n            && mapObj.map.getSource(\"inspUser\")\r\n            && mapObj.map.isSourceLoaded(\"inspUser\")\r\n          ) {\r\n            // 清除定时器\r\n            clearInterval(timer);\r\n            // 巡检人员图标\r\n            mapObj.mapInstance.setSourceData(\"inspUser\", {\r\n              type: \"FeatureCollection\",\r\n              features: [point]\r\n            })\r\n            that.getDirection()\r\n            // 如果开始巡检，地图以人员为中心\r\n            let changeLine = localStorage.getItem(\"startRecordLines\");\r\n            // 如果上报事件，取消地图设置中心操作\r\n            let isReportEvent = localStorage.getItem(\"isReportEvent\");\r\n            // if (changeLine && !isReportEvent) {\r\n            //   mapObj.map.setCenter(coord);\r\n            // }\r\n          }\r\n        }, 100)\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    setRotate(e) {\r\n      let bearing = (e.alpha - 180) >= 0 ? (180 - e.alpha) : (180 - e.alpha)\r\n      // 调整罗盘方向\r\n      mapObj.map && mapObj.map.setLayoutProperty(\"inspUserLayer\", \"icon-rotate\", bearing);\r\n    },\r\n    // 设置巡检管线为已巡检\r\n    changeInspLineState(geometry) {\r\n      let that = this\r\n      // 将地理坐标系转化为屏幕坐标系\r\n      function geoTransToPixel(geom) {\r\n        const polygonBox = turf.bbox(geom);\r\n        const southWest = [polygonBox[0], polygonBox[1]];\r\n        const northEast = [polygonBox[2], polygonBox[3]];\r\n        let southWestPointPixel = mapObj.map.project(southWest);\r\n        let northEastPointPixel = mapObj.map.project(northEast);\r\n        // 增大bbox的查询范围\r\n        southWestPointPixel = [\r\n          southWestPointPixel.x - 50,\r\n          southWestPointPixel.y + 50\r\n        ]\r\n        northEastPointPixel = [\r\n          northEastPointPixel.x + 50,\r\n          northEastPointPixel.y - 50\r\n        ]\r\n        return [southWestPointPixel, northEastPointPixel];\r\n      }\r\n      // 对每个划分出来的bbox进行处理\r\n      function chunk(geom) {\r\n        let wasLoaded = false;\r\n        mapObj.mapInstance.map.on('sourcedata', function () {\r\n          if (wasLoaded) return;\r\n          const boxFeatures = mapObj.map.queryRenderedFeatures(geoTransToPixel(geom), {\r\n            layers: [\"initInspLineLayer\"]\r\n          });\r\n          console.log(boxFeatures, 'boxFeatures')\r\n          let tempPipeList = []\r\n          boxFeatures.forEach(feat => {\r\n            try {\r\n              // const result = turf.intersect(feat.geometry, geometry);\r\n              const result = turf.booleanDisjoint(feat.geometry, geometry)\r\n              // 如果查出的要素与真实的范围相交且没有被巡检过，则改变其状态,并记录其关键字\r\n              if (!result && !feat.state.isInsp) {\r\n                mapObj.map.setFeatureState({\r\n                  source: feat.source,\r\n                  id: feat.id\r\n                }, { isInsp: true })\r\n                let date = that.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n                for (let it of tempPipeList) {\r\n                  if (it.pipeId != feat.id) {\r\n                    tempPipeList.push({\r\n                      inspDate: date,\r\n                      pipeId: feat.id,\r\n                      pipeLength: feat.properties['length'] || 0,\r\n                      taskId: that.$route.query.taskId\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            } catch (error) {\r\n              console.log(error)\r\n            }\r\n          })\r\n          tempPipeList.length > 0 && recordInspLine(tempPipeList).then(res => {\r\n            if (res.status) {\r\n              console.log('管线上传成功')\r\n            } else {\r\n              console.log('上传失败的tempPipeList: ', tempPipeList);\r\n              this.uploadFiledPipeIdList.push(...tempPipeList)\r\n            }\r\n          })\r\n          wasLoaded = true;\r\n        })\r\n      }\r\n      function cb(features) {\r\n        if (features.length > 0 && that.isOnLoaded()) {\r\n          setTimeout(() => {\r\n            chunk(features.shift());\r\n            cb(features);\r\n          }, 1000);\r\n        }\r\n      }\r\n      cb([geometry]);\r\n    },\r\n    findHadInspFeature() {\r\n      const that = this;\r\n      return new Promise(function (resolve, reject) {\r\n        try {\r\n          if (recordFeatures.length <= 0) {\r\n            resolve([]);\r\n          }\r\n          let data = [...new Set(recordFeatures)];\r\n          let filterData = [\"in\", \"guid\"];\r\n          data.forEach((item, index) => {\r\n            filterData.push(data[index]);\r\n          })\r\n          var timer = setInterval(function () {\r\n            if (that.isOnLoaded() && mapObj.mapInstance.map.getSource(\"rangePipeVector\")) {\r\n              clearInterval(timer);\r\n              mapObj.mapInstance.map.once(\"data\", function () {\r\n                const boxFeatures = mapObj.mapInstance.map.querySourceFeatures(\"rangePipeVector\", {\r\n                  sourceLayer: \"line\",\r\n                  filter: filterData\r\n                })\r\n                boxFeatures.forEach(feat => {\r\n                  mapObj.mapInstance.map.setFeatureState({\r\n                    source: \"rangePipeVector\",\r\n                    sourceLayer: \"line\",\r\n                    id: feat.id\r\n                  }, {\r\n                    insp: true\r\n                  })\r\n                })\r\n                resolve(boxFeatures);\r\n              })\r\n            }\r\n          }, 500)\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      })\r\n    },\r\n    // 根据速度改变巡检管线颜色\r\n    async changeInspLineSourceBySpeed(position) {\r\n      const coord = [parseFloat(position.longitude), parseFloat(position.latitude)];\r\n      // const coord = [115.9466387418314, 39.06638916509243] // 测试\r\n      const point = turf.point(coord);\r\n      try {\r\n        const that = this;\r\n        var timer = setInterval(function () {\r\n          if (that.isOnLoaded() && mapObj.mapInstance.map.getSource(\"inspUser\") && mapObj.mapInstance.map.isSourceLoaded(\"inspUser\")) {\r\n            clearInterval(timer);\r\n            let changeLine = localStorage.getItem(\"startRecordLines\");\r\n            if (changeLine == 'start') {\r\n              // 改变周围要素的状态\r\n              let buffered = turf.buffer(point, 0.035, { unit: 'kilometers' });\r\n              that.changeInspLineState(buffered);\r\n            }\r\n          }\r\n        }, 100)\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    },\r\n    // 新增上报事件marker\r\n    addReportEventMarker(position, callback) {\r\n      const that = this;\r\n      const src = require(`@/assets/img/legend/eventPoint.png`);\r\n      // 如果存在id为eventPointMarker的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n      let currentEle = document.getElementById(\"eventPointMarker\");\r\n      if (currentEle) {\r\n        currentEle.parentNode.removeChild(currentEle);\r\n      }\r\n      let ele = document.createElement(\"div\");\r\n      ele.innerHTML = `\r\n          <img id=\"eventPointMarker\" src=\"${src}\" width=\"40\" height=\"40\">\r\n        `\r\n\r\n      let marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n        offset: [0, 0],\r\n        // draggable: true\r\n      });\r\n\r\n      marker\r\n        .setLngLat(position)\r\n        .addTo(mapObj.mapInstance.map);\r\n\r\n      // function onDragEnd() {\r\n      //   let lngLat = marker.getLngLat();\r\n      //   console.log(\"onDragEnd==>\", lngLat);\r\n      //   const pos = [lngLat.lng, lngLat.lat];\r\n      //   bus.$emit(\"eventMarkerPosition\", pos);\r\n      // }\r\n      // marker.on('dragend', onDragEnd);\r\n      // 更换选位置的交互逻辑\r\n      function onTouchEnd() {\r\n        let lngLat = mapObj.mapInstance.map.getCenter();\r\n        const pos = [lngLat.lng, lngLat.lat];\r\n        bus.$emit(\"eventMarkerPosition\", pos);\r\n      }\r\n      mapObj.mapInstance.map.on('touchend', onTouchEnd);\r\n      function onTouchMove() {\r\n        let lngLat = mapObj.mapInstance.map.getCenter();\r\n        const pos = [lngLat.lng, lngLat.lat];\r\n        marker.setLngLat(pos);\r\n      }\r\n      mapObj.mapInstance.map.on('touchmove', onTouchMove);\r\n      function onMoveEnd() {\r\n        let lngLat = mapObj.mapInstance.map.getCenter();\r\n        const pos = [lngLat.lng, lngLat.lat];\r\n        marker.setLngLat(pos);\r\n      }\r\n      mapObj.mapInstance.map.on('moveend', onMoveEnd);\r\n      if (callback) {\r\n        mapObj.mapInstance.map.off('click', this.callback)\r\n        this.callback = callback;\r\n        mapObj.mapInstance.map.on('click', callback)\r\n      }\r\n    },\r\n\r\n    addAllViewsLayers(type = '供水') {\r\n      const layer = layers[type];\r\n      mapObj.mapInstance.map.on('click', this.layerClick1);\r\n      (layer || []).forEach(item => {\r\n        if (!mapObj.map.getLayer(item.layer.id)) {\r\n          mapObj.map.addLayer(item.layer);\r\n          if (item.markId && !mapObj.map.getLayer(item.markId.id))\r\n            mapObj.map.addLayer(item.markId);\r\n        }\r\n      })\r\n    },\r\n    removeAllViewsLayers(type = '供水') {\r\n      const layer = layers[type];\r\n      mapObj.mapInstance.map.off('click', this.layerClick1);\r\n      (layer || []).forEach(item => {\r\n        if (mapObj.map.getLayer(item.layer.id)) {\r\n          mapObj.map.removeLayer(item.layer.id);\r\n          if (item.markId && mapObj.map.getLayer(item.markId.id))\r\n            thismap.removeLayer(item.markId.id);\r\n        }\r\n      })\r\n    },\r\n    setAllViewsLayersVisible(type = '供水', visible = 'visible') {\r\n      const layer = layers[type];\r\n      (layer || []).forEach(item => {\r\n        if (mapObj.map.getLayer(item.layer.id)) {\r\n          mapObj.map.setLayoutProperty(item.layer.id, 'visibility', visible);\r\n          if (item.markId && mapObj.map.getLayer(item.markId.id))\r\n            mapObj.map.setLayoutProperty(item.markId.id, 'visibility', visible);\r\n        }\r\n      })\r\n    }\r\n  },\r\n}"],"mappings":"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"}]}