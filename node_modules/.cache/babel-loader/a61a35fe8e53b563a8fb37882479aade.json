{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\PipeNetLeakDetection\\LeakDetectionMapPage.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\PipeNetLeakDetection\\LeakDetectionMapPage.vue","mtime":1708928163406},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\babel.config.js","mtime":1705912799600},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0ICogYXMgQXBpIGZyb20gJy4vYXBpJzsKaW1wb3J0IGJ1cyBmcm9tICdAL3V0aWxzL2J1cyc7CmltcG9ydCB7IEVOVU0gfSBmcm9tICdAL3N0b3JlL1N0YXRlL3N0YXRlVHlwZXMnOwppbXBvcnQgKiBhcyB0dXJmIGZyb20gJ0B0dXJmL3R1cmYnOwppbXBvcnQgeyBiYm94LCBjZW50ZXIgYXMgZ2V0Q2VudGVyIH0gZnJvbSAnQHR1cmYvdHVyZic7CmltcG9ydCBfY2xvbmVEZWVwIGZyb20gJ2xvZGFzaC9jbG9uZURlZXAnOwppbXBvcnQgeyBhZGRJY29uVG9NYXAgfSBmcm9tICdAL3V0aWxzL21hcFV0aWxzJzsKaW1wb3J0IG1hcGJveGdsIGZyb20gJ21hcGJveC1nbCc7CmltcG9ydCB7IFRvYXN0LCBEaWFsb2csIE5vdGlmeSB9IGZyb20gJ2Zhd2tlcy1tb2JpbGUtbGliJzsKaW1wb3J0IE1hcENvbXAgZnJvbSAnQC92aWV3cy9pbnNwZWN0TWFwL2luZGV4LnZ1ZSc7CmltcG9ydCBtaXhpbnMgZnJvbSAnQC92aWV3cy9pbnNwZWN0TWFwL21peGlucy9taXhpbnMuanMnOwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnOwppbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgTGVha1JlcG9ydENhcmRJbmZvIGZyb20gJy4vTGVha1JlcG9ydENhcmRJbmZvJzsKaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAudnVlJzsKY29uc3QgUG9wdXBJdGVtID0gVnVlLmV4dGVuZChQb3B1cCk7CmNvbnN0IG1hcE9iaiA9IHsKICBtYXA6IG51bGwsCiAgbWFwSW5zdGFuY2U6IG51bGwKfTsKbGV0IHBhdXNlU3RhdGVUcmFja1BvaW50cyA9IFtdOwpsZXQgcGF1c2VTdGF0ZVBpcGVJZExpc3QgPSBbXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICcnLAogIG1peGluczogW21peGluc10sCiAgY29tcG9uZW50czogewogICAgTWFwQ29tcCwKICAgIExlYWtSZXBvcnRDYXJkSW5mbwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzUmVzdW1lOiB0cnVlLAogICAgICAvLyDmt7vliqDoh7PlnLDlm77nmoTlm77niYcKICAgICAgaWNvbnM6IFt7CiAgICAgICAgbmFtZTogJ+azhOa8j+eCuScsCiAgICAgICAgdXJsOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL+azhOa8j+eCuS5wbmcnKQogICAgICB9XSwKICAgICAgLy8g5b2T5YmN54K55Ye755qE5Lu75YqhCiAgICAgIHRhc2tEZXRhaWw6IHt9LAogICAgICAvLyDlt6Hmo4DlkZjkv6Hmga8KICAgICAgdXNlckluZm86IHt9LAogICAgICAvLyDlt6Hmo4Dku7vliqHkuIvmiYDmnInlt6Hmo4DnrqHnur8KICAgICAgYWxsVGFza0xpbmVzOiBbXSwKICAgICAgLy8g5b2T5YmN5beh5qOA5ZGY5omA5aSE5L2N572uCiAgICAgIGN1cnJlbnRQb3NpdGlvbjogbnVsbCwKICAgICAgLy8g5piv5ZCm5byA5aeL6K6w5b2VCiAgICAgIGlmUmVjb3JkaW5nOiBmYWxzZSwKICAgICAgLy8g6L2u6K+i54q25oCBCiAgICAgIHBvbGxpbmdGbGFnOiBmYWxzZSwKICAgICAgLy8g5piv5ZCm5Li65p+l55yL54q25oCBCiAgICAgIGlzVmlldzogZmFsc2UsCiAgICAgIC8vIOaYr+WQpuS4uuW3oeajgOWRmOeZu+mZhu+8jHRydWXkuLrlt6Hmo4DlkZjnmbvlvZUKICAgICAgaXNJbnNwZWN0b3JMb2FkOiB0cnVlLAogICAgICBpc09uTG9hZDogZmFsc2UsCiAgICAgIC8vIOi9qOi/ueeCuQogICAgICB0cmFja1BvaW50TGlzdDogW10sCiAgICAgIC8vIOi9qOi/ueaXtumXtAogICAgICB0cmFja1BvaW50VGltZUxpc3Q6IFtdLAogICAgICAvLyDotoXpgJ/nur/mrrUKICAgICAgb3ZlclNwZWVkVHJhY2tMaW5lTGlzdDogW10sCiAgICAgIC8vIOiusOW9leW8gOWni+W3oeajgOeahOaXtumXtO+8jOeUqOS6juWIpOaWreaYr+WQpuWcqOW8gOWni+W3oeajgOeahDEwc+WGhQogICAgICBzdGFydFJlY29yZFRpbWVyOiAnJywKICAgICAgLy8g5LiK5oql5aSx6LSl55qE5beh5qOA6L2o6L+554K55L2N5pWw57uECiAgICAgIHJlcG9ydEZhaWxUcmFja1BvaW50czogW10sCiAgICAgIC8vIOWPs+S4iuinkuWKoOWPt+W8ueahhgogICAgICBzaG93UG9wb3ZlcjogZmFsc2UsCiAgICAgIGlmVGlwczogZmFsc2UsCiAgICAgIGFjdGlvbnM6IFt7CiAgICAgICAgdGV4dDogJ+S4iuaKpea8j+eCuScKICAgICAgfV0sCiAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLiRzdG9yYWdlLmdldCgnYWNjZXNzX3Rva2VuJyksCiAgICAgIGZvcm1Ub2tlbjogJycsCiAgICAgIGhlYWRlcjoge30sCiAgICAgIC8vIOeUqOS6juWIpOaWreaYr+WQpuWKoOi9veWujOS4iuaKpea8j+eCueaVsOaNrgogICAgICByZXBvcnREYXRhSXNMb2FkZWQ6IGZhbHNlLAogICAgICAvLyDlrZjlgqjmvI/ngrnlt6XljZUKICAgICAgcHJvYmxlbURhdGFMaXN0OiBbXSwKICAgICAgLy8g5LiK5oql5piv5ZCm5pi+56S6CiAgICAgIHJlcG9ydFNob3c6IGZhbHNlLAogICAgICBhY3RpdmU6IDAsCiAgICAgIGlmRW5kVGFzazogZmFsc2UsCiAgICAgIC8vIOe7k+adn+WOn+WboAogICAgICBzdG9wUmVhc29uOiAnJywKICAgICAgaWZMZWF2ZVRhc2s6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCflrZjlgqjlnKjmnKzlnLDnmoTmo4DmvI/ku7vliqEnLCBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsZWFrRGV0ZWN0aW9uRGF0YScpKSk7CgogICAgLy8g5b2T5YmN54K55Ye755qE5Lu75Yqh77yM5LuO5pys5Zyw5Lit6I635Y+WCiAgICB0aGlzLnRhc2tEZXRhaWwgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsZWFrRGV0ZWN0aW9uRGF0YScpKS5ub3dDbGlja1Rhc2s7CiAgICAvLyDmmK/lkKbmmK/mn6XnnIvnirbmgIEKICAgIHRoaXMuaXNWaWV3ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGVha0RldGVjdGlvbkRhdGEnKSkuaXNWaWV3OwogICAgdGhpcy51c2VySW5mbyA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvOwogICAgY29uc29sZS5sb2coJ3RoaXMudXNlckluZm8nLCB0aGlzLnVzZXJJbmZvKTsKICAgIGNvbnNvbGUubG9nKCflvZPliY3ngrnlh7vnmoTku7vliqEnLCB0aGlzLnRhc2tEZXRhaWwpOwogICAgY29uc29sZS5sb2codGhpcy51c2VySW5mby51c2VyTmFtZSwgdGhpcy50YXNrRGV0YWlsLmluc3BlY3RvciwgJy0tLS0tLeW3oeajgOS6uuWRmOS4juW9k+WJjeeZu+mZhui0puWPty0tLS0tLScsIHRoaXMudXNlckluZm8udXNlckZ1bGxuYW1lLCB0aGlzLnRhc2tEZXRhaWwuaW5zcGVjdG9yRnVsbE5hbWUpOwoKICAgIC8vIOW9k+W3oeajgOS6uuWRmOS4juW9k+WJjeeZu+mZhui0puWPt+S4gOiHtOaXtuaJjeiDveajgOa8jwogICAgaWYgKHRoaXMudXNlckluZm8udXNlck5hbWUgIT0gdGhpcy50YXNrRGV0YWlsLmluc3BlY3RvciAmJiB0aGlzLnVzZXJJbmZvLnVzZXJGdWxsbmFtZSAhPSB0aGlzLnRhc2tEZXRhaWwuaW5zcGVjdG9yRnVsbE5hbWUpIHsKICAgICAgY29uc29sZS5sb2coJ+S6uuWRmOS4jeS4gOiHtCcpOwogICAgICAvLyDmmK/lkKbkuLrlt6Hmo4DlkZjnmbvpmYbvvIx0cnVl5Li65beh5qOA5ZGY55m75b2VCiAgICAgIC8vIHRoaXMuaXNJbnNwZWN0b3JMb2FkID0gZmFsc2UKICAgIH0KICAgIC8vIGluc3BlY3RvcjogImNoZW5fYm9saW4iCiAgICAvLyBpbnNwZWN0b3JGdWxsTmFtZTogIumZiOWNmuaelyIKCiAgICAvLyB1c2VyRnVsbG5hbWU6ICLlrovlh6/pvpkiCiAgICAvLyB1c2VyTmFtZTogInNvbmdfa2wiCiAgfSwKICBtb3VudGVkKCkgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCB0aGlzLnBhdXNlLCBmYWxzZSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZXN1bWUnLCB0aGlzLnJlc3VtZSwgZmFsc2UpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0YXJ0UmVjb3JkTGluZXMnLCAnZW5kJyk7CiAgICAvLyBjb25zdCBpZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xlYWtEZXRlY3Rpb25EYXRhJykpLnRhc2tJZAogICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nLCBpZCkKICAgIC8vIHRoaXMuZ2V0VGFza0J5SWQoaWQpCiAgICAvLyB0aGlzLmdldFRyYWNrUmVjb3Jkc0J5SWQoaWQpCiAgICAvLyB0aGlzLmdldEFwcEluc3BEYXRhKGlkKQogICAgLy8gIShmdW5jdGlvbiBjb21wdXRlZFBvc2l0aW9uKCkgewogICAgLy8gICBsZXQgZ2FwVGltZXIgPSAxMAogICAgLy8gICBpZiAodGhhdC5jdXJyZW50UG9zaXRpb24pIHsKICAgIC8vICAgICAvLyDorqHnrpflvZPliY3ml7bpl7TkuI7lvZPliY3mj5Lku7bov5Tlm57nmoTml7bpl7TnmoTpl7TpmpQKICAgIC8vICAgICBsZXQgZ2FwID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbmV3IERhdGUodGhhdC5jdXJyZW50UG9zaXRpb24ubG9jVGltZSkuZ2V0VGltZSgpKSAvIDEwMDAKICAgIC8vICAgICAvLyDlpoLmnpzpl7TpmpTml7bpl7TlpKfkuo7mn5DkuIDlgLzvvIzliJnor7TmmI7lnKhnYXBUaW1lcuaXtumXtOWGheayoeacieaUtuWIsOadpeiHquaPkuS7tueahOaWsOeCueS9jQogICAgLy8gICAgIGlmIChnYXAgPiBnYXBUaW1lcikgewogICAgLy8gICAgICAgLy8g5byA5ZCv5o+Q56S6CiAgICAvLyAgICAgICAvLyBOb3RpZnkud2FybmluZyh7IG1lc3NhZ2U6ICflvZPliY1HUFPkv6Hlj7fovoPlvLEs5L2N572u5ZKM6L2o6L+55pu05paw5Y+v6IO957yT5oWiJywgZHVyYXRpb246IDUwMDAgfSkKICAgIC8vICAgICAgIGxldCB0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAvLyAgICAgICAgIC8vIOaPkOekuue7k+adn++8jOW5tuW8gOWni+S4i+asoeiwg+eUqAogICAgLy8gICAgICAgICBjb21wdXRlZFBvc2l0aW9uKCkKICAgIC8vICAgICAgIH0sIDE1MDAwKQogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAvLyDlvIDlp4vkuIvmrKHosIPnlKgKICAgIC8vICAgICAgIGxldCB0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAvLyAgICAgICAgIGNvbXB1dGVkUG9zaXRpb24oKQogICAgLy8gICAgICAgfSwgMTAwMDApCiAgICAvLyAgICAgfQogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIC8vIE5vdGlmeS53YXJuaW5nKHsgbWVzc2FnZTogJ+W9k+WJjUdQU+aXoOS/oScsIGR1cmF0aW9uOiA1MDAwIH0pCiAgICAvLyAgICAgbGV0IHQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgIC8vICAgICAgIGNvbXB1dGVkUG9zaXRpb24oKQogICAgLy8gICAgIH0sIDEwMDAwKQogICAgLy8gICB9CiAgICAvLyB9KSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmt7Hmi7fotJ0KICAgIGRlZXBDbG9uZShkYXRhKSB7CiAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgIH0sCiAgICBwYXVzZSgpIHsKICAgICAgY29uc29sZS5sb2coJ+i/m+WFpeWQjuWPsCcpOwogICAgICBpZiAodGhpcy5pZlJlY29yZGluZyAmJiB0aGlzLmlzUmVzdW1lKSB7CiAgICAgICAgdGhpcy5pc1Jlc3VtZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgcmVzdW1lKCkgewogICAgICBjb25zb2xlLmxvZygn6L+b5YWl5YmN5Y+wJyk7CiAgICAgIGlmICh0aGlzLmlmUmVjb3JkaW5nKSB7CiAgICAgICAgdGhpcy5pc1Jlc3VtZSA9IHRydWU7CiAgICAgICAgcGF1c2VTdGF0ZVRyYWNrUG9pbnRzLmxlbmd0aCA+IDAgJiYgdGhpcy51cExvYWRQYXVzZVN0YXRlVHJhY2tQb2ludHModGhpcy5kZWVwQ2xvbmUocGF1c2VTdGF0ZVRyYWNrUG9pbnRzKSk7CiAgICAgICAgcGF1c2VTdGF0ZVBpcGVJZExpc3QubGVuZ3RoID4gMCAmJiB0aGlzLnVwTG9hZFBhdXNlU3RhdGVQaXBlSWRMaXN0KHRoaXMuZGVlcENsb25lKHBhdXNlU3RhdGVQaXBlSWRMaXN0KSk7CiAgICAgIH0KICAgIH0sCiAgICB1cExvYWRQYXVzZVN0YXRlVHJhY2tQb2ludHMoZGF0YSkgewogICAgICAvLyBhcHDmt7vliqDkuIrkvKDlpLHotKXngrnnmoTnrqHnvZHmo4DmvI/ovajov7kKICAgICAgQXBpLmluc3BlY3Rpb25UcmFjayhkYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcyAmJiByZXMuc3RhdHVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5ZCO5Y+w5beh5qOA6L2o6L+56KGl5YWF54K55L2N5LiK5Lyg5oiQ5YqfJyk7CiAgICAgICAgICBwYXVzZVN0YXRlVHJhY2tQb2ludHMuc3BsaWNlKDAsIGRhdGEubGVuZ3RoKTsgLy8g56e76Zmk5LiK5Lyg5oiQ5Yqf55qE54K55L2N44CC6YG/5YWN6YeN5aSN5LiK5LygCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCflkI7lj7Dlt6Hmo4Dovajov7nooaXlhYXngrnkvY3kuIrkvKDlvILluLgnKTsKICAgICAgICAgIHRoaXMucmVwb3J0RmFpbFRyYWNrUG9pbnRzLnB1c2goLi4uZGF0YSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy51cExvYWRQYXVzZVN0YXRlVHJhY2tQb2ludHMoZGF0YSk7CiAgICAgICAgfSwgNSAqIDEwMDApOwogICAgICB9KTsKICAgIH0sCiAgICB1cExvYWRQYXVzZVN0YXRlUGlwZUlkTGlzdChkYXRhKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgLy8gYXBw5re75Yqg566h572R5qOA5ryP6K6w5b2VCiAgICAgIEFwaS5yZWNvcmRJbnNwTGluZShkYXRhKS50aGVuKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCflkI7lj7Dlt6Hmo4DnrqHnur/ooaXlhYXmlbDmja7kuIrkvKDmiJDlip8nKTsKICAgICAgICAgIHBhdXNlU3RhdGVQaXBlSWRMaXN0LnNwbGljZSgwLCBkYXRhLmxlbmd0aCk7IC8vIOenu+mZpOS4iuS8oOaIkOWKn+eahOaVsOaNruOAgumBv+WFjemHjeWkjeS4iuS8oAogICAgICAgICAgLy8g5qC55o2uSUTmn6Xor6LlvZPliY3mo4DmvI/ku7vliqEKICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IEFwaS5nZXRJbnNwTGVha1Rhc2tEZXRhaWwoewogICAgICAgICAgICBpZDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGVha0RldGVjdGlvbkRhdGEnKSkudGFza0lkCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmoLnmja5JROafpeivouW9k+WJjeajgOa8j+S7u+WKoScsIHJlcyk7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgICB0aGF0LnRhc2tEZXRhaWwgPSByZXMuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhhdC4kcmVmcy5teW1hcC51cGxvYWRGaWxlZFBpcGVJZExpc3QucHVzaCguLi5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnVwTG9hZFBhdXNlU3RhdGVQaXBlSWRMaXN0KGRhdGEpOwogICAgICAgIH0sIDUgKiAxMDAwKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Ymp5L2Z5pe26Ze0CiAgICBnZXRSZXN0VGltZSh0aW1lKSB7CiAgICAgIHJldHVybiB0aW1lID8gbmV3IERhdGUodGltZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoKS5nZXRUaW1lKCkgOiAwOwogICAgfSwKICAgIC8vIOimhueblueOh+iuoeeulwogICAgY2hhbmdlVG9SYXRlKGNvdmVyYWdlKSB7CiAgICAgIGlmIChjb3ZlcmFnZSAhPSBudWxsICYmIHR5cGVvZiAoY292ZXJhZ2UgKiAxKSA9PSAnbnVtYmVyJykgewogICAgICAgIHJldHVybiBjb3ZlcmFnZSArICclJzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJzAlJzsKICAgICAgfQogICAgfSwKICAgIC8vIOWcsOWbvuWIneWni+WMlgogICAgYXN5bmMgbWFwTG9hZGVkKG1hcEluc3RhbmNlKSB7CiAgICAgIG1hcE9iai5tYXBJbnN0YW5jZSA9IG1hcEluc3RhbmNlOwogICAgICBtYXBPYmoubWFwID0gbWFwSW5zdGFuY2UubWFwOwogICAgICAvLyDmt7vliqDotbfngrnnu4jngrnlm77niYcKICAgICAgdGhpcy5hZGRNYXBJbWcoKTsKICAgICAgYXdhaXQgYWRkSWNvblRvTWFwKG1hcE9iai5tYXAsIHRoaXMuaWNvbnMpOwogICAgICAvLyDmt7vliqDku7vliqHojIPlm7TjgIHnrqHnur/lm77lsYJzb3VyY2XjgIFsYXllcgogICAgICB0aGlzLmFkZFNvdXJjZUxheWVyKCk7CgogICAgICAvL+S/ruaUueS+m+awtOWOguWbvuaghwogICAgICBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KCdtYXBfd2F0ZXJ3b3JrJywgJ2ljb24taW1hZ2UnLCAn5L6b5rC05Y6CJyk7CiAgICAgIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ21hcF93YXRlcndvcmsnLCAnaWNvbi1zaXplJywgMC42KTsKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnbWFwX3N1cHBseV9wdW1wJywgJ2ljb24taW1hZ2UnLCAn57uZ5rC05Yqg5Y6L5rO156uZJyk7CiAgICAgIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ21hcF9zdXBwbHlfcHVtcCcsICdpY29uLXNpemUnLCAwLjYpOwogICAgICAvLyDpmpDol4/lha3msLTlkIjkuIDpu5jorqTlm77lsYIKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgncmRfbWFwX2NvbWInLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ3JkX21hcF9tYW5ob2xlJywgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICAvLyDmsaHmsLTnm7jlhbMKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgncmRfbWFwX2RyYWlucGlwZV93c19iaWcnLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ3JkX21hcF9kcmFpbnBpcGVfd3NfYmlnX2RpcmVjdGlvbicsICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgncmRfbWFwX2RyYWlucGlwZV93c19zbWFsbCcsICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgncmRfbWFwX2RyYWlucGlwZV93c19zbWFsbF9kaXJlY3Rpb24nLCAndmlzaWJpbGl0eScsICdub25lJyk7CiAgICAgIC8vIOmbqOawtOebuOWFswogICAgICBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KCdyZF9tYXBfZHJhaW5waXBlX3lzX2JpZycsICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgncmRfbWFwX2RyYWlucGlwZV95c19iaWdfZGlyZWN0aW9uJywgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KCdyZF9tYXBfZHJhaW5waXBlX3lzX3NtYWxsJywgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KCdyZF9tYXBfZHJhaW5waXBlX3lzX3NtYWxsX2RpcmVjdGlvbicsICd2aXNpYmlsaXR5JywgJ25vbmUnKTsKICAgICAgLy8g5pi+56S65L6b5rC0566h57q/5Zu+5bGCCiAgICAgIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ21hcF9zdXBwbHlfcGlwZV9kaXN0cmlidXRlJywgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpOwogICAgICBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KCdtYXBfc3VwcGx5X3BpcGVfY2lyY3VsYXRpbmcnLCAndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7CiAgICAgIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ21hcF9zdXBwbHlfcGlwZV9kZWxpdmVyeScsICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKICAgICAgLy8gbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSggIjExMTExMTExMTExMTExMTExMTExMTExMTEiLCAidmlzaWJpbGl0eSIsICJ2aXNpYmxlIiApOwogICAgICBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KCdtYXBfd2F0ZXJ3b3JrJywgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpOwogICAgICBtYXBPYmoubWFwLnNldExheW91dFByb3BlcnR5KCdtYXBfc3VwcGx5X3B1bXAnLCAndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7CiAgICAgIC8vIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoICIxMTExMTExMTExMTExMTExMTExMTExMTExIiwgInZpc2liaWxpdHkiLCAidmlzaWJsZSIgKTsKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnbWFwX3N1cHBseV92YWx2ZScsICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnbWFwX3N1cHBseV9maXJlaHlkcmFudCcsICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsKCiAgICAgIC8vIOa3u+WKoOS7u+WKoeiMg+WbtOOAgeeuoee6v+WbvuWxggogICAgICBhd2FpdCB0aGlzLmFkZFRhc2tSYW5nZUFuZExpbmVzKCk7CiAgICAgIC8vIOmXrumimOS4iuaKpeaOpeWPowogICAgICBhd2FpdCB0aGlzLmdldFByb2JsZW1EYXRhTGlzdCgpOwogICAgICAvLyB0aGlzLmdldFRhc2tCeUlkKGlkKQoKICAgICAgLy8g5beh5qOA5Lq65ZGYc291cmNl5bey5re75YqgCgogICAgICAvLyDorr7nva7lt6Hmo4DlkZjkvY3nva4KICAgICAgLy8gdGhpcy4kcmVmcy5teW1hcC5zZXRJbnNwVXNlclBvc2l0aW9uKHsKICAgICAgLy8gICBsb25naXR1ZGU6IDExNS45Mjk4NzA3ODAxMzYzNSwKICAgICAgLy8gICBsYXRpdHVkZTogMzkuMDYyMDYyODM2OTkwMDY2LAogICAgICAvLyB9KQoKICAgICAgLy8g5beh5qOA5qih5ouf77yM54K55Ye75Zyw5Zu+5qih5ouf6LWw5YqoCiAgICAgIC8vIG1hcE9iai5tYXAub24oJ2NsaWNrJywgKGUpID0+IHsKICAgICAgLy8gICBjb25zb2xlLmxvZygn54K55Ye75Zyw5Zu+JywgZS5sbmdMYXQpCiAgICAgIC8vICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSB7CiAgICAgIC8vICAgICBsb25naXR1ZGU6IGUubG5nTGF0LmxuZywKICAgICAgLy8gICAgIGxhdGl0dWRlOiBlLmxuZ0xhdC5sYXQsCiAgICAgIC8vICAgfQogICAgICAvLyAgIC8vIHsKICAgICAgLy8gICAvLyAgIGxuZzogMTE1LjkyMTAxODY2MjcxNTAzLAogICAgICAvLyAgIC8vICAgbGF0OiAzOS4wNjEzNzkyOTkxMjQxMywKICAgICAgLy8gICAvLyB9KQogICAgICAvLyB9KQogICAgICAvLyB0aGlzLmN1cnJlbnRQb3NpdGlvbiA9IHsKICAgICAgLy8gICBsb25naXR1ZGU6ICcxMTUuOTA0NTc2OTc3NzkyMDknLAogICAgICAvLyAgIGxhdGl0dWRlOiAnMzkuMDQ1NjcxODgzODg4OTg2JywKICAgICAgLy8gfQogICAgICAvLyDkurrlkZjlrprkvY0KICAgICAgaWYgKHR5cGVvZiB5dWFuY2h1ICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgeXVhbmNodS5sb2NhdGlvbkFNYXAucmVxdWVzdFNpbmdsZUxvY2F0aW9uKFsnMSddLCByZXMgPT4gewogICAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICAgIC4uLnRoaXMuY3VycmVudFBvc2l0aW9uCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy4kcmVmcy5teW1hcC5zZXRJbnNwVXNlclBvc2l0aW9uKHBhcmFtKTsKICAgICAgICB9LCBlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coJ3RoaXMuY3VycmVudFBvc2l0aW9uJywgdGhpcy5jdXJyZW50UG9zaXRpb24pOwogICAgfSwKICAgIC8vIOagueaNrumAn+W6puaUueWPmOW3oeajgOeuoee6v+minOiJsgogICAgYXN5bmMgY2hhbmdlSW5zcExpbmVTb3VyY2VCeVNwZWVkKHBvc2l0aW9uKSB7CiAgICAgIGNvbnN0IGNvb3JkID0gW3BhcnNlRmxvYXQocG9zaXRpb24ubG9uZ2l0dWRlKSwgcGFyc2VGbG9hdChwb3NpdGlvbi5sYXRpdHVkZSldOwogICAgICBjb25zdCBwb2ludCA9IHR1cmYucG9pbnQoY29vcmQpOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChtYXBPYmoubWFwLmdldFNvdXJjZSgnaW5zcFVzZXInKSAmJiBtYXBPYmoubWFwLmlzU291cmNlTG9hZGVkKCdpbnNwVXNlcicpKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICBpZiAodHJ1ZSkgewogICAgICAgICAgICAgIC8vIOaUueWPmOWRqOWbtOimgee0oOeahOeKtuaAgQogICAgICAgICAgICAgIGxldCBidWZmZXJlZCA9IHR1cmYuYnVmZmVyKHBvaW50LCAwLjAxNSwgewogICAgICAgICAgICAgICAgdW5pdDogJ2tpbG9tZXRlcnMnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhhdC5jaGFuZ2VJbnNwTGluZVN0YXRlKGJ1ZmZlcmVkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIDEwMCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfQogICAgfSwKICAgIC8vIOiuvue9ruW3oeajgOeuoee6v+S4uuW3suW3oeajgAogICAgY2hhbmdlSW5zcExpbmVTdGF0ZShnZW9tZXRyeSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIC8vIOWwhuWcsOeQhuWdkOagh+ezu+i9rOWMluS4uuWxj+W5leWdkOagh+ezuwogICAgICBmdW5jdGlvbiBnZW9UcmFuc1RvUGl4ZWwoZ2VvbSkgewogICAgICAgIGNvbnN0IHBvbHlnb25Cb3ggPSB0dXJmLmJib3goZ2VvbSk7CiAgICAgICAgY29uc3Qgc291dGhXZXN0ID0gW3BvbHlnb25Cb3hbMF0sIHBvbHlnb25Cb3hbMV1dOwogICAgICAgIGNvbnN0IG5vcnRoRWFzdCA9IFtwb2x5Z29uQm94WzJdLCBwb2x5Z29uQm94WzNdXTsKICAgICAgICBsZXQgc291dGhXZXN0UG9pbnRQaXhlbCA9IG1hcE9iai5tYXAucHJvamVjdChzb3V0aFdlc3QpOwogICAgICAgIGxldCBub3J0aEVhc3RQb2ludFBpeGVsID0gbWFwT2JqLm1hcC5wcm9qZWN0KG5vcnRoRWFzdCk7CiAgICAgICAgLy8g5aKe5aSnYmJveOeahOafpeivouiMg+WbtAogICAgICAgIHNvdXRoV2VzdFBvaW50UGl4ZWwgPSBbc291dGhXZXN0UG9pbnRQaXhlbC54IC0gNTAsIHNvdXRoV2VzdFBvaW50UGl4ZWwueSArIDUwXTsKICAgICAgICBub3J0aEVhc3RQb2ludFBpeGVsID0gW25vcnRoRWFzdFBvaW50UGl4ZWwueCArIDUwLCBub3J0aEVhc3RQb2ludFBpeGVsLnkgLSA1MF07CiAgICAgICAgcmV0dXJuIFtzb3V0aFdlc3RQb2ludFBpeGVsLCBub3J0aEVhc3RQb2ludFBpeGVsXTsKICAgICAgfQogICAgICAvLyDlr7nmr4/kuKrliJLliIblh7rmnaXnmoRiYm946L+b6KGM5aSE55CGCiAgICAgIGFzeW5jIGZ1bmN0aW9uIGNodW5rKGdlb20pIHsKICAgICAgICAvLyBsZXQgd2FzTG9hZGVkID0gZmFsc2U7CiAgICAgICAgLy8gaWYgKHdhc0xvYWRlZCkgcmV0dXJuOwogICAgICAgIGNvbnNvbGUubG9nKCdnZW9UcmFuc1RvUGl4ZWwoZ2VvbSknLCBnZW9UcmFuc1RvUGl4ZWwoZ2VvbSkpOwogICAgICAgIC8vIOafpeivouWxj+W5leiMg+WbtOWGheS4reS7u+WKoeiMg+WbtOWGheeahOeuoee6v+WbvuWxgu+8iOe6ouiJsuaIluiAhee7v+iJsu+8iQogICAgICAgIGNvbnN0IGJveEZlYXR1cmVzID0gbWFwT2JqLm1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZ2VvVHJhbnNUb1BpeGVsKGdlb20pLCB7CiAgICAgICAgICBsYXllcnM6IFsnZGV0ZWN0aW9uUGlwZUxheWVyJ10KICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhib3hGZWF0dXJlcywgJ2JveEZlYXR1cmVzJyk7CgogICAgICAgIC8vIOWtmOWCqOeuoee6v+S4juecn+WunueahOiMg+WbtOebuOS6pOS4lOayoeacieiiq+W3oeajgOi/h+eahOeuoee6vwogICAgICAgIGxldCB0ZW1wUGlwZUxpc3QgPSBbXTsKICAgICAgICBib3hGZWF0dXJlcy5mb3JFYWNoKGZlYXQgPT4gewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gY29uc3QgcmVzdWx0ID0gdHVyZi5pbnRlcnNlY3QoZmVhdC5nZW9tZXRyeSwgZ2VvbWV0cnkpOwogICAgICAgICAgICAvLyDlpoLmnpzkuKTkuKrlh6DkvZXlm77lvaLnmoTkuqTngrnkuLrnqbrpm4bvvIzliJnov5Tlm54oVFJVRSnjgIIKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdHVyZi5ib29sZWFuRGlzam9pbnQoZmVhdC5nZW9tZXRyeSwgZ2VvbWV0cnkpOwogICAgICAgICAgICBjb25zb2xlLmxvZygn54K55LiO6IyD5Zu05piv5ZCm55u45LqkLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJywgcmVzdWx0LCBmZWF0Lmdlb21ldHJ5LCBnZW9tZXRyeSk7CiAgICAgICAgICAgIC8vIOWmguaenOafpeWHuueahOimgee0oOS4juecn+WunueahOiMg+WbtOebuOS6pOS4lOayoeacieiiq+W3oeajgOi/h++8jOWImeaUueWPmOWFtueKtuaAge+8jOW5tuiusOW9leWFtuWFs+mUruWtlwogICAgICAgICAgICBpZiAoIXJlc3VsdCAmJiAhZmVhdC5zdGF0ZS5pc0luc3ApIHsKICAgICAgICAgICAgICBtYXBPYmoubWFwLnNldEZlYXR1cmVTdGF0ZSh7CiAgICAgICAgICAgICAgICBzb3VyY2U6IGZlYXQuc291cmNlLAogICAgICAgICAgICAgICAgaWQ6IGZlYXQuaWQKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBpc0luc3A6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoIXRlbXBQaXBlTGlzdC5tYXAoaXQgPT4gaXQucGlwZUlkKS5pbmNsdWRlcyhmZWF0LmlkKSkgewogICAgICAgICAgICAgICAgbGV0IGRhdGUgPSB0aGF0LiRkYXlqcygpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpOwogICAgICAgICAgICAgICAgdGVtcFBpcGVMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICBwb3J0YWxJZDogdGhhdC50YXNrRGV0YWlsLnBvcnRhbElkLAogICAgICAgICAgICAgICAgICBpbnNwRGF0ZTogZGF0ZSwKICAgICAgICAgICAgICAgICAgLy8g5beh5qOA5pel5pyfCiAgICAgICAgICAgICAgICAgIHBpcGVJZDogZmVhdC5pZCwKICAgICAgICAgICAgICAgICAgLy8g566h57q/aWQKICAgICAgICAgICAgICAgICAgZXh0MzogJ+S+m+awtCcsCiAgICAgICAgICAgICAgICAgIHBpcGVMZW5ndGg6IGZlYXQucHJvcGVydGllc1snbGVuZ3RoJ10gfHwgMCwKICAgICAgICAgICAgICAgICAgLy8g566h57q/6ZW/5bqmCiAgICAgICAgICAgICAgICAgIHRhc2tJZDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGVha0RldGVjdGlvbkRhdGEnKSkudGFza0lkIC8vIOS7u+WKoWlkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAodGhhdC5pc1Jlc3VtZSkgewogICAgICAgICAgdGVtcFBpcGVMaXN0Lmxlbmd0aCA+IDAgJiYKICAgICAgICAgIC8vIGFwcOa3u+WKoOeuoee9keajgOa8j+iusOW9lQogICAgICAgICAgQXBpLnJlY29yZEluc3BMaW5lKHRlbXBQaXBlTGlzdCkudGhlbihhc3luYyByZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfnrqHnur/kuIrkvKDmiJDlip8nKTsKICAgICAgICAgICAgICAvLyDmoLnmja5JROafpeivouW9k+WJjeajgOa8j+S7u+WKoQogICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IEFwaS5nZXRJbnNwTGVha1Rhc2tEZXRhaWwoewogICAgICAgICAgICAgICAgaWQ6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xlYWtEZXRlY3Rpb25EYXRhJykpLnRhc2tJZAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmoLnmja5JROafpeivouW9k+WJjeajgOa8j+S7u+WKoScsIHJlcyk7CiAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsKICAgICAgICAgICAgICAgIHRoYXQudGFza0RldGFpbCA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBidXMuJGVtaXQoJ3VwZGF0ZURhdGEnKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDlpLHotKXnmoR0ZW1wUGlwZUxpc3Q6ICcsIHRlbXBQaXBlTGlzdCk7CiAgICAgICAgICAgICAgLy8g5LiK5Lyg5aSx6LSl55qE5bey5beh5qOA566h57q/aWQKICAgICAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLnVwbG9hZEZpbGVkUGlwZUlkTGlzdC5wdXNoKC4uLnRlbXBQaXBlTGlzdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZW1wUGlwZUxpc3QubGVuZ3RoID4gMCAmJiBwYXVzZVN0YXRlUGlwZUlkTGlzdC5wdXNoKC4uLnRlbXBQaXBlTGlzdCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNiKGZlYXR1cmVzKSB7CiAgICAgICAgaWYgKGZlYXR1cmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjaHVuayhmZWF0dXJlcy5zaGlmdCgpKTsKICAgICAgICAgICAgY2IoZmVhdHVyZXMpOwogICAgICAgICAgfSwgMTAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY2IoW2dlb21ldHJ5XSk7CiAgICB9LAogICAgLy8g5re75Yqg5Lu75Yqh6IyD5Zu044CB566h57q/5Zu+5bGCCiAgICBhc3luYyBhZGRUYXNrUmFuZ2VBbmRMaW5lcygpIHsKICAgICAgLy8g5qC55o2uSUTmn6Xor6LlvZPliY3mo4DmvI/ku7vliqEKICAgICAgY29uc3QgcmVzRGF0YTEgPSBhd2FpdCBBcGkuZ2V0SW5zcExlYWtUYXNrRGV0YWlsKHsKICAgICAgICBpZDogdGhpcy50YXNrRGV0YWlsLmlkCiAgICAgIH0pOwogICAgICAvLyDlvZPliY3ngrnlh7vnmoTku7vliqHvvIzku47mjqXlj6PkuK3ojrflj5YKICAgICAgdGhpcy50YXNrRGV0YWlsID0gKHJlc0RhdGExID09PSBudWxsIHx8IHJlc0RhdGExID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNEYXRhMS5kYXRhKSB8fCB7fTsKICAgICAgdGhpcy50YXNrRGV0YWlsLnRhc2tUeXBlID0gJ+S6uuW3oSc7CiAgICAgIGNvbnNvbGUubG9nKCfmoLnmja5JROafpeivouW9k+WJjeajgOa8j+S7u+WKoScsIHRoaXMudGFza0RldGFpbCk7CiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyDmt7vliqDojIPlm7Tlm77lsYLlubblrprkvY0KICAgICAgdGhpcy5zZXREZXRlY3Rpb25SYW5nZURhdGEoSlNPTi5wYXJzZSh0aGlzLnRhc2tEZXRhaWwuZ2VvbSkpOwoKICAgICAgLy8g5YiG6aG15p+l6K+i566h572R5bey5qOA5ryP6K6w5b2VCiAgICAgIGNvbnN0IHJlc0RhdGEyID0gYXdhaXQgQXBpLmdldEhhc0luc3BMZWFrUGlwZSh7CiAgICAgICAgdGFza0lkOiB0aGlzLnRhc2tEZXRhaWwuaWQsCiAgICAgICAgcGFnZTogMSwKICAgICAgICBzaXplOiA5OTk5OQogICAgICB9KTsKICAgICAgbGV0IGhhc0luc3BQaXBlID0gW107CiAgICAgIGlmIChyZXNEYXRhMi5zdGF0dXMpIHsKICAgICAgICBoYXNJbnNwUGlwZSA9IHJlc0RhdGEyLmRhdGEucmVjb3Jkcy5tYXAoaXRlbSA9PiBpdGVtLnBpcGVJZCk7CiAgICAgICAgY29uc29sZS5sb2coJ+WIhumhteafpeivoueuoee9keW3suajgOa8j+iusOW9lScsIHJlc0RhdGEyLmRhdGEucmVjb3Jkcyk7CiAgICAgIH0KCiAgICAgIC8vIOagueaNruS7u+WKoeiMg+WbtOafpeivoueuoee6v+aVsOaNrgogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIGJpelR5cGU6ICfkvpvmsLQnLAogICAgICAgIGRldlR5cGU6ICfnrqHnur8nLAogICAgICAgIGdlb21TdHI6IHRoaXMudGFza0RldGFpbC5nZW9tLAogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDk5OTk5CiAgICAgIH07CiAgICAgIGF3YWl0IEFwaS5nZXRBbGxMZWFrTGluZXMocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ+W3oeajgOS7u+WKoeS4i+aJgOacieW3oeajgOeuoee6vycsIHJlcyk7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgJiYgcmVzLmRhdGEubGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAvLyDlt6Hmo4Dku7vliqHkuIvmiYDmnInlt6Hmo4DnrqHnur8KICAgICAgICAgIHRoaXMuYWxsVGFza0xpbmVzID0gW107CiAgICAgICAgICByZXMuZGF0YS5saXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIGlmIChoYXNJbnNwUGlwZS5pbmNsdWRlcyhpdGVtLmlkKSkgewogICAgICAgICAgICAgIC8vIOW3oeajgOS7u+WKoeS4i+aJgOacieW3oeajgOeuoee6vy3lt7Llt6Hmo4AKICAgICAgICAgICAgICB0aGlzLmFsbFRhc2tMaW5lcy5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgICAgICAgZ2VvbWV0cnk6IEpTT04ucGFyc2UoaXRlbS5nZW9tKSwKICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgICAgICAgaXNJbnNwOiB0cnVlLAogICAgICAgICAgICAgICAgICAuLi5pdGVtCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgbWFwT2JqLm1hcC5zZXRGZWF0dXJlU3RhdGUoewogICAgICAgICAgICAgICAgc291cmNlOiAnZGV0ZWN0aW9uUGlwZScsCiAgICAgICAgICAgICAgICBpZDogaXRlbS5pZAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIC8vIOW3suW3oeajgO+8jOe7v+iJsgogICAgICAgICAgICAgICAgaXNJbnNwOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8g5beh5qOA5Lu75Yqh5LiL5omA5pyJ5beh5qOA566h57q/LeacquW3oeajgAogICAgICAgICAgICAgIHRoaXMuYWxsVGFza0xpbmVzLnB1c2goewogICAgICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLAogICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgICAgICBnZW9tZXRyeTogSlNPTi5wYXJzZShpdGVtLmdlb20pLAogICAgICAgICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICAgICAgICBpc0luc3A6IGZhbHNlLAogICAgICAgICAgICAgICAgICAuLi5pdGVtCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgbWFwT2JqLm1hcC5zZXRGZWF0dXJlU3RhdGUoewogICAgICAgICAgICAgICAgc291cmNlOiAnZGV0ZWN0aW9uUGlwZScsCiAgICAgICAgICAgICAgICBpZDogaXRlbS5pZAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgLy8g5pyq5beh5qOA77yM57qi6ImyCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaXNJbnNwOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIOa3u+WKoOiMg+WbtOWGheeuoee6v+WbvuWxggogICAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ2RldGVjdGlvblBpcGUnKS5zZXREYXRhKHsKICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgICAgZmVhdHVyZXM6IHRoaXMuYWxsVGFza0xpbmVzCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOa3u+WKoOS7u+WKoeiMg+WbtOOAgeeuoee6v+WbvuWxgnNvdXJjZeOAgWxheWVyCiAgICBhZGRTb3VyY2VMYXllcigpIHsKICAgICAgLy8g6IyD5Zu06Z2i5Y+K6L655qGGCiAgICAgIG1hcE9iai5tYXAuYWRkU291cmNlKCdkZXRlY3Rpb25SYW5nZScsIHsKICAgICAgICB0eXBlOiAnZ2VvanNvbicsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG1hcE9iai5tYXAuYWRkTGF5ZXIoewogICAgICAgIGlkOiAnZGV0ZWN0aW9uUmFuZ2VMYXllcl9maWxsJywKICAgICAgICBzb3VyY2U6ICdkZXRlY3Rpb25SYW5nZScsCiAgICAgICAgdHlwZTogJ2ZpbGwnLAogICAgICAgIHBhaW50OiB7CiAgICAgICAgICAnZmlsbC1jb2xvcic6ICcjMzJDNUZGJywKICAgICAgICAgICdmaWxsLW9wYWNpdHknOiAwLjEKICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogJ2RldGVjdGlvblJhbmdlTGF5ZXJfbGluZScsCiAgICAgICAgc291cmNlOiAnZGV0ZWN0aW9uUmFuZ2UnLAogICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICBwYWludDogewogICAgICAgICAgJ2xpbmUtY29sb3InOiAnIzMyQzVGRicsCiAgICAgICAgICAnbGluZS13aWR0aCc6IDIsCiAgICAgICAgICAnbGluZS1kYXNoYXJyYXknOiBbNCwgNF0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgLy8g6IyD5Zu05YaF566h57q/CiAgICAgIG1hcE9iai5tYXAuYWRkU291cmNlKCdkZXRlY3Rpb25QaXBlJywgewogICAgICAgIHR5cGU6ICdnZW9qc29uJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgZmVhdHVyZXM6IFtdCiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcih7CiAgICAgICAgaWQ6ICdkZXRlY3Rpb25QaXBlTGF5ZXInLAogICAgICAgIHNvdXJjZTogJ2RldGVjdGlvblBpcGUnLAogICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICBwYWludDogewogICAgICAgICAgJ2xpbmUtY29sb3InOiBbJ2Nhc2UnLCBbJ2Jvb2xlYW4nLCBbJ2ZlYXR1cmUtc3RhdGUnLCAnaXNJbnNwJ10sIGZhbHNlXSwgJyM0NEJBNUEnLCAnI0ZGMDAwMCddLAogICAgICAgICAgJ2xpbmUtd2lkdGgnOiAzCiAgICAgICAgfQogICAgICB9LCAncmRfbWFwX291dGZhbGwnKTsKICAgIH0sCiAgICAvLyDmt7vliqDojIPlm7Tlm77lsYLlubblrprkvY0KICAgIHNldERldGVjdGlvblJhbmdlRGF0YShyYW5nZSkgewogICAgICBsZXQgYmJveCA9IHR1cmYuYmJveCh7CiAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICBmZWF0dXJlczogW3R1cmYucG9seWdvbihyYW5nZS5jb29yZGluYXRlcyldCiAgICAgIH0pOwogICAgICBpZiAobWFwT2JqLm1hcCAmJiBtYXBPYmoubWFwLmdldFNvdXJjZSgnZGV0ZWN0aW9uUmFuZ2UnKSkgewogICAgICAgIG1hcE9iai5tYXAuZ2V0U291cmNlKCdkZXRlY3Rpb25SYW5nZScpLnNldERhdGEocmFuZ2UpOwogICAgICAgIG1hcE9iai5tYXAuZml0Qm91bmRzKGJib3gsIHsKICAgICAgICAgIHBhZGRpbmc6IHsKICAgICAgICAgICAgdG9wOiAxMCwKICAgICAgICAgICAgYm90dG9tOiAyNSwKICAgICAgICAgICAgbGVmdDogMTUsCiAgICAgICAgICAgIHJpZ2h0OiA1CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlj5bmtojnprvlvIAKICAgIGNhbmNlbExlYXZlKCkgewogICAgICB0aGlzLmlmTGVhdmVUYXNrID0gZmFsc2U7CiAgICB9LAogICAgLy8g56Gu6K6k56a75byACiAgICBjb25maXJtTGVhdmUoKSB7CiAgICAgIHRoaXMuaWZMZWF2ZVRhc2sgPSBmYWxzZTsKICAgICAgdGhpcy5lbmRSZWNvcmQoJ2xlYXZlJyk7CiAgICB9LAogICAgLy8g6L+U5Zue5Lu75Yqh6aG1CiAgICBnb0JhY2tUb1Rhc2soKSB7CiAgICAgIGlmICh0aGlzLmlmUmVjb3JkaW5nKSB7CiAgICAgICAgLy8g5b2T5YmN5q2j5Zyo5beh5qOA5Lit5pe277yM6L+U5Zue5Lu75Yqh6aG15pe25o+Q56S65piv5ZCm56a75byA6K+l5Lu75YqhCiAgICAgICAgdGhpcy5pZkxlYXZlVGFzayA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgfQogICAgfSwKICAgIC8vIOmXrumimOS4iuaKpQogICAgYXN5bmMgZ2V0UHJvYmxlbURhdGFMaXN0KCkgewogICAgICAvLyDojrflj5ZoZWFkZXLvvIzmn6Xor6Llt6XljZXnlKgKICAgICAgYXdhaXQgYXhpb3MoewogICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9USElSRF9SRVFVRVNUX1VSTCArICcvbWFpbi91c2VyQ2VudGVyQXBpL3Nzby90b2tlbkJ5VG9rZW4nLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgdG9rZW46IHRoaXMuYWNjZXNzVG9rZW4KICAgICAgICB9LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCYXNpYyBiM1YwZDI5eWF6cDNjR2N5TURJdycKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIHRoaXMuZm9ybVRva2VuID0gcmVzLmRhdGEucmVzdWx0RGF0YS50b2tlbjsKICAgICAgICAgIHRoaXMuaGVhZGVyID0gewogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyB0aGlzLmZvcm1Ub2tlbgogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyDlrZjlgqjmvI/ngrnlt6XljZUKICAgICAgdGhpcy5wcm9ibGVtRGF0YUxpc3QgPSBbXTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBzeXNDb2RlOiAnb3V0d29yaycsCiAgICAgICAgLy8gZm9ybVZhbHVlOiAie1widGFza0lkXCI6XCIxNjExMDI5NzU4Njk3NTQxNjM0XCJ9IjE2MTEwMjk3NTg2OTc1NDE2MzQKICAgICAgICAvLyDlj6rmmL7npLrku7vliqHlhbPogZTnmoTkuIrmiqXmvI/ngrkKICAgICAgICBleHRQYXJhbTogewogICAgICAgICAgdGFza0lkOiB0aGlzLnRhc2tEZXRhaWwuaWQgLy8g5Lu75YqhaWQKICAgICAgICB9LAogICAgICAgIHBhZ2U6IHsKICAgICAgICAgIGN1cnJlbnQ6IDEsCiAgICAgICAgICBzaXplOiAxMDAwMAogICAgICAgIH0sCiAgICAgICAgdHlwZUxpc3Q6IFsnamxnZCddCiAgICAgIH07CiAgICAgIGF3YWl0IGF4aW9zKHsKICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfVEhJUkRfUkVRVUVTVF9VUkwgKyAnL21haW4vb3V0d29ya2FwaS90aWNrZXRTdGF0aXN0aWNDbGllbnQvZ2V0VGlja2V0TGlzdCcsCiAgICAgICAgLy8g5omA5pyJ55qECiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgZGF0YTogcGFyYW1zLAogICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDAgJiYgcmVzLmRhdGEgIT0gbnVsbCkgewogICAgICAgICAgdmFyIF9yZXMkZGF0YTsKICAgICAgICAgIHRoaXMucHJvYmxlbURhdGFMaXN0ID0gKChfcmVzJGRhdGEgPSByZXMuZGF0YSkgPT09IG51bGwgfHwgX3JlcyRkYXRhID09PSB2b2lkIDAgfHwgKF9yZXMkZGF0YSA9IF9yZXMkZGF0YS5yZXN1bHREYXRhKSA9PT0gbnVsbCB8fCBfcmVzJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXMkZGF0YS5yZWNvcmRzKSB8fCBbXTsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmo4DmvI/lt6XljZVyZWNvcmRzJywgdGhpcy5wcm9ibGVtRGF0YUxpc3QpOwogICAgICAgICAgdGhpcy5hZGRZb3VyTGF5ZXIodGhpcy5wcm9ibGVtRGF0YUxpc3QsICfms4TmvI/ngrknKTsKICAgICAgICAgIC8vIOeUqOS6juWIpOaWreaYr+WQpuWKoOi9veWujOS4iuaKpea8j+eCueaVsOaNrgogICAgICAgICAgdGhpcy5yZXBvcnREYXRhSXNMb2FkZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5Zyo5Zyw5Zu+5LiK5re75Yqg5rOE5ryP54K5CiAgICBhZGRZb3VyTGF5ZXIocG9pbnRMaXN0LCBpZCkgewogICAgICBjb25zdCBzb3VyY2VEYXRhID0gewogICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgZmVhdHVyZXM6IHBvaW50TGlzdC5tYXAoaSA9PiB7CiAgICAgICAgICBsZXQgbGwgPSBudWxsOwogICAgICAgICAgaWYgKHR5cGVvZiBpLmZvcm1WYWx1ZS50aWNrZXRBZGRyZXNzID09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIGxsID0gSlNPTi5wYXJzZShKU09OLnBhcnNlKGkuZm9ybVZhbHVlLnRpY2tldEFkZHJlc3MpLnBvaW50KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxsID0gaS5mb3JtVmFsdWUudGlja2V0QWRkcmVzcy5wb2ludDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgICAgZ2VvbWV0cnk6IHsKICAgICAgICAgICAgICB0eXBlOiAnUG9pbnQnLAogICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbbGwubG5nLCBsbC5sYXRdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb3BlcnRpZXM6IGkKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgfTsKICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKGlkKSkgewogICAgICAgIG1hcE9iai5tYXAuZ2V0U291cmNlKGlkKS5zZXREYXRhKHNvdXJjZURhdGEpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBtYXBPYmoubWFwLmFkZExheWVyKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgdHlwZTogJ3N5bWJvbCcsCiAgICAgICAgc291cmNlOiB7CiAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsCiAgICAgICAgICBkYXRhOiBzb3VyY2VEYXRhCiAgICAgICAgfSwKICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICdpY29uLWltYWdlJzogaWQsCiAgICAgICAgICAnaWNvbi1zaXplJzogMC43LAogICAgICAgICAgLy8g5Zu+5qCH5by65Yi25YWo6YOo5pi+56S6CiAgICAgICAgICAnaWNvbi1pZ25vcmUtcGxhY2VtZW50JzogdHJ1ZSwKICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJwogICAgICAgIH0KICAgICAgICAvLyBtaW56b29tOiAxMywKICAgICAgfSwgJycpOwogICAgICAvLyDpvKDmoIfngrnlh7sKICAgICAgLy8gbWFwT2JqLm1hcC5vbignY2xpY2snLCBpZCwgdGhpcy5oYW5kbGVNb3VzZUNsaWNrKQogICAgfSwKICAgIC8vIOS4iuaKpeazhOa8j+eCuQogICAgcmVwb3J0Q2xpY2soKSB7CiAgICAgIC8vIOeUqOS6juWIpOaWreaYr+WQpuWKoOi9veWujOS4iuaKpea8j+eCueaVsOaNrgogICAgICBpZiAodGhpcy5yZXBvcnREYXRhSXNMb2FkZWQpIHsKICAgICAgICB0aGlzLnJlcG9ydFNob3cgPSB0cnVlOwogICAgICAgIC8vIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ2V2ZW50UG9pbnRzTGF5ZXInLCAndmlzaWJpbGl0eScsICd2aXNpYmxlJykKICAgICAgfSBlbHNlIHsKICAgICAgICBUb2FzdC5sb2FkaW5nKHsKICAgICAgICAgIG1lc3NhZ2U6ICfkuIrmiqXmlbDmja7liqDovb3kuK3jgILjgILjgIInLAogICAgICAgICAgbG9hZGluZ1R5cGU6ICdzcGlubmVyJywKICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIC8vIG1hcE9iai5tYXAuc2V0TGF5b3V0UHJvcGVydHkoJ2V2ZW50UG9pbnRzTGF5ZXInLCAndmlzaWJpbGl0eScsICdub25lJykKICAgIH0sCiAgICAvLyDngrnlh7vkuIrmiqXmvI/ngrnliqDlj7cKICAgIG9uU2VsZWN0KHZhbCkgewogICAgICBpZiAodGhpcy5pc1ZpZXcpIHsKICAgICAgICBUb2FzdCh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+l5beh5qOA5Lu75Yqh5bey57uT5p2fJywKICAgICAgICAgIGR1cmF0aW9uOiAnMTUwMCcKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5pZlRpcHMgPSB0cnVlOwogICAgICAvLyDpmpDol4/mjonojIPlm7Tlm77lsYIKICAgICAgbWFwT2JqLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnZGV0ZWN0aW9uUmFuZ2VMYXllcl9maWxsJywgJ3Zpc2liaWxpdHknLCAnbm9uZScpOwogICAgICBtYXBPYmoubWFwLm9uKCdjbGljaycsIHRoaXMuc2VsZWN0UmVwb3J0UG9pbnQpOwogICAgfSwKICAgIC8vIOS4iuaKpea8j+eCuQogICAgYXN5bmMgc2VsZWN0UmVwb3J0UG9pbnQoZSkgewogICAgICBsZXQgZmVhdHVyZXMgPSBtYXBPYmoubWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLnBvaW50KTsKICAgICAgY29uc29sZS5sb2coJ+afpeivouWIsOeahOWbvuWxguaVsOaNricsIGZlYXR1cmVzKTsKICAgICAgbGV0IHByb3BlcnRpZXNBcnIgPSBbXTsKICAgICAgcHJvcGVydGllc0FyciA9IGZlYXR1cmVzLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAvLyDnrZvpgInlh7rkvpvmsLTnmoTlm77lsYIKICAgICAgICByZXR1cm4gaXRlbS5sYXllci5pZCA9PSAnbWFwX3N1cHBseV9waXBlX2Rpc3RyaWJ1dGUnOwogICAgICB9KTsKICAgICAgLy8gY29uc29sZS5sb2coJ+S4iuaKpea8j+eCueeCueWHu+WcsOWbvicsIGZlYXR1cmVzLCBwcm9wZXJ0aWVzQXJyKQoKICAgICAgLy8g562b6YCJ5Ye65Yy56YWN55qE56ys5LiA5Liq566h57q/5YWD57SgCiAgICAgIGxldCBvbmVQcm9wZXJ0aWVzID0gbnVsbDsKICAgICAgbGV0IHBvcDsKICAgICAgbGV0IG1hcmtlcjsKICAgICAgY29uc3Qgc3JjID0gcmVxdWlyZShgQC9hc3NldHMvaW1nL2xlZ2VuZC/kuovku7bkuIrmiqUucG5nYCk7CiAgICAgIC8vIOWmguaenOWtmOWcqGlk5Li6ZXZlbnRPYmpfb25l55qE5YWD57Sg77yM5YiZ5Yig6Zmk5q2k5YWD57Sg6YeN5paw5Yib5bu677yM5L+d5oyB5YWo5bGA5Y+q5pyJ5LiA5Liq5q2k5YWD57SgCiAgICAgIGxldCBjdXJyZW50RWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2ZW50T2JqX29uZScpOwogICAgICBpZiAoY3VycmVudEVsZSkgewogICAgICAgIGN1cnJlbnRFbGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50RWxlKTsKICAgICAgfQogICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGVsZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxpbWcgaWQ9ImV2ZW50T2JqX29uZSIgc3JjPSIke3NyY30iIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+CiAgICAgICAgICBgOwogICAgICBtYXJrZXIgPSBtYXBPYmoubWFwSW5zdGFuY2UubmV3TWFya2VyKHsKICAgICAgICBlbGVtZW50OiBlbGUKICAgICAgfSk7CiAgICAgIG1hcmtlci5zZXRMbmdMYXQoZS5sbmdMYXQpLnNldFBvcHVwKG1hcE9iai5tYXBJbnN0YW5jZS5uZXdQb3B1cCh7CiAgICAgICAgb2Zmc2V0OiBbMCwgLTddLAogICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZQogICAgICB9KS5zZXRIVE1MKGA8ZGl2IGlkPSJkZXZpY2VEZXRhaWwiPjwvZGl2PmApKS5hZGRUbyhtYXBPYmoubWFwKTsKICAgICAgaWYgKHRoaXMuaWZUaXBzKSB7CiAgICAgICAgdGhpcy5pZlRpcHMgPSBmYWxzZTsKICAgICAgfQogICAgICBpZiAocHJvcGVydGllc0Fyci5sZW5ndGggPiAwKSB7CiAgICAgICAgb25lUHJvcGVydGllcyA9IHByb3BlcnRpZXNBcnJbMF07CiAgICAgICAgY29uc29sZS5sb2coJ+etm+mAieWHuuWMuemFjeeahOesrOS4gOS4queuoee6v+WFg+e0oCcsIG9uZVByb3BlcnRpZXMsIGUubG5nTGF0KTsKICAgICAgICBwb3AgPSBuZXcgUG9wdXBJdGVtKHsKICAgICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgICBkZXZpY2VDb2RlOiBvbmVQcm9wZXJ0aWVzLnByb3BlcnRpZXMuc3RhcnRfY29kZSwKICAgICAgICAgICAgZnVuOiBnb1RvRGV0YWlsLAogICAgICAgICAgICBpc0RldmljZTogdHJ1ZQogICAgICAgICAgICAvLyB0eXBlOiB0eXBlLAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHBvcC4kbW91bnQoJyNkZXZpY2VEZXRhaWwnKTsKICAgICAgICB9KTsKICAgICAgICBtYXJrZXIudG9nZ2xlUG9wdXAoKTsKICAgICAgICBsZXQgdGhhdF8gPSB0aGlzOwogICAgICAgIC8vIOi/m+WFpeW3peWNleivpuaDhemhtQogICAgICAgIGZ1bmN0aW9uIGdvVG9EZXRhaWwoKSB7CiAgICAgICAgICB0aGF0Xy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnTGVha0RldGVjdGlvbkZvcm0nLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIHRhc2tJZDogdGhhdF8udGFza0RldGFpbC5pZCwKICAgICAgICAgICAgICAvLyDku7vliqFpZAogICAgICAgICAgICAgIHByb3BlcnRpZXM6IG9uZVByb3BlcnRpZXMucHJvcGVydGllcywKICAgICAgICAgICAgICBsbmdMYXQ6IGUubG5nTGF0LAogICAgICAgICAgICAgIGlkOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcG9wID0gbmV3IFBvcHVwSXRlbSh7CiAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgZGV2aWNlQ29kZTogJycsCiAgICAgICAgICAgIGZ1bjogZ29Ub0RldGFpbExuZ0xhdCwKICAgICAgICAgICAgaXNEZXZpY2U6IGZhbHNlLAogICAgICAgICAgICBsbmc6IGUubG5nTGF0LmxuZywKICAgICAgICAgICAgbGF0OiBlLmxuZ0xhdC5sYXQKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICBwb3AuJG1vdW50KCcjZGV2aWNlRGV0YWlsJyk7CiAgICAgICAgfSk7CiAgICAgICAgbWFya2VyLnRvZ2dsZVBvcHVwKCk7CiAgICAgICAgbGV0IHRoYXRfID0gdGhpczsKICAgICAgICAvLyDov5vlhaXlt6XljZXor6bmg4XpobUKICAgICAgICBmdW5jdGlvbiBnb1RvRGV0YWlsTG5nTGF0KCkgewogICAgICAgICAgdGhhdF8uJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ0xlYWtEZXRlY3Rpb25Gb3JtJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICB0YXNrSWQ6IHRoYXRfLnRhc2tEZXRhaWwuaWQsCiAgICAgICAgICAgICAgLy8g5Lu75YqhaWQKICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSwKICAgICAgICAgICAgICBsbmdMYXQ6IGUubG5nTGF0LAogICAgICAgICAgICAgIGlkOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDlvIDlp4vorrDlvZUg5LiK5Lyg6LW354K55oiQ5Yqf5ZCO5omN6L+b5YWl5beh5qOA6L+H56iLCiAgICBzdGFydEluc3BSZWNvcmQoKSB7CiAgICAgIGlmICh0aGlzLmlzVmlldykgewogICAgICAgIFRvYXN0KHsKICAgICAgICAgIG1lc3NhZ2U6ICfor6Xlt6Hmo4Dku7vliqHlt7Lnu5PmnZ8nLAogICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8g5rWL6K+VCiAgICAgIC8vIHRoaXMuY2hhbmdlSW5zcExpbmVTb3VyY2VCeVNwZWVkKHsKICAgICAgLy8gICBsb25naXR1ZGU6IDExNS45MTE4NzAxODg1LAogICAgICAvLyAgIGxhdGl0dWRlOiAzOS4wNTU2NDY4MTgwCiAgICAgIC8vIH0pCiAgICAgIGlmICghdGhpcy5jdXJyZW50UG9zaXRpb24gfHwgIXRoaXMuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSkgewogICAgICAgIFRvYXN0Lndhcm5pbmcoewogICAgICAgICAgbWVzc2FnZTogJ+W9k+WJjUdQU+S/oeWPt+W8se+8jOivt+eojeWQjuWwneivlScsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyDkv67mlLnmnKrlt6Hmo4AoMCnku7vliqHnirbmgIHoh7Plt6Hmo4DkuK0oMSkKICAgICAgaWYgKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xlYWtEZXRlY3Rpb25EYXRhJykpLmlzTmV3ICYmIHRoaXMudGFza0RldGFpbC50YXNrU3RhdHVzID09IDApIHsKICAgICAgICB0aGlzLnN0YXJ0T3JFbmRUYXNrUmVjb3JkKDEpOwogICAgICB9CiAgICAgIC8vIOa4hemZpOe8k+WtmOeahOi9qOi/ueaVsOaNrgogICAgICB0aGlzLmNsZWFyQnVmZmVyVHJhY2soKTsKICAgICAgbGV0IHRvYXN0ID0gVG9hc3QubG9hZGluZyh7CiAgICAgICAgbWVzc2FnZTogJ+eoi+W6j+WQr+WKqOS4rScsCiAgICAgICAgbG9hZGluZ1R5cGU6ICdzcGlubmVyJywKICAgICAgICBkdXJhdGlvbjogMCwKICAgICAgICBmb3JiaWRDbGljazogdHJ1ZQogICAgICB9KTsKICAgICAgLy8g57uY5Yi26LW35aeL54K5CiAgICAgIHRoaXMuZHJhd1N0YXJ0UG9pbnQoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgdG9hc3QuY2xvc2UoKTsKICAgICAgICAgIFRvYXN0LmluZm8oewogICAgICAgICAgICBtZXNzYWdlOiAn5byA5aeL6K6w5b2VJywKICAgICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgICAgICAgIH0pOwogICAgICAgICAgLy8g6L2u6K+i54q25oCBCiAgICAgICAgICB0aGlzLnBvbGxpbmdGbGFnID0gdHJ1ZTsKICAgICAgICAgIC8vIOaYr+WQpuW8gOWni+iusOW9lQogICAgICAgICAgdGhpcy5pZlJlY29yZGluZyA9IHRydWU7CiAgICAgICAgICAvLyB0aGlzLnN0YXJ0TG9jYXRpb24oKQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0YXJ0UmVjb3JkTGluZXMnLCAnc3RhcnQnKTsKICAgICAgICAgIC8vIOW8gOWni+i9ruivogogICAgICAgICAgdGhpcy5wb2xsaW5nKCk7CiAgICAgICAgICAvLyDorrDlvZXlvIDlp4vlt6Hmo4DnmoTml7bpl7TvvIznlKjkuo7liKTmlq3mmK/lkKblnKjlvIDlp4vlt6Hmo4DnmoQxMHPlhoUKICAgICAgICAgIHRoaXMuc3RhcnRSZWNvcmRUaW1lciA9IG5ldyBEYXRlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFRvYXN0LmVycm9yKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+aOpeWPo+W8guW4uO+8jOaXoOazleW8gOWni+S7u+WKoScsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICBUb2FzdC5lcnJvcih7CiAgICAgICAgICBtZXNzYWdlOiAn572R57uc54q25oCB5byC5bi477yM5q2j5Zyo6YeN6K+VJywKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmRyYXdTdGFydFBvaW50KCk7CiAgICAgICAgfSwgNTAwMCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOe7k+adn+iusOW9lQogICAgZW5kUmVjb3JkKHR5cGUpIHsKICAgICAgbGV0IGRpZmYgPSBNYXRoLmZsb29yKChuZXcgRGF0ZSgpIC0gdGhpcy5zdGFydFJlY29yZFRpbWVyKSAvIDEwMDApOwogICAgICBpZiAoZGlmZiA8PSAxMCkgewogICAgICAgIFRvYXN0LmluZm8oewogICAgICAgICAgbWVzc2FnZTogYOe7k+adn+WkquW/q+S6hizor7ckezEwIC0gZGlmZn3np5LlkI7lho3or5VgLAogICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5lbmRSZWNvcmRDb25maXJtKHR5cGUpOwogICAgfSwKICAgIC8vIOe7k+adn+iusOW9leehruiupAogICAgZW5kUmVjb3JkQ29uZmlybSh0eXBlKSB7CiAgICAgIHRoaXMuZHJhd0VuZFBvaW50KHR5cGUpOwogICAgfSwKICAgIC8vIOe7mOWItue7iOatoueCuQogICAgYXN5bmMgZHJhd0VuZFBvaW50KHR5cGUpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBpZiAodGhhdC5jdXJyZW50UG9zaXRpb24gIT0gbnVsbCkgewogICAgICAgIGxldCBsYXN0UG9pbnQgPSB0aGF0LnRyYWNrUG9pbnRMaXN0W3RoYXQudHJhY2tQb2ludExpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgbGV0IGN1cnJlbnRQb2ludCA9IFt0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUsIHRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlXTsKICAgICAgICBsZXQgZGlzdGFuY2UgPSBOdW1iZXIodGhhdC5HZXREaXN0YW5jZShsYXN0UG9pbnQsIGN1cnJlbnRQb2ludCkpICogMTAwMDsKICAgICAgICBsZXQgdG9hc3QgPSBUb2FzdC5sb2FkaW5nKHsKICAgICAgICAgIG1lc3NhZ2U6ICfnqIvluo/lhbPpl63kuK0nLAogICAgICAgICAgbG9hZGluZ1R5cGU6ICdzcGlubmVyJywKICAgICAgICAgIGR1cmF0aW9uOiAwLAogICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUKICAgICAgICB9KTsKICAgICAgICAvLyDorrDlvZXnu4jmraLngrkKICAgICAgICB0aGF0LnBvc3RUcmFja0RhdGFfUG9pbnQodGhhdC50cmFja1BvaW50TGlzdFt0aGF0LnRyYWNrUG9pbnRMaXN0Lmxlbmd0aCAtIDFdLCB0aGF0LnRyYWNrUG9pbnRUaW1lTGlzdFt0aGF0LnRyYWNrUG9pbnRUaW1lTGlzdC5sZW5ndGggLSAxXSwgZGlzdGFuY2UpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgdG9hc3QuY2xvc2UoKTsKICAgICAgICAgICAgVG9hc3QuaW5mbyh7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ+aaguWBnOaIkOWKnycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIHl1YW5jaHUubG9jYXRpb25BTWFwLnN0b3BSZXF1ZXN0TG9jYXRpb25zKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhhdC50cmFja1BvaW50TGlzdC5wdXNoKFt0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUsIHRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlXSk7CiAgICAgICAgICAgIHRoYXQudHJhY2tQb2ludFRpbWVMaXN0LnB1c2godGhhdC5jdXJyZW50UG9zaXRpb24ubG9jVGltZSk7CiAgICAgICAgICAgIGxldCBqc29uUG9pbnQgPSB7CiAgICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLAogICAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LAogICAgICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgICAgICB0eXBlOiAnUG9pbnQnLAogICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFt0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUsIHRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlXQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgbGV0IGpzb25Qb2ludEZlYXR1cmVDb2xsZWN0aW9uID0gewogICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAgICAgZmVhdHVyZXM6IFtqc29uUG9pbnRdCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChtYXBPYmoubWFwLmdldFNvdXJjZSgnZW5kUG9pbnRTb3VyY2Vfbm93JykpIHsKICAgICAgICAgICAgICBtYXBPYmoubWFwLmdldFNvdXJjZSgnZW5kUG9pbnRTb3VyY2Vfbm93Jykuc2V0RGF0YShqc29uUG9pbnRGZWF0dXJlQ29sbGVjdGlvbik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRTb3VyY2UoJ2VuZFBvaW50U291cmNlX25vdycsIHsKICAgICAgICAgICAgICAgIHR5cGU6ICdnZW9qc29uJywKICAgICAgICAgICAgICAgIGRhdGE6IGpzb25Qb2ludEZlYXR1cmVDb2xsZWN0aW9uCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoJ2VuZFBvaW50TGF5ZXJfbm93JykpIHt9IGVsc2UgewogICAgICAgICAgICAgIG1hcE9iai5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgICAgICAgaWQ6ICdlbmRQb2ludExheWVyX25vdycsCiAgICAgICAgICAgICAgICB0eXBlOiAnY2lyY2xlJywKICAgICAgICAgICAgICAgIHNvdXJjZTogJ2VuZFBvaW50U291cmNlX25vdycsCiAgICAgICAgICAgICAgICBsYXlvdXQ6IHsKICAgICAgICAgICAgICAgICAgJ2NpcmNsZS1zb3J0LWtleSc6IDUsCiAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJwogICAgICAgICAgICAgICAgICAvLyB2aXNpYmlsaXR5OiAibm9uZSIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwYWludDogewogICAgICAgICAgICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IDMsCiAgICAgICAgICAgICAgICAgICdjaXJjbGUtc3Ryb2tlLXdpZHRoJzogNSwKICAgICAgICAgICAgICAgICAgJ2NpcmNsZS1zdHJva2UtY29sb3InOiAnI2FkZGQ1MicsCiAgICAgICAgICAgICAgICAgICdjaXJjbGUtY29sb3InOiAnd2hpdGUnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgJ2luc3BVc2VyTGF5ZXInKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g6KGl5YWFdHJhY2tsaW5lCiAgICAgICAgICAgIGxldCBqc29uTGluZSA9IHsKICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCiAgICAgICAgICAgICAgcHJvcGVydGllczoge30sCiAgICAgICAgICAgICAgZ2VvbWV0cnk6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJywKICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiB0aGF0LnRyYWNrUG9pbnRMaXN0CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQganNvbkxpbmVGZWF0dXJlQ29sbGVjdGlvbiA9IHsKICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgICAgICAgICAgIGZlYXR1cmVzOiBbanNvbkxpbmVdCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChtYXBPYmoubWFwLmdldFNvdXJjZSgndHJhY2tMaW5lU291cmNlX25vdycpKSB7CiAgICAgICAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3RyYWNrTGluZVNvdXJjZV9ub3cnKS5zZXREYXRhKGpzb25MaW5lRmVhdHVyZUNvbGxlY3Rpb24pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1hcE9iai5tYXAuYWRkU291cmNlKCd0cmFja0xpbmVTb3VyY2Vfbm93JywgewogICAgICAgICAgICAgICAgdHlwZTogJ2dlb2pzb24nLAogICAgICAgICAgICAgICAgZGF0YToganNvbkxpbmVGZWF0dXJlQ29sbGVjdGlvbgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtYXBPYmoubWFwLmdldExheWVyKCd0cmFja0xpbmVMYXllcl9ub3cnKSkge30gZWxzZSB7CiAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAgICAgICBpZDogJ3RyYWNrTGluZUxheWVyX25vdycsCiAgICAgICAgICAgICAgICB0eXBlOiAnbGluZScsCiAgICAgICAgICAgICAgICBzb3VyY2U6ICd0cmFja0xpbmVTb3VyY2Vfbm93JywKICAgICAgICAgICAgICAgIGxheW91dDogewogICAgICAgICAgICAgICAgICAnbGluZS1jYXAnOiAncm91bmQnLAogICAgICAgICAgICAgICAgICAnbGluZS1qb2luJzogJ3JvdW5kJywKICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnCiAgICAgICAgICAgICAgICAgIC8vIHZpc2liaWxpdHk6ICJub25lIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICAgICAgICdsaW5lLWNvbG9yJzogJyNhZGRkNTInLAogICAgICAgICAgICAgICAgICAnbGluZS13aWR0aCc6IDUsCiAgICAgICAgICAgICAgICAgICdsaW5lLW9wYWNpdHknOiAwLjgKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCAnaW5zcFVzZXJMYXllcicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOa3u+WKoOe7iOeCueWbvueJhwogICAgICAgICAgICBpZiAobWFwT2JqLm1hcC5nZXRMYXllcignZW5kUG9pbnRfbGFiZWwnKSkge30gZWxzZSB7CiAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAgICAgICBpZDogJ2VuZFBvaW50X2xhYmVsJywKICAgICAgICAgICAgICAgIHR5cGU6ICdzeW1ib2wnLAogICAgICAgICAgICAgICAgc291cmNlOiAnZW5kUG9pbnRTb3VyY2Vfbm93JywKICAgICAgICAgICAgICAgIGxheW91dDogewogICAgICAgICAgICAgICAgICAnc3ltYm9sLXBsYWNlbWVudCc6ICdwb2ludCcsCiAgICAgICAgICAgICAgICAgICdpY29uLWltYWdlJzogJ2VuZF9wb2ludCcsCiAgICAgICAgICAgICAgICAgICdpY29uLXNpemUnOiAwLjYsCiAgICAgICAgICAgICAgICAgICdpY29uLW9mZnNldCc6IFswLCAtMzVdLAogICAgICAgICAgICAgICAgICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgJ3N5bWJvbC1zb3J0LWtleSc6IDIsCiAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJwogICAgICAgICAgICAgICAgICAvLyB2aXNpYmlsaXR5OiAibm9uZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDkuIrkvKDkuYvliY3kuIrkvKDlpLHotKXnmoTngrnkvY0KICAgICAgICAgICAgdGhhdC5yZXBvcnRGYWlsVHJhY2tQb2ludHMubGVuZ3RoID4gMCAmJiB0aGF0LnBvc3RGYWlsVHJhY2tEYXRhKCk7CiAgICAgICAgICAgIHRoYXQuJHJlZnMubXltYXAudXBsb2FkRmlsZWRQaXBlSWRMaXN0Lmxlbmd0aCA+IDAgJiYKICAgICAgICAgICAgLy8gYXBw5re75Yqg566h572R5qOA5ryP6K6w5b2VCiAgICAgICAgICAgIEFwaS5yZWNvcmRJbnNwTGluZSh0aGF0LiRyZWZzLm15bWFwLnVwbG9hZEZpbGVkUGlwZUlkTGlzdCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn566h57q/6KGl5YWF5LiK5Lyg5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICB0aGF0LiRyZWZzLm15bWFwLnVwbG9hZEZpbGVkUGlwZUlkTGlzdCA9IFtdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICh0eXBlID09ICdlbmQnKSB7CiAgICAgICAgICAgICAgdGhpcy5zdGFydE9yRW5kVGFza1JlY29yZCgyKTsgLy8g5bey5beh5qOA54q25oCBICcyJwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMucG9sbGluZ0ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmlmUmVjb3JkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0YXJ0UmVjb3JkTGluZXMnLCAnZW5kJyk7CiAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ3BhdXNlJykgewogICAgICAgICAgICAgICAgVG9hc3Quc3VjY2Vzcyh7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmmoLlgZzmiJDlip8nLAogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyDliLfmlrDku7vliqEKICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFRhc2soKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2xlYXZlJykgewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFRvYXN0LmVycm9yKHsKICAgICAgICAgICAgICBtZXNzYWdlOiB0eXBlID09ICdlbmQnID8gJ+e7k+adn+Wksei0pScgOiAn5pqC5YGc5aSx6LSlJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgdHlwZSA9IHR5cGU7CiAgICAgICAgbGV0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGF0LmRyYXdFbmRQb2ludCh0eXBlKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWIt+aWsOS7u+WKoQogICAgcmVmcmVzaFRhc2soKSB7CiAgICAgIC8vIGxldCBpZHMgPSBbXQogICAgICAvLyB0aGlzLmtleURldGFpbExpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAvLyAgIGlmIChpdGVtLmVuZ0luZm9EVE8pIHsKICAgICAgLy8gICAgIGlkcy5wdXNoKGl0ZW0uZW5nSW5mb0RUTy5lbmdJZCkKICAgICAgLy8gICB9CiAgICAgIC8vIH0pCiAgICAgIC8vIG1hcE9iai5tYXBJbnN0YW5jZSAmJiB0aGlzLiRyZWZzLm15bWFwLnJlbW92ZUtleVBvaW50TWFya2VyKGlkcykKICAgICAgY29uc3QgaWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsZWFrRGV0ZWN0aW9uRGF0YScpKS50YXNrSWQ7CiAgICAgIC8vIOa3u+WKoOS7u+WKoeiMg+WbtOOAgeeuoee6v+WbvuWxggogICAgICB0aGlzLmFkZFRhc2tSYW5nZUFuZExpbmVzKCk7CiAgICAgIC8vIGF3YWl0IHRoaXMuZ2V0QXBwSW5zcERhdGEoaWQpCiAgICB9LAogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyDnirbmgIHvvIgw5pyq5byA5aeLIDHmiafooYzkuK0gMuW3suWujOaIkO+8iQogICAgc3RhcnRPckVuZFRhc2tSZWNvcmQoc3RhdHVzKSB7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIHBsYW5JZDogdGhpcy50YXNrRGV0YWlsLnBsYW5JZCwKICAgICAgICAvLyDorqHliJJpZAogICAgICAgIHRhc2tOYW1lOiB0aGlzLnRhc2tEZXRhaWwudGFza05hbWUsCiAgICAgICAgLy8g5Lu75Yqh5ZCNCiAgICAgICAgdGFza1N0YXR1czogc3RhdHVzLAogICAgICAgIC8vIOeKtuaAge+8iDDmnKrlvIDlp4sgMeaJp+ihjOS4rSAy5bey5a6M5oiQ77yJCiAgICAgICAgaWQ6IHRoaXMudGFza0RldGFpbC5pZCwKICAgICAgICAvLyDku7vliqFpZAogICAgICAgIGV4dDE6IHN0YXR1cyA9PSAyID8gdGhpcy5zdG9wUmVhc29uIDogJycgLy8g57uT5p2f5Y6f5ZugCiAgICAgIH07CiAgICAgIGlmIChzdGF0dXMgPT0gMSkgewogICAgICAgIC8vIOS7u+WKoeW8gOWni+aXtumXtAogICAgICAgIGRhdGEudGFza1N0YXJ0VGltZSA9IHRoaXMuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09IDIpIHsKICAgICAgICAvLyDku7vliqHnu5PmnZ/ml7bpl7QKICAgICAgICBkYXRhLnRhc2tFbmRUaW1lID0gdGhpcy4kZGF5anMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKTsKICAgICAgfQogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIEFwaS5jaGFuZ2VUYXNrU3RhdHVzKGRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN0YXR1cykgewogICAgICAgICAgaWYgKHN0YXR1cyA9PSAyKSB7CiAgICAgICAgICAgIFRvYXN0LnN1Y2Nlc3MoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfnu5PmnZ/miJDlip8nLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICAgIG9uQ2xvc2U6ICgpID0+IHsKICAgICAgICAgICAgICAgIHRoYXQucG9sbGluZ0ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoYXQuaWZSZWNvcmRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIC8vIGJ1cy4kb2ZmKCd1cGRhdGVEYXRhJykKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdGFydFJlY29yZExpbmVzJywgJ2VuZCcpOwogICAgICAgICAgICAgICAgdGhhdC5pc1ZpZXcgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhhdC4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoc3RhdHVzID09IDIpIHsKICAgICAgICAgICAgVG9hc3QuZXJyb3IoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfnu5PmnZ/lpLHotKUsIOato+WcqOmHjeivlScsCiAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBwb3N0RmFpbFRyYWNrRGF0YSgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAvLyBhcHDmt7vliqDkuIrkvKDlpLHotKXngrnnmoTnrqHnvZHmo4DmvI/ovajov7kKICAgICAgYXdhaXQgQXBpLmluc3BlY3Rpb25UcmFjayh0aGF0LnJlcG9ydEZhaWxUcmFja1BvaW50cykudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cykgewogICAgICAgICAgY29uc29sZS5sb2coJ+i9qOi/ueWtmOWCqOaIkOWKnycpOwogICAgICAgICAgdGhhdC5yZXBvcnRGYWlsVHJhY2tQb2ludHMgPSBbXTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ+W3oeajgOi9qOi/ueWtmOWCqOWksei0pe+8micgKyBlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmuIXpmaTnvJPlrZjnmoTovajov7nmlbDmja4KICAgIGNsZWFyQnVmZmVyVHJhY2soKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5pc1Jlc3VtZSA9IHRydWU7CiAgICAgIC8vIOaYr+WQpuW8gOWni+iusOW9lQogICAgICB0aGF0LmlmUmVjb3JkaW5nID0gZmFsc2U7CiAgICAgIC8vIOW9k+WJjeW3oeajgOWRmOaJgOWkhOS9jee9rgogICAgICB0aGF0LmN1cnJlbnRQb3NpdGlvbiA9IG51bGw7CiAgICAgIC8vIOaVsOe7hOW9kumbtgogICAgICAvLyDovajov7nngrkKICAgICAgdGhhdC50cmFja1BvaW50TGlzdCA9IFtdOwogICAgICAvLyDovajov7nml7bpl7QKICAgICAgdGhhdC50cmFja1BvaW50VGltZUxpc3QgPSBbXTsKICAgICAgLy8g6LaF6YCf57q/5q61CiAgICAgIHRoYXQub3ZlclNwZWVkVHJhY2tMaW5lTGlzdCA9IFtdOwogICAgICBwYXVzZVN0YXRlVHJhY2tQb2ludHMgPSBbXTsKICAgICAgcGF1c2VTdGF0ZVBpcGVJZExpc3QgPSBbXTsKICAgICAgLy/mlbDmja7mupDmuIXnqboKICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCd0cmFja0xpbmVTb3VyY2Vfbm93JykpIHsKICAgICAgICBtYXBPYmoubWFwLmdldFNvdXJjZSgndHJhY2tMaW5lU291cmNlX25vdycpLnNldERhdGEoewogICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChtYXBPYmoubWFwLmdldFNvdXJjZSgndHJhY2tMaW5lU291cmNlX292ZXJTcGVlZCcpKSB7CiAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3RyYWNrTGluZVNvdXJjZV9vdmVyU3BlZWQnKS5zZXREYXRhKHsKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAobWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3N0YXJ0UG9pbnRTb3VyY2Vfbm93JykpIHsKICAgICAgICBtYXBPYmoubWFwLmdldFNvdXJjZSgnc3RhcnRQb2ludFNvdXJjZV9ub3cnKS5zZXREYXRhKHsKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICBmZWF0dXJlczogW10KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAobWFwT2JqLm1hcC5nZXRTb3VyY2UoJ2VuZFBvaW50U291cmNlX25vdycpKSB7CiAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ2VuZFBvaW50U291cmNlX25vdycpLnNldERhdGEoewogICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgIGZlYXR1cmVzOiBbXQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8g5re75Yqg6LW354K557uI54K55Zu+54mHCiAgICBhZGRNYXBJbWcoKSB7CiAgICAgIG1hcE9iai5tYXAubG9hZEltYWdlKHJlcXVpcmUoJ0Bhc3NldHMvaW1nL2luc3BlY3Rpb24vd2hpdGVfYXJyb3dfcmlnaHQucG5nJyksIGZ1bmN0aW9uIChlcnJvciwgaW1hZ2UpIHsKICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yOwogICAgICAgIGlmICghbWFwT2JqLm1hcC5oYXNJbWFnZSgnYXJyb3dJY29uJykpIHsKICAgICAgICAgIG1hcE9iai5tYXAuYWRkSW1hZ2UoJ2Fycm93SWNvbicsIGltYWdlLCB7fSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgbWFwT2JqLm1hcC5sb2FkSW1hZ2UocmVxdWlyZSgnQGFzc2V0cy9pbWcvaW5zcGVjdGlvbi9pY29uX3N0YXJ0aW5nX3BvaW50LnBuZycpLCBmdW5jdGlvbiAoZXJyb3IsIGltYWdlKSB7CiAgICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjsKICAgICAgICBpZiAoIW1hcE9iai5tYXAuaGFzSW1hZ2UoJ3N0YXJ0X3BvaW50JykpIHsKICAgICAgICAgIG1hcE9iai5tYXAuYWRkSW1hZ2UoJ3N0YXJ0X3BvaW50JywgaW1hZ2UsIHt9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBtYXBPYmoubWFwLmxvYWRJbWFnZShyZXF1aXJlKCdAYXNzZXRzL2ltZy9pbnNwZWN0aW9uL2ljb25fYXRfZW5kLnBuZycpLCBmdW5jdGlvbiAoZXJyb3IsIGltYWdlKSB7CiAgICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjsKICAgICAgICBpZiAoIW1hcE9iai5tYXAuaGFzSW1hZ2UoJ2VuZF9wb2ludCcpKSB7CiAgICAgICAgICBtYXBPYmoubWFwLmFkZEltYWdlKCdlbmRfcG9pbnQnLCBpbWFnZSwge30pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g57uY5Yi26LW35aeL54K5CiAgICBkcmF3U3RhcnRQb2ludCgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgeXVhbmNodS5sb2NhdGlvbkFNYXAucmVxdWVzdFNpbmdsZUxvY2F0aW9uKFsnMSddLCByZXMgPT4gewogICAgICAgICAgICB0aGF0LmN1cnJlbnRQb3NpdGlvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICAgIC8vIHJlcwogICAgICAgICAgICAvLyB7CiAgICAgICAgICAgIC8vICAgYWNjdXJhY3k6ICcnLC8v5a6a5L2N57K+5bqm77yIQW5kcm9pZOi/lOWbnu+8iQogICAgICAgICAgICAvLyAgIGFkZHJlc3M6ICfmtZnmsZ/nnIHmna3lt57luILkvZnmna3ljLrmmbrmuqLot6/pnaDov5HkuK3lm70o5p2t5beeKeS6uuW3peaZuuiDveWwj+mVhycsLy/vvIjoi6Xor7fmsYLlm57pgIblnLDnkIbkvY3nva7kv6Hmga/liJnov5Tlm57vvIkKICAgICAgICAgICAgLy8gICBsYXRpdHVkZTogJzMwLjI3MDY0Njk3MjY1NjI1MTcnLC8v77yI5b+F6L+U5Zue77yJCiAgICAgICAgICAgIC8vICAgbG9uZ2l0dWRlOiAnMTE5Ljk2NTg2ODA1NTU1NTU2MDUnLC8v77yI5b+F6L+U5Zue77yJCiAgICAgICAgICAgIC8vICAgbG9jVGltZTogJzIwMjItMDMtMDkgMDk6NDU6MTknLC8v77yI5b+F6L+U5Zue77yJCiAgICAgICAgICAgIC8vICAgbG9jVHlwZTogJycsLy/lrprkvY3mqKHlvI/vvIhBbmRyb2lk6L+U5Zue77yJCiAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICAgICAgLi4udGhhdC5jdXJyZW50UG9zaXRpb24KICAgICAgICAgICAgfTsKICAgICAgICAgICAgLy8g6K6+572u5beh5qOA5Lq65ZGY5L2N572u5bm255uR5ZCs6K6+5aSH5peL6L2s5LqL5Lu277yM57uZ5Lq65ZGY5Zu+5qCH5peL6L2s6KeS5bqm6LWL5YC8CiAgICAgICAgICAgIHRoYXQuJHJlZnMubXltYXAuc2V0SW5zcFVzZXJQb3NpdGlvbihwYXJhbSk7CiAgICAgICAgICAgIGlmICh0aGF0LmN1cnJlbnRQb3NpdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgbGV0IHJlY29yZERhdGEgPSBbXTsKICAgICAgICAgICAgICByZWNvcmREYXRhLnB1c2goewogICAgICAgICAgICAgICAgdGFza0lkOiB0aGF0LnRhc2tEZXRhaWwuaWQsCiAgICAgICAgICAgICAgICAvLyDku7vliqFpZAogICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiB0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUsCiAgICAgICAgICAgICAgICBsYXRpdHVkZTogdGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGUsCiAgICAgICAgICAgICAgICBpbnNwVGltZTogdGhhdC5jdXJyZW50UG9zaXRpb24ubG9jVGltZSwKICAgICAgICAgICAgICAgIC8vIOWFt+S9k+W3oeajgOaXtumXtAogICAgICAgICAgICAgICAgZGlzdGFuY2U6IDAsCiAgICAgICAgICAgICAgICAvLyDovajov7nplb/luqYg56ys5LiA5Liq54K56Led56a75Li6MAogICAgICAgICAgICAgICAgaW5zcERhdGU6IHRoYXQuY3VycmVudFBvc2l0aW9uLmxvY1RpbWUsCiAgICAgICAgICAgICAgICAvLyDlt6Hmo4Dml6XmnJ8KICAgICAgICAgICAgICAgIGluc3BlY3RvcjogdGhhdC51c2VySW5mby51c2VyRnVsbE5hbWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAvLyBhcHDmt7vliqDnrqHnvZHmo4DmvI/ovajov7kKICAgICAgICAgICAgICBBcGkuaW5zcGVjdGlvblRyYWNrKHJlY29yZERhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cykgewogICAgICAgICAgICAgICAgICAvLyDkvb/nlKjkuIrmiqXngrnkvY3kvZzkuLrotbfngrkKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+i1t+Wni+eCueWtmOWCqOaIkOWKnycpOwogICAgICAgICAgICAgICAgICB0aGF0LnRyYWNrUG9pbnRMaXN0LnB1c2goW3RoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSwgdGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGVdKTsKICAgICAgICAgICAgICAgICAgdGhhdC50cmFja1BvaW50VGltZUxpc3QucHVzaCh0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb2NUaW1lKTsKICAgICAgICAgICAgICAgICAgbGV0IGpzb25Qb2ludCA9IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge30sCiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCiAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogW3RoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSwgdGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGVdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBsZXQganNvblBvaW50RmVhdHVyZUNvbGxlY3Rpb24gPSB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywKICAgICAgICAgICAgICAgICAgICBmZWF0dXJlczogW2pzb25Qb2ludF0KICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCdzdGFydFBvaW50U291cmNlX25vdycpKSB7CiAgICAgICAgICAgICAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3N0YXJ0UG9pbnRTb3VyY2Vfbm93Jykuc2V0RGF0YShqc29uUG9pbnRGZWF0dXJlQ29sbGVjdGlvbik7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRTb3VyY2UoJ3N0YXJ0UG9pbnRTb3VyY2Vfbm93JywgewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dlb2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgZGF0YToganNvblBvaW50RmVhdHVyZUNvbGxlY3Rpb24KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAobWFwT2JqLm1hcC5nZXRMYXllcignc3RhcnRQb2ludExheWVyX25vdycpKSB7fSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtYXBPYmoubWFwLmFkZExheWVyKHsKICAgICAgICAgICAgICAgICAgICAgIGlkOiAnc3RhcnRQb2ludExheWVyX25vdycsCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2lyY2xlJywKICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ3N0YXJ0UG9pbnRTb3VyY2Vfbm93JywKICAgICAgICAgICAgICAgICAgICAgIGxheW91dDogewogICAgICAgICAgICAgICAgICAgICAgICAnY2lyY2xlLXNvcnQta2V5JzogNSwKICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZpc2liaWxpdHk6ICJub25lIgogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdjaXJjbGUtcmFkaXVzJzogMywKICAgICAgICAgICAgICAgICAgICAgICAgJ2NpcmNsZS1zdHJva2Utd2lkdGgnOiA1LAogICAgICAgICAgICAgICAgICAgICAgICAnY2lyY2xlLXN0cm9rZS1jb2xvcic6ICcjMkE4M0U2JywKICAgICAgICAgICAgICAgICAgICAgICAgJ2NpcmNsZS1jb2xvcic6ICd3aGl0ZScKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAnaW5zcFVzZXJMYXllcicpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoOi1t+eCueWbvueJhwogICAgICAgICAgICAgICAgICBpZiAobWFwT2JqLm1hcC5nZXRMYXllcignc3RhcnRQb2ludF9sYWJlbCcpKSB7fSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtYXBPYmoubWFwLmFkZExheWVyKHsKICAgICAgICAgICAgICAgICAgICAgIGlkOiAnc3RhcnRQb2ludF9sYWJlbCcsCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3ltYm9sJywKICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ3N0YXJ0UG9pbnRTb3VyY2Vfbm93JywKICAgICAgICAgICAgICAgICAgICAgIGxheW91dDogewogICAgICAgICAgICAgICAgICAgICAgICAnc3ltYm9sLXBsYWNlbWVudCc6ICdwb2ludCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdpY29uLWltYWdlJzogJ3N0YXJ0X3BvaW50JywKICAgICAgICAgICAgICAgICAgICAgICAgJ2ljb24tc2l6ZSc6IDAuNiwKICAgICAgICAgICAgICAgICAgICAgICAgJ2ljb24tb2Zmc2V0JzogWzAsIC0zNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAnc3ltYm9sLXNvcnQta2V5JzogMiwKICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZpc2liaWxpdHk6ICJub25lIgogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIGVyciA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDova7or6IgY3VycmVudFBvc2l0aW9u77yM57uY5Yi26L2o6L+557q/CiAgICBwb2xsaW5nKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIC8vIOi9ruivoueKtuaAgQogICAgICBpZiAodGhhdC5wb2xsaW5nRmxhZykgewogICAgICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgeXVhbmNodS5sb2NhdGlvbkFNYXAucmVxdWVzdExvY2F0aW9ucygKICAgICAgICAgIC8vIOW3oeajgOWumuaXtumXtOmalO+8muWNleS9jeenkiAzfjYwIO+8iOW/heWhq+WPguaVsO+8iQogICAgICAgICAgWyczJywgJzEnLCAnMjAnLCAnMTAwJywgJzAnLCB0cnVlXSwgcmVzID0+IHsKICAgICAgICAgICAgLy8gcmVzCiAgICAgICAgICAgIC8vIHsKICAgICAgICAgICAgLy8gICBhY2N1cmFjeTogJycsLy/lrprkvY3nsr7luqbvvIhBbmRyb2lk6L+U5Zue77yJCiAgICAgICAgICAgIC8vICAgYWRkcmVzczogJ+a1meaxn+ecgeadreW3nuW4guS9meadreWMuuaZuua6oui3r+mdoOi/keS4reWbvSjmna3lt54p5Lq65bel5pm66IO95bCP6ZWHJywvL++8iOiLpeivt+axguWbnumAhuWcsOeQhuS9jee9ruS/oeaBr+WImei/lOWbnu+8iQogICAgICAgICAgICAvLyAgIGxhdGl0dWRlOiAnMzAuMjcwNjQ2OTcyNjU2MjUxNycsLy/vvIjlv4Xov5Tlm57vvIkKICAgICAgICAgICAgLy8gICBsb25naXR1ZGU6ICcxMTkuOTY1ODY4MDU1NTU1NTYwNScsLy/vvIjlv4Xov5Tlm57vvIkKICAgICAgICAgICAgLy8gICBsb2NUaW1lOiAnMjAyMi0wMy0wOSAwOTo0NToxOScsLy/vvIjlv4Xov5Tlm57vvIkKICAgICAgICAgICAgLy8gICBsb2NUeXBlOiAnJywvL+WumuS9jeaooeW8j++8iEFuZHJvaWTov5Tlm57vvIkKICAgICAgICAgICAgLy8gfQogICAgICAgICAgICB0aGF0LmN1cnJlbnRQb3NpdGlvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICAgIC8vIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgdGhhdC5jdXJyZW50UG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHRoYXQuY3VycmVudFBvc2l0aW9uLCB7CiAgICAgICAgICAgICAgZGlyZWN0aW9uOiAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyDov4fmu6TnvJPlrZjlrprkvY3mlbDmja4KICAgICAgICAgICAgaWYgKHRoYXQuY3VycmVudFBvc2l0aW9uLmxvY1R5cGUgIT0gJ1NBTUVfUkVRJyAmJiB0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb2NUeXBlICE9ICdGSVhfQ0FDSEUnKSB7CiAgICAgICAgICAgICAgbGV0IGxhc3RQb2ludCA9IHRoYXQudHJhY2tQb2ludExpc3RbdGhhdC50cmFja1BvaW50TGlzdC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICBsZXQgY3VycmVudFBvaW50ID0gW3RoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSwgdGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGVdOwogICAgICAgICAgICAgIC8vIOiuoeeul+i1t+eCuee7iOeCuei3neemuwogICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE51bWJlcih0aGF0LkdldERpc3RhbmNlKGxhc3RQb2ludCwgY3VycmVudFBvaW50KSkgKiAxMDAwOwoKICAgICAgICAgICAgICAvLyDorrDlvZXov4fnqIvngrkKICAgICAgICAgICAgICB0aGF0LnBvc3RUcmFja0RhdGFfUG9pbnQoCiAgICAgICAgICAgICAgLy8g5pyA5ZCO5LiA5Liq54K577yM5pyA5ZCO5LiA5Liq54K55a+55bqU55qE5pe26Ze077yM5pyA5ZCO5Lik54K55LmL6Ze055qE6Led56a7CiAgICAgICAgICAgICAgdGhhdC50cmFja1BvaW50TGlzdFt0aGF0LnRyYWNrUG9pbnRMaXN0Lmxlbmd0aCAtIDFdLCB0aGF0LnRyYWNrUG9pbnRUaW1lTGlzdFt0aGF0LnRyYWNrUG9pbnRUaW1lTGlzdC5sZW5ndGggLSAxXSwgZGlzdGFuY2UpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICAgICAgLy8g6L2o6L+554K55pWw57uE5a2Y5YKo5b2T5YmN5a6a5L2N54K5CiAgICAgICAgICAgICAgICAgIHRoYXQudHJhY2tQb2ludExpc3QucHVzaChbdGhhdC5jdXJyZW50UG9zaXRpb24ubG9uZ2l0dWRlLCB0aGF0LmN1cnJlbnRQb3NpdGlvbi5sYXRpdHVkZV0pOwogICAgICAgICAgICAgICAgICAvLyDovajov7nngrnlr7nlupTml7bpl7TmlbDnu4TlrZjlgqjlvZPliY3lrprkvY3ngrnml7bpl7QKICAgICAgICAgICAgICAgICAgdGhhdC50cmFja1BvaW50VGltZUxpc3QucHVzaCh0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb2NUaW1lKTsKCiAgICAgICAgICAgICAgICAgIC8vIOW3oeajgOS6uuWRmOWbvuagh+S9jee9ruabtOaWsAogICAgICAgICAgICAgICAgICBjb25zdCBjb29yZCA9IFtwYXJzZUZsb2F0KHRoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSksIHBhcnNlRmxvYXQodGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGUpXTsKICAgICAgICAgICAgICAgICAgY29uc3QgcG9pbnQgPSB0dXJmLnBvaW50KGNvb3JkKTsKICAgICAgICAgICAgICAgICAgbWFwT2JqLm1hcEluc3RhbmNlLnNldFNvdXJjZURhdGEoJ2luc3BVc2VyJywgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXM6IFtwb2ludF0KICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAvLyDovajov7nngrnmlbDnu4TmnoTpgKDkuLTml7bnur/lm77lsYIKICAgICAgICAgICAgICAgICAgbGV0IGpzb25MaW5lID0gewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSwKICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLAogICAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHRoYXQudHJhY2tQb2ludExpc3QKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGxldCBqc29uTGluZUZlYXR1cmVDb2xsZWN0aW9uID0gewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsCiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXM6IFtqc29uTGluZV0KICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCd0cmFja0xpbmVTb3VyY2Vfbm93JykpIHsKICAgICAgICAgICAgICAgICAgICBtYXBPYmoubWFwLmdldFNvdXJjZSgndHJhY2tMaW5lU291cmNlX25vdycpLnNldERhdGEoanNvbkxpbmVGZWF0dXJlQ29sbGVjdGlvbik7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWFwT2JqLm1hcC5hZGRTb3VyY2UoJ3RyYWNrTGluZVNvdXJjZV9ub3cnLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBqc29uTGluZUZlYXR1cmVDb2xsZWN0aW9uCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoJ3RyYWNrTGluZUxheWVyX25vdycpKSB7fSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtYXBPYmoubWFwLmFkZExheWVyKHsKICAgICAgICAgICAgICAgICAgICAgIGlkOiAndHJhY2tMaW5lTGF5ZXJfbm93JywKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ3RyYWNrTGluZVNvdXJjZV9ub3cnLAogICAgICAgICAgICAgICAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdsaW5lLWNhcCc6ICdyb3VuZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdsaW5lLWpvaW4nOiAncm91bmQnLAogICAgICAgICAgICAgICAgICAgICAgICAnbGluZS1zb3J0LWtleSc6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJwogICAgICAgICAgICAgICAgICAgICAgICAvLyB2aXNpYmlsaXR5OiAibm9uZSIKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBwYWludDogewogICAgICAgICAgICAgICAgICAgICAgICAnbGluZS1jb2xvcic6ICcjYWRkZDUyJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2xpbmUtd2lkdGgnOiA1LAogICAgICAgICAgICAgICAgICAgICAgICAnbGluZS1vcGFjaXR5JzogMC44CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgJ2luc3BVc2VyTGF5ZXInKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAvLyDlj7Pnrq3lpLTlm77moIcKICAgICAgICAgICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0TGF5ZXIoJ3RyYWNrTGluZUxheWVyX2Fycm93JykpIHt9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG1hcE9iai5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgICAgICAgICAgICAgaWQ6ICd0cmFja0xpbmVMYXllcl9hcnJvdycsCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3ltYm9sJywKICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ3RyYWNrTGluZVNvdXJjZV9ub3cnLAogICAgICAgICAgICAgICAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdzeW1ib2wtcGxhY2VtZW50JzogJ2xpbmUnLAogICAgICAgICAgICAgICAgICAgICAgICAnc3ltYm9sLXNwYWNpbmcnOiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgJ2ljb24taW1hZ2UnOiAnYXJyb3dJY29uJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2ljb24tc2l6ZSc6IDAuNSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2ljb24tYWxsb3ctb3ZlcmxhcCc6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICdzeW1ib2wtc29ydC1rZXknOiAzLAogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZScKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAnaW5zcFVzZXJMYXllcicpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIC8vIOaUueWPmOeuoee6v+minOiJsgogICAgICAgICAgICAgICAgICB0aGF0LmNoYW5nZUluc3BMaW5lU291cmNlQnlTcGVlZCh0aGF0LmN1cnJlbnRQb3NpdGlvbik7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gewogICAgICAgICAgICAgICAgICAgIC4uLnRoYXQuY3VycmVudFBvc2l0aW9uCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIHRoYXQuJHJlZnMubXltYXAuc2V0SW5zcFVzZXJQb3NpdGlvbihwYXJhbSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gfSwgMzAwMCkKICAgICAgICAgIH0sIGVyciA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCflrprkvY3lpLHotKXvvIzplJnor6/ljp/lm6AnLCBlcnIpOwogICAgICAgICAgICAvLyBUb2FzdC5lcnJvcih7CiAgICAgICAgICAgIC8vICAgbWVzc2FnZTogJ2VycicgKyBlcnIsCiAgICAgICAgICAgIC8vICAgZHVyYXRpb246IDIwMDAsCiAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLy8gdGhpcy51cGxvYWRJbnNwUm91dGUoKQogICAgICB9CiAgICB9LAogICAgR2V0RGlzdGFuY2UoY29vcmRBcnJheTEsIGNvb3JkQXJyYXkyKSB7CiAgICAgIGxldCBsbmcxID0gY29vcmRBcnJheTFbMF07CiAgICAgIGxldCBsYXQxID0gY29vcmRBcnJheTFbMV07CiAgICAgIGxldCBsbmcyID0gY29vcmRBcnJheTJbMF07CiAgICAgIGxldCBsYXQyID0gY29vcmRBcnJheTJbMV07CiAgICAgIGxldCByYWRMYXQxID0gbGF0MSAqIE1hdGguUEkgLyAxODAuMDsKICAgICAgbGV0IHJhZExhdDIgPSBsYXQyICogTWF0aC5QSSAvIDE4MC4wOwogICAgICBsZXQgYSA9IHJhZExhdDEgLSByYWRMYXQyOwogICAgICBsZXQgYiA9IGxuZzEgKiBNYXRoLlBJIC8gMTgwLjAgLSBsbmcyICogTWF0aC5QSSAvIDE4MC4wOwogICAgICBsZXQgcyA9IDIgKiBNYXRoLmFzaW4oTWF0aC5zcXJ0KE1hdGgucG93KE1hdGguc2luKGEgLyAyKSwgMikgKyBNYXRoLmNvcyhyYWRMYXQxKSAqIE1hdGguY29zKHJhZExhdDIpICogTWF0aC5wb3coTWF0aC5zaW4oYiAvIDIpLCAyKSkpOwogICAgICBzID0gcyAqIDYzNzguMTM3OyAvLyBFQVJUSF9SQURJVVM7CiAgICAgIHMgPSBNYXRoLnJvdW5kKHMgKiAxMDAwMCkgLyAxMDAwMDsKICAgICAgcmV0dXJuIHM7CiAgICB9LAogICAgLy8g5Y2V54K5LeWQjuerr+iusOW9lei9qOi/ueaVsOaNrgogICAgcG9zdFRyYWNrRGF0YV9Qb2ludChwb2ludERhdGEsIHRpbWVEYXRhLCBkaXN0YW5jZSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IHBvaW50RGF0YS5sZW5ndGg7IHArKykgewogICAgICAgICAgcG9pbnREYXRhW3BdID0gTnVtYmVyKHBvaW50RGF0YVtwXSk7CiAgICAgICAgfQogICAgICAgIGxldCBkYXRlX25vdyA9IGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7CiAgICAgICAgbGV0IHJlY29yZERhdGEgPSBbXTsKICAgICAgICByZWNvcmREYXRhLnB1c2goewogICAgICAgICAgdGFza0lkOiB0aGF0LnRhc2tEZXRhaWwuaWQsCiAgICAgICAgICBpbnNwRGF0ZTogdGltZURhdGEsCiAgICAgICAgICAvLyDlt6Hmo4Dml6XmnJ8KICAgICAgICAgIGluc3BUaW1lOiBkYXRlX25vdywKICAgICAgICAgIC8vIOWFt+S9k+W3oeajgOaXtumXtAogICAgICAgICAgZGlzdGFuY2UsCiAgICAgICAgICAvLyDovajov7nplb/luqYKICAgICAgICAgIGluc3BlY3RvcjogdGhhdC51c2VySW5mby51c2VyRnVsbG5hbWUsCiAgICAgICAgICAvLyDlt6Hmo4DlkZgKICAgICAgICAgIGxvbmdpdHVkZTogcG9pbnREYXRhWzBdLAogICAgICAgICAgbGF0aXR1ZGU6IHBvaW50RGF0YVsxXQogICAgICAgIH0pOwogICAgICAgIGlmICh0aGF0LmlzUmVzdW1lKSB7CiAgICAgICAgICAvLyBhcHDmt7vliqDnrqHnvZHmo4DmvI/ovajov7kKICAgICAgICAgIGF3YWl0IEFwaS5pbnNwZWN0aW9uVHJhY2socmVjb3JkRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6L2o6L+55a2Y5YKo5oiQ5YqfJywgcmVjb3JkRGF0YSk7CiAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDkuIrkvKDlpLHotKXnmoTngrnkvY3vvIzmmoLml7blrZjlnKhhcHDnq68KICAgICAgICAgICAgICB0aGF0LnJlcG9ydEZhaWxUcmFja1BvaW50cy5wdXNoKHJlY29yZERhdGEpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGF0LnJlcG9ydEZhaWxUcmFja1BvaW50czogJywgdGhhdC5yZXBvcnRGYWlsVHJhY2tQb2ludHMpOwogICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcGF1c2VTdGF0ZVRyYWNrUG9pbnRzLnB1c2goLi4ucmVjb3JkRGF0YSk7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5byA5aeL5a6a5L2NCiAgICBzdGFydExvY2F0aW9uKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHl1YW5jaHUubG9jYXRpb25BTWFwLnJlcXVlc3RTaW5nbGVMb2NhdGlvbihbJzEnXSwgcmVzID0+IHsKICAgICAgICB0aGF0LmN1cnJlbnRQb3NpdGlvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICAuLi50aGF0LmN1cnJlbnRQb3NpdGlvbgogICAgICAgIH07CiAgICAgICAgdGhhdC4kcmVmcy5teW1hcC5zZXRJbnNwVXNlclBvc2l0aW9uKHBhcmFtKTsKICAgICAgICBpZiAoIXRoYXQuY3VycmVudFBvc2l0aW9uIHx8ICF0aGF0LmN1cnJlbnRQb3NpdGlvbi5sb25naXR1ZGUgfHwgIXRoYXQuY3VycmVudFBvc2l0aW9uLmxhdGl0dWRlKSB7CiAgICAgICAgICBUb2FzdC5lcnJvcih7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfojrflj5bkvY3nva7lpLHotKUhJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBjb29yZCA9IFtwYXJzZUZsb2F0KHRoYXQuY3VycmVudFBvc2l0aW9uLmxvbmdpdHVkZSksIHBhcnNlRmxvYXQodGhhdC5jdXJyZW50UG9zaXRpb24ubGF0aXR1ZGUpXTsKICAgICAgICAgIHRoYXQuZmx5VG9Qb2ludChjb29yZCk7CiAgICAgICAgfQogICAgICB9LCBlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlt6Hmo4DkurrlkZjlrprkvY0KICAgIGZseVRvUG9pbnQobG5nbGF0KSB7CiAgICAgIG1hcE9iai5tYXAuZmx5VG8oewogICAgICAgIGNlbnRlcjogbG5nbGF0LAogICAgICAgIHpvb206IDE3LjUKICAgICAgfSk7CiAgICB9LAogICAgLy8g57uT5p2f5Lu75YqhCiAgICBhc3luYyBlbmRUYXNrKCkgewogICAgICBpZiAodGhpcy5pc1ZpZXcpIHsKICAgICAgICBUb2FzdCh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+l5beh5qOA5Lu75Yqh5bey57uT5p2fJywKICAgICAgICAgIGR1cmF0aW9uOiAxNTAwCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIGJ1cy4kb2ZmKCd1cGRhdGVEYXRhJykKICAgICAgLy8g5re75Yqg5Lu75Yqh6IyD5Zu044CB566h57q/5Zu+5bGCCiAgICAgIGF3YWl0IHRoaXMuYWRkVGFza1JhbmdlQW5kTGluZXMoKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdmFyIF90aGlzJHRhc2tEZXRhaWwsIF90aGlzJHRhc2tEZXRhaWwyOwogICAgICAgIGxldCBoYXNJbnNwS3AgPSAoKF90aGlzJHRhc2tEZXRhaWwgPSB0aGlzLnRhc2tEZXRhaWwpID09PSBudWxsIHx8IF90aGlzJHRhc2tEZXRhaWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHRhc2tEZXRhaWwuY29tcGxldGlvbi5zcGxpdCgnfCcpWzBdKSB8fCAwOwogICAgICAgIGxldCBhbGxJbnNwS3AgPSAoKF90aGlzJHRhc2tEZXRhaWwyID0gdGhpcy50YXNrRGV0YWlsKSA9PT0gbnVsbCB8fCBfdGhpcyR0YXNrRGV0YWlsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdGFza0RldGFpbDIuY29tcGxldGlvbi5zcGxpdCgnfCcpWzFdKSB8fCAwOwogICAgICAgIGlmIChhbGxJbnNwS3AgLSBoYXNJbnNwS3AgPT0gMCAmJiB0aGlzLnRhc2tEZXRhaWwuY292ZXJhZ2UuaW5jbHVkZXMoJzEwMCcpKSB7CiAgICAgICAgICB0aGlzLmVuZFJlY29yZENvbmZpcm0oJ2VuZCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDnu5PmnZ/ku7vliqHml7bliKTmlq3mmK/lkKblt7Lnu4/lrozmiJDlt6Hmo4DvvIzlpoLmnpzmsqHlrozmiJDlsLHmj5DnpLrmmK/lkKbpgIDlh7oKICAgICAgICAgIHRoaXMuaWZFbmRUYXNrID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0sIDEwMCk7CiAgICB9LAogICAgLy8g57un57ut5Lu75YqhCiAgICBjb250aW51ZVRhc2soKSB7CiAgICAgIHRoaXMuc3RvcFJlYXNvbiA9ICcnOwogICAgICB0aGlzLmlmRW5kVGFzayA9IGZhbHNlOwogICAgfSwKICAgIC8vIOS4reatouS7u+WKoQogICAgc3RvcFRhc2soKSB7CiAgICAgIGlmICh0aGlzLnN0b3BSZWFzb24gPT0gJycpIHsKICAgICAgICBUb2FzdC53YXJuaW5nKHsKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnu4jmraLljp/lm6AnLAogICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5pZkVuZFRhc2sgPSBmYWxzZTsKICAgICAgdGhpcy5lbmRSZWNvcmRDb25maXJtKCdlbmQnKTsKICAgIH0sCiAgICAvLyDmo4DmvI/lt6XljZXov5vlhaXor6bmg4XpobUKICAgIHRvRGV0YWlsUGFuZWwoY2FyZERldGFpbCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0xlYWtEZXRlY3Rpb25Gb3JtJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IGNhcmREZXRhaWwuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIFRvYXN0LmNsZWFyKCk7CiAgICB0aGlzLnBvbGxpbmdGbGFnID0gZmFsc2U7CiAgICB0aGlzLmNsZWFyQnVmZmVyVHJhY2soKTsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgdGhpcy5wYXVzZSk7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXN1bWUnLCB0aGlzLnJlc3VtZSk7CiAgICBpZiAodHlwZW9mIHl1YW5jaHUgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgeXVhbmNodS5sb2NhdGlvbkFNYXAuc3RvcFJlcXVlc3RMb2NhdGlvbnMoKTsKICAgIH0KICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzdGFydFJlY29yZExpbmVzJyk7CiAgfQp9Ow=="},{"version":3,"names":["Vue","axios","Api","bus","ENUM","turf","bbox","center","getCenter","_cloneDeep","addIconToMap","mapboxgl","Toast","Dialog","Notify","MapComp","mixins","dayjs","request","LeakReportCardInfo","Popup","PopupItem","extend","mapObj","map","mapInstance","pauseStateTrackPoints","pauseStatePipeIdList","name","components","data","isResume","icons","url","require","taskDetail","userInfo","allTaskLines","currentPosition","ifRecording","pollingFlag","isView","isInspectorLoad","isOnLoad","trackPointList","trackPointTimeList","overSpeedTrackLineList","startRecordTimer","reportFailTrackPoints","showPopover","ifTips","actions","text","accessToken","$storage","get","formToken","header","reportDataIsLoaded","problemDataList","reportShow","active","ifEndTask","stopReason","ifLeaveTask","created","console","log","JSON","parse","localStorage","getItem","nowClickTask","$store","state","userName","inspector","userFullname","inspectorFullName","mounted","document","addEventListener","pause","resume","setItem","methods","deepClone","stringify","length","upLoadPauseStateTrackPoints","upLoadPauseStatePipeIdList","inspectionTrack","then","res","status","splice","push","catch","err","setTimeout","that","recordInspLine","getInspLeakTaskDetail","id","taskId","$refs","mymap","uploadFiledPipeIdList","getRestTime","time","Date","getTime","changeToRate","coverage","mapLoaded","addMapImg","addSourceLayer","setLayoutProperty","addTaskRangeAndLines","getProblemDataList","yuanchu","locationAMap","requestSingleLocation","param","setInspUserPosition","changeInspLineSourceBySpeed","position","coord","parseFloat","longitude","latitude","point","timer","setInterval","getSource","isSourceLoaded","clearInterval","buffered","buffer","unit","changeInspLineState","e","geometry","geoTransToPixel","geom","polygonBox","southWest","northEast","southWestPointPixel","project","northEastPointPixel","x","y","chunk","boxFeatures","queryRenderedFeatures","layers","tempPipeList","forEach","feat","result","booleanDisjoint","isInsp","setFeatureState","source","it","pipeId","includes","date","$dayjs","format","portalId","inspDate","ext3","pipeLength","properties","error","cb","features","shift","resData1","taskType","setDetectionRangeData","resData2","getHasInspLeakPipe","page","size","hasInspPipe","records","item","params","bizType","devType","geomStr","pageNum","pageSize","getAllLeakLines","list","type","setData","addSource","addLayer","paint","range","polygon","coordinates","fitBounds","padding","top","bottom","left","right","cancelLeave","confirmLeave","endRecord","goBackToTask","$router","go","process","env","VUE_APP_THIRD_REQUEST_URL","method","token","headers","Authorization","resultData","sysCode","extParam","current","typeList","_res$data","addYourLayer","pointList","sourceData","i","ll","formValue","ticketAddress","lng","lat","layout","visibility","reportClick","loading","message","loadingType","duration","handleClose","onSelect","val","on","selectReportPoint","propertiesArr","filter","layer","oneProperties","pop","marker","src","currentEle","getElementById","parentNode","removeChild","ele","createElement","innerHTML","newMarker","element","setLngLat","lngLat","setPopup","newPopup","offset","closeButton","setHTML","addTo","propsData","deviceCode","start_code","fun","goToDetail","isDevice","$nextTick","$mount","togglePopup","that_","query","goToDetailLngLat","startInspRecord","warning","isNew","taskStatus","startOrEndTaskRecord","clearBufferTrack","toast","forbidClick","drawStartPoint","close","info","polling","diff","Math","floor","endRecordConfirm","drawEndPoint","lastPoint","currentPoint","distance","Number","GetDistance","postTrackData_Point","stopRequestLocations","locTime","jsonPoint","jsonPointFeatureCollection","getLayer","jsonLine","jsonLineFeatureCollection","postFailTrackData","success","refreshTask","planId","taskName","ext1","taskStartTime","taskEndTime","changeTaskStatus","onClose","loadImage","image","hasImage","addImage","Promise","resolve","reject","recordData","inspTime","userFullName","requestLocations","Object","assign","direction","locType","setSourceData","coordArray1","coordArray2","lng1","lat1","lng2","lat2","radLat1","PI","radLat2","a","b","s","asin","sqrt","pow","sin","cos","round","pointData","timeData","p","date_now","startLocation","flyToPoint","lnglat","flyTo","zoom","endTask","_this$taskDetail","_this$taskDetail2","hasInspKp","completion","split","allInspKp","continueTask","stopTask","toDetailPanel","cardDetail","beforeDestroy","clear","removeEventListener","removeItem"],"sources":["src/views/PipeNetLeakDetection/LeakDetectionMapPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"MapPage\">\r\n    <fm-nav-bar\r\n      left-arrow\r\n      :title=\"taskDetail.taskName\"\r\n      @click-left=\"goBackToTask\"\r\n      @click-right=\"onSelect\"\r\n    >\r\n      <template #right>\r\n        <template>\r\n          <i\r\n            v-if=\"!isView && isInspectorLoad\"\r\n            class=\"fm-icon fm-icon-plus\"\r\n            style=\"font-size: 18px\"\r\n          ></i>\r\n        </template>\r\n      </template>\r\n    </fm-nav-bar>\r\n    <!-- 地图 -->\r\n    <div class=\"mapContainer\">\r\n      <MapComp ref=\"mymap\" :ifInspection=\"true\" @mapLoaded=\"mapLoaded\"></MapComp>\r\n    </div>\r\n    <!-- 开始记录与结束记录 -->\r\n    <div class=\"start-record\" v-if=\"!isView && isInspectorLoad\">\r\n      <img\r\n        v-if=\"!ifRecording\"\r\n        :src=\"require('@/assets/img/inspection/暂停.png')\"\r\n        @click=\"startInspRecord\"\r\n      />\r\n      <img v-else :src=\"require('@/assets/img/inspection/开始.png')\" @click=\"endRecord('pause')\" />\r\n    </div>\r\n    <!-- 数据面板 -->\r\n    <!-- 非查看状态 -->\r\n    <div class=\"controlCard\" v-if=\"!isView && isInspectorLoad\">\r\n      <div class=\"controlContent\">\r\n        <div class=\"infoContent\">\r\n          <div class=\"endControl\">\r\n            <div class=\"leftText\">\r\n              <img :src=\"require('@/assets/img/inspection/剩余时间.png')\" />\r\n              <fm-count-down\r\n                style=\"margin: auto\"\r\n                :time=\"getRestTime(taskDetail.taskEndTime)\"\r\n                format=\"DD天HH小时\"\r\n              />\r\n            </div>\r\n            <div class=\"rightButton\">\r\n              <fm-button v-show=\"ifRecording\" class=\"endBtn\" round @click=\"endTask\">结束</fm-button>\r\n            </div>\r\n          </div>\r\n          <div class=\"bottomSide\">\r\n            <div class=\"block\">\r\n              <div class=\"rate\" style=\"font-size: 18px\">\r\n                <div class=\"centerStyle\">\r\n                  {{ changeToRate(taskDetail.coverage) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"nameStyle\" style=\"font-size: 14px\">覆盖率</div>\r\n            </div>\r\n            <div class=\"block\" @click=\"reportClick\" style=\"cursor: pointer\">\r\n              <div class=\"rate\" style=\"font-size: 18px\">\r\n                <div class=\"centerStyle\">\r\n                  {{ problemDataList.length }}\r\n                </div>\r\n              </div>\r\n              <div class=\"nameStyle\" style=\"font-size: 14px\">上报泄漏点</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 查看状态 -->\r\n    <div class=\"viewCard\" v-if=\"isView || !isInspectorLoad\">\r\n      <div class=\"controlContent\">\r\n        <div class=\"infoContent\">\r\n          <div class=\"bottomSide\">\r\n            <div class=\"block\">\r\n              <div class=\"rate\" style=\"font-size: 18px\">\r\n                <div class=\"centerStyle\">\r\n                  {{ changeToRate(taskDetail.coverage) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"nameStyle\" style=\"font-size: 14px\">覆盖率</div>\r\n            </div>\r\n            <div class=\"block\" @click=\"reportClick\" style=\"cursor: pointer\">\r\n              <div class=\"rate\" style=\"font-size: 18px\">\r\n                <div class=\"centerStyle\">\r\n                  {{ problemDataList.length }}\r\n                </div>\r\n              </div>\r\n              <div class=\"nameStyle\" style=\"font-size: 14px\">上报泄漏点</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 轨迹显示与定位功能 -->\r\n    <div class=\"tool-box\">\r\n      <!-- 地图旋转、俯视角度重置 -->\r\n      <!-- <div class=\"refresh\" @click=\"resetMapView\">\r\n        <fm-image class=\"refresh-image\" :src=\"require('@/assets/img/inspection/reset.png')\"></fm-image>\r\n      </div>\r\n      <div class=\"route\" @click=\"showRoute\">\r\n        <fm-image\r\n          v-if=\"isShowRoute\"\r\n          class=\"route-image\"\r\n          :src=\"require('@/assets/img/inspection/route2.png')\"\r\n        ></fm-image>\r\n        <fm-image v-else class=\"route-image\" :src=\"require('@/assets/img/inspection/route.png')\"></fm-image>\r\n      </div> -->\r\n      <div class=\"location\" @click=\"startLocation\">\r\n        <fm-image\r\n          class=\"location-image\"\r\n          :src=\"require('@/assets/img/inspection/location.png')\"\r\n        ></fm-image>\r\n      </div>\r\n    </div>\r\n    <fm-popup\r\n      :visible.sync=\"reportShow\"\r\n      @close=\"handleClose\"\r\n      round\r\n      position=\"bottom\"\r\n      :overlay-style=\"{ background: 'rgba(0, 0, 0, 0.1)' }\"\r\n      :style=\"{ height: '50%' }\"\r\n    >\r\n      <fm-tabs v-model=\"active\" swipeable style=\"height: 100%\">\r\n        <fm-tab label=\"\">\r\n          <div v-for=\"(item, index) in problemDataList\" :key=\"index\">\r\n            <LeakReportCardInfo\r\n              :cardInfo=\"item\"\r\n              @toDetailPanel=\"toDetailPanel\"\r\n              @flyToPoint=\"flyToPoint\"\r\n            >\r\n            </LeakReportCardInfo>\r\n          </div>\r\n        </fm-tab>\r\n      </fm-tabs>\r\n    </fm-popup>\r\n    <!-- 提示层 -->\r\n    <div v-show=\"ifTips\" class=\"tip-tools\">\r\n      <img :src=\"require('@/assets/img/tips.png')\" class=\"tipImg\" />\r\n      <div class=\"context\">请在地图上选择泄漏管线</div>\r\n    </div>\r\n    <fm-overlay :show=\"ifEndTask\" z-index=\"4\">\r\n      <div class=\"confirm-tip\">\r\n        <div class=\"content\">\r\n          <div class=\"icon\">\r\n            <img\r\n              :src=\"require('@/assets/img/inspection/终止.png')\"\r\n              width=\"60\"\r\n              style=\"margin: auto\"\r\n            />\r\n          </div>\r\n          <!-- 结束任务时判断是否已经完成巡检，如果没完成就提示是否退出 -->\r\n          <div class=\"info\">\r\n            <span>{{ `确定提前中止巡检任务？` }}</span>\r\n          </div>\r\n          <div class=\"input\">\r\n            <fm-field\r\n              v-model=\"stopReason\"\r\n              placeholder=\"请输入终止原因\"\r\n              rows=\"3\"\r\n              autosize\r\n              type=\"textarea\"\r\n              maxlength=\"200\"\r\n              show-word-limit\r\n            ></fm-field>\r\n          </div>\r\n        </div>\r\n        <div class=\"confirm_btn\">\r\n          <div class=\"btn1 btn2\" @click=\"continueTask\">继续任务</div>\r\n          <div class=\"btn1\" @click=\"stopTask\">中止任务</div>\r\n        </div>\r\n      </div>\r\n    </fm-overlay>\r\n    <fm-overlay :show=\"ifLeaveTask\" z-index=\"4\">\r\n      <!-- 当前正在巡检中时，返回任务页时提示是否离开该任务 -->\r\n      <div class=\"confirm-tip\" style=\"height: 29%\">\r\n        <div class=\"content\">\r\n          <div class=\"icon\">\r\n            <img\r\n              :src=\"require('@/assets/img/inspection/终止.png')\"\r\n              width=\"60\"\r\n              style=\"margin: auto\"\r\n            />\r\n          </div>\r\n          <div class=\"info\">\r\n            <span>{{ `当前为测漏状态，继续退出会暂停测漏，请确定是否退出？` }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"confirm_btn\">\r\n          <div class=\"btn1 btn2\" @click=\"cancelLeave\">取消</div>\r\n          <div class=\"btn1\" @click=\"confirmLeave\">退出</div>\r\n        </div>\r\n      </div>\r\n    </fm-overlay>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport * as Api from './api'\r\nimport bus from '@/utils/bus'\r\nimport { ENUM } from '@/store/State/stateTypes'\r\nimport * as turf from '@turf/turf'\r\nimport { bbox, center as getCenter } from '@turf/turf'\r\nimport _cloneDeep from 'lodash/cloneDeep'\r\nimport { addIconToMap } from '@/utils/mapUtils'\r\nimport mapboxgl from 'mapbox-gl'\r\nimport { Toast, Dialog, Notify } from 'fawkes-mobile-lib'\r\nimport MapComp from '@/views/inspectMap/index.vue'\r\nimport mixins from '@/views/inspectMap/mixins/mixins.js'\r\nimport dayjs from 'dayjs'\r\nimport request from '@/utils/request'\r\nimport LeakReportCardInfo from './LeakReportCardInfo'\r\nimport Popup from './Popup.vue'\r\nconst PopupItem = Vue.extend(Popup)\r\n\r\nconst mapObj = {\r\n  map: null,\r\n  mapInstance: null,\r\n}\r\nlet pauseStateTrackPoints = []\r\nlet pauseStatePipeIdList = []\r\nexport default {\r\n  name: '',\r\n  mixins: [mixins],\r\n  components: {\r\n    MapComp,\r\n    LeakReportCardInfo,\r\n  },\r\n  data() {\r\n    return {\r\n      isResume: true,\r\n      // 添加至地图的图片\r\n      icons: [\r\n        {\r\n          name: '泄漏点',\r\n          url: require('@/assets/img/map/泄漏点.png'),\r\n        },\r\n      ],\r\n      // 当前点击的任务\r\n      taskDetail: {},\r\n      // 巡检员信息\r\n      userInfo: {},\r\n      // 巡检任务下所有巡检管线\r\n      allTaskLines: [],\r\n      // 当前巡检员所处位置\r\n      currentPosition: null,\r\n      // 是否开始记录\r\n      ifRecording: false,\r\n      // 轮询状态\r\n      pollingFlag: false,\r\n      // 是否为查看状态\r\n      isView: false,\r\n      // 是否为巡检员登陆，true为巡检员登录\r\n      isInspectorLoad: true,\r\n      isOnLoad: false,\r\n      // 轨迹点\r\n      trackPointList: [],\r\n      // 轨迹时间\r\n      trackPointTimeList: [],\r\n      // 超速线段\r\n      overSpeedTrackLineList: [],\r\n      // 记录开始巡检的时间，用于判断是否在开始巡检的10s内\r\n      startRecordTimer: '',\r\n      // 上报失败的巡检轨迹点位数组\r\n      reportFailTrackPoints: [],\r\n      // 右上角加号弹框\r\n      showPopover: false,\r\n      ifTips: false,\r\n      actions: [\r\n        {\r\n          text: '上报漏点',\r\n        },\r\n      ],\r\n      accessToken: this.$storage.get('access_token'),\r\n      formToken: '',\r\n      header: {},\r\n      // 用于判断是否加载完上报漏点数据\r\n      reportDataIsLoaded: false,\r\n      // 存储漏点工单\r\n      problemDataList: [],\r\n      // 上报是否显示\r\n      reportShow: false,\r\n      active: 0,\r\n      ifEndTask: false,\r\n      // 结束原因\r\n      stopReason: '',\r\n      ifLeaveTask: false,\r\n    }\r\n  },\r\n  created() {\r\n    console.log('存储在本地的检漏任务', JSON.parse(localStorage.getItem('leakDetectionData')))\r\n\r\n    // 当前点击的任务，从本地中获取\r\n    this.taskDetail = JSON.parse(localStorage.getItem('leakDetectionData')).nowClickTask\r\n    // 是否是查看状态\r\n    this.isView = JSON.parse(localStorage.getItem('leakDetectionData')).isView\r\n    this.userInfo = this.$store.state.userInfo\r\n    console.log('this.userInfo', this.userInfo)\r\n    console.log('当前点击的任务', this.taskDetail)\r\n\r\n    console.log(\r\n      this.userInfo.userName,\r\n      this.taskDetail.inspector,\r\n      '------巡检人员与当前登陆账号------',\r\n      this.userInfo.userFullname,\r\n      this.taskDetail.inspectorFullName\r\n    )\r\n\r\n    // 当巡检人员与当前登陆账号一致时才能检漏\r\n    if (\r\n      this.userInfo.userName != this.taskDetail.inspector &&\r\n      this.userInfo.userFullname != this.taskDetail.inspectorFullName\r\n    ) {\r\n      console.log('人员不一致')\r\n      // 是否为巡检员登陆，true为巡检员登录\r\n      // this.isInspectorLoad = false\r\n    }\r\n    // inspector: \"chen_bolin\"\r\n    // inspectorFullName: \"陈博林\"\r\n\r\n    // userFullname: \"宋凯龙\"\r\n    // userName: \"song_kl\"\r\n  },\r\n  mounted() {\r\n    document.addEventListener('pause', this.pause, false)\r\n    document.addEventListener('resume', this.resume, false)\r\n    localStorage.setItem('startRecordLines', 'end')\r\n    // const id = JSON.parse(localStorage.getItem('leakDetectionData')).taskId\r\n    // console.log('----------------------', id)\r\n    // this.getTaskById(id)\r\n    // this.getTrackRecordsById(id)\r\n    // this.getAppInspData(id)\r\n    // !(function computedPosition() {\r\n    //   let gapTimer = 10\r\n    //   if (that.currentPosition) {\r\n    //     // 计算当前时间与当前插件返回的时间的间隔\r\n    //     let gap = (new Date().getTime() - new Date(that.currentPosition.locTime).getTime()) / 1000\r\n    //     // 如果间隔时间大于某一值，则说明在gapTimer时间内没有收到来自插件的新点位\r\n    //     if (gap > gapTimer) {\r\n    //       // 开启提示\r\n    //       // Notify.warning({ message: '当前GPS信号较弱,位置和轨迹更新可能缓慢', duration: 5000 })\r\n    //       let t = setTimeout(() => {\r\n    //         // 提示结束，并开始下次调用\r\n    //         computedPosition()\r\n    //       }, 15000)\r\n    //     } else {\r\n    //       // 开始下次调用\r\n    //       let t = setTimeout(() => {\r\n    //         computedPosition()\r\n    //       }, 10000)\r\n    //     }\r\n    //   } else {\r\n    //     // Notify.warning({ message: '当前GPS无信', duration: 5000 })\r\n    //     let t = setTimeout(() => {\r\n    //       computedPosition()\r\n    //     }, 10000)\r\n    //   }\r\n    // })()\r\n  },\r\n  methods: {\r\n    // 深拷贝\r\n    deepClone(data) {\r\n      return JSON.parse(JSON.stringify(data))\r\n    },\r\n    pause() {\r\n      console.log('进入后台')\r\n      if (this.ifRecording && this.isResume) {\r\n        this.isResume = false\r\n      }\r\n    },\r\n    resume() {\r\n      console.log('进入前台')\r\n      if (this.ifRecording) {\r\n        this.isResume = true\r\n        pauseStateTrackPoints.length > 0 &&\r\n          this.upLoadPauseStateTrackPoints(this.deepClone(pauseStateTrackPoints))\r\n        pauseStatePipeIdList.length > 0 &&\r\n          this.upLoadPauseStatePipeIdList(this.deepClone(pauseStatePipeIdList))\r\n      }\r\n    },\r\n    upLoadPauseStateTrackPoints(data) {\r\n      // app添加上传失败点的管网检漏轨迹\r\n      Api.inspectionTrack(data)\r\n        .then((res) => {\r\n          if (res && res.status) {\r\n            console.log('后台巡检轨迹补充点位上传成功')\r\n            pauseStateTrackPoints.splice(0, data.length) // 移除上传成功的点位。避免重复上传\r\n          } else {\r\n            console.log('后台巡检轨迹补充点位上传异常')\r\n            this.reportFailTrackPoints.push(...data)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          setTimeout(() => {\r\n            this.upLoadPauseStateTrackPoints(data)\r\n          }, 5 * 1000)\r\n        })\r\n    },\r\n    upLoadPauseStatePipeIdList(data) {\r\n      let that = this\r\n      // app添加管网检漏记录\r\n      Api.recordInspLine(data)\r\n        .then(async (res) => {\r\n          if (res.status) {\r\n            console.log('后台巡检管线补充数据上传成功')\r\n            pauseStatePipeIdList.splice(0, data.length) // 移除上传成功的数据。避免重复上传\r\n            // 根据ID查询当前检漏任务\r\n            const res = await Api.getInspLeakTaskDetail({\r\n              id: JSON.parse(localStorage.getItem('leakDetectionData')).taskId,\r\n            })\r\n            console.log('根据ID查询当前检漏任务', res)\r\n            if (res.status) {\r\n              that.taskDetail = res.data\r\n            }\r\n          } else {\r\n            that.$refs.mymap.uploadFiledPipeIdList.push(...data)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          setTimeout(() => {\r\n            this.upLoadPauseStatePipeIdList(data)\r\n          }, 5 * 1000)\r\n        })\r\n    },\r\n    // 剩余时间\r\n    getRestTime(time) {\r\n      return time ? new Date(time).getTime() - new Date().getTime() : 0\r\n    },\r\n    // 覆盖率计算\r\n    changeToRate(coverage) {\r\n      if (coverage != null && typeof (coverage * 1) == 'number') {\r\n        return coverage + '%'\r\n      } else {\r\n        return '0%'\r\n      }\r\n    },\r\n    // 地图初始化\r\n    async mapLoaded(mapInstance) {\r\n      mapObj.mapInstance = mapInstance\r\n      mapObj.map = mapInstance.map\r\n      // 添加起点终点图片\r\n      this.addMapImg()\r\n      await addIconToMap(mapObj.map, this.icons)\r\n      // 添加任务范围、管线图层source、layer\r\n      this.addSourceLayer()\r\n\r\n      //修改供水厂图标\r\n      mapObj.map.setLayoutProperty('map_waterwork', 'icon-image', '供水厂')\r\n      mapObj.map.setLayoutProperty('map_waterwork', 'icon-size', 0.6)\r\n      mapObj.map.setLayoutProperty('map_supply_pump', 'icon-image', '给水加压泵站')\r\n      mapObj.map.setLayoutProperty('map_supply_pump', 'icon-size', 0.6)\r\n      // 隐藏六水合一默认图层\r\n      mapObj.map.setLayoutProperty('rd_map_comb', 'visibility', 'none')\r\n      mapObj.map.setLayoutProperty('rd_map_manhole', 'visibility', 'none')\r\n      // 污水相关\r\n      mapObj.map.setLayoutProperty('rd_map_drainpipe_ws_big', 'visibility', 'none')\r\n      mapObj.map.setLayoutProperty('rd_map_drainpipe_ws_big_direction', 'visibility', 'none')\r\n      mapObj.map.setLayoutProperty('rd_map_drainpipe_ws_small', 'visibility', 'none')\r\n      mapObj.map.setLayoutProperty('rd_map_drainpipe_ws_small_direction', 'visibility', 'none')\r\n      // 雨水相关\r\n      mapObj.map.setLayoutProperty('rd_map_drainpipe_ys_big', 'visibility', 'none')\r\n      mapObj.map.setLayoutProperty('rd_map_drainpipe_ys_big_direction', 'visibility', 'none')\r\n      mapObj.map.setLayoutProperty('rd_map_drainpipe_ys_small', 'visibility', 'none')\r\n      mapObj.map.setLayoutProperty('rd_map_drainpipe_ys_small_direction', 'visibility', 'none')\r\n      // 显示供水管线图层\r\n      mapObj.map.setLayoutProperty('map_supply_pipe_distribute', 'visibility', 'visible')\r\n      mapObj.map.setLayoutProperty('map_supply_pipe_circulating', 'visibility', 'visible')\r\n      mapObj.map.setLayoutProperty('map_supply_pipe_delivery', 'visibility', 'visible')\r\n      // mapObj.map.setLayoutProperty( \"1111111111111111111111111\", \"visibility\", \"visible\" );\r\n      mapObj.map.setLayoutProperty('map_waterwork', 'visibility', 'visible')\r\n      mapObj.map.setLayoutProperty('map_supply_pump', 'visibility', 'visible')\r\n      // mapObj.map.setLayoutProperty( \"1111111111111111111111111\", \"visibility\", \"visible\" );\r\n      mapObj.map.setLayoutProperty('map_supply_valve', 'visibility', 'visible')\r\n      mapObj.map.setLayoutProperty('map_supply_firehydrant', 'visibility', 'visible')\r\n\r\n      // 添加任务范围、管线图层\r\n      await this.addTaskRangeAndLines()\r\n      // 问题上报接口\r\n      await this.getProblemDataList()\r\n      // this.getTaskById(id)\r\n\r\n      // 巡检人员source已添加\r\n\r\n      // 设置巡检员位置\r\n      // this.$refs.mymap.setInspUserPosition({\r\n      //   longitude: 115.92987078013635,\r\n      //   latitude: 39.062062836990066,\r\n      // })\r\n\r\n      // 巡检模拟，点击地图模拟走动\r\n      // mapObj.map.on('click', (e) => {\r\n      //   console.log('点击地图', e.lngLat)\r\n      //   this.currentPosition = {\r\n      //     longitude: e.lngLat.lng,\r\n      //     latitude: e.lngLat.lat,\r\n      //   }\r\n      //   // {\r\n      //   //   lng: 115.92101866271503,\r\n      //   //   lat: 39.06137929912413,\r\n      //   // })\r\n      // })\r\n      // this.currentPosition = {\r\n      //   longitude: '115.90457697779209',\r\n      //   latitude: '39.045671883888986',\r\n      // }\r\n      // 人员定位\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.locationAMap.requestSingleLocation(\r\n          ['1'],\r\n          (res) => {\r\n            this.currentPosition = JSON.parse(JSON.stringify(res))\r\n            const param = {\r\n              ...this.currentPosition,\r\n            }\r\n            this.$refs.mymap.setInspUserPosition(param)\r\n          },\r\n          (err) => {\r\n            console.log('err', err)\r\n          }\r\n        )\r\n      }\r\n      console.log('this.currentPosition', this.currentPosition)\r\n    },\r\n    // 根据速度改变巡检管线颜色\r\n    async changeInspLineSourceBySpeed(position) {\r\n      const coord = [parseFloat(position.longitude), parseFloat(position.latitude)]\r\n      const point = turf.point(coord)\r\n      try {\r\n        const that = this\r\n        let timer = setInterval(function () {\r\n          if (mapObj.map.getSource('inspUser') && mapObj.map.isSourceLoaded('inspUser')) {\r\n            clearInterval(timer)\r\n            if (true) {\r\n              // 改变周围要素的状态\r\n              let buffered = turf.buffer(point, 0.015, { unit: 'kilometers' })\r\n              that.changeInspLineState(buffered)\r\n            }\r\n          }\r\n        }, 100)\r\n      } catch (e) {\r\n        console.log(e)\r\n      }\r\n    },\r\n    // 设置巡检管线为已巡检\r\n    changeInspLineState(geometry) {\r\n      let that = this\r\n      // 将地理坐标系转化为屏幕坐标系\r\n      function geoTransToPixel(geom) {\r\n        const polygonBox = turf.bbox(geom)\r\n        const southWest = [polygonBox[0], polygonBox[1]]\r\n        const northEast = [polygonBox[2], polygonBox[3]]\r\n        let southWestPointPixel = mapObj.map.project(southWest)\r\n        let northEastPointPixel = mapObj.map.project(northEast)\r\n        // 增大bbox的查询范围\r\n        southWestPointPixel = [southWestPointPixel.x - 50, southWestPointPixel.y + 50]\r\n        northEastPointPixel = [northEastPointPixel.x + 50, northEastPointPixel.y - 50]\r\n        return [southWestPointPixel, northEastPointPixel]\r\n      }\r\n      // 对每个划分出来的bbox进行处理\r\n      async function chunk(geom) {\r\n        // let wasLoaded = false;\r\n        // if (wasLoaded) return;\r\n        console.log('geoTransToPixel(geom)', geoTransToPixel(geom))\r\n        // 查询屏幕范围内中任务范围内的管线图层（红色或者绿色）\r\n        const boxFeatures = mapObj.map.queryRenderedFeatures(geoTransToPixel(geom), {\r\n          layers: ['detectionPipeLayer'],\r\n        })\r\n        console.log(boxFeatures, 'boxFeatures')\r\n\r\n        // 存储管线与真实的范围相交且没有被巡检过的管线\r\n        let tempPipeList = []\r\n        boxFeatures.forEach((feat) => {\r\n          try {\r\n            // const result = turf.intersect(feat.geometry, geometry);\r\n            // 如果两个几何图形的交点为空集，则返回(TRUE)。\r\n            const result = turf.booleanDisjoint(feat.geometry, geometry)\r\n            console.log(\r\n              '点与范围是否相交------------------------------------',\r\n              result,\r\n              feat.geometry,\r\n              geometry\r\n            )\r\n            // 如果查出的要素与真实的范围相交且没有被巡检过，则改变其状态，并记录其关键字\r\n            if (!result && !feat.state.isInsp) {\r\n              mapObj.map.setFeatureState(\r\n                {\r\n                  source: feat.source,\r\n                  id: feat.id,\r\n                },\r\n                { isInsp: true }\r\n              )\r\n\r\n              if (!tempPipeList.map((it) => it.pipeId).includes(feat.id)) {\r\n                let date = that.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n                tempPipeList.push({\r\n                  portalId: that.taskDetail.portalId,\r\n                  inspDate: date, // 巡检日期\r\n                  pipeId: feat.id, // 管线id\r\n                  ext3: '供水',\r\n                  pipeLength: feat.properties['length'] || 0, // 管线长度\r\n                  taskId: JSON.parse(localStorage.getItem('leakDetectionData')).taskId, // 任务id\r\n                })\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.log(error)\r\n          }\r\n        })\r\n        if (that.isResume) {\r\n          tempPipeList.length > 0 &&\r\n            // app添加管网检漏记录\r\n            Api.recordInspLine(tempPipeList).then(async (res) => {\r\n              if (res.status) {\r\n                console.log('管线上传成功')\r\n                // 根据ID查询当前检漏任务\r\n                const res = await Api.getInspLeakTaskDetail({\r\n                  id: JSON.parse(localStorage.getItem('leakDetectionData')).taskId,\r\n                })\r\n                console.log('根据ID查询当前检漏任务', res)\r\n                if (res.status) {\r\n                  that.taskDetail = res.data\r\n                }\r\n                // bus.$emit('updateData')\r\n              } else {\r\n                console.log('上传失败的tempPipeList: ', tempPipeList)\r\n                // 上传失败的已巡检管线id\r\n                that.$refs.mymap.uploadFiledPipeIdList.push(...tempPipeList)\r\n              }\r\n            })\r\n        } else {\r\n          tempPipeList.length > 0 && pauseStatePipeIdList.push(...tempPipeList)\r\n        }\r\n      }\r\n      function cb(features) {\r\n        if (features.length > 0) {\r\n          setTimeout(() => {\r\n            chunk(features.shift())\r\n            cb(features)\r\n          }, 100)\r\n        }\r\n      }\r\n      cb([geometry])\r\n    },\r\n    // 添加任务范围、管线图层\r\n    async addTaskRangeAndLines() {\r\n      // 根据ID查询当前检漏任务\r\n      const resData1 = await Api.getInspLeakTaskDetail({ id: this.taskDetail.id })\r\n      // 当前点击的任务，从接口中获取\r\n      this.taskDetail = resData1?.data || {}\r\n      this.taskDetail.taskType = '人巡'\r\n      console.log('根据ID查询当前检漏任务', this.taskDetail)\r\n      // ---------------------------------------------------------------------------------------\r\n      // 添加范围图层并定位\r\n      this.setDetectionRangeData(JSON.parse(this.taskDetail.geom))\r\n\r\n      // 分页查询管网已检漏记录\r\n      const resData2 = await Api.getHasInspLeakPipe({\r\n        taskId: this.taskDetail.id,\r\n        page: 1,\r\n        size: 99999,\r\n      })\r\n      let hasInspPipe = []\r\n      if (resData2.status) {\r\n        hasInspPipe = resData2.data.records.map((item) => item.pipeId)\r\n        console.log('分页查询管网已检漏记录', resData2.data.records)\r\n      }\r\n\r\n      // 根据任务范围查询管线数据\r\n      let params = {\r\n        bizType: '供水',\r\n        devType: '管线',\r\n        geomStr: this.taskDetail.geom,\r\n        pageNum: 1,\r\n        pageSize: 99999,\r\n      }\r\n      await Api.getAllLeakLines(params).then((res) => {\r\n        console.log('巡检任务下所有巡检管线', res)\r\n        if (res.status && res.data.list.length > 0) {\r\n          // 巡检任务下所有巡检管线\r\n          this.allTaskLines = []\r\n          res.data.list.forEach((item) => {\r\n            if (hasInspPipe.includes(item.id)) {\r\n              // 巡检任务下所有巡检管线-已巡检\r\n              this.allTaskLines.push({\r\n                type: 'Feature',\r\n                id: item.id,\r\n                geometry: JSON.parse(item.geom),\r\n                properties: {\r\n                  isInsp: true,\r\n                  ...item,\r\n                },\r\n              })\r\n              mapObj.map.setFeatureState(\r\n                {\r\n                  source: 'detectionPipe',\r\n                  id: item.id,\r\n                },\r\n                {\r\n                  // 已巡检，绿色\r\n                  isInsp: true,\r\n                }\r\n              )\r\n            } else {\r\n              // 巡检任务下所有巡检管线-未巡检\r\n              this.allTaskLines.push({\r\n                type: 'Feature',\r\n                id: item.id,\r\n                geometry: JSON.parse(item.geom),\r\n                properties: {\r\n                  isInsp: false,\r\n                  ...item,\r\n                },\r\n              })\r\n              mapObj.map.setFeatureState(\r\n                {\r\n                  source: 'detectionPipe',\r\n                  id: item.id,\r\n                },\r\n                // 未巡检，红色\r\n                {\r\n                  isInsp: false,\r\n                }\r\n              )\r\n            }\r\n          })\r\n          // 添加范围内管线图层\r\n          mapObj.map.getSource('detectionPipe').setData({\r\n            type: 'FeatureCollection',\r\n            features: this.allTaskLines,\r\n          })\r\n        }\r\n      })\r\n    },\r\n    // 添加任务范围、管线图层source、layer\r\n    addSourceLayer() {\r\n      // 范围面及边框\r\n      mapObj.map.addSource('detectionRange', {\r\n        type: 'geojson',\r\n        data: {\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        },\r\n      })\r\n      mapObj.map.addLayer({\r\n        id: 'detectionRangeLayer_fill',\r\n        source: 'detectionRange',\r\n        type: 'fill',\r\n        paint: {\r\n          'fill-color': '#32C5FF',\r\n          'fill-opacity': 0.1,\r\n        },\r\n      })\r\n      mapObj.map.addLayer({\r\n        id: 'detectionRangeLayer_line',\r\n        source: 'detectionRange',\r\n        type: 'line',\r\n        paint: {\r\n          'line-color': '#32C5FF',\r\n          'line-width': 2,\r\n          'line-dasharray': [4, 4],\r\n        },\r\n      })\r\n\r\n      // 范围内管线\r\n      mapObj.map.addSource('detectionPipe', {\r\n        type: 'geojson',\r\n        data: {\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        },\r\n      })\r\n      mapObj.map.addLayer(\r\n        {\r\n          id: 'detectionPipeLayer',\r\n          source: 'detectionPipe',\r\n          type: 'line',\r\n          paint: {\r\n            'line-color': [\r\n              'case',\r\n              ['boolean', ['feature-state', 'isInsp'], false],\r\n              '#44BA5A',\r\n              '#FF0000',\r\n            ],\r\n            'line-width': 3,\r\n          },\r\n        },\r\n        'rd_map_outfall'\r\n      )\r\n    },\r\n    // 添加范围图层并定位\r\n    setDetectionRangeData(range) {\r\n      let bbox = turf.bbox({\r\n        type: 'FeatureCollection',\r\n        features: [turf.polygon(range.coordinates)],\r\n      })\r\n      if (mapObj.map && mapObj.map.getSource('detectionRange')) {\r\n        mapObj.map.getSource('detectionRange').setData(range)\r\n        mapObj.map.fitBounds(bbox, {\r\n          padding: { top: 10, bottom: 25, left: 15, right: 5 },\r\n        })\r\n      }\r\n    },\r\n    // 取消离开\r\n    cancelLeave() {\r\n      this.ifLeaveTask = false\r\n    },\r\n    // 确认离开\r\n    confirmLeave() {\r\n      this.ifLeaveTask = false\r\n      this.endRecord('leave')\r\n    },\r\n    // 返回任务页\r\n    goBackToTask() {\r\n      if (this.ifRecording) {\r\n        // 当前正在巡检中时，返回任务页时提示是否离开该任务\r\n        this.ifLeaveTask = true\r\n      } else {\r\n        this.$router.go(-1)\r\n      }\r\n    },\r\n    // 问题上报\r\n    async getProblemDataList() {\r\n      // 获取header，查询工单用\r\n      await axios({\r\n        url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/userCenterApi/sso/tokenByToken',\r\n        method: 'post',\r\n        params: {\r\n          token: this.accessToken,\r\n        },\r\n        headers: {\r\n          Authorization: 'Basic b3V0d29yazp3cGcyMDIw',\r\n        },\r\n      }).then((res) => {\r\n        if (res.status == 200) {\r\n          this.formToken = res.data.resultData.token\r\n          this.header = {\r\n            'Content-Type': 'application/json',\r\n            Authorization: 'Bearer ' + this.formToken,\r\n          }\r\n        }\r\n      })\r\n      // 存储漏点工单\r\n      this.problemDataList = []\r\n      let params = {\r\n        sysCode: 'outwork',\r\n        // formValue: \"{\\\"taskId\\\":\\\"1611029758697541634\\\"}\"1611029758697541634\r\n        // 只显示任务关联的上报漏点\r\n        extParam: {\r\n          taskId: this.taskDetail.id, // 任务id\r\n        },\r\n        page: {\r\n          current: 1,\r\n          size: 10000,\r\n        },\r\n        typeList: ['jlgd'],\r\n      }\r\n      await axios({\r\n        url:\r\n          process.env.VUE_APP_THIRD_REQUEST_URL +\r\n          '/main/outworkapi/ticketStatisticClient/getTicketList', // 所有的\r\n        method: 'post',\r\n        data: params,\r\n        headers: this.header,\r\n      }).then((res) => {\r\n        if (res.status == 200 && res.data != null) {\r\n          this.problemDataList = res.data?.resultData?.records || []\r\n          console.log('检漏工单records', this.problemDataList)\r\n          this.addYourLayer(this.problemDataList, '泄漏点')\r\n          // 用于判断是否加载完上报漏点数据\r\n          this.reportDataIsLoaded = true\r\n        }\r\n      })\r\n    },\r\n    // 在地图上添加泄漏点\r\n    addYourLayer(pointList, id) {\r\n      const sourceData = {\r\n        type: 'FeatureCollection',\r\n        features: pointList.map((i) => {\r\n          let ll = null\r\n          if (typeof i.formValue.ticketAddress == 'string') {\r\n            ll = JSON.parse(JSON.parse(i.formValue.ticketAddress).point)\r\n          } else {\r\n            ll = i.formValue.ticketAddress.point\r\n          }\r\n\r\n          return {\r\n            type: 'Feature',\r\n            geometry: {\r\n              type: 'Point',\r\n              coordinates: [ll.lng, ll.lat],\r\n            },\r\n            properties: i,\r\n          }\r\n        }),\r\n      }\r\n      if (mapObj.map.getSource(id)) {\r\n        mapObj.map.getSource(id).setData(sourceData)\r\n        return\r\n      }\r\n      mapObj.map.addLayer(\r\n        {\r\n          id: id,\r\n          type: 'symbol',\r\n          source: {\r\n            type: 'geojson',\r\n            data: sourceData,\r\n          },\r\n          layout: {\r\n            'icon-image': id,\r\n            'icon-size': 0.7,\r\n            // 图标强制全部显示\r\n            'icon-ignore-placement': true,\r\n            visibility: 'visible',\r\n          },\r\n          // minzoom: 13,\r\n        },\r\n        ''\r\n      )\r\n      // 鼠标点击\r\n      // mapObj.map.on('click', id, this.handleMouseClick)\r\n    },\r\n    // 上报泄漏点\r\n    reportClick() {\r\n      // 用于判断是否加载完上报漏点数据\r\n      if (this.reportDataIsLoaded) {\r\n        this.reportShow = true\r\n        // mapObj.map.setLayoutProperty('eventPointsLayer', 'visibility', 'visible')\r\n      } else {\r\n        Toast.loading({\r\n          message: '上报数据加载中。。。',\r\n          loadingType: 'spinner',\r\n          duration: 1500,\r\n        })\r\n        return\r\n      }\r\n    },\r\n    handleClose() {\r\n      // mapObj.map.setLayoutProperty('eventPointsLayer', 'visibility', 'none')\r\n    },\r\n    // 点击上报漏点加号\r\n    onSelect(val) {\r\n      if (this.isView) {\r\n        Toast({\r\n          message: '该巡检任务已结束',\r\n          duration: '1500',\r\n        })\r\n        return\r\n      }\r\n      this.ifTips = true\r\n      // 隐藏掉范围图层\r\n      mapObj.map.setLayoutProperty('detectionRangeLayer_fill', 'visibility', 'none')\r\n      mapObj.map.on('click', this.selectReportPoint)\r\n    },\r\n    // 上报漏点\r\n    async selectReportPoint(e) {\r\n      let features = mapObj.map.queryRenderedFeatures(e.point)\r\n      console.log('查询到的图层数据', features)\r\n      let propertiesArr = []\r\n      propertiesArr = features.filter((item) => {\r\n        // 筛选出供水的图层\r\n        return item.layer.id == 'map_supply_pipe_distribute'\r\n      })\r\n      // console.log('上报漏点点击地图', features, propertiesArr)\r\n\r\n      // 筛选出匹配的第一个管线元素\r\n      let oneProperties = null\r\n      let pop\r\n      let marker\r\n\r\n      const src = require(`@/assets/img/legend/事件上报.png`)\r\n      // 如果存在id为eventObj_one的元素，则删除此元素重新创建，保持全局只有一个此元素\r\n      let currentEle = document.getElementById('eventObj_one')\r\n      if (currentEle) {\r\n        currentEle.parentNode.removeChild(currentEle)\r\n      }\r\n      let ele = document.createElement('div')\r\n      ele.innerHTML = `\r\n            <img id=\"eventObj_one\" src=\"${src}\" width=\"40\" height=\"40\">\r\n          `\r\n      marker = mapObj.mapInstance.newMarker({\r\n        element: ele,\r\n      })\r\n      marker\r\n        .setLngLat(e.lngLat)\r\n        .setPopup(\r\n          mapObj.mapInstance\r\n            .newPopup({ offset: [0, -7], closeButton: false })\r\n            .setHTML(`<div id=\"deviceDetail\"></div>`)\r\n        )\r\n        .addTo(mapObj.map)\r\n\r\n      if (this.ifTips) {\r\n        this.ifTips = false\r\n      }\r\n\r\n      if (propertiesArr.length > 0) {\r\n        oneProperties = propertiesArr[0]\r\n        console.log('筛选出匹配的第一个管线元素', oneProperties, e.lngLat)\r\n\r\n        pop = new PopupItem({\r\n          propsData: {\r\n            deviceCode: oneProperties.properties.start_code,\r\n            fun: goToDetail,\r\n            isDevice: true,\r\n            // type: type,\r\n          },\r\n        })\r\n        this.$nextTick(() => {\r\n          pop.$mount('#deviceDetail')\r\n        })\r\n        marker.togglePopup()\r\n\r\n        let that_ = this\r\n        // 进入工单详情页\r\n        function goToDetail() {\r\n          that_.$router.push({\r\n            name: 'LeakDetectionForm',\r\n            query: {\r\n              taskId: that_.taskDetail.id, // 任务id\r\n              properties: oneProperties.properties,\r\n              lngLat: e.lngLat,\r\n              id: false,\r\n            },\r\n          })\r\n        }\r\n      } else {\r\n        pop = new PopupItem({\r\n          propsData: {\r\n            deviceCode: '',\r\n            fun: goToDetailLngLat,\r\n            isDevice: false,\r\n            lng: e.lngLat.lng,\r\n            lat: e.lngLat.lat,\r\n          },\r\n        })\r\n        this.$nextTick(() => {\r\n          pop.$mount('#deviceDetail')\r\n        })\r\n        marker.togglePopup()\r\n\r\n        let that_ = this\r\n        // 进入工单详情页\r\n        function goToDetailLngLat() {\r\n          that_.$router.push({\r\n            name: 'LeakDetectionForm',\r\n            query: {\r\n              taskId: that_.taskDetail.id, // 任务id\r\n              properties: {},\r\n              lngLat: e.lngLat,\r\n              id: false,\r\n            },\r\n          })\r\n        }\r\n      }\r\n    },\r\n    // 开始记录 上传起点成功后才进入巡检过程\r\n    startInspRecord() {\r\n      if (this.isView) {\r\n        Toast({\r\n          message: '该巡检任务已结束',\r\n          duration: 1500,\r\n        })\r\n        return\r\n      }\r\n      // 测试\r\n      // this.changeInspLineSourceBySpeed({\r\n      //   longitude: 115.9118701885,\r\n      //   latitude: 39.0556468180\r\n      // })\r\n      if (!this.currentPosition || !this.currentPosition.longitude) {\r\n        Toast.warning({\r\n          message: '当前GPS信号弱，请稍后尝试',\r\n          duration: 2000,\r\n        })\r\n        return\r\n      }\r\n      // 修改未巡检(0)任务状态至巡检中(1)\r\n      if (\r\n        JSON.parse(localStorage.getItem('leakDetectionData')).isNew &&\r\n        this.taskDetail.taskStatus == 0\r\n      ) {\r\n        this.startOrEndTaskRecord(1)\r\n      }\r\n      // 清除缓存的轨迹数据\r\n      this.clearBufferTrack()\r\n      let toast = Toast.loading({\r\n        message: '程序启动中',\r\n        loadingType: 'spinner',\r\n        duration: 0,\r\n        forbidClick: true,\r\n      })\r\n      // 绘制起始点\r\n      this.drawStartPoint()\r\n        .then((res) => {\r\n          if (res) {\r\n            toast.close()\r\n            Toast.info({\r\n              message: '开始记录',\r\n              duration: 1500,\r\n            })\r\n            // 轮询状态\r\n            this.pollingFlag = true\r\n            // 是否开始记录\r\n            this.ifRecording = true\r\n            // this.startLocation()\r\n            localStorage.setItem('startRecordLines', 'start')\r\n            // 开始轮询\r\n            this.polling()\r\n            // 记录开始巡检的时间，用于判断是否在开始巡检的10s内\r\n            this.startRecordTimer = new Date()\r\n          } else {\r\n            Toast.error({\r\n              message: '接口异常，无法开始任务',\r\n              duration: 2000,\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n          Toast.error({\r\n            message: '网络状态异常，正在重试',\r\n            duration: 2000,\r\n          })\r\n          setTimeout(() => {\r\n            this.drawStartPoint()\r\n          }, 5000)\r\n        })\r\n    },\r\n    // 结束记录\r\n    endRecord(type) {\r\n      let diff = Math.floor((new Date() - this.startRecordTimer) / 1000)\r\n      if (diff <= 10) {\r\n        Toast.info({\r\n          message: `结束太快了,请${10 - diff}秒后再试`,\r\n          duration: 1000,\r\n        })\r\n        return\r\n      }\r\n      this.endRecordConfirm(type)\r\n    },\r\n    // 结束记录确认\r\n    endRecordConfirm(type) {\r\n      this.drawEndPoint(type)\r\n    },\r\n    // 绘制终止点\r\n    async drawEndPoint(type) {\r\n      let that = this\r\n      if (that.currentPosition != null) {\r\n        let lastPoint = that.trackPointList[that.trackPointList.length - 1]\r\n        let currentPoint = [that.currentPosition.longitude, that.currentPosition.latitude]\r\n        let distance = Number(that.GetDistance(lastPoint, currentPoint)) * 1000\r\n        let toast = Toast.loading({\r\n          message: '程序关闭中',\r\n          loadingType: 'spinner',\r\n          duration: 0,\r\n          forbidClick: true,\r\n        })\r\n        // 记录终止点\r\n        that\r\n          .postTrackData_Point(\r\n            that.trackPointList[that.trackPointList.length - 1],\r\n            that.trackPointTimeList[that.trackPointTimeList.length - 1],\r\n            distance\r\n          )\r\n          .then((res) => {\r\n            if (res) {\r\n              toast.close()\r\n              Toast.info({\r\n                message: '暂停成功',\r\n                duration: 1000,\r\n              })\r\n              if (typeof yuanchu != 'undefined') {\r\n                yuanchu.locationAMap.stopRequestLocations()\r\n              }\r\n              that.trackPointList.push([\r\n                that.currentPosition.longitude,\r\n                that.currentPosition.latitude,\r\n              ])\r\n              that.trackPointTimeList.push(that.currentPosition.locTime)\r\n              let jsonPoint = {\r\n                type: 'Feature',\r\n                properties: {},\r\n                geometry: {\r\n                  type: 'Point',\r\n                  coordinates: [that.currentPosition.longitude, that.currentPosition.latitude],\r\n                },\r\n              }\r\n              let jsonPointFeatureCollection = {\r\n                type: 'FeatureCollection',\r\n                features: [jsonPoint],\r\n              }\r\n              if (mapObj.map.getSource('endPointSource_now')) {\r\n                mapObj.map.getSource('endPointSource_now').setData(jsonPointFeatureCollection)\r\n              } else {\r\n                mapObj.map.addSource('endPointSource_now', {\r\n                  type: 'geojson',\r\n                  data: jsonPointFeatureCollection,\r\n                })\r\n              }\r\n              if (mapObj.map.getLayer('endPointLayer_now')) {\r\n              } else {\r\n                mapObj.map.addLayer(\r\n                  {\r\n                    id: 'endPointLayer_now',\r\n                    type: 'circle',\r\n                    source: 'endPointSource_now',\r\n                    layout: {\r\n                      'circle-sort-key': 5,\r\n                      visibility: 'visible',\r\n                      // visibility: \"none\"\r\n                    },\r\n                    paint: {\r\n                      'circle-radius': 3,\r\n                      'circle-stroke-width': 5,\r\n                      'circle-stroke-color': '#addd52',\r\n                      'circle-color': 'white',\r\n                    },\r\n                  },\r\n                  'inspUserLayer'\r\n                )\r\n              }\r\n\r\n              // 补充trackline\r\n              let jsonLine = {\r\n                type: 'Feature',\r\n                properties: {},\r\n                geometry: {\r\n                  type: 'LineString',\r\n                  coordinates: that.trackPointList,\r\n                },\r\n              }\r\n              let jsonLineFeatureCollection = {\r\n                type: 'FeatureCollection',\r\n                features: [jsonLine],\r\n              }\r\n              if (mapObj.map.getSource('trackLineSource_now')) {\r\n                mapObj.map.getSource('trackLineSource_now').setData(jsonLineFeatureCollection)\r\n              } else {\r\n                mapObj.map.addSource('trackLineSource_now', {\r\n                  type: 'geojson',\r\n                  data: jsonLineFeatureCollection,\r\n                })\r\n              }\r\n              if (mapObj.map.getLayer('trackLineLayer_now')) {\r\n              } else {\r\n                mapObj.map.addLayer(\r\n                  {\r\n                    id: 'trackLineLayer_now',\r\n                    type: 'line',\r\n                    source: 'trackLineSource_now',\r\n                    layout: {\r\n                      'line-cap': 'round',\r\n                      'line-join': 'round',\r\n                      visibility: 'visible',\r\n                      // visibility: \"none\"\r\n                    },\r\n                    paint: {\r\n                      'line-color': '#addd52',\r\n                      'line-width': 5,\r\n                      'line-opacity': 0.8,\r\n                    },\r\n                  },\r\n                  'inspUserLayer'\r\n                )\r\n              }\r\n              // 添加终点图片\r\n              if (mapObj.map.getLayer('endPoint_label')) {\r\n              } else {\r\n                mapObj.map.addLayer({\r\n                  id: 'endPoint_label',\r\n                  type: 'symbol',\r\n                  source: 'endPointSource_now',\r\n                  layout: {\r\n                    'symbol-placement': 'point',\r\n                    'icon-image': 'end_point',\r\n                    'icon-size': 0.6,\r\n                    'icon-offset': [0, -35],\r\n                    'icon-allow-overlap': true,\r\n                    'symbol-sort-key': 2,\r\n                    visibility: 'visible',\r\n                    // visibility: \"none\"\r\n                  },\r\n                })\r\n              }\r\n              // 上传之前上传失败的点位\r\n              that.reportFailTrackPoints.length > 0 && that.postFailTrackData()\r\n              that.$refs.mymap.uploadFiledPipeIdList.length > 0 &&\r\n                // app添加管网检漏记录\r\n                Api.recordInspLine(that.$refs.mymap.uploadFiledPipeIdList).then((res) => {\r\n                  if (res.status) {\r\n                    console.log('管线补充上传成功')\r\n                    that.$refs.mymap.uploadFiledPipeIdList = []\r\n                  }\r\n                })\r\n              if (type == 'end') {\r\n                this.startOrEndTaskRecord(2) // 已巡检状态 '2'\r\n              } else {\r\n                this.pollingFlag = false\r\n                this.ifRecording = false\r\n                localStorage.setItem('startRecordLines', 'end')\r\n                if (type == 'pause') {\r\n                  Toast.success({\r\n                    message: '暂停成功',\r\n                    duration: 2000,\r\n                  })\r\n                  // 刷新任务\r\n                  this.refreshTask()\r\n                } else if (type == 'leave') {\r\n                  this.$router.go(-1)\r\n                }\r\n              }\r\n            } else {\r\n              Toast.error({\r\n                message: type == 'end' ? '结束失败' : '暂停失败',\r\n              })\r\n            }\r\n          })\r\n      } else {\r\n        let type = type\r\n        let timer = setTimeout(() => {\r\n          that.drawEndPoint(type)\r\n        }, 1000)\r\n      }\r\n    },\r\n    // 刷新任务\r\n    refreshTask() {\r\n      // let ids = []\r\n      // this.keyDetailList.forEach((item) => {\r\n      //   if (item.engInfoDTO) {\r\n      //     ids.push(item.engInfoDTO.engId)\r\n      //   }\r\n      // })\r\n      // mapObj.mapInstance && this.$refs.mymap.removeKeyPointMarker(ids)\r\n      const id = JSON.parse(localStorage.getItem('leakDetectionData')).taskId\r\n      // 添加任务范围、管线图层\r\n      this.addTaskRangeAndLines()\r\n      // await this.getAppInspData(id)\r\n    },\r\n    // ------------------------------------------------------------------------------------------------------------\r\n    // 状态（0未开始 1执行中 2已完成）\r\n    startOrEndTaskRecord(status) {\r\n      let data = {\r\n        planId: this.taskDetail.planId, // 计划id\r\n        taskName: this.taskDetail.taskName, // 任务名\r\n        taskStatus: status, // 状态（0未开始 1执行中 2已完成）\r\n        id: this.taskDetail.id, // 任务id\r\n        ext1: status == 2 ? this.stopReason : '', // 结束原因\r\n      }\r\n      if (status == 1) {\r\n        // 任务开始时间\r\n        data.taskStartTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n      } else if (status == 2) {\r\n        // 任务结束时间\r\n        data.taskEndTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n      }\r\n      let that = this\r\n      Api.changeTaskStatus(data).then((res) => {\r\n        if (res.status) {\r\n          if (status == 2) {\r\n            Toast.success({\r\n              message: '结束成功',\r\n              duration: 2000,\r\n              onClose: () => {\r\n                that.pollingFlag = false\r\n                that.ifRecording = false\r\n                // bus.$off('updateData')\r\n                localStorage.setItem('startRecordLines', 'end')\r\n                that.isView = true\r\n                that.$router.go(-1)\r\n              },\r\n            })\r\n          }\r\n        } else {\r\n          if (status == 2) {\r\n            Toast.error({\r\n              message: '结束失败, 正在重试',\r\n              duration: 1500,\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async postFailTrackData() {\r\n      let that = this\r\n      // app添加上传失败点的管网检漏轨迹\r\n      await Api.inspectionTrack(that.reportFailTrackPoints)\r\n        .then((res) => {\r\n          if (res && res.status) {\r\n            console.log('轨迹存储成功')\r\n            that.reportFailTrackPoints = []\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log('巡检轨迹存储失败：' + err)\r\n        })\r\n    },\r\n    // 清除缓存的轨迹数据\r\n    clearBufferTrack() {\r\n      let that = this\r\n      that.isResume = true\r\n      // 是否开始记录\r\n      that.ifRecording = false\r\n      // 当前巡检员所处位置\r\n      that.currentPosition = null\r\n      // 数组归零\r\n      // 轨迹点\r\n      that.trackPointList = []\r\n      // 轨迹时间\r\n      that.trackPointTimeList = []\r\n      // 超速线段\r\n      that.overSpeedTrackLineList = []\r\n      pauseStateTrackPoints = []\r\n      pauseStatePipeIdList = []\r\n      //数据源清空\r\n      if (mapObj.map.getSource('trackLineSource_now')) {\r\n        mapObj.map.getSource('trackLineSource_now').setData({\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        })\r\n      }\r\n      if (mapObj.map.getSource('trackLineSource_overSpeed')) {\r\n        mapObj.map.getSource('trackLineSource_overSpeed').setData({\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        })\r\n      }\r\n      if (mapObj.map.getSource('startPointSource_now')) {\r\n        mapObj.map.getSource('startPointSource_now').setData({\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        })\r\n      }\r\n\r\n      if (mapObj.map.getSource('endPointSource_now')) {\r\n        mapObj.map.getSource('endPointSource_now').setData({\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        })\r\n      }\r\n    },\r\n    // 添加起点终点图片\r\n    addMapImg() {\r\n      mapObj.map.loadImage(\r\n        require('@assets/img/inspection/white_arrow_right.png'),\r\n        function (error, image) {\r\n          if (error) throw error\r\n          if (!mapObj.map.hasImage('arrowIcon')) {\r\n            mapObj.map.addImage('arrowIcon', image, {})\r\n          }\r\n        }\r\n      )\r\n      mapObj.map.loadImage(\r\n        require('@assets/img/inspection/icon_starting_point.png'),\r\n        function (error, image) {\r\n          if (error) throw error\r\n          if (!mapObj.map.hasImage('start_point')) {\r\n            mapObj.map.addImage('start_point', image, {})\r\n          }\r\n        }\r\n      )\r\n      mapObj.map.loadImage(\r\n        require('@assets/img/inspection/icon_at_end.png'),\r\n        function (error, image) {\r\n          if (error) throw error\r\n          if (!mapObj.map.hasImage('end_point')) {\r\n            mapObj.map.addImage('end_point', image, {})\r\n          }\r\n        }\r\n      )\r\n    },\r\n    // 绘制起始点\r\n    drawStartPoint() {\r\n      let that = this\r\n      return new Promise(function (resolve, reject) {\r\n        if (typeof yuanchu != 'undefined') {\r\n          yuanchu.locationAMap.requestSingleLocation(\r\n            ['1'],\r\n            (res) => {\r\n              that.currentPosition = JSON.parse(JSON.stringify(res))\r\n              // res\r\n              // {\r\n              //   accuracy: '',//定位精度（Android返回）\r\n              //   address: '浙江省杭州市余杭区智溢路靠近中国(杭州)人工智能小镇',//（若请求回逆地理位置信息则返回）\r\n              //   latitude: '30.2706469726562517',//（必返回）\r\n              //   longitude: '119.9658680555555605',//（必返回）\r\n              //   locTime: '2022-03-09 09:45:19',//（必返回）\r\n              //   locType: '',//定位模式（Android返回）\r\n              // }\r\n              const param = {\r\n                ...that.currentPosition,\r\n              }\r\n              // 设置巡检人员位置并监听设备旋转事件，给人员图标旋转角度赋值\r\n              that.$refs.mymap.setInspUserPosition(param)\r\n              if (that.currentPosition != null) {\r\n                let recordData = []\r\n                recordData.push({\r\n                  taskId: that.taskDetail.id, // 任务id\r\n                  longitude: that.currentPosition.longitude,\r\n                  latitude: that.currentPosition.latitude,\r\n                  inspTime: that.currentPosition.locTime, // 具体巡检时间\r\n                  distance: 0, // 轨迹长度 第一个点距离为0\r\n                  inspDate: that.currentPosition.locTime, // 巡检日期\r\n                  inspector: that.userInfo.userFullName,\r\n                })\r\n                // app添加管网检漏轨迹\r\n                Api.inspectionTrack(recordData)\r\n                  .then((res) => {\r\n                    if (res && res.status) {\r\n                      // 使用上报点位作为起点\r\n                      console.log('起始点存储成功')\r\n                      that.trackPointList.push([\r\n                        that.currentPosition.longitude,\r\n                        that.currentPosition.latitude,\r\n                      ])\r\n                      that.trackPointTimeList.push(that.currentPosition.locTime)\r\n                      let jsonPoint = {\r\n                        type: 'Feature',\r\n                        properties: {},\r\n                        geometry: {\r\n                          type: 'Point',\r\n                          coordinates: [\r\n                            that.currentPosition.longitude,\r\n                            that.currentPosition.latitude,\r\n                          ],\r\n                        },\r\n                      }\r\n                      let jsonPointFeatureCollection = {\r\n                        type: 'FeatureCollection',\r\n                        features: [jsonPoint],\r\n                      }\r\n                      if (mapObj.map.getSource('startPointSource_now')) {\r\n                        mapObj.map\r\n                          .getSource('startPointSource_now')\r\n                          .setData(jsonPointFeatureCollection)\r\n                      } else {\r\n                        mapObj.map.addSource('startPointSource_now', {\r\n                          type: 'geojson',\r\n                          data: jsonPointFeatureCollection,\r\n                        })\r\n                      }\r\n                      if (mapObj.map.getLayer('startPointLayer_now')) {\r\n                      } else {\r\n                        mapObj.map.addLayer(\r\n                          {\r\n                            id: 'startPointLayer_now',\r\n                            type: 'circle',\r\n                            source: 'startPointSource_now',\r\n                            layout: {\r\n                              'circle-sort-key': 5,\r\n                              visibility: 'visible',\r\n                              // visibility: \"none\"\r\n                            },\r\n                            paint: {\r\n                              'circle-radius': 3,\r\n                              'circle-stroke-width': 5,\r\n                              'circle-stroke-color': '#2A83E6',\r\n                              'circle-color': 'white',\r\n                            },\r\n                          },\r\n                          'inspUserLayer'\r\n                        )\r\n                      }\r\n                      // 添加起点图片\r\n                      if (mapObj.map.getLayer('startPoint_label')) {\r\n                      } else {\r\n                        mapObj.map.addLayer({\r\n                          id: 'startPoint_label',\r\n                          type: 'symbol',\r\n                          source: 'startPointSource_now',\r\n                          layout: {\r\n                            'symbol-placement': 'point',\r\n                            'icon-image': 'start_point',\r\n                            'icon-size': 0.6,\r\n                            'icon-offset': [0, -35],\r\n                            'icon-allow-overlap': true,\r\n                            'symbol-sort-key': 2,\r\n                            visibility: 'visible',\r\n                            // visibility: \"none\"\r\n                          },\r\n                        })\r\n                      }\r\n                      resolve(true)\r\n                    } else {\r\n                      resolve(false)\r\n                    }\r\n                  })\r\n                  .catch((err) => {\r\n                    reject(err)\r\n                  })\r\n              }\r\n            },\r\n            (err) => {\r\n              console.log('err', err)\r\n            }\r\n          )\r\n        }\r\n      })\r\n    },\r\n    // 轮询 currentPosition，绘制轨迹线\r\n    polling() {\r\n      let that = this\r\n      // 轮询状态\r\n      if (that.pollingFlag) {\r\n        if (typeof yuanchu != 'undefined') {\r\n          yuanchu.locationAMap.requestLocations(\r\n            // 巡检定时间隔：单位秒 3~60 （必填参数）\r\n            ['3', '1', '20', '100', '0', true],\r\n            (res) => {\r\n              // res\r\n              // {\r\n              //   accuracy: '',//定位精度（Android返回）\r\n              //   address: '浙江省杭州市余杭区智溢路靠近中国(杭州)人工智能小镇',//（若请求回逆地理位置信息则返回）\r\n              //   latitude: '30.2706469726562517',//（必返回）\r\n              //   longitude: '119.9658680555555605',//（必返回）\r\n              //   locTime: '2022-03-09 09:45:19',//（必返回）\r\n              //   locType: '',//定位模式（Android返回）\r\n              // }\r\n              that.currentPosition = JSON.parse(JSON.stringify(res))\r\n              // setInterval(() => {\r\n              that.currentPosition = Object.assign(that.currentPosition, {\r\n                direction: 0,\r\n              })\r\n              // 过滤缓存定位数据\r\n              if (\r\n                that.currentPosition.locType != 'SAME_REQ' &&\r\n                that.currentPosition.locType != 'FIX_CACHE'\r\n              ) {\r\n                let lastPoint = that.trackPointList[that.trackPointList.length - 1]\r\n                let currentPoint = [that.currentPosition.longitude, that.currentPosition.latitude]\r\n                // 计算起点终点距离\r\n                let distance = Number(that.GetDistance(lastPoint, currentPoint)) * 1000\r\n\r\n                // 记录过程点\r\n                that\r\n                  .postTrackData_Point(\r\n                    // 最后一个点，最后一个点对应的时间，最后两点之间的距离\r\n                    that.trackPointList[that.trackPointList.length - 1],\r\n                    that.trackPointTimeList[that.trackPointTimeList.length - 1],\r\n                    distance\r\n                  )\r\n                  .then((res) => {\r\n                    if (res) {\r\n                      // 轨迹点数组存储当前定位点\r\n                      that.trackPointList.push([\r\n                        that.currentPosition.longitude,\r\n                        that.currentPosition.latitude,\r\n                      ])\r\n                      // 轨迹点对应时间数组存储当前定位点时间\r\n                      that.trackPointTimeList.push(that.currentPosition.locTime)\r\n\r\n                      // 巡检人员图标位置更新\r\n                      const coord = [\r\n                        parseFloat(that.currentPosition.longitude),\r\n                        parseFloat(that.currentPosition.latitude),\r\n                      ]\r\n                      const point = turf.point(coord)\r\n                      mapObj.mapInstance.setSourceData('inspUser', {\r\n                        type: 'FeatureCollection',\r\n                        features: [point],\r\n                      })\r\n\r\n                      // 轨迹点数组构造临时线图层\r\n                      let jsonLine = {\r\n                        type: 'Feature',\r\n                        properties: {},\r\n                        geometry: {\r\n                          type: 'LineString',\r\n                          coordinates: that.trackPointList,\r\n                        },\r\n                      }\r\n                      let jsonLineFeatureCollection = {\r\n                        type: 'FeatureCollection',\r\n                        features: [jsonLine],\r\n                      }\r\n                      if (mapObj.map.getSource('trackLineSource_now')) {\r\n                        mapObj.map\r\n                          .getSource('trackLineSource_now')\r\n                          .setData(jsonLineFeatureCollection)\r\n                      } else {\r\n                        mapObj.map.addSource('trackLineSource_now', {\r\n                          type: 'geojson',\r\n                          data: jsonLineFeatureCollection,\r\n                        })\r\n                      }\r\n                      if (mapObj.map.getLayer('trackLineLayer_now')) {\r\n                      } else {\r\n                        mapObj.map.addLayer(\r\n                          {\r\n                            id: 'trackLineLayer_now',\r\n                            type: 'line',\r\n                            source: 'trackLineSource_now',\r\n                            layout: {\r\n                              'line-cap': 'round',\r\n                              'line-join': 'round',\r\n                              'line-sort-key': 1,\r\n                              visibility: 'visible',\r\n                              // visibility: \"none\"\r\n                            },\r\n                            paint: {\r\n                              'line-color': '#addd52',\r\n                              'line-width': 5,\r\n                              'line-opacity': 0.8,\r\n                            },\r\n                          },\r\n                          'inspUserLayer'\r\n                        )\r\n                      }\r\n                      // 右箭头图标\r\n                      if (mapObj.map.getLayer('trackLineLayer_arrow')) {\r\n                      } else {\r\n                        mapObj.map.addLayer(\r\n                          {\r\n                            id: 'trackLineLayer_arrow',\r\n                            type: 'symbol',\r\n                            source: 'trackLineSource_now',\r\n                            layout: {\r\n                              'symbol-placement': 'line',\r\n                              'symbol-spacing': 20,\r\n                              'icon-image': 'arrowIcon',\r\n                              'icon-size': 0.5,\r\n                              'icon-allow-overlap': true,\r\n                              'symbol-sort-key': 3,\r\n                              visibility: 'visible',\r\n                            },\r\n                          },\r\n                          'inspUserLayer'\r\n                        )\r\n                      }\r\n                      // 改变管线颜色\r\n                      that.changeInspLineSourceBySpeed(that.currentPosition)\r\n                      const param = {\r\n                        ...that.currentPosition,\r\n                      }\r\n                      that.$refs.mymap.setInspUserPosition(param)\r\n                    }\r\n                  })\r\n              }\r\n              // }, 3000)\r\n            },\r\n            (err) => {\r\n              console.log('定位失败，错误原因', err)\r\n              // Toast.error({\r\n              //   message: 'err' + err,\r\n              //   duration: 2000,\r\n              // })\r\n            }\r\n          )\r\n        }\r\n        // this.uploadInspRoute()\r\n      }\r\n    },\r\n    GetDistance(coordArray1, coordArray2) {\r\n      let lng1 = coordArray1[0]\r\n      let lat1 = coordArray1[1]\r\n      let lng2 = coordArray2[0]\r\n      let lat2 = coordArray2[1]\r\n      let radLat1 = (lat1 * Math.PI) / 180.0\r\n      let radLat2 = (lat2 * Math.PI) / 180.0\r\n      let a = radLat1 - radLat2\r\n      let b = (lng1 * Math.PI) / 180.0 - (lng2 * Math.PI) / 180.0\r\n      let s =\r\n        2 *\r\n        Math.asin(\r\n          Math.sqrt(\r\n            Math.pow(Math.sin(a / 2), 2) +\r\n              Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)\r\n          )\r\n        )\r\n      s = s * 6378.137 // EARTH_RADIUS;\r\n      s = Math.round(s * 10000) / 10000\r\n      return s\r\n    },\r\n    // 单点-后端记录轨迹数据\r\n    postTrackData_Point(pointData, timeData, distance) {\r\n      return new Promise(async (resolve, reject) => {\r\n        let that = this\r\n        for (let p = 0; p < pointData.length; p++) {\r\n          pointData[p] = Number(pointData[p])\r\n        }\r\n        let date_now = dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n        let recordData = []\r\n        recordData.push({\r\n          taskId: that.taskDetail.id,\r\n          inspDate: timeData, // 巡检日期\r\n          inspTime: date_now, // 具体巡检时间\r\n          distance, // 轨迹长度\r\n          inspector: that.userInfo.userFullname, // 巡检员\r\n          longitude: pointData[0],\r\n          latitude: pointData[1],\r\n        })\r\n        if (that.isResume) {\r\n          // app添加管网检漏轨迹\r\n          await Api.inspectionTrack(recordData).then((res) => {\r\n            if (res && res.status) {\r\n              console.log('轨迹存储成功', recordData)\r\n              resolve(true)\r\n            } else {\r\n              // 上传失败的点位，暂时存在app端\r\n              that.reportFailTrackPoints.push(recordData)\r\n              console.log('that.reportFailTrackPoints: ', that.reportFailTrackPoints)\r\n              resolve(false)\r\n            }\r\n          })\r\n        } else {\r\n          pauseStateTrackPoints.push(...recordData)\r\n          resolve(true)\r\n        }\r\n      })\r\n    },\r\n    // 开始定位\r\n    startLocation() {\r\n      let that = this\r\n      yuanchu.locationAMap.requestSingleLocation(\r\n        ['1'],\r\n        (res) => {\r\n          that.currentPosition = JSON.parse(JSON.stringify(res))\r\n          const param = {\r\n            ...that.currentPosition,\r\n          }\r\n          that.$refs.mymap.setInspUserPosition(param)\r\n          if (\r\n            !that.currentPosition ||\r\n            !that.currentPosition.longitude ||\r\n            !that.currentPosition.latitude\r\n          ) {\r\n            Toast.error({\r\n              message: '获取位置失败!',\r\n              duration: 2000,\r\n            })\r\n            return\r\n          } else {\r\n            const coord = [\r\n              parseFloat(that.currentPosition.longitude),\r\n              parseFloat(that.currentPosition.latitude),\r\n            ]\r\n            that.flyToPoint(coord)\r\n          }\r\n        },\r\n        (err) => {\r\n          console.log('err', err)\r\n        }\r\n      )\r\n    },\r\n    // 巡检人员定位\r\n    flyToPoint(lnglat) {\r\n      mapObj.map.flyTo({ center: lnglat, zoom: 17.5 })\r\n    },\r\n    // 结束任务\r\n    async endTask() {\r\n      if (this.isView) {\r\n        Toast({\r\n          message: '该巡检任务已结束',\r\n          duration: 1500,\r\n        })\r\n        return\r\n      }\r\n      // bus.$off('updateData')\r\n      // 添加任务范围、管线图层\r\n      await this.addTaskRangeAndLines()\r\n      setTimeout(() => {\r\n        let hasInspKp = this.taskDetail?.completion.split('|')[0] || 0\r\n        let allInspKp = this.taskDetail?.completion.split('|')[1] || 0\r\n        if (allInspKp - hasInspKp == 0 && this.taskDetail.coverage.includes('100')) {\r\n          this.endRecordConfirm('end')\r\n        } else {\r\n          // 结束任务时判断是否已经完成巡检，如果没完成就提示是否退出\r\n          this.ifEndTask = true\r\n        }\r\n      }, 100)\r\n    },\r\n    // 继续任务\r\n    continueTask() {\r\n      this.stopReason = ''\r\n      this.ifEndTask = false\r\n    },\r\n    // 中止任务\r\n    stopTask() {\r\n      if (this.stopReason == '') {\r\n        Toast.warning({\r\n          message: '请输入终止原因',\r\n          duration: 1500,\r\n        })\r\n        return\r\n      }\r\n      this.ifEndTask = false\r\n      this.endRecordConfirm('end')\r\n    },\r\n    // 检漏工单进入详情页\r\n    toDetailPanel(cardDetail) {\r\n      this.$router.push({\r\n        name: 'LeakDetectionForm',\r\n        query: {\r\n          id: cardDetail.id,\r\n        },\r\n      })\r\n    },\r\n  },\r\n\r\n  beforeDestroy() {\r\n    Toast.clear()\r\n    this.pollingFlag = false\r\n    this.clearBufferTrack()\r\n    document.removeEventListener('pause', this.pause)\r\n    document.removeEventListener('resume', this.resume)\r\n    if (typeof yuanchu != 'undefined') {\r\n      yuanchu.locationAMap.stopRequestLocations()\r\n    }\r\n    localStorage.removeItem('startRecordLines')\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.MapPage {\r\n  background-color: #ffffff !important;\r\n  height: 100%;\r\n\r\n  // 顶部标题背景色\r\n  /deep/.fm-nav-bar__content {\r\n    background-color: #ffffff;\r\n  }\r\n\r\n  /deep/.fm-nav-bar__title {\r\n    color: #191919 !important;\r\n  }\r\n\r\n  /deep/ .fm-nav-bar .fm-icon {\r\n    color: #191919 !important;\r\n  }\r\n\r\n  .mapContainer {\r\n    height: calc(100%);\r\n    width: 100%;\r\n    // background-color: rgb(97, 40, 255);\r\n  }\r\n\r\n  .start-record {\r\n    position: absolute;\r\n    z-index: 3;\r\n    left: 50%;\r\n    bottom: 235px;\r\n    transform: translate(-50%, 0);\r\n\r\n    img {\r\n      width: 140px;\r\n      height: 140px;\r\n    }\r\n  }\r\n\r\n  .controlCard {\r\n    width: 100%;\r\n    height: 328px;\r\n    position: absolute;\r\n    bottom: 0;\r\n    background-image: url('~@/assets/img/inspection/controlBg.png');\r\n    background-repeat: no-repeat;\r\n    background-size: 100%;\r\n\r\n    .controlContent {\r\n      margin: 50px 30px 0;\r\n      display: flex;\r\n      flex-direction: column;\r\n\r\n      .infoContent {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n        margin-bottom: 24px;\r\n\r\n        .endControl {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n\r\n          .leftText {\r\n            width: 27%;\r\n            display: flex;\r\n            justify-content: space-around;\r\n            align-items: center;\r\n\r\n            img {\r\n              width: 32px;\r\n              height: 32px;\r\n              margin: auto;\r\n            }\r\n\r\n            /deep/.fm-count-down {\r\n              font-size: 24px;\r\n              color: #306cc8;\r\n            }\r\n          }\r\n\r\n          .rightButton {\r\n            display: flex;\r\n\r\n            .endBtn {\r\n              font-size: 24px;\r\n              width: 120px;\r\n              height: 60px;\r\n              background: #ffffff;\r\n              color: #306cc8;\r\n            }\r\n          }\r\n        }\r\n\r\n        .bottomSide {\r\n          width: 100%;\r\n          display: flex;\r\n          margin-top: 24px;\r\n          justify-content: space-between;\r\n\r\n          .block {\r\n            text-align: center;\r\n            width: 330px;\r\n            height: 160px;\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            background: rgba(27, 103, 216, 0.05);\r\n            border-radius: 16px;\r\n            // margin: 0 20px;\r\n\r\n            .rate {\r\n              width: 100%;\r\n              height: 50%;\r\n              display: flex;\r\n              align-items: center;\r\n              margin: auto;\r\n              font-size: 48px;\r\n              font-family: Helvetica-Bold, Helvetica;\r\n              font-weight: bold;\r\n              color: #306cc8;\r\n\r\n              .centerStyle {\r\n                margin: auto;\r\n                display: flex;\r\n                align-items: center;\r\n                font-size: 38px;\r\n                font-family: Helvetica-Bold, Helvetica;\r\n                font-weight: bold;\r\n              }\r\n            }\r\n\r\n            .nameStyle {\r\n              font-size: 14px;\r\n              font-family: PingFangSC-Regular, PingFang SC;\r\n              font-weight: 400;\r\n              color: #555555;\r\n              width: 100%;\r\n              height: 33%;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .viewCard {\r\n    width: 100%;\r\n    height: 260px;\r\n    position: absolute;\r\n    bottom: 0;\r\n    background: #ffffff;\r\n    box-shadow: 0px 0px 18px 0px rgba(104, 115, 127, 0.18);\r\n\r\n    .controlContent {\r\n      margin: 32px 30px 0;\r\n      display: flex;\r\n      flex-direction: column;\r\n\r\n      .infoContent {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n        margin-bottom: 24px;\r\n\r\n        .bottomSide {\r\n          width: 100%;\r\n          display: flex;\r\n          margin-top: 24px;\r\n          justify-content: space-around;\r\n\r\n          .block {\r\n            text-align: center;\r\n            width: 330px;\r\n            height: 160px;\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            background: rgba(27, 103, 216, 0.05);\r\n            border-radius: 16px;\r\n            // margin: 0 20px;\r\n\r\n            .rate {\r\n              width: 100%;\r\n              height: 50%;\r\n              display: flex;\r\n              align-items: center;\r\n              margin: auto;\r\n              font-size: 48px;\r\n              font-family: Helvetica-Bold, Helvetica;\r\n              font-weight: bold;\r\n              color: #306cc8;\r\n\r\n              .centerStyle {\r\n                margin: auto;\r\n                display: flex;\r\n                align-items: center;\r\n                font-size: 38px;\r\n                font-family: Helvetica-Bold, Helvetica;\r\n                font-weight: bold;\r\n              }\r\n            }\r\n\r\n            .nameStyle {\r\n              font-size: 14px;\r\n              font-family: PingFangSC-Regular, PingFang SC;\r\n              font-weight: 400;\r\n              color: #555555;\r\n              width: 100%;\r\n              height: 33%;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .tool-box {\r\n    position: fixed;\r\n    width: 1.2rem;\r\n    height: auto;\r\n    right: 0.3rem;\r\n    bottom: 350px;\r\n\r\n    .refresh {\r\n      width: 1.2rem;\r\n      height: 1.2rem;\r\n      margin-bottom: 0.55rem;\r\n      background-color: #fff;\r\n      z-index: 3;\r\n      box-shadow: 0rem 0.22rem 0.61rem 0rem rgba(0, 0, 0, 0.2);\r\n      border-radius: 0.27rem;\r\n\r\n      &-image {\r\n        margin: 0.18rem;\r\n        width: 0.82rem;\r\n        height: 0.82rem;\r\n      }\r\n    }\r\n\r\n    .route {\r\n      width: 1.2rem;\r\n      height: 1.2rem;\r\n      margin-bottom: 0.55rem;\r\n      background-color: #fff;\r\n      z-index: 3;\r\n      box-shadow: 0rem 0.22rem 0.61rem 0rem rgba(0, 0, 0, 0.2);\r\n      border-radius: 0.27rem;\r\n\r\n      &-image {\r\n        margin: 0.18rem;\r\n        width: 0.82rem;\r\n        height: 0.82rem;\r\n      }\r\n    }\r\n\r\n    .location {\r\n      width: 1.2rem;\r\n      height: 1.2rem;\r\n      background-color: #fff;\r\n      z-index: 3;\r\n      box-shadow: 0rem 0.22rem 0.61rem 0rem rgba(0, 0, 0, 0.2);\r\n      border-radius: 60px;\r\n\r\n      &-image {\r\n        margin: 0.18rem;\r\n        width: 0.82rem;\r\n        height: 0.82rem;\r\n      }\r\n    }\r\n  }\r\n\r\n  .confirm-tip {\r\n    width: 80%;\r\n    height: 44%;\r\n    margin: auto;\r\n    background: #ffffff;\r\n    border-radius: 16px;\r\n    margin: 50% auto;\r\n\r\n    /deep/.content {\r\n      height: calc(100% - 164px);\r\n      padding: 32px;\r\n      display: flex;\r\n      flex-direction: column;\r\n\r\n      .icon {\r\n        width: 100%;\r\n        height: 100px;\r\n        display: flex;\r\n        margin: 24px 0 28px;\r\n      }\r\n\r\n      .info {\r\n        height: auto;\r\n        font-size: 28px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #555555;\r\n        line-height: 40px;\r\n        text-align: center;\r\n      }\r\n    }\r\n\r\n    /deep/.confirm_btn {\r\n      width: 100%;\r\n      height: 100px;\r\n      display: flex;\r\n\r\n      .btn1 {\r\n        width: 50%;\r\n        height: 100%;\r\n        border-top: 1px solid #dcdee3;\r\n        font-size: 32px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #333333;\r\n        line-height: 100px;\r\n        text-align: center;\r\n      }\r\n\r\n      .btn2 {\r\n        border-right: 1px solid #dcdee3;\r\n      }\r\n    }\r\n  }\r\n\r\n  .tip-tools {\r\n    position: fixed;\r\n    display: flex;\r\n    top: 15%;\r\n    left: 200px;\r\n    border-radius: 16px;\r\n    padding: 24px;\r\n    background: #ffffff;\r\n    box-shadow: 0px 10px 18px 0px rgba(0, 0, 0, 0.06);\r\n    border: 2px solid rgba(23, 144, 254, 0.6);\r\n\r\n    .tipImg {\r\n      width: 32px;\r\n      height: 32px;\r\n      margin-right: 16px;\r\n    }\r\n\r\n    .context {\r\n      font-size: 24px;\r\n      font-family: MicrosoftYaHei;\r\n      color: #1b67d8;\r\n      line-height: 31px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}