{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\MeterReading\\BookIndex.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\MeterReading\\BookIndex.vue","mtime":1708935543695},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IE5hdkJhciwgTGlzdCwgUHVsbFJlZnJlc2gsIFRvYXN0IH0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInCmltcG9ydCB7IGdldFJlYWRpbmdCb29rIH0gZnJvbSAnLi9hcGknCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgW05hdkJhci5uYW1lXTogTmF2QmFyLAogICAgW0xpc3QubmFtZV06IExpc3QsCiAgICBbUHVsbFJlZnJlc2gubmFtZV06IFB1bGxSZWZyZXNoLAogICAgW1RvYXN0Lm5hbWVdOiBUb2FzdAogIH0sCiAgcHJvcHM6IHsKICAgIHR5cGU6IG51bGwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWZyZXNoaW5nOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGluRXhlY3V0aW9uUGFnZTogMSwKICAgICAgdG9kb1BhZ2U6IDEsCiAgICAgIGZpbmlzaGVkUGFnZTogMSwKICAgICAgcGxhbkxpc3Q6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBwYWdlUmVzZXQoKSB7CiAgICAgIHRoaXMuaW5FeGVjdXRpb25QYWdlID0gMQogICAgICB0aGlzLnRvZG9QYWdlID0gMQogICAgICB0aGlzLmZpbmlzaGVkUGFnZSA9IDEKICAgIH0sCiAgICAvLyDpobXpnaLliqDovb0v5LiL5ouJ5Yi35pawCiAgICBvblJlZnJlc2goKSB7CiAgICAgIHRoaXMucGFnZVJlc2V0KCkKICAgICAgdGhpcy5maXJzdFJlcXVlc3RGaW5pc2hlZCA9IGZhbHNlCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCiAgICAvLyDliJfooajliqDovb3mm7TlpJoKICAgIG9uTG9hZCgpIHsKICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICBsZXQgdWlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NzX3VzZXJJZCcpCiAgICAgIGxldCBwYXJhbXMgPSB7fQogICAgICBwYXJhbXMuY2hhcmdlUGVyc29uID0gdWlkCiAgICAgIHBhcmFtcy50eXBlID0gdGhpcy50eXBlID09ICdzdXJ2ZXknID8gJ1pDQlMnIDogJ1NEQ0InCiAgICAgIGdldFJlYWRpbmdCb29rKHBhcmFtcykKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgICAgdGhpcy5wbGFuTGlzdCA9IHJlcy5kYXRhCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgdGhpcy5yZWZyZXNoaW5nID0gZmFsc2UKICAgICAgICAgIHRoaXMuZmlyc3RSZXF1ZXN0RmluaXNoZWQgPSB0cnVlCiAgICAgICAgfSkKICAgIH0sCiAgICB0b1Rhc2soY29kZSkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYm9va0NvZGUnLCBjb2RlKQogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza1R5cGUnLCB0aGlzLnR5cGUpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnVGFza0luZGV4JwogICAgICB9KQogICAgfSwKICAgIGdldExvY2F0aW9uKCkgewogICAgICAvKioKICAgICAgICogewogICAgICAgICAgICAgICJhY2N1cmFjeSI6ICIiLCAgICAvL+WumuS9jeeyvuW6pu+8iEFuZHJvaWTov5Tlm57vvIkKICAgICAgICAgICAgICAiYWRkcmVzcyI6ICLmtZnmsZ/nnIHmna3lt57luILkvZnmna3ljLrmmbrmuqLot6/pnaDov5HkuK3lm70o5p2t5beeKeS6uuW3peaZuuiDveWwj+mVhyIsIO+8iOiLpeivt+axguWbnumAhuWcsOeQhuS9jee9ruS/oeaBr+WImei/lOWbnu+8iQogICAgICAgICAgICAgICJsYXRpdHVkZSI6ICIzMC4yNzA2NDY5NzI2NTYyNTE3IizvvIjlv4Xov5Tlm57vvIkKICAgICAgICAgICAgICAibG9uZ2l0dWRlIjoiMTE5Ljk2NTg2ODA1NTU1NTU2MDUiLO+8iOW/hei/lOWbnu+8iQogICAgICAgICAgICAgICJsb2NUaW1lIjoiMjAyMi0wMy0wOSAwOTo0NToxOSIs77yI5b+F6L+U5Zue77yJCiAgICAgICAgICAgICAgImxvY1R5cGUiOiIiICAgIC8v5a6a5L2N5qih5byP77yIQW5kcm9pZOi/lOWbnu+8iQogICAgICAgICAgfQogICAgICAgKi8KICAgICAgaWYgKHR5cGVvZiB5dWFuY2h1ICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgeXVhbmNodS5sb2NhdGlvbkFNYXAucmVxdWVzdFNpbmdsZUxvY2F0aW9uKAogICAgICAgICAgWycxJ10sCiAgICAgICAgICAocmVzKSA9PiB7CiAgICAgICAgICAgIGxldCB1c2VyUG9zaXRpb24gPSBbcmVzLmxvbmdpdHVkZSwgcmVzLmxhdGl0dWRlXQogICAgICAgICAgICB0aGlzLnVwUG9zaXRpb24odXNlclBvc2l0aW9uKQogICAgICAgICAgfSwKICAgICAgICAgIChlcnIpID0+IHsKCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgVG9hc3QubG9hZGluZyh7CiAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICBmb3JiaWRDbGljazogdHJ1ZQogICAgfSkKICAgIHRoaXMub25SZWZyZXNoKCkKICAgIHRoaXMuZ2V0TG9jYXRpb24oKQogIH0KfQo="},{"version":3,"sources":["BookIndex.vue"],"names":[],"mappings":";AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookIndex.vue","sourceRoot":"src/views/MeterReading","sourcesContent":["<template>\n  <div id='BookIndex'>\n    <fm-pull-refresh id='BookIndex' v-model='refreshing' success-text='刷新成功' @refresh='onRefresh'>\n      <fm-nav-bar title='我的表册' left-arrow @click-left=\"$router.replace('/index')\">\n      </fm-nav-bar>\n      <div class='plan-container'>\n        <fm-list v-model='loading' @load='onLoad' :immediate-check='false'>\n          <div v-for='(item, index) in planList' :key='index' class='list-item' @click='toTask(item.bookCode)'>\n            <img src='@/assets/svg/doc_books.svg'>\n            <span class='ptitle'>{{ item.bookName }}</span>\n          </div>\n        </fm-list>\n        <template v-if='planList && planList.length == 0'>\n          <div class='no-data-img'>\n            <fm-image fit='cover' :src=\"require('@/assets/img/no-data-img.png')\" />\n          </div>\n          <div class='no-data-text'>\n            <div class='no-data-text-descripe'>暂无表册数据</div>\n          </div>\n        </template>\n      </div>\n    </fm-pull-refresh>\n  </div>\n</template>\n<script>\nimport { NavBar, List, PullRefresh, Toast } from 'fawkes-mobile-lib'\nimport { getReadingBook } from './api'\n\nexport default {\n  components: {\n    [NavBar.name]: NavBar,\n    [List.name]: List,\n    [PullRefresh.name]: PullRefresh,\n    [Toast.name]: Toast\n  },\n  props: {\n    type: null\n  },\n  data() {\n    return {\n      refreshing: false,\n      loading: false,\n      inExecutionPage: 1,\n      todoPage: 1,\n      finishedPage: 1,\n      planList: []\n    }\n  },\n  methods: {\n    pageReset() {\n      this.inExecutionPage = 1\n      this.todoPage = 1\n      this.finishedPage = 1\n    },\n    // 页面加载/下拉刷新\n    onRefresh() {\n      this.pageReset()\n      this.firstRequestFinished = false\n      this.loading = true\n      this.getList()\n    },\n    // 列表加载更多\n    onLoad() {\n      this.getList()\n    },\n    getList() {\n      this.loading = false\n      let uid = localStorage.getItem('cs_userId')\n      let params = {}\n      params.chargePerson = uid\n      params.type = this.type == 'survey' ? 'ZCBS' : 'SDCB'\n      getReadingBook(params)\n        .then((res) => {\n          if (res.data) {\n            this.planList = res.data\n          }\n        })\n        .finally(() => {\n          this.loading = false\n          this.refreshing = false\n          this.firstRequestFinished = true\n        })\n    },\n    toTask(code) {\n      localStorage.setItem('bookCode', code)\n      localStorage.setItem('taskType', this.type)\n      this.$router.push({\n        name: 'TaskIndex'\n      })\n    },\n    getLocation() {\n      /**\n       * {\n              \"accuracy\": \"\",    //定位精度（Android返回）\n              \"address\": \"浙江省杭州市余杭区智溢路靠近中国(杭州)人工智能小镇\", （若请求回逆地理位置信息则返回）\n              \"latitude\": \"30.2706469726562517\",（必返回）\n              \"longitude\":\"119.9658680555555605\",（必返回）\n              \"locTime\":\"2022-03-09 09:45:19\",（必返回）\n              \"locType\":\"\"    //定位模式（Android返回）\n          }\n       */\n      if (typeof yuanchu != 'undefined') {\n        yuanchu.locationAMap.requestSingleLocation(\n          ['1'],\n          (res) => {\n            let userPosition = [res.longitude, res.latitude]\n            this.upPosition(userPosition)\n          },\n          (err) => {\n\n          }\n        )\n      }\n    }\n  },\n  mounted() {\n    Toast.loading({\n      message: '加载中...',\n      forbidClick: true\n    })\n    this.onRefresh()\n    this.getLocation()\n  }\n}\n</script>\n\n<style lang='less' scoped>\n#BookIndex {\n  height: 100%;\n  overflow: auto;\n  background-color: #ecf4ff !important;\n\n  /deep/ .fm-nav-bar__content {\n    background-color: #0676fd !important;\n    height: 1.8rem;\n  }\n\n  /deep/ .fm-nav-bar__title {\n    color: #ffffff !important;\n  }\n\n  /deep/ .fm-nav-bar .fm-icon {\n    color: #ffffff !important;\n  }\n\n  /deep/ .fm-pull-refresh {\n    overflow: visible;\n  }\n\n  /* 暂无数据begin */\n\n  .no-data-img {\n    margin: 200px 95px 0 95px;\n  }\n\n  .no-data-text {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .no-data-text-descripe {\n    font-size: 32px;\n    font-weight: 400;\n    color: #999999;\n  }\n\n  .list-item {\n    width: 100%;\n    height: 80px;\n    // padding: 0 10px;\n    line-height: 80px;\n    border-bottom: 1px solid #fff;\n    background-color: #ecf4ff;\n    display: flex;\n    justify-content: left;\n\n    .ptitle {\n      width: 80%;\n      padding-left: 6px;\n      font-size: 24px;\n      font-weight: 500;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      text-align: left;\n    }\n  }\n}\n</style>\n"]}]}