{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\SmartSite\\MonitorManagement.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\SmartSite\\MonitorManagement.vue","mtime":1705912800070},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBOYXZCYXIgfSBmcm9tICdmYXdrZXMtbW9iaWxlLWxpYicNCmltcG9ydCB7IGdldE1vbml0b3JEYXRhLCBnZXRNb25pdG9yVG9rZW4sIGdldE1vbml0b3JMb2NhdGlvbiB9IGZyb20gJy4vYXBpJw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgW05hdkJhci5uYW1lXTogTmF2QmFyLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBwb3J0YWxJZDogJzEyNzA2MzQwNTc4Nzc4NjQ0NTAnLCAvL+aaguaXtuS9v+eUqOm7mOiupOeahA0KICAgICAgdGl0bGU6ICdBbGwnLA0KICAgICAgb3B0aW9uc0xpc3Q6IFt7IGtleTogJ0FsbCcsIHZhbHVlOiAn5YWo6YOoJyB9XSwNCiAgICAgIGhlaWdodDogMjM3LA0KICAgICAgd2lkdGg6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLSAzMCwNCiAgICAgIG1vbml0b3JMaXN0OiBbXSwNCiAgICAgIGRhdGFMaXN0OiBbXSwNCiAgICAgIHNyY18xOiAnaHR0cHM6Ly9vcGVuLnlzNy5jb20vZXpvcGVuL2g1L2lmcmFtZV9zZT8nLA0KICAgICAgc3JjXzI6ICd1cmw9ZXpvcGVuOi8vb3Blbi55czcuY29tLycsDQogICAgICBzcmNfMzogJycsIC8v6K6+5aSH5Y+3DQogICAgICBzcmNfNDogJy8nLA0KICAgICAgc3JjXzU6ICcnLCAvL+mAmumBk+WPtw0KICAgICAgc3JjXzY6ICcuaGQubGl2ZScsDQogICAgICBzcmNfNzogJyZhdXRvcGxheT0xJmF1ZGlvPTAnLA0KICAgICAgc3JjXzg6ICcmYWNjZXNzVG9rZW49JywNCiAgICAgIHNyY185OiAnYXQuNzlmZzdlNHozaWt5Yms3NjBzbWNsZDE0Y2V0YmVvbm4tMzYwN3MxaHd0ei0xeHVuYnNwLWJlcW1iczl2eScsIC8vYWNjZXNzX3Rva2VuDQogICAgICBtb25pdG9yOiB7fSwNCiAgICAgIHpvb206IDE3LA0KICAgICAgY2VudGVyOiBbDQogICAgICAgIHBhcnNlRmxvYXQodGhpcy4kcm91dGUucXVlcnkubG9uZ2l0dWRlUG9zaXRpb24pLA0KICAgICAgICBwYXJzZUZsb2F0KHRoaXMuJHJvdXRlLnF1ZXJ5LmxhdGl0dWRlUG9zaXRpb24pLA0KICAgICAgXSwNCiAgICAgIC8vIG1hcmtlcnM6IFtdLA0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldFRva2VuKCkNCiAgICB0aGlzLmdldE1vbml0b3JMb2NhdGlvbigpDQogIH0sDQogIHdhdGNoOiB7fSwNCiAgbWV0aG9kczogew0KICAgIGdldFRva2VuKCkgew0KICAgICAgdGhpcy4kbG9hZGluZy5zaG93KCkNCiAgICAgIGdldE1vbml0b3JUb2tlbigpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLnN0YXR1cykgew0KICAgICAgICAgIHRoaXMuc3JjXzkgPSByZXMuZGF0YS5hY2Nlc3NUb2tlbg0KICAgICAgICAgIHRoaXMuZ2V0TW9uaXRvckxpc3QoKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgYmFja2hvbWUoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIuaGlzdG9yeS5nbygtMSkNCiAgICB9LA0KICAgIGdldE1vbml0b3JMaXN0KCkgew0KICAgICAgZ2V0TW9uaXRvckRhdGEoew0KICAgICAgICBwYWdlOiAxLA0KICAgICAgICBzaXplOiAxMDAsDQogICAgICAgIG9yZGVyOiAnY3JlYXRlX2RhdGUgZGVzYycsDQogICAgICAgIGxpa2U6ICcnLA0KICAgICAgICBwb3J0YWxJZDogdGhpcy5wb3J0YWxJZCwNCiAgICAgICAgZW50aXR5TmFtZTogJ01vbml0b3JNYW5hZ2VtZW50JywNCiAgICAgICAgc2VhcmNoUGFyYW1MaXN0OiBbJ21vbml0b3JOYW1lJywgJ21vbml0b3JDb2RlJywgJ3VzZXJGdWxsbmFtZSddLA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHJlcy5kYXRhLmxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgaXRlbS51cmwgPSB0aGlzLmdldFVybChpdGVtKQ0KICAgICAgICAgIH0pDQoNCiAgICAgICAgICB0aGlzLm1vbml0b3JMaXN0ID0gcmVzLmRhdGEubGlzdA0KICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5uYW1lKSB7DQogICAgICAgICAgICB0aGlzLm1vbml0b3IgPSB0aGlzLm1vbml0b3JMaXN0LmZpbHRlcigNCiAgICAgICAgICAgICAgKGRhdGEpID0+IGRhdGEubW9uaXRvck5hbWUgPT0gdGhpcy4kcm91dGUucXVlcnkubmFtZQ0KICAgICAgICAgICAgKVswXQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLm1vbml0b3IgPSB0aGlzLm1vbml0b3JMaXN0WzBdDQogICAgICAgICAgfQ0KDQogICAgICAgICAgdGhpcy5kYXRhTGlzdCA9IHRoaXMubW9uaXRvckxpc3QNCiAgICAgICAgfSkNCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgIHRoaXMuJGxvYWRpbmcuaGlkZSgpDQogICAgICAgIH0pDQogICAgfSwNCiAgICBnZXRVcmwoaXRlbSkgew0KICAgICAgY29uc3Qgc3JjXzMgPSBpdGVtLmVxdWlwbWVudE51bQ0KICAgICAgY29uc3Qgc3JjXzUgPSBpdGVtLmVxdWlwbWVudENvZGUNCiAgICAgIC8vIGNvbnN0IHNyY185ID0gaXRlbS5hY2Nlc3NfdG9rZW47DQogICAgICBjb25zdCBzcmNfY2FtZXJhID0NCiAgICAgICAgdGhpcy5zcmNfMSArDQogICAgICAgIHRoaXMuc3JjXzIgKw0KICAgICAgICBzcmNfMyArDQogICAgICAgIHRoaXMuc3JjXzQgKw0KICAgICAgICBzcmNfNSArDQogICAgICAgIHRoaXMuc3JjXzYgKw0KICAgICAgICB0aGlzLnNyY183ICsNCiAgICAgICAgdGhpcy5zcmNfOCArDQogICAgICAgIHRoaXMuc3JjXzkNCiAgICAgIHJldHVybiBzcmNfY2FtZXJhDQogICAgfSwNCiAgICBnZXRNb25pdG9yTG9jYXRpb24oKSB7DQogICAgICBnZXRNb25pdG9yTG9jYXRpb24odGhpcy5wb3J0YWxJZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuc3RhdHVzKSB7DQogICAgICAgICAgcmVzLmRhdGEudmlkZW9EYXRhLmZvckVhY2goKCkgPT4gew0KICAgICAgICAgICAgLy8gdGhpcy5tYXJrZXJzLnB1c2goew0KICAgICAgICAgICAgLy8gICBwb3NpdGlvbjogW2RhdGEubG9uZ2l0dWRlUG9zaXRpb24sIGRhdGEubGF0aXR1ZGVQb3NpdGlvbl0sDQogICAgICAgICAgICAvLyAgIGxhYmVsOiB7IGNvbnRlbnQ6IGRhdGEubW9uaXRvck5hbWUsIG9mZnNldDogWy0zMCwgLTI1XSB9LA0KICAgICAgICAgICAgLy8gICB2aWQ6IGRhdGEubW9uaXRvck5hbWUsDQogICAgICAgICAgICAvLyB9KTsNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogIH0sDQp9DQo="},{"version":3,"sources":["MonitorManagement.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MonitorManagement.vue","sourceRoot":"src/views/SmartSite","sourcesContent":["<template>\r\n  <div class=\"monitor-container\">\r\n    <fm-nav-bar\r\n      title=\"监控管理\"\r\n      background=\"#2377fc\"\r\n      left-text=\"\"\r\n      left-arrow\r\n      @click-left=\"$router.go(-1)\"\r\n    >\r\n    </fm-nav-bar>\r\n    <div class=\"monitor-box\" v-if=\"monitor\">\r\n      <div id=\"monitorItem\">\r\n        <iframe :id=\"monitor.id\" :src=\"monitor.url\" width=\"100%\" height=\"100%\" scrolling=\"no\">\r\n        </iframe>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { NavBar } from 'fawkes-mobile-lib'\r\nimport { getMonitorData, getMonitorToken, getMonitorLocation } from './api'\r\nexport default {\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n  },\r\n  data() {\r\n    return {\r\n      portalId: '1270634057877864450', //暂时使用默认的\r\n      title: 'All',\r\n      optionsList: [{ key: 'All', value: '全部' }],\r\n      height: 237,\r\n      width: document.body.clientWidth - 30,\r\n      monitorList: [],\r\n      dataList: [],\r\n      src_1: 'https://open.ys7.com/ezopen/h5/iframe_se?',\r\n      src_2: 'url=ezopen://open.ys7.com/',\r\n      src_3: '', //设备号\r\n      src_4: '/',\r\n      src_5: '', //通道号\r\n      src_6: '.hd.live',\r\n      src_7: '&autoplay=1&audio=0',\r\n      src_8: '&accessToken=',\r\n      src_9: 'at.79fg7e4z3ikybk760smcld14cetbeonn-3607s1hwtz-1xunbsp-beqmbs9vy', //access_token\r\n      monitor: {},\r\n      zoom: 17,\r\n      center: [\r\n        parseFloat(this.$route.query.longitudePosition),\r\n        parseFloat(this.$route.query.latitudePosition),\r\n      ],\r\n      // markers: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getToken()\r\n    this.getMonitorLocation()\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    getToken() {\r\n      this.$loading.show()\r\n      getMonitorToken().then((res) => {\r\n        if (res.status) {\r\n          this.src_9 = res.data.accessToken\r\n          this.getMonitorList()\r\n        }\r\n      })\r\n    },\r\n    backhome() {\r\n      this.$router.history.go(-1)\r\n    },\r\n    getMonitorList() {\r\n      getMonitorData({\r\n        page: 1,\r\n        size: 100,\r\n        order: 'create_date desc',\r\n        like: '',\r\n        portalId: this.portalId,\r\n        entityName: 'MonitorManagement',\r\n        searchParamList: ['monitorName', 'monitorCode', 'userFullname'],\r\n      })\r\n        .then((res) => {\r\n          res.data.list.forEach((item) => {\r\n            item.url = this.getUrl(item)\r\n          })\r\n\r\n          this.monitorList = res.data.list\r\n          if (this.$route.query.name) {\r\n            this.monitor = this.monitorList.filter(\r\n              (data) => data.monitorName == this.$route.query.name\r\n            )[0]\r\n          } else {\r\n            this.monitor = this.monitorList[0]\r\n          }\r\n\r\n          this.dataList = this.monitorList\r\n        })\r\n        .finally(() => {\r\n          this.$loading.hide()\r\n        })\r\n    },\r\n    getUrl(item) {\r\n      const src_3 = item.equipmentNum\r\n      const src_5 = item.equipmentCode\r\n      // const src_9 = item.access_token;\r\n      const src_camera =\r\n        this.src_1 +\r\n        this.src_2 +\r\n        src_3 +\r\n        this.src_4 +\r\n        src_5 +\r\n        this.src_6 +\r\n        this.src_7 +\r\n        this.src_8 +\r\n        this.src_9\r\n      return src_camera\r\n    },\r\n    getMonitorLocation() {\r\n      getMonitorLocation(this.portalId).then((res) => {\r\n        if (res.status) {\r\n          res.data.videoData.forEach(() => {\r\n            // this.markers.push({\r\n            //   position: [data.longitudePosition, data.latitudePosition],\r\n            //   label: { content: data.monitorName, offset: [-30, -25] },\r\n            //   vid: data.monitorName,\r\n            // });\r\n          })\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/ .fm-nav-bar__title {\r\n  color: #f9f9f9;\r\n  font-family: PingFangSC, PingFangSC-Medium;\r\n  font-weight: 600;\r\n}\r\n.background {\r\n  background-color: white;\r\n}\r\n.monitor-container {\r\n  background-color: #f5f6fa;\r\n  height: 100%;\r\n  font-family: PingFang SC Regular;\r\n  font-size: 14px;\r\n  overflow: hidden;\r\n}\r\n.monitor-title {\r\n  height: 36px;\r\n  top: 8px;\r\n  box-sizing: border-box;\r\n}\r\n.monitor-title /deep/ .vux-cell-value {\r\n  text-align: left;\r\n}\r\n.monitor-radio-slot {\r\n  text-align: center;\r\n  padding: 8px 0;\r\n  color: #888;\r\n}\r\n.monitor-content {\r\n  margin: 18px 15px;\r\n  border-radius: 1rem;\r\n}\r\n.monitor-content-img {\r\n  margin-right: 10px;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  height: 50%;\r\n}\r\n.monitor-content-title {\r\n  margin-left: 15px;\r\n  font-weight: 800;\r\n  font-size: 16px;\r\n}\r\n.monitor-content-title:before {\r\n  content: '';\r\n  display: block;\r\n  height: 1.4rem;\r\n  width: 4px;\r\n  position: absolute;\r\n  background: linear-gradient(rgba(160, 225, 255, 1), rgba(54, 192, 255, 1));\r\n  top: 7px;\r\n  border-radius: 2px;\r\n}\r\n.weui-cell {\r\n  padding: 0;\r\n}\r\n.mapbox {\r\n  position: relative;\r\n  height: 350px;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.monitor-box {\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n#monitorItem {\r\n  height: 50%;\r\n  overflow: hidden;\r\n}\r\n\r\n/deep/.fm-icon {\r\n  color: #fff !important;\r\n}\r\n</style>\r\n"]}]}