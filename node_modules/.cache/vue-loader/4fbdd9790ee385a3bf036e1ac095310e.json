{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\SmartSite\\MonitorManagement.vue?vue&type=style&index=0&id=2678aa34&lang=less&scoped=true","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\SmartSite\\MonitorManagement.vue","mtime":1705912800070},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovZGVlcC8gLmZtLW5hdi1iYXJfX3RpdGxlIHsNCiAgY29sb3I6ICNmOWY5Zjk7DQogIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLCBQaW5nRmFuZ1NDLU1lZGl1bTsNCiAgZm9udC13ZWlnaHQ6IDYwMDsNCn0NCi5iYWNrZ3JvdW5kIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQp9DQoubW9uaXRvci1jb250YWluZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNmZhOw0KICBoZWlnaHQ6IDEwMCU7DQogIGZvbnQtZmFtaWx5OiBQaW5nRmFuZyBTQyBSZWd1bGFyOw0KICBmb250LXNpemU6IDE0cHg7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQoubW9uaXRvci10aXRsZSB7DQogIGhlaWdodDogMzZweDsNCiAgdG9wOiA4cHg7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQoubW9uaXRvci10aXRsZSAvZGVlcC8gLnZ1eC1jZWxsLXZhbHVlIHsNCiAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCi5tb25pdG9yLXJhZGlvLXNsb3Qgew0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIHBhZGRpbmc6IDhweCAwOw0KICBjb2xvcjogIzg4ODsNCn0NCi5tb25pdG9yLWNvbnRlbnQgew0KICBtYXJnaW46IDE4cHggMTVweDsNCiAgYm9yZGVyLXJhZGl1czogMXJlbTsNCn0NCi5tb25pdG9yLWNvbnRlbnQtaW1nIHsNCiAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogNTAlOw0KICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogIGhlaWdodDogNTAlOw0KfQ0KLm1vbml0b3ItY29udGVudC10aXRsZSB7DQogIG1hcmdpbi1sZWZ0OiAxNXB4Ow0KICBmb250LXdlaWdodDogODAwOw0KICBmb250LXNpemU6IDE2cHg7DQp9DQoubW9uaXRvci1jb250ZW50LXRpdGxlOmJlZm9yZSB7DQogIGNvbnRlbnQ6ICcnOw0KICBkaXNwbGF5OiBibG9jazsNCiAgaGVpZ2h0OiAxLjRyZW07DQogIHdpZHRoOiA0cHg7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHJnYmEoMTYwLCAyMjUsIDI1NSwgMSksIHJnYmEoNTQsIDE5MiwgMjU1LCAxKSk7DQogIHRvcDogN3B4Ow0KICBib3JkZXItcmFkaXVzOiAycHg7DQp9DQoud2V1aS1jZWxsIHsNCiAgcGFkZGluZzogMDsNCn0NCi5tYXBib3ggew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIGhlaWdodDogMzUwcHg7DQogIHdpZHRoOiAxMDAlOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoubW9uaXRvci1ib3ggew0KICBoZWlnaHQ6IDEwMCU7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCiNtb25pdG9ySXRlbSB7DQogIGhlaWdodDogNTAlOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQovZGVlcC8uZm0taWNvbiB7DQogIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7DQp9DQo="},{"version":3,"sources":["MonitorManagement.vue"],"names":[],"mappings":";AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"MonitorManagement.vue","sourceRoot":"src/views/SmartSite","sourcesContent":["<template>\r\n  <div class=\"monitor-container\">\r\n    <fm-nav-bar\r\n      title=\"监控管理\"\r\n      background=\"#2377fc\"\r\n      left-text=\"\"\r\n      left-arrow\r\n      @click-left=\"$router.go(-1)\"\r\n    >\r\n    </fm-nav-bar>\r\n    <div class=\"monitor-box\" v-if=\"monitor\">\r\n      <div id=\"monitorItem\">\r\n        <iframe :id=\"monitor.id\" :src=\"monitor.url\" width=\"100%\" height=\"100%\" scrolling=\"no\">\r\n        </iframe>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { NavBar } from 'fawkes-mobile-lib'\r\nimport { getMonitorData, getMonitorToken, getMonitorLocation } from './api'\r\nexport default {\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n  },\r\n  data() {\r\n    return {\r\n      portalId: '1270634057877864450', //暂时使用默认的\r\n      title: 'All',\r\n      optionsList: [{ key: 'All', value: '全部' }],\r\n      height: 237,\r\n      width: document.body.clientWidth - 30,\r\n      monitorList: [],\r\n      dataList: [],\r\n      src_1: 'https://open.ys7.com/ezopen/h5/iframe_se?',\r\n      src_2: 'url=ezopen://open.ys7.com/',\r\n      src_3: '', //设备号\r\n      src_4: '/',\r\n      src_5: '', //通道号\r\n      src_6: '.hd.live',\r\n      src_7: '&autoplay=1&audio=0',\r\n      src_8: '&accessToken=',\r\n      src_9: 'at.79fg7e4z3ikybk760smcld14cetbeonn-3607s1hwtz-1xunbsp-beqmbs9vy', //access_token\r\n      monitor: {},\r\n      zoom: 17,\r\n      center: [\r\n        parseFloat(this.$route.query.longitudePosition),\r\n        parseFloat(this.$route.query.latitudePosition),\r\n      ],\r\n      // markers: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getToken()\r\n    this.getMonitorLocation()\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    getToken() {\r\n      this.$loading.show()\r\n      getMonitorToken().then((res) => {\r\n        if (res.status) {\r\n          this.src_9 = res.data.accessToken\r\n          this.getMonitorList()\r\n        }\r\n      })\r\n    },\r\n    backhome() {\r\n      this.$router.history.go(-1)\r\n    },\r\n    getMonitorList() {\r\n      getMonitorData({\r\n        page: 1,\r\n        size: 100,\r\n        order: 'create_date desc',\r\n        like: '',\r\n        portalId: this.portalId,\r\n        entityName: 'MonitorManagement',\r\n        searchParamList: ['monitorName', 'monitorCode', 'userFullname'],\r\n      })\r\n        .then((res) => {\r\n          res.data.list.forEach((item) => {\r\n            item.url = this.getUrl(item)\r\n          })\r\n\r\n          this.monitorList = res.data.list\r\n          if (this.$route.query.name) {\r\n            this.monitor = this.monitorList.filter(\r\n              (data) => data.monitorName == this.$route.query.name\r\n            )[0]\r\n          } else {\r\n            this.monitor = this.monitorList[0]\r\n          }\r\n\r\n          this.dataList = this.monitorList\r\n        })\r\n        .finally(() => {\r\n          this.$loading.hide()\r\n        })\r\n    },\r\n    getUrl(item) {\r\n      const src_3 = item.equipmentNum\r\n      const src_5 = item.equipmentCode\r\n      // const src_9 = item.access_token;\r\n      const src_camera =\r\n        this.src_1 +\r\n        this.src_2 +\r\n        src_3 +\r\n        this.src_4 +\r\n        src_5 +\r\n        this.src_6 +\r\n        this.src_7 +\r\n        this.src_8 +\r\n        this.src_9\r\n      return src_camera\r\n    },\r\n    getMonitorLocation() {\r\n      getMonitorLocation(this.portalId).then((res) => {\r\n        if (res.status) {\r\n          res.data.videoData.forEach(() => {\r\n            // this.markers.push({\r\n            //   position: [data.longitudePosition, data.latitudePosition],\r\n            //   label: { content: data.monitorName, offset: [-30, -25] },\r\n            //   vid: data.monitorName,\r\n            // });\r\n          })\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/ .fm-nav-bar__title {\r\n  color: #f9f9f9;\r\n  font-family: PingFangSC, PingFangSC-Medium;\r\n  font-weight: 600;\r\n}\r\n.background {\r\n  background-color: white;\r\n}\r\n.monitor-container {\r\n  background-color: #f5f6fa;\r\n  height: 100%;\r\n  font-family: PingFang SC Regular;\r\n  font-size: 14px;\r\n  overflow: hidden;\r\n}\r\n.monitor-title {\r\n  height: 36px;\r\n  top: 8px;\r\n  box-sizing: border-box;\r\n}\r\n.monitor-title /deep/ .vux-cell-value {\r\n  text-align: left;\r\n}\r\n.monitor-radio-slot {\r\n  text-align: center;\r\n  padding: 8px 0;\r\n  color: #888;\r\n}\r\n.monitor-content {\r\n  margin: 18px 15px;\r\n  border-radius: 1rem;\r\n}\r\n.monitor-content-img {\r\n  margin-right: 10px;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  height: 50%;\r\n}\r\n.monitor-content-title {\r\n  margin-left: 15px;\r\n  font-weight: 800;\r\n  font-size: 16px;\r\n}\r\n.monitor-content-title:before {\r\n  content: '';\r\n  display: block;\r\n  height: 1.4rem;\r\n  width: 4px;\r\n  position: absolute;\r\n  background: linear-gradient(rgba(160, 225, 255, 1), rgba(54, 192, 255, 1));\r\n  top: 7px;\r\n  border-radius: 2px;\r\n}\r\n.weui-cell {\r\n  padding: 0;\r\n}\r\n.mapbox {\r\n  position: relative;\r\n  height: 350px;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.monitor-box {\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n#monitorItem {\r\n  height: 50%;\r\n  overflow: hidden;\r\n}\r\n\r\n/deep/.fm-icon {\r\n  color: #fff !important;\r\n}\r\n</style>\r\n"]}]}