{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\DispatchCenter\\components\\SchedulingLog\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\DispatchCenter\\components\\SchedulingLog\\index.vue","mtime":1708928163370},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgKiBhcyBhcGkgZnJvbSAnLi9hcGknDQovLyDkuIvmi4npgInmi6nmoYYNCmltcG9ydCBTZWxlY3QgZnJvbSAnLi9TZWxlY3QudnVlJw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJTY2hlZHVsaW5nTG9nIiwNCiAgICBjb21wb25lbnRzOiB7IFNlbGVjdCB9LA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAvLyDnrZvpgIkNCiAgICAgICAgICAgIGRhdGVUeXBlTGlzdDogWw0KICAgICAgICAgICAgICAgIHsgdHlwZTogMSwgbmFtZTogJ+WFqOmDqOaXtumXtCcsIHZhbHVlOiAn5YWo6YOo5pe26Ze0JyB9LA0KICAgICAgICAgICAgICAgIHsgdHlwZTogMSwgbmFtZTogJ+i/keS4gOWRqCcsIHZhbHVlOiAn6L+R5LiA5ZGoJyB9LA0KICAgICAgICAgICAgICAgIHsgdHlwZTogMSwgbmFtZTogJ+i/keS4gOaciCcsIHZhbHVlOiAn6L+R5LiA5pyIJyB9LA0KICAgICAgICAgICAgICAgIHsgdHlwZTogMSwgbmFtZTogJ+i/keS4ieaciCcsIHZhbHVlOiAn6L+R5LiJ5pyIJyB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIHdlYXRoZXJUeXBlTGlzdDogWw0KICAgICAgICAgICAgICAgIHsgdHlwZTogMiwgbmFtZTogJ+WFqOmDqOexu+WeiycsIHZhbHVlOiAn5YWo6YOo57G75Z6LJyB9LA0KICAgICAgICAgICAgICAgIHsgdHlwZTogMiwgbmFtZTogJ+WkmuS6kScsIHZhbHVlOiAn5aSa5LqRJyB9LA0KICAgICAgICAgICAgICAgIHsgdHlwZTogMiwgbmFtZTogJ+mbqCcsIHZhbHVlOiAn6ZuoJyB9LA0KICAgICAgICAgICAgICAgIHsgdHlwZTogMiwgbmFtZTogJ+mbqicsIHZhbHVlOiAn6ZuqJyB9LA0KICAgICAgICAgICAgICAgIHsgdHlwZTogMiwgbmFtZTogJ+aZtCcsIHZhbHVlOiAn5pm0JyB9DQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgZGF0ZVR5cGU6ICflhajpg6jml7bpl7QnLA0KICAgICAgICAgICAgc3RhcnREYXRlOiAiIiwNCiAgICAgICAgICAgIGVuZERhdGU6ICIiLA0KICAgICAgICAgICAgd2VhdGhlclR5cGU6ICflhajpg6jnsbvlnosnLA0KICAgICAgICAgICAgbG9nTGlzdDogW10sDQogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgICAgICAgIGZpbmlzaGVkOiBmYWxzZSwNCiAgICAgICAgICAgIHJlZnJlc2hpbmc6IGZhbHNlLA0KICAgICAgICAgICAgcGFnZU51bTogMSwNCiAgICAgICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgfQ0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgZGF0ZVR5cGU6IHsNCiAgICAgICAgICAgIGhhbmRsZXIodmFsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEYXRld2VhdGhlcih2YWwpDQogICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICAgIHdlYXRoZXJUeXBlOiB7DQogICAgICAgICAgICBoYW5kbGVyKHZhbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGF0ZXdlYXRoZXIodmFsKQ0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLy8gc2VsZWN05qGG6YCJ5oup5Zue6LCDDQogICAgICAgIGdldFZhbHVlKHR5cGUsIG5hbWUsIHZhbHVlKSB7DQogICAgICAgICAgICBpZiAodHlwZSA9PT0gMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVR5cGUgPSB2YWx1ZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAyKSB7DQogICAgICAgICAgICAgICAgdGhpcy53ZWF0aGVyVHlwZSA9IHZhbHVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vIOmhtemdouWKoOi9vS/kuIvmi4nliLfmlrANCiAgICAgICAgb25SZWZyZXNoKCkgew0KICAgICAgICAgICAgLy8gdGhpcy5wYWdlUmVzZXQoKQ0KICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICAgICAgfSwNCiAgICAgICAgLy8gLy8g5YiX6KGo5Yqg6L295pu05aSaDQogICAgICAgIG9uTG9hZCgpIHsNCiAgICAgICAgICAgIHRoaXMucGFnZU51bSA9IHRoaXMucGFnZU51bSArIDENCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgIH0sDQogICAgICAgIC8vIC8vIOmHjee9ruWIl+ihqHBhZ2UsbGlzdOWAvA0KICAgICAgICAvLyBwYWdlUmVzZXQoKSB7DQogICAgICAgIC8vICAgICB0aGlzLnBhZ2VOdW0gPSAxDQogICAgICAgIC8vICAgICB0aGlzLmxvZ0xpc3QgPSBbXQ0KICAgICAgICAvLyB9LA0KICAgICAgICAvLyDojrflj5bliJfooajmlbDmja4NCiAgICAgICAgY2hhbmdlRGF0ZXdlYXRoZXIoKSB7DQogICAgICAgICAgICBsZXQgc3RhcnRUaW1lID0gJycNCiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5kYXRlVHlwZSkgew0KICAgICAgICAgICAgICAgIGNhc2UgJ+i/keS4gOWRqCc6DQogICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRoaXMuJGRheWpzKCkuc3VidHJhY3QoNywgJ2RheScpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpDQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ+i/keS4gOaciCc6DQogICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRoaXMuJGRheWpzKCkuc3VidHJhY3QoMSwgJ21vbnRoJykuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAn6L+R5LiJ5pyIJzoNCiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gdGhpcy4kZGF5anMoKS5zdWJ0cmFjdCgzLCAnbW9udGgnKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9ICcnDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHN0YXJ0VGltZQ0KICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gdGhpcy4kZGF5anMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKQ0KICAgICAgICB9LA0KICAgICAgICBnZXRMaXN0KCkgew0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgICAgICAgICBwYWdlOiAxLA0KICAgICAgICAgICAgICAgIHNpemU6IDIwLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5kYXRlVHlwZSAhPSAn5YWo6YOo5pe26Ze0JyA/IHBhcmFtcy5zdGFydFRpbWUxID0gdGhpcy5zdGFydERhdGUgOiAnJw0KICAgICAgICAgICAgdGhpcy5kYXRlVHlwZSAhPSAn5YWo6YOo5pe26Ze0JyA/IHBhcmFtcy5lbmRUaW1lMSA9IHRoaXMuZW5kRGF0ZSA6ICcnDQogICAgICAgICAgICB0aGlzLndlYXRoZXJUeXBlICE9ICflhajpg6jnsbvlnosnID8gcGFyYW1zLndlYXRoZXIgPSB0aGlzLndlYXRoZXJUeXBlIDogJycNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwYXJhbXM6ICcsIHBhcmFtcyk7DQogICAgICAgICAgICBhcGkuZ2V0VGFibGVEYXRhKHBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXM6ICcsIHJlcyk7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dMaXN0ID0gcmVzLmRhdGEucmVjb3Jkcw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGp1bXAoaXRlbSkgew0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICAgICAgICAgIG5hbWU6ICJkZXRhaWxMb2ciLA0KICAgICAgICAgICAgICAgIHF1ZXJ5OiB7IGl0ZW0gfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/DispatchCenter/components/SchedulingLog","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <fm-nav-bar title=\"调度日志\" left-arrow @click-left=\"$router.go(-1)\" />\r\n        <div class=\"selectStyle\">\r\n            <Select :selectData=\"dateTypeList\" :selValue=\"dateType\" color=\"white\" @getValue=\"getValue\"></Select>\r\n            <Select :selectData=\"weatherTypeList\" :selValue=\"weatherType\" color=\"white\" @getValue=\"getValue\"></Select>\r\n        </div>\r\n        <div class=\"list-container\">\r\n            <fm-pull-refresh style=\"height: 100%;overflow: overlay;\" v-model=\"refreshing\" success-text=\"刷新成功\"\r\n                @refresh=\"onRefresh\">\r\n                <fm-list :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n                    <!-- <fm-cell v-for=\"(item, index) in logList\" :key=\"index\" :title=\"item.logName\" /> -->\r\n                    <div class=\"infoCard\" v-for=\"(item, index) in logList\" :key=\"index\">\r\n                        <img style=\"width:5px;height:30px;float: left;margin-right: 4px;margin-top: 10px;\"\r\n                            src=\"@assets/img/dispatchCenter/schedulingEvents/标题.png\" alt=\"\">\r\n                        <span class=\"title\">调度日志</span>\r\n                        <fm-button text style=\"float: right;color: #1B67D8;padding: 15px;\" @click=\"jump(item)\">查看\r\n                        </fm-button>\r\n                        <div class=\"under\">\r\n                            <div class=\"under-div\"><i class=\"fm-icon fm-icon-underway-o\"></i>\r\n                                &nbsp;{{ item.logTime }}&nbsp;</div>\r\n                            <div class=\"under-div\">&nbsp;{{ item.weather }}</div>\r\n                        </div>\r\n                    </div>\r\n                </fm-list>\r\n            </fm-pull-refresh>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as api from './api'\r\n// 下拉选择框\r\nimport Select from './Select.vue'\r\nexport default {\r\n    name: \"SchedulingLog\",\r\n    components: { Select },\r\n    data() {\r\n        return {\r\n            // 筛选\r\n            dateTypeList: [\r\n                { type: 1, name: '全部时间', value: '全部时间' },\r\n                { type: 1, name: '近一周', value: '近一周' },\r\n                { type: 1, name: '近一月', value: '近一月' },\r\n                { type: 1, name: '近三月', value: '近三月' },\r\n            ],\r\n            weatherTypeList: [\r\n                { type: 2, name: '全部类型', value: '全部类型' },\r\n                { type: 2, name: '多云', value: '多云' },\r\n                { type: 2, name: '雨', value: '雨' },\r\n                { type: 2, name: '雪', value: '雪' },\r\n                { type: 2, name: '晴', value: '晴' }\r\n            ],\r\n            dateType: '全部时间',\r\n            startDate: \"\",\r\n            endDate: \"\",\r\n            weatherType: '全部类型',\r\n            logList: [],\r\n            loading: false,\r\n            finished: false,\r\n            refreshing: false,\r\n            pageNum: 1,\r\n            pageSize: 10,\r\n        }\r\n    },\r\n    watch: {\r\n        dateType: {\r\n            handler(val) {\r\n                this.changeDateweather(val)\r\n                this.getList()\r\n            },\r\n        },\r\n        weatherType: {\r\n            handler(val) {\r\n                this.changeDateweather(val)\r\n                this.getList()\r\n            },\r\n        },\r\n    },\r\n    mounted() {\r\n        this.getList()\r\n    },\r\n    methods: {\r\n        // select框选择回调\r\n        getValue(type, name, value) {\r\n            if (type === 1) {\r\n                this.dateType = value\r\n            } else if (type === 2) {\r\n                this.weatherType = value\r\n            }\r\n        },\r\n        // 页面加载/下拉刷新\r\n        onRefresh() {\r\n            // this.pageReset()\r\n            this.loading = false\r\n            this.finished = false\r\n            this.getList()\r\n        },\r\n        // // 列表加载更多\r\n        onLoad() {\r\n            this.pageNum = this.pageNum + 1\r\n            this.getList()\r\n        },\r\n        // // 重置列表page,list值\r\n        // pageReset() {\r\n        //     this.pageNum = 1\r\n        //     this.logList = []\r\n        // },\r\n        // 获取列表数据\r\n        changeDateweather() {\r\n            let startTime = ''\r\n            switch (this.dateType) {\r\n                case '近一周':\r\n                    startTime = this.$dayjs().subtract(7, 'day').format('YYYY-MM-DD HH:mm:ss')\r\n                    break;\r\n                case '近一月':\r\n                    startTime = this.$dayjs().subtract(1, 'month').format('YYYY-MM-DD HH:mm:ss')\r\n                    break;\r\n                case '近三月':\r\n                    startTime = this.$dayjs().subtract(3, 'month').format('YYYY-MM-DD HH:mm:ss')\r\n                    break\r\n                default:\r\n                    startTime = ''\r\n                    break\r\n            }\r\n            this.startDate = startTime\r\n            this.endDate = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n        },\r\n        getList() {\r\n            let params = {\r\n                page: 1,\r\n                size: 20,\r\n            }\r\n            this.dateType != '全部时间' ? params.startTime1 = this.startDate : ''\r\n            this.dateType != '全部时间' ? params.endTime1 = this.endDate : ''\r\n            this.weatherType != '全部类型' ? params.weather = this.weatherType : ''\r\n            console.log('params: ', params);\r\n            api.getTableData(params).then(res => {\r\n                console.log('res: ', res);\r\n                if (res.status) {\r\n                    this.logList = res.data.records\r\n                    this.refreshing = false\r\n                    this.loading = false\r\n                    this.finished = true\r\n                }\r\n            })\r\n        },\r\n        jump(item) {\r\n            this.$router.push({\r\n                name: \"detailLog\",\r\n                query: { item }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main {\r\n    height: 100%;\r\n}\r\n\r\n.selectStyle {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    width: 690px;\r\n    margin: 24px auto 12px;\r\n    background-color: #ffffff;\r\n}\r\n\r\n.list-container {\r\n    height: calc(100% - 208px);\r\n    overflow: auto;\r\n    background-color: #F5F7F9;\r\n\r\n    .infoCard {\r\n        // width: 690px;\r\n        // height: 160px;\r\n        background: #FFFFFF;\r\n        border-radius: 16px;\r\n        margin: 28px;\r\n\r\n        .title {\r\n            font-size: 36px;\r\n            font-family: PingFangSC-Semibold, PingFang SC;\r\n            font-weight: 600;\r\n            color: #333333;\r\n            line-height: 50px;\r\n            margin-left: 12px;\r\n        }\r\n    }\r\n\r\n    .under {\r\n        width: 100%;\r\n        display: flex;\r\n        justify-content: start;\r\n        height: 70px;\r\n        line-height: 70px;\r\n        font-size: 28px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #555555;\r\n        margin-top: 10px;\r\n        margin-left: 22px;\r\n\r\n        .under-div {\r\n            font-size: 28px;\r\n            font-family: PingFangSC-Regular, PingFang SC;\r\n            font-weight: 400;\r\n            color: #555555;\r\n            line-height: 40px;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}