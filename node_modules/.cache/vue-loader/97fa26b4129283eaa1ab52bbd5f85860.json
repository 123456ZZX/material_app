{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\DispatchCenter\\components\\PressureAnalysis\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\DispatchCenter\\components\\PressureAnalysis\\index.vue","mtime":1708928163368},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBkZWZhbHRMZWdlbmRMaXN0IH0gZnJvbSAnLi9kZWZhdWx0TGVnZW5kTGlzdC5qcycNCmltcG9ydCAqIGFzIGFwaXMgZnJvbSAnLi9hcGknOw0KaW1wb3J0IHsgYWRkSWNvblRvTWFwIH0gZnJvbSAnQC91dGlscy9tYXBVdGlscyc7DQppbXBvcnQgbWFwYm94Z2wgZnJvbSAnbWFwYm94LWdsJzsNCmNvbnN0IG1hcE9iaiA9IHsNCiAgbWFwSW5zdGFuY2U6IG51bGwsDQogIG1hcDogbnVsbCwNCiAgcG9wdXBMaXN0OiBbXQ0KfQ0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAncHJlc3N1cmVBbmFseXNpcycsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG9wZW5Qb3B1cDogdHJ1ZSwNCiAgICAgIGlzRGF0YUxvYWRlZDogdHJ1ZSwNCiAgICAgIGxlZ2VuZENvbmZpZzogW10sDQogICAgICBzdXBwbHlQcmVzc3VyZTogW10sDQogICAgICBpY29uczogWw0KICAgICAgICB7DQogICAgICAgICAgbmFtZTogJ+WOi+WKm+ebkea1iyjkvpspKicsDQogICAgICAgICAgdXJsOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL+WOi+WKm+ebkea1iy5wbmcnKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICfljovlipvnm5HmtYvnprvnur/kvpsnLA0KICAgICAgICAgIHVybDogcmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC/ljovlipvnprvnur/kvpvlnLDlm74ucG5nJyksDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBuYW1lOiAn5Y6L5Yqb55uR5rWL5oql6K2m5L6bJywNCiAgICAgICAgICB1cmw6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAv5Y6L5Yqb5oql6K2m5L6b5Zyw5Zu+LnBuZycpLA0KICAgICAgICB9DQogICAgICBdDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2hhbmdlUG9wdXAodmFsKSB7DQogICAgICBpZiAodmFsKSB7DQogICAgICAgIGxldCBmZWF0dXJlcyA9IHRoaXMuc3VwcGx5UHJlc3N1cmUubWFwKGl0ID0+IHsNCiAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLA0KICAgICAgICAgICAgZ2VvbWV0cnk6IHsNCiAgICAgICAgICAgICAgdHlwZTogJ1BvaW50JywNCiAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFtOdW1iZXIoaXQubG9uKSwgTnVtYmVyKGl0LmxhdCldLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsNCiAgICAgICAgICAgICAgdmFsdWU6IGlzTmFOKE51bWJlcihpdC5yZWFsdGltZURhdGEuZmlsdGVyKGl0ID0+IGl0LmlzU2hvdyA9PSAwKVswXS52YWwpKSA/IDAgOiBOdW1iZXIoaXQucmVhbHRpbWVEYXRhLmZpbHRlcihpdCA9PiBpdC5pc1Nob3cgPT0gMClbMF0udmFsKSwNCiAgICAgICAgICAgICAgLi4uaXQNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIGZlYXR1cmVzLmZvckVhY2goaXQgPT4gew0KICAgICAgICAgIHRoaXMuYWRkVGl0bGVNYXJrZXIoaXQucHJvcGVydGllcy52YWx1ZSwgaXQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpDQogICAgICAgIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtYXBPYmoucG9wdXBMaXN0Lmxlbmd0aCA+IDAgJiYgbWFwT2JqLnBvcHVwTGlzdC5mb3JFYWNoKGl0ID0+IGl0LnJlbW92ZSgpKQ0KICAgICAgICBtYXBPYmoucG9wdXBMaXN0ID0gW10NCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZFRpdGxlTWFya2VyKG5hbWUsIHBvaW50cykgew0KICAgICAgbGV0IHBvcCA9IG5ldyBtYXBib3hnbC5Qb3B1cCh7DQogICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZSwNCiAgICAgICAgY2xvc2VPbkNsaWNrOiBmYWxzZSwNCiAgICAgICAgb2Zmc2V0OiBbMCwgLTE1XQ0KICAgICAgfSk7DQogICAgICBtYXBPYmoucG9wdXBMaXN0LnB1c2gocG9wKQ0KICAgICAgbGV0IHRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICBpZiAobWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3N1cHBseVByZXNzTW9uaXRvcicpKSB7DQogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcikNCiAgICAgICAgICBwb3ANCiAgICAgICAgICAgIC5zZXRMbmdMYXQocG9pbnRzKQ0KICAgICAgICAgICAgLnNldFRleHQobmFtZSArICdNcGEnKQ0KICAgICAgICAgICAgLmFkZFRvKG1hcE9iai5tYXApOw0KICAgICAgICB9DQogICAgICB9LCA1MDApDQogICAgfSwNCiAgICBhc3luYyBtYXBMb2FkZWQoKSB7DQogICAgICBtYXBPYmoubWFwSW5zdGFuY2UgPSB3aW5kb3cueGFNYXBCdWlsZGVyDQogICAgICBtYXBPYmoubWFwID0gd2luZG93LnhhTWFwDQogICAgICBtYXBPYmoubWFwLnNldFpvb20oMTIpDQogICAgICB0aGlzLmxlZ2VuZENvbmZpZyA9IGRlZmFsdExlZ2VuZExpc3QNCiAgICAgIGF3YWl0IGFkZEljb25Ub01hcChtYXBPYmoubWFwLCB0aGlzLmljb25zKQ0KICAgICAgbWFwT2JqLm1hcC5hZGRTb3VyY2UoJ3N1cHBseVByZXNzTW9uaXRvcicsIHsNCiAgICAgICAgdHlwZTogJ2dlb2pzb24nLA0KICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLA0KICAgICAgICAgICAgZmVhdHVyZXM6IFtdDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICBtYXBPYmoubWFwLmFkZExheWVyKHsNCiAgICAgICAgaWQ6ICdzdXBwbHlQcmVzc01vbml0b3JMYXllci1oZWF0JywNCiAgICAgICAgdHlwZTogJ2hlYXRtYXAnLA0KICAgICAgICBzb3VyY2U6ICdzdXBwbHlQcmVzc01vbml0b3InLA0KICAgICAgICBtYXh6b29tOiAxNC42LA0KICAgICAgICBwYWludDogew0KICAgICAgICAgICAgJ2hlYXRtYXAtd2VpZ2h0JzogWw0KICAgICAgICAgICAgICAgICdpbnRlcnBvbGF0ZScsDQogICAgICAgICAgICAgICAgWydsaW5lYXInXSwNCiAgICAgICAgICAgICAgICBbJ2dldCcsICd2YWx1ZSddLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAxLA0KICAgICAgICAgICAgICAgIDENCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICAnaGVhdG1hcC1pbnRlbnNpdHknOiBbDQogICAgICAgICAgICAgICAgJ2ludGVycG9sYXRlJywNCiAgICAgICAgICAgICAgICBbJ2xpbmVhciddLA0KICAgICAgICAgICAgICAgIFsnem9vbSddLA0KICAgICAgICAgICAgICAgIDEwLA0KICAgICAgICAgICAgICAgIDEsDQogICAgICAgICAgICAgICAgMTMsDQogICAgICAgICAgICAgICAgMTINCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICAnaGVhdG1hcC1jb2xvcic6IFsNCiAgICAgICAgICAgICAgICAnaW50ZXJwb2xhdGUnLA0KICAgICAgICAgICAgICAgIFsnbGluZWFyJ10sDQogICAgICAgICAgICAgICAgWydoZWF0bWFwLWRlbnNpdHknXSwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgICdyZ2JhKDE0OSwgMTg5LCAyNTUsIDAuMSknLA0KICAgICAgICAgICAgICAgIDAuMiwNCiAgICAgICAgICAgICAgICAncmdiKDE4MywgMjMyLCAxNTgpJywNCiAgICAgICAgICAgICAgICAwLjQsDQogICAgICAgICAgICAgICAgJ3JnYigyNTUsIDIyNywgMTA2KScsDQogICAgICAgICAgICAgICAgMC42LA0KICAgICAgICAgICAgICAgICdyZ2IoMjU1LCAxNzUsIDk2KScsDQogICAgICAgICAgICAgICAgMC44LA0KICAgICAgICAgICAgICAgICdyZ2JhKDI0OSwgMTE5LCAxMTksIDAuOSknLA0KICAgICAgICAgICAgICAgIDEsDQogICAgICAgICAgICAgICAgJ3JnYigyNDksIDExOSwgMTE5KScNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICAvLyBBZGp1c3QgdGhlIGhlYXRtYXAgcmFkaXVzIGJ5IHpvb20gbGV2ZWwNCiAgICAgICAgICAgICdoZWF0bWFwLXJhZGl1cyc6IFsNCiAgICAgICAgICAgICAgICAnaW50ZXJwb2xhdGUnLA0KICAgICAgICAgICAgICAgIFsnbGluZWFyJ10sDQogICAgICAgICAgICAgICAgWyd6b29tJ10sDQogICAgICAgICAgICAgICAgMTAsDQogICAgICAgICAgICAgICAgNDAsDQogICAgICAgICAgICAgICAgMTIsDQogICAgICAgICAgICAgICAgMzAsDQogICAgICAgICAgICAgICAgMTQsDQogICAgICAgICAgICAgICAgMjANCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGZyb20gaGVhdG1hcCB0byBjaXJjbGUgbGF5ZXIgYnkgem9vbSBsZXZlbA0KICAgICAgICAgICAgJ2hlYXRtYXAtb3BhY2l0eSc6IFsNCiAgICAgICAgICAgICAgICAnaW50ZXJwb2xhdGUnLA0KICAgICAgICAgICAgICAgIFsnbGluZWFyJ10sDQogICAgICAgICAgICAgICAgWyd6b29tJ10sDQogICAgICAgICAgICAgICAgMTAsDQogICAgICAgICAgICAgICAgMSwNCiAgICAgICAgICAgICAgICAxMiwNCiAgICAgICAgICAgICAgICAwLjgsDQogICAgICAgICAgICAgICAgMTMuNSwNCiAgICAgICAgICAgICAgICAwLjUsDQogICAgICAgICAgICAgICAgMTQuNSwNCiAgICAgICAgICAgICAgICAwLjENCiAgICAgICAgICAgIF0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIG1hcE9iai5tYXAuYWRkTGF5ZXIoew0KICAgICAgICBpZDogJ3N1cHBseVByZXNzTW9uaXRvckxheWVyJywNCiAgICAgICAgc291cmNlOiAnc3VwcGx5UHJlc3NNb25pdG9yJywNCiAgICAgICAgdHlwZTogJ3N5bWJvbCcsDQogICAgICAgIG1pbnpvb206IDE0LjUsDQogICAgICAgIGxheW91dDogew0KICAgICAgICAgICdpY29uLWltYWdlJzogWw0KICAgICAgICAgICAgJ2Nhc2UnLA0KICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAnYWxsJywNCiAgICAgICAgICAgICAgWyc9PScsIFsnZ2V0JywgJ2lvdE9ubGluZSddLCAnMCddLA0KICAgICAgICAgICAgICBbJyE9JywgWydnZXQnLCAnaXNXYXJuJ10sICcxJ10sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgJ+WOi+WKm+ebkea1iyjkvpspKicsDQogICAgICAgICAgICBbJz09JywgWydnZXQnLCAnaW90T25saW5lJ10sICcxJ10sDQogICAgICAgICAgICAn5Y6L5Yqb55uR5rWL56a757q/5L6bJywNCiAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgJ2FsbCcsDQogICAgICAgICAgICAgIFsnPT0nLCBbJ2dldCcsICdpb3RPbmxpbmUnXSwgJzAnXSwNCiAgICAgICAgICAgICAgWyc9PScsIFsnZ2V0JywgJ2lzV2FybiddLCAnMSddLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICfljovlipvnm5HmtYvmiqXorabkvpsnLA0KICAgICAgICAgICAgJ+WOi+WKm+ebkea1iyjkvpspKicNCiAgICAgICAgICBdDQogICAgICAgIH0sDQogICAgICAgICdpY29uLXNpemUnOiAwLjcsDQogICAgICAgIC8vIOWbvuagh+W8uuWItuWFqOmDqOaYvuekug0KICAgICAgICAnaWNvbi1pZ25vcmUtcGxhY2VtZW50JzogdHJ1ZSwNCiAgICAgIH0pDQogICAgICB0aGlzLmdldEFsbFN1cHBseVdhdGVyUHJlc3MoKQ0KICAgICAgbWFwT2JqLm1hcC5vbignY2xpY2snLCAnc3VwcGx5UHJlc3NNb25pdG9yTGF5ZXInLCB0aGlzLnByZXNzdXJlRGV0YWlsKQ0KICAgIH0sDQogICAgcHJlc3N1cmVEZXRhaWwoZSkgew0KICAgICAgbGV0IGZlYXR1cmUgPSBtYXBPYmoubWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLnBvaW50KVswXQ0KICAgICAgaWYgKGZlYXR1cmUubGF5ZXIuaWQgPT0gJ3N1cHBseVByZXNzTW9uaXRvckxheWVyJykgew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgcGF0aDogJy9EaXNwYXRjaENlbnRlci9QcmVzc3VyZURldGFpbCcsDQogICAgICAgICAgcXVlcnk6IHsgZGV2aWNlSW5mbzogZmVhdHVyZS5wcm9wZXJ0aWVzLCBwcmVzc3VyZVN0YXRpb246IHRoaXMuc3VwcGx5UHJlc3N1cmUgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0QWxsU3VwcGx5V2F0ZXJQcmVzcygpIHsNCiAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgIGRldmljZVR5cGU6ICdJVlRNJywNCiAgICAgIH0NCiAgICAgIGFwaXMuZ2V0QWxsRXF1aXBtZW50SW5mb3JtYXRpb24ocGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsNCiAgICAgICAgICB0aGlzLnN1cHBseVByZXNzdXJlID0gcmVzLmRhdGEuZmlsdGVyKA0KICAgICAgICAgICAgKGl0ZW0pID0+IGl0ZW0uYmVsb25nU3lzdGVtID09ICfkvpvmsLQnIHx8IGl0ZW0uYmVsb25nU3lzdGVtID09ICflho3nlJ/msLQnDQogICAgICAgICAgKQ0KICAgICAgICAgIHRoaXMuaXNEYXRhTG9hZGVkID0gZmFsc2UNCiAgICAgICAgICBsZXQgZmVhdHVyZXMgPSB0aGlzLnN1cHBseVByZXNzdXJlLm1hcChpdCA9PiB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywNCiAgICAgICAgICAgICAgICBnZW9tZXRyeTogew0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUG9pbnQnLA0KICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogW051bWJlcihpdC5sb24pLCBOdW1iZXIoaXQubGF0KV0sDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpc05hTihOdW1iZXIoaXQucmVhbHRpbWVEYXRhLmZpbHRlcihpdCA9PiBpdC5pc1Nob3cgPT0gMClbMF0udmFsKSkgPyAwIDogTnVtYmVyKGl0LnJlYWx0aW1lRGF0YS5maWx0ZXIoaXQgPT4gaXQuaXNTaG93ID09IDApWzBdLnZhbCksDQogICAgICAgICAgICAgICAgICAgIC4uLml0DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgaWYgKG1hcE9iai5tYXAuZ2V0U291cmNlKCdzdXBwbHlQcmVzc01vbml0b3InKSkgew0KICAgICAgICAgICAgbWFwT2JqLm1hcC5nZXRTb3VyY2UoJ3N1cHBseVByZXNzTW9uaXRvcicpLnNldERhdGEoew0KICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsDQogICAgICAgICAgICAgICAgZmVhdHVyZXM6IGZlYXR1cmVzDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLm9wZW5Qb3B1cCAmJiBmZWF0dXJlcy5mb3JFYWNoKGl0ID0+IHsNCiAgICAgICAgICAgIHRoaXMuYWRkVGl0bGVNYXJrZXIoaXQucHJvcGVydGllcy52YWx1ZSwgaXQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9DQogIH0sDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/DispatchCenter/components/PressureAnalysis","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <fm-nav-bar title=\"压力分析\" left-arrow @click-left=\"$router.go(-1)\">\r\n      <template #right>\r\n        <fm-switch v-model=\"openPopup\" @change=\"changePopup\" size=\"24px\" :disabled=\"isDataLoaded\" />\r\n      </template>\r\n    </fm-nav-bar>\r\n    <div class=\"mapContainer\">\r\n      <xa-map :create=\"mapLoaded\" :legendConfig=\"legendConfig\" />\r\n      <div class=\"mapLegend\">\r\n        <div class=\"legendItem\">\r\n          <div class=\"colorItem\" style=\"background: #F97777;\"></div>\r\n          <div class=\"pressureSpan\">>0.35MPa</div>\r\n        </div>\r\n        <div class=\"legendItem\">\r\n          <div class=\"colorItem\" style=\"background: #FFAF60;\"></div>\r\n          <div class=\"pressureSpan\">0.25 ~ 0.35MPa</div>\r\n        </div>\r\n        <div class=\"legendItem\">\r\n          <div class=\"colorItem\" style=\"background: #FFE36A;\"></div>\r\n          <div class=\"pressureSpan\">0.20 ~ 0.25MPa</div>\r\n        </div>\r\n        <div class=\"legendItem\">\r\n          <div class=\"colorItem\" style=\"background: #B7E89E;\"></div>\r\n          <div class=\"pressureSpan\">0.15 ~ 0.20MPa</div>\r\n        </div>\r\n        <div class=\"legendItem\">\r\n          <div class=\"colorItem\" style=\"background: #95BDFF;\"></div>\r\n          <div class=\"pressureSpan\">0.00 ~ 0.15MPa</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defaltLegendList } from './defaultLegendList.js'\r\nimport * as apis from './api';\r\nimport { addIconToMap } from '@/utils/mapUtils';\r\nimport mapboxgl from 'mapbox-gl';\r\nconst mapObj = {\r\n  mapInstance: null,\r\n  map: null,\r\n  popupList: []\r\n}\r\nexport default {\r\n  name: 'pressureAnalysis',\r\n  data() {\r\n    return {\r\n      openPopup: true,\r\n      isDataLoaded: true,\r\n      legendConfig: [],\r\n      supplyPressure: [],\r\n      icons: [\r\n        {\r\n          name: '压力监测(供)*',\r\n          url: require('@/assets/img/map/压力监测.png'),\r\n        },\r\n        {\r\n          name: '压力监测离线供',\r\n          url: require('@/assets/img/map/压力离线供地图.png'),\r\n        },\r\n        {\r\n          name: '压力监测报警供',\r\n          url: require('@/assets/img/map/压力报警供地图.png'),\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted() {\r\n    \r\n  },\r\n  methods: {\r\n    changePopup(val) {\r\n      if (val) {\r\n        let features = this.supplyPressure.map(it => {\r\n          return {\r\n            type: 'Feature',\r\n            geometry: {\r\n              type: 'Point',\r\n              coordinates: [Number(it.lon), Number(it.lat)],\r\n            },\r\n            properties: {\r\n              value: isNaN(Number(it.realtimeData.filter(it => it.isShow == 0)[0].val)) ? 0 : Number(it.realtimeData.filter(it => it.isShow == 0)[0].val),\r\n              ...it\r\n            }\r\n          }\r\n        })\r\n        features.forEach(it => {\r\n          this.addTitleMarker(it.properties.value, it.geometry.coordinates)\r\n        })\r\n      } else {\r\n        mapObj.popupList.length > 0 && mapObj.popupList.forEach(it => it.remove())\r\n        mapObj.popupList = []\r\n      }\r\n    },\r\n    addTitleMarker(name, points) {\r\n      let pop = new mapboxgl.Popup({\r\n        closeButton: false,\r\n        closeOnClick: false,\r\n        offset: [0, -15]\r\n      });\r\n      mapObj.popupList.push(pop)\r\n      let timer = setInterval(() => {\r\n        if (mapObj.map.getSource('supplyPressMonitor')) {\r\n          clearInterval(timer)\r\n          pop\r\n            .setLngLat(points)\r\n            .setText(name + 'Mpa')\r\n            .addTo(mapObj.map);\r\n        }\r\n      }, 500)\r\n    },\r\n    async mapLoaded() {\r\n      mapObj.mapInstance = window.xaMapBuilder\r\n      mapObj.map = window.xaMap\r\n      mapObj.map.setZoom(12)\r\n      this.legendConfig = defaltLegendList\r\n      await addIconToMap(mapObj.map, this.icons)\r\n      mapObj.map.addSource('supplyPressMonitor', {\r\n        type: 'geojson',\r\n        data: {\r\n            type: 'FeatureCollection',\r\n            features: []\r\n        }\r\n      })\r\n      mapObj.map.addLayer({\r\n        id: 'supplyPressMonitorLayer-heat',\r\n        type: 'heatmap',\r\n        source: 'supplyPressMonitor',\r\n        maxzoom: 14.6,\r\n        paint: {\r\n            'heatmap-weight': [\r\n                'interpolate',\r\n                ['linear'],\r\n                ['get', 'value'],\r\n                0,\r\n                0,\r\n                1,\r\n                1\r\n            ],\r\n            'heatmap-intensity': [\r\n                'interpolate',\r\n                ['linear'],\r\n                ['zoom'],\r\n                10,\r\n                1,\r\n                13,\r\n                12\r\n            ],\r\n            'heatmap-color': [\r\n                'interpolate',\r\n                ['linear'],\r\n                ['heatmap-density'],\r\n                0,\r\n                'rgba(149, 189, 255, 0.1)',\r\n                0.2,\r\n                'rgb(183, 232, 158)',\r\n                0.4,\r\n                'rgb(255, 227, 106)',\r\n                0.6,\r\n                'rgb(255, 175, 96)',\r\n                0.8,\r\n                'rgba(249, 119, 119, 0.9)',\r\n                1,\r\n                'rgb(249, 119, 119)'\r\n            ],\r\n            // Adjust the heatmap radius by zoom level\r\n            'heatmap-radius': [\r\n                'interpolate',\r\n                ['linear'],\r\n                ['zoom'],\r\n                10,\r\n                40,\r\n                12,\r\n                30,\r\n                14,\r\n                20\r\n            ],\r\n            // Transition from heatmap to circle layer by zoom level\r\n            'heatmap-opacity': [\r\n                'interpolate',\r\n                ['linear'],\r\n                ['zoom'],\r\n                10,\r\n                1,\r\n                12,\r\n                0.8,\r\n                13.5,\r\n                0.5,\r\n                14.5,\r\n                0.1\r\n            ]\r\n        }\r\n      })\r\n      mapObj.map.addLayer({\r\n        id: 'supplyPressMonitorLayer',\r\n        source: 'supplyPressMonitor',\r\n        type: 'symbol',\r\n        minzoom: 14.5,\r\n        layout: {\r\n          'icon-image': [\r\n            'case',\r\n            [\r\n              'all',\r\n              ['==', ['get', 'iotOnline'], '0'],\r\n              ['!=', ['get', 'isWarn'], '1'],\r\n            ],\r\n            '压力监测(供)*',\r\n            ['==', ['get', 'iotOnline'], '1'],\r\n            '压力监测离线供',\r\n            [\r\n              'all',\r\n              ['==', ['get', 'iotOnline'], '0'],\r\n              ['==', ['get', 'isWarn'], '1'],\r\n            ],\r\n            '压力监测报警供',\r\n            '压力监测(供)*'\r\n          ]\r\n        },\r\n        'icon-size': 0.7,\r\n        // 图标强制全部显示\r\n        'icon-ignore-placement': true,\r\n      })\r\n      this.getAllSupplyWaterPress()\r\n      mapObj.map.on('click', 'supplyPressMonitorLayer', this.pressureDetail)\r\n    },\r\n    pressureDetail(e) {\r\n      let feature = mapObj.map.queryRenderedFeatures(e.point)[0]\r\n      if (feature.layer.id == 'supplyPressMonitorLayer') {\r\n        this.$router.push({\r\n          path: '/DispatchCenter/PressureDetail',\r\n          query: { deviceInfo: feature.properties, pressureStation: this.supplyPressure }\r\n        })\r\n      }\r\n    },\r\n    getAllSupplyWaterPress() {\r\n      let params = {\r\n        deviceType: 'IVTM',\r\n      }\r\n      apis.getAllEquipmentInformation(params).then((res) => {\r\n        if (res.status) {\r\n          this.supplyPressure = res.data.filter(\r\n            (item) => item.belongSystem == '供水' || item.belongSystem == '再生水'\r\n          )\r\n          this.isDataLoaded = false\r\n          let features = this.supplyPressure.map(it => {\r\n            return {\r\n                type: 'Feature',\r\n                geometry: {\r\n                    type: 'Point',\r\n                    coordinates: [Number(it.lon), Number(it.lat)],\r\n                },\r\n                properties: {\r\n                    value: isNaN(Number(it.realtimeData.filter(it => it.isShow == 0)[0].val)) ? 0 : Number(it.realtimeData.filter(it => it.isShow == 0)[0].val),\r\n                    ...it\r\n                }\r\n            }\r\n          })\r\n          if (mapObj.map.getSource('supplyPressMonitor')) {\r\n            mapObj.map.getSource('supplyPressMonitor').setData({\r\n                type: 'FeatureCollection',\r\n                features: features\r\n            })\r\n          }\r\n          this.openPopup && features.forEach(it => {\r\n            this.addTitleMarker(it.properties.value, it.geometry.coordinates)\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.main {\r\n  width: 100%;\r\n  height: 100%;\r\n  .mapContainer {\r\n    height: calc(100% - 46px);\r\n    width: 100%;\r\n    background: linear-gradient(180deg, #e5f2ff 0%, #f6f8fa 25%, #f5f7f9 100%);\r\n    .mapLegend {\r\n      width: auto;\r\n      min-width: 310px;\r\n      height: 320px;\r\n      background: #ffffff;\r\n      position: absolute;\r\n      bottom: 30px;\r\n      left: 30px;\r\n      padding: 20px 30px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      .legendItem {\r\n        width: 100%;\r\n        height: 45px;\r\n        margin: 10px 0;\r\n        display: flex;\r\n        .colorItem {\r\n          width: 16px;\r\n          height: 16px;\r\n          margin: auto;\r\n          border-radius: 50%;\r\n        }\r\n        .pressureSpan {\r\n          margin-left: 20px;\r\n          height: 45px;\r\n          font-size: 32px;\r\n          font-family: PingFangSC-Regular, PingFang SC;\r\n          font-weight: 400;\r\n          color: #333333;\r\n          line-height: 45px;\r\n          width: 240px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}