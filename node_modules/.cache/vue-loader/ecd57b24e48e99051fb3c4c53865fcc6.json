{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\OneMap\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\OneMap\\index.vue","mtime":1705912915806},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgbWFwVG9vbHMgZnJvbSAnLi9tYXBUb29scycNCmltcG9ydCBtb25pdG9yTGlzdCBmcm9tICcuL21vbml0b3JMaXN0Jw0KaW1wb3J0IHsgYWRkSWNvblRvTWFwIH0gZnJvbSAnQC91dGlscy9tYXBVdGlscycNCmltcG9ydCB7IGdldEFsbEVxdWlwbWVudEluZm9ybWF0aW9uIH0gZnJvbSAnLi9hcGknDQppbXBvcnQgeyBiYm94LCBjZW50ZXIgYXMgZ2V0Q2VudGVyIH0gZnJvbSAnQHR1cmYvdHVyZicNCmltcG9ydCBfY2xvbmVEZWVwIGZyb20gJ2xvZGFzaC9jbG9uZURlZXAnDQovLyDlm77kvosNCmltcG9ydCB7IGRlZmFsdExlZ2VuZExpc3QgfSBmcm9tICcuL2RlZmFsdExlZ2VuZExpc3QuanMnDQovLyDljovlipvnm5HmtYvngrnlh7vlvLnnqpcNCmltcG9ydCBQcmVzc3VyZU1vbml0b3JEZXRhaWwgZnJvbSAnLi9jb21wb25lbnRzL1ByZXNzdXJlTW9uaXRvckRldGFpbC52dWUnDQppbXBvcnQgTGluZURldGFpbCBmcm9tICcuL2NvbXBvbmVudHMvTGluZURldGFpbC52dWUnDQppbXBvcnQgTWFwTGVnZW5kIGZyb20gJy4vY29tcG9uZW50cy9tYXBMZWdlbmQudnVlJw0KaW1wb3J0IHsgbGVnZW5kTGlzdEltcG9ydCB9IGZyb20gJy4vbGVnZW5kTGlzdCcNCg0KY29uc3QgTWFwT2JqID0gew0KICBtYXA6IG51bGwsDQogIHZpZXdlcjogbnVsbCwNCiAgcG9wdXBJdGVtOiAnJywgLy9tYXBib3jmsJTms6HmoYYNCiAgbWFya2VyOiAnJywNCiAgbW9uaXRvclBvcHVwczogW10sDQogIG1vbml0b3JQb3B1cENvbnRlbnQ6IFtdLA0KfQ0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnT25lTWFwJywNCiAgY29tcG9uZW50czogew0KICAgIG1hcFRvb2xzLA0KICAgIG1vbml0b3JMaXN0LA0KICAgIFByZXNzdXJlTW9uaXRvckRldGFpbCwNCiAgICBMaW5lRGV0YWlsLA0KICAgIE1hcExlZ2VuZCwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2VsZWN0ZWRUYWI6ICflnLDlm74nLA0KICAgICAgcG9wdXBTaG93OiBmYWxzZSwNCiAgICAgIGxlZ2VuZExpc3Q6IGxlZ2VuZExpc3RJbXBvcnQsDQogICAgICBwcmVzc3VyZU1vbml0b3JTaG93OiBmYWxzZSwgLy8g5Y6L5Yqb55uR5rWL6K+m5oOF6Z2i5p2/5pi+6ZqQDQogICAgICBwaXBlbGluZVNob3c6IGZhbHNlLCAvLyDnrqHnur/or6bmg4XpnaLmnb/mmL7pmpANCiAgICAgIHByZXNzdXJlRGF0YURldGFpbDoge30sIC8vIOWOi+WKm+ebkea1i+ivpuaDhemdouadv+WfuuehgOS/oeaBrw0KICAgICAgcGlwZWxpbmVCYXNlSW5mbzoge30sIC8vIOeuoee6v+ivpuaDhemdouadv+WfuuehgOS/oeaBrw0KICAgICAgbGF5ZXJJRDogJycsDQogICAgICBsZWdlbmRDb25maWc6IFtdLA0KICAgICAgaWNvbnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICfljovlipvnm5HmtYso5L6bKSonLA0KICAgICAgICAgIHVybDogcmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC/ljovlipvnm5HmtYsucG5nJyksDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBuYW1lOiAn5Y6L5Yqb55uR5rWL56a757q/5L6bJywNCiAgICAgICAgICB1cmw6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAv5Y6L5Yqb56a757q/5L6b5Zyw5Zu+LnBuZycpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbmFtZTogJ+WOi+WKm+ebkea1i+aKpeitpuS+mycsDQogICAgICAgICAgdXJsOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL+WOi+WKm+aKpeitpuS+m+WcsOWbvi5wbmcnKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICfms7Xnq5knLA0KICAgICAgICAgIHVybDogcmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC9wdW1wLnBuZycpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbmFtZTogJ+WGjeeUn+awtOWOgicsDQogICAgICAgICAgdXJsOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL+WGjeeUn+awtOWOguWcsOWbvi5wbmcnKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICfkvpvmsLTljoInLA0KICAgICAgICAgIHVybDogcmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC/kvpvmsLTljoLlnLDlm74ucG5nJyksDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBuYW1lOiAn57uZ5rC05Yqg5Y6L5rO156uZJywNCiAgICAgICAgICB1cmw6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAv57uZ5rC05Yqg5Y6L5rO156uZ5Zyw5Zu+LnBuZycpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbmFtZTogJ+WOi+WKm+ebkea1iyjlho3nlJ8pKicsDQogICAgICAgICAgdXJsOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL+WGjeeUn+awtOWOi+WKm+ebkea1iy5wbmcnKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICfljovlipvnm5HmtYvnprvnur/lho3nlJ8nLA0KICAgICAgICAgIHVybDogcmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC/ljovlipvnprvnur/lho3nlJ/lnLDlm74ucG5nJyksDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBuYW1lOiAn5Y6L5Yqb55uR5rWL5oql6K2m5YaN55SfJywNCiAgICAgICAgICB1cmw6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAv5Y6L5Yqb5oql6K2m5YaN55Sf5Zyw5Zu+LnBuZycpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbmFtZTogJ+a1gemHj+iuoSjkvpspKicsDQogICAgICAgICAgdXJsOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL+a1gemHj+iuoeWcsOWbvi5wbmcnKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICfmtYHph4/nprvnur/kvpsnLA0KICAgICAgICAgIHVybDogcmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC/mtYHph4/nprvnur/kvpvlnLDlm74ucG5nJyksDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBuYW1lOiAn5rWB6YeP5oql6K2m5L6bJywNCiAgICAgICAgICB1cmw6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAv5rWB6YeP5oql6K2m5L6b5Zyw5Zu+LnBuZycpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbmFtZTogJ+a1gemHj+iuoSjlho3nlJ8pKicsDQogICAgICAgICAgdXJsOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvbWFwL+a1gemHj+iuoeWGjeeUn+WcsOWbvi5wbmcnKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICfmtYHph4/nprvnur/lho3nlJ8nLA0KICAgICAgICAgIHVybDogcmVxdWlyZSgnQC9hc3NldHMvaW1nL21hcC/mtYHph4/nprvnur/lho3nlJ/lnLDlm74ucG5nJyksDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBuYW1lOiAn5rWB6YeP5oql6K2m5YaN55SfJywNCiAgICAgICAgICB1cmw6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAv5rWB6YeP5oql6K2m5YaN55Sf5Zyw5Zu+LnBuZycpLA0KICAgICAgICB9LA0KICAgICAgICAvLyB7DQogICAgICAgIC8vICAgbmFtZTogIuaPkOagh+aUuemAoOe7meawtOWOgiIsDQogICAgICAgIC8vICAgdXJsOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvbWFwL+aPkOagh+aUuemAoOe7meawtOWOgi5wbmciKSwNCiAgICAgICAgLy8gfSwNCiAgICAgICAgLy8gew0KICAgICAgICAvLyAgIG5hbWU6ICLop4TliJLmlrDlu7rnu5nmsLTljoIiLA0KICAgICAgICAvLyAgIHVybDogcmVxdWlyZSgiQC9hc3NldHMvaW1nL21hcC/op4TliJLmlrDlu7rnu5nmsLTljoIucG5nIiksDQogICAgICAgIC8vIH0sDQogICAgICBdLA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGxlZ2VuZENsaWNrKGUsIGl0ZW0sIGlkKSB7DQogICAgICBpZiAodHlwZW9mIGl0ZW0uaWQgPT0gJ251bWJlcicpIHsNCiAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgbWVzc2FnZTogJ+W9k+WJjeWbvuWxguaaguaXoOaVsOaNru+8gScsDQogICAgICAgIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaXRlbS5jbGlja0ZsYWcgPSAhaXRlbS5jbGlja0ZsYWcNCiAgICAgIHRoaXMubGVnZW5kQ29udHJvbExheWVyKGl0ZW0pDQogICAgfSwNCiAgICBsZWdlbmRDb250cm9sTGF5ZXIoaXRlbSkgew0KICAgICAgbGV0IG1hcCA9IHdpbmRvdy54YU1hcA0KICAgICAgaWYgKG1hcC5nZXRMYXllcihpdGVtLmlkKSkgew0KICAgICAgICBpZiAoaXRlbS5jbGlja0ZsYWcpIHsNCiAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoaXRlbS5pZCwgJ3Zpc2liaWxpdHknLCAnbm9uZScpDQogICAgICAgICAgaWYgKGl0ZW0uaWQgPT0gJ3JkX21hcF9kcmFpbnBpcGVfeXNfYmlnJykgew0KICAgICAgICAgICAgbGV0IGZpbHRlciA9IG1hcC5nZXRGaWx0ZXIoJ3JkX21hcF9tYW5ob2xlJykNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgZmlsdGVyLnRvU3RyaW5nKCkgPT0gWydhbGwnXS50b1N0cmluZygpIHx8DQogICAgICAgICAgICAgIGZpbHRlci50b1N0cmluZygpID09IFsnaW4nLCAnbWFuaG9sZV90eXBlJywgJ+mbqOawtCddLnRvU3RyaW5nKCkNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgbWFwLmdldExheW91dFByb3BlcnR5KA0KICAgICAgICAgICAgICAgICAgJ3JkX21hcF9kcmFpbnBpcGVfd3NfYmlnJywNCiAgICAgICAgICAgICAgICAgICd2aXNpYmlsaXR5Jw0KICAgICAgICAgICAgICAgICkgPT0gJ25vbmUnDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIGZpbHRlciA9IFsnaW4nLCAnbWFuaG9sZV90eXBlJywgJyddDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZmlsdGVyID0gWydpbicsICdtYW5ob2xlX3R5cGUnLCAn5rGh5rC0J10NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy/pm6jmsLTnrqHnur/lm77lsYLmjqfliLbpm6jmsLTkupXjgIHpm6jmsLTnrq3lpLTjgIHpm6jmsLTovoPlsI/lsYLnuqflm77lsYLmmL7npLoNCiAgICAgICAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgncmRfbWFwX2NvbWInLCAndmlzaWJpbGl0eScsICdub25lJykNCg0KICAgICAgICAgICAgbWFwLnNldEZpbHRlcigncmRfbWFwX21hbmhvbGUnLCBmaWx0ZXIpDQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3lzX2JpZ19kaXJlY3Rpb24nLA0KICAgICAgICAgICAgICAndmlzaWJpbGl0eScsDQogICAgICAgICAgICAgICdub25lJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KA0KICAgICAgICAgICAgICAncmRfbWFwX2RyYWlucGlwZV95c19zbWFsbCcsDQogICAgICAgICAgICAgICd2aXNpYmlsaXR5JywNCiAgICAgICAgICAgICAgJ25vbmUnDQogICAgICAgICAgICApDQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3lzX3NtYWxsX2RpcmVjdGlvbicsDQogICAgICAgICAgICAgICd2aXNpYmlsaXR5JywNCiAgICAgICAgICAgICAgJ25vbmUnDQogICAgICAgICAgICApDQogICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmlkID09ICdtYXBfc3VwcGx5X3BpcGVfY2lyY3VsYXRpbmcnKSB7DQogICAgICAgICAgICAvL+W+queOr+awtO+8iOWbnuawtO+8ieeuoee6v+aOp+WItuW+queOr+awtO+8iOWbnuawtO+8ieiKgueCueaYvuekug0KICAgICAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KA0KICAgICAgICAgICAgICAnbWFwX3N1cHBseV9ub2RlX2NpcmN1bGF0aW5nJywNCiAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknLA0KICAgICAgICAgICAgICAnbm9uZScNCiAgICAgICAgICAgICkNCiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uaWQgPT0gJ21hcF9zdXBwbHlfcGlwZV9kaXN0cmlidXRlJykgew0KICAgICAgICAgICAgLy/phY3msLTnrqHnur/mjqfliLbphY3msLToioLngrnmmL7npLoNCiAgICAgICAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgNCiAgICAgICAgICAgICAgJ21hcF9zdXBwbHlfbm9kZV9kaXN0cmlidXRlJywNCiAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknLA0KICAgICAgICAgICAgICAnbm9uZScNCiAgICAgICAgICAgICkNCiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uaWQgPT0gJ21hcF9zdXBwbHlfcGlwZV9kZWxpdmVyeScpIHsNCiAgICAgICAgICAgIC8v6L6T5rC0566h57q/5o6n5Yi26L6T5rC06IqC54K55pi+56S6DQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdtYXBfc3VwcGx5X25vZGVfZGVsaXZlcnknLA0KICAgICAgICAgICAgICAndmlzaWJpbGl0eScsDQogICAgICAgICAgICAgICdub25lJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pZCA9PSAnbWFwX3JlY3ljbGVfcGlwZScpIHsNCiAgICAgICAgICAgIC8v5YaN55Sf5rC0566h57q/5o6n5Yi25YaN55Sf5rC06IqC54K55pi+56S6DQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoJ21hcF9yZWN5Y2xlX25vZGUnLCAndmlzaWJpbGl0eScsICdub25lJykNCiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uaWQgPT0gJ3JkX21hcF9kcmFpbnBpcGVfd3NfYmlnJykgew0KICAgICAgICAgICAgLy/msaHmsLTnrqHnur/lm77lsYLmjqfliLbmsaHmsLTkupXjgIHmsaHmsLTnrq3lpLTjgIHmsaHmsLTovoPlsI/lsYLnuqflm77lsYLmmL7npLoNCiAgICAgICAgICAgIGxldCBmaWx0ZXIgPSBtYXAuZ2V0RmlsdGVyKCdyZF9tYXBfbWFuaG9sZScpDQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIGZpbHRlci50b1N0cmluZygpID09IFsnYWxsJ10udG9TdHJpbmcoKSB8fA0KICAgICAgICAgICAgICBmaWx0ZXIudG9TdHJpbmcoKSA9PSBbJ2luJywgJ21hbmhvbGVfdHlwZScsICfmsaHmsLQnXS50b1N0cmluZygpDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgIG1hcC5nZXRMYXlvdXRQcm9wZXJ0eSgNCiAgICAgICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3lzX2JpZycsDQogICAgICAgICAgICAgICAgICAndmlzaWJpbGl0eScNCiAgICAgICAgICAgICAgICApID09ICdub25lJw0KICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICBmaWx0ZXIgPSBbJ2luJywgJ21hbmhvbGVfdHlwZScsICcnXQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGZpbHRlciA9IFsnaW4nLCAnbWFuaG9sZV90eXBlJywgJ+mbqOawtCddDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1hcC5zZXRGaWx0ZXIoJ3JkX21hcF9tYW5ob2xlJywgZmlsdGVyKQ0KICAgICAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KA0KICAgICAgICAgICAgICAncmRfbWFwX2RyYWlucGlwZV93c19iaWdfZGlyZWN0aW9uJywNCiAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknLA0KICAgICAgICAgICAgICAnbm9uZScNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgNCiAgICAgICAgICAgICAgJ3JkX21hcF9kcmFpbnBpcGVfd3Nfc21hbGwnLA0KICAgICAgICAgICAgICAndmlzaWJpbGl0eScsDQogICAgICAgICAgICAgICdub25lJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KA0KICAgICAgICAgICAgICAncmRfbWFwX2RyYWlucGlwZV93c19zbWFsbF9kaXJlY3Rpb24nLA0KICAgICAgICAgICAgICAndmlzaWJpbGl0eScsDQogICAgICAgICAgICAgICdub25lJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pZCA9PSAn5Y6L5Yqb55uR5rWLJykgew0KICAgICAgICAgICAgLy8gbWFwLnNldExheW91dFByb3BlcnR5KA0KICAgICAgICAgICAgLy8gICAi5Y6L5Yqb55uR5rWLLeaKpeitpiIsDQogICAgICAgICAgICAvLyAgICJ2aXNpYmlsaXR5IiwNCiAgICAgICAgICAgIC8vICAgIm5vbmUiDQogICAgICAgICAgICAvLyApOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoaXRlbS5pZCwgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpDQogICAgICAgICAgaWYgKGl0ZW0uaWQgPT0gJ3JkX21hcF9kcmFpbnBpcGVfeXNfYmlnJykgew0KICAgICAgICAgICAgbGV0IGZpbHRlciA9IG1hcC5nZXRGaWx0ZXIoJ3JkX21hcF9tYW5ob2xlJykNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgZmlsdGVyLnRvU3RyaW5nKCkgPT0gWydpbicsICdtYW5ob2xlX3R5cGUnLCAnJ10udG9TdHJpbmcoKSB8fA0KICAgICAgICAgICAgICBmaWx0ZXIudG9TdHJpbmcoKSA9PSBbJ2luJywgJ21hbmhvbGVfdHlwZScsICfmsaHmsLQnXS50b1N0cmluZygpDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgIG1hcC5nZXRMYXlvdXRQcm9wZXJ0eSgNCiAgICAgICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3dzX2JpZycsDQogICAgICAgICAgICAgICAgICAndmlzaWJpbGl0eScNCiAgICAgICAgICAgICAgICApICE9ICdub25lJw0KICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICBmaWx0ZXIgPSBbJ2FsbCddDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZmlsdGVyID0gWydpbicsICdtYW5ob2xlX3R5cGUnLCAn6Zuo5rC0J10NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbWFwLnNldEZpbHRlcigncmRfbWFwX21hbmhvbGUnLCBmaWx0ZXIpDQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoJ3JkX21hcF9jb21iJywgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpDQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3lzX2JpZ19kaXJlY3Rpb24nLA0KICAgICAgICAgICAgICAndmlzaWJpbGl0eScsDQogICAgICAgICAgICAgICd2aXNpYmxlJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KA0KICAgICAgICAgICAgICAncmRfbWFwX2RyYWlucGlwZV95c19zbWFsbCcsDQogICAgICAgICAgICAgICd2aXNpYmlsaXR5JywNCiAgICAgICAgICAgICAgJ3Zpc2libGUnDQogICAgICAgICAgICApDQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3lzX3NtYWxsX2RpcmVjdGlvbicsDQogICAgICAgICAgICAgICd2aXNpYmlsaXR5JywNCiAgICAgICAgICAgICAgJ3Zpc2libGUnDQogICAgICAgICAgICApDQogICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmlkID09ICdtYXBfc3VwcGx5X3BpcGVfY2lyY3VsYXRpbmcnKSB7DQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdtYXBfc3VwcGx5X25vZGVfY2lyY3VsYXRpbmcnLA0KICAgICAgICAgICAgICAndmlzaWJpbGl0eScsDQogICAgICAgICAgICAgICd2aXNpYmxlJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pZCA9PSAnbWFwX3N1cHBseV9waXBlX2Rpc3RyaWJ1dGUnKSB7DQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdtYXBfc3VwcGx5X25vZGVfZGlzdHJpYnV0ZScsDQogICAgICAgICAgICAgICd2aXNpYmlsaXR5JywNCiAgICAgICAgICAgICAgJ3Zpc2libGUnDQogICAgICAgICAgICApDQogICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmlkID09ICdtYXBfc3VwcGx5X3BpcGVfZGVsaXZlcnknKSB7DQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdtYXBfc3VwcGx5X25vZGVfZGVsaXZlcnknLA0KICAgICAgICAgICAgICAndmlzaWJpbGl0eScsDQogICAgICAgICAgICAgICd2aXNpYmxlJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pZCA9PSAnbWFwX3JlY3ljbGVfcGlwZScpIHsNCiAgICAgICAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgnbWFwX3JlY3ljbGVfbm9kZScsICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKQ0KICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pZCA9PSAncmRfbWFwX2RyYWlucGlwZV93c19iaWcnKSB7DQogICAgICAgICAgICBsZXQgZmlsdGVyID0gbWFwLmdldEZpbHRlcigncmRfbWFwX21hbmhvbGUnKQ0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBmaWx0ZXIudG9TdHJpbmcoKSA9PSBbJ2luJywgJ21hbmhvbGVfdHlwZScsICcnXS50b1N0cmluZygpIHx8DQogICAgICAgICAgICAgIGZpbHRlci50b1N0cmluZygpID09IFsnaW4nLCAnbWFuaG9sZV90eXBlJywgJ+mbqOawtCddLnRvU3RyaW5nKCkNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgbWFwLmdldExheW91dFByb3BlcnR5KA0KICAgICAgICAgICAgICAgICAgJ3JkX21hcF9kcmFpbnBpcGVfeXNfYmlnJywNCiAgICAgICAgICAgICAgICAgICd2aXNpYmlsaXR5Jw0KICAgICAgICAgICAgICAgICkgIT0gJ25vbmUnDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIGZpbHRlciA9IFsnYWxsJ10NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBmaWx0ZXIgPSBbJ2luJywgJ21hbmhvbGVfdHlwZScsICfmsaHmsLQnXQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3dzX2JpZ19kaXJlY3Rpb24nLA0KICAgICAgICAgICAgICAndmlzaWJpbGl0eScsDQogICAgICAgICAgICAgICd2aXNpYmxlJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgbWFwLnNldEZpbHRlcigncmRfbWFwX21hbmhvbGUnLCBmaWx0ZXIpDQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoJ3JkX21hcF9tYW5ob2xlJywgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpDQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3dzX3NtYWxsX2RpcmVjdGlvbicsDQogICAgICAgICAgICAgICd2aXNpYmlsaXR5JywNCiAgICAgICAgICAgICAgJ3Zpc2libGUnDQogICAgICAgICAgICApDQogICAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoDQogICAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3dzX3NtYWxsJywNCiAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknLA0KICAgICAgICAgICAgICAndmlzaWJsZScNCiAgICAgICAgICAgICkNCiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uaWQgPT0gJ+WOi+WKm+ebkea1iycpIHsNCiAgICAgICAgICAgIC8vIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eSgNCiAgICAgICAgICAgIC8vICAgIuWOi+WKm+ebkea1iy3miqXoraYiLA0KICAgICAgICAgICAgLy8gICAidmlzaWJpbGl0eSIsDQogICAgICAgICAgICAvLyAgICJ2aXNpYmxlIg0KICAgICAgICAgICAgLy8gKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGxlZ2VuZFRpdGxlTmFtZUNsaWNrKGxlZ2VuZFRpdGxlTmFtZSkgew0KICAgICAgdGhpcy5sZWdlbmRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgaWYgKGl0ZW0ubGFiZWwgPT09IGxlZ2VuZFRpdGxlTmFtZSkgew0KICAgICAgICAgIGl0ZW0udGl0bGVTdGF0dXMgPSAhaXRlbS50aXRsZVN0YXR1cw0KICAgICAgICAgIC8vDQogICAgICAgICAgaXRlbS5vcHRpb25zLmZvckVhY2goKHNtYWxsSXRlbSkgPT4gew0KICAgICAgICAgICAgLy8g5b2T6K+l5qCH6aKY5LiL5Zu+5bGC5YaF5a655Li65pi+56S654q25oCB5pe25omN6L+b5YWl5Yik5patDQogICAgICAgICAgICBpZiAoaXRlbS50aXRsZVN0YXR1cyA9PT0gdHJ1ZSAmJiB0eXBlb2Ygc21hbGxJdGVtLmlkID09ICdudW1iZXInKSB7DQogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBzbWFsbEl0ZW0ubGFiZWwgKyAn5Zu+5bGC5pqC5peg5pWw5o2u77yBJywNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICB9LCAwKQ0KICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpdGVtLnRpdGxlU3RhdHVzID09PSB0cnVlKSB7DQogICAgICAgICAgICAgIC8vIOagh+mimOeKtuaAgeeCueS6ruaXtg0KICAgICAgICAgICAgICBzbWFsbEl0ZW0uY2xpY2tGbGFnID0gZmFsc2UgLy8g5Zu+5bGC5Z2H5pi+56S6DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBzbWFsbEl0ZW0uY2xpY2tGbGFnID0gdHJ1ZSAvLyDlm77lsYLlnYfpmpDol48NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMubGVnZW5kQ29udHJvbExheWVyKHNtYWxsSXRlbSkNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgY2xvc2VQb3AodmFsKSB7DQogICAgICB0aGlzLnBvcHVwU2hvdyA9IHZhbA0KICAgIH0sDQogICAgc2hvd01hcExlZ2VuZCgpIHsNCiAgICAgIHRoaXMucG9wdXBTaG93ID0gdHJ1ZQ0KICAgIH0sDQogICAgLy8gdGFi5YiH5o2i5Zue6LCDDQogICAgY2hhbmdlVHlwZShuYW1lLCB0aXRsZSkgew0KICAgICAgLy8gVG9hc3QubG9hZGluZyh7DQogICAgICAvLyAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLA0KICAgICAgLy8gICBmb3JiaWRDbGljazogdHJ1ZSwNCiAgICAgIC8vICAgZHVyYXRpb246IDANCiAgICAgIC8vIH0pDQogICAgICB0aGlzLnNlbGVjdGVkVGFiID0gbmFtZQ0KICAgIH0sDQogICAgZ2V0RGVmYXVsdEJhc2VMYXllcnMobGF5ZXJzKSB7DQogICAgICB0aGlzLiRyZWZzLm1hcFRvb2xzLmdldERlZmF1bHRCYXNlTGF5ZXJzKGxheWVycykNCiAgICB9LA0KICAgIGdldEJhc2VMYXllck9iamVjdChsYXllcnMpIHsNCiAgICAgIHRoaXMuJHJlZnMubWFwVG9vbHMuZ2V0QmFzZUxheWVyT2JqZWN0KGxheWVycykNCiAgICB9LA0KICAgIC8qKuWIneWni+WMluWcsOWbvuS6i+S7tiAqLw0KICAgIGFzeW5jIGluaXRTY2VuZSgpIHsNCiAgICAgIHRoaXMubGVnZW5kQ29uZmlnID0gZGVmYWx0TGVnZW5kTGlzdA0KICAgICAgLy8gdGhpcy5yZWJ1aWxkTGVnZW5kTGlzdCA9IGxlZ2VuZExpc3QNCiAgICAgIE1hcE9iai5tYXAgPSB3aW5kb3cueGFNYXANCiAgICAgIGF3YWl0IGFkZEljb25Ub01hcChNYXBPYmoubWFwLCB0aGlzLmljb25zKQ0KICAgICAgLy8g5re75Yqg5Y6L5Yqb55uR5rWL6K6+5aSH54K5DQogICAgICB0aGlzLmdldFByZXNzdXJlUG9pbnQoKQ0KICAgIH0sDQogICAgLy8g5Y6L5Yqb55uR5rWL6K6+5aSH5re75Yqg5Zu+5qCHDQogICAgYXN5bmMgZ2V0UHJlc3N1cmVQb2ludCgpIHsNCiAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgIGRldmljZVR5cGU6ICcnLA0KICAgICAgfQ0KICAgICAgbGV0IGFyciA9IFtdDQogICAgICBsZXQgZmxvd0FyciA9IFtdIC8v5rWB6YeP6K6hDQogICAgICBsZXQgc3VwcGx5Rmxvd0FyciA9IFtdIC8v5L6b5rC05rWB6YeP6K6hDQogICAgICBsZXQgcmVjeWNsZUZsb3dBcnIgPSBbXSAvL+WGjeeUn+awtOa1gemHj+iuoQ0KICAgICAgbGV0IHByZXNzdXJlQXJyID0gW10NCiAgICAgIGxldCBzdXBwbHlQcmVzc3VyZUFyciA9IFtdIC8v5L6b5rC05Y6L5Yqb6K6hDQogICAgICBsZXQgcmVjeWNsZVByZXNzdXJlQXJyID0gW10gLy/lho3nlJ/msLTljovlipsNCiAgICAgIC8vIOiOt+WPluaJgOacieebkea1i+iuvuWkh+WfuuehgOS/oeaBrw0KICAgICAgYXdhaXQgZ2V0QWxsRXF1aXBtZW50SW5mb3JtYXRpb24ocGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICBhcnIgPSByZXMuZGF0YQ0KICAgICAgICAgIGZsb3dBcnIgPSBhcnIuZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgICAgICByZXR1cm4gaXRlbS5kZXZpY2VUeXBlID09ICdGbG93bWV0ZXInDQogICAgICAgICAgfSkNCiAgICAgICAgICBzdXBwbHlGbG93QXJyID0gZmxvd0Fyci5maWx0ZXIoKGl0ZW0pID0+IHsNCiAgICAgICAgICAgIHJldHVybiBpdGVtLmJlbG9uZ1N5c3RlbSA9PSAn5L6b5rC0Jw0KICAgICAgICAgIH0pDQogICAgICAgICAgcmVjeWNsZUZsb3dBcnIgPSBmbG93QXJyLmZpbHRlcigoaXRlbSkgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0uYmVsb25nU3lzdGVtID09ICflho3nlJ/msLQnDQogICAgICAgICAgfSkNCiAgICAgICAgICBwcmVzc3VyZUFyciA9IGFyci5maWx0ZXIoKGl0ZW0pID0+IHsNCiAgICAgICAgICAgIHJldHVybiBpdGVtLmRldmljZVR5cGUgPT0gJ0lWVE0nDQogICAgICAgICAgfSkNCiAgICAgICAgICBzdXBwbHlQcmVzc3VyZUFyciA9IHByZXNzdXJlQXJyLmZpbHRlcigoaXRlbSkgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0uYmVsb25nU3lzdGVtID09ICfkvpvmsLQnDQogICAgICAgICAgfSkNCiAgICAgICAgICByZWN5Y2xlUHJlc3N1cmVBcnIgPSBwcmVzc3VyZUFyci5maWx0ZXIoKGl0ZW0pID0+IHsNCiAgICAgICAgICAgIHJldHVybiBpdGVtLmJlbG9uZ1N5c3RlbSA9PSAn5YaN55Sf5rC0Jw0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5hZGRZb3VyTGF5ZXIoDQogICAgICAgICAgICBzdXBwbHlGbG93QXJyLA0KICAgICAgICAgICAgJ+a1gemHj+iuoSjkvpspKicsDQogICAgICAgICAgICAn5rWB6YeP56a757q/5L6bJywNCiAgICAgICAgICAgICfmtYHph4/miqXorabkvpsnDQogICAgICAgICAgKQ0KICAgICAgICAgIHRoaXMuYWRkWW91ckxheWVyKA0KICAgICAgICAgICAgcmVjeWNsZUZsb3dBcnIsDQogICAgICAgICAgICAn5rWB6YeP6K6hKOWGjeeUnykqJywNCiAgICAgICAgICAgICfmtYHph4/nprvnur/lho3nlJ8nLA0KICAgICAgICAgICAgJ+a1gemHj+aKpeitpuWGjeeUnycNCiAgICAgICAgICApDQogICAgICAgICAgdGhpcy5hZGRZb3VyTGF5ZXIoDQogICAgICAgICAgICBzdXBwbHlQcmVzc3VyZUFyciwNCiAgICAgICAgICAgICfljovlipvnm5HmtYso5L6bKSonLA0KICAgICAgICAgICAgJ+WOi+WKm+ebkea1i+emu+e6v+S+mycsDQogICAgICAgICAgICAn5Y6L5Yqb55uR5rWL5oql6K2m5L6bJw0KICAgICAgICAgICkNCiAgICAgICAgICB0aGlzLmFkZFlvdXJMYXllcigNCiAgICAgICAgICAgIHJlY3ljbGVQcmVzc3VyZUFyciwNCiAgICAgICAgICAgICfljovlipvnm5HmtYso5YaN55SfKSonLA0KICAgICAgICAgICAgJ+WOi+WKm+ebkea1i+emu+e6v+WGjeeUnycsDQogICAgICAgICAgICAn5Y6L5Yqb55uR5rWL5oql6K2m5YaN55SfJw0KICAgICAgICAgICkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC8vIGxldCBwYXJhbXMxID0gew0KICAgICAgLy8gICBkZXZpY2VUeXBlOiAiWkpJVlRNIiwNCiAgICAgIC8vIH0NCiAgICAgIC8vIGF3YWl0IGdldEFsbEVxdWlwbWVudEluZm9ybWF0aW9uKHBhcmFtczEpLnRoZW4oKHJlcykgPT4gew0KICAgICAgLy8gICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEubGVuZ3RoID4gMCkgew0KICAgICAgLy8gICAgIGFyciA9IGFyci5jb25jYXQocmVzLmRhdGEpDQogICAgICAvLyAgIH0NCiAgICAgIC8vIH0pOw0KICAgICAgLy8gdGhpcy5hZGRZb3VyTGF5ZXIoYXJyLCAi5Y6L5Yqb55uR5rWLIik7DQogICAgfSwNCiAgICAvLyDlnKjlnLDlm77kuIrmt7vliqDlm77moIflm77lsYINCiAgICBhZGRZb3VyTGF5ZXIocG9pbnRMaXN0LCBpZCwgb2ZmbGluZUltYWdlSWQsIHdhcm5JbWFnZUlkKSB7DQogICAgICBsZXQgdmlzaWJpbGl0eSA9ICd2aXNpYmxlJw0KICAgICAgaWYgKGlkID09ICfljovlipvnm5HmtYso5L6bKSonKSB7DQogICAgICAgIHZpc2liaWxpdHkgPSAndmlzaWJsZScNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHZpc2liaWxpdHkgPSAnbm9uZScNCiAgICAgIH0NCiAgICAgIGNvbnN0IHNvdXJjZURhdGEgPSB7DQogICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsDQogICAgICAgIGZlYXR1cmVzOiBwb2ludExpc3QubWFwKChpKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywNCiAgICAgICAgICAgIGdlb21ldHJ5OiB7DQogICAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsDQogICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbaS5sb24sIGkubGF0XSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBwcm9wZXJ0aWVzOiBpLA0KICAgICAgICAgIH0NCiAgICAgICAgfSksDQogICAgICB9DQogICAgICBpZiAod2luZG93LnhhTWFwLmdldFNvdXJjZShpZCkpIHsNCiAgICAgICAgd2luZG93LnhhTWFwLmdldFNvdXJjZShpZCkuc2V0RGF0YShzb3VyY2VEYXRhKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHdpbmRvdy54YU1hcC5hZGRMYXllcigNCiAgICAgICAgew0KICAgICAgICAgIGlkOiBpZCwNCiAgICAgICAgICB0eXBlOiAnc3ltYm9sJywNCiAgICAgICAgICBzb3VyY2U6IHsNCiAgICAgICAgICAgIHR5cGU6ICdnZW9qc29uJywNCiAgICAgICAgICAgIGRhdGE6IHNvdXJjZURhdGEsDQogICAgICAgICAgfSwNCiAgICAgICAgICBsYXlvdXQ6IHsNCiAgICAgICAgICAgICdpY29uLWltYWdlJzogWw0KICAgICAgICAgICAgICAnY2FzZScsDQogICAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgICAnYWxsJywNCiAgICAgICAgICAgICAgICBbJz09JywgWydnZXQnLCAnaW90T25saW5lJ10sICcwJ10sDQogICAgICAgICAgICAgICAgWychPScsIFsnZ2V0JywgJ2lzV2FybiddLCAnMSddLA0KICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgICAgWyc9PScsIFsnZ2V0JywgJ2lvdE9ubGluZSddLCAnMSddLA0KICAgICAgICAgICAgICBvZmZsaW5lSW1hZ2VJZCwNCiAgICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICdhbGwnLA0KICAgICAgICAgICAgICAgIFsnPT0nLCBbJ2dldCcsICdpb3RPbmxpbmUnXSwgJzAnXSwNCiAgICAgICAgICAgICAgICBbJz09JywgWydnZXQnLCAnaXNXYXJuJ10sICcxJ10sDQogICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgIHdhcm5JbWFnZUlkLA0KICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICAnaWNvbi1zaXplJzogMC43LA0KICAgICAgICAgICAgLy8g5Zu+5qCH5by65Yi25YWo6YOo5pi+56S6DQogICAgICAgICAgICAnaWNvbi1pZ25vcmUtcGxhY2VtZW50JzogdHJ1ZSwNCiAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2liaWxpdHksDQogICAgICAgICAgfSwNCiAgICAgICAgICBtaW56b29tOiAxMywNCiAgICAgICAgfSwNCiAgICAgICAgJycNCiAgICAgICkNCiAgICAgIGxldCBvYmogPSB7fQ0KICAgICAgb2JqW2lkXSA9IHBvaW50TGlzdA0KICAgICAgTWFwT2JqLm1vbml0b3JQb3B1cENvbnRlbnQucHVzaChvYmopDQogICAgICAvLyB3aW5kb3cueGFNYXAub24oIm1vdXNlZW50ZXIiLCBpZCwgdGhpcy5oYW5kbGVNb3VzZUVudGVyKTsNCiAgICAgIC8vIHdpbmRvdy54YU1hcC5vbigibW91c2VvdXQiLCBpZCwgdGhpcy5oYW5kbGVNb3VzZU91dCk7DQogICAgICB3aW5kb3cueGFNYXAub24oJ2NsaWNrJywgaWQsIHRoaXMuaGFuZGxlTW91c2VDbGljaykNCiAgICAgIC8vIHdpbmRvdy54YU1hcC5vbigibG9hZCIsICgpID0+IHsNCiAgICAgIC8vICAgd2luZG93LnhhTWFwLm1vdmVMYXllcigi5Y6L5Yqb55uR5rWLIiwgIiIpOw0KICAgICAgLy8gfSk7DQogICAgfSwNCiAgICAvLyDpvKDmoIfngrnlh7sNCiAgICBoYW5kbGVNb3VzZUNsaWNrKGUpIHsNCiAgICAgIGNvbnN0IGZlYXR1cmUgPSBlLmZlYXR1cmVzWzBdDQogICAgICB3aW5kb3cueGFNYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInDQogICAgICAvLyDnrqHnur/or6bmg4XpnaLmnb/lhbPpl60NCiAgICAgIHRoaXMucGlwZWxpbmVTaG93ID0gZmFsc2UNCiAgICAgIC8vIOi1i+WAvOS8oOmAkue7meivpuaDhemdouadv1ByZXNzdXJlTW9uaXRvci52dWUNCiAgICAgIHRoaXMucHJlc3N1cmVEYXRhRGV0YWlsID0gX2Nsb25lRGVlcChmZWF0dXJlLnByb3BlcnRpZXMpDQogICAgICB0aGlzLnByZXNzdXJlRGF0YURldGFpbC5yZWFsdGltZURhdGEgPSBKU09OLnBhcnNlKA0KICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMucmVhbHRpbWVEYXRhDQogICAgICApDQogICAgICAvLyDljovlipvnm5HmtYvor6bmg4XpnaLmnb8NCiAgICAgIHRoaXMucHJlc3N1cmVNb25pdG9yU2hvdyA9IHRydWUNCiAgICB9LA0KICAgIC8vIOeuoee6vy4uLueCueWHuw0KICAgIGhhbmRsZUxheWVyQ2xpY2soZSkgew0KICAgICAgd2luZG93LnhhTWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJw0KICAgICAgY29uc3QgZmVhdHVyZSA9IHdpbmRvdy54YU1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZS5wb2ludClbMF0NCiAgICAgIHRoaXMubGF5ZXJJRCA9IGZlYXR1cmUubGF5ZXIuaWQNCiAgICAgIC8vIHRoaXMucmVidWlsZERldGFpbEluZm8oZmVhdHVyZSk7DQoNCiAgICAgIGNvbnN0IHR5cGUgPSBmZWF0dXJlLmdlb21ldHJ5LnR5cGUNCiAgICAgIGNvbnN0IHNvdXJjZURhdGEgPSB7DQogICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsDQogICAgICAgIGZlYXR1cmVzOiBbZmVhdHVyZV0sDQogICAgICB9DQogICAgICBsZXQgY2VudGVyID0gZ2V0Q2VudGVyKHNvdXJjZURhdGEpLmdlb21ldHJ5LmNvb3JkaW5hdGVzDQogICAgICB0aGlzLmhpZ2hsaWdodE9uTWFwKHR5cGUsIFtmZWF0dXJlXSwgdGhpcy5sYXllcklELCBjZW50ZXIpDQogICAgICBpZiAoDQogICAgICAgIHRoaXMubGF5ZXJJRCA9PT0gJ3JkX21hcF9kcmFpbnBpcGVfeXNfYmlnJyB8fA0KICAgICAgICB0aGlzLmxheWVySUQgPT0gJ3JkX21hcF9kcmFpbnBpcGVfeXNfc21hbGwnIHx8DQogICAgICAgIHRoaXMubGF5ZXJJRCA9PT0gJ3JkX21hcF9kcmFpbnBpcGVfd3NfYmlnJyB8fA0KICAgICAgICB0aGlzLmxheWVySUQgPT0gJ3JkX21hcF9kcmFpbnBpcGVfd3Nfc21hbGwnIHx8DQogICAgICAgIHRoaXMubGF5ZXJJRCA9PSAnbWFwX3N1cHBseV9waXBlX2Rpc3RyaWJ1dGUnIHx8DQogICAgICAgIHRoaXMubGF5ZXJJRCA9PSAnbWFwX3N1cHBseV9waXBlX2NpcmN1bGF0aW5nJyB8fA0KICAgICAgICB0aGlzLmxheWVySUQgPT0gJ21hcF9zdXBwbHlfcGlwZV9kZWxpdmVyeScgfHwNCiAgICAgICAgdGhpcy5sYXllcklEID09ICdtYXBfcmVjeWNsZV9waXBlJw0KICAgICAgKSB7DQogICAgICAgIC8vIOWOi+WKm+ebkea1i+ivpuaDhemdouadv+WFs+mXrQ0KICAgICAgICB0aGlzLnByZXNzdXJlTW9uaXRvclNob3cgPSBmYWxzZQ0KICAgICAgICAvLyDnrqHnur/lvLnnqpfmiZPlvIANCiAgICAgICAgdGhpcy5waXBlbGluZVNob3cgPSB0cnVlDQogICAgICAgIHRoaXMucGlwZWxpbmVCYXNlSW5mbyA9IGZlYXR1cmUucHJvcGVydGllcw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g566h57q/5by556qX5YWz6ZetDQogICAgICAgIHRoaXMucGlwZWxpbmVTaG93ID0gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOmrmOS6rumAieS4reeahOWFg+e0oA0KICAgICAqLw0KICAgIGhpZ2hsaWdodE9uTWFwKHR5cGUsIGZlYXR1cmVzLCBsYXllcklELCBsbmdMYXQpIHsNCiAgICAgIGlmIChsYXllcklEKSB0aGlzLmxheWVySUQgPSBsYXllcklEDQogICAgICB0aGlzLnJlbW92ZUFsbEhpZ2hsaWdodExheWVyKCkNCiAgICAgIGNvbnN0IHNvdXJjZURhdGEgPSB7DQogICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsDQogICAgICAgIGZlYXR1cmVzOiBmZWF0dXJlcywNCiAgICAgIH0NCiAgICAgIGNvbnN0IGJvdW5kID0gYmJveChzb3VyY2VEYXRhKQ0KICAgICAgY29uc3QgY2VudGVyID0gbG5nTGF0DQogICAgICAgID8gbG5nTGF0DQogICAgICAgIDogZ2V0Q2VudGVyKHNvdXJjZURhdGEpLmdlb21ldHJ5LmNvb3JkaW5hdGVzDQogICAgICAvLyB3aW5kb3cueGFNYXAuZml0Qm91bmRzKGJvdW5kLCB7IG1heFpvb206IDEyLCBwYWRkaW5nOiB7IHJpZ2h0OiA0MDAgfSB9KTsNCiAgICAgIC8vIHRoaXMuc2hvd1BvcHVwKGNlbnRlciwgZmVhdHVyZXMpOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICBpZiAoWydQb2ludCcsICdNdWx0aVBvaW50J10uaW5jbHVkZXModHlwZSkpIHsNCiAgICAgICAgICAvLyDngrkNCiAgICAgICAgICBpZiAoZmVhdHVyZXNbMF0ubGF5ZXIgJiYgZmVhdHVyZXNbMF0ubGF5ZXIubGF5b3V0WydpY29uLWltYWdlJ10pIHsNCiAgICAgICAgICAgIGNvbnN0IGljb25OYW1lID0NCiAgICAgICAgICAgICAgZmVhdHVyZXNbMF0ubGF5ZXIubGF5b3V0WydpY29uLWltYWdlJ10/Lm5hbWUgfHwNCiAgICAgICAgICAgICAgZmVhdHVyZXNbMF0ubGF5ZXIubGF5b3V0WydpY29uLWltYWdlJ10NCiAgICAgICAgICAgIGNvbnN0IGljb25zaXplID0gZmVhdHVyZXNbMF0ubGF5ZXIubGF5b3V0WydpY29uLXNpemUnXQ0KICAgICAgICAgICAgdGhpcy5yZW1vdmVMYXllclNvdXJjZSgnaGlnaHRsaWdodFBvaW50JykNCiAgICAgICAgICAgIC8vIGlmKHRoaXMubW91c2VFbnRlckNhbGxiYWNrKSB0aGlzLm1vdXNlRW50ZXJDYWxsYmFjayhlLmxuZ0xhdCwgW2ZlYXR1cmVdKTsNCiAgICAgICAgICAgIHdpbmRvdy54YU1hcC5hZGRMYXllcih7DQogICAgICAgICAgICAgIGlkOiAnaGlnaHRsaWdodFBvaW50JywNCiAgICAgICAgICAgICAgdHlwZTogJ3N5bWJvbCcsDQogICAgICAgICAgICAgIHNvdXJjZTogew0KICAgICAgICAgICAgICAgIHR5cGU6ICdnZW9qc29uJywNCiAgICAgICAgICAgICAgICBkYXRhOiBmZWF0dXJlc1swXSwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgbGF5b3V0OiB7DQogICAgICAgICAgICAgICAgJ2ljb24tc2l6ZSc6IGljb25zaXplICogMS40LA0KICAgICAgICAgICAgICAgICdpY29uLWltYWdlJzogaWNvbk5hbWUsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB3aW5kb3cueGFNYXAuYWRkTGF5ZXIoew0KICAgICAgICAgICAgICBpZDogYGhpZ2h0bGlnaHRQb2ludGAsDQogICAgICAgICAgICAgIHR5cGU6ICdjaXJjbGUnLA0KICAgICAgICAgICAgICBzb3VyY2U6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsDQogICAgICAgICAgICAgICAgZGF0YTogc291cmNlRGF0YSwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgcGFpbnQ6IHsNCiAgICAgICAgICAgICAgICAnY2lyY2xlLWNvbG9yJzogJ3JlZCcsDQogICAgICAgICAgICAgICAgJ2NpcmNsZS1vcGFjaXR5JzogMCwNCiAgICAgICAgICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IDYsDQogICAgICAgICAgICAgICAgJ2NpcmNsZS1zdHJva2UtY29sb3InOiAnIzFENzVGRicsDQogICAgICAgICAgICAgICAgJ2NpcmNsZS1zdHJva2Utb3BhY2l0eSc6IDEsDQogICAgICAgICAgICAgICAgJ2NpcmNsZS1zdHJva2Utd2lkdGgnOiAzLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAvLyBsYXlvdXQ6IHsNCiAgICAgICAgICAgICAgLy8gICAnaWNvbi1pbWFnZSc6ICd1bmN1cmVkLXB1bHNpbmctZG90JywNCiAgICAgICAgICAgICAgLy8gICAnaWNvbi1pZ25vcmUtcGxhY2VtZW50JzogdHJ1ZSwNCiAgICAgICAgICAgICAgLy8gICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZQ0KICAgICAgICAgICAgICAvLyB9LA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTSE9XX01BUFJFU0VSVk9JUicsIGZhbHNlKQ0KICAgICAgICB9IGVsc2UgaWYgKFsnTGluZVN0cmluZycsICdNdWx0aUxpbmVTdHJpbmcnXS5pbmNsdWRlcyh0eXBlKSkgew0KICAgICAgICAgIGxldCBjb2xvciA9ICcjOTE1MTBBJw0KICAgICAgICAgIGlmIChsYXllcklEID09ICdyZF9tYXBfZHJhaW5waXBlX3lzX3NtYWxsJykgew0KICAgICAgICAgICAgY29sb3IgPSAnIzM5OUFFQScNCiAgICAgICAgICB9IGVsc2UgaWYgKGxheWVySUQgPT0gJ3JkX21hcF9kcmFpbnBpcGVfd3Nfc21hbGwnKSB7DQogICAgICAgICAgICBjb2xvciA9ICcjOTE1MTBBJw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBkZWZhbHRMZWdlbmRMaXN0LmZvckVhY2goKGxlZ2VuZCkgPT4gew0KICAgICAgICAgICAgICBpZiAobGVnZW5kLmlkID09IGxheWVySUQpIHsNCiAgICAgICAgICAgICAgICBjb2xvciA9IGxlZ2VuZC5jbGlja0NvbG9yDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIOe6vw0KICAgICAgICAgIHdpbmRvdy54YU1hcC5hZGRMYXllcih7DQogICAgICAgICAgICBpZDogYGhpZ2h0bGlnaHRMaW5lYCwNCiAgICAgICAgICAgIHR5cGU6ICdsaW5lJywNCiAgICAgICAgICAgIHNvdXJjZTogew0KICAgICAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsDQogICAgICAgICAgICAgIGRhdGE6IHNvdXJjZURhdGEsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgcGFpbnQ6IHsNCiAgICAgICAgICAgICAgJ2xpbmUtY29sb3InOiBjb2xvciwNCiAgICAgICAgICAgICAgJ2xpbmUtd2lkdGgnOiA4LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8vIGxheW91dDogew0KICAgICAgICAgICAgLy8gICAnaWNvbi1pbWFnZSc6ICd1bmN1cmVkLXB1bHNpbmctZG90JywNCiAgICAgICAgICAgIC8vICAgJ2ljb24taWdub3JlLXBsYWNlbWVudCc6IHRydWUsDQogICAgICAgICAgICAvLyAgICdpY29uLWFsbG93LW92ZXJsYXAnOiB0cnVlDQogICAgICAgICAgICAvLyB9LA0KICAgICAgICAgIH0pDQogICAgICAgICAgLy8gd2luZG93LnhhTWFwLmZpdEJvdW5kcyhib3VuZCwge21heFpvb206IDE1LCBwYWRkaW5nOiB7cmlnaHQ6IDQwMH19KTsNCiAgICAgICAgfSBlbHNlIGlmIChbJ1BvbHlnb24nLCAnTXVsdGlQb2x5Z29uJ10uaW5jbHVkZXModHlwZSkpIHsNCiAgICAgICAgICAvLyDpnaINCiAgICAgICAgICB3aW5kb3cueGFNYXAuYWRkTGF5ZXIoew0KICAgICAgICAgICAgaWQ6IGBoaWdodGxpZ2h0UG9seWdvbmAsDQogICAgICAgICAgICB0eXBlOiAnZmlsbCcsDQogICAgICAgICAgICBzb3VyY2U6IHsNCiAgICAgICAgICAgICAgdHlwZTogJ2dlb2pzb24nLA0KICAgICAgICAgICAgICBkYXRhOiBzb3VyY2VEYXRhLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHBhaW50OiB7DQogICAgICAgICAgICAgICdmaWxsLWNvbG9yJzogJ3JnYmEoMjU1LCAwLCAwLCAwLjYpJywNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvLyBsYXlvdXQ6IHsNCiAgICAgICAgICAgIC8vICAgJ2ljb24taW1hZ2UnOiAndW5jdXJlZC1wdWxzaW5nLWRvdCcsDQogICAgICAgICAgICAvLyAgICdpY29uLWlnbm9yZS1wbGFjZW1lbnQnOiB0cnVlLA0KICAgICAgICAgICAgLy8gICAnaWNvbi1hbGxvdy1vdmVybGFwJzogdHJ1ZQ0KICAgICAgICAgICAgLy8gfSwNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC8vIHdpbmRvdy54YU1hcC5maXRCb3VuZHMoYm91bmQsIHttYXhab29tOiAxNSwgcGFkZGluZzoge3JpZ2h0OiA0MDB9fSk7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICByZW1vdmVBbGxIaWdobGlnaHRMYXllcihlKSB7DQogICAgICB0aGlzLnJlbW92ZUxheWVyU291cmNlKCdoaWdodGxpZ2h0UG9pbnQnKQ0KICAgICAgdGhpcy5yZW1vdmVMYXllclNvdXJjZSgnaGlnaHRsaWdodExpbmUnKQ0KICAgICAgdGhpcy5yZW1vdmVMYXllclNvdXJjZSgnaGlnaHRsaWdodFBvbHlnb24nKQ0KICAgIH0sDQogICAgLyoqDQogICAgICog5riF56m65Li05pe255qE5Zu+5bGC5ZKM5rqQDQogICAgICovDQogICAgcmVtb3ZlTGF5ZXJTb3VyY2UobmFtZSkgew0KICAgICAgaWYgKHdpbmRvdy54YU1hcC5nZXRMYXllcihgJHtuYW1lfWApKSB3aW5kb3cueGFNYXAucmVtb3ZlTGF5ZXIoYCR7bmFtZX1gKQ0KICAgICAgaWYgKHdpbmRvdy54YU1hcC5nZXRTb3VyY2UoYCR7bmFtZX1gKSkNCiAgICAgICAgd2luZG93LnhhTWFwLnJlbW92ZVNvdXJjZShgJHtuYW1lfWApDQogICAgfSwNCiAgICAvLyDljovlipvnm5HmtYvor6bmg4XpnaLmnb9QcmVzc3VyZU1vbml0b3IudnVl5YWz6Zet5oyJ6ZKu5Zue6LCDDQogICAgY2xvc2VQb3B1cF9wcmVzc3VyZSgpIHsNCiAgICAgIC8vIOWOi+WKm+ebkea1i+ivpuaDhemdouadvw0KICAgICAgdGhpcy5wcmVzc3VyZU1vbml0b3JTaG93ID0gZmFsc2UNCiAgICB9LA0KICAgIC8v5YWz6Zet566h57q/5by556qXDQogICAgY2xvc2VQb3B1cF9saW5lKCkgew0KICAgICAgdGhpcy5waXBlbGluZVNob3cgPSBmYWxzZQ0KICAgIH0sDQogIH0sDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/OneMap","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <fm-nav-bar>\r\n      <template #title>\r\n        <div class=\"top\">\r\n          <fm-tabs\r\n            v-model=\"selectedTab\"\r\n            @tab-click=\"changeType\"\r\n            type=\"card\"\r\n            color=\"#1B67D8\"\r\n          >\r\n            <fm-tab name=\"地图\" label=\"地图\"></fm-tab>\r\n            <fm-tab name=\"监测列表\" label=\"监测列表\"></fm-tab>\r\n          </fm-tabs>\r\n        </div>\r\n      </template>\r\n      <template #right>\r\n        <img\r\n          v-if=\"selectedTab == '地图'\"\r\n          style=\"height: 24px; position: absolute; right: 20px\"\r\n          :src=\"require('@/assets/img/map/right.png')\"\r\n          @click=\"showMapLegend\"\r\n        />\r\n      </template>\r\n    </fm-nav-bar>\r\n    <xa-map\r\n      v-show=\"selectedTab == '地图'\"\r\n      :create=\"initScene\"\r\n      :legendConfig=\"legendConfig\"\r\n      @getDefaultBaseLayers=\"getDefaultBaseLayers\"\r\n      @getBaseLayerObject=\"getBaseLayerObject\"\r\n      @handleLayerClick=\"handleLayerClick\"\r\n    ></xa-map>\r\n    <mapTools ref=\"mapTools\" v-show=\"selectedTab == '地图'\"></mapTools>\r\n    <monitorList\r\n      ref=\"monitorList\"\r\n      v-if=\"selectedTab == '监测列表'\"\r\n    ></monitorList>\r\n    <PressureMonitorDetail\r\n      v-if=\"pressureMonitorShow && selectedTab == '地图'\"\r\n      :pressureDataDetail=\"pressureDataDetail\"\r\n      @closePopup_pressure=\"closePopup_pressure\"\r\n    >\r\n    </PressureMonitorDetail>\r\n    <LineDetail\r\n      v-if=\"pipelineShow && selectedTab == '地图'\"\r\n      :pipelineBaseInfo=\"pipelineBaseInfo\"\r\n      @closePopup_line=\"closePopup_line\"\r\n    >\r\n    </LineDetail>\r\n    <map-legend\r\n      :popupShow=\"popupShow\"\r\n      shape=\"rectangle\"\r\n      :data-source=\"legendList\"\r\n      :click-func=\"legendClick\"\r\n      @closePop=\"closePop\"\r\n      @legendTitleNameClick=\"legendTitleNameClick\"\r\n    ></map-legend>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mapTools from './mapTools'\r\nimport monitorList from './monitorList'\r\nimport { addIconToMap } from '@/utils/mapUtils'\r\nimport { getAllEquipmentInformation } from './api'\r\nimport { bbox, center as getCenter } from '@turf/turf'\r\nimport _cloneDeep from 'lodash/cloneDeep'\r\n// 图例\r\nimport { defaltLegendList } from './defaltLegendList.js'\r\n// 压力监测点击弹窗\r\nimport PressureMonitorDetail from './components/PressureMonitorDetail.vue'\r\nimport LineDetail from './components/LineDetail.vue'\r\nimport MapLegend from './components/mapLegend.vue'\r\nimport { legendListImport } from './legendList'\r\n\r\nconst MapObj = {\r\n  map: null,\r\n  viewer: null,\r\n  popupItem: '', //mapbox气泡框\r\n  marker: '',\r\n  monitorPopups: [],\r\n  monitorPopupContent: [],\r\n}\r\nexport default {\r\n  name: 'OneMap',\r\n  components: {\r\n    mapTools,\r\n    monitorList,\r\n    PressureMonitorDetail,\r\n    LineDetail,\r\n    MapLegend,\r\n  },\r\n  data() {\r\n    return {\r\n      selectedTab: '地图',\r\n      popupShow: false,\r\n      legendList: legendListImport,\r\n      pressureMonitorShow: false, // 压力监测详情面板显隐\r\n      pipelineShow: false, // 管线详情面板显隐\r\n      pressureDataDetail: {}, // 压力监测详情面板基础信息\r\n      pipelineBaseInfo: {}, // 管线详情面板基础信息\r\n      layerID: '',\r\n      legendConfig: [],\r\n      icons: [\r\n        {\r\n          name: '压力监测(供)*',\r\n          url: require('@/assets/img/map/压力监测.png'),\r\n        },\r\n        {\r\n          name: '压力监测离线供',\r\n          url: require('@/assets/img/map/压力离线供地图.png'),\r\n        },\r\n        {\r\n          name: '压力监测报警供',\r\n          url: require('@/assets/img/map/压力报警供地图.png'),\r\n        },\r\n        {\r\n          name: '泵站',\r\n          url: require('@/assets/img/map/pump.png'),\r\n        },\r\n        {\r\n          name: '再生水厂',\r\n          url: require('@/assets/img/map/再生水厂地图.png'),\r\n        },\r\n        {\r\n          name: '供水厂',\r\n          url: require('@/assets/img/map/供水厂地图.png'),\r\n        },\r\n        {\r\n          name: '给水加压泵站',\r\n          url: require('@/assets/img/map/给水加压泵站地图.png'),\r\n        },\r\n        {\r\n          name: '压力监测(再生)*',\r\n          url: require('@/assets/img/map/再生水压力监测.png'),\r\n        },\r\n        {\r\n          name: '压力监测离线再生',\r\n          url: require('@/assets/img/map/压力离线再生地图.png'),\r\n        },\r\n        {\r\n          name: '压力监测报警再生',\r\n          url: require('@/assets/img/map/压力报警再生地图.png'),\r\n        },\r\n        {\r\n          name: '流量计(供)*',\r\n          url: require('@/assets/img/map/流量计地图.png'),\r\n        },\r\n        {\r\n          name: '流量离线供',\r\n          url: require('@/assets/img/map/流量离线供地图.png'),\r\n        },\r\n        {\r\n          name: '流量报警供',\r\n          url: require('@/assets/img/map/流量报警供地图.png'),\r\n        },\r\n        {\r\n          name: '流量计(再生)*',\r\n          url: require('@/assets/img/map/流量计再生地图.png'),\r\n        },\r\n        {\r\n          name: '流量离线再生',\r\n          url: require('@/assets/img/map/流量离线再生地图.png'),\r\n        },\r\n        {\r\n          name: '流量报警再生',\r\n          url: require('@/assets/img/map/流量报警再生地图.png'),\r\n        },\r\n        // {\r\n        //   name: \"提标改造给水厂\",\r\n        //   url: require(\"@/assets/img/map/提标改造给水厂.png\"),\r\n        // },\r\n        // {\r\n        //   name: \"规划新建给水厂\",\r\n        //   url: require(\"@/assets/img/map/规划新建给水厂.png\"),\r\n        // },\r\n      ],\r\n    }\r\n  },\r\n  methods: {\r\n    legendClick(e, item, id) {\r\n      if (typeof item.id == 'number') {\r\n        this.$notify({\r\n          type: 'warning',\r\n          message: '当前图层暂无数据！',\r\n        })\r\n        return\r\n      }\r\n      item.clickFlag = !item.clickFlag\r\n      this.legendControlLayer(item)\r\n    },\r\n    legendControlLayer(item) {\r\n      let map = window.xaMap\r\n      if (map.getLayer(item.id)) {\r\n        if (item.clickFlag) {\r\n          map.setLayoutProperty(item.id, 'visibility', 'none')\r\n          if (item.id == 'rd_map_drainpipe_ys_big') {\r\n            let filter = map.getFilter('rd_map_manhole')\r\n            if (\r\n              filter.toString() == ['all'].toString() ||\r\n              filter.toString() == ['in', 'manhole_type', '雨水'].toString()\r\n            ) {\r\n              if (\r\n                map.getLayoutProperty(\r\n                  'rd_map_drainpipe_ws_big',\r\n                  'visibility'\r\n                ) == 'none'\r\n              ) {\r\n                filter = ['in', 'manhole_type', '']\r\n              } else {\r\n                filter = ['in', 'manhole_type', '污水']\r\n              }\r\n            }\r\n            //雨水管线图层控制雨水井、雨水箭头、雨水较小层级图层显示\r\n            map.setLayoutProperty('rd_map_comb', 'visibility', 'none')\r\n\r\n            map.setFilter('rd_map_manhole', filter)\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ys_big_direction',\r\n              'visibility',\r\n              'none'\r\n            )\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ys_small',\r\n              'visibility',\r\n              'none'\r\n            )\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ys_small_direction',\r\n              'visibility',\r\n              'none'\r\n            )\r\n          } else if (item.id == 'map_supply_pipe_circulating') {\r\n            //循环水（回水）管线控制循环水（回水）节点显示\r\n            map.setLayoutProperty(\r\n              'map_supply_node_circulating',\r\n              'visibility',\r\n              'none'\r\n            )\r\n          } else if (item.id == 'map_supply_pipe_distribute') {\r\n            //配水管线控制配水节点显示\r\n            map.setLayoutProperty(\r\n              'map_supply_node_distribute',\r\n              'visibility',\r\n              'none'\r\n            )\r\n          } else if (item.id == 'map_supply_pipe_delivery') {\r\n            //输水管线控制输水节点显示\r\n            map.setLayoutProperty(\r\n              'map_supply_node_delivery',\r\n              'visibility',\r\n              'none'\r\n            )\r\n          } else if (item.id == 'map_recycle_pipe') {\r\n            //再生水管线控制再生水节点显示\r\n            map.setLayoutProperty('map_recycle_node', 'visibility', 'none')\r\n          } else if (item.id == 'rd_map_drainpipe_ws_big') {\r\n            //污水管线图层控制污水井、污水箭头、污水较小层级图层显示\r\n            let filter = map.getFilter('rd_map_manhole')\r\n            if (\r\n              filter.toString() == ['all'].toString() ||\r\n              filter.toString() == ['in', 'manhole_type', '污水'].toString()\r\n            ) {\r\n              if (\r\n                map.getLayoutProperty(\r\n                  'rd_map_drainpipe_ys_big',\r\n                  'visibility'\r\n                ) == 'none'\r\n              ) {\r\n                filter = ['in', 'manhole_type', '']\r\n              } else {\r\n                filter = ['in', 'manhole_type', '雨水']\r\n              }\r\n            }\r\n            map.setFilter('rd_map_manhole', filter)\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ws_big_direction',\r\n              'visibility',\r\n              'none'\r\n            )\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ws_small',\r\n              'visibility',\r\n              'none'\r\n            )\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ws_small_direction',\r\n              'visibility',\r\n              'none'\r\n            )\r\n          } else if (item.id == '压力监测') {\r\n            // map.setLayoutProperty(\r\n            //   \"压力监测-报警\",\r\n            //   \"visibility\",\r\n            //   \"none\"\r\n            // );\r\n          }\r\n        } else {\r\n          map.setLayoutProperty(item.id, 'visibility', 'visible')\r\n          if (item.id == 'rd_map_drainpipe_ys_big') {\r\n            let filter = map.getFilter('rd_map_manhole')\r\n            if (\r\n              filter.toString() == ['in', 'manhole_type', ''].toString() ||\r\n              filter.toString() == ['in', 'manhole_type', '污水'].toString()\r\n            ) {\r\n              if (\r\n                map.getLayoutProperty(\r\n                  'rd_map_drainpipe_ws_big',\r\n                  'visibility'\r\n                ) != 'none'\r\n              ) {\r\n                filter = ['all']\r\n              } else {\r\n                filter = ['in', 'manhole_type', '雨水']\r\n              }\r\n            }\r\n            map.setFilter('rd_map_manhole', filter)\r\n            map.setLayoutProperty('rd_map_comb', 'visibility', 'visible')\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ys_big_direction',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ys_small',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ys_small_direction',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n          } else if (item.id == 'map_supply_pipe_circulating') {\r\n            map.setLayoutProperty(\r\n              'map_supply_node_circulating',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n          } else if (item.id == 'map_supply_pipe_distribute') {\r\n            map.setLayoutProperty(\r\n              'map_supply_node_distribute',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n          } else if (item.id == 'map_supply_pipe_delivery') {\r\n            map.setLayoutProperty(\r\n              'map_supply_node_delivery',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n          } else if (item.id == 'map_recycle_pipe') {\r\n            map.setLayoutProperty('map_recycle_node', 'visibility', 'visible')\r\n          } else if (item.id == 'rd_map_drainpipe_ws_big') {\r\n            let filter = map.getFilter('rd_map_manhole')\r\n            if (\r\n              filter.toString() == ['in', 'manhole_type', ''].toString() ||\r\n              filter.toString() == ['in', 'manhole_type', '雨水'].toString()\r\n            ) {\r\n              if (\r\n                map.getLayoutProperty(\r\n                  'rd_map_drainpipe_ys_big',\r\n                  'visibility'\r\n                ) != 'none'\r\n              ) {\r\n                filter = ['all']\r\n              } else {\r\n                filter = ['in', 'manhole_type', '污水']\r\n              }\r\n            }\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ws_big_direction',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n            map.setFilter('rd_map_manhole', filter)\r\n            map.setLayoutProperty('rd_map_manhole', 'visibility', 'visible')\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ws_small_direction',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n            map.setLayoutProperty(\r\n              'rd_map_drainpipe_ws_small',\r\n              'visibility',\r\n              'visible'\r\n            )\r\n          } else if (item.id == '压力监测') {\r\n            // map.setLayoutProperty(\r\n            //   \"压力监测-报警\",\r\n            //   \"visibility\",\r\n            //   \"visible\"\r\n            // );\r\n          }\r\n        }\r\n      }\r\n    },\r\n    legendTitleNameClick(legendTitleName) {\r\n      this.legendList.forEach((item) => {\r\n        if (item.label === legendTitleName) {\r\n          item.titleStatus = !item.titleStatus\r\n          //\r\n          item.options.forEach((smallItem) => {\r\n            // 当该标题下图层内容为显示状态时才进入判断\r\n            if (item.titleStatus === true && typeof smallItem.id == 'number') {\r\n              setTimeout(() => {\r\n                this.$notify({\r\n                  type: 'warning',\r\n                  message: smallItem.label + '图层暂无数据！',\r\n                })\r\n              }, 0)\r\n              return\r\n            }\r\n            if (item.titleStatus === true) {\r\n              // 标题状态点亮时\r\n              smallItem.clickFlag = false // 图层均显示\r\n            } else {\r\n              smallItem.clickFlag = true // 图层均隐藏\r\n            }\r\n            this.legendControlLayer(smallItem)\r\n          })\r\n        }\r\n      })\r\n    },\r\n    closePop(val) {\r\n      this.popupShow = val\r\n    },\r\n    showMapLegend() {\r\n      this.popupShow = true\r\n    },\r\n    // tab切换回调\r\n    changeType(name, title) {\r\n      // Toast.loading({\r\n      //   message: '加载中...',\r\n      //   forbidClick: true,\r\n      //   duration: 0\r\n      // })\r\n      this.selectedTab = name\r\n    },\r\n    getDefaultBaseLayers(layers) {\r\n      this.$refs.mapTools.getDefaultBaseLayers(layers)\r\n    },\r\n    getBaseLayerObject(layers) {\r\n      this.$refs.mapTools.getBaseLayerObject(layers)\r\n    },\r\n    /**初始化地图事件 */\r\n    async initScene() {\r\n      this.legendConfig = defaltLegendList\r\n      // this.rebuildLegendList = legendList\r\n      MapObj.map = window.xaMap\r\n      await addIconToMap(MapObj.map, this.icons)\r\n      // 添加压力监测设备点\r\n      this.getPressurePoint()\r\n    },\r\n    // 压力监测设备添加图标\r\n    async getPressurePoint() {\r\n      let params = {\r\n        deviceType: '',\r\n      }\r\n      let arr = []\r\n      let flowArr = [] //流量计\r\n      let supplyFlowArr = [] //供水流量计\r\n      let recycleFlowArr = [] //再生水流量计\r\n      let pressureArr = []\r\n      let supplyPressureArr = [] //供水压力计\r\n      let recyclePressureArr = [] //再生水压力\r\n      // 获取所有监测设备基础信息\r\n      await getAllEquipmentInformation(params).then((res) => {\r\n        if (res.data && res.data.length > 0) {\r\n          arr = res.data\r\n          flowArr = arr.filter((item) => {\r\n            return item.deviceType == 'Flowmeter'\r\n          })\r\n          supplyFlowArr = flowArr.filter((item) => {\r\n            return item.belongSystem == '供水'\r\n          })\r\n          recycleFlowArr = flowArr.filter((item) => {\r\n            return item.belongSystem == '再生水'\r\n          })\r\n          pressureArr = arr.filter((item) => {\r\n            return item.deviceType == 'IVTM'\r\n          })\r\n          supplyPressureArr = pressureArr.filter((item) => {\r\n            return item.belongSystem == '供水'\r\n          })\r\n          recyclePressureArr = pressureArr.filter((item) => {\r\n            return item.belongSystem == '再生水'\r\n          })\r\n          this.addYourLayer(\r\n            supplyFlowArr,\r\n            '流量计(供)*',\r\n            '流量离线供',\r\n            '流量报警供'\r\n          )\r\n          this.addYourLayer(\r\n            recycleFlowArr,\r\n            '流量计(再生)*',\r\n            '流量离线再生',\r\n            '流量报警再生'\r\n          )\r\n          this.addYourLayer(\r\n            supplyPressureArr,\r\n            '压力监测(供)*',\r\n            '压力监测离线供',\r\n            '压力监测报警供'\r\n          )\r\n          this.addYourLayer(\r\n            recyclePressureArr,\r\n            '压力监测(再生)*',\r\n            '压力监测离线再生',\r\n            '压力监测报警再生'\r\n          )\r\n        }\r\n      })\r\n      // let params1 = {\r\n      //   deviceType: \"ZJIVTM\",\r\n      // }\r\n      // await getAllEquipmentInformation(params1).then((res) => {\r\n      //   if (res.data && res.data.length > 0) {\r\n      //     arr = arr.concat(res.data)\r\n      //   }\r\n      // });\r\n      // this.addYourLayer(arr, \"压力监测\");\r\n    },\r\n    // 在地图上添加图标图层\r\n    addYourLayer(pointList, id, offlineImageId, warnImageId) {\r\n      let visibility = 'visible'\r\n      if (id == '压力监测(供)*') {\r\n        visibility = 'visible'\r\n      } else {\r\n        visibility = 'none'\r\n      }\r\n      const sourceData = {\r\n        type: 'FeatureCollection',\r\n        features: pointList.map((i) => {\r\n          return {\r\n            type: 'Feature',\r\n            geometry: {\r\n              type: 'Point',\r\n              coordinates: [i.lon, i.lat],\r\n            },\r\n            properties: i,\r\n          }\r\n        }),\r\n      }\r\n      if (window.xaMap.getSource(id)) {\r\n        window.xaMap.getSource(id).setData(sourceData)\r\n        return\r\n      }\r\n      window.xaMap.addLayer(\r\n        {\r\n          id: id,\r\n          type: 'symbol',\r\n          source: {\r\n            type: 'geojson',\r\n            data: sourceData,\r\n          },\r\n          layout: {\r\n            'icon-image': [\r\n              'case',\r\n              [\r\n                'all',\r\n                ['==', ['get', 'iotOnline'], '0'],\r\n                ['!=', ['get', 'isWarn'], '1'],\r\n              ],\r\n              id,\r\n              ['==', ['get', 'iotOnline'], '1'],\r\n              offlineImageId,\r\n              [\r\n                'all',\r\n                ['==', ['get', 'iotOnline'], '0'],\r\n                ['==', ['get', 'isWarn'], '1'],\r\n              ],\r\n              warnImageId,\r\n              id,\r\n            ],\r\n            'icon-size': 0.7,\r\n            // 图标强制全部显示\r\n            'icon-ignore-placement': true,\r\n            visibility: visibility,\r\n          },\r\n          minzoom: 13,\r\n        },\r\n        ''\r\n      )\r\n      let obj = {}\r\n      obj[id] = pointList\r\n      MapObj.monitorPopupContent.push(obj)\r\n      // window.xaMap.on(\"mouseenter\", id, this.handleMouseEnter);\r\n      // window.xaMap.on(\"mouseout\", id, this.handleMouseOut);\r\n      window.xaMap.on('click', id, this.handleMouseClick)\r\n      // window.xaMap.on(\"load\", () => {\r\n      //   window.xaMap.moveLayer(\"压力监测\", \"\");\r\n      // });\r\n    },\r\n    // 鼠标点击\r\n    handleMouseClick(e) {\r\n      const feature = e.features[0]\r\n      window.xaMap.getCanvas().style.cursor = 'pointer'\r\n      // 管线详情面板关闭\r\n      this.pipelineShow = false\r\n      // 赋值传递给详情面板PressureMonitor.vue\r\n      this.pressureDataDetail = _cloneDeep(feature.properties)\r\n      this.pressureDataDetail.realtimeData = JSON.parse(\r\n        feature.properties.realtimeData\r\n      )\r\n      // 压力监测详情面板\r\n      this.pressureMonitorShow = true\r\n    },\r\n    // 管线...点击\r\n    handleLayerClick(e) {\r\n      window.xaMap.getCanvas().style.cursor = 'pointer'\r\n      const feature = window.xaMap.queryRenderedFeatures(e.point)[0]\r\n      this.layerID = feature.layer.id\r\n      // this.rebuildDetailInfo(feature);\r\n\r\n      const type = feature.geometry.type\r\n      const sourceData = {\r\n        type: 'FeatureCollection',\r\n        features: [feature],\r\n      }\r\n      let center = getCenter(sourceData).geometry.coordinates\r\n      this.highlightOnMap(type, [feature], this.layerID, center)\r\n      if (\r\n        this.layerID === 'rd_map_drainpipe_ys_big' ||\r\n        this.layerID == 'rd_map_drainpipe_ys_small' ||\r\n        this.layerID === 'rd_map_drainpipe_ws_big' ||\r\n        this.layerID == 'rd_map_drainpipe_ws_small' ||\r\n        this.layerID == 'map_supply_pipe_distribute' ||\r\n        this.layerID == 'map_supply_pipe_circulating' ||\r\n        this.layerID == 'map_supply_pipe_delivery' ||\r\n        this.layerID == 'map_recycle_pipe'\r\n      ) {\r\n        // 压力监测详情面板关闭\r\n        this.pressureMonitorShow = false\r\n        // 管线弹窗打开\r\n        this.pipelineShow = true\r\n        this.pipelineBaseInfo = feature.properties\r\n      } else {\r\n        // 管线弹窗关闭\r\n        this.pipelineShow = false\r\n      }\r\n    },\r\n    /**\r\n     * 高亮选中的元素\r\n     */\r\n    highlightOnMap(type, features, layerID, lngLat) {\r\n      if (layerID) this.layerID = layerID\r\n      this.removeAllHighlightLayer()\r\n      const sourceData = {\r\n        type: 'FeatureCollection',\r\n        features: features,\r\n      }\r\n      const bound = bbox(sourceData)\r\n      const center = lngLat\r\n        ? lngLat\r\n        : getCenter(sourceData).geometry.coordinates\r\n      // window.xaMap.fitBounds(bound, { maxZoom: 12, padding: { right: 400 } });\r\n      // this.showPopup(center, features);\r\n      this.$nextTick(() => {\r\n        if (['Point', 'MultiPoint'].includes(type)) {\r\n          // 点\r\n          if (features[0].layer && features[0].layer.layout['icon-image']) {\r\n            const iconName =\r\n              features[0].layer.layout['icon-image']?.name ||\r\n              features[0].layer.layout['icon-image']\r\n            const iconsize = features[0].layer.layout['icon-size']\r\n            this.removeLayerSource('hightlightPoint')\r\n            // if(this.mouseEnterCallback) this.mouseEnterCallback(e.lngLat, [feature]);\r\n            window.xaMap.addLayer({\r\n              id: 'hightlightPoint',\r\n              type: 'symbol',\r\n              source: {\r\n                type: 'geojson',\r\n                data: features[0],\r\n              },\r\n              layout: {\r\n                'icon-size': iconsize * 1.4,\r\n                'icon-image': iconName,\r\n              },\r\n            })\r\n          } else {\r\n            window.xaMap.addLayer({\r\n              id: `hightlightPoint`,\r\n              type: 'circle',\r\n              source: {\r\n                type: 'geojson',\r\n                data: sourceData,\r\n              },\r\n              paint: {\r\n                'circle-color': 'red',\r\n                'circle-opacity': 0,\r\n                'circle-radius': 6,\r\n                'circle-stroke-color': '#1D75FF',\r\n                'circle-stroke-opacity': 1,\r\n                'circle-stroke-width': 3,\r\n              },\r\n              // layout: {\r\n              //   'icon-image': 'uncured-pulsing-dot',\r\n              //   'icon-ignore-placement': true,\r\n              //   'icon-allow-overlap': true\r\n              // },\r\n            })\r\n          }\r\n          this.$store.commit('SHOW_MAPRESERVOIR', false)\r\n        } else if (['LineString', 'MultiLineString'].includes(type)) {\r\n          let color = '#91510A'\r\n          if (layerID == 'rd_map_drainpipe_ys_small') {\r\n            color = '#399AEA'\r\n          } else if (layerID == 'rd_map_drainpipe_ws_small') {\r\n            color = '#91510A'\r\n          } else {\r\n            defaltLegendList.forEach((legend) => {\r\n              if (legend.id == layerID) {\r\n                color = legend.clickColor\r\n              }\r\n            })\r\n          }\r\n          // 线\r\n          window.xaMap.addLayer({\r\n            id: `hightlightLine`,\r\n            type: 'line',\r\n            source: {\r\n              type: 'geojson',\r\n              data: sourceData,\r\n            },\r\n            paint: {\r\n              'line-color': color,\r\n              'line-width': 8,\r\n            },\r\n            // layout: {\r\n            //   'icon-image': 'uncured-pulsing-dot',\r\n            //   'icon-ignore-placement': true,\r\n            //   'icon-allow-overlap': true\r\n            // },\r\n          })\r\n          // window.xaMap.fitBounds(bound, {maxZoom: 15, padding: {right: 400}});\r\n        } else if (['Polygon', 'MultiPolygon'].includes(type)) {\r\n          // 面\r\n          window.xaMap.addLayer({\r\n            id: `hightlightPolygon`,\r\n            type: 'fill',\r\n            source: {\r\n              type: 'geojson',\r\n              data: sourceData,\r\n            },\r\n            paint: {\r\n              'fill-color': 'rgba(255, 0, 0, 0.6)',\r\n            },\r\n            // layout: {\r\n            //   'icon-image': 'uncured-pulsing-dot',\r\n            //   'icon-ignore-placement': true,\r\n            //   'icon-allow-overlap': true\r\n            // },\r\n          })\r\n          // window.xaMap.fitBounds(bound, {maxZoom: 15, padding: {right: 400}});\r\n        }\r\n      })\r\n    },\r\n    removeAllHighlightLayer(e) {\r\n      this.removeLayerSource('hightlightPoint')\r\n      this.removeLayerSource('hightlightLine')\r\n      this.removeLayerSource('hightlightPolygon')\r\n    },\r\n    /**\r\n     * 清空临时的图层和源\r\n     */\r\n    removeLayerSource(name) {\r\n      if (window.xaMap.getLayer(`${name}`)) window.xaMap.removeLayer(`${name}`)\r\n      if (window.xaMap.getSource(`${name}`))\r\n        window.xaMap.removeSource(`${name}`)\r\n    },\r\n    // 压力监测详情面板PressureMonitor.vue关闭按钮回调\r\n    closePopup_pressure() {\r\n      // 压力监测详情面板\r\n      this.pressureMonitorShow = false\r\n    },\r\n    //关闭管线弹窗\r\n    closePopup_line() {\r\n      this.pipelineShow = false\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.main {\r\n  width: 100%;\r\n  height: calc(100% - 98px - env(safe-area-inset-bottom));\r\n  height: calc(100% - 98px - constant(safe-area-inset-bottom));\r\n  position: relative;\r\n  .top {\r\n    width: 100%;\r\n    height: 70px;\r\n    padding: 10px 0;\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    /deep/.fm-tabs__nav--card {\r\n      border-color: transparent !important;\r\n    }\r\n    /deep/.fm-tab {\r\n      color: #555555 !important;\r\n      width: 202px;\r\n      height: 56px;\r\n      box-shadow: 0px 8px 16px 0px rgba(104, 115, 127, 0.06);\r\n      border-radius: 32px;\r\n      border-right: none !important;\r\n      background-color: #f5f5f5;\r\n    }\r\n    /deep/.fm-tab--active {\r\n      color: #ffffff !important;\r\n      width: 202px;\r\n      height: 56px;\r\n      border-radius: 32px;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}