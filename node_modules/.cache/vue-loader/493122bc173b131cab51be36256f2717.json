{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\DispatchCenter\\components\\DispatchOrder\\addDispatchOrder.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\DispatchCenter\\components\\DispatchOrder\\addDispatchOrder.vue","mtime":1705912915787},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgew0KICBOYXZCYXIsDQogIFNlYXJjaCwNCiAgVG9hc3QsDQogIENlbGwsDQogIENlbGxHcm91cCwNCiAgUHVsbFJlZnJlc2gsDQogIExpc3QsDQogIFNpZGViYXIsDQogIFNpZGViYXJJdGVtLA0KICBTd2lwZUNlbGwsDQogIEJ1dHRvbiwNCiAgTm90aWNlQmFyLA0KICBJY29uLA0KICBEaWFsb2csDQp9IGZyb20gJ2Zhd2tlcy1tb2JpbGUtbGliJw0KaW1wb3J0IFVwbG9hZGVyIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWQvVXBsb2FkZXIudnVlJw0KaW1wb3J0IHNlbGVjdFVzZXIgZnJvbSAnQC9jb21wb25lbnRzL3NlbGVjdC11c2VyJw0KaW1wb3J0ICogYXMgYXBpcyBmcm9tICcuLi8uLi9hcGknDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdhZGREaXNwYXRjaE9yZGVyJywNCiAgY29tcG9uZW50czogew0KICAgIFtOYXZCYXIubmFtZV06IE5hdkJhciwNCiAgICBbU2VhcmNoLm5hbWVdOiBTZWFyY2gsDQogICAgW1RvYXN0Lm5hbWVdOiBUb2FzdCwNCiAgICBbQ2VsbC5uYW1lXTogQ2VsbCwNCiAgICBbQ2VsbEdyb3VwLm5hbWVdOiBDZWxsR3JvdXAsDQogICAgW1B1bGxSZWZyZXNoLm5hbWVdOiBQdWxsUmVmcmVzaCwNCiAgICBbTGlzdC5uYW1lXTogTGlzdCwNCiAgICBbU2lkZWJhci5uYW1lXTogU2lkZWJhciwNCiAgICBbU2lkZWJhckl0ZW0ubmFtZV06IFNpZGViYXJJdGVtLA0KICAgIFtTd2lwZUNlbGwubmFtZV06IFN3aXBlQ2VsbCwNCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24sDQogICAgW05vdGljZUJhci5uYW1lXTogTm90aWNlQmFyLA0KICAgIFtJY29uLm5hbWVdOiBJY29uLA0KICAgIFtEaWFsb2cubmFtZV06IERpYWxvZywNCiAgICBVcGxvYWRlciwNCiAgICBzZWxlY3RVc2VyDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRhc2tJZDogJycsDQogICAgICBwcm9jZXNzSW5zdGFuY2VJZDogJycsDQogICAgICB0YXNrTm9kZU5hbWU6ICcnLA0KICAgICAgYWN0aXZlVGFiOiAwLA0KICAgICAgY29udGVudDogJycsDQogICAgICBhdHRhY2htZW50OiAnJywNCiAgICAgIHNlbmRTdGF0aW9uU2hvdzogZmFsc2UsDQogICAgICBnZXRTdGF0aW9uU2hvdzogZmFsc2UsDQogICAgICBnZXRQZXJzb25TaG93OiBmYWxzZSwNCiAgICAgIHNlbmRQZXJzb25TaG93OiBmYWxzZSwNCiAgICAgIHNlbmRUaW1lU2hvdzogZmFsc2UsDQogICAgICBkaXNwYXRjaE9ialNob3c6IGZhbHNlLA0KICAgICAgZGlzcGF0Y2hPcmRlclNob3c6IGZhbHNlLA0KICAgICAgY2NTdGF0aW9uU2hvdzogZmFsc2UsDQogICAgICBzZW5kVGltZTogbmV3IERhdGUoKSwNCiAgICAgIHN0YXRpb25PcHRpb25zOiBbDQogICAgICAgIHsNCiAgICAgICAgICB0ZXh0OiAn6LCD5bqm5Lit5b+DJywNCiAgICAgICAgICB2YWx1ZTogJ+iwg+W6puS4reW/gycsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0ZXh0OiAnMSPkvpvmsLTljoInLA0KICAgICAgICAgIHZhbHVlOiAnMSPkvpvmsLTljoInLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogJ1hYWOS+m+awtOWOgicsDQogICAgICAgICAgdmFsdWU6ICdYWFjkvpvmsLTljoInLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogJzEj5rO156uZJywNCiAgICAgICAgICB2YWx1ZTogJzEj5rO156uZJywNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRleHQ6ICcyI+azteermScsDQogICAgICAgICAgdmFsdWU6ICcyI+azteermScsDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgc2VuZERlcGFydG1lbnRMaXN0OiBbXSwNCiAgICAgIHJlY2VpdmVEZXBhcnRtZW50TGlzdDogW10sDQogICAgICBjY0RlcGFydG1lbnRMaXN0OiBbXSwNCiAgICAgIGZvcm06IHt9LA0KICAgICAgYXBwcm92ZUZvcm06IHt9LA0KICAgICAgcmVjZWl2ZUZ1bGxOYW1lOiAnJywNCiAgICAgIHNlbmRGdWxsTmFtZTogJycsDQogICAgICBmbG93TGlzdDogW10sDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIG1vZGUoKSB7DQogICAgICByZXR1cm4gdGhpcy4kcm91dGUucXVlcnkubW9kZQ0KICAgIH0sDQogICAgdGFiTGlzdCgpIHsNCiAgICAgIGxldCByZXMgPSAnJw0KICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHsNCiAgICAgICAgY2FzZSAnYWRkJzoNCiAgICAgICAgICByZXMgPSBbJ+ivpuaDhSddDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgY2FzZSAnZGVhbCc6DQogICAgICAgIGNhc2UgJ3ZpZXcnOg0KICAgICAgICAgIHJlcyA9IFsn6K+m5oOFJywgJ+a1gei9rCcsICflrqHmibknXQ0KICAgICAgICAgIGJyZWFrDQogICAgICAgIC8vIGNhc2UgJ2FkZCc6DQogICAgICAgIC8vICAgICByZXMgPSBbJ+ivpuaDhScsICfmtYHovawnLCAn5a6h5om5J10NCiAgICAgICAgLy8gICAgIGJyZWFrDQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgcmVzID0gWyfor6bmg4UnXQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJlcw0KICAgIH0sDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5Lm1vZGUgPT0gJ2FkZCcpIHsNCiAgICAgIHRoaXMuZ2V0RGVwYXJ0bWVudCgpDQogICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5tb2RlID09ICd2aWV3Jykgew0KICAgICAgdGhpcy5mb3JtID0gSlNPTi5wYXJzZSh0aGlzLiRyb3V0ZS5xdWVyeS5kYXRhKQ0KICAgICAgdGhpcy5yZWNlaXZlRnVsbE5hbWUgPSB0aGlzLmZvcm0ucmVjZWl2ZUZ1bGxOYW1lIHx8ICcnDQogICAgICB0aGlzLnNlbmRGdWxsTmFtZSA9IHRoaXMuZm9ybS5zZW5kRnVsbE5hbWUgfHwgJycNCiAgICAgIHRoaXMuYXR0YWNobWVudCA9IEpTT04ucGFyc2UodGhpcy5mb3JtLmZpbGVBdHRhY2htZW50KVswXS5ncm91cFRva2VuDQogICAgICBpZiAodGhpcy5mb3JtLmNvbW1hbmRTdGF0dXMgPT0gJ+W3suaOpeWNlScgfHwgdGhpcy5mb3JtLmNvbW1hbmRTdGF0dXMgPT0gJ+W+heWkhOeQhicgfHwgdGhpcy5mb3JtLmNvbW1hbmRTdGF0dXMgPT0gJ+W3suWujOaIkCcpIHsNCiAgICAgICAgdGhpcy5hcHByb3ZlRm9ybS5hcHByb3ZhbE9waW5pb24gPSB0aGlzLmZvcm0uYXBwcm92YWxPcGluaW9uDQogICAgICAgIHRoaXMuaW5pdFByb2Nlc3ModGhpcy5mb3JtLmlkKQ0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUucXVlcnkubW9kZSA9PSAnZGVhbCcpIHsNCiAgICAgIHRoaXMuZm9ybSA9IEpTT04ucGFyc2UodGhpcy4kcm91dGUucXVlcnkuZGF0YSkNCiAgICAgIHRoaXMucmVjZWl2ZUZ1bGxOYW1lID0gdGhpcy5mb3JtLnJlY2VpdmVGdWxsTmFtZSB8fCAnJw0KICAgICAgdGhpcy5zZW5kRnVsbE5hbWUgPSB0aGlzLmZvcm0uc2VuZEZ1bGxOYW1lIHx8ICcnDQogICAgICB0aGlzLmF0dGFjaG1lbnQgPSBKU09OLnBhcnNlKHRoaXMuZm9ybS5maWxlQXR0YWNobWVudClbMF0uZ3JvdXBUb2tlbg0KICAgICAgaWYgKHRoaXMuZm9ybS5jb21tYW5kU3RhdHVzID09ICflt7LmjqXljZUnIHx8IHRoaXMuZm9ybS5jb21tYW5kU3RhdHVzID09ICflvoXlpITnkIYnKSB7DQogICAgICAgIHRoaXMuaW5pdFByb2Nlc3ModGhpcy5mb3JtLmlkKQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldERlcGFydG1lbnQoKSB7DQogICAgICB0aGlzLnNlbmREZXBhcnRtZW50TGlzdCA9IFtdDQogICAgICB0aGlzLnJlY2VpdmVEZXBhcnRtZW50TGlzdCA9IFtdDQogICAgICB0aGlzLmNjRGVwYXJ0bWVudExpc3QgPSBbXQ0KICAgICAgYXBpcy5nZXREZXBhcnRtZW50KCkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLnN0YXR1cykgew0KICAgICAgICAgIHJlcy5kYXRhLnJlY29yZHMuZmlsdGVyKGl0ID0+IGl0LmRlcGFydFR5cGUgPT0gJ+WPkemAgemDqOmXqCcpLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICB0aGlzLnNlbmREZXBhcnRtZW50TGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uZGVwYXJ0TmFtZSwNCiAgICAgICAgICAgICAgdGV4dDogaXRlbS5kZXBhcnROYW1lLA0KICAgICAgICAgICAgICAuLi5pdGVtDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICAgICAgcmVzLmRhdGEucmVjb3Jkcy5maWx0ZXIoaXQgPT4gaXQuZGVwYXJ0VHlwZSA9PSAn5o6l5Y2V6YOo6ZeoJykuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgIHRoaXMucmVjZWl2ZURlcGFydG1lbnRMaXN0LnB1c2goew0KICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5kZXBhcnROYW1lLA0KICAgICAgICAgICAgICB0ZXh0OiBpdGVtLmRlcGFydE5hbWUsDQogICAgICAgICAgICAgIC4uLml0ZW0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSkNCiAgICAgICAgICByZXMuZGF0YS5yZWNvcmRzLmZpbHRlcihpdCA9PiBpdC5kZXBhcnRUeXBlID09ICfmioTpgIHpg6jpl6gnKS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgdGhpcy5jY0RlcGFydG1lbnRMaXN0LnB1c2goew0KICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5kZXBhcnROYW1lLA0KICAgICAgICAgICAgICB0ZXh0OiBpdGVtLmRlcGFydE5hbWUsDQogICAgICAgICAgICAgIC4uLml0ZW0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbmREZXBhcnRtZW50TGlzdCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVBZGQodmFsKSB7DQogICAgICBsZXQgcGFybWFzID0ge307DQogICAgICBpZiAodmFsID09ICflt7LlrozmiJAnKSB7DQogICAgICAgIHBhcm1hcyA9IHsNCiAgICAgICAgICBlbnRpdHlOYW1lOiAnRGlzcGF0Y2hpbmdDb21tYW5kJywNCiAgICAgICAgICBlbnRpdHlPYmplY3Q6IHt9LA0KICAgICAgICAgIGZvcm1Qcm9jZXNzUGFyYW06IHsNCiAgICAgICAgICAgIGZvcm1LZXk6ICdDb21tYW5kVGFzaycsDQogICAgICAgICAgICB0YXNrSWQ6IHRoaXMudGFza0lkLA0KICAgICAgICAgICAgbW9kZWxLZXk6ICdDb21tYW5kVGFzaycsDQogICAgICAgICAgICB2YXJpYWJsZToge30NCiAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICB9IGVsc2Ugew0KICAgICAgICBwYXJtYXMgPSB7DQogICAgICAgICAgZW50aXR5TmFtZTogJ0Rpc3BhdGNoaW5nQ29tbWFuZCcsDQogICAgICAgICAgZW50aXR5T2JqZWN0OiB7fSwNCiAgICAgICAgICBmb3JtUHJvY2Vzc1BhcmFtOiB7DQogICAgICAgICAgICBmb3JtS2V5OiAnQ29tbWFuZFRhc2snLA0KICAgICAgICAgICAgcHJvY2Vzc0luc3RhbmNlSWQ6IHRoaXMudGFza0lkLA0KICAgICAgICAgICAgdGFza0lkOiB0aGlzLnRhc2tJZCwNCiAgICAgICAgICAgIG1vZGVsS2V5OiAnQ29tbWFuZFRhc2snLA0KICAgICAgICAgICAgdmFyaWFibGU6IHt9DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgfQ0KICAgICAgaWYgKHZhbCA9PSAn5bey5o6l5Y2VJykgew0KICAgICAgICB0aGlzLmZvcm0ucmVjZWl2ZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgIH0NCiAgICAgIHRoaXMuZm9ybS5zZW5kTmFtZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnVzZXJOYW1lOw0KICAgICAgdGhpcy5mb3JtLmNvbW1hbmRTdGF0dXMgPSB2YWw7DQogICAgICBpZiAodmFsID09ICflt7LpgIDljZUnKSB7DQogICAgICAgIHRoaXMuZm9ybS5pZmJhY2sgPSAn5ZCmJzsNCiAgICAgIH0NCiAgICAgIGlmICh2YWwgPT0gJ+W3suWujOaIkCcpIHsNCiAgICAgICAgdGhpcy5mb3JtLmlmYmFjayA9ICfmmK8nOw0KICAgICAgICAvLyB0aGlzLmZpbmlzaFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgIH0NCiAgICAgIHBhcm1hcy5lbnRpdHlPYmplY3QgPSB0aGlzLmZvcm07DQogICAgICBwYXJtYXMuZm9ybVByb2Nlc3NQYXJhbS52YXJpYWJsZSA9IHRoaXMuZm9ybTsNCg0KICAgICAgYXBpcy5nZXRDb21taXQoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJtYXMpKSkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLm1lc3NhZ2UgPT0gJ+aIkOWKnycpIHsNCiAgICAgICAgICBUb2FzdC5zdWNjZXNzKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip/vvIEnLA0KICAgICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgdGhpcy4kZW1pdCgncmVmcmVzaExpc3QnKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBUb2FzdC5lcnJvcign5pON5L2c5aSx6LSl77yBJyk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/mmoLlrZjmlrDlop4NCiAgICBoYW5kbGVUZW1wU2F2ZSh2YWwpIHsNCiAgICAgIGxldCBwYXJhbXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybSkpDQogICAgICBpZiAodmFsID09ICflt7Llj5Hlh7onKSB7DQogICAgICAgIHBhcmFtcy5zZW5kVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgICAgfQ0KICAgICAgcGFyYW1zLmNvbW1hbmRTdGF0dXMgPSB2YWwNCiAgICAgIHBhcmFtcy5pZCA9ICcnOw0KICAgICAgaWYgKHRoaXMuZm9ybS5maWxlQXR0YWNobWVudCkgew0KICAgICAgICBwYXJhbXMuZmlsZUF0dGFjaG1lbnQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmZvcm0uZmlsZUF0dGFjaG1lbnQpOw0KICAgICAgfQ0KICAgICAgYXBpcy5BZGREaXNwYXRjaGluZ0NvbW1hbmQocGFyYW1zKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMubWVzc2FnZSA9PSAn5oiQ5YqfJykgew0KICAgICAgICAgIFRvYXN0LnN1Y2Nlc3Moew0KICAgICAgICAgICAgbWVzc2FnZTogJ+aTjeS9nOaIkOWKn++8gScsDQogICAgICAgICAgICBkdXJhdGlvbjogMjAwMA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkNCiAgICAgICAgICB0aGlzLiRlbWl0KCdyZWZyZXNoTGlzdCcpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIFRvYXN0LmVycm9yKCfmk43kvZzlpLHotKXvvIEnKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBhc3luYyBpbml0UHJvY2VzcyhpZCkgew0KICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGFwaXMuZ2V0VXNlclRhc2tzKCk7DQogICAgICBsZXQgbGlzdCA9IHJlc3VsdC5kYXRhLmxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5mb3JtQml6SWQgPT0gaWQpOw0KICAgICAgaWYgKGxpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLnRhc2tJZCA9IGxpc3RbMF0udGFza0lkOw0KICAgICAgICB0aGlzLnByb2Nlc3NJbnN0YW5jZUlkID0gbGlzdFswXS5wcm9jZXNzSW5zdGFuY2VJZDsNCiAgICAgIH0NCiAgICAgIC8v5pyJdGFza0lkLOiOt+WPlua1geeoi+Wbvg0KICAgICAgLy8gaWYgKHRoaXMudGFza0lkKSB7DQogICAgICAvLyAgIC8vIOiLpeaciXRhc2tJZOWImeiOt+WPluW9k+WJjeS7u+WKoeiKgueCueWQjeensA0KICAgICAgLy8gICBhcGlzLmdldFVzZXJUYXNrRGV0YWlsKHRoaXMudGFza0lkKS50aGVuKHJlcyA9PiB7DQogICAgICAvLyAgICAgaWYgKHJlcy5zdGF0dXMgJiYgcmVzLmRhdGEudGFza05hbWUpIHsNCiAgICAgIC8vICAgICAgIHRoaXMudGFza05vZGVOYW1lID0gJ+KAlCcgKyByZXMuZGF0YS50YXNrTmFtZTsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgIH0pOw0KICAgICAgLy8gfQ0KICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ2FkZCcpIHsNCiAgICAgICAgYXBpcy5nZXRQcm9jZXNzSGlzdG9yeSh7IHRhc2tJZDogdGhpcy50YXNrSWQgfSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuc3RhdHVzICYmIHJlcy5kYXRhKSB7DQogICAgICAgICAgICB0aGlzLmZsb3dMaXN0ID0gcmVzLmRhdGE7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuZmxvd0xpc3QgPSBbXQ0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgLy8gICBhcGlzLmdldE1vZGVsWE1MKHsgcHJvY2Vzc0luc3RhbmNlSWQ6IHRoaXMucHJvY2Vzc0luc3RhbmNlSWQgfSkudGhlbihyZXMgPT4gew0KICAgIC8vICAgICB0aGlzLmZsb3dJbmZvLnhtbCA9IHJlcy5kYXRhLmJwbW5YbWw7DQogICAgLy8gICAgIGlmIChyZXMuZGF0YS5jdXN0b21Qcm9jZXNzSnNvbikgew0KICAgIC8vICAgICAgIHRoaXMuY3VzdG9tWE1MID0gZmFsc2U7DQogICAgLy8gICAgIH0gZWxzZSB7DQogICAgLy8gICAgICAgdGhpcy5jdXN0b21YTUwgPSB0cnVlOw0KICAgIC8vICAgICB9DQogICAgLy8gICAgIGFwaXMuZ2V0SGlzdG9yeU5vZGVzKHsgcHJvY2Vzc0luc3RhbmNlSWQ6IHRoaXMucHJvY2Vzc0luc3RhbmNlSWQgfSkudGhlbihyZXNwID0+IHsNCiAgICAvLyAgICAgICB0aGlzLmZsb3dJbmZvID0gT2JqZWN0LmFzc2lnbih0aGlzLmZsb3dJbmZvLCByZXNwLmRhdGEpOw0KICAgIC8vICAgICB9KTsNCiAgICAvLyAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlKCkgew0KICAgICAgdGhpcy4kcmVmc1snYXBwcm92ZUZvcm0nXSAmJiB0aGlzLiRyZWZzWydhcHByb3ZlRm9ybSddWzBdLnZhbGlkYXRlKCdhcHByb3ZhbE9waW5pb24nKS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5mb3JtLmFwcHJvdmFsT3BpbmlvbiA9IHRoaXMuYXBwcm92ZUZvcm0uYXBwcm92YWxPcGluaW9uDQogICAgICAgIHRoaXMuaGFuZGxlQWRkKCflt7LlrozmiJAnKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHJlamVjdCgpIHsNCiAgICAgIHRoaXMuJHJlZnNbJ2FwcHJvdmVGb3JtJ10gJiYgdGhpcy4kcmVmc1snYXBwcm92ZUZvcm0nXVswXS52YWxpZGF0ZSgnYXBwcm92YWxPcGluaW9uJykudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuZm9ybS5hcHByb3ZhbE9waW5pb24gPSB0aGlzLmFwcHJvdmVGb3JtLmFwcHJvdmFsT3Bpbmlvbg0KICAgICAgICB0aGlzLmhhbmRsZUFkZCgn5bey6YCA5Y2VJykNCiAgICAgIH0pDQogICAgfSwNCiAgICB0ZW1wU2F2ZSgpIHsNCiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXVswXS52YWxpZGF0ZShbJ3JlY2VpdmVOYW1lJywgJ2NvbW1hbmROYW1lJywgJ2RldGFpbGVkQ29udGVudCcsICdyZWNlaXZlRGVwYXJ0bWVudCddKS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5oYW5kbGVUZW1wU2F2ZSgn5pqC5a2YJykNCiAgICAgIH0pDQogICAgfSwNCiAgICBzdWJtaXQoKSB7DQogICAgICB0aGlzLiRyZWZzWydmb3JtJ11bMF0udmFsaWRhdGUoWydyZWNlaXZlTmFtZScsICdjb21tYW5kTmFtZScsICdkZXRhaWxlZENvbnRlbnQnLCAncmVjZWl2ZURlcGFydG1lbnQnXSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuaGFuZGxlVGVtcFNhdmUoJ+W3suWPkeWHuicpDQogICAgICB9KQ0KICAgIH0sDQogICAgb3BlblBvcHVwKHR5cGUpIHsNCiAgICAgIGlmICh0aGlzLm1vZGUgIT0gJ2FkZCcpIHsNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzW3R5cGVdID0gdHJ1ZQ0KICAgIH0sDQogICAgZmlsZUNoYW5nZShmaWxlKSB7DQogICAgICBsZXQgZmlsZUxpc3QgPSBbXQ0KICAgICAgZmlsZS5maWxlTGlzdC5mb3JFYWNoKChpdCkgPT4gew0KICAgICAgICBmaWxlTGlzdC5wdXNoKHsNCiAgICAgICAgICBncm91cFRva2VuOiBpdC5yZXNwb25zZS5ncm91cFRva2VuLA0KICAgICAgICAgIGZpbGVUb2tlbjogaXQucmVzcG9uc2UuZmlsZVRva2VuLA0KICAgICAgICAgIGV4dE5hbWU6IGl0LnJlc3BvbnNlLmV4dE5hbWUsDQogICAgICAgICAgc2l6ZTogaXQucmVzcG9uc2Uuc2l6ZSwNCiAgICAgICAgICB1cmw6IGl0LnVybCwNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICB0aGlzLmZvcm0uZmlsZUF0dGFjaG1lbnQgPSBmaWxlTGlzdA0KICAgIH0sDQogICAgb25GaW5pc2goeyBzZWxlY3RlZE9wdGlvbnMgfSwgdHlwZSkgew0KICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uc1swXS5kZXBhcnRUeXBlID09ICfmjqXljZXpg6jpl6gnKSB7DQogICAgICAgIHRoaXMuZm9ybS5yZWNlaXZlTmFtZSA9IHNlbGVjdGVkT3B0aW9uc1swXS51c2VyTmFtZQ0KICAgICAgICB0aGlzLnJlY2VpdmVGdWxsTmFtZSA9IHNlbGVjdGVkT3B0aW9uc1swXS51c2VyRnVsbE5hbWUNCiAgICAgICAgdGhpcy5mb3JtLnJlY2VpdmVDb250YWN0ID0gc2VsZWN0ZWRPcHRpb25zWzBdLmNvbnRhY3QNCiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRPcHRpb25zWzBdLmRlcGFydFR5cGUgPT0gJ+WPkemAgemDqOmXqCcpIHsNCiAgICAgICAgdGhpcy5mb3JtLnNlbmROYW1lID0gc2VsZWN0ZWRPcHRpb25zWzBdLnVzZXJOYW1lDQogICAgICAgIHRoaXMuc2VuZEZ1bGxOYW1lID0gc2VsZWN0ZWRPcHRpb25zWzBdLnVzZXJGdWxsTmFtZQ0KICAgICAgICB0aGlzLmZvcm0uc2VuZENvbnRhY3QgPSBzZWxlY3RlZE9wdGlvbnNbMF0uY29udGFjdA0KICAgICAgfQ0KICAgICAgdGhpc1t0eXBlXSA9IGZhbHNlDQogICAgfSwNCiAgICBjb25maXJtVGltZSh2YWwpIHsNCiAgICAgIHRoaXMuZm9ybS5zZW5kVGltZSA9IHRoaXMuJGRheWpzKHZhbCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykNCiAgICAgIHRoaXMuc2VuZFRpbWVTaG93ID0gZmFsc2UNCiAgICB9DQogIH0sDQp9DQo="},{"version":3,"sources":["addDispatchOrder.vue"],"names":[],"mappings":";AAkQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addDispatchOrder.vue","sourceRoot":"src/views/DispatchCenter/components/DispatchOrder","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <fm-nav-bar title=\"调度指令\" left-arrow @click-left=\"$router.go(-1)\"></fm-nav-bar>\r\n    <fm-tabs v-model=\"activeTab\">\r\n      <fm-tab v-for=\"(item, idx) in tabList\" :key=\"idx\" :label=\"item\">\r\n        <div\r\n          class=\"container\"\r\n          v-if=\"activeTab == 0\"\r\n          :style=\"{ 'height': $route.query.mode != 'add' ? 'calc(100% - 90px)' : '' }\"\r\n        >\r\n          <fm-form @submit=\"submit\" ref=\"form\" style=\"display: flex; flex-direction: column;\">\r\n            <div class=\"eventInfo\">\r\n              <div class=\"title\">\r\n                <img\r\n                  :src=\"require('@/assets/img/dispatchCenter/矩形.png')\"\r\n                  height=\"30\"\r\n                  style=\"margin: auto 0;\"\r\n                />\r\n                <div class=\"name\">事件信息</div>\r\n              </div>\r\n              <fm-field\r\n                label=\"发送站点\"\r\n                v-model=\"form.sendDepartment\"\r\n                is-link\r\n                readonly\r\n                :disabled=\"mode != 'add'\"\r\n                :placeholder=\"mode != 'add' ? '' : '请选择发送站点'\"\r\n                input-align=\"right\"\r\n                @click=\"openPopup('sendStationShow')\"\r\n              />\r\n              <fm-popup :visible.sync=\"sendStationShow\" round position=\"bottom\">\r\n                <fm-cascader\r\n                  title=\"请选择\"\r\n                  v-model=\"form.sendDepartment\"\r\n                  :disabled=\"mode != 'add'\"\r\n                  :options=\"sendDepartmentList\"\r\n                  @close=\"sendStationShow = false\"\r\n                  @finish=\"arg => onFinish(arg, 'sendStationShow')\"\r\n                />\r\n              </fm-popup>\r\n              <fm-field\r\n                label=\"接收站点\"\r\n                :disabled=\"mode != 'add'\"\r\n                v-model=\"form.receiveDepartment\"\r\n                is-link\r\n                readonly\r\n                name=\"receiveDepartment\"\r\n                :placeholder=\"mode != 'add' ? '' : '请选择接收站点'\"\r\n                input-align=\"right\"\r\n                @click=\"openPopup('getStationShow')\"\r\n                :rules=\"[{ required: true, message: '请选择接收站点' }]\"\r\n              />\r\n              <fm-popup :visible.sync=\"getStationShow\" round position=\"bottom\">\r\n                <fm-cascader\r\n                  title=\"请选择\"\r\n                  :disabled=\"mode != 'add'\"\r\n                  v-model=\"form.receiveDepartment\"\r\n                  :options=\"receiveDepartmentList\"\r\n                  @close=\"getStationShow = false\"\r\n                  @finish=\"arg => onFinish(arg, 'getStationShow')\"\r\n                />\r\n              </fm-popup>\r\n              <!-- <select-user\r\n                title=\"接单人\"\r\n                :userFullname.sync=\"receiveFullName\"\r\n                :disabled=\"mode != 'add'\"\r\n                :userName.sync=\"receiveName\"\r\n                :multiple=\"false\"\r\n                required\r\n                name=\"receiveName\"\r\n                :placeholder=\"mode != 'add' ? '' : '请选择接单人'\"\r\n                @change=\"selectReceive\"\r\n              /> -->\r\n              <fm-field\r\n                label=\"接单人\"\r\n                :disabled=\"mode != 'add'\"\r\n                :placeholder=\"mode != 'add' ? '' : '请选择接单人'\"\r\n                v-model=\"receiveFullName\"\r\n                :rules=\"[{ required: true, message: '请选择接单人' }]\"\r\n                name=\"receiveName\"\r\n                input-align=\"right\"\r\n              />\r\n              <fm-field label=\"接单人联系方式\" v-show=\"mode != 'add'\" :disabled=\"mode != 'add'\" v-model=\"form.receiveContact\" input-align=\"right\" />\r\n              <fm-popup :visible.sync=\"getPersonShow\" round position=\"bottom\">\r\n                <fm-cascader\r\n                  title=\"请选择\"\r\n                  v-model=\"form.receiveName\"\r\n                  :options=\"stationOptions\"\r\n                  @close=\"getPersonShow = false\"\r\n                  @finish=\"arg => onFinish(arg, 'getPersonShow')\"\r\n                />\r\n              </fm-popup>\r\n              <!-- <select-user\r\n                title=\"发单人\"\r\n                v-show=\"mode == 'view' || mode == 'deal'\"\r\n                disabled\r\n                :userFullname.sync=\"sendFullName\"\r\n                :userName.sync=\"sendName\"\r\n                :multiple=\"false\"\r\n                :placeholder=\"(mode == 'view' || mode == 'deal') ? '' : '请选择接收站点'\"\r\n                @change=\"selectSend\"\r\n              /> -->\r\n              <fm-field\r\n                label=\"发单人\"\r\n                :disabled=\"mode != 'add'\"\r\n                v-show=\"mode == 'view' || mode == 'deal'\"\r\n                :placeholder=\"(mode == 'view' || mode == 'deal') ? '' : '请选择接收站点'\"\r\n                v-model=\"sendFullName\"\r\n                input-align=\"right\"\r\n              />\r\n              <fm-popup :visible.sync=\"sendPersonShow\" round position=\"bottom\">\r\n                <fm-cascader\r\n                  title=\"请选择\"\r\n                  v-model=\"form.sendName\"\r\n                  :options=\"stationOptions\"\r\n                  @close=\"sendPersonShow = false\"\r\n                  @finish=\"arg => onFinish(arg, 'sendPersonShow')\"\r\n                />\r\n              </fm-popup>\r\n              <fm-field label=\"发单人联系方式\" v-show=\"mode == 'view' || mode == 'deal'\" :disabled=\"mode != 'add'\" v-model=\"form.sendContact\" input-align=\"right\" />\r\n              <fm-field\r\n                label=\"发送时间\"\r\n                v-show=\"mode == 'view' || mode == 'deal'\"\r\n                v-model=\"form.sendTime\"\r\n                :disabled=\"mode != 'add'\"\r\n                is-link\r\n                readonly\r\n                :placeholder=\"mode != 'add' ? '' : '请选择发送时间'\"\r\n                input-align=\"right\"\r\n                @click=\"openPopup('sendTimeShow')\"\r\n              />\r\n              <fm-popup :visible.sync=\"sendTimeShow\" round position=\"bottom\">\r\n                <fm-datetime-picker v-model=\"sendTime\" :disabled=\"mode != 'add'\" type=\"datetime\" @confirm=\"confirmTime\" />\r\n              </fm-popup>\r\n              <fm-field\r\n                label=\"抄送部门\"\r\n                :disabled=\"mode != 'add'\"\r\n                v-model=\"form.ccDepartment\"\r\n                is-link\r\n                readonly\r\n                :placeholder=\"mode != 'add' ? '' : '请选择抄送部门'\"\r\n                input-align=\"right\"\r\n                @click=\"openPopup('ccStationShow')\"\r\n              />\r\n              <fm-popup :visible.sync=\"ccStationShow\" round position=\"bottom\">\r\n                <fm-cascader\r\n                  title=\"请选择\"\r\n                  :disabled=\"mode != 'add'\"\r\n                  v-model=\"form.ccDepartment\"\r\n                  :options=\"ccDepartmentList\"\r\n                  @close=\"ccStationShow = false\"\r\n                  @finish=\"arg => onFinish(arg, 'ccStationShow')\"\r\n                />\r\n              </fm-popup>\r\n            </div>\r\n            <div class=\"dispatchInfo\">\r\n              <div class=\"title\">\r\n                <img\r\n                  :src=\"require('@/assets/img/dispatchCenter/矩形.png')\"\r\n                  height=\"30\"\r\n                  style=\"margin: auto 0;\"\r\n                />\r\n                <div class=\"name\">调度信息</div>\r\n              </div>\r\n              <fm-field\r\n                label=\"调令名称\"\r\n                :disabled=\"mode != 'add'\"\r\n                :placeholder=\"mode != 'add' ? '' : '请输入调令名称'\"\r\n                v-model=\"form.commandName\"\r\n                :rules=\"[{ required: true, message: '请输入调令名称' }]\"\r\n                name=\"commandName\"\r\n                input-align=\"right\"\r\n              />\r\n              <fm-field\r\n                v-model=\"form.detailedContent\"\r\n                label=\"调令内容\"\r\n                :disabled=\"mode != 'add'\"\r\n                :placeholder=\"mode != 'add' ? '' : '请输入调令内容'\"\r\n                :rules=\"[{ required: true, message: '请输入调令内容' }]\"\r\n                name=\"detailedContent\"\r\n                type=\"textarea\"\r\n                autosize\r\n                maxlength=\"300\"\r\n                input-align=\"right\"\r\n                show-word-limit\r\n              />\r\n              <uploader\r\n                label=\"附件\"\r\n                v-model=\"attachment\"\r\n                @fileChange=\"fileChange\"\r\n                :disabled=\"mode != 'add'\"\r\n                type=\"*\"\r\n                multiple\r\n              />\r\n              <fm-field name=\"stepper\" label=\"接单时限(min)\" input-align=\"right\">\r\n                <template #input>\r\n                  <fm-stepper\r\n                    v-model=\"form.receiveLimit\"\r\n                    :disabled=\"mode != 'add'\"\r\n                    integer\r\n                    min=\"1\"\r\n                  />\r\n                </template>\r\n              </fm-field>\r\n              <fm-field name=\"stepper\" label=\"反馈时限(min)\" input-align=\"right\">\r\n                <template #input>\r\n                  <fm-stepper\r\n                    v-model=\"form.feedbackLimit\"\r\n                    :disabled=\"mode != 'add'\"\r\n                    integer\r\n                    min=\"1\"\r\n                  />\r\n                </template>\r\n              </fm-field>\r\n            </div>\r\n          </fm-form>\r\n        </div>\r\n        <div class=\"btnContainer\" v-if=\"activeTab == 0 && mode == 'add'\">\r\n          <div class=\"btnArea\">\r\n            <fm-button round class=\"dispatchBtn\" @click=\"tempSave\">暂存</fm-button>\r\n            <fm-button round class=\"dispatchBtn\" type=\"primary\" @click=\"submit\">发起</fm-button>\r\n          </div>\r\n        </div>\r\n        <div class=\"flowContainer\" v-if=\"activeTab == 1\">\r\n          <fm-empty v-if=\"flowList.length == 0\" />\r\n          <fm-flow-comments v-else :flowList=\"flowList\"></fm-flow-comments>\r\n        </div>\r\n        <div class=\"container\" v-if=\"activeTab == 2\" :style=\"{ 'height': $route.query.mode != 'deal' ? 'calc(100% - 90px)' : '' }\">\r\n          <fm-form ref=\"approveForm\">\r\n            <div class=\"eventInfo\">\r\n              <fm-field\r\n                v-model=\"approveForm.approvalOpinion\"\r\n                label=\"审批意见\"\r\n                :placeholder=\"mode == 'view' ? '' : '请输入审批意见'\"\r\n                :disabled=\"mode == 'view'\"\r\n                :rules=\"[{ required: true, message: '请输入审批意见' }]\"\r\n                type=\"textarea\"\r\n                name=\"approvalOpinion\"\r\n                autosize\r\n                maxlength=\"500\"\r\n                input-align=\"right\"\r\n                show-word-limit\r\n              />\r\n            </div>\r\n          </fm-form>\r\n        </div>\r\n        <div class=\"btnContainer\" v-if=\"activeTab == 2 && mode == 'deal'\">\r\n          <div class=\"btnArea\">\r\n            <fm-button round class=\"dispatchBtn\" @click=\"reject\">回退</fm-button>\r\n            <fm-button round class=\"dispatchBtn\" type=\"primary\" @click=\"handle\">提交</fm-button>\r\n          </div>\r\n        </div>\r\n      </fm-tab>\r\n    </fm-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  NavBar,\r\n  Search,\r\n  Toast,\r\n  Cell,\r\n  CellGroup,\r\n  PullRefresh,\r\n  List,\r\n  Sidebar,\r\n  SidebarItem,\r\n  SwipeCell,\r\n  Button,\r\n  NoticeBar,\r\n  Icon,\r\n  Dialog,\r\n} from 'fawkes-mobile-lib'\r\nimport Uploader from '@/components/upload/Uploader.vue'\r\nimport selectUser from '@/components/select-user'\r\nimport * as apis from '../../api'\r\nexport default {\r\n  name: 'addDispatchOrder',\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n    [Search.name]: Search,\r\n    [Toast.name]: Toast,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [PullRefresh.name]: PullRefresh,\r\n    [List.name]: List,\r\n    [Sidebar.name]: Sidebar,\r\n    [SidebarItem.name]: SidebarItem,\r\n    [SwipeCell.name]: SwipeCell,\r\n    [Button.name]: Button,\r\n    [NoticeBar.name]: NoticeBar,\r\n    [Icon.name]: Icon,\r\n    [Dialog.name]: Dialog,\r\n    Uploader,\r\n    selectUser\r\n  },\r\n  data() {\r\n    return {\r\n      taskId: '',\r\n      processInstanceId: '',\r\n      taskNodeName: '',\r\n      activeTab: 0,\r\n      content: '',\r\n      attachment: '',\r\n      sendStationShow: false,\r\n      getStationShow: false,\r\n      getPersonShow: false,\r\n      sendPersonShow: false,\r\n      sendTimeShow: false,\r\n      dispatchObjShow: false,\r\n      dispatchOrderShow: false,\r\n      ccStationShow: false,\r\n      sendTime: new Date(),\r\n      stationOptions: [\r\n        {\r\n          text: '调度中心',\r\n          value: '调度中心',\r\n        },\r\n        {\r\n          text: '1#供水厂',\r\n          value: '1#供水厂',\r\n        },\r\n        {\r\n          text: 'XXX供水厂',\r\n          value: 'XXX供水厂',\r\n        },\r\n        {\r\n          text: '1#泵站',\r\n          value: '1#泵站',\r\n        },\r\n        {\r\n          text: '2#泵站',\r\n          value: '2#泵站',\r\n        },\r\n      ],\r\n      sendDepartmentList: [],\r\n      receiveDepartmentList: [],\r\n      ccDepartmentList: [],\r\n      form: {},\r\n      approveForm: {},\r\n      receiveFullName: '',\r\n      sendFullName: '',\r\n      flowList: [],\r\n    }\r\n  },\r\n  computed: {\r\n    mode() {\r\n      return this.$route.query.mode\r\n    },\r\n    tabList() {\r\n      let res = ''\r\n      switch (this.mode) {\r\n        case 'add':\r\n          res = ['详情']\r\n          break\r\n        case 'deal':\r\n        case 'view':\r\n          res = ['详情', '流转', '审批']\r\n          break\r\n        // case 'add':\r\n        //     res = ['详情', '流转', '审批']\r\n        //     break\r\n        default:\r\n          res = ['详情']\r\n      }\r\n      return res\r\n    },\r\n  },\r\n  created() {\r\n    if (this.$route.query.mode == 'add') {\r\n      this.getDepartment()\r\n    } else if (this.$route.query.mode == 'view') {\r\n      this.form = JSON.parse(this.$route.query.data)\r\n      this.receiveFullName = this.form.receiveFullName || ''\r\n      this.sendFullName = this.form.sendFullName || ''\r\n      this.attachment = JSON.parse(this.form.fileAttachment)[0].groupToken\r\n      if (this.form.commandStatus == '已接单' || this.form.commandStatus == '待处理' || this.form.commandStatus == '已完成') {\r\n        this.approveForm.approvalOpinion = this.form.approvalOpinion\r\n        this.initProcess(this.form.id)\r\n      }\r\n    } else if (this.$route.query.mode == 'deal') {\r\n      this.form = JSON.parse(this.$route.query.data)\r\n      this.receiveFullName = this.form.receiveFullName || ''\r\n      this.sendFullName = this.form.sendFullName || ''\r\n      this.attachment = JSON.parse(this.form.fileAttachment)[0].groupToken\r\n      if (this.form.commandStatus == '已接单' || this.form.commandStatus == '待处理') {\r\n        this.initProcess(this.form.id)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getDepartment() {\r\n      this.sendDepartmentList = []\r\n      this.receiveDepartmentList = []\r\n      this.ccDepartmentList = []\r\n      apis.getDepartment().then(res => {\r\n        if (res.status) {\r\n          res.data.records.filter(it => it.departType == '发送部门').forEach(item => {\r\n            this.sendDepartmentList.push({\r\n              value: item.departName,\r\n              text: item.departName,\r\n              ...item\r\n            })\r\n          })\r\n          res.data.records.filter(it => it.departType == '接单部门').forEach(item => {\r\n            this.receiveDepartmentList.push({\r\n              value: item.departName,\r\n              text: item.departName,\r\n              ...item\r\n            })\r\n          })\r\n          res.data.records.filter(it => it.departType == '抄送部门').forEach(item => {\r\n            this.ccDepartmentList.push({\r\n              value: item.departName,\r\n              text: item.departName,\r\n              ...item\r\n            })\r\n          })\r\n        }\r\n        console.log(this.sendDepartmentList)\r\n      })\r\n    },\r\n    handleAdd(val) {\r\n      let parmas = {};\r\n      if (val == '已完成') {\r\n        parmas = {\r\n          entityName: 'DispatchingCommand',\r\n          entityObject: {},\r\n          formProcessParam: {\r\n            formKey: 'CommandTask',\r\n            taskId: this.taskId,\r\n            modelKey: 'CommandTask',\r\n            variable: {}\r\n          }\r\n        };\r\n      } else {\r\n        parmas = {\r\n          entityName: 'DispatchingCommand',\r\n          entityObject: {},\r\n          formProcessParam: {\r\n            formKey: 'CommandTask',\r\n            processInstanceId: this.taskId,\r\n            taskId: this.taskId,\r\n            modelKey: 'CommandTask',\r\n            variable: {}\r\n          }\r\n        };\r\n      }\r\n      if (val == '已接单') {\r\n        this.form.receiveTime = new Date().getTime();\r\n      }\r\n      this.form.sendName = this.$store.state.userInfo.userName;\r\n      this.form.commandStatus = val;\r\n      if (val == '已退单') {\r\n        this.form.ifback = '否';\r\n      }\r\n      if (val == '已完成') {\r\n        this.form.ifback = '是';\r\n        // this.finishTime = new Date().getTime();\r\n      }\r\n      parmas.entityObject = this.form;\r\n      parmas.formProcessParam.variable = this.form;\r\n\r\n      apis.getCommit(JSON.parse(JSON.stringify(parmas))).then(res => {\r\n        if (res.message == '成功') {\r\n          Toast.success({\r\n            message: '操作成功！',\r\n            duration: 2000\r\n          });\r\n          this.$router.go(-1)\r\n          this.$emit('refreshList');\r\n        } else {\r\n          Toast.error('操作失败！');\r\n        }\r\n      });\r\n    },\r\n    //暂存新增\r\n    handleTempSave(val) {\r\n      let params = JSON.parse(JSON.stringify(this.form))\r\n      if (val == '已发出') {\r\n        params.sendTime = new Date().getTime();\r\n      }\r\n      params.commandStatus = val\r\n      params.id = '';\r\n      if (this.form.fileAttachment) {\r\n        params.fileAttachment = JSON.stringify(this.form.fileAttachment);\r\n      }\r\n      apis.AddDispatchingCommand(params).then(res => {\r\n        if (res.message == '成功') {\r\n          Toast.success({\r\n            message: '操作成功！',\r\n            duration: 2000\r\n          });\r\n          this.$router.go(-1)\r\n          this.$emit('refreshList');\r\n        } else {\r\n          Toast.error('操作失败！');\r\n        }\r\n      });\r\n    },\r\n    async initProcess(id) {\r\n      let result = await apis.getUserTasks();\r\n      let list = result.data.list.filter(item => item.formBizId == id);\r\n      if (list.length > 0) {\r\n        this.taskId = list[0].taskId;\r\n        this.processInstanceId = list[0].processInstanceId;\r\n      }\r\n      //有taskId,获取流程图\r\n      // if (this.taskId) {\r\n      //   // 若有taskId则获取当前任务节点名称\r\n      //   apis.getUserTaskDetail(this.taskId).then(res => {\r\n      //     if (res.status && res.data.taskName) {\r\n      //       this.taskNodeName = '—' + res.data.taskName;\r\n      //     }\r\n      //   });\r\n      // }\r\n      if (this.mode !== 'add') {\r\n        apis.getProcessHistory({ taskId: this.taskId }).then(res => {\r\n          if (res.status && res.data) {\r\n            this.flowList = res.data;\r\n          } else {\r\n            this.flowList = []\r\n          }\r\n        });\r\n      }\r\n    //   apis.getModelXML({ processInstanceId: this.processInstanceId }).then(res => {\r\n    //     this.flowInfo.xml = res.data.bpmnXml;\r\n    //     if (res.data.customProcessJson) {\r\n    //       this.customXML = false;\r\n    //     } else {\r\n    //       this.customXML = true;\r\n    //     }\r\n    //     apis.getHistoryNodes({ processInstanceId: this.processInstanceId }).then(resp => {\r\n    //       this.flowInfo = Object.assign(this.flowInfo, resp.data);\r\n    //     });\r\n    //   });\r\n    },\r\n    handle() {\r\n      this.$refs['approveForm'] && this.$refs['approveForm'][0].validate('approvalOpinion').then(() => {\r\n        this.form.approvalOpinion = this.approveForm.approvalOpinion\r\n        this.handleAdd('已完成')\r\n      })\r\n    },\r\n    reject() {\r\n      this.$refs['approveForm'] && this.$refs['approveForm'][0].validate('approvalOpinion').then(() => {\r\n        this.form.approvalOpinion = this.approveForm.approvalOpinion\r\n        this.handleAdd('已退单')\r\n      })\r\n    },\r\n    tempSave() {\r\n      this.$refs['form'][0].validate(['receiveName', 'commandName', 'detailedContent', 'receiveDepartment']).then(() => {\r\n        this.handleTempSave('暂存')\r\n      })\r\n    },\r\n    submit() {\r\n      this.$refs['form'][0].validate(['receiveName', 'commandName', 'detailedContent', 'receiveDepartment']).then(() => {\r\n        this.handleTempSave('已发出')\r\n      })\r\n    },\r\n    openPopup(type) {\r\n      if (this.mode != 'add') {\r\n        return\r\n      }\r\n      this[type] = true\r\n    },\r\n    fileChange(file) {\r\n      let fileList = []\r\n      file.fileList.forEach((it) => {\r\n        fileList.push({\r\n          groupToken: it.response.groupToken,\r\n          fileToken: it.response.fileToken,\r\n          extName: it.response.extName,\r\n          size: it.response.size,\r\n          url: it.url,\r\n        })\r\n      })\r\n      this.form.fileAttachment = fileList\r\n    },\r\n    onFinish({ selectedOptions }, type) {\r\n      if (selectedOptions[0].departType == '接单部门') {\r\n        this.form.receiveName = selectedOptions[0].userName\r\n        this.receiveFullName = selectedOptions[0].userFullName\r\n        this.form.receiveContact = selectedOptions[0].contact\r\n      } else if (selectedOptions[0].departType == '发送部门') {\r\n        this.form.sendName = selectedOptions[0].userName\r\n        this.sendFullName = selectedOptions[0].userFullName\r\n        this.form.sendContact = selectedOptions[0].contact\r\n      }\r\n      this[type] = false\r\n    },\r\n    confirmTime(val) {\r\n      this.form.sendTime = this.$dayjs(val).format('YYYY-MM-DD HH:mm:ss')\r\n      this.sendTimeShow = false\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n::-webkit-scrollbar {\r\n  display: none; /* Chrome Safari */\r\n}\r\n/deep/.fm-tabs {\r\n  height: 100%;\r\n}\r\n/deep/.fm-tabs__content {\r\n  height: 100%;\r\n}\r\n/deep/.fm-tab__pane,\r\n.fm-tab__pane-wrapper {\r\n  height: 100%;\r\n}\r\n.main {\r\n  width: 100%;\r\n  height: 100%;\r\n  .container {\r\n    width: 100%;\r\n    height: calc(100% - 316px);\r\n    background: #f4f6f8;\r\n    overflow: scroll;\r\n    display: flex;\r\n    flex-direction: column;\r\n    .eventInfo {\r\n      width: calc(100% - 60px);\r\n      height: auto;\r\n      margin: 30px 30px 15px;\r\n      background: #ffffff;\r\n      border-radius: 16px;\r\n      .title {\r\n        width: 100%;\r\n        height: 120px;\r\n        border-bottom: 2px solid #f5f5f5;\r\n        display: flex;\r\n        .name {\r\n          font-size: 36px;\r\n          font-family: PingFangSC-Semibold, PingFang SC;\r\n          font-weight: 600;\r\n          color: #191919;\r\n          margin: auto 20px;\r\n        }\r\n      }\r\n    }\r\n    .dispatchInfo {\r\n      width: calc(100% - 60px);\r\n      height: auto;\r\n      margin: 15px 30px 30px;\r\n      background: #ffffff;\r\n      border-radius: 16px;\r\n      .title {\r\n        width: 100%;\r\n        height: 120px;\r\n        border-bottom: 2px solid #f5f5f5;\r\n        display: flex;\r\n        .name {\r\n          font-size: 36px;\r\n          font-family: PingFangSC-Semibold, PingFang SC;\r\n          font-weight: 600;\r\n          color: #191919;\r\n          margin: auto 20px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .flowContainer {\r\n    width: 100%;\r\n    height: calc(100% - 180px);\r\n    background: #f4f6f8;\r\n    overflow: scroll;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  .btnContainer {\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 136px;\r\n    background: #ffffff;\r\n    box-shadow: 0px -2px 16px 0px rgba(104, 115, 127, 0.08);\r\n    .btnArea {\r\n      margin: 24px 30px;\r\n      width: calc(100% - 60px);\r\n      height: calc(100% - 48px);\r\n      display: flex;\r\n      justify-content: space-between;\r\n      .dispatchBtn {\r\n        width: 48%;\r\n        height: 88px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}