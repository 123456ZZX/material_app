{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\PumpStationInspection\\components\\InspectionSubmit.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\PumpStationInspection\\components\\InspectionSubmit.vue","mtime":1708928163414},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgSW5zcGVjdGlvblN1Ym1pdENhcmQgZnJvbSAnLi9JbnNwZWN0aW9uU3VibWl0Q2FyZC52dWUnDQppbXBvcnQgeyBwYXRyb2xFZGl0LCB1cGxvYWRUcmFja0xpc3QgfSBmcm9tICcuLi9hcGknDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsgSW5zcGVjdGlvblN1Ym1pdENhcmQgfSwNCiAgcHJvcHM6IHsNCiAgICAvL+W3oeajgOeKtuaAgSgxOuW+heW3oeajgO+8jDI65beh5qOA5Lit77yMMzrlt7LlrozmiJAg77yMNDrlt7Lnu4jmraIpKOaJi+acuuerrykNCiAgICBQYXRyb2xEYXRhOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0OiAoKSA9PiB7fSwNCiAgICB9LA0KICAgIG1vZGVsVHlwZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ2xpc3QnLA0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgUGF0cm9sRGF0YTogew0KICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkgew0KICAgICAgICB0aGlzLmlzRmluaXNoQ29uZmlnKCkNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiB0cnVlLA0KICAgIH0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHN1Ym1pdERhdGE6IG51bGwsDQogICAgICBmaXJzdENvbmZpZzogdHJ1ZSwgLy/mmK/lkKbkuLrnrKzkuIDmrKHov5vlhaUNCiAgICAgIGZpbmlzaENvbmZpZzogZmFsc2UsIC8v5beh5qOA54K55piv5ZCm5beh5qOA5a6M5q+VDQogICAgICBzdWJtaXRTaG93OiBmYWxzZSwgLy/mj5DkuqTlvLnmoYYNCiAgICAgIGRpc2FibGVkOiB0cnVlLA0KICAgIH0NCiAgfSwNCg0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuc2V0Rmlyc3RDb25maWcoKQ0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIHRoaXMuc3RvcFJlcXVlc3RMb2NhdGlvbnMoKQ0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAvL+WGheWuueWPmOWMlg0KICAgIC8vbGlzdOWIl+ihqO+8jG1hcOWcsOWbvg0KICAgIG1vZGVsVHlwZUNoYW5nZSh0eXBlKSB7DQogICAgICBpZiAodGhpcy5maXJzdENvbmZpZyAmJiB0aGlzLlBhdHJvbERhdGEucGF0cm9sU3RhdHVzID09PSAyKSByZXR1cm4NCiAgICAgIHRoaXMuJGVtaXQoJ21vZGVsVHlwZUNoYW5nZScsIHR5cGUpDQoNCiAgICAgIHRoaXMuc3RvcFJlcXVlc3RMb2NhdGlvbnMoKQ0KICAgICAgaWYgKHR5cGUgPT09ICdsaXN0JykgdGhpcy5yZXF1ZXN0U2luZ2xlTG9jYXRpb24oZmFsc2UpDQogICAgfSwNCg0KICAgIC8v5Yik5pat5piv5ZCm5Li656ys5LiA5qyh6L+b5YWlDQogICAgc2V0Rmlyc3RDb25maWcoKSB7DQogICAgICBsZXQgeyBmaXJzdENvbmZpZyB9ID0gdGhpcy4kc3RvcmUuc3RhdGUucHVtcC51cmxRdWVyeQ0KDQogICAgICBpZiAoZmlyc3RDb25maWcgPT09IGZhbHNlKSB7DQogICAgICAgIHRoaXMuZmlyc3RDb25maWcgPSBmYWxzZQ0KICAgICAgICB0aGlzLiRlbWl0KCdpc0Rpc2FibGVkJywgZmFsc2UpDQogICAgICAgIGNvbnNvbGUubG9nKCdpc0Rpc2FibGVkJywgZmFsc2UpDQoNCiAgICAgICAgdGhpcy5yZXF1ZXN0U2luZ2xlTG9jYXRpb24odGhpcy5maXJzdENvbmZpZykNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZmlyc3RDb25maWcgPSB0cnVlDQogICAgICB9DQogICAgfSwNCg0KICAgIC8v5beh5qOA54K55piv5ZCm5beh5qOA5a6M5q+VDQogICAgaXNGaW5pc2hDb25maWcoKSB7DQogICAgICBsZXQgY29uZmlnID0gdGhpcy5QYXRyb2xEYXRhPy5wYXRyb2xQb2ludFJlc3VsdExpc3Q/LmV2ZXJ5KChpdGVtKSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLnBhdHJvbFN0YXR1cyA9PT0gJ+W3suW3oScNCiAgICAgIH0pDQogICAgICB0aGlzLmZpbmlzaENvbmZpZyA9IGNvbmZpZw0KICAgIH0sDQoNCiAgICAvL+e7p+e7reW3oeajgA0KICAgIGdvSW5zcGVjdGlvbigpIHsNCiAgICAgIHRoaXMuZmlyc3RDb25maWcgPSBmYWxzZQ0KICAgICAgdGhpcy4kZW1pdCgnaXNEaXNhYmxlZCcsIGZhbHNlKQ0KDQogICAgICB0aGlzLnJlcXVlc3RTaW5nbGVMb2NhdGlvbih0cnVlKQ0KICAgIH0sDQoNCiAgICAvL+W8gOWni+W3oeajgA0KICAgIGFzeW5jIHN0YXJ0SW5zcGVjdGlvbih0eXBlKSB7DQogICAgICBsZXQgcXVlcnkgPSB7DQogICAgICAgIGlkOiB0aGlzLiRzdG9yZS5zdGF0ZS5wdW1wLnVybFF1ZXJ5LnRhc2tJZCwNCiAgICAgICAgcGF0cm9sU3RhdHVzOiB0eXBlID8gdHlwZSA6IHRoaXMuUGF0cm9sRGF0YSAmJiB0aGlzLlBhdHJvbERhdGEucGF0cm9sU3RhdHVzLA0KICAgICAgICBwYXRyb2xTdGFydFRpbWU6IHRoaXMuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyksDQogICAgICAgIHBhdHJvbFBvaW50UmVzdWx0TGlzdDogdGhpcy5QYXRyb2xEYXRhICYmIHRoaXMuUGF0cm9sRGF0YS5wYXRyb2xQb2ludFJlc3VsdExpc3QsDQogICAgICB9DQoNCiAgICAgIHRoaXMuJGVtaXQoJ2lzRGlzYWJsZWQnLCBmYWxzZSkNCg0KICAgICAgdGhpcy5yZXF1ZXN0U2luZ2xlTG9jYXRpb24odHJ1ZSkNCg0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgcGF0cm9sRWRpdChxdWVyeSkNCiAgICAgIHRoaXMuJHBhcmVudC5nZXRQYXRyb2woKQ0KICAgICAgdGhpcy5maXJzdENvbmZpZyA9IGZhbHNlDQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICcvcHVtcC9pbnNwZWN0aW9uJywNCiAgICAgICAgcXVlcnk6IHsNCiAgICAgICAgICB0YXNrSWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnB1bXAudXJsUXVlcnkudGFza0lkLA0KICAgICAgICAgIGZpcnN0Q29uZmlnOiAnZmFsc2UnLA0KICAgICAgICB9LA0KICAgICAgfSkNCiAgICB9LA0KDQogICAgLy/mmoLlgZzlt6Hmo4ANCiAgICBzdG9wSW5zcGVjdGlvbigpIHsNCiAgICAgIHRoaXMuJGRpYWxvZw0KICAgICAgICAuY29uZmlybSh7DQogICAgICAgICAgdGl0bGU6ICfmmoLlgZzlt6Hmo4AnLA0KICAgICAgICAgIG1lc3NhZ2U6ICfmmoLlgZzlt6Hmo4DlsIbmj5DkuqTmnKrmj5DkuqTnmoTlt6Hmo4DngrnlkozpmpDmgqPmlbDmja7vvIEnLA0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7DQogICAgICAgICAgYXdhaXQgdGhpcy5pc1Vuc3VibWl0dGVkKCkNCg0KICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvcHVtcC9pbnNwZWN0aW9uTWFuYWdlJykNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICB9KQ0KICAgIH0sDQoNCiAgICAvL+e7iOatouW3oeajgA0KICAgIGFzeW5jIHRlcm1pbmF0ZWRJbnNwZWN0aW9uKCkgew0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRVcmxRdWVyeScsIHsNCiAgICAgICAgdGFza0lkOiB0aGlzLiRzdG9yZS5zdGF0ZS5wdW1wLnVybFF1ZXJ5LnRhc2tJZCwNCiAgICAgIH0pDQogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL3B1bXAvdGVybWluYXRlZC10YXNrYCkNCiAgICB9LA0KDQogICAgLy/mo4Dmn6XmmK/lkKbmnInmnKrmj5DkuqTpobks5bm25o+Q5LqkDQogICAgYXN5bmMgaXNVbnN1Ym1pdHRlZCgpIHsNCiAgICAgIHRoaXMuc3VibWl0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5QYXRyb2xEYXRhKSkNCg0KICAgICAgbGV0IHN0b3JhZ2VJdGVtRGF0YUxpc3QgPSBKU09OLnBhcnNlKHRoaXMuJHN0b3JhZ2UuZ2V0KCdwdW1wLXN0b3JhZ2VJdGVtRGF0YUxpc3QnKSkNCiAgICAgIHRoaXMuc3VibWl0RGF0YS5wYXRyb2xQb2ludFJlc3VsdExpc3Q/LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgIHN0b3JhZ2VJdGVtRGF0YUxpc3Q/LmZvckVhY2goKGRhdGEsIGkpID0+IHsNCiAgICAgICAgICBpdGVtLmlkID09PSBkYXRhLmlkDQogICAgICAgICAgICA/ICh0aGlzLnN1Ym1pdERhdGEucGF0cm9sUG9pbnRSZXN1bHRMaXN0W2luZGV4XSA9IHN0b3JhZ2VJdGVtRGF0YUxpc3RbaV0pDQogICAgICAgICAgICA6IG51bGwNCiAgICAgICAgfSkNCiAgICAgIH0pDQoNCiAgICAgIHRoaXMuJHN0b3JhZ2UucmVtb3ZlKCdwdW1wLXN0b3JhZ2VJdGVtRGF0YUxpc3QnKQ0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgcGF0cm9sRWRpdCh0aGlzLnN1Ym1pdERhdGEpDQogICAgfSwNCg0KICAgIC8v5byA5aeL5beh5qOADQogICAgcmVxdWVzdFNpbmdsZUxvY2F0aW9uKGlzRmlyc3QpIHsNCiAgICAgIGNvbnNvbGUubG9nKGlzRmlyc3QsICforrDlvZXlt6Hmo4AnKQ0KICAgICAgaWYgKHR5cGVvZiB5dWFuY2h1ICE9ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHl1YW5jaHUubG9jYXRpb25BTWFwLnJlcXVlc3RTaW5nbGVMb2NhdGlvbigNCiAgICAgICAgICBbJzEnXSwNCiAgICAgICAgICAocmVzKSA9PiB7DQogICAgICAgICAgICBsZXQgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0gPSByZXMNCiAgICAgICAgICAgIGxldCBwYXRoDQogICAgICAgICAgICBpZiAoaXNGaXJzdCkgew0KICAgICAgICAgICAgICBwYXRoID0NCiAgICAgICAgICAgICAgICB0aGlzLlBhdHJvbERhdGEgJiYgdGhpcy5QYXRyb2xEYXRhLnBhdHJvbFBvaW50VHJhY2tMaXN0DQogICAgICAgICAgICAgICAgICA/IHRoaXMuUGF0cm9sRGF0YS5wYXRyb2xQb2ludFRyYWNrTGlzdA0KICAgICAgICAgICAgICAgICAgOiBbXQ0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXRoKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcGF0aCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuc3RhdGUucHVtcC5wdW1wUGF0aCkpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHBhdGgucHVzaCh7DQogICAgICAgICAgICAgIGxhdDogbGF0aXR1ZGUsDQogICAgICAgICAgICAgIGxvbjogbG9uZ2l0dWRlLA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UHVtcFBhdGgnLCBwYXRoKQ0KDQogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5wdW1wLnB1bXBQYXRoKQ0KICAgICAgICAgIH0sDQogICAgICAgICAgKGVycikgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycj0nLCBlcnIpDQogICAgICAgICAgfQ0KICAgICAgICApDQogICAgICB9DQogICAgfSwNCg0KICAgIC8v57uT5p2f5a6a5L2NDQogICAgc3RvcFJlcXVlc3RMb2NhdGlvbnMoKSB7DQogICAgICBjb25zb2xlLmxvZygn57uT5p2f5beh5qOAJykNCiAgICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgew0KICAgICAgICB5dWFuY2h1LmxvY2F0aW9uQU1hcC5zdG9wUmVxdWVzdExvY2F0aW9ucygpDQogICAgICB9DQogICAgfSwNCg0KICAgIC8v5a6M5oiQ5beh5qOA5o+Q5LqkDQogICAgYXN5bmMgc3VibWl0KHR5cGUpIHsNCiAgICAgIHRoaXMuc3VibWl0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5QYXRyb2xEYXRhKSkNCiAgICAgIHRoaXMuc3VibWl0RGF0YS5wYXRyb2xTdGF0dXMgPSB0eXBlDQogICAgICB0aGlzLnN1Ym1pdERhdGEucGF0cm9sRW5kVGltZSA9IHRoaXMuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykNCiAgICAgIHRoaXMuc3VibWl0RGF0YS5zdWJtaXRUaW1lID0gdGhpcy4kZGF5anMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKQ0KICAgICAgdGhpcy5zdWJtaXRTaG93ID0gdHJ1ZQ0KICAgIH0sDQoNCiAgICAvL+iOt+WPluWunumZheW3oeajgOS6ug0KICAgIGdldEFjdHVhbFBlcnNvbihhY3R1YWxQZXJzb24pIHsNCiAgICAgIHRoaXMuJHNldCh0aGlzLnN1Ym1pdERhdGEsJ2FjdHVhbFBlcnNvbicsYWN0dWFsUGVyc29uKQ0KICAgIH0sDQoNCiAgICAvL+S7u+WKoeaPkOS6pOehruiupA0KICAgIGFzeW5jIG9uQ29uZmlybSgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGxldCBxdWVyeSA9IHsNCiAgICAgICAgICBwYXRyb2xUYXNrSWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnB1bXAudXJsUXVlcnkudGFza0lkLA0KICAgICAgICAgIHRyYWNrRFRPUzogdGhpcy4kc3RvcmUuc3RhdGUucHVtcC5wdW1wUGF0aCwNCiAgICAgICAgfQ0KDQogICAgICAgIGNvbnN0IHBhdGggPSBhd2FpdCB1cGxvYWRUcmFja0xpc3QocXVlcnkpDQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UHVtcFBhdGgnLCBbXSkNCg0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBwYXRyb2xFZGl0KHRoaXMuc3VibWl0RGF0YSkNCiAgICAgICAgdGhpcy4kcGFyZW50LmdldFBhdHJvbCgpDQogICAgICAgIHRoaXMuZmlyc3RDb25maWcgPSBmYWxzZQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnL3B1bXAvaW5zcGVjdGlvbk1hbmFnZScpDQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfQ0K"},{"version":3,"sources":["InspectionSubmit.vue"],"names":[],"mappings":";AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InspectionSubmit.vue","sourceRoot":"src/views/PumpStationInspection/components","sourcesContent":["<template>\r\n  <div class=\"inspection-submit\">\r\n    <div class=\"inspection-map\">\r\n      <img\r\n        v-if=\"modelType === 'list'\"\r\n        @click=\"modelTypeChange('map')\"\r\n        src=\"@/assets/img/pump/inspection-map.png\"\r\n        alt=\"\"\r\n        class=\"inspection-icon\"\r\n      />\r\n      <img\r\n        v-if=\"modelType === 'map'\"\r\n        @click=\"modelTypeChange('list')\"\r\n        src=\"@/assets/img/pump/inspection-list.png\"\r\n        alt=\"\"\r\n        class=\"inspection-icon\"\r\n      />\r\n    </div>\r\n\r\n    <fm-button\r\n      type=\"success\"\r\n      class=\"inspection-btn inspection-btn-one\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 1\"\r\n      @click=\"startInspection(2)\"\r\n      >开始巡检</fm-button\r\n    >\r\n    <fm-button\r\n      type=\"success\"\r\n      class=\"inspection-btn\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 2 && !firstConfig && finishConfig\"\r\n      @click=\"submit(3)\"\r\n      >完成巡检</fm-button\r\n    >\r\n    <fm-button\r\n      type=\"warning\"\r\n      class=\"inspection-btn\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 2 && !firstConfig && !finishConfig\"\r\n      @click=\"terminatedInspection(4)\"\r\n      >终止巡检</fm-button\r\n    >\r\n    <fm-button\r\n      type=\"primary\"\r\n      class=\"inspection-btn\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 2 && !firstConfig && !finishConfig\"\r\n      @click=\"stopInspection()\"\r\n      >暂停巡检</fm-button\r\n    >\r\n    <fm-button\r\n      type=\"primary\"\r\n      class=\"inspection-btn inspection-btn-one\"\r\n      v-if=\"PatrolData && PatrolData.patrolStatus === 2 && firstConfig\"\r\n      @click=\"goInspection()\"\r\n      >继续巡检</fm-button\r\n    >\r\n\r\n    <fm-dialog\r\n      :visible.sync=\"submitShow\"\r\n      title=\"巡检任务提交\"\r\n      @confirm=\"onConfirm\"\r\n      show-cancel-button\r\n      width=\"331\"\r\n    >\r\n      <inspection-submit-card :PatrolData=\"submitData\"  @getActualPerson='getActualPerson' />\r\n    </fm-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport InspectionSubmitCard from './InspectionSubmitCard.vue'\r\nimport { patrolEdit, uploadTrackList } from '../api'\r\nexport default {\r\n  components: { InspectionSubmitCard },\r\n  props: {\r\n    //巡检状态(1:待巡检，2:巡检中，3:已完成 ，4:已终止)(手机端)\r\n    PatrolData: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    modelType: {\r\n      type: String,\r\n      default: 'list',\r\n    },\r\n  },\r\n  watch: {\r\n    PatrolData: {\r\n      handler: function () {\r\n        this.isFinishConfig()\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      submitData: null,\r\n      firstConfig: true, //是否为第一次进入\r\n      finishConfig: false, //巡检点是否巡检完毕\r\n      submitShow: false, //提交弹框\r\n      disabled: true,\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.setFirstConfig()\r\n  },\r\n  beforeDestroy() {\r\n    this.stopRequestLocations()\r\n  },\r\n\r\n  methods: {\r\n    //内容变化\r\n    //list列表，map地图\r\n    modelTypeChange(type) {\r\n      if (this.firstConfig && this.PatrolData.patrolStatus === 2) return\r\n      this.$emit('modelTypeChange', type)\r\n\r\n      this.stopRequestLocations()\r\n      if (type === 'list') this.requestSingleLocation(false)\r\n    },\r\n\r\n    //判断是否为第一次进入\r\n    setFirstConfig() {\r\n      let { firstConfig } = this.$store.state.pump.urlQuery\r\n\r\n      if (firstConfig === false) {\r\n        this.firstConfig = false\r\n        this.$emit('isDisabled', false)\r\n        console.log('isDisabled', false)\r\n\r\n        this.requestSingleLocation(this.firstConfig)\r\n      } else {\r\n        this.firstConfig = true\r\n      }\r\n    },\r\n\r\n    //巡检点是否巡检完毕\r\n    isFinishConfig() {\r\n      let config = this.PatrolData?.patrolPointResultList?.every((item) => {\r\n        return item.patrolStatus === '已巡'\r\n      })\r\n      this.finishConfig = config\r\n    },\r\n\r\n    //继续巡检\r\n    goInspection() {\r\n      this.firstConfig = false\r\n      this.$emit('isDisabled', false)\r\n\r\n      this.requestSingleLocation(true)\r\n    },\r\n\r\n    //开始巡检\r\n    async startInspection(type) {\r\n      let query = {\r\n        id: this.$store.state.pump.urlQuery.taskId,\r\n        patrolStatus: type ? type : this.PatrolData && this.PatrolData.patrolStatus,\r\n        patrolStartTime: this.$dayjs().format('YYYY-MM-DD HH:mm:ss'),\r\n        patrolPointResultList: this.PatrolData && this.PatrolData.patrolPointResultList,\r\n      }\r\n\r\n      this.$emit('isDisabled', false)\r\n\r\n      this.requestSingleLocation(true)\r\n\r\n      const res = await patrolEdit(query)\r\n      this.$parent.getPatrol()\r\n      this.firstConfig = false\r\n      this.$router.push({\r\n        path: '/pump/inspection',\r\n        query: {\r\n          taskId: this.$store.state.pump.urlQuery.taskId,\r\n          firstConfig: 'false',\r\n        },\r\n      })\r\n    },\r\n\r\n    //暂停巡检\r\n    stopInspection() {\r\n      this.$dialog\r\n        .confirm({\r\n          title: '暂停巡检',\r\n          message: '暂停巡检将提交未提交的巡检点和隐患数据！',\r\n        })\r\n        .then(async () => {\r\n          await this.isUnsubmitted()\r\n\r\n          this.$router.replace('/pump/inspectionManage')\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    },\r\n\r\n    //终止巡检\r\n    async terminatedInspection() {\r\n      this.$store.commit('setUrlQuery', {\r\n        taskId: this.$store.state.pump.urlQuery.taskId,\r\n      })\r\n      this.$router.push(`/pump/terminated-task`)\r\n    },\r\n\r\n    //检查是否有未提交项,并提交\r\n    async isUnsubmitted() {\r\n      this.submitData = JSON.parse(JSON.stringify(this.PatrolData))\r\n\r\n      let storageItemDataList = JSON.parse(this.$storage.get('pump-storageItemDataList'))\r\n      this.submitData.patrolPointResultList?.forEach((item, index) => {\r\n        storageItemDataList?.forEach((data, i) => {\r\n          item.id === data.id\r\n            ? (this.submitData.patrolPointResultList[index] = storageItemDataList[i])\r\n            : null\r\n        })\r\n      })\r\n\r\n      this.$storage.remove('pump-storageItemDataList')\r\n      const res = await patrolEdit(this.submitData)\r\n    },\r\n\r\n    //开始巡检\r\n    requestSingleLocation(isFirst) {\r\n      console.log(isFirst, '记录巡检')\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.locationAMap.requestSingleLocation(\r\n          ['1'],\r\n          (res) => {\r\n            let { latitude, longitude } = res\r\n            let path\r\n            if (isFirst) {\r\n              path =\r\n                this.PatrolData && this.PatrolData.patrolPointTrackList\r\n                  ? this.PatrolData.patrolPointTrackList\r\n                  : []\r\n              console.log(path)\r\n            } else {\r\n              path = JSON.parse(JSON.stringify(this.$store.state.pump.pumpPath))\r\n            }\r\n\r\n            path.push({\r\n              lat: latitude,\r\n              lon: longitude,\r\n            })\r\n            this.$store.commit('setPumpPath', path)\r\n\r\n            console.log(this.$store.state.pump.pumpPath)\r\n          },\r\n          (err) => {\r\n            console.log('err=', err)\r\n          }\r\n        )\r\n      }\r\n    },\r\n\r\n    //结束定位\r\n    stopRequestLocations() {\r\n      console.log('结束巡检')\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.locationAMap.stopRequestLocations()\r\n      }\r\n    },\r\n\r\n    //完成巡检提交\r\n    async submit(type) {\r\n      this.submitData = JSON.parse(JSON.stringify(this.PatrolData))\r\n      this.submitData.patrolStatus = type\r\n      this.submitData.patrolEndTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n      this.submitData.submitTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n      this.submitShow = true\r\n    },\r\n\r\n    //获取实际巡检人\r\n    getActualPerson(actualPerson) {\r\n      this.$set(this.submitData,'actualPerson',actualPerson)\r\n    },\r\n\r\n    //任务提交确认\r\n    async onConfirm() {\r\n      try {\r\n        let query = {\r\n          patrolTaskId: this.$store.state.pump.urlQuery.taskId,\r\n          trackDTOS: this.$store.state.pump.pumpPath,\r\n        }\r\n\r\n        const path = await uploadTrackList(query)\r\n        this.$store.commit('setPumpPath', [])\r\n\r\n        const res = await patrolEdit(this.submitData)\r\n        this.$parent.getPatrol()\r\n        this.firstConfig = false\r\n        this.$router.replace('/pump/inspectionManage')\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.inspection-submit {\r\n  width: calc(100% - 150px);\r\n  position: fixed;\r\n  bottom: 0;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  height: 112px;\r\n  padding: 10px 30px 10px 120px;\r\n  background-color: #fff;\r\n\r\n  .inspection-map {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: absolute;\r\n    left: 40px;\r\n    width: 40px;\r\n    height: 40px;\r\n\r\n    .inspection-icon {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n\r\n  .inspection-btn {\r\n    width: 288px;\r\n    height: 88px;\r\n    border-radius: 44px;\r\n  }\r\n\r\n  .inspection-btn-one {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"]}]}