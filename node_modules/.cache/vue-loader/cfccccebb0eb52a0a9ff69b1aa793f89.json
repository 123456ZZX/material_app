{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\BZList\\BZDetail\\index.vue?vue&type=style&index=0&id=52325ffb&lang=less&scoped=true","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\BZList\\BZDetail\\index.vue","mtime":1705912915782},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubWFpbiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogIzA1NWZmYyAhaW1wb3J0YW50Ow0KICAgIGhlaWdodDogMTAwJTsNCg0KICAgIC5tYWluLWJnIHsNCiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICB9DQoNCiAgICAubm8tZGF0YS10ZXh0LWRlc2NyaXBlIHsNCiAgICAgICAgZm9udC1zaXplOiAzMnB4Ow0KICAgICAgICBmb250LXdlaWdodDogNDAwOw0KICAgICAgICBjb2xvcjogIzk5OTk5OTsNCiAgICB9DQoNCiAgICAubm8tZGF0YS10ZXh0IHsNCiAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgfQ0KDQogICAgLm5vLWRhdGEtaW1nIHsNCiAgICAgICAgbWFyZ2luOiAyMDBweCA5NXB4IDAgOTVweDsNCiAgICB9DQoNCiAgICAuY29udGVudCB7DQogICAgICAgIG1hcmdpbi10b3A6IDQwcHg7DQogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgYmFja2dyb3VuZDogI2Q0ZThmYzsNCiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA0NnB4KTsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDI0cHg7DQogICAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAyNHB4Ow0KDQogICAgICAgIC5iZ0ltZyB7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMHB4Ow0KICAgICAgICAgICAgei1pbmRleDogMTsNCiAgICAgICAgICAgIHRvcDogLTIwcHg7DQogICAgICAgIH0NCg0KICAgIH0NCn0NCg0KLmFjdGlvblNsb3RzIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7DQogICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KfQ0KDQovL+WvvOiIquagj+WPs+S+p+aMiemSrg0KLmFjdGlvbnMgew0KICAgIHdpZHRoOiAyOHB4Ow0KICAgIGhlaWdodDogMjhweDsNCn0NCg0KLmFjdGlvblRleHQgew0KICAgIGNvbG9yOiAjRkZGRkZGOw0KICAgIGZvbnQtc2l6ZTogMjhweDsNCn0NCg0KLnNlbGVjdFN0eWxlIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICB3aWR0aDogNjkwcHg7DQogICAgbWFyZ2luOiAyNHB4IGF1dG8gMTJweDsNCn0NCg0KL2RlZXAvLmZtLWhhaXJsaW5lLS1ib3R0b206OmFmdGVyIHsNCiAgICBib3JkZXItYm90dG9tLXdpZHRoOiAwOw0KfQ0KDQovZGVlcC8uZm0tbmF2LWJhcl9fdGl0bGUgew0KICAgIGNvbG9yOiAjRkZGRkZGICFpbXBvcnRhbnQ7DQp9DQoNCi9kZWVwLy5mbS1uYXYtYmFyX19jb250ZW50IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCn0NCg0KL2RlZXAvIC5mbS1uYXYtYmFyIC5mbS1pY29uIHsNCiAgICBjb2xvcjogI0ZGRkZGRiAhaW1wb3J0YW50Ow0KfQ0KDQovZGVlcC8uZm0tbmF2LWJhciB7DQogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7DQp9DQoNCi9kZWVwLy5mbS10YWJzX19uYXYtLWxpbmUgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNkNGU4ZmM7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7DQogICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMjRweDsNCiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMjRweDsNCn0NCg0KL2RlZXAvLmZtLXRhYiB7DQogICAgbGluZS1oZWlnaHQ6IDM1cHQ7DQogICAgLy8gaGVpZ2h0OiA4MCU7DQogICAgYm9yZGVyLXJhZGl1czogMHB4IDBweCAwcHggMHB4Ow0KICAgIC8vIC8vIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg0MGRlZywgIzk5Y2MzMywgI2ZmNjY2NiwgIzMzNjY5OSwgI2ZmMDAzMyk7DQogICAgLy8gYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDE4MGRlZywgI2QwZTdmZiwgI2QzZThmZSwgI2RiZWJmZiwgI2VjZjRmZik7DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA+RA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/BZList/BZDetail","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <img :src=\"require('@/assets/img/blueBg.png')\" class=\"main-bg\" />\r\n        <fm-nav-bar :title=\"tappedObject.pumpName\" left-arrow @click-left=\"$router.go(-1)\">\r\n            <template #right>\r\n                <div class=\"actionSlots\">\r\n                    <img class=\"actions\" src=\"@/assets/img/BZList/zuTai.png\" />\r\n                </div>\r\n                <div class=\"actionText\" @click=\"goZuTai\">组态</div>\r\n            </template>\r\n        </fm-nav-bar>\r\n        <div class=\"content\">\r\n            <fm-tabs v-model=\"active\" @tab-click=\"changeType(active)\">\r\n                <fm-tab name=\"实时数据\" :label=\"nowData\" />\r\n                <fm-tab name=\"运维记录\" :label=\"recrod\" />\r\n                <fm-tab name=\"监控视频\" :label=\"monitor\" />\r\n                <fm-tab name=\"水泵信息\" :label=\"bzInfo\" />\r\n                <fm-tab name=\"门禁记录\" :label=\"doorRecrod\" />\r\n                <fm-tab name=\"水池信息\" :label=\"poolInfo\" />\r\n            </fm-tabs>\r\n            <div>\r\n                <template v-if=\"this.tappedObject==null||tempData==null||tempData.length==0 && !loading\">\r\n                    <div class=\"no-data-img\">\r\n                        <fm-image fit=\"cover\" :src=\"require('@/assets/img/no-data-img.png')\" />\r\n                    </div>\r\n                    <div class=\"no-data-text\">\r\n                        <div class=\"no-data-text-descripe\">暂无数据</div>\r\n                    </div>\r\n                </template>\r\n                <!-- 实时数据 -->\r\n                <template v-else-if=\"active=='实时数据'\">\r\n                    <liveDataVue :liveData=\"tempData\" :tapped-objects=\"tappedObject\"></liveDataVue>\r\n                </template>\r\n\r\n                <!-- 运维记录 -->\r\n                <template v-else-if=\"active=='运维记录'\">\r\n                    <mantianVue :maintenance=\"tempData\"></mantianVue>\r\n                </template>\r\n\r\n                <template v-else-if=\"active=='监控视频'\">\r\n                    <monitorVue :video-data=\"tempArr\"></monitorVue>\r\n                </template>\r\n\r\n                <template v-else-if=\"active=='水泵信息'\">\r\n                    <pumInfoVue :pumpData=\"tempArr\"></pumInfoVue>\r\n                </template>\r\n\r\n                <template v-else-if=\"active=='门禁记录'\">\r\n                    <div>\r\n                        <div class=\"selectStyle\">\r\n                            <SelectVue :selectData=\"tempArr\" :selValue=\"dateType\" color=\"white\" @getValue=\"getValue\">\r\n                            </SelectVue>\r\n                        </div>\r\n                    </div>\r\n                    <doorRecordVue :door-data=\"doorData\"></doorRecordVue>\r\n                </template>\r\n\r\n                <template v-else-if=\"active=='水池信息'\">\r\n                    <poolInfoVue :pool-data=\"tempArr\"></poolInfoVue>\r\n                </template>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {\r\n    Toast,\r\n    PullRefresh,\r\n    Dialog,\r\n} from 'fawkes-mobile-lib'\r\nimport liveDataVue from './liveData.vue'\r\nimport mantianVue from './mantian.vue'\r\nimport pumInfoVue from './pumInfo.vue'\r\nimport SelectVue from './BzSelect.vue';\r\nimport doorRecordVue from './doorRecord.vue';\r\nimport poolInfoVue from './poolInfo.vue';\r\nimport monitorVue from './monitor.vue';\r\nimport request from '@/utils/request'\r\nimport { each, forEach } from 'lodash';\r\nexport default {\r\n    components: {\r\n        liveDataVue,\r\n        mantianVue,\r\n        pumInfoVue,\r\n        SelectVue,\r\n        doorRecordVue,\r\n        poolInfoVue,\r\n        monitorVue,\r\n        [Toast.name]: Toast,\r\n        [PullRefresh.name]: PullRefresh,\r\n        [Dialog.name]: Dialog,\r\n    },\r\n    data() {\r\n        return {\r\n            GsData: [],\r\n            WsData: [],\r\n            RnData: [],\r\n            list: [{ title: '123' }],\r\n            tempData: {},\r\n            tempArr: [],\r\n            doorData: [],\r\n            tappedObject: null,\r\n            nowData: '实时数据',\r\n            recrod: '运维记录',\r\n            monitor: '监控视频',\r\n            bzInfo: '水泵信息',\r\n            doorRecrod: '门禁记录',\r\n            poolInfo: '水池信息',\r\n            active: '实时数据',\r\n            token: '',\r\n            refreshing: false, // 下拉刷新是否处于加载中状态，下拉时组件会自动设置true\r\n            loading: false, // 列表加载更多时控制加载状态，加载时组件会自动设置为true，加载完成后需手动设置为false\r\n            finished: false, // 列表加载更多时控制加载状态，全部加载完成时需设置为true\r\n            inspDateTypeList: [\r\n                { type: 1, name: '门禁名称一', value: '门禁名称一' },\r\n                { type: 1, name: '门禁名称二', value: '门禁名称二' },\r\n                { type: 1, name: '门禁名称三', value: '门禁名称三' },\r\n            ],\r\n            dateType: '请选择',\r\n        }\r\n    },\r\n    created() {\r\n        // 初始化下拉框\r\n        this.dateType = this.inspDateTypeList[0].value\r\n    },\r\n    mounted() {\r\n        this.GsData = this.$route.query.GsData\r\n        this.WsData = this.$route.query.WsData\r\n        this.RnData = this.$route.query.RnData\r\n        this.tappedObject = this.$route.query.tappedObject\r\n        Toast.loading({\r\n            message: '加载中...',\r\n            forbidClick: true,\r\n            duration: 0\r\n        })\r\n        this.getToken()\r\n        this.onRefresh(this.active)\r\n    },\r\n    onLoad() {\r\n        this.getData(this.active)\r\n    },\r\n    methods: {\r\n        goZuTai() {\r\n            this.$router.push({\r\n                path: '/BZList/zuTai',\r\n                query: {\r\n                    id: this.tappedObject.id,\r\n                }\r\n            })\r\n        },\r\n        getValue(type, name, value) {\r\n            this.dateType = value\r\n            Toast.loading({\r\n                message: '加载中...',\r\n                forbidClick: true,\r\n                duration: 0\r\n            })\r\n            request({\r\n                url: '/xasw-pump/pump/app/getAccessRecord',\r\n                method: 'get',\r\n                params:\r\n                {\r\n                    pumpId: this.tappedObject.id,\r\n                    entranceCode: this.dateType,\r\n                }\r\n            }).then((res) => {\r\n                this.doorData = this.doorData.concat(res.data)\r\n                console.log(this.doorData + '123')\r\n            }).finally(() => {\r\n                Toast.clear()\r\n                this.loading = false\r\n            })\r\n            this.onRefresh(this.active)\r\n        },\r\n        //获取工单token\r\n        getToken() {\r\n            return request({\r\n                url: `http://172.20.79.70/main/userCenterApi/sso/tokenByToken`,\r\n                method: 'post',\r\n                params: {\r\n                    token: this.$storage.get('access_token'),\r\n                },\r\n                headers: {\r\n                    Authorization: 'Basic b3V0d29yazp3cGcyMDIw',\r\n                },\r\n            }).then((res) => {\r\n                console.log(res)\r\n                this.token = 'Bearer '+res.accessToken\r\n                \r\n            })\r\n        },\r\n        // 获取列表数据\r\n        getData(act) {\r\n            this.tempData = {}\r\n            let url = ''\r\n            let id = ''\r\n            let more = ''\r\n            switch (act) {\r\n                case this.nowData:\r\n                    url = '/xasw-pump/pump/app/monitoringAlarm'\r\n                    id = this.tappedObject.id\r\n                    break;\r\n                case '运维记录':\r\n                    url = '/xasw-pump/pump/app/operationRecord'\r\n                    //id=item.id\r\n                    id = this.tappedObject.id\r\n                    break;\r\n                case '监控视频':\r\n                    url = '/xasw-pump/pump/app/videoMonitor'\r\n                    id = this.tappedObject.id\r\n                    break;\r\n                case '水泵信息':\r\n                    url = '/xasw-pump/pump/app/getPumpInfo'\r\n                    id = this.tappedObject.id\r\n                    break;\r\n                case '门禁记录':\r\n                    url = '/xasw-pump/pump/app/getEntranceNames'\r\n                    id = this.tappedObject.id\r\n                    more = this.dateType\r\n                    break;\r\n                case '水池信息':\r\n                    url = '/xasw-pump/pump/app/getPoolInfo'\r\n                    id = this.tappedObject.id\r\n                    break;\r\n                default:\r\n                    url = ''\r\n                    id = ''\r\n            }\r\n            request({\r\n                url: url,\r\n                method: 'get',\r\n                headers: {\r\n                    Authorization: this.token\r\n                },\r\n                params:\r\n                    more == '' ?\r\n                        {\r\n                            pumpId: id,\r\n                        } :\r\n                        {\r\n                            pumpId: id,\r\n                            more: more\r\n                        }\r\n            }).then((res) => {\r\n                this.tempData = res.data\r\n                this.tempArr = this.tempArr.concat(res.data)\r\n                console.log(this.tempData)\r\n            }).finally(() => {\r\n                Toast.clear()\r\n                this.loading = false\r\n            })\r\n        },\r\n        // tab切换回调\r\n        changeType(name,) {\r\n            Toast.loading({\r\n                message: '加载中...',\r\n                forbidClick: true,\r\n                duration: 0\r\n            })\r\n            this.active = name\r\n            this.onRefresh(name)\r\n        },\r\n        // 页面加载/下拉刷新\r\n        onRefresh(act) {\r\n            this.pageReset()\r\n            this.loading = true\r\n            this.finished = false\r\n            this.getData(act)\r\n        },\r\n        onClear() {\r\n            // 复用刷新接口\r\n            // this.searchParams.reimburseName = ''\r\n            this.onRefresh()\r\n        },\r\n        // 重置列表page,list值\r\n        pageReset() {\r\n            this.pageNum = 1\r\n            this.tempData = {}\r\n            this.tempArr = []\r\n            this.GsList = []\r\n            this.WsList = []\r\n            this.RnList = []\r\n        },\r\n    },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.main {\r\n    background-color: #055ffc !important;\r\n    height: 100%;\r\n\r\n    .main-bg {\r\n        position: absolute;\r\n        width: 100%;\r\n    }\r\n\r\n    .no-data-text-descripe {\r\n        font-size: 32px;\r\n        font-weight: 400;\r\n        color: #999999;\r\n    }\r\n\r\n    .no-data-text {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    .no-data-img {\r\n        margin: 200px 95px 0 95px;\r\n    }\r\n\r\n    .content {\r\n        margin-top: 40px;\r\n        position: relative;\r\n        background: #d4e8fc;\r\n        height: calc(100% - 46px);\r\n        width: 100%;\r\n        border-top-left-radius: 24px;\r\n        border-top-right-radius: 24px;\r\n\r\n        .bgImg {\r\n            position: absolute;\r\n            height: 100px;\r\n            z-index: 1;\r\n            top: -20px;\r\n        }\r\n\r\n    }\r\n}\r\n\r\n.actionSlots {\r\n    display: flex;\r\n    flex-direction: row;\r\n    margin-right: 10px;\r\n}\r\n\r\n//导航栏右侧按钮\r\n.actions {\r\n    width: 28px;\r\n    height: 28px;\r\n}\r\n\r\n.actionText {\r\n    color: #FFFFFF;\r\n    font-size: 28px;\r\n}\r\n\r\n.selectStyle {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    width: 690px;\r\n    margin: 24px auto 12px;\r\n}\r\n\r\n/deep/.fm-hairline--bottom::after {\r\n    border-bottom-width: 0;\r\n}\r\n\r\n/deep/.fm-nav-bar__title {\r\n    color: #FFFFFF !important;\r\n}\r\n\r\n/deep/.fm-nav-bar__content {\r\n    background-color: transparent;\r\n}\r\n\r\n/deep/ .fm-nav-bar .fm-icon {\r\n    color: #FFFFFF !important;\r\n}\r\n\r\n/deep/.fm-nav-bar {\r\n    background: transparent;\r\n}\r\n\r\n/deep/.fm-tabs__nav--line {\r\n    background-color: #d4e8fc;\r\n    display: flex;\r\n    align-items: flex-end;\r\n    border-top-left-radius: 24px;\r\n    border-top-right-radius: 24px;\r\n}\r\n\r\n/deep/.fm-tab {\r\n    line-height: 35pt;\r\n    // height: 80%;\r\n    border-radius: 0px 0px 0px 0px;\r\n    // // background-image: linear-gradient(40deg, #99cc33, #ff6666, #336699, #ff0033);\r\n    // background-image: linear-gradient(180deg, #d0e7ff, #d3e8fe, #dbebff, #ecf4ff);\r\n}\r\n</style>"]}]}