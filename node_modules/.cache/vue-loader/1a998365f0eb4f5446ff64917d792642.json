{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\BZList\\pumpMap\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\BZList\\pumpMap\\index.vue","mtime":1705912915785},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgTWFwQ29tcCBmcm9tICdAL3ZpZXdzL2luc3BlY3RNYXAvaW5kZXgudnVlJw0KaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0Jw0KaW1wb3J0IG1hcGJveGdsIGZyb20gJ21hcGJveC1nbCcNCmltcG9ydCB7IHB1bXBJbmZvUGFnZSwgZ2V0TGl2ZURhdGEgfSBmcm9tICcuL2FwaScNCg0KY29uc3QgbWFwT2JqID0gew0KICBtYXA6IG51bGwsDQogIG1hcEluc3RhbmNlOiBudWxsLA0KfQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsgTWFwQ29tcCwgcmVxdWVzdCB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzaG93OiBmYWxzZSwNCiAgICAgIGxvYWRlZDogZmFsc2UsDQogICAgICBwdW1wTmFtZTogJycsDQogICAgICBwdW1wVHlwZTogJycsDQogICAgICBpbWdVcmw6ICcnLA0KICAgICAgaW1nczogW10sDQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgbGl2ZURhdGE6IHt9LA0KICAgICAgYWxsRGF0YTogW10sDQogICAgICBpbmRleDogMCwNCiAgICAgIEFsbExpc3Q6IFtdLA0KICAgICAgR3NMaXN0OiBbXSwNCiAgICAgIFdzTGlzdDogW10sDQogICAgICBSbkxpc3Q6IFtdLA0KICAgIH0NCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMucXVlcnlJbmZvKCkNCiAgICB0aGlzLmdldERhdGEoKQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIC8v5b2T5YmN5a6a5L2N5Zu+54mHDQogICAgbWFwT2JqLmxvYWRJbWFnZSgNCiAgICAgIHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9wdW1wbWFwL2xvYy5wbmcnKSwNCiAgICAgIGZ1bmN0aW9uIChlcnJvciwgaW1hZ2UpIHsNCiAgICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcg0KICAgICAgICB0aGF0Lm1hcC5hZGRJbWFnZSgnbWFyaycsIGltYWdlKQ0KICAgICAgfQ0KICAgICkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFycm93KCkgew0KICAgICAgdGhpcy4kcmVmcy5zd2lwcGVyLm5leHQoKQ0KICAgIH0sDQogICAgYXJyb3dCYWNrKCkgew0KICAgICAgdGhpcy4kcmVmcy5zd2lwcGVyLnByZXYoKQ0KICAgIH0sDQogICAgYXJyb3dUbyhpbmRleCkgew0KICAgICAgdGhpcy4kcmVmcy5zd2lwcGVyLnN3aXBlVG8oaW5kZXgpDQogICAgfSwNCiAgICBvbkNoYW5nZShpbmRleCkgew0KICAgICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaCgoaXRlbSwgaXRlbUluZGV4KSA9PiB7DQogICAgICAgIGlmIChpdGVtSW5kZXggPT09IGluZGV4ICYmIGl0ZW0ubG9uICE9IG51bGwgJiYgaXRlbS5sYXQgIT0gbnVsbCkgew0KICAgICAgICAgIHRoaXMuc2hvdyA9IHRydWUNCiAgICAgICAgICB0aGlzLmdldERhdGFCeU5hbWUoaXRlbS5wdW1wTmFtZSkNCiAgICAgICAgICBtYXBPYmoubWFwLmZseVRvKHsgY2VudGVyOiBbaXRlbS5sb24sIGl0ZW0ubGF0XSB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy/ms7Xnq5nliIbpobXmn6Xor6INCiAgICBhc3luYyBxdWVyeUluZm8oKSB7DQogICAgICBsZXQgcXVlcnkgPSB7DQogICAgICAgIHBhZ2VJbmRleDogMSwNCiAgICAgICAgcGFnZVNpemU6IDE1LA0KICAgICAgfQ0KICAgICAgY29uc3Qgew0KICAgICAgICBkYXRhOiB7IHJlY29yZHMgfSwNCiAgICAgIH0gPSBhd2FpdCBwdW1wSW5mb1BhZ2UocXVlcnkpDQogICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlY29yZHMNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMudGFibGVEYXRhKQ0KICAgICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICB0aGlzLmdldExpdmVEYXRhKGl0ZW0uaWQpDQogICAgICAgIHRoaXMuZ2V0SW1nKGl0ZW0uaW1hZ2VJZCkNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/ojrflj5blm77niYcNCiAgICBnZXRJbWcoaW1nVG9rZW4pIHsNCiAgICAgIHRoaXMuaW1nVXJsID0gaW1nVG9rZW4gPyAnL2FwaS9zeXMtc3RvcmFnZS9kb3dubG9hZF9pbWFnZT9mOHM9JyArIGltZ1Rva2VuIDogbnVsbA0KICAgICAgdGhpcy5pbWdzLnB1c2godGhpcy5pbWdVcmwpDQogICAgfSwNCiAgICAvLyDojrflj5bljoLnq5nliJfooajmlbDmja4NCiAgICBnZXREYXRhKCkgew0KICAgICAgcmVxdWVzdCh7DQogICAgICAgIHVybDogJy94YXN3LXB1bXAvcHVtcC9hcHAvbGlzdCcsDQogICAgICAgIG1ldGhvZDogJ2dldCcsDQogICAgICAgIHB1bXBUeXBlOiAn5L6b5rC0JywNCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLkFsbExpc3QgPSB0aGlzLkFsbExpc3QuY29uY2F0KHJlcy5kYXRhKQ0KICAgICAgICB0aGlzLkFsbExpc3QuZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgICBlbGVtZW50LnB1bXBUeXBlID09ICfkvpvmsLQnID8NCiAgICAgICAgICAgIHRoaXMuR3NMaXN0ID0gdGhpcy5Hc0xpc3QuY29uY2F0KGVsZW1lbnQpIDoNCiAgICAgICAgICAgIGVsZW1lbnQucHVtcFR5cGUgPT0gJ+axoeawtCcgPw0KICAgICAgICAgICAgICB0aGlzLldzTGlzdCA9IHRoaXMuV3NMaXN0LmNvbmNhdChlbGVtZW50KSA6DQogICAgICAgICAgICAgIHRoaXMuUm5MaXN0ID0gdGhpcy5Sbkxpc3QuY29uY2F0KGVsZW1lbnQpDQogICAgICAgIH0pOw0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6Lez6L2s6K+m5oOF6aG1DQogICAgZ29EZXRhaWwodGFwcGVkT2JqZWN0KSB7DQogICAgICB0aGlzLkFsbExpc3QgIT0gJycgPw0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgcGF0aDogJy9CWkxpc3QvQlpkZXRhaWwnLA0KICAgICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgICBHc0RhdGE6IHRoaXMuR3NMaXN0LA0KICAgICAgICAgICAgV3NEYXRhOiB0aGlzLldzRGF0YSwNCiAgICAgICAgICAgIFJuRGF0YTogdGhpcy5SbkRhdGEsDQogICAgICAgICAgICB0YXBwZWRPYmplY3Q6IHRhcHBlZE9iamVjdCwNCiAgICAgICAgICB9DQogICAgICAgIH0pIDoNCiAgICAgICAgY29uc29sZS5sb2coJ+WIl+ihqOaYr+epuueahCcpDQogICAgfSwNCiAgICAvL+iOt+WPluWcsOWbvuWFg+e0oOS4reeahOazteermeWQjeensA0KICAgIGdldE5hbWUoZSkgew0KICAgICAgaWYgKGUub3JpZ2luYWxFdmVudC5zcmNFbGVtZW50LmlubmVyVGV4dCAhPSAnJyAmJiBlLm9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudC5pbm5lclRleHQgIT0gbnVsbCkgew0KICAgICAgICB0aGlzLnNob3cgPSB0cnVlDQogICAgICAgIHRoaXMucHVtcE5hbWUgPSBlLm9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudC5pbm5lclRleHQNCiAgICAgICAgdGhpcy5nZXREYXRhQnlOYW1lKGUub3JpZ2luYWxFdmVudC5zcmNFbGVtZW50LmlubmVyVGV4dCkNCiAgICAgICAgdGhpcy5nZXRJbmRleChlLm9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudC5pbm5lclRleHQpDQogICAgICB9DQogICAgICBlbHNlIGlmIChlLm9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudC5pZCAhPSAnJyAmJiBlLm9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudC5pZCAhPSBudWxsKSB7DQogICAgICAgIHRoaXMuc2hvdyA9IHRydWUNCiAgICAgICAgdGhpcy5wdW1wTmFtZSA9IGUub3JpZ2luYWxFdmVudC5zcmNFbGVtZW50LmlkDQogICAgICAgIHRoaXMuZ2V0RGF0YUJ5TmFtZShlLm9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudC5pZCkNCiAgICAgICAgdGhpcy5nZXRJbmRleChlLm9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudC5pZCkNCiAgICAgIH0NCiAgICAgIGVsc2Ugew0KICAgICAgICB0aGlzLnNob3cgPSBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy/nlKjms7Xnq5nlkI3np7Dojrflj5blr7nlupRpZA0KICAgIGdldERhdGFCeU5hbWUobmFtZSkgew0KICAgICAgbGV0IHRlbXANCiAgICAgIHRoaXMucHVtcE5hbWUgPSBuYW1lDQogICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgIGlmIChuYW1lID09IGl0ZW0ucHVtcE5hbWUpIHsNCiAgICAgICAgICB0ZW1wID0gaXRlbS5pZA0KICAgICAgICAgIHRoaXMucHVtcFR5cGUgPSBpdGVtLnB1bXBUeXBlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzLmdldExpdmVEYXRhKHRlbXApDQogICAgfSwNCiAgICBnZXRJbmRleChuYW1lKSB7DQogICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICBpZiAobmFtZSA9PSBpdGVtLnB1bXBOYW1lKSB7DQogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvL+iOt+WPluWunuaXtuaVsOaNrg0KICAgIGdldExpdmVEYXRhKGlkKSB7DQogICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlDQogICAgICByZXF1ZXN0KHsNCiAgICAgICAgdXJsOiBgL3hhc3ctcHVtcC9wdW1wL2FwcC9tb25pdG9yaW5nQWxhcm1gLA0KICAgICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBwdW1wSWQ6IGlkDQogICAgICAgIH0sDQogICAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy5saXZlRGF0YSA9IHJlcy5kYXRhDQogICAgICAgIHRoaXMuYWxsRGF0YS5wdXNoKHRoaXMubGl2ZURhdGEpDQogICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v5Zyw5Zu+5Yid5aeL5YyWDQogICAgYXN5bmMgbWFwTG9hZGVkKG1hcEluc3RhbmNlKSB7DQogICAgICBtYXBPYmoubWFwSW5zdGFuY2UgPSBtYXBJbnN0YW5jZQ0KICAgICAgbWFwT2JqLm1hcCA9IG1hcEluc3RhbmNlLm1hcA0KDQogICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgIGlmICghaXRlbS5wdW1wSWNvbikgcmV0dXJuDQogICAgICAgIGxldCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKQ0KICAgICAgICBib3guY2xhc3NOYW1lID0gJ3B1bXAtbWFwLWl0ZW0nDQogICAgICAgIGJveC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnDQogICAgICAgIGJveC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbicNCiAgICAgICAgYm94LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJw0KDQogICAgICAgIGxldCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykNCiAgICAgICAgY29udGVudC5jbGFzc05hbWUgPSAncHVtcC1tYXAtdGV4dCcNCiAgICAgICAgY29udGVudC5pbm5lclRleHQgPSBpdGVtLnB1bXBOYW1lDQogICAgICAgIC8vIGNvbnRlbnQuY2xpY2s9dGhpcy5vbkNsaWNrKGl0ZW0ucHVtcE5hbWUpDQogICAgICAgIGNvbnRlbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ25vbmUnDQogICAgICAgIGNvbnRlbnQuc3R5bGUuY29sb3IgPSAnbm9uZScNCiAgICAgICAgY29udGVudC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJw0KDQogICAgICAgIGxldCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykNCiAgICAgICAgaWNvbi5jbGFzc05hbWUgPSAncHVtcC1tYXAtaWNvbicNCiAgICAgICAgaWNvbi5pZCA9IGl0ZW0ucHVtcE5hbWUNCiAgICAgICAgaWNvbi5zdHlsZS5iYWNrZ3JvdW5kID0gYHVybCgke3JlcXVpcmUoYEAvYXNzZXRzL2ltZy9wdW1wbWFwL2xvYy5wbmdgKX0pIG5vLXJlcGVhdGANCiAgICAgICAgaWNvbi5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICcxMDAlJw0KICAgICAgICBpY29uLnN0eWxlLmhlaWdodCA9ICcxNXB4Jw0KICAgICAgICBpY29uLnN0eWxlLndpZHRoID0gJzE1cHgnDQogICAgICAgIGljb24uc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcicNCg0KICAgICAgICBib3guYXBwZW5kQ2hpbGQoY29udGVudCkNCiAgICAgICAgYm94LmFwcGVuZENoaWxkKGljb24pDQoNCiAgICAgICAgbGV0IG1hcmtlciA9IG5ldyBtYXBib3hnbC5NYXJrZXIoYm94KS5zZXRMbmdMYXQoW2l0ZW0ubG9uLCBpdGVtLmxhdF0pLmFkZFRvKG1hcE9iai5tYXApDQoNCiAgICAgICAgbWFya2VyLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICB0aGlzLmNvbmZpZyA9IHRydWUNCiAgICAgICAgfSkNCiAgICAgIH0pDQoNCiAgICAgIG1hcE9iai5tYXAub24oJ2NsaWNrJywgKGUpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZQ0KICAgICAgICB0aGlzLmdldE5hbWUoZSkNCiAgICAgICAgdGhpcy5hcnJvd1RvKHRoaXMuaW5kZXgpDQogICAgICAgIGlmICghdGhpcy5jb25maWcpIHJldHVybg0KICAgICAgICBsZXQgeyBsYXQsIGxuZyB9ID0gZS5sbmdMYXQNCiAgICAgICAgbWFwT2JqLm1hcC5mbHlUbyh7IGNlbnRlcjogW2xuZywgbGF0XSB9KQ0KICAgICAgICB0aGlzLmNvbmZpZyA9IGZhbHNlDQogICAgICB9KQ0KICAgIH0sDQogIH0sDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA8IA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/BZList/pumpMap","sourcesContent":["<template>\r\n  <div class=\"pump-map\">\r\n    <fm-nav-bar title=\"地图\" left-arrow @click-left=\"$router.replace('/BZList')\">\r\n    </fm-nav-bar>\r\n    <!-- 地图 -->\r\n    <MapComp ref=\"mymap\" :ifInspection=\"true\" @mapLoaded=\"mapLoaded\"></MapComp>\r\n    <div class=\"center\" v-if=\"show\">\r\n      <!-- 供水卡片 -->\r\n      <div class=\"gsCard\" v-if=\"pumpType=='供水'\">\r\n        <div class=\"loading\" v-if=\"!loaded\">\r\n          <fm-loading size=\"15px\" type=\"spinner\" color=\"white\" />\r\n        </div>\r\n        <div v-else>\r\n          <div class=\"cardText\">\r\n            {{pumpName}}\r\n          </div>\r\n          <div class=\"row\">\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/GsTag.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.runNum !=null?liveData.pumpState.runNum: '--'}}</div>\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/iconRed.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.alarmNum!=null?liveData.pumpState.alarmNum: '--'}}</div>\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/iconGrey.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.offNum !=null?liveData.pumpState.offNum: '--'}}</div>\r\n          </div>\r\n          <!-- 表头 -->\r\n          <div class=\"list\">\r\n            <div class=\"chartCell\">\r\n              <fm-divider class=\"divider\" />\r\n              <div class=\"chartHeader\">\r\n                <div class=\"chartHeaderText\"></div>\r\n                <div class=\"chartHeaderText\">进水</div>\r\n                <div class=\"chartHeaderText\">出水</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"chartCell\" v-for=\"(item,index) in  liveData && liveData.waterPressure\" :key=\"index\">\r\n              <fm-divider class=\"divider\" />\r\n              <div class=\"chartHeader\">\r\n                <div class=\"chartTitelText\">{{item.monitorItem !=null?item.monitorItem: '--'}}</div>\r\n                <div class=\"chartHeaderText\">{{item.inner !=null?item.inner: '--'}}</div>\r\n                <div class=\"chartHeaderText\">{{item.outer!=null?item.outer: '--'}}</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"chartCell\" v-for=\"(item,index) in liveData && liveData.waterQuality\" :key=\"index+100\">\r\n              <fm-divider class=\"divider\" />\r\n              <div class=\"chartHeader\">\r\n                <div class=\"chartTitelText\">{{item.monitorItem !=null?item.monitorItem: '--'}}</div>\r\n                <div class=\"chartHeaderText\">{{item.inner !=null?item.inner: '--'}}</div>\r\n                <div class=\"chartHeaderText\">{{item.outer!=null?item.outer: '--'}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 雨水卡片 -->\r\n      <div class=\"rainCard\" v-else-if=\"pumpType=='雨水'\">\r\n        <div class=\"loading\" v-if=\"!loaded\">\r\n          <fm-loading size=\"15px\" type=\"spinner\" color=\"white\" />\r\n        </div>\r\n        <div v-else>\r\n          <div class=\"cardText\">\r\n            {{pumpName}}\r\n          </div>\r\n          <div class=\"row\">\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/RnTag.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.runNumh !=null?liveData.pumpState.runNumh: '--'}}</div>\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/iconRed.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.alarmNum !=null?liveData.pumpState.alarmNum: '--'}}</div>\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/iconGrey.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.offNum !=null?liveData.pumpState.offNum: '--'}}</div>\r\n          </div>\r\n          <div class=\"output\">\r\n            出水流量：{{liveData.waterPressure[1].outer}} m³/h\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 污水卡片 -->\r\n      <div class=\"rainCard\" v-else>\r\n        <div class=\"loading\" v-if=\"!loaded\">\r\n          <fm-loading size=\"15px\" type=\"spinner\" color=\"white\" />\r\n        </div>\r\n        <div v-else>\r\n          <div class=\"cardText\">\r\n            {{pumpName}}\r\n          </div>\r\n          <div class=\"row\">\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/WsTag.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.runNumh !=null?liveData.pumpState.runNumh: '--'}}</div>\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/iconRed.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.alarmNum !=null?liveData.pumpState.alarmNum: '--'}}</div>\r\n            <img class=\"cardIcon\" src=\"@/assets/img/pumpmap/iconGrey.png\">\r\n            <div class=\"chartHeaderText\">{{liveData.pumpState.offNum !=null?liveData.pumpState.offNum: '--'}}</div>\r\n          </div>\r\n          <div class=\"output\">\r\n            出水流量：{{liveData.waterPressure[1].outer}} m³/h\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n    <!-- 底部tab -->\r\n    <div>\r\n      <div class=\"center\">\r\n        <div class=\"card\">\r\n          <div>\r\n            <fm-swipe class=\"my-swipe\" ref=\"swipper\" @change=\"onChange\" :show-indicators=\"false\">\r\n              <fm-swipe-item v-for=\"(item,index) in tableData\" :key=\"index\">\r\n                <div class=\"item\">\r\n                  <div class=\"item-tag\" @click=\"goDetail(AllList[index])\">\r\n                    <img class=\"img\" src=\"@/assets/img/pumpmap/mapTag.png\">\r\n                    <img class=\"imgs\" src=\"@/assets/img/pumpmap/tagIcon.png\">\r\n                    <span class=\"font\">{{liveData.alarmNum}}</span>\r\n                  </div>\r\n                  <img class=\"arrowButton\" src=\"@/assets/img/pumpmap/arrowBack.png\" @click=\"arrowBack\">\r\n                  <div class=\"item-img\" @click=\"goDetail(AllList[index])\">\r\n                    <img class=\"imgList\" :src=\"imgs[index]\">\r\n                  </div>\r\n                  <div class=\"item-content\" @click=\"goDetail(AllList[index])\">\r\n                    <div class=\"item-content-icon\">\r\n                      <img class=\"icon\" src=\"@/assets/img/pumpmap/supercharge-pump@2x.png\">\r\n                      <div class=\"cardTitle\">{{item.pumpName}}</div>\r\n                      <fm-tag class=\"cardTag\" round\r\n                        :color=\"item.pumpType=='供水'?'#2D7EFF':item.pumpType=='污水'?'#91510A':'#40BB5A'\">{{item.pumpType}}\r\n                      </fm-tag>\r\n                    </div>\r\n                    <div class=\"item-content-text\">\r\n                      <img class=\"icon\" src=\"@/assets/img/BZList/location.png\">\r\n                      <div class=\"cardText\">{{item.address==''?'未获取到位置':item.address}}</div>\r\n                    </div>\r\n                  </div>\r\n                  <img class=\"arrowButton\" src=\"@/assets/img/pumpmap/arrow.png\" @click=\"arrow\">\r\n                </div>\r\n              </fm-swipe-item>\r\n            </fm-swipe>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MapComp from '@/views/inspectMap/index.vue'\r\nimport request from '@/utils/request'\r\nimport mapboxgl from 'mapbox-gl'\r\nimport { pumpInfoPage, getLiveData } from './api'\r\n\r\nconst mapObj = {\r\n  map: null,\r\n  mapInstance: null,\r\n}\r\n\r\nexport default {\r\n  components: { MapComp, request },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      loaded: false,\r\n      pumpName: '',\r\n      pumpType: '',\r\n      imgUrl: '',\r\n      imgs: [],\r\n      tableData: [],\r\n      liveData: {},\r\n      allData: [],\r\n      index: 0,\r\n      AllList: [],\r\n      GsList: [],\r\n      WsList: [],\r\n      RnList: [],\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.queryInfo()\r\n    this.getData()\r\n  },\r\n  mounted() {\r\n    //当前定位图片\r\n    mapObj.loadImage(\r\n      require('@/assets/img/pumpmap/loc.png'),\r\n      function (error, image) {\r\n        if (error) throw error\r\n        that.map.addImage('mark', image)\r\n      }\r\n    )\r\n  },\r\n  methods: {\r\n    arrow() {\r\n      this.$refs.swipper.next()\r\n    },\r\n    arrowBack() {\r\n      this.$refs.swipper.prev()\r\n    },\r\n    arrowTo(index) {\r\n      this.$refs.swipper.swipeTo(index)\r\n    },\r\n    onChange(index) {\r\n      this.tableData.forEach((item, itemIndex) => {\r\n        if (itemIndex === index && item.lon != null && item.lat != null) {\r\n          this.show = true\r\n          this.getDataByName(item.pumpName)\r\n          mapObj.map.flyTo({ center: [item.lon, item.lat] })\r\n        }\r\n      })\r\n    },\r\n    //泵站分页查询\r\n    async queryInfo() {\r\n      let query = {\r\n        pageIndex: 1,\r\n        pageSize: 15,\r\n      }\r\n      const {\r\n        data: { records },\r\n      } = await pumpInfoPage(query)\r\n      this.tableData = records\r\n      console.log(this.tableData)\r\n      this.tableData.forEach((item) => {\r\n        this.getLiveData(item.id)\r\n        this.getImg(item.imageId)\r\n      });\r\n    },\r\n    //获取图片\r\n    getImg(imgToken) {\r\n      this.imgUrl = imgToken ? '/api/sys-storage/download_image?f8s=' + imgToken : null\r\n      this.imgs.push(this.imgUrl)\r\n    },\r\n    // 获取厂站列表数据\r\n    getData() {\r\n      request({\r\n        url: '/xasw-pump/pump/app/list',\r\n        method: 'get',\r\n        pumpType: '供水',\r\n      }).then((res) => {\r\n        this.AllList = this.AllList.concat(res.data)\r\n        this.AllList.forEach(element => {\r\n          element.pumpType == '供水' ?\r\n            this.GsList = this.GsList.concat(element) :\r\n            element.pumpType == '污水' ?\r\n              this.WsList = this.WsList.concat(element) :\r\n              this.RnList = this.RnList.concat(element)\r\n        });\r\n      }).finally(() => {\r\n      })\r\n    },\r\n    // 跳转详情页\r\n    goDetail(tappedObject) {\r\n      this.AllList != '' ?\r\n        this.$router.push({\r\n          path: '/BZList/BZdetail',\r\n          query: {\r\n            GsData: this.GsList,\r\n            WsData: this.WsData,\r\n            RnData: this.RnData,\r\n            tappedObject: tappedObject,\r\n          }\r\n        }) :\r\n        console.log('列表是空的')\r\n    },\r\n    //获取地图元素中的泵站名称\r\n    getName(e) {\r\n      if (e.originalEvent.srcElement.innerText != '' && e.originalEvent.srcElement.innerText != null) {\r\n        this.show = true\r\n        this.pumpName = e.originalEvent.srcElement.innerText\r\n        this.getDataByName(e.originalEvent.srcElement.innerText)\r\n        this.getIndex(e.originalEvent.srcElement.innerText)\r\n      }\r\n      else if (e.originalEvent.srcElement.id != '' && e.originalEvent.srcElement.id != null) {\r\n        this.show = true\r\n        this.pumpName = e.originalEvent.srcElement.id\r\n        this.getDataByName(e.originalEvent.srcElement.id)\r\n        this.getIndex(e.originalEvent.srcElement.id)\r\n      }\r\n      else {\r\n        this.show = false\r\n      }\r\n    },\r\n    //用泵站名称获取对应id\r\n    getDataByName(name) {\r\n      let temp\r\n      this.pumpName = name\r\n      this.tableData.forEach((item) => {\r\n        if (name == item.pumpName) {\r\n          temp = item.id\r\n          this.pumpType = item.pumpType\r\n        }\r\n      })\r\n      this.getLiveData(temp)\r\n    },\r\n    getIndex(name) {\r\n      this.tableData.forEach((item, index) => {\r\n        if (name == item.pumpName) {\r\n          this.index = index\r\n        }\r\n      })\r\n    },\r\n    //获取实时数据\r\n    getLiveData(id) {\r\n      this.loaded = false\r\n      request({\r\n        url: `/xasw-pump/pump/app/monitoringAlarm`,\r\n        method: \"get\",\r\n        params: {\r\n          pumpId: id\r\n        },\r\n      }).then((res) => {\r\n        this.liveData = res.data\r\n        this.allData.push(this.liveData)\r\n        this.loaded = true\r\n      })\r\n    },\r\n    //地图初始化\r\n    async mapLoaded(mapInstance) {\r\n      mapObj.mapInstance = mapInstance\r\n      mapObj.map = mapInstance.map\r\n\r\n      this.tableData.forEach((item) => {\r\n        if (!item.pumpIcon) return\r\n        let box = document.createElement('div')\r\n        box.className = 'pump-map-item'\r\n        box.style.display = 'flex'\r\n        box.style.flexDirection = 'column'\r\n        box.style.alignItems = 'center'\r\n\r\n        let content = document.createElement('div')\r\n        content.className = 'pump-map-text'\r\n        content.innerText = item.pumpName\r\n        // content.click=this.onClick(item.pumpName)\r\n        content.style.backgroundColor = 'none'\r\n        content.style.color = 'none'\r\n        content.style.textAlign = 'center'\r\n\r\n        let icon = document.createElement('div')\r\n        icon.className = 'pump-map-icon'\r\n        icon.id = item.pumpName\r\n        icon.style.background = `url(${require(`@/assets/img/pumpmap/loc.png`)}) no-repeat`\r\n        icon.style.backgroundSize = '100%'\r\n        icon.style.height = '15px'\r\n        icon.style.width = '15px'\r\n        icon.style.textAlign = 'center'\r\n\r\n        box.appendChild(content)\r\n        box.appendChild(icon)\r\n\r\n        let marker = new mapboxgl.Marker(box).setLngLat([item.lon, item.lat]).addTo(mapObj.map)\r\n\r\n        marker.getElement().addEventListener('click', () => {\r\n          this.config = true\r\n        })\r\n      })\r\n\r\n      mapObj.map.on('click', (e) => {\r\n        console.log(e)\r\n        this.loaded = false\r\n        this.getName(e)\r\n        this.arrowTo(this.index)\r\n        if (!this.config) return\r\n        let { lat, lng } = e.lngLat\r\n        mapObj.map.flyTo({ center: [lng, lat] })\r\n        this.config = false\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style  lang=\"less\" scoped>\r\n.pump-map {\r\n  position: relative;\r\n  height: 100%;\r\n  overflow: hidden;\r\n\r\n  .pump-map-item {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n\r\n  .pump-map-icon {\r\n    width: 60px;\r\n    height: 60px;\r\n    text-align: center;\r\n  }\r\n\r\n  .pump-map-text {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    text-align: center;\r\n    padding: 0 10px;\r\n  }\r\n}\r\n\r\n.cardTitle {\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  max-width: 200px;\r\n  font-size: 25px;\r\n  line-height: 25px;\r\n  height: 25px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.my-swipe .fm-swipe-item {\r\n  font-size: 20px;\r\n  line-height: 212px;\r\n  height: 100%;\r\n  text-align: center;\r\n  background-color: none;\r\n}\r\n\r\n.card {\r\n  position: absolute;\r\n  bottom: 50px;\r\n  width: 690px;\r\n  height: 212px;\r\n  background-color: white;\r\n  border-radius: 20px;\r\n  box-shadow: 0px 8px 20px 0px #B4C5E2;\r\n  overflow: hidden;\r\n  z-index: 99;\r\n}\r\n\r\n/deep/ .cell-line-size {\r\n  line-height: 4px;\r\n}\r\n\r\n.cardTag {\r\n  justify-content: center;\r\n  border: none;\r\n  color: white;\r\n  height: 30px;\r\n  width: 50px;\r\n  font-size: 15px;\r\n}\r\n\r\n.gsCard {\r\n  position: absolute;\r\n  top: 400px;\r\n  width: 300px;\r\n  height: 400px;\r\n  background-color: #000000;\r\n  border-radius: 10px;\r\n  opacity: 0.7;\r\n  overflow: hidden;\r\n  padding: 20px;\r\n  z-index: 399;\r\n}\r\n\r\n.rainCard {\r\n  position: absolute;\r\n  top: 600px;\r\n  width: 300px;\r\n  height: 200px;\r\n  background-color: #000000;\r\n  border-radius: 10px;\r\n  opacity: 0.7;\r\n  overflow: hidden;\r\n  padding: 20px;\r\n  z-index: 399;\r\n}\r\n\r\n.cardIcon {\r\n  margin-top: 20px;\r\n  height: 40px;\r\n}\r\n\r\n.list {\r\n  overflow-x: hidden;\r\n  overflow-y: scroll;\r\n  height: 300px;\r\n}\r\n\r\n.center {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.row {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: baseline;\r\n}\r\n\r\n.cardText {\r\n  display: flex;\r\n  color: #FFFFFF;\r\n  font-size: 30px;\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  overflow: hidden;\r\n  max-width: 100%;\r\n  text-overflow: ellipsis;\r\n  align-items: center;\r\n}\r\n\r\n.output {\r\n  color: #FFFFFF;\r\n  margin-top: 50px;\r\n  font-size: 20px;\r\n  margin-left: 10px;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.divider {\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.tag {\r\n  background-color: black;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 10%;\r\n}\r\n\r\n.img {\r\n  position: absolute;\r\n  height: 30px;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n\r\n.icon {\r\n  height: 30px;\r\n}\r\n\r\n.iconText {\r\n  position: absolute;\r\n  color: black;\r\n  height: 20px;\r\n  right: 10px;\r\n  top: 0px;\r\n}\r\n\r\n.chartCell {\r\n  background-color: #000000;\r\n  opacity: 0.7;\r\n}\r\n\r\n.loading {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 40%;\r\n}\r\n\r\n.chartHeader {\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-top: 10px;\r\n}\r\n\r\n.chartHeaderText {\r\n  color: white;\r\n  width: 100%;\r\n  font-size: 14px;\r\n  text-align: center;\r\n}\r\n\r\n.arrowButton {\r\n  height: 22px;\r\n}\r\n\r\n.group {\r\n  background-color: #000000;\r\n  opacity: 0.7;\r\n}\r\n\r\n.chartTitelText {\r\n  color: white;\r\n  width: 100%;\r\n  font-size: 14px;\r\n  text-align: left;\r\n}\r\n\r\n.text {\r\n  z-index: 1;\r\n}\r\n\r\n.imgList {\r\n  width: 232px;\r\n  height: 132px;\r\n  border-radius: 18px;\r\n}\r\n\r\n.item {\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: white;\r\n  height: 212px;\r\n  box-shadow: 0px 8px 20px 0px rgba(180, 197, 226, 1);\r\n  border-radius: 16px;\r\n  padding: 0 34px 0 24px;\r\n\r\n  .item-tag {\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    width: 100px;\r\n    height: 40px;\r\n    background-color: #fff;\r\n\r\n    .img {\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n\r\n    .imgs {\r\n      width: 20px;\r\n      height: 20px;\r\n      z-index: 1;\r\n    }\r\n\r\n    .font {\r\n      font-size: 14px;\r\n      z-index: 1;\r\n      color: white;\r\n    }\r\n  }\r\n\r\n  .lableText {\r\n    color: #2D7EFF;\r\n    font-weight: 400;\r\n    font-size: 14pt;\r\n  }\r\n\r\n  .item-img {\r\n    width: 232px;\r\n    height: 132px;\r\n  }\r\n\r\n  .item-content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    width: 380px;\r\n    height: 132px;\r\n    background-color: #eee;\r\n\r\n    .item-content-icon {\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: start;\r\n      align-items: center;\r\n      height: 65px;\r\n      background-color: #fff;\r\n    }\r\n\r\n    .item-content-text {\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: start;\r\n      align-items: center;\r\n      height: 70px;\r\n      line-height: 30px;\r\n      overflow: hidden;\r\n      background-color: #fff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}