{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\ProblemReport\\addProblemIndex.vue?vue&type=style&index=0&id=f37168e4&lang=less&scoped=true","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\ProblemReport\\addProblemIndex.vue","mtime":1705912915810},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovLyBAaW1wb3J0ICcvZmtzLW1vYmlsZS1saWIvc3JjL2Fzc2V0cy9mbS1pY29uL2ZtLWljb24uY3NzJzsNCi5tYWluIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjNmNCAhaW1wb3J0YW50Ow0KICBoZWlnaHQ6IDEwMCU7DQp9DQoubWFpbi1jb250YWluZXIgew0KICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDIzMHB4KTsNCiAgb3ZlcmZsb3c6IGF1dG87DQp9DQouYm90dG9tIHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICBib3R0b206IDBweDsNCiAgbGVmdDogMHB4Ow0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMzZweDsNCiAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgLmJvdHRvbS1kaXYgew0KICAgIG1hcmdpbi10b3A6IDIwcHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIHdpZHRoOiAzNzBweDsNCiAgICBmbG9hdDogbGVmdDsNCiAgICBoZWlnaHQ6IDg4cHg7DQogICAgbGluZS1oZWlnaHQ6IDg4cHg7DQogICAgZm9udC1zaXplOiAzMnB4Ow0KICAgIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLVJlZ3VsYXIsIFBpbmdGYW5nIFNDOw0KICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgLmNhbmNlbCB7DQogICAgICB3aWR0aDogOTAlOw0KICAgICAgYm9yZGVyLXJhZGl1czogNDRweDsNCiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMxYjY3ZDg7DQogICAgICBjb2xvcjogIzFiNjdkODsNCiAgICB9DQogICAgLnN1Ym1pdCB7DQogICAgICB3aWR0aDogOTAlOw0KICAgICAgYm9yZGVyLXJhZGl1czogNDRweDsNCiAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgYmFja2dyb3VuZDogIzFiNjdkODsNCiAgICB9DQogIH0NCn0NCi9kZWVwLy5mbS1maWVsZF9fY29udHJvbCB7DQogIHRleHQtYWxpZ246IHJpZ2h0ICFpbXBvcnRhbnQ7DQp9DQovZGVlcC8uZm0tZmllbGxkX2Vycm9yLW1lc3NhZ2Ugew0KICB0ZXh0LWFsaWduOiByaWdodCAhaW1wb3J0YW50Ow0KfQ0K"},{"version":3,"sources":["addProblemIndex.vue"],"names":[],"mappings":";AAgkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addProblemIndex.vue","sourceRoot":"src/views/ProblemReport","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <fm-nav-bar title=\"问题上报\" left-arrow @click-left=\"$router.go(-1)\"></fm-nav-bar>\r\n    <div class=\"main-container\">\r\n      <fm-form @submit=\"onFormSubmit\" @failed=\"onFailed\">\r\n        <fm-field\r\n          ref=\"formData\"\r\n          readonly\r\n          clickable\r\n          name=\"picker\"\r\n          required\r\n          :rules=\"[{ required: true, message: '请问题来源问题来源' }]\"\r\n          :value=\"defectFrom\"\r\n          label=\"问题来源\"\r\n          placeholder=\"点击选择\"\r\n          input-align=\"right\"\r\n          @click=\"sourceShowPicker = true\"\r\n        />\r\n        <fm-popup :visible.sync=\"sourceShowPicker\" position=\"bottom\">\r\n          <fm-picker\r\n            show-toolbar\r\n            :columns=\"sourceColumns\"\r\n            @confirm=\"sourceOnConfirm\"\r\n            @cancel=\"sourceShowPicker = false\"\r\n          />\r\n        </fm-popup>\r\n        <fm-field\r\n          name=\"radio\"\r\n          required\r\n          input-align=\"right\"\r\n          :rules=\"[{ required: true, message: '请选择紧急程度' }]\"\r\n          label=\"紧急程度\"\r\n        >\r\n          <template #input>\r\n            <fm-radio-group v-model=\"priority\" direction=\"horizontal\">\r\n              <fm-radio name=\"0\" @click=\"selectPriority('0')\">紧急</fm-radio>\r\n              <fm-radio name=\"1\" @click=\"selectPriority('1')\">优先</fm-radio>\r\n              <fm-radio name=\"2\" @click=\"selectPriority('2')\">一般</fm-radio>\r\n            </fm-radio-group>\r\n          </template>\r\n        </fm-field>\r\n        <fm-field\r\n          v-model=\"formData.road_name\"\r\n          name=\"问题位置\"\r\n          label=\"问题位置\"\r\n          placeholder=\"回填\"\r\n        />\r\n        <fm-field v-model=\"formData.bigType\" name=\"业务类型\" label=\"业务类型\" placeholder=\"回填\" />\r\n        <fm-field v-model=\"formData.code\" name=\"设施编号\" label=\"设施编号\" placeholder=\"回填\" />\r\n        <fm-field\r\n          v-model=\"formData.smallType\"\r\n          name=\"对象类型\"\r\n          label=\"对象类型\"\r\n          placeholder=\"回填\"\r\n        />\r\n        <fm-field\r\n          readonly\r\n          clickable\r\n          name=\"picker\"\r\n          :value=\"faultTypes\"\r\n          label=\"问题类型\"\r\n          required\r\n          placeholder=\"点击选择\"\r\n          input-align=\"right\"\r\n          :rules=\"[{ required: true, message: '请选择问题类型' }]\"\r\n          @click=\"typeShowPicker = true\"\r\n        />\r\n        <fm-popup :visible.sync=\"typeShowPicker\" position=\"bottom\">\r\n          <fm-picker\r\n            show-toolbar\r\n            :columns=\"typeColumns\"\r\n            @confirm=\"typeOnConfirm\"\r\n            @cancel=\"typeShowPicker = false\"\r\n          />\r\n        </fm-popup>\r\n        <fm-field\r\n          v-if=\"type\"\r\n          readonly\r\n          clickable\r\n          name=\"picker\"\r\n          :value=\"faultDetail\"\r\n          label=\"故障明细\"\r\n          placeholder=\"点击选择\"\r\n          @click=\"fixShowPicker = true\"\r\n        />\r\n        <fm-popup :visible.sync=\"fixShowPicker\" position=\"bottom\">\r\n          <fm-picker\r\n            show-toolbar\r\n            :columns=\"fixColumns\"\r\n            @confirm=\"fixOnConfirm\"\r\n            @cancel=\"fixShowPicker = false\"\r\n          />\r\n        </fm-popup>\r\n        <fm-field\r\n          v-model=\"questionDescribe\"\r\n          rows=\"5\"\r\n          autosize\r\n          label=\"现场描述\"\r\n          type=\"textarea\"\r\n          maxlength=\"300\"\r\n          placeholder=\"请输入现场描述\"\r\n          show-word-limit\r\n        />\r\n        <uploader\r\n          :wpgHeader=\"wpgHeader\"\r\n          label=\"多媒体附件\"\r\n          v-model=\"attachment\"\r\n          ref=\"files\"\r\n          @fileChange=\"(recall) => fileChange1(recall, '',files)\"\r\n          style=\"width: 100%\"\r\n        >\r\n        </uploader>\r\n        <fm-field\r\n          name=\"radio\"\r\n          label=\"处理方式\"\r\n          required\r\n          :rules=\"[{ required: true, message: '请选择处理方式' }]\"\r\n          input-align=\"right\"\r\n        >\r\n          <template #input>\r\n            <fm-radio-group v-model=\"handleType\" direction=\"horizontal\">\r\n              <fm-radio name=\"上报负责人\" @click=\"select('上报负责人')\">上报负责人</fm-radio>\r\n              <fm-radio name=\"派维修工单\" @click=\"select('派维修工单')\">派维修工单</fm-radio>\r\n              <fm-radio name=\"上报客服中心\" @click=\"select('上报客服中心')\">上报客服中心</fm-radio>\r\n              <fm-radio name=\"直接处理\" @click=\"select('直接处理')\">直接处理</fm-radio>\r\n            </fm-radio-group>\r\n          </template>\r\n        </fm-field>\r\n        <fm-field\r\n          v-if=\"handle\"\r\n          v-model=\"handleRemark\"\r\n          rows=\"5\"\r\n          autosize\r\n          label=\"处理措施\"\r\n          type=\"textarea\"\r\n          maxlength=\"300\"\r\n          placeholder=\"请输入处理措施\"\r\n          show-word-limit\r\n        />\r\n\r\n        <uploader\r\n          v-if=\"handle\"\r\n          :wpgHeader=\"wpgHeader\"\r\n          label=\"处理后照片\"\r\n          v-model=\"handleImgs\"\r\n          ref=\"attachment\"\r\n          @fileChange=\"(recall) => fileChange(recall, '', handleImgs)\"\r\n          style=\"width: 100%\"\r\n        >\r\n        </uploader>\r\n        <selectUser\r\n          v-if=\"repair\"\r\n          title=\"运维负责人\"\r\n          :userName=\"creatorName\"\r\n          :userFullname=\"creatorfullName\"\r\n          v-model=\"ticketDispatchUserIds\"\r\n          :required=\"true\"\r\n          @change=\"getChange\"\r\n          placeholder=\"请选择运维负责人\"\r\n        />\r\n        <selectUser\r\n          v-if=\"!repair\"\r\n          title=\"负责人\"\r\n          @change=\"getChange\"\r\n          :userName=\"creatorName\"\r\n          :userFullname=\"creatorfullName\"\r\n          v-model=\"ticketDispatchUserIds\"\r\n          :required=\"true\"\r\n          placeholder=\"请选择负责人\"\r\n        />\r\n        <fm-field v-model=\"creatorName\" name=\"上报人\" label=\"上报人\" placeholder=\"回填\" />\r\n        <fm-field v-model=\"createDate\" name=\"上报时间\" label=\"上报时间\" placeholder=\"回填\" />\r\n        <div class=\"bottom\">\r\n          <div class=\"bottom-div\">\r\n            <fm-button native-type=\"button\" class=\"cancel\" @click=\"concal\">取消</fm-button>\r\n          </div>\r\n          <div class=\"bottom-div\">\r\n            <fm-button class=\"submit\" native-type=\"submit\">提交</fm-button>\r\n          </div>\r\n        </div>\r\n      </fm-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Uploader from './upload/Uploader'\r\nimport { ENUM } from '@/store/State/stateTypes'\r\nimport selectUser from '@/components/select-user/index.vue'\r\nimport axios from 'axios'\r\nimport {\r\n  Form,\r\n  Field,\r\n  NavBar,\r\n  Search,\r\n  Toast,\r\n  Cell,\r\n  CellGroup,\r\n  PullRefresh,\r\n  List,\r\n  Sidebar,\r\n  SidebarItem,\r\n  SwipeCell,\r\n  Button,\r\n  NoticeBar,\r\n  Icon,\r\n  Dialog,\r\n} from 'fawkes-mobile-lib'\r\n\r\nexport default {\r\n  name: 'Inspection',\r\n  components: {\r\n    Uploader,\r\n    selectUser,\r\n    [Form.name]: Form,\r\n    [Field.name]: Field,\r\n    [NavBar.name]: NavBar,\r\n    [Search.name]: Search,\r\n    [Toast.name]: Toast,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [PullRefresh.name]: PullRefresh,\r\n    [List.name]: List,\r\n    [Sidebar.name]: Sidebar,\r\n    [SidebarItem.name]: SidebarItem,\r\n    [SwipeCell.name]: SwipeCell,\r\n    [Button.name]: Button,\r\n    [NoticeBar.name]: NoticeBar,\r\n    [Icon.name]: Icon,\r\n    [Dialog.name]: Dialog,\r\n  },\r\n  data() {\r\n    return {\r\n      attachment: '',\r\n      files:[],\r\n      handleRemark: '',\r\n      handleImgs: [],\r\n      wpgHeader: {}, //上传相关\r\n      handleType: '',\r\n      questionDescribe: '',\r\n      defectFrom: '',\r\n      priority: '',\r\n      faultTypes: '',\r\n      ticketDispatchUserIds: '',\r\n      creatorName: '',\r\n      creatorfullName: '',\r\n      createDate: '',\r\n      faultDetail: '',\r\n      header: {},\r\n      token: '',\r\n      formData: {},\r\n      upTime: '',\r\n      upPerson: '',\r\n      repair: false,\r\n      handle: false,\r\n      type: false,\r\n      uploader: [{ url: '/static/img/leaf.jpg' }],\r\n      radio: '1',\r\n      fixShowPicker: false,\r\n      typeShowPicker: false,\r\n      sourceShowPicker: false,\r\n      sourceColumns: ['巡检', '客服投诉', '养护', '监护', '填报'],\r\n      typeColumns: [\r\n        '违规排放',\r\n        '管道周边施工监管',\r\n        '管道破坏',\r\n        '安全隐患',\r\n        '设施故障',\r\n        '漏水爆管',\r\n        '其他',\r\n      ],\r\n      name: '',\r\n      userType: '',\r\n      peopleId: '',\r\n      fixColumns: ['水管鸣叫', '阀门破损', '水表丢失', '水表错位', '水表倒装', '水管滴漏'],\r\n    }\r\n  },\r\n  computed: {\r\n    handleTypeDic() {\r\n      return this.$store.state[ENUM].abnormalHandleType\r\n    },\r\n    handleTypeDicList() {\r\n      let list = []\r\n      if (this.handleTypeDic) {\r\n        this.handleTypeDic.forEach((dic) => {\r\n          list.push(dic['zh-CN'])\r\n        })\r\n      }\r\n      return list\r\n    },\r\n    handleTypeDicListDic() {\r\n      let listDic = {}\r\n      if (this.handleTypeDic) {\r\n        this.handleTypeDic.forEach((dic) => {\r\n          listDic[dic['zh-CN']] = dic.code\r\n        })\r\n      }\r\n      return listDic\r\n    },\r\n    defectFromDic() {\r\n      return this.$store.state[ENUM].defectFrom\r\n    },\r\n    defectFromList() {\r\n      let list = []\r\n      if (this.defectFromDic) {\r\n        this.defectFromDic.forEach((dic) => {\r\n          list.push(dic['zh-CN'])\r\n        })\r\n      }\r\n      return list\r\n    },\r\n    defectFromListDic() {\r\n      let listDic = {}\r\n      if (this.defectFromDic) {\r\n        this.defectFromDic.forEach((dic) => {\r\n          listDic[dic['zh-CN']] = dic.code\r\n        })\r\n      }\r\n      return listDic\r\n    },\r\n    faultTypesDic() {\r\n      return this.$store.state[ENUM].faultTypes\r\n    },\r\n    defectTypeList() {\r\n      let list = []\r\n      if (this.faultTypesDic) {\r\n        this.faultTypesDic.forEach((dic) => {\r\n          list.push(dic['zh-CN'])\r\n        })\r\n      }\r\n      return list\r\n    },\r\n    defectTypeListDic() {\r\n      let listDic = {}\r\n      if (this.faultTypesDic) {\r\n        this.faultTypesDic.forEach((dic) => {\r\n          listDic[dic['zh-CN']] = dic.code\r\n        })\r\n      }\r\n      return listDic\r\n    },\r\n    // 系统字典虽叫defectType，但实际二级为 业务类型/设施类型\r\n    // 业务类型/设施类型\r\n    busDeviceTypeDic() {\r\n      console.log('this.$store.state[ENUM].defectType: ', this.$store.state[ENUM].defectType)\r\n      return this.$store.state[ENUM].defectType\r\n    },\r\n    bigTypeList() {\r\n      let list = []\r\n      if (this.busDeviceTypeDic) {\r\n        this.busDeviceTypeDic.forEach((dic) => {\r\n          list.push(dic['zh-CN'])\r\n        })\r\n      }\r\n      return list\r\n    },\r\n    bigTypeListDic() {\r\n      let listDic = {}\r\n      if (this.busDeviceTypeDic) {\r\n        this.busDeviceTypeDic.forEach((dic) => {\r\n          listDic[dic['zh-CN']] = dic.code\r\n        })\r\n      }\r\n      return listDic\r\n    },\r\n    faultDetailDic() {\r\n      return this.$store.state[ENUM].faultDetail\r\n    },\r\n    faultDetailDicList() {\r\n      let list = []\r\n      if (this.faultDetailDic) {\r\n        this.faultDetailDic.forEach((dic) => {\r\n          list.push(dic['zh-CN'])\r\n        })\r\n      }\r\n      return list\r\n    },\r\n    faultDetailDicListDic() {\r\n      let listDic = {}\r\n      if (this.faultDetailDic) {\r\n        this.faultDetailDic.forEach((dic) => {\r\n          listDic[dic['zh-CN']] = dic.code\r\n        })\r\n      }\r\n      return listDic\r\n    },\r\n  },\r\n  created() {\r\n    this.formData = this.$route.query.msg\r\n    console.log(this.formData)\r\n    console.log(this.formData, '====================')\r\n    this.token = this.$route.query.token\r\n    this.wpgHeader = {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + this.token,\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log('defectFromListDic: ', this.defectFromListDic)\r\n    let time = new Date()\r\n    this.createDate = time.toLocaleString()\r\n    this.creatorName = this.$store.state.userInfo.userName || '' // localStorage.getItem('cs_username')\r\n    this.creatorfullName = this.$store.state.userInfo.userFullname || '' // localStorage.getItem('cs_userfullname')\r\n    console.log('creatorfullName: ', this.$store, this.creatorfullName);\r\n  },\r\n  methods: {\r\n    concal() {},\r\n    // 图片多媒体\r\n    fileChange(recall, mark, rowItem) {\r\n      console.log('rowItem: ', rowItem)\r\n      console.log('mark: ', mark)\r\n      console.log('recall: ', recall)\r\n      // this.fileList = recall.fileList\r\n      console.log('this.fileList: ', this.fileList)\r\n      console.log('this.attachment: ', this.attachment)\r\n      if (recall.res) {\r\n        let formFile = {\r\n          fileUrl: recall.res.resultData.url,\r\n          fileType: recall.res.resultData.suffix,\r\n          fileSize: recall.res.resultData.size,\r\n          fileId: recall.res.resultData.id,\r\n          name: recall.res.resultData.oldName,\r\n          url:\r\n          process.env.VUE_APP_THIRD_REQUEST_URL+'/main/userCenterApi/FileManager/download/' +\r\n            recall.res.resultData.id,\r\n          uid: recall.res.resultData.id,\r\n        }\r\n        this.handleImgs.push(formFile)\r\n        console.log(this.handleImgs,'+++++++++++++++++++++++++++++++++++++++++')\r\n      }\r\n    },\r\n    fileChange1(recall, mark, rowItem) {\r\n      console.log('rowItem: ', rowItem)\r\n      console.log('mark: ', mark)\r\n      console.log('recall: ', recall)\r\n      // this.fileList = recall.fileList\r\n      console.log('this.fileList: ', this.fileList)\r\n      console.log('this.attachment: ', this.attachment)\r\n      if (recall.res) {\r\n        let formFile1 = {\r\n          fileUrl: recall.res.resultData.url,\r\n          fileType: recall.res.resultData.suffix,\r\n          fileSize: recall.res.resultData.size,\r\n          fileId: recall.res.resultData.id,\r\n          name: recall.res.resultData.oldName,\r\n          url:\r\n          process.env.VUE_APP_THIRD_REQUEST_URL+'/main/userCenterApi/FileManager/download/' +\r\n            recall.res.resultData.id,\r\n          uid: recall.res.resultData.id,\r\n        }\r\n        this.files.push(formFile1)\r\n        console.log(this.files,'===================================')\r\n      }\r\n    },\r\n    selectPriority(val) {\r\n      this.priority = val\r\n    },\r\n    getChange(val) {\r\n      this.name = val[0].userFullname\r\n      this.peopleId = val[0].id\r\n      this.userType = val[0].userType\r\n    },\r\n    //提交前 校验未通过\r\n    onFailed() {\r\n      if (\r\n        this.defectFrom == '' ||\r\n        this.priority == '' ||\r\n        this.faultTypes == '' ||\r\n        this.handleType == ''\r\n      ) {\r\n        Toast({\r\n          message: '请检查必填信息',\r\n          position: 'top',\r\n        })\r\n        return\r\n      }\r\n    },\r\n    // 提交\r\n    onFormSubmit() {\r\n      Toast({\r\n        message: '提交中',\r\n        position: 'top',\r\n      })\r\n      console.log(this.formData.properties)\r\n      // 提交按钮\r\n      let params = {\r\n        templateCode: 'abnormal_inform_template',\r\n        title: '问题新增',\r\n        sysSource: 'outwork',\r\n        createType: 'PC',\r\n        latitude: this.formData.lat,\r\n        longitude: this.formData.lng,\r\n        questionDescribe: this.questionDescribe, //现场描述\r\n        address: this.formData.properties.road_name, //问题位置\r\n        formJson: {\r\n          files: this.files,//多媒体\r\n          gridId: this.formData.gridId,\r\n          gridName: this.formData.gridName,\r\n          task_id: this.formData.taskId, //巡检任务ID\r\n          handleImgs: this.handleImgs, //处理后照片\r\n          handleRemark: this.handleRemark, //处理措施\r\n          device_type: [this.formData.bigType, this.formData.smallType], //对象类型\r\n          code: this.formData.code, //设施编号\r\n          handleType: this.handleTypeDicListDic[this.handleType], //处理方式\r\n          defectFrom: this.defectFromListDic[this.defectFrom], //问题来源\r\n          priority: this.priority, //紧急程度\r\n          faultTypes: this.defectTypeListDic[this.faultTypes], //问题类型\r\n          ticketDispatchUserIds: [\r\n            {\r\n              name: this.name, //处理人名称\r\n              id: this.peopleId, //处理人ID\r\n              type: this.userType,\r\n            },\r\n          ], //负责人\r\n          creatorName: this.creatorName, //上报人\r\n          createDate: this.createDate, //上报时间\r\n          faultDetail: this.faultDetailDicListDic[this.faultDetail], //故障明细\r\n        },\r\n      }\r\n      this.createTicket(params)\r\n    },\r\n    createTicket(params) {\r\n      // this.header = {\r\n      //   'Content-Type': 'application/json',\r\n      //   Authorization: 'Bearer ' + this.token,\r\n      // }\r\n      axios({\r\n        url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/outworkapi/ticketClient/create',\r\n        method: 'post',\r\n        data: params,\r\n        headers: this.wpgHeader,\r\n      }).then((res) => {\r\n        console.log('接口创建缺陷工单res:', res)\r\n        if (res.status == 200) {\r\n          Toast.success('提交成功')\r\n          this.formData = {}\r\n          this.$router.go(-1)\r\n        } else {\r\n          Toast.warning('提交失败')\r\n        }\r\n      })\r\n    },\r\n    select(val) {\r\n      if (val == '直接处理') {\r\n        this.handle = true\r\n      } else {\r\n        this.handle = false\r\n      }\r\n      if (val == '派维修工单') {\r\n        this.repair = true\r\n      } else {\r\n        this.repair = false\r\n      }\r\n    },\r\n    typeOnConfirm(value) {\r\n      this.faultTypes = value\r\n      this.typeShowPicker = false\r\n      if (this.faultTypes == '设施故障') {\r\n        this.type = true\r\n      } else {\r\n        this.type = false\r\n      }\r\n    },\r\n    fixOnConfirm(value) {\r\n      this.faultDetail = value\r\n      this.fixShowPicker = false\r\n    },\r\n    sourceOnConfirm(value) {\r\n      this.defectFrom = value\r\n      this.sourceShowPicker = false\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// @import '/fks-mobile-lib/src/assets/fm-icon/fm-icon.css';\r\n.main {\r\n  background-color: #f2f3f4 !important;\r\n  height: 100%;\r\n}\r\n.main-container {\r\n  height: calc(100% - 230px);\r\n  overflow: auto;\r\n}\r\n.bottom {\r\n  position: fixed;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  width: 100%;\r\n  height: 136px;\r\n  background: #ffffff;\r\n  .bottom-div {\r\n    margin-top: 20px;\r\n    text-align: center;\r\n    width: 370px;\r\n    float: left;\r\n    height: 88px;\r\n    line-height: 88px;\r\n    font-size: 32px;\r\n    font-family: PingFangSC-Regular, PingFang SC;\r\n    font-weight: 400;\r\n    .cancel {\r\n      width: 90%;\r\n      border-radius: 44px;\r\n      border: 1px solid #1b67d8;\r\n      color: #1b67d8;\r\n    }\r\n    .submit {\r\n      width: 90%;\r\n      border-radius: 44px;\r\n      color: #ffffff;\r\n      background: #1b67d8;\r\n    }\r\n  }\r\n}\r\n/deep/.fm-field__control {\r\n  text-align: right !important;\r\n}\r\n/deep/.fm-fielld_error-message {\r\n  text-align: right !important;\r\n}\r\n</style>\r\n"]}]}