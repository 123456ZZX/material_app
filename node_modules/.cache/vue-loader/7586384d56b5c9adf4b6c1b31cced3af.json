{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\MeterReading\\SurveyDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\MeterReading\\SurveyDetail.vue","mtime":1705912800041},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgew0KICBOYXZCYXIsDQogIENlbGwsDQogIEZvcm0sDQogIEZpZWxkLA0KICBSYWRpb0dyb3VwLA0KICBSYWRpbywNCiAgTm90aWZ5LA0KICBUb2FzdA0KfSBmcm9tICdmYXdrZXMtbW9iaWxlLWxpYicNCmltcG9ydCB7IHF1ZXJ5VGFza0RldGFpbCwgZ2V0RGljdCwgY29tbWl0VGFzayB9IGZyb20gJy4vYXBpJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdTdXJ2ZXlEZXRhaWwnLA0KICBjb21wb25lbnRzOiB7DQogICAgW05hdkJhci5uYW1lXTogTmF2QmFyLA0KICAgIFtDZWxsLm5hbWVdOiBDZWxsLA0KICAgIFtGb3JtLm5hbWVdOiBGb3JtLA0KICAgIFtGaWVsZC5uYW1lXTogRmllbGQsDQogICAgW1JhZGlvR3JvdXAubmFtZV06IFJhZGlvR3JvdXAsDQogICAgW1JhZGlvLm5hbWVdOiBSYWRpbywNCiAgICBbTm90aWZ5Lm5hbWVdOiBOb3RpZnksDQogICAgW1RvYXN0Lm5hbWVdOiBUb2FzdA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjb3B5U3RhdHVzOiAnMCcsDQogICAgICBib29rQ29kZTogbnVsbCwNCiAgICAgIHBsYW5Db2RlOiBudWxsLA0KICAgICAgdXNlckluZm86IHt9LA0KICAgICAgbWV0ZXJDb2RlTGlzdDogW10sDQogICAgICBtZXRlckluZm9MaXN0OiBbXSwNCiAgICAgIGN1ck1ldGVyQ29kZTogJycsDQogICAgICBjdXJNZXRlckluZm86IHt9LA0KICAgICAgLy/lrZflhbgNCiAgICAgIGNvbXBhbnlEaWN0OiBbXSwNCiAgICAgIGJ1c2luZXNzQ29tcGFueURpY3Q6IFtdLA0KICAgICAgd2F0ZXJUeXBlRGljdDogW10sDQogICAgICBtZXRlckRpY3Q6IFtdLA0KICAgICAgbWV0ZXJCcmFuZERpY3Q6IFtdDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGRpc2FibGVDb21taXQoKSB7DQogICAgICBsZXQgc3RhdGUgPSB0aGlzLmN1ck1ldGVySW5mby5zdGF0ZQ0KICAgICAgbGV0IGNyID0gdGhpcy5jdXJNZXRlckluZm8udW51c3VhbFJlYXNvbg0KICAgICAgaWYgKHN0YXRlID09IDEpIHsNCiAgICAgICAgaWYgKGNyID09ICcnIHx8IGNyID09IG51bGwgfHwgY3IgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8v5omr5o+P5p2h5b2i56CBDQogICAgLy8gc2NhbigpIHsNCiAgICAvLyAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgew0KICAgIC8vICAgICB5dWFuY2h1LnNjYW5uZXIub3BlblNjYW5uZXIoKHJlcykgPT4gew0KICAgIC8vICAgICAgIGlmIChyZXMpIHsNCiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAvLyAgICAgICAgIGdldFRhc2tEZXRhaWwocmVzLmRhdGEuZ3Vlc3RObykNCiAgICAvLyAgICAgICB9DQogICAgLy8gICAgIH0pDQogICAgLy8gICB9IGVsc2Ugew0KICAgIC8vICAgfQ0KICAgIC8vIH0sDQogICAgZ2V0VGFza0RldGFpbChndWVzdE5vKSB7DQogICAgICB0aGlzLnVzZXJJbmZvID0ge30NCiAgICAgIHRoaXMuY3VyTWV0ZXJDb2RlID0gJycNCiAgICAgIHRoaXMubWV0ZXJDb2RlTGlzdCA9IFtdDQogICAgICB0aGlzLmN1ck1ldGVySW5mbyA9IHt9DQogICAgICB0aGlzLm1ldGVySW5mb0xpc3QgPSBbXQ0KICAgICAgcXVlcnlUYXNrRGV0YWlsKHsgZ3Vlc3RObyB9KS50aGVuKGFzeW5jIChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5kYXRhKSB7DQogICAgICAgICAgdGhpcy51c2VySW5mbyA9IHJlcy5kYXRhDQogICAgICAgICAgdGhpcy51c2VySW5mby5jb21wYW55ID0gdGhpcy5maWx0ZXJEaWN0KA0KICAgICAgICAgICAgJ3JldmVudWVfY29tcGFueScsDQogICAgICAgICAgICB0aGlzLnVzZXJJbmZvLmNvbXBhbnkNCiAgICAgICAgICApDQogICAgICAgICAgdGhpcy51c2VySW5mby5idXNpbmVzc0NvbXBhbnkgPSB0aGlzLmZpbHRlckRpY3QoDQogICAgICAgICAgICAncGxhY2Vfb2ZfYnVzaW5lc3MnLA0KICAgICAgICAgICAgdGhpcy51c2VySW5mby5idXNpbmVzc0NvbXBhbnkNCiAgICAgICAgICApDQogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS53YXRlck1ldGVyTGlzdA0KICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHRoaXMubWV0ZXJJbmZvTGlzdCA9IGRhdGENCiAgICAgICAgICAgIHRoaXMuY3VyTWV0ZXJJbmZvID0gZGF0YVswXQ0KICAgICAgICAgICAgdGhpcy5jdXJNZXRlckluZm8udXNpbmdXYXRlclR5cGUgPSB0aGlzLmZpbHRlckRpY3QoDQogICAgICAgICAgICAgICd3YXRlcl91c2VfdHlwZScsDQogICAgICAgICAgICAgIHRoaXMuY3VyTWV0ZXJJbmZvLnVzaW5nV2F0ZXJUeXBlDQogICAgICAgICAgICApDQogICAgICAgICAgICB0aGlzLmN1ck1ldGVySW5mby53YXRlck1ldGVyVHlwZSA9IHRoaXMuZmlsdGVyRGljdCgNCiAgICAgICAgICAgICAgJ3dhdGVyX21ldGVyX3R5cGUnLA0KICAgICAgICAgICAgICB0aGlzLmN1ck1ldGVySW5mby53YXRlck1ldGVyVHlwZQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgdGhpcy5jdXJNZXRlckluZm8ud2F0ZXJNZXRlckJyYW5kID0gdGhpcy5maWx0ZXJEaWN0KA0KICAgICAgICAgICAgICAnd2F0ZXJfbWV0ZXJfYnJhbmQnLA0KICAgICAgICAgICAgICB0aGlzLmN1ck1ldGVySW5mby53YXRlck1ldGVyQnJhbmQNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIHRoaXMuY3VyTWV0ZXJDb2RlID0gZGF0YVswXS5tZXRlck51bQ0KICAgICAgICAgICAgZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMubWV0ZXJDb2RlTGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5tZXRlck51bSwNCiAgICAgICAgICAgICAgICB0ZXh0OiBpdGVtLm1ldGVyTnVtDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9KQ0KDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuJHNldCh0aGlzLmN1ck1ldGVySW5mbywgJ3N0YXRlJywgJzAnKQ0KICAgICAgICB0aGlzLiRzZXQodGhpcy5jdXJNZXRlckluZm8sICd1bnVzdWFsUmVhc29uJywgJycpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy/mmoLlrZjliqDovb3kv6Hmga8NCiAgICBnZXRTdGFnaW5nRGV0YWlsKGd1ZXN0Tm8pIHsNCiAgICAgIHRoaXMudXNlckluZm8gPSB7fQ0KICAgICAgdGhpcy5jdXJNZXRlckNvZGUgPSAnJw0KICAgICAgdGhpcy5tZXRlckNvZGVMaXN0ID0gW10NCiAgICAgIHRoaXMuY3VyTWV0ZXJJbmZvID0ge30NCiAgICAgIHRoaXMubWV0ZXJJbmZvTGlzdCA9IFtdDQogICAgICBxdWVyeVRhc2tEZXRhaWwoeyBndWVzdE5vIH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLmRhdGEpIHsNCiAgICAgICAgICB0aGlzLnVzZXJJbmZvID0gcmVzLmRhdGENCiAgICAgICAgICB0aGlzLnVzZXJJbmZvLmNvbXBhbnkgPSB0aGlzLmZpbHRlckRpY3QoDQogICAgICAgICAgICAncmV2ZW51ZV9jb21wYW55JywNCiAgICAgICAgICAgIHRoaXMudXNlckluZm8uY29tcGFueQ0KICAgICAgICAgICkNCiAgICAgICAgICB0aGlzLnVzZXJJbmZvLmJ1c2luZXNzQ29tcGFueSA9IHRoaXMuZmlsdGVyRGljdCgNCiAgICAgICAgICAgICdwbGFjZV9vZl9idXNpbmVzcycsDQogICAgICAgICAgICB0aGlzLnVzZXJJbmZvLmJ1c2luZXNzQ29tcGFueQ0KICAgICAgICAgICkNCiAgICAgICAgICBsZXQgc2F2ZWRUYXNrcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzYXZlZFRhc2tzJykNCiAgICAgICAgICBsZXQgYWxsVGFzayA9IHNhdmVkVGFza3MgPyBKU09OLnBhcnNlKHNhdmVkVGFza3MpIDogW10NCiAgICAgICAgICBsZXQgY3VyVGFzayA9IGFsbFRhc2suZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgICAgICByZXR1cm4gaXRlbS5wbGFuQ29kZSA9PSB0aGlzLnBsYW5Db2RlDQogICAgICAgICAgfSkNCiAgICAgICAgICBsZXQgZGF0YSA9IGN1clRhc2tbMF0ucGFyYW1MaXN0DQogICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgdGhpcy5tZXRlckluZm9MaXN0ID0gZGF0YQ0KICAgICAgICAgICAgdGhpcy5jdXJNZXRlckluZm8gPSBkYXRhWzBdDQogICAgICAgICAgICB0aGlzLmN1ck1ldGVyQ29kZSA9IGRhdGFbMF0ubWV0ZXJOdW0NCiAgICAgICAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgICB0aGlzLm1ldGVyQ29kZUxpc3QucHVzaCh7DQogICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0ubWV0ZXJOdW0sDQogICAgICAgICAgICAgICAgdGV4dDogaXRlbS5tZXRlck51bQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v54K55Ye75rC06KGo57yW5Y+35YiH5o2i5rC06KGoDQogICAgY2hhbmdlTWV0ZXJDb2RlKGUpIHsNCiAgICAgIGxldCBhcnIgPSB0aGlzLm1ldGVySW5mb0xpc3QuZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLm1ldGVyTnVtID09IHRoaXMuY3VyTWV0ZXJDb2RlDQogICAgICB9KQ0KICAgICAgdGhpcy5jdXJNZXRlckluZm8gPSBhcnJbMF0NCiAgICAgIGxldCBzdGF0ZSA9IHRoaXMuY3VyTWV0ZXJJbmZvLnN0YXRlID8gdGhpcy5jdXJNZXRlckluZm8uc3RhdGUgOiAnMCcNCiAgICAgIGxldCB1bnVzdWFsUmVhc29uID0gdGhpcy5jdXJNZXRlckluZm8udW51c3VhbFJlYXNvbg0KICAgICAgICA/IHRoaXMuY3VyTWV0ZXJJbmZvLnVudXN1YWxSZWFzb24NCiAgICAgICAgOiAnJw0KICAgICAgdGhpcy4kc2V0KHRoaXMuY3VyTWV0ZXJJbmZvLCAnc3RhdGUnLCBzdGF0ZSkNCiAgICAgIHRoaXMuJHNldCh0aGlzLmN1ck1ldGVySW5mbywgJ3VudXN1YWxSZWFzb24nLCB1bnVzdWFsUmVhc29uKQ0KICAgICAgdGhpcy5jdXJNZXRlckluZm8udXNpbmdXYXRlclR5cGUgPSB0aGlzLmZpbHRlckRpY3QoDQogICAgICAgICd3YXRlcl91c2VfdHlwZScsDQogICAgICAgIHRoaXMuY3VyTWV0ZXJJbmZvLnVzaW5nV2F0ZXJUeXBlDQogICAgICApDQogICAgICB0aGlzLmN1ck1ldGVySW5mby53YXRlck1ldGVyVHlwZSA9IHRoaXMuZmlsdGVyRGljdCgNCiAgICAgICAgJ3dhdGVyX21ldGVyX3R5cGUnLA0KICAgICAgICB0aGlzLmN1ck1ldGVySW5mby53YXRlck1ldGVyVHlwZQ0KICAgICAgKQ0KICAgICAgdGhpcy5jdXJNZXRlckluZm8ud2F0ZXJNZXRlckJyYW5kID0gdGhpcy5maWx0ZXJEaWN0KA0KICAgICAgICAnd2F0ZXJfbWV0ZXJfYnJhbmQnLA0KICAgICAgICB0aGlzLmN1ck1ldGVySW5mby53YXRlck1ldGVyQnJhbmQNCiAgICAgICkNCiAgICB9LA0KICAgIGNoYW5nZU1ldGVySW5mbygpIHsNCiAgICAgIHRoaXMubWV0ZXJJbmZvTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgIGlmIChpdGVtLm1ldGVyTnVtID09IHRoaXMuY3VyTWV0ZXJDb2RlKSB7DQogICAgICAgICAgaXRlbSA9IHRoaXMuY3VyTWV0ZXJJbmZvDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBvblN1Ym1pdCgpIHsNCiAgICAgIGxldCBwYXJhbUxpc3QgPSBbXQ0KICAgICAgbGV0IGN1clRpbWUgPSB0aGlzLmdldEN1clRpbWUoKQ0KICAgICAgbGV0IHVpZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjc191c2VySWQnKQ0KICAgICAgdGhpcy5tZXRlckluZm9MaXN0LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgcGFyYW1MaXN0LnB1c2goew0KICAgICAgICAgIHJlZ2lzdGVyTm86IGl0ZW0ucmVnaXN0ZXJObywNCiAgICAgICAgICBtZXRlclRpbWU6IGN1clRpbWUsDQogICAgICAgICAgcGxhbkNvZGU6IHRoaXMucGxhbkNvZGUsDQogICAgICAgICAgYm9va0NvZGU6IHRoaXMuYm9va0NvZGUsDQogICAgICAgICAgc3RhdGU6IGl0ZW0uc3RhdGUgPT0gJzAnID8gJ05PUk1BTCcgOiAnQUJOT1JNQUwnLA0KICAgICAgICAgIHVudXN1YWxSZWFzb246IGl0ZW0udW51c3VhbFJlYXNvbiwNCiAgICAgICAgICByZWFkaW5nUGVyc29uOiB1aWQsDQogICAgICAgICAgdHlwZTogJ1pDQlMnDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgICAgbGV0IG5vdEFsbCA9IGZhbHNlDQogICAgICB0aGlzLm1ldGVySW5mb0xpc3QubWFwKChpdGVtKSA9PiB7DQogICAgICAgIGlmICghaXRlbS5zdGF0ZSkgew0KICAgICAgICAgIG5vdEFsbCA9IHRydWUNCiAgICAgICAgICBOb3RpZnkoew0KICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLA0KICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsDQogICAgICAgICAgICBtZXNzYWdlOiAn6K+35a6M5ZaE5omA5pyJ5rC06KGo5L+h5oGvJw0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgaXRlbS5zdGF0ZSA9PSAnMScgJiYNCiAgICAgICAgICAgIChpdGVtLnVudXN1YWxSZWFzb24gPT0gJycgfHwNCiAgICAgICAgICAgICAgaXRlbS51bnVzdWFsUmVhc29uID09IG51bGwgfHwNCiAgICAgICAgICAgICAgaXRlbS51bnVzdWFsUmVhc29uID09IHVuZGVmaW5lZCkNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIG5vdEFsbCA9IHRydWUNCiAgICAgICAgICAgIE5vdGlmeSh7DQogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywNCiAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnlvILluLjljp/lm6AnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIGlmICghbm90QWxsKSB7DQogICAgICAgIGNvbW1pdFRhc2socGFyYW1MaXN0KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLnN0YXR1cykgew0KICAgICAgICAgICAgaWYgKHRoaXMuY29weVN0YXR1cyA9PSAwKSB7DQogICAgICAgICAgICAgIGxldCBhbGwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlEb3dubG9hZFBsYW4nKQ0KICAgICAgICAgICAgICBsZXQgYWxsVGFzayA9IGFsbCA/IEpTT04ucGFyc2UoYWxsKSA6IFtdDQogICAgICAgICAgICAgIGxldCBvdGhlclRhc2tzID0gYWxsVGFzay5maWx0ZXIoKGl0ZW0pID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5wbGFuQ29kZSAhPSB0aGlzLnBsYW5Db2RlDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdteURvd25sb2FkUGxhbicpDQogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdteURvd25sb2FkUGxhbicsIEpTT04uc3RyaW5naWZ5KG90aGVyVGFza3MpKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgbGV0IGFsbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzYXZlZFRhc2tzJykNCiAgICAgICAgICAgICAgbGV0IGFsbFRhc2sgPSBhbGwgPyBKU09OLnBhcnNlKGFsbCkgOiBbXQ0KICAgICAgICAgICAgICBsZXQgb3RoZXJUYXNrcyA9IGFsbFRhc2suZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ucGxhbkNvZGUgIT0gdGhpcy5wbGFuQ29kZQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc2F2ZWRUYXNrcycpDQogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzYXZlZFRhc2tzJywgSlNPTi5zdHJpbmdpZnkob3RoZXJUYXNrcykpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBOb3RpZnkoeyB0eXBlOiAnc3VjY2VzcycsIGR1cmF0aW9uOiA1MDAsIG1lc3NhZ2U6ICfmj5DkuqTmiJDlip8nIH0pDQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7DQogICAgICAgICAgICAgIG5hbWU6ICdUYXNrSW5kZXgnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBOb3RpZnkoeyB0eXBlOiAnZXJyb3InLCBkdXJhdGlvbjogNTAwLCBtZXNzYWdlOiAn5o+Q5Lqk5aSx6LSlJyB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNhdmUoKSB7DQogICAgICBsZXQgYWxsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ215RG93bmxvYWRQbGFuJykNCiAgICAgIGxldCBzYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzYXZlZFRhc2tzJykNCiAgICAgIGxldCBhbGxUYXNrID0gYWxsID8gSlNPTi5wYXJzZShhbGwpIDogW10NCiAgICAgIGxldCBzYXZlZFRhc2tzID0gc2F2ZWQgPyBKU09OLnBhcnNlKHNhdmVkKSA6IFtdDQogICAgICBsZXQgY3VyVGFzayA9IGFsbFRhc2suZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLnBsYW5Db2RlID09IHRoaXMucGxhbkNvZGUNCiAgICAgIH0pDQogICAgICBsZXQgb3RoZXJUYXNrcyA9IGFsbFRhc2suZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLnBsYW5Db2RlICE9IHRoaXMucGxhbkNvZGUNCiAgICAgIH0pDQogICAgICBsZXQgcGFyYW1MaXN0ID0gW10NCiAgICAgIHRoaXMubWV0ZXJJbmZvTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgIHBhcmFtTGlzdC5wdXNoKHsNCiAgICAgICAgICB3YXRlck1ldGVyQnJhbmQ6IGl0ZW0ud2F0ZXJNZXRlckJyYW5kLA0KICAgICAgICAgIGJvcmU6IGl0ZW0uYm9yZSwNCiAgICAgICAgICByZW1vdGVNb2R1bGVObzogaXRlbS5yZW1vdGVNb2R1bGVObywNCiAgICAgICAgICBtZXRlckluZGV4OiBpdGVtLm1ldGVySW5kZXgsDQogICAgICAgICAgY29ubmVjdGluZ1dlbGxObzogaXRlbS5jb25uZWN0aW5nV2VsbE5vLA0KICAgICAgICAgIHVzaW5nV2F0ZXJUeXBlOiBpdGVtLnVzaW5nV2F0ZXJUeXBlLA0KICAgICAgICAgIGluc3RhbGxBZGRyZXNzOiBpdGVtLmluc3RhbGxBZGRyZXNzLA0KICAgICAgICAgIHdhdGVyTWV0ZXJUeXBlOiBpdGVtLndhdGVyTWV0ZXJUeXBlLA0KICAgICAgICAgIHJlYWRpbmdUaW1lOiBpdGVtLnJlYWRpbmdUaW1lLA0KICAgICAgICAgIG1ldGVyTnVtOiBpdGVtLm1ldGVyTnVtLA0KICAgICAgICAgIHJlZ2lzdGVyTm86IGl0ZW0ucmVnaXN0ZXJObywNCiAgICAgICAgICBwbGFuQ29kZTogdGhpcy5wbGFuQ29kZSwNCiAgICAgICAgICBib29rQ29kZTogdGhpcy5ib29rQ29kZSwNCiAgICAgICAgICBsYXN0UmVhZGluZ0luZGV4OiBpdGVtLm1ldGVySW5kZXgsDQogICAgICAgICAgbGFzdFJlYWRpbmdUaW1lOiBpdGVtLnJlYWRpbmdUaW1lLA0KICAgICAgICAgIHN0YXRlOiBpdGVtLnN0YXRlLA0KICAgICAgICAgIHVudXN1YWxSZWFzb246IGl0ZW0udW51c3VhbFJlYXNvbg0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICAgIGN1clRhc2tbMF0ucGFyYW1MaXN0ID0gcGFyYW1MaXN0DQogICAgICBzYXZlZFRhc2tzLnB1c2goLi4uY3VyVGFzaykNCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdteURvd25sb2FkUGxhbicpDQogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc2F2ZWRUYXNrcycpDQogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbXlEb3dubG9hZFBsYW4nLCBKU09OLnN0cmluZ2lmeShvdGhlclRhc2tzKSkNCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzYXZlZFRhc2tzJywgSlNPTi5zdHJpbmdpZnkoc2F2ZWRUYXNrcykpDQogICAgICBOb3RpZnkoeyB0eXBlOiAnc3VjY2VzcycsIGR1cmF0aW9uOiA1MDAsIG1lc3NhZ2U6ICfmmoLlrZjmiJDlip8nIH0pDQogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7DQogICAgICAgIG5hbWU6ICdUYXNrSW5kZXgnDQogICAgICB9KQ0KICAgIH0sDQogICAgLyrmiZPlvIDmlrDlop7lvILluLjlt6XljZXpobXpnaIqLw0KICAgIGFkZCgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgbmFtZTogJ0NvbW1vbk9uZUZvcm1JbmRleCcsDQogICAgICAgIHBhcmFtczogeyB0eXBlOiAnYWRkJyB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy/ojrflj5bnsbvlnovmiYDmnInlrZflhbgNCiAgICBxdWVyeURpY3QoZGljdFR5cGUpIHsNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgIGdldERpY3QoZGljdFR5cGUpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YSkgew0KICAgICAgICAgICAgcmVzb2x2ZShyZXMuZGF0YSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgLy/ov4fmu6TlrZflhbgNCiAgICBmaWx0ZXJEaWN0KHR5cGUsIGRldGFpbCkgew0KICAgICAgaWYgKGRldGFpbCAhPT0gbnVsbCAmJiBkZXRhaWwgIT09ICcnICYmIGRldGFpbCAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGxldCBkaWN0ID0gW10NCiAgICAgICAgaWYgKHR5cGUgPT0gJ3JldmVudWVfY29tcGFueScpIHsNCiAgICAgICAgICBkaWN0ID0gdGhpcy5jb21wYW55RGljdA0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ3BsYWNlX29mX2J1c2luZXNzJykgew0KICAgICAgICAgIGRpY3QgPSB0aGlzLmJ1c2luZXNzQ29tcGFueURpY3QNCiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICd3YXRlcl91c2VfdHlwZScpIHsNCiAgICAgICAgICBkaWN0ID0gdGhpcy53YXRlclR5cGVEaWN0DQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnd2F0ZXJfbWV0ZXJfdHlwZScpIHsNCiAgICAgICAgICBkaWN0ID0gdGhpcy5tZXRlckRpY3QNCiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICd3YXRlcl9tZXRlcl9icmFuZCcpIHsNCiAgICAgICAgICBkaWN0ID0gdGhpcy5tZXRlckJyYW5kRGljdA0KICAgICAgICB9DQogICAgICAgIHJldHVybiBkaWN0LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5kaWN0VmFsdWUgPT09IGRldGFpbClbMF0uZGljdExhYmVsDQogICAgICB9DQogICAgICByZXR1cm4gJycNCiAgICB9LA0KICAgIC8v6I635Y+W5b2T5YmN5pe26Ze0DQogICAgZ2V0Q3VyVGltZSgpIHsNCiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKQ0KICAgICAgbGV0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkNCiAgICAgIGxldCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDENCiAgICAgIGxldCBkYXkgPSBkYXRlLmdldERhdGUoKQ0KICAgICAgbGV0IGhvdXIgPSBkYXRlLmdldEhvdXJzKCkNCiAgICAgIGxldCBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKQ0KICAgICAgbGV0IHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpDQogICAgICBsZXQgY3VyVGltZSA9DQogICAgICAgIHllYXIgKw0KICAgICAgICAnLScgKw0KICAgICAgICAobW9udGggPj0gMTAgPyBtb250aCA6ICcwJyArIG1vbnRoKSArDQogICAgICAgICctJyArDQogICAgICAgIChkYXkgPj0gMTAgPyBkYXkgOiAnMCcgKyBkYXkpICsNCiAgICAgICAgJyAnICsNCiAgICAgICAgKGhvdXIgPj0gMTAgPyBob3VyIDogJzAnICsgaG91cikgKw0KICAgICAgICAnOicgKw0KICAgICAgICAobWludXRlID49IDEwID8gbWludXRlIDogJzAnICsgbWludXRlKSArDQogICAgICAgICc6JyArDQogICAgICAgIHNlY29uZA0KICAgICAgcmV0dXJuIGN1clRpbWUNCiAgICB9DQogIH0sDQoNCiAgYXN5bmMgYWN0aXZhdGVkKCkgew0KICAgIFRvYXN0LmxvYWRpbmcoew0KICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsDQogICAgICBmb3JiaWRDbGljazogdHJ1ZQ0KICAgIH0pDQogICAgdGhpcy5jb3B5U3RhdHVzID0gdGhpcy4kcm91dGUucGFyYW1zLnR5cGUNCiAgICB0aGlzLnBsYW5Db2RlID0gdGhpcy4kcm91dGUucGFyYW1zLnBsYW5Db2RlDQogICAgdGhpcy5ib29rQ29kZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5ib29rQ29kZQ0KICAgIGxldCB0YXNrSWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMudElkDQogICAgdGhpcy5jb21wYW55RGljdCA9IGF3YWl0IHRoaXMucXVlcnlEaWN0KCdyZXZlbnVlX2NvbXBhbnknKQ0KICAgIHRoaXMuYnVzaW5lc3NDb21wYW55RGljdCA9IGF3YWl0IHRoaXMucXVlcnlEaWN0KCdwbGFjZV9vZl9idXNpbmVzcycpDQogICAgdGhpcy53YXRlclR5cGVEaWN0ID0gYXdhaXQgdGhpcy5xdWVyeURpY3QoJ3dhdGVyX3VzZV90eXBlJykNCiAgICB0aGlzLm1ldGVyRGljdCA9IGF3YWl0IHRoaXMucXVlcnlEaWN0KCd3YXRlcl9tZXRlcl90eXBlJykNCiAgICB0aGlzLm1ldGVyQnJhbmREaWN0ID0gYXdhaXQgdGhpcy5xdWVyeURpY3QoJ3dhdGVyX21ldGVyX2JyYW5kJykNCiAgICBpZiAodGhpcy5jb3B5U3RhdHVzID09IDEpIHsNCiAgICAgIHRoaXMuZ2V0U3RhZ2luZ0RldGFpbCh0YXNrSWQpDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMuZ2V0VGFza0RldGFpbCh0YXNrSWQpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["SurveyDetail.vue"],"names":[],"mappings":";AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SurveyDetail.vue","sourceRoot":"src/views/MeterReading","sourcesContent":["<template>\r\n  <div id='SurveyDetail'>\r\n    <fm-nav-bar title='用户详情' left-arrow @click-left=\"$router.replace('/TaskIndex')\">\r\n      <!--      <template #right>-->\r\n      <!--        <i class=\"fm-icon fm-icon-scan rightIcon\" @click=\"scan\"></i>-->\r\n      <!--      </template>-->\r\n    </fm-nav-bar>\r\n    <div class='mainContainer'>\r\n      <fm-form @submit='onSubmit'>\r\n        <fm-cell-group>\r\n          <fm-cell>\r\n            <fm-field v-model='userInfo.guestNo' name='客户号' label='客户号' :readonly='true' />\r\n            <fm-field v-model='userInfo.name' name='姓名' label='姓名' :readonly='true' />\r\n            <fm-field v-model='userInfo.phoneOne' name='电话' label='电话' :readonly='true' />\r\n            <fm-field v-model='userInfo.address' name='地址' label='地址' :readonly='true' />\r\n            <fm-field v-model='userInfo.company' name='分公司' label='分公司' :readonly='true' />\r\n            <fm-field v-model='userInfo.businessCompany' name='营业所' label='营业所' :readonly='true' />\r\n          </fm-cell>\r\n          <fm-cell>\r\n            <fm-field v-model='curMeterInfo.meterNum' name='表号' label='表号'>\r\n              <template #input>\r\n                <fm-dropdown-menu :modal='false'>\r\n                  <fm-dropdown-item v-model='curMeterCode' :options='meterCodeList' @change='changeMeterCode' />\r\n                </fm-dropdown-menu>\r\n              </template>\r\n            </fm-field>\r\n            <fm-field v-model='curMeterInfo.waterMeterBrand' name='品牌' label='品牌' :readonly='true' />\r\n            <fm-field v-model='curMeterInfo.bore' name='口径' label='口径' :readonly='true' />\r\n            <fm-field v-model='curMeterInfo.waterMeterType' name='类型' label='类型' :readonly='true' />\r\n            <fm-field v-model='curMeterInfo.usingWaterType' name='用水性质' label='用水性质' :readonly='true' />\r\n            <fm-field v-model='curMeterInfo.imeiNo' name='IMEI号' label='IMEI号' :readonly='true' />\r\n            <!--            <fm-field v-model=\"curMeterInfo.connectingWellNo\" name=\"接驳井编号\" label=\"接驳井编号\" :readonly=\"true\" />-->\r\n            <fm-field v-model='curMeterInfo.meterIndex' name='上次读数' label='上次读数' :readonly='true' />\r\n            <fm-field v-model='curMeterInfo.readingTime' name='上次抄表时间' label='上次抄表时间' :readonly='true' />\r\n            <fm-field name='是否异常' label='是否异常'>\r\n              <template #input>\r\n                <fm-radio-group v-model='curMeterInfo.state' direction='horizontal'>\r\n                  <fm-radio name='1'>是</fm-radio>\r\n                  <fm-radio name='0'>否</fm-radio>\r\n                </fm-radio-group>\r\n              </template>\r\n            </fm-field>\r\n            <fm-field v-model='curMeterInfo.unusualReason' name='异常原因' label='异常原因' required placeholder='请输入异常原因'\r\n                      v-show='curMeterInfo.state == 1' @change='changeMeterInfo' />\r\n          </fm-cell>\r\n        </fm-cell-group>\r\n        <div class='btn-group'>\r\n          <fm-button round block type='primary' native-type='submit' v-if='copyStatus != 2' :disabled='disableCommit'>\r\n            提交\r\n          </fm-button>\r\n          <fm-button round block type='primary' @click='save' v-if='copyStatus == 0'>暂存</fm-button>\r\n        </div>\r\n      </fm-form>\r\n    </div>\r\n    <!-- 增加按钮 -->\r\n    <!--    <div class=\"bottom\" @click=\"add\" v-if=\"curMeterInfo.state == 1\">-->\r\n    <!--      <i class=\"fm-icon fm-icon-plus\"></i>-->\r\n    <!--    </div>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  NavBar,\r\n  Cell,\r\n  Form,\r\n  Field,\r\n  RadioGroup,\r\n  Radio,\r\n  Notify,\r\n  Toast\r\n} from 'fawkes-mobile-lib'\r\nimport { queryTaskDetail, getDict, commitTask } from './api'\r\n\r\nexport default {\r\n  name: 'SurveyDetail',\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n    [Cell.name]: Cell,\r\n    [Form.name]: Form,\r\n    [Field.name]: Field,\r\n    [RadioGroup.name]: RadioGroup,\r\n    [Radio.name]: Radio,\r\n    [Notify.name]: Notify,\r\n    [Toast.name]: Toast\r\n  },\r\n  data() {\r\n    return {\r\n      copyStatus: '0',\r\n      bookCode: null,\r\n      planCode: null,\r\n      userInfo: {},\r\n      meterCodeList: [],\r\n      meterInfoList: [],\r\n      curMeterCode: '',\r\n      curMeterInfo: {},\r\n      //字典\r\n      companyDict: [],\r\n      businessCompanyDict: [],\r\n      waterTypeDict: [],\r\n      meterDict: [],\r\n      meterBrandDict: []\r\n    }\r\n  },\r\n  computed: {\r\n    disableCommit() {\r\n      let state = this.curMeterInfo.state\r\n      let cr = this.curMeterInfo.unusualReason\r\n      if (state == 1) {\r\n        if (cr == '' || cr == null || cr == undefined) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //扫描条形码\r\n    // scan() {\r\n    //   if (typeof yuanchu != 'undefined') {\r\n    //     yuanchu.scanner.openScanner((res) => {\r\n    //       if (res) {\r\n    //         console.log(res)\r\n    //         getTaskDetail(res.data.guestNo)\r\n    //       }\r\n    //     })\r\n    //   } else {\r\n    //   }\r\n    // },\r\n    getTaskDetail(guestNo) {\r\n      this.userInfo = {}\r\n      this.curMeterCode = ''\r\n      this.meterCodeList = []\r\n      this.curMeterInfo = {}\r\n      this.meterInfoList = []\r\n      queryTaskDetail({ guestNo }).then(async (res) => {\r\n        if (res.data) {\r\n          this.userInfo = res.data\r\n          this.userInfo.company = this.filterDict(\r\n            'revenue_company',\r\n            this.userInfo.company\r\n          )\r\n          this.userInfo.businessCompany = this.filterDict(\r\n            'place_of_business',\r\n            this.userInfo.businessCompany\r\n          )\r\n          let data = res.data.waterMeterList\r\n          if (data.length > 0) {\r\n            this.meterInfoList = data\r\n            this.curMeterInfo = data[0]\r\n            this.curMeterInfo.usingWaterType = this.filterDict(\r\n              'water_use_type',\r\n              this.curMeterInfo.usingWaterType\r\n            )\r\n            this.curMeterInfo.waterMeterType = this.filterDict(\r\n              'water_meter_type',\r\n              this.curMeterInfo.waterMeterType\r\n            )\r\n            this.curMeterInfo.waterMeterBrand = this.filterDict(\r\n              'water_meter_brand',\r\n              this.curMeterInfo.waterMeterBrand\r\n            )\r\n            this.curMeterCode = data[0].meterNum\r\n            data.forEach((item) => {\r\n              this.meterCodeList.push({\r\n                value: item.meterNum,\r\n                text: item.meterNum\r\n              })\r\n            })\r\n\r\n          }\r\n        }\r\n        this.$set(this.curMeterInfo, 'state', '0')\r\n        this.$set(this.curMeterInfo, 'unusualReason', '')\r\n      })\r\n    },\r\n    //暂存加载信息\r\n    getStagingDetail(guestNo) {\r\n      this.userInfo = {}\r\n      this.curMeterCode = ''\r\n      this.meterCodeList = []\r\n      this.curMeterInfo = {}\r\n      this.meterInfoList = []\r\n      queryTaskDetail({ guestNo }).then((res) => {\r\n        if (res.data) {\r\n          this.userInfo = res.data\r\n          this.userInfo.company = this.filterDict(\r\n            'revenue_company',\r\n            this.userInfo.company\r\n          )\r\n          this.userInfo.businessCompany = this.filterDict(\r\n            'place_of_business',\r\n            this.userInfo.businessCompany\r\n          )\r\n          let savedTasks = localStorage.getItem('savedTasks')\r\n          let allTask = savedTasks ? JSON.parse(savedTasks) : []\r\n          let curTask = allTask.filter((item) => {\r\n            return item.planCode == this.planCode\r\n          })\r\n          let data = curTask[0].paramList\r\n          if (data.length > 0) {\r\n            this.meterInfoList = data\r\n            this.curMeterInfo = data[0]\r\n            this.curMeterCode = data[0].meterNum\r\n            data.forEach((item) => {\r\n              this.meterCodeList.push({\r\n                value: item.meterNum,\r\n                text: item.meterNum\r\n              })\r\n            })\r\n          }\r\n        }\r\n\r\n      })\r\n    },\r\n    //点击水表编号切换水表\r\n    changeMeterCode(e) {\r\n      let arr = this.meterInfoList.filter((item) => {\r\n        return item.meterNum == this.curMeterCode\r\n      })\r\n      this.curMeterInfo = arr[0]\r\n      let state = this.curMeterInfo.state ? this.curMeterInfo.state : '0'\r\n      let unusualReason = this.curMeterInfo.unusualReason\r\n        ? this.curMeterInfo.unusualReason\r\n        : ''\r\n      this.$set(this.curMeterInfo, 'state', state)\r\n      this.$set(this.curMeterInfo, 'unusualReason', unusualReason)\r\n      this.curMeterInfo.usingWaterType = this.filterDict(\r\n        'water_use_type',\r\n        this.curMeterInfo.usingWaterType\r\n      )\r\n      this.curMeterInfo.waterMeterType = this.filterDict(\r\n        'water_meter_type',\r\n        this.curMeterInfo.waterMeterType\r\n      )\r\n      this.curMeterInfo.waterMeterBrand = this.filterDict(\r\n        'water_meter_brand',\r\n        this.curMeterInfo.waterMeterBrand\r\n      )\r\n    },\r\n    changeMeterInfo() {\r\n      this.meterInfoList.forEach((item) => {\r\n        if (item.meterNum == this.curMeterCode) {\r\n          item = this.curMeterInfo\r\n        }\r\n      })\r\n    },\r\n    onSubmit() {\r\n      let paramList = []\r\n      let curTime = this.getCurTime()\r\n      let uid = localStorage.getItem('cs_userId')\r\n      this.meterInfoList.forEach((item) => {\r\n        paramList.push({\r\n          registerNo: item.registerNo,\r\n          meterTime: curTime,\r\n          planCode: this.planCode,\r\n          bookCode: this.bookCode,\r\n          state: item.state == '0' ? 'NORMAL' : 'ABNORMAL',\r\n          unusualReason: item.unusualReason,\r\n          readingPerson: uid,\r\n          type: 'ZCBS'\r\n        })\r\n      })\r\n      let notAll = false\r\n      this.meterInfoList.map((item) => {\r\n        if (!item.state) {\r\n          notAll = true\r\n          Notify({\r\n            type: 'warning',\r\n            duration: 1000,\r\n            message: '请完善所有水表信息'\r\n          })\r\n        } else {\r\n          if (\r\n            item.state == '1' &&\r\n            (item.unusualReason == '' ||\r\n              item.unusualReason == null ||\r\n              item.unusualReason == undefined)\r\n          ) {\r\n            notAll = true\r\n            Notify({\r\n              type: 'warning',\r\n              duration: 1000,\r\n              message: '请填写异常原因'\r\n            })\r\n          }\r\n        }\r\n      })\r\n      if (!notAll) {\r\n        commitTask(paramList).then((res) => {\r\n          if (res.status) {\r\n            if (this.copyStatus == 0) {\r\n              let all = localStorage.getItem('myDownloadPlan')\r\n              let allTask = all ? JSON.parse(all) : []\r\n              let otherTasks = allTask.filter((item) => {\r\n                return item.planCode != this.planCode\r\n              })\r\n              localStorage.removeItem('myDownloadPlan')\r\n              localStorage.setItem('myDownloadPlan', JSON.stringify(otherTasks))\r\n            } else {\r\n              let all = localStorage.getItem('savedTasks')\r\n              let allTask = all ? JSON.parse(all) : []\r\n              let otherTasks = allTask.filter((item) => {\r\n                return item.planCode != this.planCode\r\n              })\r\n              localStorage.removeItem('savedTasks')\r\n              localStorage.setItem('savedTasks', JSON.stringify(otherTasks))\r\n            }\r\n            Notify({ type: 'success', duration: 500, message: '提交成功' })\r\n            this.$router.replace({\r\n              name: 'TaskIndex'\r\n            })\r\n          } else {\r\n            Notify({ type: 'error', duration: 500, message: '提交失败' })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    save() {\r\n      let all = localStorage.getItem('myDownloadPlan')\r\n      let saved = localStorage.getItem('savedTasks')\r\n      let allTask = all ? JSON.parse(all) : []\r\n      let savedTasks = saved ? JSON.parse(saved) : []\r\n      let curTask = allTask.filter((item) => {\r\n        return item.planCode == this.planCode\r\n      })\r\n      let otherTasks = allTask.filter((item) => {\r\n        return item.planCode != this.planCode\r\n      })\r\n      let paramList = []\r\n      this.meterInfoList.forEach((item) => {\r\n        paramList.push({\r\n          waterMeterBrand: item.waterMeterBrand,\r\n          bore: item.bore,\r\n          remoteModuleNo: item.remoteModuleNo,\r\n          meterIndex: item.meterIndex,\r\n          connectingWellNo: item.connectingWellNo,\r\n          usingWaterType: item.usingWaterType,\r\n          installAddress: item.installAddress,\r\n          waterMeterType: item.waterMeterType,\r\n          readingTime: item.readingTime,\r\n          meterNum: item.meterNum,\r\n          registerNo: item.registerNo,\r\n          planCode: this.planCode,\r\n          bookCode: this.bookCode,\r\n          lastReadingIndex: item.meterIndex,\r\n          lastReadingTime: item.readingTime,\r\n          state: item.state,\r\n          unusualReason: item.unusualReason\r\n        })\r\n      })\r\n      curTask[0].paramList = paramList\r\n      savedTasks.push(...curTask)\r\n      localStorage.removeItem('myDownloadPlan')\r\n      localStorage.removeItem('savedTasks')\r\n      localStorage.setItem('myDownloadPlan', JSON.stringify(otherTasks))\r\n      localStorage.setItem('savedTasks', JSON.stringify(savedTasks))\r\n      Notify({ type: 'success', duration: 500, message: '暂存成功' })\r\n      this.$router.replace({\r\n        name: 'TaskIndex'\r\n      })\r\n    },\r\n    /*打开新增异常工单页面*/\r\n    add() {\r\n      this.$router.push({\r\n        name: 'CommonOneFormIndex',\r\n        params: { type: 'add' }\r\n      })\r\n    },\r\n    //获取类型所有字典\r\n    queryDict(dictType) {\r\n      return new Promise((resolve, reject) => {\r\n        getDict(dictType).then((res) => {\r\n          if (res.data) {\r\n            resolve(res.data)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    //过滤字典\r\n    filterDict(type, detail) {\r\n      if (detail !== null && detail !== '' && detail !== undefined) {\r\n        let dict = []\r\n        if (type == 'revenue_company') {\r\n          dict = this.companyDict\r\n        } else if (type == 'place_of_business') {\r\n          dict = this.businessCompanyDict\r\n        } else if (type == 'water_use_type') {\r\n          dict = this.waterTypeDict\r\n        } else if (type == 'water_meter_type') {\r\n          dict = this.meterDict\r\n        } else if (type == 'water_meter_brand') {\r\n          dict = this.meterBrandDict\r\n        }\r\n        return dict.filter((item) => item.dictValue === detail)[0].dictLabel\r\n      }\r\n      return ''\r\n    },\r\n    //获取当前时间\r\n    getCurTime() {\r\n      let date = new Date()\r\n      let year = date.getFullYear()\r\n      let month = date.getMonth() + 1\r\n      let day = date.getDate()\r\n      let hour = date.getHours()\r\n      let minute = date.getMinutes()\r\n      let second = date.getSeconds()\r\n      let curTime =\r\n        year +\r\n        '-' +\r\n        (month >= 10 ? month : '0' + month) +\r\n        '-' +\r\n        (day >= 10 ? day : '0' + day) +\r\n        ' ' +\r\n        (hour >= 10 ? hour : '0' + hour) +\r\n        ':' +\r\n        (minute >= 10 ? minute : '0' + minute) +\r\n        ':' +\r\n        second\r\n      return curTime\r\n    }\r\n  },\r\n\r\n  async activated() {\r\n    Toast.loading({\r\n      message: '加载中...',\r\n      forbidClick: true\r\n    })\r\n    this.copyStatus = this.$route.params.type\r\n    this.planCode = this.$route.params.planCode\r\n    this.bookCode = this.$route.params.bookCode\r\n    let taskId = this.$route.params.tId\r\n    this.companyDict = await this.queryDict('revenue_company')\r\n    this.businessCompanyDict = await this.queryDict('place_of_business')\r\n    this.waterTypeDict = await this.queryDict('water_use_type')\r\n    this.meterDict = await this.queryDict('water_meter_type')\r\n    this.meterBrandDict = await this.queryDict('water_meter_brand')\r\n    if (this.copyStatus == 1) {\r\n      this.getStagingDetail(taskId)\r\n    } else {\r\n      this.getTaskDetail(taskId)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n#SurveyDetail {\r\n  height: 100%;\r\n  overflow: auto;\r\n  background-color: #ecf4ff !important;\r\n\r\n  /deep/ .fm-nav-bar__content {\r\n    background-color: #0676fd !important;\r\n    height: 1.8rem;\r\n  }\r\n\r\n  /deep/ .fm-nav-bar__title {\r\n    color: #ffffff !important;\r\n  }\r\n\r\n  /deep/ .fm-nav-bar .fm-icon {\r\n    color: #ffffff !important;\r\n  }\r\n\r\n  /deep/ .fm-cell {\r\n    background-color: #ecf4ff !important;\r\n  }\r\n\r\n  /deep/ .fm-dropdown-menu {\r\n    width: 100% !important;\r\n    background-color: #ecf4ff !important;\r\n  }\r\n\r\n  /deep/ .fm-dropdown-menu__bar {\r\n    background-color: #ecf4ff !important;\r\n    box-shadow: none !important;\r\n  }\r\n\r\n  /deep/ .fm-dropdown-menu__item {\r\n    align-items: flex-start;\r\n    justify-content: left !important;\r\n  }\r\n\r\n  .rightIcon {\r\n    color: #fff;\r\n    font-size: 55px;\r\n  }\r\n\r\n  .btn-group {\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    margin: 16px 16px 200px;\r\n  }\r\n\r\n  .bottom {\r\n    position: fixed;\r\n    bottom: 300px;\r\n    right: 44px;\r\n    background-color: #027aff;\r\n    width: 102px;\r\n    height: 102px;\r\n    line-height: 102px;\r\n    border-radius: 50%;\r\n    color: #fff;\r\n    z-index: 1000;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n"]}]}