{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\Login\\index1.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\Login\\index1.vue","mtime":1705912915798},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgew0KICBCdXR0b24sDQogIE5hdkJhciwNCiAgRm9ybSwNCiAgRmllbGQsDQogIEltYWdlLA0KICBJY29uLA0KICBDaGVja2JveCwNCiAgVG9hc3QsDQp9IGZyb20gJ2Zhd2tlcy1tb2JpbGUtbGliJw0KaW1wb3J0IHsgZW5jcnlwdFNNNCB9IGZyb20gJ0AvdXRpbHMvc200Jw0KaW1wb3J0IHsgR1JBTlRfVFlQRSB9IGZyb20gJ0Avc2V0dGluZ3MnDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcNCmltcG9ydCB7IFNFVF9URU1QX1VTRVIsIElTX0xPR0lOIH0gZnJvbSAnQC9zdG9yZS9NdXRhdGlvbi9tdXRhdGlvblR5cGVzJw0KaW1wb3J0IHsgVVNFUl9MT0dJTiB9IGZyb20gJ0Avc3RvcmUvQWN0aW9uL2FjdGlvblR5cGVzJw0KaW1wb3J0IHsgbG9hZExhbmd1YWdlQXN5bmMgfSBmcm9tICdAL3V0aWxzL2xvY2FsZScgLy/lvJXlhaXojrflj5bns7vnu5/or63oqIDnmoTmlrnms5UNCmltcG9ydCB7IGV2ZW50QmFja0J1dHRvbiwgZXhpdEFwcCB9IGZyb20gJ0AvdXRpbHMvYXBwJw0KaW1wb3J0IG1kNSBmcm9tICdqcy1tZDUnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ2xvZ2luJywNCiAgY29tcG9uZW50czogew0KICAgIC8vIGNoYW5nZUxhbmdlLA0KICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbiwNCiAgICBbTmF2QmFyLm5hbWVdOiBOYXZCYXIsDQogICAgW0Zvcm0ubmFtZV06IEZvcm0sDQogICAgW0ZpZWxkLm5hbWVdOiBGaWVsZCwNCiAgICBbSW1hZ2UubmFtZV06IEltYWdlLA0KICAgIFtJY29uLm5hbWVdOiBJY29uLA0KICAgIFtDaGVja2JveC5uYW1lXTogQ2hlY2tib3gsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXJuYW1lOiAnJywNCiAgICAgIHBhc3N3b3JkOiAnJywNCiAgICAgIHBob25lTnVtYmVyOiAnJywNCiAgICAgIGNvZGU6ICcnLA0KICAgICAgZXJyb3JQYXJhbXM6IHt9LA0KICAgICAgcmVtZW1iZXJNZTogZmFsc2UsDQogICAgICBzaG93SWNvbjogdHJ1ZSwNCiAgICAgIHBhc3N3b3JkVHlwZTogJ3Bhc3N3b3JkJywNCiAgICAgIGNoZWNrZWRGaWVsZDogbnVsbCwNCiAgICAgIHVzZXJSdWxlczogWw0KICAgICAgICB7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogJ+eUqOaIt+WQjeS4jeiDveS4uuepuicsDQogICAgICAgICAgdHJpZ2dlcjogJ29uQmx1cicsDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgcHdkUnVsZXM6IFsNCiAgICAgICAgew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICflr4bnoIHkuI3og73kuLrnqbonLA0KICAgICAgICAgIHRyaWdnZXI6ICdvbkJsdXInLA0KICAgICAgICB9LA0KICAgICAgXSwNCiAgICAgIHBob25lUnVsZXM6IFsNCiAgICAgICAgew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICfmiYvmnLrlj7fnoIHkuI3og73kuLrnqbonLA0KICAgICAgICAgIHRyaWdnZXI6ICdvbkJsdXInLCAgICAgICAgICANCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIGNvZGVSdWxlczogWw0KICAgICAgICB7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogJ+mqjOivgeeggeS4jeiDveS4uuepuicsDQogICAgICAgICAgdHJpZ2dlcjogJ29uQmx1cicsICAgICAgICAgIA0KICAgICAgICB9DQogICAgICBdDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyd0ZW1wVXNlciddKSwNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICB1c2VybmFtZShuZXdVc2VybmFtZSkgew0KICAgICAgLy8g5riF56m655So5oi35ZCN5pe25a+G56CB5Lmf5riF56m6DQogICAgICBpZiAoIW5ld1VzZXJuYW1lKSB7DQogICAgICAgIHRoaXMucGFzc3dvcmQgPSAnJw0KICAgICAgICB0aGlzLnNob3dJY29uID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgcGFzc3dvcmQobmV3UGFzc3dvcmQpIHsNCiAgICAgIC8vIOa4heepuuWvhueggeaXtuaYvuekuuafpeeci+WvhueggeaMiemSrg0KICAgICAgaWYgKCFuZXdQYXNzd29yZCkgew0KICAgICAgICB0aGlzLnNob3dJY29uID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5yZW1lbWJlck1lID0gdGhpcy4kc3RvcmFnZS5nZXQoJ3JlbWVtYmVyTWUnKSA9PT0gJ3RydWUnDQogICAgaWYgKHRoaXMucmVtZW1iZXJNZSkgew0KICAgICAgdGhpcy51c2VybmFtZSA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCd1c2VybmFtZScpDQogICAgICB0aGlzLnBhc3N3b3JkID0gdGhpcy4kc3RvcmFnZS5nZXQoJ3Bhc3N3b3JkJykNCiAgICAgIHRoaXMuc2hvd0ljb24gPSBmYWxzZQ0KICAgICAgdGhpcy5wYXNzd29yZFR5cGUgPSAncGFzc3dvcmQnDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMudXNlcm5hbWUgPSB0aGlzLnRlbXBVc2VyPy51c2VybmFtZQ0KICAgICAgdGhpcy5wYXNzd29yZCA9IHRoaXMudGVtcFVzZXI/LnBhc3N3b3JkDQogICAgfQ0KICAgIC8vIOenu+mZpOi/lOWbnuS4iuS4gOe6p+i3r+eUseS6i+S7tu+8jOiuvue9rumAgOWHuuW6lOeUqA0KICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JhY2tidXR0b24nLCB0aGlzLiRiYWNrLCBmYWxzZSkNCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgZXZlbnRCYWNrQnV0dG9uLCBmYWxzZSkNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICB0aGlzLiRzdG9yZS5jb21taXQoU0VUX1RFTVBfVVNFUiwgew0KICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsDQogICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwNCiAgICB9KQ0KICAgIC8vIOaBouWkjem7mOiupOeahOi/lOWbnuS4iuS4gOe6p+i3r+eUseWTjeW6lOS6i+S7tg0KICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JhY2tidXR0b24nLCBldmVudEJhY2tCdXR0b24sIGZhbHNlKQ0KICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JhY2tidXR0b24nLCBleGl0QXBwLCBmYWxzZSkNCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgdGhpcy4kYmFjaywgZmFsc2UpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBvblN1Ym1pdFBob25lKCkge30sDQogICAgdmlld1Bhc3N3b3JkKCkgew0KICAgICAgaWYgKHRoaXMucGFzc3dvcmRUeXBlID09ICdwYXNzd29yZCcpIHsNCiAgICAgICAgdGhpcy5wYXNzd29yZFR5cGUgPSAndGV4dCcNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMucGFzc3dvcmRUeXBlID0gJ3Bhc3N3b3JkJw0KICAgICAgfQ0KICAgIH0sDQogICAgb25TdWJtaXQoKSB7DQogICAgICBpZiAoIXRoaXMudXNlcm5hbWUpIHsNCiAgICAgICAgcmV0dXJuIFRvYXN0KCfnlKjmiLflkI3kuI3og73kuLrnqbonKQ0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLnBhc3N3b3JkKSB7DQogICAgICAgIHJldHVybiBUb2FzdCgn5a+G56CB5LiN6IO95Li656m6JykNCiAgICAgIH0NCiAgICAgIGNvbnN0IGxvZ2luRGF0YSA9IHRoaXMuZ2V0TG9naW5Gb3JtKCkNCiAgICAgIGNvbnNvbGUubG9nKGxvZ2luRGF0YSkNCg0KICAgICAgaWYgKGxvZ2luRGF0YS5wYXNzd29yZCAmJiBsb2dpbkRhdGEudXNlcm5hbWUpIHsNCiAgICAgICAgdGhpcy4kbG9hZGluZy5zaG93KHsgdGl0bGU6ICcnIH0pDQogICAgICAgIHRoaXMuJHN0b3JlDQogICAgICAgICAgLmRpc3BhdGNoKFVTRVJfTE9HSU4sIGxvZ2luRGF0YSkNCiAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoSVNfTE9HSU4sIHRydWUpDQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3RhYkJhcicpDQogICAgICAgICAgICBpZiAoIXRoaXMuJHN0b3JhZ2UuZ2V0KCdsYW5nTGlzdCcpKSB7DQogICAgICAgICAgICAgIGxldCBrZXkgPSB0aGlzLiRzdG9yYWdlLmdldCgnaTE4bkxvY2FsZScpDQogICAgICAgICAgICAgIGxldCBsb2NhbGUgPSB0aGlzLiRzdG9yYWdlLmdldCgnaTE4bkxvY2FsZUtleScpDQogICAgICAgICAgICAgIC8vIGxvYWRMYW5ndWFnZUFzeW5jKGtleSwgbG9jYWxlLCB0aGlzKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy51cGRhdGFTdG9yYWdlKCkNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJGxvYWRpbmcuaGlkZSgpDQogICAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldExvZ2luRm9ybSgpIHsNCiAgICAgIGNvbnN0IGZvcm0gPSB7fQ0KICAgICAgZm9ybS5ncmFudF90eXBlID0gR1JBTlRfVFlQRS5wYXNzd29yZC5jb2RlDQogICAgICBmb3JtLnVzZXJuYW1lID0gdGhpcy51c2VybmFtZQ0KICAgICAgLy8gaWYgKHRoaXMuc2hvd0ljb24pIHsNCiAgICAgIGZvcm0ucGFzc3dvcmQgPSBlbmNyeXB0U000KHRoaXMucGFzc3dvcmQpDQogICAgICAvLyBmb3JtLnBhc3N3b3JkID0gbWQ1KHRoaXMucGFzc3dvcmQpDQogICAgICAvLyB9IGVsc2Ugew0KICAgICAgLy8gICBmb3JtLnBhc3N3b3JkID0gdGhpcy5wYXNzd29yZA0KICAgICAgLy8gfQ0KICAgICAgcmV0dXJuIGZvcm0NCiAgICB9LA0KICAgIC8vIOeZu+W9leaIkOWKn+aXtuabtOaWsOe8k+WtmA0KICAgIHVwZGF0YVN0b3JhZ2UoKSB7DQogICAgICB0aGlzLiRzdG9yYWdlLnNldCgndXNlcm5hbWUnLCB0aGlzLnVzZXJuYW1lKQ0KICAgICAgdGhpcy4kc3RvcmFnZS5zZXQoJ3JlbWVtYmVyTWUnLCB0aGlzLnJlbWVtYmVyTWUpDQogICAgICBpZiAodGhpcy5yZW1lbWJlck1lKSB7DQogICAgICAgIHRoaXMuJHN0b3JhZ2Uuc2V0KCdwYXNzd29yZCcsIHRoaXMucGFzc3dvcmQpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRzdG9yYWdlLnJlbW92ZSgncGFzc3dvcmQnKQ0KICAgICAgfQ0KICAgICAgLy8g6K6w5b2V6ZSZ6K+v5qyh5pWwDQogICAgICB0aGlzLmVycm9yUGFyYW1zW3RoaXMudXNlcm5hbWVdID0gMA0KICAgICAgdGhpcy4kc3RvcmFnZS5zZXQoJ2Vycm9yUGFyYW1zJywgSlNPTi5zdHJpbmdpZnkodGhpcy5lcnJvclBhcmFtcykpDQogICAgfSwNCiAgICBnb1RvU2lnblVwKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zaWdudXAnKQ0KICAgIH0sDQogICAgLy8g5b+Y6K6w5a+G56CBDQogICAgZm9yZ2V0UGFzc3dvcmQoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2ZvcmdldCcpDQogICAgfSwNCiAgfSwNCn0NCg=="},{"version":3,"sources":["index1.vue"],"names":[],"mappings":";AAyJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index1.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <!-- <change-lange></change-lange> -->\r\n    <div class=\"logo-container\">\r\n      <!-- <div class=\"logo-pic\"></div> -->\r\n      <span class=\"logo-title\"></span>\r\n    </div>\r\n    <!-- 表单登录 -->\r\n    <div class=\"form-container\">\r\n      <fm-tabs>\r\n        <fm-tab label=\"账号登录\">\r\n          <fm-form class=\"form-content\">\r\n            <fm-field\r\n              class=\"field-username\"\r\n              clearable\r\n              v-model=\"username\"\r\n              name=\"用户名\"\r\n              placeholder=\"请输入用户名\"\r\n              :rules=\"userRules\"\r\n              @focus=\"checkedField = 'user'\"\r\n              @blur=\"checkedField = null\"\r\n              clear-trigger=\"always\"\r\n              :class=\"checkedField == 'user' ? 'field-active' : ''\"\r\n            >\r\n              <template #prefix-icon>\r\n                <!-- <img\r\n                  v-if=\"checkedField == 'user'\"\r\n                  class=\"news-img\"\r\n                  :src=\"require('@/assets/img/login/user-checked.png')\"\r\n                /> -->\r\n                <img\r\n                  class=\"news-img\"\r\n                  :src=\"require('@/assets/img/login/user.png')\"\r\n                />\r\n              </template>\r\n            </fm-field>\r\n            <fm-field\r\n              class=\"field-pwd\"\r\n              clearable\r\n              v-model=\"password\"\r\n              :type=\"passwordType\"\r\n              name=\"密码\"\r\n              placeholder=\"请输入密码\"\r\n              :rules=\"pwdRules\"\r\n              @click-suffix-icon=\"viewPassword\"\r\n              @focus=\"checkedField = 'pwd'\"\r\n              @blur=\"checkedField = null\"\r\n              clear-trigger=\"always\"\r\n              :class=\"checkedField == 'pwd' ? 'field-active' : ''\"\r\n            >\r\n              <template #prefix-icon>\r\n                <img\r\n                  class=\"news-img\"\r\n                  :src=\"require('@/assets/img/login/password.png')\"\r\n                />\r\n              </template>\r\n              <template #suffix-icon v-if=\"showIcon\">\r\n                <fm-image\r\n                  v-if=\"passwordType == 'password'\"\r\n                  class=\"suffix-icon\"\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  :src=\"require('@/assets/img/login/no-visible.png')\"\r\n                />\r\n                <fm-image\r\n                  v-else\r\n                  class=\"suffix-icon\"\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  :src=\"require('@/assets/img/login/visible.png')\"\r\n                />\r\n                <!-- <i class=\"fm-icon fm-icon-eye-o suffix-icon\" v-if=\"passwordType == 'text'\"></i>\r\n          <i class=\"fm-icon fm-icon-closed-eye suffix-icon\" v-else></i> -->\r\n              </template>\r\n            </fm-field>\r\n            <div class=\"sub-menu\">\r\n              <fm-checkbox v-model=\"rememberMe\" shape=\"square\">{{\r\n                $t('login.RememberPassword')\r\n              }}</fm-checkbox>\r\n              <span @click=\"forgetPassword\">{{\r\n                $t('login.forgetPassword')\r\n              }}</span>\r\n            </div>\r\n            <div class=\"login-btn-container\">\r\n              <fm-button\r\n                class=\"login-btn\"\r\n                @click=\"onSubmit\"\r\n                block\r\n                type=\"primary\"\r\n                native-type=\"submit\"\r\n                >{{ $t('login.login') }}</fm-button\r\n              >\r\n            </div>\r\n          </fm-form>\r\n        </fm-tab>\r\n        <fm-tab label=\"手机登录\">\r\n          <fm-form class=\"form-content\">\r\n            <fm-field\r\n              class=\"field-username\"\r\n              clearable\r\n              v-model=\"phoneNumber\"\r\n              name=\"手机号码\"\r\n              placeholder=\"请输入手机号码\"\r\n              :rules=\"phoneRules\"\r\n              @focus=\"checkedField = 'phone'\"\r\n              @blur=\"checkedField = null\"\r\n              :class=\"checkedField == 'phone' ? 'field-active' : ''\"\r\n            >\r\n              <template #prefix-icon>\r\n                <img\r\n                  class=\"news-img\"\r\n                  :src=\"require('@/assets/img/login/phone.png')\"\r\n                />\r\n              </template>\r\n            </fm-field>\r\n            <fm-field\r\n              class=\"field-pwd\"\r\n              clearable\r\n              v-model=\"code\"\r\n              name=\"验证码\"\r\n              placeholder=\"请输入验证码\"\r\n              :rules=\"codeRules\"\r\n              @focus=\"checkedField = 'code'\"\r\n              @blur=\"checkedField = null\"\r\n              :class=\"checkedField == 'code' ? 'field-active' : ''\"\r\n            >\r\n              <template #prefix-icon>\r\n                <img\r\n                  class=\"news-img\"\r\n                  :src=\"require('@/assets/img/login/验证码.png')\"\r\n                />\r\n              </template>\r\n              <template #button>\r\n                <span class=\"send_code\">获取验证码</span>\r\n              </template>\r\n            </fm-field>\r\n            <div class=\"login-btn-container\">\r\n              <fm-button\r\n                class=\"login-btn\"\r\n                @click=\"onSubmitPhone\"\r\n                block\r\n                type=\"primary\"\r\n                native-type=\"submit\"\r\n                >{{ $t('login.login') }}</fm-button\r\n              >\r\n            </div>\r\n          </fm-form>\r\n        </fm-tab>\r\n      </fm-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  Button,\r\n  NavBar,\r\n  Form,\r\n  Field,\r\n  Image,\r\n  Icon,\r\n  Checkbox,\r\n  Toast,\r\n} from 'fawkes-mobile-lib'\r\nimport { encryptSM4 } from '@/utils/sm4'\r\nimport { GRANT_TYPE } from '@/settings'\r\nimport { mapGetters } from 'vuex'\r\nimport { SET_TEMP_USER, IS_LOGIN } from '@/store/Mutation/mutationTypes'\r\nimport { USER_LOGIN } from '@/store/Action/actionTypes'\r\nimport { loadLanguageAsync } from '@/utils/locale' //引入获取系统语言的方法\r\nimport { eventBackButton, exitApp } from '@/utils/app'\r\nimport md5 from 'js-md5'\r\n\r\nexport default {\r\n  name: 'login',\r\n  components: {\r\n    // changeLange,\r\n    [Button.name]: Button,\r\n    [NavBar.name]: NavBar,\r\n    [Form.name]: Form,\r\n    [Field.name]: Field,\r\n    [Image.name]: Image,\r\n    [Icon.name]: Icon,\r\n    [Checkbox.name]: Checkbox,\r\n  },\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      phoneNumber: '',\r\n      code: '',\r\n      errorParams: {},\r\n      rememberMe: false,\r\n      showIcon: true,\r\n      passwordType: 'password',\r\n      checkedField: null,\r\n      userRules: [\r\n        {\r\n          required: true,\r\n          message: '用户名不能为空',\r\n          trigger: 'onBlur',\r\n        },\r\n      ],\r\n      pwdRules: [\r\n        {\r\n          required: true,\r\n          message: '密码不能为空',\r\n          trigger: 'onBlur',\r\n        },\r\n      ],\r\n      phoneRules: [\r\n        {\r\n          required: true,\r\n          message: '手机号码不能为空',\r\n          trigger: 'onBlur',          \r\n        }\r\n      ],\r\n      codeRules: [\r\n        {\r\n          required: true,\r\n          message: '验证码不能为空',\r\n          trigger: 'onBlur',          \r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['tempUser']),\r\n  },\r\n  watch: {\r\n    username(newUsername) {\r\n      // 清空用户名时密码也清空\r\n      if (!newUsername) {\r\n        this.password = ''\r\n        this.showIcon = true\r\n      }\r\n    },\r\n    password(newPassword) {\r\n      // 清空密码时显示查看密码按钮\r\n      if (!newPassword) {\r\n        this.showIcon = true\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.rememberMe = this.$storage.get('rememberMe') === 'true'\r\n    if (this.rememberMe) {\r\n      this.username = this.$storage.get('username')\r\n      this.password = this.$storage.get('password')\r\n      this.showIcon = false\r\n      this.passwordType = 'password'\r\n    } else {\r\n      this.username = this.tempUser?.username\r\n      this.password = this.tempUser?.password\r\n    }\r\n    // 移除返回上一级路由事件，设置退出应用\r\n    document.removeEventListener('backbutton', this.$back, false)\r\n    document.addEventListener('backbutton', eventBackButton, false)\r\n  },\r\n  beforeDestroy() {\r\n    this.$store.commit(SET_TEMP_USER, {\r\n      password: this.password,\r\n      username: this.username,\r\n    })\r\n    // 恢复默认的返回上一级路由响应事件\r\n    document.removeEventListener('backbutton', eventBackButton, false)\r\n    document.removeEventListener('backbutton', exitApp, false)\r\n    document.addEventListener('backbutton', this.$back, false)\r\n  },\r\n  methods: {\r\n    onSubmitPhone() {},\r\n    viewPassword() {\r\n      if (this.passwordType == 'password') {\r\n        this.passwordType = 'text'\r\n      } else {\r\n        this.passwordType = 'password'\r\n      }\r\n    },\r\n    onSubmit() {\r\n      if (!this.username) {\r\n        return Toast('用户名不能为空')\r\n      }\r\n      if (!this.password) {\r\n        return Toast('密码不能为空')\r\n      }\r\n      const loginData = this.getLoginForm()\r\n      console.log(loginData)\r\n\r\n      if (loginData.password && loginData.username) {\r\n        this.$loading.show({ title: '' })\r\n        this.$store\r\n          .dispatch(USER_LOGIN, loginData)\r\n          .then(() => {\r\n            this.$store.commit(IS_LOGIN, true)\r\n            this.$router.push('/tabBar')\r\n            if (!this.$storage.get('langList')) {\r\n              let key = this.$storage.get('i18nLocale')\r\n              let locale = this.$storage.get('i18nLocaleKey')\r\n              // loadLanguageAsync(key, locale, this)\r\n            }\r\n            this.updataStorage()\r\n          })\r\n          .finally(() => {\r\n            this.$loading.hide()\r\n          })\r\n      }\r\n    },\r\n    getLoginForm() {\r\n      const form = {}\r\n      form.grant_type = GRANT_TYPE.password.code\r\n      form.username = this.username\r\n      // if (this.showIcon) {\r\n      form.password = encryptSM4(this.password)\r\n      // form.password = md5(this.password)\r\n      // } else {\r\n      //   form.password = this.password\r\n      // }\r\n      return form\r\n    },\r\n    // 登录成功时更新缓存\r\n    updataStorage() {\r\n      this.$storage.set('username', this.username)\r\n      this.$storage.set('rememberMe', this.rememberMe)\r\n      if (this.rememberMe) {\r\n        this.$storage.set('password', this.password)\r\n      } else {\r\n        this.$storage.remove('password')\r\n      }\r\n      // 记录错误次数\r\n      this.errorParams[this.username] = 0\r\n      this.$storage.set('errorParams', JSON.stringify(this.errorParams))\r\n    },\r\n    goToSignUp() {\r\n      this.$router.push('/signup')\r\n    },\r\n    // 忘记密码\r\n    forgetPassword() {\r\n      this.$router.push('/forget')\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n/deep/.fm-field__error-message {\r\n  position: absolute;\r\n  top: 80px;\r\n}\r\n/deep/.fm-cell {\r\n  overflow: visible;\r\n  &::after {\r\n    left: 0px;\r\n    display: none;\r\n  }\r\n}\r\n/deep/ .fm-tabs {\r\n  padding-top: 31px;\r\n  z-index: 2;\r\n}\r\n.suffix-icon {\r\n  margin-left: 10px;\r\n}\r\n/deep/.fm-field__prefix-icon {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n/deep/.fm-field__suffix-icon {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.fm-icon-closed-eye:before {\r\n  width: 36px;\r\n  height: auto;\r\n}\r\n.fm-icon-eye-o:before {\r\n  width: 36px;\r\n  height: auto;\r\n}\r\n.news-img {\r\n  width: 32px;\r\n  height: 32px;\r\n  margin-right: 24px;\r\n}\r\n.send_code {\r\n  font-size: 28px;\r\n  font-family: PingFangSC-Semibold, PingFang SC;\r\n  font-weight: 600;\r\n  color: #5B9DFF;\r\n  line-height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  &::before {\r\n    content: '';\r\n    width: 2px;\r\n    height: 21px;\r\n    background: #5bcbff;\r\n    border-radius: 2px;\r\n    margin-right: 32px;\r\n  }\r\n}\r\n.fm-field {\r\n  border-radius: 0;\r\n}\r\n.login-container {\r\n  height: 100%;\r\n  background: url('../../assets/img/login/login_bg.png');\r\n  background-size: 100% 100%;\r\n  background-repeat: no-repeat;\r\n}\r\n.logo-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  padding-top: 164px;\r\n  .logo-pic {\r\n    width: 120px;\r\n    height: 120px;\r\n    background-image: url('../../assets/img/login/new-logo.png');\r\n    background-repeat: no-repeat;\r\n    background-size: 100%;\r\n  }\r\n  .logo-title {\r\n    width: 279px;\r\n    height: 181px;\r\n    background-image: url('../../assets/img/login/login-logo.png');\r\n    background-repeat: no-repeat;\r\n    background-size: 100%;\r\n    // margin-top: 32px;\r\n    // font-size: 60px;\r\n    // font-family: SourceHanSansCN-Bold, SourceHanSansCN;\r\n    // font-weight: bold;\r\n    // color: #ffffff;\r\n    // line-height: 90px;\r\n    // letter-spacing: 8px;\r\n    // text-shadow: 0px 6px 8px rgba(1, 17, 50, 0.2);\r\n    // background-clip: text;\r\n  }\r\n}\r\n.tip {\r\n  margin-bottom: 44px;\r\n  font-size: 36px;\r\n  font-weight: 600;\r\n}\r\n.form-container {\r\n  width: 100%;\r\n  margin: 72px 0 0 0;\r\n  position: relative;\r\n  // background: url('../../assets/img/login/login_form_bg.png');\r\n  // background-size: 100% 100%;\r\n  // background-repeat: no-repeat;\r\n  height: calc(100% - 173px);\r\n  &::after{\r\n    content: '';\r\n    position: absolute;\r\n    width: 200%;\r\n    height: 100%;\r\n    left: -50%;\r\n    top: 0;\r\n    border-radius: 50% 50% 0 0;\r\n    background: #fff;\r\n    z-index: 1;\r\n    overflow: hidden;\r\n  }\r\n  /deep/ .fm-tabs__nav {\r\n    background-color: transparent;\r\n    margin: 0 147px;\r\n    .fm-tab {\r\n      color: rgba(25, 25, 25, 0.4);\r\n      font-weight: 600;\r\n      font-family: PingFangSC-Semibold, PingFang SC;\r\n    }\r\n    .fm-tab--active {\r\n      color: rgba(25, 25, 25, 1);\r\n    }\r\n    .fm-tabs__line {\r\n      background: rgba(30, 108, 218, 1);\r\n      border-radius: 6px;\r\n      width: 50px;\r\n    }\r\n  }\r\n  .form-content {\r\n    padding: 0 50px;\r\n    margin-top: 68px;\r\n    .sub-menu {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      color: #999999;\r\n      font-size: 28px;\r\n      margin-top: -13px;\r\n      /deep/.fm-checkbox__label {\r\n        font-size: 24px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #555555;\r\n        line-height: 33px;\r\n        letter-spacing: 2px;\r\n      }\r\n    }\r\n  }\r\n}\r\n/deep/.fm-checkbox__icon {\r\n  background-color: #f5f5f5;\r\n  height: 24px;\r\n  border-radius: 3px;\r\n}\r\n/deep/.fm-icon {\r\n  border: none;\r\n  width: 24px;\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;  \r\n}\r\n/deep/ .fm-icon-success:before {\r\n  height: 24px;\r\n  font-size: 24px;\r\n  position: absolute;\r\n  left: -1px;\r\n  top: -1px;\r\n}\r\n/deep/.fm-field__control {\r\n  color: #BDC3CD !important;\r\n  &::placeholder {\r\n    color: #BDC3CD !important;\r\n  }\r\n}\r\n.field-username,\r\n.field-pwd {\r\n  // background-color: #f5f5f5;\r\n  // height: 75px;\r\n  margin-bottom: 57px;\r\n  background: #F1F5FC;\r\n  border-radius: 42px;\r\n  height: 84px;\r\n  display: flex;\r\n  align-items: center;\r\n  /deep/ .fm-cell__value {\r\n    .fm-field__body {\r\n      .fm-icon-clear {\r\n        &::before {\r\n          font-size: 24px;\r\n        }\r\n      }\r\n    }\r\n  }  \r\n}\r\n.field-pwd {\r\n  /deep/ .fm-cell__value {\r\n    .fm-field__body {\r\n      .fm-icon-clear {\r\n        &::before {\r\n          position: absolute;\r\n          bottom: -10px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.field-active {\r\n  /deep/.fm-field__control {\r\n    color: #191919 !important;\r\n  }\r\n}\r\n\r\n.footer-container {\r\n  padding-top: 260px;\r\n  display: flex;\r\n  justify-content: center;\r\n  .logo-footer {\r\n    width: 134px;\r\n    height: 20px;\r\n  }\r\n}\r\n\r\n.login-btn-container {\r\n  margin: 0 auto;\r\n  padding-top: 64px;\r\n  height: 80px;\r\n  .login-btn {\r\n    width: 100%;\r\n    height: 100%;\r\n    font-size: 32px;\r\n    font-family: PingFangSC-Regular, PingFang SC;\r\n    font-weight: 400;\r\n    color: #ffffff;\r\n    line-height: 45px;\r\n    border-radius: 44px;\r\n    border: none;\r\n    background: linear-gradient(90deg, #247BFD 0%, #3AA0EE 100%);\r\n  }\r\n}\r\n.fm-field--error ::placeholder {\r\n  color: #BDC3CD;\r\n}\r\n/deep/ .fm-field--error .fm-field__control,\r\n.fm-field--error .fm-field__control::placeholder {\r\n  color: #999999;\r\n}\r\n.fm-field ::placeholder {\r\n  color: #999999;\r\n}\r\n</style>\r\n"]}]}