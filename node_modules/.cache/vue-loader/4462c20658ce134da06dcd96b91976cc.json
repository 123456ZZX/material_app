{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\FormCenter\\components\\FlowEntrust\\index.vue?vue&type=style&index=0&id=996e0212&scoped=true&lang=less","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\FormCenter\\components\\FlowEntrust\\index.vue","mtime":1705912800022},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouYXBwcm92ZS10ZXh0YXJlYSB7DQogIC8vIG1hcmdpbi10b3A6IDQlOw0KICAmX19jZWxsIHsNCiAgICBwYWRkaW5nOiAzMHB4IDEycHg7DQogICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogIH0NCg0KICAvLyAvZGVlcC8gLmZtLWNlbGxfX3RpdGxlIHsNCiAgLy8gICBtYXJnaW4tbGVmdDogMHB4Ow0KICAvLyB9DQoNCiAgL2RlZXAvIC5mbS1jZWxsLS1yZXF1aXJlZDo6YmVmb3JlIHsNCiAgICBsZWZ0OiAtMnB4ICFpbXBvcnRhbnQ7DQogICAgdG9wOiAyOHB4Ow0KICB9DQoNCiAgL2RlZXAvIC5mbS1maWVsZF9fd29yZC1saW1pdCB7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICB9DQp9DQoNCi8vIOimhueblumAieS6uue7hOS7tuWOn+agt+W8jw0KLm5ldy1uYW1lIC9kZWVwLyAuZm0tY2VsbC0tY2xpY2thYmxlLmZtLWNlbGwtLXJlcXVpcmVkIHsNCiAgcGFkZGluZy1sZWZ0OiAxMHB4Ow0KICBwYWRkaW5nLXJpZ2h0OiAxMHB4Ow0KfQ0KDQouYmxhY2sgew0KICBmb250LXNpemU6IDI4cHg7DQogIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLVJlZ3VsYXIsIFBpbmdGYW5nIFNDOw0KICBmb250LXdlaWdodDogNDAwOw0KICBjb2xvcjogIzg4ODsNCiAgd29yZC1icmVhazogYnJlYWstYWxsOw0KfQ0KDQouYXBwcm92ZS10aXRsZSB7DQogIGZvbnQtc2l6ZTogMzJweDsNCiAgZm9udC1mYW1pbHk6IFBpbmdGYW5nU0MtUmVndWxhciwgUGluZ0ZhbmcgU0M7DQogIGZvbnQtd2VpZ2h0OiA0MDA7DQogIGNvbG9yOiByZ2JhKDc1LCA3NSwgNzUsIDEpOw0KICBsaW5lLWhlaWdodDogNjBweDsNCn0NCg0KLmxhYmVsLWJlZm9yZSB7DQogIHdpZHRoOiA4cHg7DQogIGhlaWdodDogMjJweDsNCiAgYmFja2dyb3VuZDogIzRhOGRmZjsNCiAgbWFyZ2luLXJpZ2h0OiA3cHg7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCn0NCg0KLmFwcHJvdmUtdGV4dGFyZWEtZW50cnVzdCAvZGVlcC8gLmZtLWNlbGxfX3ZhbHVlIHsNCiAgYm9yZGVyOiAxcHggc29saWQgI2JiYmJiYjsNCiAgb3BhY2l0eTogMC41Ow0KICBwYWRkaW5nOiAyMHB4Ow0KICBtYXgtaGVpZ2h0OiA0MDBweDsNCn0NCg0KL2RlZXAvIC5mbS1maWVsZC0tbWluLWhlaWdodCAuZm0tZmllbGRfX2NvbnRyb2wgew0KICBtaW4taGVpZ2h0OiAzNjBweDsNCn0NCi5idG4tYXJlYS1lbnRydXN0IHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICB3aWR0aDogMTAwJTsNCiAgbWFyZ2luLXRvcDogNjBweDsNCn0NCg0KLmVudHJ1c3QtYnRuIHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBmb250LXNpemU6IDMycHg7DQogIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLU1lZGl1bSwgUGluZ0ZhbmcgU0M7DQogIGZvbnQtd2VpZ2h0OiA1MDA7DQogIGNvbG9yOiAjZmZmZmZmOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGQ4NmZmOw0KICBib3JkZXItcmFkaXVzOiAycHg7DQogIGhlaWdodDogOTBweDsNCiAgbGluZS1oZWlnaHQ6IDkwcHg7DQogIG1hcmdpbjogMCA0MXB4Ow0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAmIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/FormCenter/components/FlowEntrust","sourcesContent":["<template>\r\n  <div class=\"approve-textarea\">\r\n    <fm-cell-group label-width=\"100px\" :gutter=\"0\">\r\n      <fm-cell title=\"当前环节\" value-align=\"right\" class=\"approve-textarea__cell\">\r\n        <div class=\"black\">{{ row.taskName }}</div>\r\n      </fm-cell>\r\n      <fm-cell title=\"原执行人\" value-align=\"right\" class=\"approve-textarea__cell\">\r\n        <div class=\"black\">{{ row.taskAsigneeName }}</div>\r\n      </fm-cell>\r\n      <select-user\r\n        class=\"new-name\"\r\n        :userFullname.sync=\"newName\"\r\n        :userName.sync=\"userID\"\r\n        title=\"新执行人\"\r\n        :multiple=\"false\"\r\n        :required=\"true\"\r\n        ref=\"executeLeader\"\r\n      ></select-user>\r\n      <div class=\"approve-title\"><span class=\"label-before\"></span>委托原因</div>\r\n      <fm-field\r\n        class=\"approve-textarea-entrust\"\r\n        type=\"textarea\"\r\n        placeholder=\"请输入委托原因\"\r\n        show-word-limit\r\n        :maxlength=\"50\"\r\n        v-model=\"reason\"\r\n      ></fm-field>\r\n      <div class=\"btn-area-entrust\" @click=\"entrust\">\r\n        <div class=\"entrust-btn\">确认委托</div>\r\n      </div>\r\n    </fm-cell-group>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { CURRENT_ROW } from '@/store/State/stateTypes'\r\nimport selectUser from '@/components/select-user'\r\nimport { doTrust } from './api'\r\nimport { Field, Cell, CellGroup, Toast } from 'fawkes-mobile-lib'\r\nexport default {\r\n  components: {\r\n    selectUser,\r\n    [Field.name]: Field,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [Toast.name]: Toast,\r\n  },\r\n  props: {\r\n    urlAndEntity: {\r\n      type: Object,\r\n      default() {},\r\n    },\r\n    formData: {\r\n      type: Object,\r\n      default() {},\r\n    },\r\n    detailParam: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      },\r\n    },\r\n    beforeSubmit: {\r\n      type: Function,\r\n      default: null,\r\n    },\r\n    formName: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      newName: '', // 委托人\r\n      userID: '', //委托人用户名\r\n      reason: '', // 委托原因\r\n    }\r\n  },\r\n  computed: {\r\n    row() {\r\n      // 页面中使用row来指代当前记录\r\n      return this.$store.state[CURRENT_ROW]\r\n    },\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    entrust() {\r\n      // 选人过来的员工号（也是“新执行人：的员工号）\r\n      // let userID = this.$refs.executeLeader.getValues('userName')\r\n      // let userID = \"wei_jt\";\r\n      // 原执行人的员工号也是登陆人的员工号\r\n      let user = this.row.taskAsignee\r\n      if (this.userID == '') {\r\n        // 显示文字\r\n        Toast('请选择新执行人', 'middle')\r\n        return false\r\n      }\r\n      if (user == this.userID) {\r\n        Toast('不能委托给自己！', 'middle')\r\n        return\r\n      }\r\n\r\n      if (!this.reason) {\r\n        Toast('请输入委托原因', 'middle')\r\n        return false\r\n      }\r\n      this.doTrust(this.userID)\r\n    },\r\n    // 委托\r\n    doTrust(userID) {\r\n      doTrust({\r\n        taskId: this.row.taskId,\r\n        comment: this.reason,\r\n        userName: userID,\r\n      }).then((res) => {\r\n        if (res.status) {\r\n          this.$toast('提交成功', 'middle')\r\n          setTimeout(() => {\r\n            this.$toast.clear()\r\n            this.$router.push('/todo?refresh=true')\r\n          }, 1000)\r\n        } else {\r\n          this.$toast(res.data.message, 'middle')\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.approve-textarea {\r\n  // margin-top: 4%;\r\n  &__cell {\r\n    padding: 30px 12px;\r\n    line-height: 40px;\r\n  }\r\n\r\n  // /deep/ .fm-cell__title {\r\n  //   margin-left: 0px;\r\n  // }\r\n\r\n  /deep/ .fm-cell--required::before {\r\n    left: -2px !important;\r\n    top: 28px;\r\n  }\r\n\r\n  /deep/ .fm-field__word-limit {\r\n    margin-top: 0px;\r\n  }\r\n}\r\n\r\n// 覆盖选人组件原样式\r\n.new-name /deep/ .fm-cell--clickable.fm-cell--required {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.black {\r\n  font-size: 28px;\r\n  font-family: PingFangSC-Regular, PingFang SC;\r\n  font-weight: 400;\r\n  color: #888;\r\n  word-break: break-all;\r\n}\r\n\r\n.approve-title {\r\n  font-size: 32px;\r\n  font-family: PingFangSC-Regular, PingFang SC;\r\n  font-weight: 400;\r\n  color: rgba(75, 75, 75, 1);\r\n  line-height: 60px;\r\n}\r\n\r\n.label-before {\r\n  width: 8px;\r\n  height: 22px;\r\n  background: #4a8dff;\r\n  margin-right: 7px;\r\n  display: inline-block;\r\n}\r\n\r\n.approve-textarea-entrust /deep/ .fm-cell__value {\r\n  border: 1px solid #bbbbbb;\r\n  opacity: 0.5;\r\n  padding: 20px;\r\n  max-height: 400px;\r\n}\r\n\r\n/deep/ .fm-field--min-height .fm-field__control {\r\n  min-height: 360px;\r\n}\r\n.btn-area-entrust {\r\n  position: relative;\r\n  width: 100%;\r\n  margin-top: 60px;\r\n}\r\n\r\n.entrust-btn {\r\n  text-align: center;\r\n  font-size: 32px;\r\n  font-family: PingFangSC-Medium, PingFang SC;\r\n  font-weight: 500;\r\n  color: #ffffff;\r\n  background-color: #4d86ff;\r\n  border-radius: 2px;\r\n  height: 90px;\r\n  line-height: 90px;\r\n  margin: 0 41px;\r\n}\r\n</style>\r\n"]}]}