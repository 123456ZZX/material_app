{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\App.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\App.vue","mtime":1705912915765},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqLw0KLy8g6K+l57uE5Lu26ZyA6KaB5ZKM55yf5py65Lqk5LqS77yM5Lya5Ye6546w5Y6f55SfIEFQSSDmnKrlrprkuYnnmoTmg4XlhrXvvIzmlYXlhajlsYDlupTnlKjlsY/olL0gbm8tdW5kZWYg6KeE5YiZDQppbXBvcnQgeyBsb2FkTGFuZ3VhZ2VBc3luYywgZ2V0TGFuZ0NvbmZpZyB9IGZyb20gJ0AvdXRpbHMvbG9jYWxlJyAvL+W8leWFpeiOt+WPluezu+e7n+ivreiogOeahOaWueazlQ0KaW1wb3J0IHsgVG9hc3QgfSBmcm9tICdmYXdrZXMtbW9iaWxlLWxpYicNCmltcG9ydCB7DQogIGNsaWNrT3RoZXIsDQogIHNjcm9sbCwNCiAgZ2V0U2Nyb2xsVG9wLA0KICBnZXRTY3JvbGxIZWlnaHQsDQogIGdldFdpbmRvd0hlaWdodCwNCn0gZnJvbSAnQC91dGlscy9tb25pdG9yJw0KaW1wb3J0IHsgTEFOR19GUk9NX0tFWSB9IGZyb20gJ0AvY29tbW9uL2NvbnN0YW50Jw0KaW1wb3J0IHsgU0VUX1NUQVRVU19CQVJfSEVJR0hUIH0gZnJvbSAnQC9zdG9yZS9NdXRhdGlvbi9tdXRhdGlvblR5cGVzJw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgeyBHRVRfRU5VTSB9IGZyb20gJ0Avc3RvcmUvQWN0aW9uL2FjdGlvblR5cGVzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBbVG9hc3QubmFtZV06IFRvYXN0LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzdGF0dXNCYXJIZWlnaHQ6IG51bGwsDQogICAgICBuZWVkVXBkYXRlOiB0cnVlLA0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsnaXNMb2dpbiddKSwNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAkcm91dGUodG8pIHsNCiAgICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgew0KICAgICAgICB5dWFuY2h1Py5zdGF0dXNCYXI/LmdldFN0YXR1c0JhckhlaWdodCgocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KFNFVF9TVEFUVVNfQkFSX0hFSUdIVCwgcmVzKQ0KICAgICAgICAgIGlmICh0by5wYXRoID09ICcvaW5kZXgnKSB7DQogICAgICAgICAgICB5dWFuY2h1LnN0YXR1c0Jhci5zdHlsZUxpZ2h0Q29udGVudCgpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHl1YW5jaHUuc3RhdHVzQmFyLnN0eWxlRGVmYXVsdCgpDQogICAgICAgICAgICB0aGlzLiRyZWZzLmFwcC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1oZWlnaHQnLCByZXMgKyAncHgnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5vbkxvYWQoKQ0KICAgIC8vIOWtl+WFuOafpeivog0KICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goR0VUX0VOVU0pDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdGhlciwgdHJ1ZSkNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy50cmlnZ2VyU2Nyb2wsIHRydWUpDQogICAgLy8g6I635Y+W5omL5py657O757uf6K+t6KiA77yM5ZCM5q2l5YiH5o2i6K+t6KiADQogICAgY29uc3QgbGFuZ3VhZ2UgPSBnZXRMYW5nQ29uZmlnKCkNCiAgICAvLyBUT0RPOiDogIPomZHmmK/lkKbmnInlv4XopoHlrZjlgqjlnKhsb2NhbHN0b3JhZ2XvvIzlkI7mnJ/kvJjljJbosIPmlbTngrkNCiAgICB0aGlzLiRzdG9yYWdlLnNldCgnaTE4bkxvY2FsZScsIGxhbmd1YWdlKQ0KICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gbGFuZ3VhZ2UNCiAgICBMQU5HX0ZST01fS0VZLm1hcCgoaXRlbSkgPT4gew0KICAgICAgaWYgKGl0ZW0ua2V5ID09IHRoaXMuJGkxOG4ubG9jYWxlKSB7DQogICAgICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gaXRlbS5rZXkNCiAgICAgICAgLy8gbG9hZExhbmd1YWdlQXN5bmMoaXRlbS5rZXksIGl0ZW0ubG9jYWxlLCB0aGlzKQ0KICAgICAgfQ0KICAgIH0pDQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCBmdW5jdGlvbiAoKSB7fSkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOmhtemdouWKoOi9veWQjua3u+WKoOWQhOS6i+S7tuebkeWQrA0KICAgIG9uTG9hZCgpIHsNCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgdGhpcy5vbkRldmljZVJlYWR5LCBmYWxzZSkNCiAgICB9LA0KICAgIC8vIENvcmRvdmHliqDovb3lrozmr5UNCiAgICBvbkRldmljZVJlYWR5KCkgew0KICAgICAgaWYgKHR5cGVvZiB5dWFuY2h1ICE9ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHl1YW5jaHUuc3RhdHVzQmFyLnN0eWxlRGVmYXVsdCgpDQogICAgICB9DQogICAgICAvL+WIpOaWreaYr+WQpumcgOimgeeDreabtOaWsA0KICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigNCiAgICAgICAgJ2NoY3Bfbm90aGluZ1RvVXBkYXRlJywNCiAgICAgICAgdGhpcy5ub3RoaW5nVG9VcGRhdGUsDQogICAgICAgIGZhbHNlDQogICAgICApDQogICAgICAvL+acieS6m+mhueebruS4jemcgOimgeeDreabtOaWsA0KICAgICAgLy8gaWYgKHRoaXMubmVlZFVwZGF0ZSkgew0KICAgICAgLy8gICAvLyB0aGlzLiRsb2FkaW5nLnNob3coeyB0aXRsZTogJ+ajgOafpeabtOaWsOS4rScgfSkNCiAgICAgIC8vICAgVG9hc3QubG9hZGluZyh7DQogICAgICAvLyAgICAgbWVzc2FnZTogJ+ajgOafpeabtOaWsOS4rScsDQogICAgICAvLyAgICAgZHVyYXRpb246IDAsDQogICAgICAvLyAgICAgb3ZlcmxheTogdHJ1ZSwNCiAgICAgIC8vICAgICBmb3JiaWRDbGljazogdHJ1ZSwNCiAgICAgIC8vICAgICBsb2FkaW5nVHlwZTogJ3NwaW5uZXInDQogICAgICAvLyAgIH0pDQogICAgICAvLyAgIHl1YW5jaHUuY2hjcC5mZXRjaFVwZGF0ZSh0aGlzLmZldGNoVXBkYXRlQ2FsbGJhY2spDQogICAgICAvLyB9DQogICAgICAvLyBtYWluLmpz5Lit5a6a5LmJJGJhY2sNCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JhY2tidXR0b24nLCB0aGlzLiRiYWNrLCBmYWxzZSkgLy8g6buY6K6k6L+U5Zue5LiK5LiA57qn6Lev55Sx77yM5YW25LuW5oOF5Ya16Ieq6KGM5aSE55CGDQogICAgfSwNCiAgICAvL+aXoOeDreabtOaWsA0KICAgIG5vdGhpbmdUb1VwZGF0ZSgpIHsNCiAgICAgIHRoaXMubmVlZFVwZGF0ZSA9IGZhbHNlDQogICAgfSwNCiAgICBmZXRjaFVwZGF0ZUNhbGxiYWNrKGVycm9yLCBkYXRhKSB7DQogICAgICBpZiAoZXJyb3IpIHsNCiAgICAgICAgLy/msqHmm7TmlrANCiAgICAgICAgLy8gdGhpcy4kbG9hZGluZy5oaWRlKCkNCiAgICAgICAgVG9hc3QuY2xlYXIoKTsNCiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgSlNPTi5zdHJpbmdpZnkoZXJyb3IpKQ0KICAgICAgICBjb25zb2xlLmxvZygnZGF0YScsIEpTT04uc3RyaW5naWZ5KGRhdGEpKQ0KICAgICAgICBpZiAoZXJyb3IuY29kZSA9PSAyKSB7DQogICAgICAgIH0gZWxzZSBpZiAoZXJyb3IuY29kZSA9PSAtMikgew0KICAgICAgICAgIFRvYXN0KCfmgqjnmoRBcHDniYjmnKzov4fkvY7vvIzor7fljYfnuqcnKQ0KICAgICAgICAgIC8v5oKo55qEQXBw5Y6f55Sf5qGG5p6254mI5pys6L+H5L2O77yM6K+35Y2H57qnDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgLy/moLnmja5lcnJvci5jb2Rl5a+56I635Y+W5pu05paw57uT5p6c5YGa5o+Q56S655So5oi344CB6YeN5paw6LCD55So5pu05paw5qOA5p+l5pa55rOV562J5YW25LuW6aKd5aSW5aSE55CGDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8v5qOA5p+l5pu05paw5q2j5bi477yM5byA5aeL5a6J6KOF5pu05pawDQogICAgICAgIHl1YW5jaHUuY2hjcC5pbnN0YWxsVXBkYXRlKHRoaXMuaW5zdGFsbGF0aW9uQ2FsbGJhY2spDQogICAgICB9DQogICAgfSwNCiAgICBpbnN0YWxsYXRpb25DYWxsYmFjayhlcnJvcikgew0KICAgICAgaWYgKGVycm9yKSB7DQogICAgICAgIC8vIHRoaXMuJGxvYWRpbmcuaGlkZSgpDQogICAgICAgIFRvYXN0LmNsZWFyKCk7DQogICAgICAgIC8v5qC55o2uZXJyb3IuY29kZeWvueWuieijheabtOaWsOW8guW4uOWBmuaPkOekuueUqOaIt+OAgemHjeaWsOiwg+eUqOWuieijheabtOaWsOaWueazleetieWFtuS7lumineWkluWkhOeQhg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgVG9hc3QoJ+eDreabtOaWsOWujOaIkCcpDQogICAgICAgIC8vIHRoaXMuJGxvYWRpbmcuaGlkZSgpDQogICAgICAgIFRvYXN0LmNsZWFyKCk7DQogICAgICB9DQogICAgfSwNCiAgICB0cmlnZ2VyU2Nyb2woKSB7DQogICAgICBpZiAoTWF0aC5yb3VuZChnZXRTY3JvbGxUb3AoKSArIGdldFdpbmRvd0hlaWdodCgpKSA9PSBnZXRTY3JvbGxIZWlnaHQoKSkgew0KICAgICAgICBzY3JvbGwoKQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9DQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<!--\r\n * @Author: xie_sm\r\n * @Date: 2022-02-28 16:07:02\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2022-06-16 15:40:47\r\n * @FilePath: \\mobile-template\\src\\App.vue\r\n * @Description:\r\n *\r\n-->\r\n<template>\r\n  <div id=\"app\" ref=\"app\">\r\n    <transition name=\"fade\">\r\n      <keep-alive>\r\n        <router-view v-if=\"$route.meta.keepAlive\" class=\"router\"></router-view>\r\n      </keep-alive>\r\n    </transition>\r\n    <transition name=\"fade\">\r\n      <router-view v-if=\"!$route.meta.keepAlive\" class=\"router\"></router-view>\r\n    </transition>\r\n  </div>\r\n</template>\r\n<script>\r\n/* eslint-disable no-undef */\r\n// 该组件需要和真机交互，会出现原生 API 未定义的情况，故全局应用屏蔽 no-undef 规则\r\nimport { loadLanguageAsync, getLangConfig } from '@/utils/locale' //引入获取系统语言的方法\r\nimport { Toast } from 'fawkes-mobile-lib'\r\nimport {\r\n  clickOther,\r\n  scroll,\r\n  getScrollTop,\r\n  getScrollHeight,\r\n  getWindowHeight,\r\n} from '@/utils/monitor'\r\nimport { LANG_FROM_KEY } from '@/common/constant'\r\nimport { SET_STATUS_BAR_HEIGHT } from '@/store/Mutation/mutationTypes'\r\nimport { mapGetters } from 'vuex'\r\nimport { GET_ENUM } from '@/store/Action/actionTypes'\r\n\r\nexport default {\r\n  components: {\r\n    [Toast.name]: Toast,\r\n  },\r\n  data() {\r\n    return {\r\n      statusBarHeight: null,\r\n      needUpdate: true,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['isLogin']),\r\n  },\r\n  watch: {\r\n    $route(to) {\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu?.statusBar?.getStatusBarHeight((res) => {\r\n          this.$store.commit(SET_STATUS_BAR_HEIGHT, res)\r\n          if (to.path == '/index') {\r\n            yuanchu.statusBar.styleLightContent()\r\n          } else {\r\n            yuanchu.statusBar.styleDefault()\r\n            this.$refs.app.style.setProperty('--height', res + 'px')\r\n          }\r\n        })\r\n      }\r\n    },\r\n  },\r\n async created() {\r\n    this.onLoad()\r\n    // 字典查询\r\n   await this.$store.dispatch(GET_ENUM)\r\n  },\r\n  mounted() {\r\n    window.addEventListener('click', clickOther, true)\r\n    window.addEventListener('scroll', this.triggerScrol, true)\r\n    // 获取手机系统语言，同步切换语言\r\n    const language = getLangConfig()\r\n    // TODO: 考虑是否有必要存储在localstorage，后期优化调整点\r\n    this.$storage.set('i18nLocale', language)\r\n    this.$i18n.locale = language\r\n    LANG_FROM_KEY.map((item) => {\r\n      if (item.key == this.$i18n.locale) {\r\n        this.$i18n.locale = item.key\r\n        // loadLanguageAsync(item.key, item.locale, this)\r\n      }\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('storage', function () {})\r\n  },\r\n  methods: {\r\n    // 页面加载后添加各事件监听\r\n    onLoad() {\r\n      document.addEventListener('deviceready', this.onDeviceReady, false)\r\n    },\r\n    // Cordova加载完毕\r\n    onDeviceReady() {\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.statusBar.styleDefault()\r\n      }\r\n      //判断是否需要热更新\r\n      document.addEventListener(\r\n        'chcp_nothingToUpdate',\r\n        this.nothingToUpdate,\r\n        false\r\n      )\r\n      //有些项目不需要热更新\r\n      // if (this.needUpdate) {\r\n      //   // this.$loading.show({ title: '检查更新中' })\r\n      //   Toast.loading({\r\n      //     message: '检查更新中',\r\n      //     duration: 0,\r\n      //     overlay: true,\r\n      //     forbidClick: true,\r\n      //     loadingType: 'spinner'\r\n      //   })\r\n      //   yuanchu.chcp.fetchUpdate(this.fetchUpdateCallback)\r\n      // }\r\n      // main.js中定义$back\r\n      document.addEventListener('backbutton', this.$back, false) // 默认返回上一级路由，其他情况自行处理\r\n    },\r\n    //无热更新\r\n    nothingToUpdate() {\r\n      this.needUpdate = false\r\n    },\r\n    fetchUpdateCallback(error, data) {\r\n      if (error) {\r\n        //没更新\r\n        // this.$loading.hide()\r\n        Toast.clear();\r\n        console.log('error', JSON.stringify(error))\r\n        console.log('data', JSON.stringify(data))\r\n        if (error.code == 2) {\r\n        } else if (error.code == -2) {\r\n          Toast('您的App版本过低，请升级')\r\n          //您的App原生框架版本过低，请升级\r\n        } else {\r\n          //根据error.code对获取更新结果做提示用户、重新调用更新检查方法等其他额外处理\r\n        }\r\n      } else {\r\n        //检查更新正常，开始安装更新\r\n        yuanchu.chcp.installUpdate(this.installationCallback)\r\n      }\r\n    },\r\n    installationCallback(error) {\r\n      if (error) {\r\n        // this.$loading.hide()\r\n        Toast.clear();\r\n        //根据error.code对安装更新异常做提示用户、重新调用安装更新方法等其他额外处理\r\n      } else {\r\n        Toast('热更新完成')\r\n        // this.$loading.hide()\r\n        Toast.clear();\r\n      }\r\n    },\r\n    triggerScrol() {\r\n      if (Math.round(getScrollTop() + getWindowHeight()) == getScrollHeight()) {\r\n        scroll()\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n#app {\r\n  height: calc(100vh - constant(safe-area-inset-bottom));\r\n  height: calc(100vh - env(safe-area-inset-bottom));\r\n  background-color: #fff;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  //ios底部适配\r\n\r\n  padding-bottom: constant(safe-area-inset-bottom); //兼容 IOS<11.2\r\n\r\n  padding-bottom: env(safe-area-inset-bottom); //兼容 IOS>11.2\r\n}\r\n/deep/.fm-nav-bar {\r\n  padding-top: var(--height);\r\n}\r\n/deep/.fm-list__finished-text {\r\n  padding-bottom: var(--height);\r\n}\r\n</style>\r\n"]}]}