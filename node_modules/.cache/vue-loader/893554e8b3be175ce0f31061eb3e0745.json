{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\components\\select-org\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\components\\select-org\\index.vue","mtime":1705912799957},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgew0KICBOYXZCYXIsDQogIFNlYXJjaCwNCiAgQ2VsbCwNCiAgQ2VsbEdyb3VwLA0KICBJbWFnZSwNCiAgTGlzdCwNCiAgUG9wdXAsDQogIEJ1dHRvbiwNCiAgUmFkaW9Hcm91cCwNCiAgUmFkaW8sDQogIFRhZywNCiAgQ2hlY2tib3gsDQogIENoZWNrYm94R3JvdXAsDQogIE5vdGlmeSwNCn0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInDQppbXBvcnQgeyBnZXREZXB0IH0gZnJvbSAnLi4vc2VsZWN0LXVzZXIvYXBpJw0KaW1wb3J0IHsgU1RBVFVTX0JBUl9IRUlHSFQgfSBmcm9tICdAL3N0b3JlL1N0YXRlL3N0YXRlVHlwZXMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIFtOYXZCYXIubmFtZV06IE5hdkJhciwNCiAgICBbU2VhcmNoLm5hbWVdOiBTZWFyY2gsDQogICAgW0NlbGwubmFtZV06IENlbGwsDQogICAgW0NlbGxHcm91cC5uYW1lXTogQ2VsbEdyb3VwLA0KICAgIFtJbWFnZS5uYW1lXTogSW1hZ2UsDQogICAgW0xpc3QubmFtZV06IExpc3QsDQogICAgW1BvcHVwLm5hbWVdOiBQb3B1cCwNCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24sDQogICAgW1JhZGlvR3JvdXAubmFtZV06IFJhZGlvR3JvdXAsDQogICAgW1JhZGlvLm5hbWVdOiBSYWRpbywNCiAgICBbVGFnLm5hbWVdOiBUYWcsDQogICAgW0NoZWNrYm94Lm5hbWVdOiBDaGVja2JveCwNCiAgICBbQ2hlY2tib3hHcm91cC5uYW1lXTogQ2hlY2tib3hHcm91cCwNCiAgICBbTm90aWZ5LkNvbXBvbmVudC5uYW1lXTogTm90aWZ5LkNvbXBvbmVudCwNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBkZXB0SWQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgIH0sDQogICAgZGVwdE5hbWU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgIH0sDQogICAgdGl0bGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICfpgInmi6npg6jpl6gnLA0KICAgIH0sDQogICAgbXVsdGlwbGU6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZSwNCiAgICB9LA0KICAgIGRpc2FibGVkOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UsDQogICAgfSwNCiAgICBwbGFjZWhvbGRlcjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycsDQogICAgfSwNCiAgICByZXF1aXJlZDogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlLA0KICAgIH0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRyZWVMaXN0OiBbXSwgLy/nu4Tnu4fmnrbmnoTmlbDmja4NCiAgICAgIHRyZWVEYXRhOiB7fSwNCiAgICAgIHJlc3VsdDogW10sIC8v6YOo6Zeo6YCJ5oup57uT5p6cDQogICAgICBkZXB0TGlzdDogWyfnu4Tnu4fmnrbmnoQnXSwgLy/orrDlvZXorr/pl67mt7HluqZc5L+u5pS5bmF2VGl0bGUNCiAgICAgIGRpc3BsYXlMaXN0OiBbXSwgLy8g5bGV56S65bey6YCJ6YOo6Zeo5pWw57uEDQogICAgICBkaXNwbGF5RGF0YTogW10sIC8vIOWxleekuuW3sumAieeahOOAgeehruiupOWQjueahOaVsOaNrg0KICAgICAgc2VsZWN0TGlzdDogW10sDQogICAgICBpbmRleDogMCwNCiAgICAgIGZsYWc6IGZhbHNlLA0KICAgICAgc2VhcmNoVmFsdWU6ICcnLA0KICAgICAgc2hvdzogZmFsc2UsDQogICAgICBuYXZUaXRsZTogJ+e7hOe7h+acuuaehCcsDQogICAgICB2aWV3U2hvdzogZmFsc2UsDQogICAgICBub3RpZnlTaG93OiBmYWxzZSwNCiAgICAgIG5vdGlmeVRleHQ6ICcnLA0KICAgICAgY2hlY2tlZE5hbWU6ICcnLA0KICAgICAgY2hlY2tlZE5hbWVSZXQ6IFtdLCAvL+WNlemAiee7k+aenA0KICAgICAgY2hhbmdlUGFnZWQ6IGZhbHNlLA0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAvLyDpgInkuK3nmoTnu5Pmnpzpm4YNCiAgICB0ZW1wUmVzdWx0KCkgew0KICAgICAgLy8g5aSa6YCJ5pe277yM6I635Y+W5b2T5YmN5bey6YCJ5Lit55qE55So5oi3DQogICAgICBpZiAodGhpcy5tdWx0aXBsZSkgew0KICAgICAgICByZXR1cm4gdGhpcy50cmVlTGlzdD8uZmlsdGVyKChkZXB0KSA9PiBkZXB0LmNoZWNrZWQpDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdGhpcy5jaGVja2VkTmFtZVJldA0KICAgICAgfQ0KICAgIH0sDQogICAgc2VsZWN0VGl0bGUoKSB7DQogICAgICByZXR1cm4gYOW3sumAie+8miAke3RoaXMuZGlzcGxheUxpc3QubGVuZ3RofSDpg6jpl6hgDQogICAgfSwNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBuYXZUaXRsZTogew0KICAgICAgaGFuZGxlcihuZXdWYWwpIHsNCiAgICAgICAgaWYgKCFuZXdWYWwgfHwgbmV3VmFsID09ICcnKSB7DQogICAgICAgICAgdGhpcy5uYXZUaXRsZSA9ICfnu4Tnu4fmnrbmnoQnDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgfSwNCiAgICAvLyDop6PlhrNGb3JtQ2VudGVy5omT5byA6KGo5Y2V5pe25pWw5o2u5LiN5Zue5pi+6Zeu6aKYDQogICAgZGVwdE5hbWU6IHsNCiAgICAgIGhhbmRsZXIoKSB7DQogICAgICAgIHRoaXMuaW5pdCgpDQogICAgICB9LA0KICAgIH0sDQogICAgdGVtcFJlc3VsdChuZXdWYWwsIG9sZFZhbCkgew0KICAgICAgLy8g5aSa6YCJDQogICAgICBpZiAodGhpcy5tdWx0aXBsZSkgew0KICAgICAgICBjb25zdCB0b0FkZCA9IG5ld1ZhbA0KICAgICAgICAgIC5maWx0ZXIoKHVzZXIpID0+ICFvbGRWYWwuc29tZSgodmFsKSA9PiB1c2VyLmlkID09IHZhbC5pZCkpDQogICAgICAgICAgLmZpbHRlcigoYWRkKSA9PiAhdGhpcy5yZXN1bHQuc29tZSgodmFsKSA9PiB2YWwuaWQgPT0gYWRkLmlkKSkNCg0KICAgICAgICBpZiAodG9BZGQubGVuZ3RoID4gMCkgew0KICAgICAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5yZXN1bHQuY29uY2F0KHRvQWRkKQ0KICAgICAgICB9DQoNCiAgICAgICAgbGV0IHRvUmVtb3ZlID0gW10NCg0KICAgICAgICAvLyDlpITnkIbliIfmjaLpg6jpl6jml7bmhI/lpJbmuIXnqbrpgInkuK3orrDlvZXpl67popgNCiAgICAgICAgaWYgKHRoaXMuY2hhbmdlUGFnZWQpIHsNCiAgICAgICAgICB0aGlzLmNoYW5nZVBhZ2VkID0gZmFsc2UNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyDlvoXliKDpmaQgb2xkLW5ldw0KICAgICAgICAgIHRvUmVtb3ZlID0gb2xkVmFsLmZpbHRlcigNCiAgICAgICAgICAgICh1c2VyKSA9PiAhbmV3VmFsLnNvbWUoKHZhbCkgPT4gdXNlci5pZCA9PSB2YWwuaWQpDQogICAgICAgICAgKQ0KICAgICAgICB9DQogICAgICAgIC8vIOWIh+aNoumDqOmXqOaXtuS4jeWIoOmZpO+8jOmBv+WFjeW3sumAieS4reiusOW9leiiq+a4heepug0KICAgICAgICBpZiAodG9SZW1vdmUubGVuZ3RoID4gMCkgew0KICAgICAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5yZXN1bHQuZmlsdGVyKA0KICAgICAgICAgICAgKGl0ZW0pID0+ICF0b1JlbW92ZS5zb21lKCh2YWwpID0+IHZhbC5pZCA9PSBpdGVtLmlkKQ0KICAgICAgICAgICkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g5Y2V6YCJDQogICAgICAgIHRoaXMucmVzdWx0ID0gbmV3VmFsDQogICAgICB9DQogICAgfSwNCiAgICBkZXB0TGlzdChuZXdWYWwpIHsNCiAgICAgIC8vIGFsd2F5cyB0cnVlDQogICAgICBpZiAobmV3VmFsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigNCiAgICAgICAgICAnYmFja2J1dHRvbicsDQogICAgICAgICAgdGhpcy4kcmVmcy5kZXB0UG9wdXAuY2xvc2UsDQogICAgICAgICAgZmFsc2UNCiAgICAgICAgKQ0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgdGhpcy5iYWNrLCBmYWxzZSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHZpZXdTaG93KG5ld1ZhbCkgew0KICAgICAgLy8g6KaG55uW56ys5LiA57qn5by555qE6L+U5Zue5LqL5Lu2DQogICAgICBpZiAobmV3VmFsKSB7DQogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JhY2tidXR0b24nLCB0aGlzLmJhY2ssIGZhbHNlKQ0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgdGhpcy5jYW5jZWwsIGZhbHNlKQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8v5pu05paw54i257uE5Lu2DQogICAgdXBkYXRlUHJvcHModmFsKSB7DQogICAgICBsZXQgZHB0TmFtZVN0ciA9ICcnDQogICAgICBsZXQgZHB0SWRTdHIgPSAnJw0KICAgICAgaWYgKHZhbC5sZW5ndGggPT0gMCkgew0KICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZGVwdElkJywgJycpDQogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpkZXB0TmFtZScsICcnKQ0KICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB2YWwpIC8v5pq06Zyy6YCJ6YOo6Zeo57uE5Lu255qEY2hhbmdl5LqL5Lu25ZCO57ut6ZyA6KaB5Y+v5Lul6LCD55SoDQogICAgICB9IGVsc2Ugew0KICAgICAgICB2YWwuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgIGRwdE5hbWVTdHIgKz0gaXRlbS5jb250ZW50Lm5hbWUgKyAnLCcNCiAgICAgICAgICBkcHRJZFN0ciArPSBpdGVtLmlkICsgJywnDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpkZXB0SWQnLCBkcHRJZFN0ci5zdWJzdHJpbmcoMCwgZHB0SWRTdHIubGVuZ3RoIC0gMSkpDQogICAgICAgIHRoaXMuJGVtaXQoDQogICAgICAgICAgJ3VwZGF0ZTpkZXB0TmFtZScsDQogICAgICAgICAgZHB0TmFtZVN0ci5zdWJzdHJpbmcoMCwgZHB0TmFtZVN0ci5sZW5ndGggLSAxKQ0KICAgICAgICApDQogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHZhbCkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5aSE55CG5pWw5o2uDQogICAgaW5pdCgpIHsNCiAgICAgIGNvbnN0IGRwdE5hbWVBcnIgPSB0aGlzLmRlcHROYW1lID8gdGhpcy5kZXB0TmFtZS5zcGxpdCgnLCcpIDogW10NCiAgICAgIGNvbnN0IGRwdElkQXJyID0gdGhpcy5kZXB0SWQgPyB0aGlzLmRlcHRJZC5zcGxpdCgnLCcpIDogW10NCiAgICAgIGNvbnN0IGxlbiA9IGRwdE5hbWVBcnIubGVuZ3RoDQogICAgICBjb25zdCBsZW4yID0gZHB0SWRBcnIubGVuZ3RoDQogICAgICAvLyDljZXpgInlgLzlpITnkIYNCiAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkgew0KICAgICAgICB0aGlzLmNoZWNrZWROYW1lID0gdGhpcy5kZXB0SWQNCiAgICAgIH0NCg0KICAgICAgaWYgKHRoaXMuZGVwdE5hbWUgJiYgdGhpcy5kZXB0SWQpIHsNCiAgICAgICAgaWYgKGxlbiAhPT0gbGVuMikgew0KICAgICAgICAgIHRoaXMuY29udHJvbE5vdGlmeVNob3coJ+WIneWni+mDqOmXqOaVsOWAvOmUmeivrycpDQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5kaXNwbGF5RGF0YSA9IGRwdElkQXJyLm1hcCgoZGVwdElkLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgcmV0dXJuIHsgZGVwdElkOiBkZXB0SWQsIGRlcHROYW1lOiBkcHROYW1lQXJyW2luZGV4XSB9DQogICAgICAgICAgfSkNCiAgICAgICAgICB0aGlzLnJlc3VsdCA9IEFycmF5LmZyb20odGhpcy5kaXNwbGF5RGF0YSkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICghdGhpcy5kZXB0TmFtZSAmJiAhdGhpcy5kZXB0SWQpIHsNCiAgICAgICAgdGhpcy5kaXNwbGF5TGlzdCA9IFtdDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmNvbnRyb2xOb3RpZnlTaG93KA0KICAgICAgICAgICfor7fovpPlhaXmraPnoa7nmoTpg6jpl6jmlbDmja4s6YOo6ZeoaWTlkozpg6jpl6jlkI3np7DpnIDlkIzml7botYvlgLwnDQogICAgICAgICkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v6YCJ5oup6YOo6ZeoXOaJk+W8gOW8ueWHuuWxgg0KICAgIHNlbGVjdE9yZygpIHsNCiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7DQogICAgICAgIHJldHVybg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLmNoYW5nZVBhZ2VkID0gdHJ1ZQ0KICAgICAgICAvL+iOt+WPluagkeW9ouaVsOaNrg0KICAgICAgICBnZXREZXB0KHt9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLnN0YXR1cykgew0KICAgICAgICAgICAgdGhpcy50cmVlTGlzdCA9IHJlcy5kYXRhDQogICAgICAgICAgICB0aGlzLnRyZWVEYXRhW3RoaXMuaW5kZXhdID0gcmVzLmRhdGENCiAgICAgICAgICAgIHRoaXMuaW5kZXggKz0gMQ0KICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsNCiAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheURhdGEubGVuZ3RoICYmIHRoaXMudHJlZUxpc3QubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5RGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLnRyZWVMaXN0LmZvckVhY2goKG5vZGUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uZGVwdElkID09IG5vZGUuaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQobm9kZSwgJ2NoZWNrZWQnLCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5hbWVSZXQgPSB0aGlzLmRpc3BsYXlEYXRhDQogICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5hbWUgPSB0aGlzLmRpc3BsYXlEYXRhWzBdPy5kZXB0SWQNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVEZWxldGUoaW5kZXgpIHsNCiAgICAgIHRoaXMucmVzdWx0LnNwbGljZShpbmRleCwgMSkNCiAgICAgIHRoaXMuZGlzcGxheURhdGEgPSB0aGlzLnJlc3VsdA0KICAgICAgdGhpcy51cGRhdGVQcm9wcyh0aGlzLnJlc3VsdCkNCiAgICB9LA0KICAgIC8v5qCR5b2i54K55Ye75ZCO5Ye6546w5a2Q57qn55uu5b2V77ya5LiL57qn57uE57uH5py65p6ELOmZkOWItuWPquacieeCueWHu+WkjemAieahhuaJjeiDveabtOaUuemAieS4reeKtuaAgQ0KICAgIGhhbmRsZUNsaWNrKGl0ZW0pIHsNCiAgICAgIC8vIOWPtuWtkOiKgueCueS4jeWPmOabtOmhtemdouagh+mimA0KICAgICAgaWYgKGl0ZW0/LmNoaWxkcmVuPy5sZW5ndGggPiAwKSB7DQogICAgICAgIHRoaXMubmF2VGl0bGUgPSBpdGVtLmNvbnRlbnQubmFtZQ0KICAgICAgfQ0KICAgICAgdGhpcy5jaGFuZ2VQYWdlZCA9IHRydWUNCiAgICAgIC8vIOWtmOWcqOWtkOmDqOmXqA0KICAgICAgaWYgKHRoaXMuanVkZ2VDaGlsZChpdGVtLCB0aGlzLnRyZWVMaXN0KSkgew0KICAgICAgICB0aGlzLmRlcHRMaXN0LnB1c2goaXRlbS5jb250ZW50Lm5hbWUpDQogICAgICAgIHRoaXMudHJlZUxpc3QgPSB0aGlzLmp1ZGdlQ2hpbGQoaXRlbSwgdGhpcy50cmVlTGlzdCkNCiAgICAgICAgdGhpcy5yZXN1bHQuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgIHRoaXMudHJlZUxpc3QuZm9yRWFjaCgobm9kZSkgPT4gew0KICAgICAgICAgICAgaWYgKGl0ZW0uZGVwdElkID09IG5vZGUuaWQpIHsNCiAgICAgICAgICAgICAgdGhpcy4kc2V0KG5vZGUsICdjaGVja2VkJywgdHJ1ZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkgew0KICAgICAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5yZXN1bHQuZmlsdGVyKA0KICAgICAgICAgICAgKGl0ZW0pID0+ICF0aGlzLmRpc3BsYXlEYXRhLnNvbWUoKHZhbCkgPT4gdmFsLmRlcHRJZCA9PSBpdGVtLmRlcHRJZCkNCiAgICAgICAgICApDQogICAgICAgIH0NCiAgICAgICAgdGhpcy50cmVlRGF0YVt0aGlzLmluZGV4XSA9IHRoaXMudHJlZUxpc3QNCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RMaXN0LCB0aGlzLnRyZWVEYXRhW3RoaXMuaW5kZXhdLCB0aGlzLnJlc3VsdCkNCiAgICAgICAgdGhpcy5pbmRleCArPSAxDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5qCR5b2i5Yik5patDQogICAganVkZ2VDaGlsZChub2RlLCB0cmVlKSB7DQogICAgICBpZiAodHJlZS5sZW5ndGggIT0gMCkgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBpZiAobm9kZSA9PSB0cmVlW2ldICYmIHRyZWVbaV0uY2hpbGRyZW4pIHsNCiAgICAgICAgICAgIHJldHVybiB0cmVlW2ldLmNoaWxkcmVuDQogICAgICAgICAgfSBlbHNlIGlmICh0cmVlW2ldLmNoaWxkcmVuKSB7DQogICAgICAgICAgICB0aGlzLmp1ZGdlQ2hpbGQobm9kZSwgdHJlZVtpXS5jaGlsZHJlbikNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHZpZXdTZWxlY3RlZE9yZygpIHsNCiAgICAgIHRoaXMudmlld1Nob3cgPSB0cnVlDQogICAgICB0aGlzLmRpc3BsYXlMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLnJlc3VsdCkNCiAgICB9LA0KICAgIGJhY2soKSB7DQogICAgICBpZiAodGhpcy5kZXB0TGlzdC5sZW5ndGggPT0gMSkgew0KICAgICAgICB0aGlzLnNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLnJlc3VsdCA9IEFycmF5LmZyb20odGhpcy5kaXNwbGF5RGF0YSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmRlcHRMaXN0LnNwbGljZSh0aGlzLmRlcHRMaXN0Lmxlbmd0aCAtIDEsIDEpDQogICAgICB0aGlzLm5hdlRpdGxlID0gdGhpcy5kZXB0TGlzdFt0aGlzLmRlcHRMaXN0Lmxlbmd0aCAtIDFdDQogICAgICB0aGlzLnRyZWVMaXN0ID0gdGhpcy50cmVlRGF0YVt0aGlzLmluZGV4IC0gMl0NCiAgICAgIHRoaXMuaW5kZXggLT0gMQ0KICAgICAgdGhpcy5jaGFuZ2VQYWdlZCA9IHRydWUNCiAgICB9LA0KICAgIC8v56Gu6K6k6YCJ5oupDQogICAgY29uZmlybSgpIHsNCiAgICAgIHRoaXMuZGVwdExpc3QgPSBbJ+e7hOe7h+aetuaehCddDQogICAgICB0aGlzLnNob3cgPSBmYWxzZQ0KICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9ICcnDQogICAgICB0aGlzLm5hdlRpdGxlID0gJ+e7hOe7h+aetuaehCcNCiAgICAgIHRoaXMudHJlZUxpc3QgPSBbXQ0KICAgICAgLy8g5pu05paw5Zue5aGr5bGV56S65pWw5o2uDQogICAgICB0aGlzLmRpc3BsYXlEYXRhID0gdGhpcy5yZXN1bHQNCiAgICAgIHRoaXMudXBkYXRlUHJvcHModGhpcy5yZXN1bHQpDQogICAgfSwNCiAgICAvL+WIoOmZpOmDqOmXqA0KICAgIGRlbGV0ZU9yZyhpdGVtLCBpbmRleCkgew0KICAgICAgdGhpcy5kaXNwbGF5TGlzdC5zcGxpY2UoaW5kZXgsIDEpDQogICAgICAvLyDlj5bmtojli77pgIkNCiAgICAgIC8vIHRoaXMudHJlZUxpc3QuZm9yRWFjaCgoZGVwdCkgPT4gew0KICAgICAgLy8gICBpZiAoZGVwdC5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAvLyAgICAgZGVwdC5jaGVja2VkID0gZmFsc2UNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gfSkNCiAgICB9LA0KICAgIC8v5L+d5a2Y55qE6K+d5Lya5L+d5a2Y5pON5L2cDQogICAgc2F2ZU9yZygpIHsNCiAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5kaXNwbGF5TGlzdA0KICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsNCiAgICAgICAgaWYgKHRoaXMucmVzdWx0Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgdGhpcy50cmVlTGlzdC5mb3JFYWNoKChkZXB0KSA9PiB7DQogICAgICAgICAgICB0aGlzLiRzZXQoZGVwdCwgJ2NoZWNrZWQnLCBmYWxzZSkNCiAgICAgICAgICB9KQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMucmVzdWx0LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgICAgIHRoaXMudHJlZUxpc3QuZm9yRWFjaCgoZGVwdCkgPT4gew0KICAgICAgICAgICAgICBpZiAoZGVwdC5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc2V0KGRlcHQsICdjaGVja2VkJywgdHJ1ZSkNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzZXQoZGVwdCwgJ2NoZWNrZWQnLCBmYWxzZSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnZpZXdTaG93ID0gZmFsc2UNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy5kaXNwbGF5TGlzdCA9IFtdDQogICAgICAgIC8vIOWNlemAiea4heepuuaXtumHjee9rg0KICAgICAgICBpZiAodGhpcy5yZXN1bHQubGVuZ3RoID09IDApIHsNCiAgICAgICAgICB0aGlzLmNoZWNrZWROYW1lID0gJycNCiAgICAgICAgICB0aGlzLmNoZWNrZWROYW1lUmV0ID0gW10NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v5Y+W5raI5YiZ5LmL5YmN5YGa55qE5pON5L2c6YO95Y+W5raIDQogICAgY2FuY2VsKCkgew0KICAgICAgdGhpcy52aWV3U2hvdyA9IGZhbHNlDQogICAgICAvLyB0aGlzLmRpc3BsYXlMaXN0ID0gW10NCiAgICB9LA0KICAgIGNoYW5nZSh2YWwpIHsNCiAgICAgIGlmICh2YWwubGVuZ3RoICE9IDApIHsNCiAgICAgICAgdmFsLmxlbmd0aA0KICAgICAgfQ0KICAgIH0sDQogICAgY29udHJvbE5vdGlmeVNob3codGV4dCkgew0KICAgICAgdGhpcy5ub3RpZnlUZXh0ID0gdGV4dA0KICAgICAgdGhpcy5ub3RpZnlTaG93ID0gdHJ1ZQ0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIHRoaXMubm90aWZ5U2hvdyA9IGZhbHNlDQogICAgICB9LCAxMDAwKQ0KICAgIH0sDQogICAgaGFuZGxlUmFpZG9DaGVjayhpdGVtKSB7DQogICAgICB0aGlzLmNoZWNrZWROYW1lID0gaXRlbS5pZA0KICAgICAgdGhpcy5jaGVja2VkTmFtZVJldCA9IFtpdGVtXQ0KICAgIH0sDQogICAgLy8g56ys5LqM57qn5by556qX77yI5bey6YCJ6YOo6Zeo55WM6Z2i77yJ5YWz6Zet5ZCODQogICAgYWZ0ZXJDbG9zZWQoKSB7DQogICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgdGhpcy5jYW5jZWwsIGZhbHNlKQ0KICAgICAgLy8g56e76Zmk57uE5Lu25YWz6Zet5pe25re75Yqg55qE6buY6K6k5LqL5Lu2DQogICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgdGhpcy4kYmFjaywgZmFsc2UpDQogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgdGhpcy5iYWNrLCBmYWxzZSkNCiAgICB9LA0KICB9LA0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA4JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/select-org","sourcesContent":["<!--\r\n * @Author: wei_sc\r\n * @Date: 2022-03-03 11:47:41\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2022-06-10 15:34:13\r\n * @FilePath: \\mobile-template\\src\\components\\select-org\\index.vue\r\n * @Description: 选部门组件\r\n *\r\n-->\r\n<template>\r\n  <div class=\"select-container\">\r\n    <div class=\"select-box\">\r\n      <fm-cell :title=\"title\" is-link @click=\"selectOrg\" :required=\"required\">\r\n        <template #default>\r\n          <div v-if=\"displayData.length && displayData.length != 0\">\r\n            <fm-tag\r\n              v-for=\"(item, index) in displayData\"\r\n              :key=\"index\"\r\n              :closeable=\"!disabled\"\r\n              size=\"medium\"\r\n              style=\"margin-right: 8px\"\r\n              @close=\"handleDelete(index)\"\r\n            >\r\n              {{ item.deptName || item.content.name }}\r\n            </fm-tag>\r\n          </div>\r\n          <span v-else>\r\n            {{ placeholder }}\r\n          </span>\r\n        </template>\r\n        <template #right-icon>\r\n          <i\r\n            v-if=\"!(displayData.length && displayData.length != 0)\"\r\n            class=\"fm-icon fm-icon-arrow\"\r\n          ></i>\r\n        </template>\r\n      </fm-cell>\r\n      <div>\r\n        <fm-popup\r\n          :visible.sync=\"show\"\r\n          position=\"bottom\"\r\n          :style=\"{ height: '100%' }\"\r\n          ref=\"deptPopup\"\r\n        >\r\n          <fm-nav-bar :title=\"navTitle\" :border=\"true\">\r\n            <template #left>\r\n              <i class=\"fm-icon fm-icon-arrow-left\" @click=\"back\"></i>\r\n            </template>\r\n          </fm-nav-bar>\r\n          <div class=\"popup-container\">\r\n            <div class=\"address-box\">\r\n              <div class=\"address-search-box\">\r\n                <fm-search v-model=\"searchValue\" placeholder=\"搜索\">\r\n                </fm-search>\r\n              </div>\r\n              <div class=\"address-tree\">\r\n                <!-- <fm-checkbox-group v-model=\"result\"> -->\r\n                <fm-cell-group>\r\n                  <fm-cell v-for=\"item in treeList\" :key=\"item.id\">\r\n                    <template #title>\r\n                      <div @click=\"handleClick(item)\">\r\n                        <fm-image\r\n                          width=\"20\"\r\n                          height=\"20\"\r\n                          :src=\"require('@/assets/img/org-tree.png')\"\r\n                        />\r\n                        <span class=\"cell-title\">{{ item.content.name }}</span>\r\n                      </div>\r\n                    </template>\r\n                    <template #right-icon>\r\n                      <fm-checkbox\r\n                        v-if=\"multiple\"\r\n                        :name=\"item\"\r\n                        v-model=\"item.checked\"\r\n                        label-disabled\r\n                      />\r\n                      <fm-radio\r\n                        v-else\r\n                        :name=\"item.id\"\r\n                        v-model=\"checkedName\"\r\n                        @click=\"handleRaidoCheck(item)\"\r\n                      />\r\n                    </template>\r\n                  </fm-cell>\r\n                </fm-cell-group>\r\n                <!-- </fm-checkbox-group> -->\r\n              </div>\r\n            </div>\r\n            <div class=\"selected-user\">\r\n              <span\r\n                class=\"select-text\"\r\n                v-if=\"result.length && result.length != 0\"\r\n                @click=\"viewSelectedOrg\"\r\n                >已选：{{ result.length }} 部门</span\r\n              >\r\n              <span class=\"select-text\" v-else>已选：0 部门</span>\r\n              <div class=\"select-button\">\r\n                <fm-button type=\"primary\" size=\"small\" @click=\"confirm\"\r\n                  >确定</fm-button\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </fm-popup>\r\n        <div>\r\n          <fm-popup\r\n            :visible.sync=\"viewShow\"\r\n            position=\"bottom\"\r\n            :style=\"{ height: '100%' }\"\r\n            :safe-area-inset-bottom=\"true\"\r\n            @closed=\"afterClosed\"\r\n          >\r\n            <fm-nav-bar\r\n              :title=\"selectTitle\"\r\n              :border=\"true\"\r\n              right-text=\"确定\"\r\n              @click-right=\"saveOrg\"\r\n            >\r\n              <template #left>\r\n                <i class=\"fm-icon fm-icon-arrow-left\" @click=\"cancel\"></i>\r\n              </template>\r\n            </fm-nav-bar>\r\n            <div class=\"popup-container\">\r\n              <fm-cell-group>\r\n                <fm-cell v-for=\"(item, index) in displayList\" :key=\"item.id\">\r\n                  <template #title>\r\n                    <div>\r\n                      <fm-image\r\n                        width=\"20\"\r\n                        height=\"20\"\r\n                        :src=\"require('@/assets/img/org-tree.png')\"\r\n                      />\r\n                      <span class=\"cell-title\">{{\r\n                        item.deptName || item.content.name\r\n                      }}</span>\r\n                    </div>\r\n                  </template>\r\n                  <template #right-icon>\r\n                    <i\r\n                      class=\"fm-icon fm-icon-close\"\r\n                      @click=\"deleteOrg(item, index)\"\r\n                    ></i>\r\n                  </template>\r\n                </fm-cell>\r\n              </fm-cell-group>\r\n            </div>\r\n          </fm-popup>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <fm-notify :visible.sync=\"notifyShow\" type=\"warning\">\r\n      <span>{{ notifyText }}</span>\r\n    </fm-notify>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  NavBar,\r\n  Search,\r\n  Cell,\r\n  CellGroup,\r\n  Image,\r\n  List,\r\n  Popup,\r\n  Button,\r\n  RadioGroup,\r\n  Radio,\r\n  Tag,\r\n  Checkbox,\r\n  CheckboxGroup,\r\n  Notify,\r\n} from 'fawkes-mobile-lib'\r\nimport { getDept } from '../select-user/api'\r\nimport { STATUS_BAR_HEIGHT } from '@/store/State/stateTypes'\r\n\r\nexport default {\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n    [Search.name]: Search,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [Image.name]: Image,\r\n    [List.name]: List,\r\n    [Popup.name]: Popup,\r\n    [Button.name]: Button,\r\n    [RadioGroup.name]: RadioGroup,\r\n    [Radio.name]: Radio,\r\n    [Tag.name]: Tag,\r\n    [Checkbox.name]: Checkbox,\r\n    [CheckboxGroup.name]: CheckboxGroup,\r\n    [Notify.Component.name]: Notify.Component,\r\n  },\r\n  props: {\r\n    deptId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    deptName: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: '选择部门',\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    required: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      treeList: [], //组织架构数据\r\n      treeData: {},\r\n      result: [], //部门选择结果\r\n      deptList: ['组织架构'], //记录访问深度\\修改navTitle\r\n      displayList: [], // 展示已选部门数组\r\n      displayData: [], // 展示已选的、确认后的数据\r\n      selectList: [],\r\n      index: 0,\r\n      flag: false,\r\n      searchValue: '',\r\n      show: false,\r\n      navTitle: '组织机构',\r\n      viewShow: false,\r\n      notifyShow: false,\r\n      notifyText: '',\r\n      checkedName: '',\r\n      checkedNameRet: [], //单选结果\r\n      changePaged: false,\r\n    }\r\n  },\r\n  computed: {\r\n    // 选中的结果集\r\n    tempResult() {\r\n      // 多选时，获取当前已选中的用户\r\n      if (this.multiple) {\r\n        return this.treeList?.filter((dept) => dept.checked)\r\n      } else {\r\n        return this.checkedNameRet\r\n      }\r\n    },\r\n    selectTitle() {\r\n      return `已选： ${this.displayList.length} 部门`\r\n    },\r\n  },\r\n  watch: {\r\n    navTitle: {\r\n      handler(newVal) {\r\n        if (!newVal || newVal == '') {\r\n          this.navTitle = '组织架构'\r\n        }\r\n      },\r\n    },\r\n    // 解决FormCenter打开表单时数据不回显问题\r\n    deptName: {\r\n      handler() {\r\n        this.init()\r\n      },\r\n    },\r\n    tempResult(newVal, oldVal) {\r\n      // 多选\r\n      if (this.multiple) {\r\n        const toAdd = newVal\r\n          .filter((user) => !oldVal.some((val) => user.id == val.id))\r\n          .filter((add) => !this.result.some((val) => val.id == add.id))\r\n\r\n        if (toAdd.length > 0) {\r\n          this.result = this.result.concat(toAdd)\r\n        }\r\n\r\n        let toRemove = []\r\n\r\n        // 处理切换部门时意外清空选中记录问题\r\n        if (this.changePaged) {\r\n          this.changePaged = false\r\n        } else {\r\n          // 待删除 old-new\r\n          toRemove = oldVal.filter(\r\n            (user) => !newVal.some((val) => user.id == val.id)\r\n          )\r\n        }\r\n        // 切换部门时不删除，避免已选中记录被清空\r\n        if (toRemove.length > 0) {\r\n          this.result = this.result.filter(\r\n            (item) => !toRemove.some((val) => val.id == item.id)\r\n          )\r\n        }\r\n      } else {\r\n        // 单选\r\n        this.result = newVal\r\n      }\r\n    },\r\n    deptList(newVal) {\r\n      // always true\r\n      if (newVal.length > 0) {\r\n        document.removeEventListener(\r\n          'backbutton',\r\n          this.$refs.deptPopup.close,\r\n          false\r\n        )\r\n        document.addEventListener('backbutton', this.back, false)\r\n      }\r\n    },\r\n    viewShow(newVal) {\r\n      // 覆盖第一级弹的返回事件\r\n      if (newVal) {\r\n        document.removeEventListener('backbutton', this.back, false)\r\n        document.addEventListener('backbutton', this.cancel, false)\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    //更新父组件\r\n    updateProps(val) {\r\n      let dptNameStr = ''\r\n      let dptIdStr = ''\r\n      if (val.length == 0) {\r\n        this.$emit('update:deptId', '')\r\n        this.$emit('update:deptName', '')\r\n        this.$emit('change', val) //暴露选部门组件的change事件后续需要可以调用\r\n      } else {\r\n        val.forEach((item) => {\r\n          dptNameStr += item.content.name + ','\r\n          dptIdStr += item.id + ','\r\n        })\r\n        this.$emit('update:deptId', dptIdStr.substring(0, dptIdStr.length - 1))\r\n        this.$emit(\r\n          'update:deptName',\r\n          dptNameStr.substring(0, dptNameStr.length - 1)\r\n        )\r\n        this.$emit('change', val)\r\n      }\r\n    },\r\n    //处理数据\r\n    init() {\r\n      const dptNameArr = this.deptName ? this.deptName.split(',') : []\r\n      const dptIdArr = this.deptId ? this.deptId.split(',') : []\r\n      const len = dptNameArr.length\r\n      const len2 = dptIdArr.length\r\n      // 单选值处理\r\n      if (!this.multiple) {\r\n        this.checkedName = this.deptId\r\n      }\r\n\r\n      if (this.deptName && this.deptId) {\r\n        if (len !== len2) {\r\n          this.controlNotifyShow('初始部门数值错误')\r\n          return false\r\n        } else {\r\n          this.displayData = dptIdArr.map((deptId, index) => {\r\n            return { deptId: deptId, deptName: dptNameArr[index] }\r\n          })\r\n          this.result = Array.from(this.displayData)\r\n        }\r\n      } else if (!this.deptName && !this.deptId) {\r\n        this.displayList = []\r\n      } else {\r\n        this.controlNotifyShow(\r\n          '请输入正确的部门数据,部门id和部门名称需同时赋值'\r\n        )\r\n      }\r\n    },\r\n    //选择部门\\打开弹出层\r\n    selectOrg() {\r\n      if (this.disabled) {\r\n        return\r\n      } else {\r\n        this.show = true\r\n        this.changePaged = true\r\n        //获取树形数据\r\n        getDept({}).then((res) => {\r\n          if (res.status) {\r\n            this.treeList = res.data\r\n            this.treeData[this.index] = res.data\r\n            this.index += 1\r\n            if (this.multiple) {\r\n              if (this.displayData.length && this.treeList.length) {\r\n                this.displayData.forEach((item) => {\r\n                  this.treeList.forEach((node) => {\r\n                    if (item.deptId == node.id) {\r\n                      this.$set(node, 'checked', true)\r\n                    }\r\n                  })\r\n                })\r\n              }\r\n            } else {\r\n              this.checkedNameRet = this.displayData\r\n              this.checkedName = this.displayData[0]?.deptId\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    handleDelete(index) {\r\n      this.result.splice(index, 1)\r\n      this.displayData = this.result\r\n      this.updateProps(this.result)\r\n    },\r\n    //树形点击后出现子级目录：下级组织机构,限制只有点击复选框才能更改选中状态\r\n    handleClick(item) {\r\n      // 叶子节点不变更页面标题\r\n      if (item?.children?.length > 0) {\r\n        this.navTitle = item.content.name\r\n      }\r\n      this.changePaged = true\r\n      // 存在子部门\r\n      if (this.judgeChild(item, this.treeList)) {\r\n        this.deptList.push(item.content.name)\r\n        this.treeList = this.judgeChild(item, this.treeList)\r\n        this.result.forEach((item) => {\r\n          this.treeList.forEach((node) => {\r\n            if (item.deptId == node.id) {\r\n              this.$set(node, 'checked', true)\r\n            }\r\n          })\r\n        })\r\n        if (this.multiple) {\r\n          this.result = this.result.filter(\r\n            (item) => !this.displayData.some((val) => val.deptId == item.deptId)\r\n          )\r\n        }\r\n        this.treeData[this.index] = this.treeList\r\n        // console.log(this.selectList, this.treeData[this.index], this.result)\r\n        this.index += 1\r\n      } else {\r\n        return\r\n      }\r\n    },\r\n    //树形判断\r\n    judgeChild(node, tree) {\r\n      if (tree.length != 0) {\r\n        for (let i = 0; i < tree.length; i++) {\r\n          if (node == tree[i] && tree[i].children) {\r\n            return tree[i].children\r\n          } else if (tree[i].children) {\r\n            this.judgeChild(node, tree[i].children)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    viewSelectedOrg() {\r\n      this.viewShow = true\r\n      this.displayList = Array.from(this.result)\r\n    },\r\n    back() {\r\n      if (this.deptList.length == 1) {\r\n        this.show = false\r\n        this.result = Array.from(this.displayData)\r\n        return\r\n      }\r\n      this.deptList.splice(this.deptList.length - 1, 1)\r\n      this.navTitle = this.deptList[this.deptList.length - 1]\r\n      this.treeList = this.treeData[this.index - 2]\r\n      this.index -= 1\r\n      this.changePaged = true\r\n    },\r\n    //确认选择\r\n    confirm() {\r\n      this.deptList = ['组织架构']\r\n      this.show = false\r\n      this.searchValue = ''\r\n      this.navTitle = '组织架构'\r\n      this.treeList = []\r\n      // 更新回填展示数据\r\n      this.displayData = this.result\r\n      this.updateProps(this.result)\r\n    },\r\n    //删除部门\r\n    deleteOrg(item, index) {\r\n      this.displayList.splice(index, 1)\r\n      // 取消勾选\r\n      // this.treeList.forEach((dept) => {\r\n      //   if (dept.id == item.id) {\r\n      //     dept.checked = false\r\n      //   }\r\n      // })\r\n    },\r\n    //保存的话会保存操作\r\n    saveOrg() {\r\n      this.result = this.displayList\r\n      if (this.multiple) {\r\n        if (this.result.length == 0) {\r\n          this.treeList.forEach((dept) => {\r\n            this.$set(dept, 'checked', false)\r\n          })\r\n        } else {\r\n          this.result.forEach((item) => {\r\n            this.treeList.forEach((dept) => {\r\n              if (dept.id == item.id) {\r\n                this.$set(dept, 'checked', true)\r\n              } else {\r\n                this.$set(dept, 'checked', false)\r\n              }\r\n            })\r\n          })\r\n        }\r\n      }\r\n      this.viewShow = false\r\n      this.$nextTick(() => {\r\n        this.displayList = []\r\n        // 单选清空时重置\r\n        if (this.result.length == 0) {\r\n          this.checkedName = ''\r\n          this.checkedNameRet = []\r\n        }\r\n      })\r\n    },\r\n    //取消则之前做的操作都取消\r\n    cancel() {\r\n      this.viewShow = false\r\n      // this.displayList = []\r\n    },\r\n    change(val) {\r\n      if (val.length != 0) {\r\n        val.length\r\n      }\r\n    },\r\n    controlNotifyShow(text) {\r\n      this.notifyText = text\r\n      this.notifyShow = true\r\n      setTimeout(() => {\r\n        this.notifyShow = false\r\n      }, 1000)\r\n    },\r\n    handleRaidoCheck(item) {\r\n      this.checkedName = item.id\r\n      this.checkedNameRet = [item]\r\n    },\r\n    // 第二级弹窗（已选部门界面）关闭后\r\n    afterClosed() {\r\n      document.removeEventListener('backbutton', this.cancel, false)\r\n      // 移除组件关闭时添加的默认事件\r\n      document.removeEventListener('backbutton', this.$back, false)\r\n      document.addEventListener('backbutton', this.back, false)\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.fm-cell__title div {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.popup-container {\r\n  height: calc(100% - 92px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #f9f9f9;\r\n}\r\n\r\n.selected-user {\r\n  position: fixed;\r\n  bottom: 0;\r\n  background: #ffffff;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20px;\r\n  font-size: 0.21333rem;\r\n  box-sizing: border-box;\r\n  .select-text {\r\n    font-size: 32px;\r\n    color: #027aff;\r\n  }\r\n}\r\n\r\n.address-container {\r\n  height: 100%;\r\n  background: #eeeeee;\r\n  .address-box {\r\n    height: 100%;\r\n    background: #f9f9f9;\r\n    .address-tree {\r\n      height: 100%;\r\n      overflow: scroll;\r\n    }\r\n  }\r\n}\r\n\r\n.cell-title {\r\n  margin-left: 0.32rem;\r\n}\r\n\r\n/deep/.fm-cell {\r\n  font-size: 32px;\r\n  line-height: 52px;\r\n}\r\n\r\n/deep/ .fm-nav-bar .fm-icon {\r\n  color: #ffffff;\r\n}\r\n\r\n.person-container {\r\n  height: 100%;\r\n  background: #eeeeee;\r\n}\r\n.person-box {\r\n  height: 80%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  flex-wrap: nowrap;\r\n}\r\n.person-photo {\r\n  margin: 0.42667rem;\r\n}\r\n\r\n.person-photo-title {\r\n  margin: 0.4rem 0.8rem;\r\n  /deep/.fm-cell__value--alone {\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.person-photo-title1 {\r\n  margin: 0.4rem 0.8rem;\r\n  /deep/.fm-cell__value--alone {\r\n    text-align: center;\r\n    color: #ffffff;\r\n  }\r\n  /deep/.fm-cell {\r\n    background: #027aff;\r\n  }\r\n\r\n  /deep/.fm-checkbox {\r\n    z-index: 999999;\r\n  }\r\n}\r\n.address-box {\r\n  height: calc(100% - 104px);\r\n  background: #f9f9f9;\r\n  flex: 1;\r\n}\r\n\r\n.address-tree {\r\n  height: calc(100% - 96px);\r\n  overflow: scroll;\r\n  .fm-list {\r\n    height: 100%;\r\n  }\r\n}\r\n/deep/.fm-notify {\r\n  padding-top: var(--height);\r\n}\r\n</style>\r\n"]}]}