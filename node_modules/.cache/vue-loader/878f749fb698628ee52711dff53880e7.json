{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\ProblemReport\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\ProblemReport\\index.vue","mtime":1708928163410},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBhZGRJY29uVG9NYXAgfSBmcm9tICdAL3V0aWxzL21hcFV0aWxzJw0KaW1wb3J0IE1hcENvbXAgZnJvbSAnQC9jb21wb25lbnRzL3hhLW1hcC9pbmRleC52dWUnDQppbXBvcnQgcHJvYmxlbUxpc3QgZnJvbSAnQC92aWV3cy9Qcm9ibGVtUmVwb3J0L3Byb2JsZW1MaXN0LnZ1ZScNCmltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnDQppbXBvcnQgJ21hcGJveC1nbC9kaXN0L21hcGJveC1nbC5jc3MnDQppbXBvcnQgbWFwU3R5bGUgZnJvbSAnLi9tYXBTdHlsZScNCmltcG9ydCBwb3B1cCBmcm9tICcuL3BvcHVwJw0KY29uc3QgcG9wdXBJdGVtID0gVnVlLmV4dGVuZChwb3B1cCkNCmNvbnN0IE1hcE9iaiA9IHsNCiAgbWFwOiBudWxsLA0KICBtYXBJbnN0YW5jZTogbnVsbCwNCn0NCmltcG9ydCBWdWUgZnJvbSAndnVlJw0KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJw0KaW1wb3J0IHsNCiAgTmF2QmFyLA0KICBTZWFyY2gsDQogIFRvYXN0LA0KICBDZWxsLA0KICBDZWxsR3JvdXAsDQogIFB1bGxSZWZyZXNoLA0KICBMaXN0LA0KICBTaWRlYmFyLA0KICBTaWRlYmFySXRlbSwNCiAgU3dpcGVDZWxsLA0KICBCdXR0b24sDQogIE5vdGljZUJhciwNCiAgSWNvbiwNCiAgRGlhbG9nLA0KfSBmcm9tICdmYXdrZXMtbW9iaWxlLWxpYicNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnSW5zcGVjdGlvbicsDQogIGNvbXBvbmVudHM6IHsNCiAgICBNYXBDb21wLA0KICAgIHByb2JsZW1MaXN0LA0KICAgIFtOYXZCYXIubmFtZV06IE5hdkJhciwNCiAgICBbU2VhcmNoLm5hbWVdOiBTZWFyY2gsDQogICAgW1RvYXN0Lm5hbWVdOiBUb2FzdCwNCiAgICBbQ2VsbC5uYW1lXTogQ2VsbCwNCiAgICBbQ2VsbEdyb3VwLm5hbWVdOiBDZWxsR3JvdXAsDQogICAgW1B1bGxSZWZyZXNoLm5hbWVdOiBQdWxsUmVmcmVzaCwNCiAgICBbTGlzdC5uYW1lXTogTGlzdCwNCiAgICBbU2lkZWJhci5uYW1lXTogU2lkZWJhciwNCiAgICBbU2lkZWJhckl0ZW0ubmFtZV06IFNpZGViYXJJdGVtLA0KICAgIFtTd2lwZUNlbGwubmFtZV06IFN3aXBlQ2VsbCwNCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24sDQogICAgW05vdGljZUJhci5uYW1lXTogTm90aWNlQmFyLA0KICAgIFtJY29uLm5hbWVdOiBJY29uLA0KICAgIFtEaWFsb2cubmFtZV06IERpYWxvZywNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbG5nbGF0OiBbXSwNCiAgICAgIGNob3NlUG9pbnQ6IGZhbHNlLA0KICAgICAgb2JqSW5mbzoge30sDQogICAgICBhY2Nlc3NUb2tlbjogdGhpcy4kc3RvcmFnZS5nZXQoJ2FjY2Vzc190b2tlbicpLA0KICAgICAgaGVhZGVyOiB7fSwNCiAgICAgIGZvcm1Ub2tlbjogJycsDQogICAgICB0YWJsZUxpc3Q6IFtdLA0KICAgICAgaW5zcEJ1c2luZXNzVHlwZTogJycsDQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgaWNvbnM6IFsNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6ICfkuovku7bngrknLA0KICAgICAgICAgICAgICAgICAgICB1cmw6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZy9tYXAvZHcucG5nJyksDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIF0sDQogICAgICB0aW1lcjogbnVsbCwNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgZXZlbnRUeXBlTGlzdE5ld0ZpbHRlcmVkKCkgew0KICAgICAgY29uc3QgeyBkaWN0aW9uYXJ5LCBldmVudFR5cGVMaXN0LCB0YXNrRGV0YWlsIH0gPSB0aGlzDQogICAgICBsZXQgdGVtcCA9IGV2ZW50VHlwZUxpc3QuZmluZCgoaXRlbSkgPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5sYWJlbCA9PT0gZGljdGlvbmFyeVt0YXNrRGV0YWlsLmluc3BCdXNpbmVzc1R5cGVdDQogICAgICB9KQ0KICAgICAgaWYgKHRlbXApIHsNCiAgICAgICAgcmV0dXJuIHRlbXAuY2hpbGRyZW4NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBudWxsDQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICAvLyDojrflj5ZoZWFkZXLvvIzmn6Xor6Llt6XljZXnlKgNCiAgICBheGlvcyh7DQogICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfVEhJUkRfUkVRVUVTVF9VUkwgKyAnL21haW4vdXNlckNlbnRlckFwaS9zc28vdG9rZW5CeVRva2VuJywNCiAgICAgIG1ldGhvZDogJ3Bvc3QnLA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIHRva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLA0KICAgICAgfSwNCiAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0Jhc2ljIGIzVjBkMjl5YXpwM2NHY3lNREl3JywNCiAgICAgIH0sDQogICAgfSkudGhlbigocmVzKSA9PiB7DQogICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsNCiAgICAgICAgdGhpcy5mb3JtVG9rZW4gPSByZXMuZGF0YS5yZXN1bHREYXRhLnRva2VuDQogICAgICAgIHRoaXMuaGVhZGVyID0gew0KICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsDQogICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgdGhpcy5mb3JtVG9rZW4sDQogICAgICAgIH0NCiAgICAgICAgY29uc29sZS5sb2coJyB0aGlzLmhlYWRlcuafpeivouW3peWNleeUqCA6ICcsIHRoaXMuaGVhZGVyKQ0KICAgICAgICB0aGlzLmdldExpc3QxKCkgLy8g6I635Y+W5bel5Y2V5YiX6KGoLA0KICAgICAgfQ0KICAgIH0pDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgLy8gdGhpcy5pbml0TWFwKCkNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICBpZiAodGhpcy50aW1lcikgew0KICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOWcsOWbvuebuOWFsw0KICAgIHRvVGFyZ2V0KGxuZ2xhdCkgew0KDQogICAgICBpZiAobG5nbGF0Lmxlbmd0aCA9PSAyKSB7DQogICAgICAgIHdpbmRvdy54YU1hcC5mbHlUbyh7DQogICAgICAgICAgY2VudGVyOiBsbmdsYXQsDQogICAgICAgICAgem9vbTogMTksDQogICAgICAgIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygi5peg5L2N572u5L+h5oGvIikNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIG1hcExvYWRlZCgpIHsNCiAgICAgIE1hcE9iai5tYXAgPSB3aW5kb3cueGFNYXANCiAgICAgIGF3YWl0IGFkZEljb25Ub01hcChNYXBPYmoubWFwLCB0aGlzLmljb25zKQ0KICAgICAgd2luZG93LnhhTWFwLm9uKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgIC8vIOiLpeS4umZ1bmN0aW8oZSl7IHRoaXPmmK90aGlzLndpbmRvdy54YU1hcH0NCiAgICAgICAgLy8gKGUpPT57IHRoaXPmmK90aGlzfQ0KICAgICAgICBjb25zb2xlLmxvZygnbWFwLWNsaWNrLWUnLCBlKQ0KICAgICAgICBjb25zb2xlLmxvZygnZS5sbmdMYXRuJywgZS5sbmdMYXQpDQogICAgICAgIHZhciBiYm94ID0gWw0KICAgICAgICAgIFtlLnBvaW50LnggLSAxLCBlLnBvaW50LnkgLSAxXSwNCiAgICAgICAgICBbZS5wb2ludC54ICsgMSwgZS5wb2ludC55ICsgMV0sDQogICAgICAgIF0NCiAgICAgICAgY29uc29sZS5sb2coJ2Jib3g6JywgYmJveCkNCiAgICAgICAgLy8gbWFwYm94IOi/lOWbnuafpeivouimgee0oOeahOWbvuWxguWxnuaApw0KICAgICAgICBsZXQgcXVlcnlmZWF0dXJlcyA9IHdpbmRvdy54YU1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoYmJveCwgew0KICAgICAgICAgIGxheWVyczogWw0KICAgICAgICAgICAgJ3JkX21hcF9kcmFpbnBpcGVfeXNfYmlnJywNCiAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3lzX3NtYWxsJywNCiAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3dzX3NtYWxsJywNCiAgICAgICAgICAgICdyZF9tYXBfZHJhaW5waXBlX3dzX2JpZycsDQogICAgICAgICAgICAncmRfbWFwX291dGZhbGwnLA0KICAgICAgICAgICAgJ3JkX21hcF9nYXRlJywNCiAgICAgICAgICAgICdyZF9tYXBfbWFuaG9sZScsDQogICAgICAgICAgICAncmRfbWFwX2NvbWInLA0KICAgICAgICAgICAgJ21hcF9zdXBwbHlfZmlyZWh5ZHJhbnQnLA0KICAgICAgICAgICAgJ21hcF9zdXBwbHlfdmFsdmUnLA0KICAgICAgICAgICAgJ21hcF9zdXBwbHlfcGlwZV9kaXN0cmlidXRlJywNCiAgICAgICAgICAgICdtYXBfc3VwcGx5X3BpcGVfZGVsaXZlcnknLA0KICAgICAgICAgICAgJ21hcF9zdXBwbHlfcGlwZV9jaXJjdWxhdGluZycsDQogICAgICAgICAgICAnbWFwX3N1cHBseV9ub2RlX2Rpc3RyaWJ1dGUnLA0KICAgICAgICAgICAgJ21hcF9zdXBwbHlfbm9kZV9kZWxpdmVyeScsDQogICAgICAgICAgICAnbWFwX3N1cHBseV9ub2RlX2NpcmN1bGF0aW5nJywNCiAgICAgICAgICAgICdtYXBfcmVjeWNsZV9waXBlJywNCiAgICAgICAgICAgICdtYXBfcmVjeWNsZV9ub2RlJywNCiAgICAgICAgICAgICdtYXBfd2F0ZXJ3b3JrJywNCiAgICAgICAgICBdLA0KICAgICAgICAgIC8vIGxheWVyczogbGF5ZXJzDQogICAgICAgIH0pDQogICAgICAgIGNvbnNvbGUubG9nKCfngrnpgIko5b6u55+p5b2iKeafpeivouWIsOeahHF1ZXJ5ZmVhdHVyZXM6JywgcXVlcnlmZWF0dXJlcykNCiAgICAgICAgLy8gY29uc29sZS5sb2coIueCuemAiSjlvq7nn6nlvaIp5p+l6K+i55qEcXVlcnlmZWF0dXJlczoiLCBxdWVyeWZlYXR1cmVzLnByb3BlcnRpZXMpDQogICAgICAgIC8vIHRoaXMuaGlnaHRMaWdodChxdWVyeWZlYXR1cmVzKS8vIOmrmOS6ruihqOagvOiusOW9le+8jOW5tumrmOS6ruWcsOWbvuimgee0oA0KICAgICAgICB0aGlzLm9iakluZm8gPSB7fSAvL+WFiOe9ruepuuWGjei1i+WAvA0KICAgICAgICAvLyDngrnlh7vkvY3nva7nmoTnu4/nuqzluqYNCiAgICAgICAgdGhpcy5vYmpJbmZvLmxuZyA9IGUubG5nTGF0LmxuZw0KICAgICAgICB0aGlzLm9iakluZm8ubGF0ID0gZS5sbmdMYXQubGF0DQogICAgICAgIGlmIChxdWVyeWZlYXR1cmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAvLyBxdWVyeWZlYXR1cmVzLmZvckVhY2goZiA9PiB7DQogICAgICAgICAgbGV0IGYgPSBxdWVyeWZlYXR1cmVzWzBdDQogICAgICAgICAgY29uc29sZS5sb2coJ2ZmZmY6ICcsIGYpDQogICAgICAgICAgLy8g54K55Ye76KaB57Sg55qE57uP57qs5bqm77yM5pyJ55qE6K+d6KaG55uW5o6J54K55Ye75L2N572u57uP57qs5bqmDQogICAgICAgICAgLy8gdGhpcy5vYmpJbmZvLmxuZyA9IGYucHJvcGVydGllcy5sb25naXR1ZGUgfHwgdGhpcy5vYmpJbmZvLmxuZw0KICAgICAgICAgIC8vIHRoaXMub2JqSW5mby5sYXQgPSBmLnByb3BlcnRpZXMubGF0aXR1ZGUgfHwgdGhpcy5vYmpJbmZvLmxhdA0KICAgICAgICAgIC8vIOimgee0oOaJgOWcqOWbvuWxgklE5ZKM5bGe5oCn5L+h5oGvDQogICAgICAgICAgdGhpcy5vYmpJbmZvLmxheWVySUQgPSBmLmxheWVyLmlkDQogICAgICAgICAgdGhpcy5vYmpJbmZvLmxheWVyVHlwZSA9IGYubGF5ZXIudHlwZQ0KICAgICAgICAgIHRoaXMub2JqSW5mby5wcm9wZXJ0aWVzID0gZi5wcm9wZXJ0aWVzDQogICAgICAgICAgLy8g5bqV5Zu+6KaB57SgbmFtZV9sb2NhbOaIluiuvuaWveimgee0oHJvYWRfbmFtZSxpZA0KICAgICAgICAgIHRoaXMub2JqSW5mby5uYW1lX2xvY2FsID0gZi5wcm9wZXJ0aWVzLm5hbWVfbG9jYWwNCiAgICAgICAgICB0aGlzLm9iakluZm8ucm9hZF9uYW1lID0gZi5wcm9wZXJ0aWVzLnJvYWRfbmFtZQ0KICAgICAgICAgIHRoaXMub2JqSW5mby5pZCA9IGYucHJvcGVydGllcy5pZA0KICAgICAgICAgIC8vIOimgee0oOWvueixoeexu+Wei++8iOS4muWKoeexu+Weiy/orr7mlr3nsbvlnovvvIkNCiAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICcnDQogICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICcnDQogICAgICAgICAgc3dpdGNoIChmLmxheWVyLmlkKSB7DQogICAgICAgICAgICAvLyDpm6jmsLQNCiAgICAgICAgICAgIGNhc2UgInJkX21hcF9jb21iIjovL2NvbWLkuIDlrprmmK/pm6jmsLTlj6MNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLmJpZ1R5cGUgPSAn6Zuo5rC0Jw0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uc21hbGxUeXBlID0gJ+mbqOawtOWPoycNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGNhc2UgInJkX21hcF9vdXRmYWxsIjovL+aOkuaUvuWPoyAxLembqOawtO+8myAyLeaxoeawtO+8myAzLeWQiOa1ge+8myA0LeWFtuS7lg0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9IGYucHJvcGVydGllcy5waXBlX3R5cGUNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfmjpLmlL7lj6MnDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBjYXNlICJyZF9tYXBfbWFuaG9sZSI6Ly/mo4Dmn6XkupUgIDEt6Zuo5rC077ybMi3msaHmsLQNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLmJpZ1R5cGUgPSBmLnByb3BlcnRpZXMubWFuaG9sZV90eXBlDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSBmLnByb3BlcnRpZXMubWFuaG9sZV90eXBlID09ICLpm6jmsLQiID8gJ+mbqOawtOajgOafpeS6lScgOiAn5rGh5rC05qOA5p+l5LqVJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAicmRfbWFwX2dhdGUiOi8v6Ze46ZeoIDEt6Zuo5rC077ybIDIt5rGh5rC077ybIDMt5ZCI5rWB77ybIDQt5YW25LuWDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gZi5wcm9wZXJ0aWVzLnBpcGVfdHlwZQ0KICAgICAgICAgICAgICAvLyBvYmpJbmZvLnNtYWxsVHlwZSA9ICfpl7jpl6gnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSBmLnByb3BlcnRpZXMucGlwZV90eXBlID09ICLpm6jmsLQiID8gJ+WFtuS7lu+8iOmbqO+8iScgOiAn5YW25LuW77yI5rGh77yJJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAicmRfbWFwX2RyYWlucGlwZV95c19iaWciOg0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICfpm6jmsLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn6Zuo5rC0566h5rigJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAicmRfbWFwX2RyYWlucGlwZV95c19zbWFsbCI6DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+mbqOawtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfpm6jmsLTnrqHmuKAnDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAvLyDmsaHmsLQNCiAgICAgICAgICAgIGNhc2UgInJkX21hcF9kcmFpbnBpcGVfd3NfYmlnIjoNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLmJpZ1R5cGUgPSAn5rGh5rC0Jw0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uc21hbGxUeXBlID0gJ+axoeawtOeuoemBkycNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGNhc2UgInJkX21hcF9kcmFpbnBpcGVfd3Nfc21hbGwiOg0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICfmsaHmsLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn5rGh5rC0566h6YGTJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgLy8g5L6b5rC0DQogICAgICAgICAgICBjYXNlICJtYXBfc3VwcGx5X2ZpcmVoeWRyYW50IjovL+a2iOeBq+agk+S4gOWumuaYr+S+m+awtA0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICfkvpvmsLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn5raI6Ziy5qCTJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAibWFwX3N1cHBseV92YWx2ZSI6Ly/pmIDpl6h2YWx2ZeS4gOWumuaYr+S+m+awtA0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICfkvpvmsLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn6ZiA6ZeoJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAibWFwX3N1cHBseV9waXBlX2Rpc3RyaWJ1dGUiOi8v6YWN5rC0566h57q/DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+S+m+awtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfkvpvmsLTnrqHpgZMnDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBjYXNlICJtYXBfc3VwcGx5X3BpcGVfZGVsaXZlcnkiOi8v6L6T5rC0566h57q/DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ3N1cHBseScNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfkvpvmsLTnrqHpgZMnDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBjYXNlICJtYXBfc3VwcGx5X3BpcGVfY2lyY3VsYXRpbmciOi8v5Zue5rC0566h57q/DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+S+m+awtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfkvpvmsLTnrqHpgZMnDQogICAgICAgICAgICAgIGJyZWFrDQoNCiAgICAgICAgICAgIGNhc2UgIm1hcF9zdXBwbHlfbm9kZV9kZWxpdmVyeSI6DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+S+m+awtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9IGYucHJvcGVydGllcy5hcHB1cnRlbmFuY2UgPT0gIua2iOmYsuS6lSIgPyAi5raI6Ziy5qCTIiA6IGYucHJvcGVydGllcy5hcHB1cnRlbmFuY2UgPT0gIuaOkuawlOmYgCIgPyAi6ZiA6ZeoIiA6ICflhbbku5bvvIjkvpvvvIknDQogICAgICAgICAgICAgIGJyZWFrDQoNCiAgICAgICAgICAgIGNhc2UgIm1hcF93YXRlcndvcmsiOi8v5L6b5rC05Y6CDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+S+m+awtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICflhbbku5bvvIjkvpvvvIknDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAvLyDlho3nlJ/msLQNCiAgICAgICAgICAgIGNhc2UgIm1hcF9yZWN5Y2xlX3BpcGUiOi8v5YaN55Sf5rC0566h57q/DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+WGjeeUn+awtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICflho3nlJ/msLTnrqHpgZMnDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBjYXNlICJtYXBfd2F0ZXJ3b3JrIjovL+WGjeeUn+awtOWOgg0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICflho3nlJ/msLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn5YW25LuW77yI5YaN77yJJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyDorr7mlr3nvJblj7cNCiAgICAgICAgICB0aGlzLm9iakluZm8uY29kZSA9IGYucHJvcGVydGllcy5zdGFydF9jb2RlICYmIGYucHJvcGVydGllcy5lbmRfY29kZSA/IChmLnByb3BlcnRpZXMuc3RhcnRfY29kZSArICcsJyArIGYucHJvcGVydGllcy5lbmRfY29kZSkgOiAnJw0KICAgICAgICAgICAgfHwgZi5wcm9wZXJ0aWVzLm1hbmhvbGVfY29kZSB8fCBmLnByb3BlcnRpZXMuZ2F0ZV9jb2RlIHx8IGYucHJvcGVydGllcy5vdXRsZXRfY29kZQ0KICAgICAgICAgICAgfHwgZi5wcm9wZXJ0aWVzLmNvbWJfY29kZSB8fCBmLnByb3BlcnRpZXMudmFsdmVfY29kZSB8fCBmLnByb3BlcnRpZXMucHVtcF9zdGF0aW9uX2NvZGUNCiAgICAgICAgICAgIHx8IGYucHJvcGVydGllcy5wbGFudF9jb2RlIHx8IGYucHJvcGVydGllcy5wdW1wX2NvZGUgfHwgZi5wcm9wZXJ0aWVzLmZpcmVfY29ja19jb2RlDQogICAgICAgICAgICB8fCBmLnByb3BlcnRpZXMucG9pbnRfY29kZSB8fCAnJw0KICAgICAgICB9DQogICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLm9iakluZm86ICcsIHRoaXMub2JqSW5mbykNCiAgICAgICAgLy8gcG9wdXANCiAgICAgICAgaWYgKHRoaXMuY2hvc2VQb2ludCkgew0KICAgICAgICAgIGxldCBwb3B1cEh0bWwgPSAnPGRpdiBpZD0iYmFzZS1kZXRhaWwiPjwvZGl2PicNCiAgICAgICAgICBuZXcgbWFwYm94Z2wuUG9wdXAoKQ0KICAgICAgICAgICAgLnNldExuZ0xhdChbZS5sbmdMYXQubG5nLCBlLmxuZ0xhdC5sYXRdKQ0KICAgICAgICAgICAgLnNldEhUTUwocG9wdXBIdG1sKQ0KICAgICAgICAgICAgLmFkZFRvKHdpbmRvdy54YU1hcCkNCiAgICAgICAgICBuZXcgcG9wdXBJdGVtKHsNCiAgICAgICAgICAgIHByb3BzRGF0YTogew0KICAgICAgICAgICAgICBkZXRhaWxJZDogOTk5OTksDQogICAgICAgICAgICAgIGxuZzogZS5sbmdMYXQubG5nLnRvRml4ZWQoMyksDQogICAgICAgICAgICAgIGxhdDogZS5sbmdMYXQubGF0LnRvRml4ZWQoMyksDQogICAgICAgICAgICAgIGJpZ1R5cGU6IHRoaXMub2JqSW5mby5iaWdUeXBlLA0KICAgICAgICAgICAgICBzbWFsbFR5cGU6IHRoaXMub2JqSW5mby5zbWFsbFR5cGUsDQogICAgICAgICAgICAgIGRldmljZUNvZGU6IHRoaXMub2JqSW5mby5jb2RlLA0KICAgICAgICAgICAgICBmdW46IHRoaXMuZWRpdEZvcm0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0pLiRtb3VudCgnI2Jhc2UtZGV0YWlsJykNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGluaXRNYXAoKSB7DQogICAgICBtYXBib3hnbC5hY2Nlc3NUb2tlbiA9DQogICAgICAgICdway5leUoxSWpvaU9UTTBNRGswTWpnMklpd2lZU0k2SW1Oc01uTm1kbVZyWkRCclpHTXpaRzUwY0hKdWRYSmtiVzhpZlEuQzB3S2hKZ3JUb0ZKZ0w4R0g1TThyZycNCiAgICAgIHdpbmRvdy54YU1hcCA9IG5ldyBtYXBib3hnbC5NYXAoew0KICAgICAgICBjb250YWluZXI6ICdtYXBDb250YWluZXInLCAvLyDlrrnlmahET00gaWQNCiAgICAgICAgc3R5bGU6IG1hcFN0eWxlLA0KICAgICAgICBjZW50ZXI6IFsxMTUuOTI0ODYxMDEzNjk0MjgsIDM5LjA2MDc1NTQ5NTg5MDczXSwNCiAgICAgICAgem9vbTogMTMsDQogICAgICAgIG1pblpvb206IDEwLA0KICAgICAgICBwaXRjaDogMCwNCiAgICAgIH0pDQogICAgICAvLyBsZXQgbmVlZExheWVycz1bXQ0KICAgICAgLy8g5Yqg5Zu+5bGCIGh0dHA6Ly8xNzIuMjAuNzkuNjUvYXBpL3N3YW4vbWFwV29ya3Nob3BTb3VyY2UvZGV0YWlsP2lkPTE1NDQ2NDAyNzg1NTk4MjE4MjYNCiAgICAgIGF4aW9zDQogICAgICAgIC5nZXQoJ2h0dHA6Ly8xNzIuMjAuNzkuNjUvYXBpL3N3YW4vbWFwV29ya3Nob3BTb3VyY2UvZGV0YWlsP2lkPTE1NDg1NzM0MTI5NjM3NDk4ODknKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coJ3JlczogJywgcmVzKQ0KICAgICAgICAgIGxldCBsYXllcnMgPSBKU09OLnBhcnNlKHJlcy5kYXRhLmRhdGEuanNvbkRhdGEpDQogICAgICAgICAgY29uc29sZS5sb2coJ2xheWVyczogJywgbGF5ZXJzKQ0KICAgICAgICAgIE9iamVjdC5rZXlzKGxheWVycy5zb3VyY2VzKS5mb3JFYWNoKChrZXkpID0+IHsNCiAgICAgICAgICAgIHdpbmRvdy54YU1hcC5hZGRTb3VyY2Uoa2V5LCBsYXllcnMuc291cmNlc1trZXldKQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLy8gbmVlZExheWVycz1sYXllcnMubGF5ZXJzDQogICAgICAgICAgbGF5ZXJzLmxheWVycy5mb3JFYWNoKChsYXllcikgPT4gew0KICAgICAgICAgICAgd2luZG93LnhhTWFwLmFkZExheWVyKGxheWVyKQ0KICAgICAgICAgICAgd2luZG93LnhhTWFwLnNldExheW91dFByb3BlcnR5KGxheWVyLmlkLCAndmlzaWJpbGl0eScsICd2aXNpYmxlJykNCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGUpID0+IHsgfSkNCiAgICAgICAgLmZpbmFsbHkoKCkgPT4geyB9KQ0KICAgICAgLy8g55uR5ZCs5Zyw5Zu+54K55Ye7DQogICAgICAvLyB3aW5kb3cueGFNYXAub24oImNsaWNrIiwgZnVuY3Rpb24oZSkgIHt9KQ0KICAgICAgLy8gd2luZG93LnhhTWFwLm9uKCJjbGljayIsIGxheWVyLmlkLGZ1bmN0aW9uKGUpICB7fSkvL+aJjeiDvemAieWIsGZlYXR1cmVzPz8/LOWwseaLv+WIsOi/h+S4gOasoQ0KDQogICAgICB3aW5kb3cueGFNYXAub24oJ2NsaWNrJywgKGUpID0+IHsNCiAgICAgICAgLy8g6Iul5Li6ZnVuY3RpbyhlKXsgdGhpc+aYr3RoaXMud2luZG93LnhhTWFwfQ0KICAgICAgICAvLyAoZSk9PnsgdGhpc+aYr3RoaXN9DQogICAgICAgIGNvbnNvbGUubG9nKCdtYXAtY2xpY2stZScsIGUpDQogICAgICAgIGNvbnNvbGUubG9nKCdlLmxuZ0xhdG4nLCBlLmxuZ0xhdCkNCiAgICAgICAgdmFyIGJib3ggPSBbDQogICAgICAgICAgW2UucG9pbnQueCAtIDEsIGUucG9pbnQueSAtIDFdLA0KICAgICAgICAgIFtlLnBvaW50LnggKyAxLCBlLnBvaW50LnkgKyAxXSwNCiAgICAgICAgXQ0KICAgICAgICBjb25zb2xlLmxvZygnYmJveDonLCBiYm94KQ0KICAgICAgICAvLyBtYXBib3gg6L+U5Zue5p+l6K+i6KaB57Sg55qE5Zu+5bGC5bGe5oCnDQogICAgICAgIGxldCBxdWVyeWZlYXR1cmVzID0gd2luZG93LnhhTWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhiYm94LCB7DQogICAgICAgICAgbGF5ZXJzOiBbDQogICAgICAgICAgICAncmRfbWFwX2RyYWlucGlwZV95c19iaWcnLA0KICAgICAgICAgICAgJ3JkX21hcF9kcmFpbnBpcGVfeXNfc21hbGwnLA0KICAgICAgICAgICAgJ3JkX21hcF9kcmFpbnBpcGVfd3Nfc21hbGwnLA0KICAgICAgICAgICAgJ3JkX21hcF9kcmFpbnBpcGVfd3NfYmlnJywNCiAgICAgICAgICAgICdyZF9tYXBfb3V0ZmFsbCcsDQogICAgICAgICAgICAncmRfbWFwX2dhdGUnLA0KICAgICAgICAgICAgJ3JkX21hcF9tYW5ob2xlJywNCiAgICAgICAgICAgICdyZF9tYXBfY29tYicsDQogICAgICAgICAgICAnbWFwX3N1cHBseV9maXJlaHlkcmFudCcsDQogICAgICAgICAgICAnbWFwX3N1cHBseV92YWx2ZScsDQogICAgICAgICAgICAnbWFwX3N1cHBseV9waXBlX2Rpc3RyaWJ1dGUnLA0KICAgICAgICAgICAgJ21hcF9zdXBwbHlfcGlwZV9kZWxpdmVyeScsDQogICAgICAgICAgICAnbWFwX3N1cHBseV9waXBlX2NpcmN1bGF0aW5nJywNCiAgICAgICAgICAgICdtYXBfc3VwcGx5X25vZGVfZGlzdHJpYnV0ZScsDQogICAgICAgICAgICAnbWFwX3N1cHBseV9ub2RlX2RlbGl2ZXJ5JywNCiAgICAgICAgICAgICdtYXBfc3VwcGx5X25vZGVfY2lyY3VsYXRpbmcnLA0KICAgICAgICAgICAgJ21hcF9yZWN5Y2xlX3BpcGUnLA0KICAgICAgICAgICAgJ21hcF9yZWN5Y2xlX25vZGUnLA0KICAgICAgICAgICAgJ21hcF93YXRlcndvcmsnLA0KICAgICAgICAgIF0sDQogICAgICAgICAgLy8gbGF5ZXJzOiBsYXllcnMNCiAgICAgICAgfSkNCiAgICAgICAgY29uc29sZS5sb2coJ+eCuemAiSjlvq7nn6nlvaIp5p+l6K+i5Yiw55qEcXVlcnlmZWF0dXJlczonLCBxdWVyeWZlYXR1cmVzKQ0KICAgICAgICAvLyBjb25zb2xlLmxvZygi54K56YCJKOW+ruefqeW9oinmn6Xor6LnmoRxdWVyeWZlYXR1cmVzOiIsIHF1ZXJ5ZmVhdHVyZXMucHJvcGVydGllcykNCiAgICAgICAgLy8gdGhpcy5oaWdodExpZ2h0KHF1ZXJ5ZmVhdHVyZXMpLy8g6auY5Lqu6KGo5qC86K6w5b2V77yM5bm26auY5Lqu5Zyw5Zu+6KaB57SgDQogICAgICAgIHRoaXMub2JqSW5mbyA9IHt9IC8v5YWI572u56m65YaN6LWL5YC8DQogICAgICAgIC8vIOeCueWHu+S9jee9rueahOe7j+e6rOW6pg0KICAgICAgICB0aGlzLm9iakluZm8ubG5nID0gZS5sbmdMYXQubG5nDQogICAgICAgIHRoaXMub2JqSW5mby5sYXQgPSBlLmxuZ0xhdC5sYXQNCiAgICAgICAgaWYgKHF1ZXJ5ZmVhdHVyZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgIC8vIHF1ZXJ5ZmVhdHVyZXMuZm9yRWFjaChmID0+IHsNCiAgICAgICAgICBsZXQgZiA9IHF1ZXJ5ZmVhdHVyZXNbMF0NCiAgICAgICAgICBjb25zb2xlLmxvZygnZmZmZjogJywgZikNCiAgICAgICAgICAvLyDngrnlh7vopoHntKDnmoTnu4/nuqzluqbvvIzmnInnmoTor53opobnm5bmjonngrnlh7vkvY3nva7nu4/nuqzluqYNCiAgICAgICAgICB0aGlzLm9iakluZm8ubG5nID0gZi5wcm9wZXJ0aWVzLmxvbmdpdHVkZSB8fCB0aGlzLm9iakluZm8ubG5nDQogICAgICAgICAgdGhpcy5vYmpJbmZvLmxhdCA9IGYucHJvcGVydGllcy5sYXRpdHVkZSB8fCB0aGlzLm9iakluZm8ubGF0DQogICAgICAgICAgLy8g6KaB57Sg5omA5Zyo5Zu+5bGCSUTlkozlsZ7mgKfkv6Hmga8NCiAgICAgICAgICB0aGlzLm9iakluZm8ubGF5ZXJJRCA9IGYubGF5ZXIuaWQNCiAgICAgICAgICB0aGlzLm9iakluZm8ubGF5ZXJUeXBlID0gZi5sYXllci50eXBlDQogICAgICAgICAgdGhpcy5vYmpJbmZvLnByb3BlcnRpZXMgPSBmLnByb3BlcnRpZXMNCiAgICAgICAgICAvLyDlupXlm77opoHntKBuYW1lX2xvY2Fs5oiW6K6+5pa96KaB57Sgcm9hZF9uYW1lLGlkDQogICAgICAgICAgdGhpcy5vYmpJbmZvLm5hbWVfbG9jYWwgPSBmLnByb3BlcnRpZXMubmFtZV9sb2NhbA0KICAgICAgICAgIHRoaXMub2JqSW5mby5yb2FkX25hbWUgPSBmLnByb3BlcnRpZXMucm9hZF9uYW1lDQogICAgICAgICAgdGhpcy5vYmpJbmZvLmlkID0gZi5wcm9wZXJ0aWVzLmlkDQogICAgICAgICAgLy8g6KaB57Sg5a+56LGh57G75Z6L77yI5Lia5Yqh57G75Z6LL+iuvuaWveexu+Wei++8iQ0KICAgICAgICAgIHN3aXRjaCAoZi5sYXllci5pZCkgew0KICAgICAgICAgICAgLy8g6Zuo5rC0DQogICAgICAgICAgICBjYXNlICdyZF9tYXBfY29tYic6IC8vY29tYuS4gOWumuaYr+mbqOawtOWPow0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICfpm6jmsLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn6Zuo5rC05Y+jJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAncmRfbWFwX291dGZhbGwnOiAvL+aOkuaUvuWPoyAxLembqOawtO+8myAyLeaxoeawtO+8myAzLeWQiOa1ge+8myA0LeWFtuS7lg0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9IGYucHJvcGVydGllcy5waXBlX3R5cGUNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfmjpLmlL7lj6MnDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBjYXNlICdyZF9tYXBfbWFuaG9sZSc6IC8v5qOA5p+l5LqVICAxLembqOawtO+8mzIt5rGh5rC0DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gZi5wcm9wZXJ0aWVzLm1hbmhvbGVfdHlwZQ0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uc21hbGxUeXBlID0gJ+ajgOafpeS6lScNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGNhc2UgJ3JkX21hcF9nYXRlJzogLy/pl7jpl6ggMS3pm6jmsLTvvJsgMi3msaHmsLTvvJsgMy3lkIjmtYHvvJsgNC3lhbbku5YNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLmJpZ1R5cGUgPSBmLnByb3BlcnRpZXMucGlwZV90eXBlDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn6Ze46ZeoJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAncmRfbWFwX2RyYWlucGlwZV95c19iaWcnOg0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICfpm6jmsLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn6Zuo5rC0566h57q/Jw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAncmRfbWFwX2RyYWlucGlwZV95c19zbWFsbCc6DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+mbqOawtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfpm6jmsLTnrqHnur8nDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAvLyDmsaHmsLQNCiAgICAgICAgICAgIGNhc2UgJ3JkX21hcF9kcmFpbnBpcGVfd3NfYmlnJzoNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLmJpZ1R5cGUgPSAn5rGh5rC0Jw0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uc21hbGxUeXBlID0gJ+axoeawtOeuoee6vycNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGNhc2UgJ3JkX21hcF9kcmFpbnBpcGVfd3Nfc21hbGwnOg0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICfmsaHmsLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn5rGh5rC0566h57q/Jw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgLy8g57uZ5rC0DQogICAgICAgICAgICBjYXNlICdtYXBfc3VwcGx5X2ZpcmVoeWRyYW50JzogLy/mtojngavmoJPkuIDlrprmmK/nu5nmsLQNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLmJpZ1R5cGUgPSAn57uZ5rC0Jw0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uc21hbGxUeXBlID0gJ+a2iOeBq+agkycNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGNhc2UgJ21hcF9zdXBwbHlfdmFsdmUnOiAvL+mYgOmXqHZhbHZl5LiA5a6a5piv57uZ5rC0DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+e7meawtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfpmIDpl6gnDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBjYXNlICdtYXBfc3VwcGx5X3BpcGVfZGlzdHJpYnV0ZSc6IC8v6YWN5rC0566h57q/DQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+e7meawtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICfphY3msLTnrqHnur8nDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBjYXNlICdtYXBfc3VwcGx5X3BpcGVfZGVsaXZlcnknOiAvL+i+k+awtOeuoee6vw0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICdzdXBwbHknDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn6L6T5rC0566h57q/Jw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAnbWFwX3N1cHBseV9waXBlX2NpcmN1bGF0aW5nJzogLy/lm57msLTnrqHnur8NCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLmJpZ1R5cGUgPSAn57uZ5rC0Jw0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uc21hbGxUeXBlID0gJ+WbnuawtOeuoee6vycNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGNhc2UgJ21hcF93YXRlcndvcmsnOiAvL+S+m+awtOWOgg0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uYmlnVHlwZSA9ICfnu5nmsLQnDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5zbWFsbFR5cGUgPSAn5L6b5rC05Y6CJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgLy8g5YaN55Sf5rC0DQogICAgICAgICAgICBjYXNlICdtYXBfcmVjeWNsZV9waXBlJzogLy/lho3nlJ/msLTnrqHnur8NCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLmJpZ1R5cGUgPSAn5YaN55Sf5rC0Jw0KICAgICAgICAgICAgICB0aGlzLm9iakluZm8uc21hbGxUeXBlID0gJ3BpcGVsaW5lJw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgY2FzZSAnbWFwX3dhdGVyd29yayc6IC8v5YaN55Sf5rC05Y6CDQogICAgICAgICAgICAgIHRoaXMub2JqSW5mby5iaWdUeXBlID0gJ+WGjeeUn+awtCcNCiAgICAgICAgICAgICAgdGhpcy5vYmpJbmZvLnNtYWxsVHlwZSA9ICflho3nlJ/msLTljoInDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIOiuvuaWvee8luWPtw0KICAgICAgICAgIHRoaXMub2JqSW5mby5jb2RlID0NCiAgICAgICAgICAgIGYucHJvcGVydGllcy5tYW5ob2xlX2NvZGUgfHwNCiAgICAgICAgICAgIGYucHJvcGVydGllcy5nYXRlX2NvZGUgfHwNCiAgICAgICAgICAgIGYucHJvcGVydGllcy5vdXRsZXRfY29kZSB8fA0KICAgICAgICAgICAgZi5wcm9wZXJ0aWVzLmNvbWJfY29kZSB8fA0KICAgICAgICAgICAgZi5wcm9wZXJ0aWVzLnZhbHZlX2NvZGUgfHwNCiAgICAgICAgICAgIGYucHJvcGVydGllcy5wdW1wX3N0YXRpb25fY29kZSB8fA0KICAgICAgICAgICAgZi5wcm9wZXJ0aWVzLnBsYW50X2NvZGUgfHwNCiAgICAgICAgICAgIGYucHJvcGVydGllcy5wdW1wX2NvZGUgfHwNCiAgICAgICAgICAgIGYucHJvcGVydGllcy5maXJlX2NvY2tfY29kZSB8fA0KICAgICAgICAgICAgZi5wcm9wZXJ0aWVzLnN0YXJ0X2NvZGUgKyAnLCcgKyBmLnByb3BlcnRpZXMuZW5kX2NvZGUgfHwNCiAgICAgICAgICAgICcnDQogICAgICAgICAgLy8gfSkNCiAgICAgICAgfQ0KICAgICAgICBjb25zb2xlLmxvZygndGhpcy5vYmpJbmZvOiAnLCB0aGlzLm9iakluZm8pDQogICAgICAgIC8vIHBvcHVwDQogICAgICAgIGlmICh0aGlzLmNob3NlUG9pbnQpIHsNCiAgICAgICAgICBsZXQgcG9wdXBIdG1sID0gJzxkaXYgaWQ9ImJhc2UtZGV0YWlsIj48L2Rpdj4nDQogICAgICAgICAgbmV3IG1hcGJveGdsLlBvcHVwKCkNCiAgICAgICAgICAgIC5zZXRMbmdMYXQoW2UubG5nTGF0LmxuZywgZS5sbmdMYXQubGF0XSkNCiAgICAgICAgICAgIC5zZXRIVE1MKHBvcHVwSHRtbCkNCiAgICAgICAgICAgIC5hZGRUbyh3aW5kb3cueGFNYXApDQogICAgICAgICAgbmV3IHBvcHVwSXRlbSh7DQogICAgICAgICAgICBwcm9wc0RhdGE6IHsNCiAgICAgICAgICAgICAgZGV0YWlsSWQ6IDk5OTk5LA0KICAgICAgICAgICAgICBsbmc6IGUubG5nTGF0LmxuZy50b0ZpeGVkKDMpLA0KICAgICAgICAgICAgICBsYXQ6IGUubG5nTGF0LmxhdC50b0ZpeGVkKDMpLA0KICAgICAgICAgICAgICBiaWdUeXBlOiB0aGlzLm9iakluZm8uYmlnVHlwZSwNCiAgICAgICAgICAgICAgc21hbGxUeXBlOiB0aGlzLm9iakluZm8uc21hbGxUeXBlLA0KICAgICAgICAgICAgICBkZXZpY2VDb2RlOiB0aGlzLm9iakluZm8uY29kZSwNCiAgICAgICAgICAgICAgZnVuOiB0aGlzLmVkaXRGb3JtLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9KS4kbW91bnQoJyNiYXNlLWRldGFpbCcpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAvLyB3aW5kb3cueGFNYXAub24oJ2NsaWNrJyxlPT57fSnnu5PmnZ8NCiAgICB9LA0KICAgIGVkaXRGb3JtKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiAnYWRkUHJvYmxlbUluZGV4JywNCiAgICAgICAgcXVlcnk6IHsgbXNnOiB0aGlzLm9iakluZm8sIHRva2VuOiB0aGlzLmZvcm1Ub2tlbiB9LA0KICAgICAgICBwYXJhbXM6IHsgdHlwZTogJ2FkZCcgfSwNCiAgICAgIH0pDQogICAgfSwNCiAgICBhc3luYyBnZXRMaXN0MSgpIHsNCiAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgIHN5c0NvZGU6ICdvdXR3b3JrJywNCiAgICAgICAgc21hbGxUeXBlOiAnYWJub3JtYWxfaW5mb3JtJywNCiAgICAgICAgLy8gdG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sDQogICAgICAgICJwYWdlIjogew0KICAgICAgICAgICJjdXJyZW50IjogMSwNCiAgICAgICAgICAic2l6ZSI6IC0xLC8vLTHmn6Xlhajpg6gNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgYXhpb3Moew0KICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfVEhJUkRfUkVRVUVTVF9VUkwgKyAnL21haW4vb3V0d29ya2FwaS90aWNrZXRTdGF0aXN0aWNDbGllbnQvZ2V0VGlja2V0TGlzdCcsDQogICAgICAgIG1ldGhvZDogJ3Bvc3QnLA0KICAgICAgICBkYXRhOiBwYXJhbXMsDQogICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyLA0KICAgICAgfSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCdnZXRUYWJsZURhdGEtcmVzOiAnLCByZXMpDQogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLnJlc3VsdERhdGEucmVjb3JkcywgJz09PT09PT09PT09PT09PT09PT09PT09PScpDQogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5yZXN1bHREYXRhLnJlY29yZHMNCiAgICAgICAgICB0aGlzLmdldEdlb0pzb24oKQ0KICAgICAgICAgIHJlcy5kYXRhLnJlc3VsdERhdGEucmVjb3Jkcy5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgICAgICB0aGlzLnRhYmxlTGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgZmF1bHRUeXBlczogaXRlbS5mb3JtVmFsdWUuZmF1bHRUeXBlcywNCiAgICAgICAgICAgICAgdGlja2V0U3RhdHVzTmFtZTogaXRlbS50aWNrZXRTdGF0dXNOYW1lLA0KICAgICAgICAgICAgICBxdWVzdGlvbkRlc2NyaWJlOiBpdGVtLmZvcm1WYWx1ZS5xdWVzdGlvbkRlc2NyaWJlLA0KICAgICAgICAgICAgICBjcmVhdGVCeU5hbWU6IGl0ZW0uY3JlYXRlQnlOYW1lLA0KICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBpdGVtLmNyZWF0ZVRpbWUuc3Vic3RyaW5nKDAsIDEwKSwNCiAgICAgICAgICAgICAgZGVmZWN0RnJvbTogaXRlbS5mb3JtVmFsdWUuZGVmZWN0RnJvbSwNCiAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsDQogICAgICAgICAgICAgIGxuZ2xhdDogW2l0ZW0uYXBwZWFsTG5nLCBpdGVtLmFwcGVhbExhdF0sDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLy8gdGhpcy4kZW1pdCh0aGlzLnRhYmxlTGlzdCwndGFibGVMaXN0JykNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWwhuS6i+S7tuWIl+ihqOa3u+WKoOiHs+WcsOWbvg0KICAgIGdldEdlb0pzb24oKSB7DQogICAgICBsZXQgZmVhdHVyZXMgPSBbXQ0KICAgICAgbGV0IHdpdGhvdXRQb3NpdGlvbkNvdW50ID0gMA0KICAgICAgY29uc29sZS5sb2coJ+imgeiBmuWQiOWxleekuueahHRhYmxlRGF0YScsIHRoaXMudGFibGVEYXRhKQ0KICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA9PSAwKSB7DQogICAgICAgIHRoaXMucmVtb3ZlU29tZUxheWVyKCkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgIGxldCBmZWF0dXJlID0ge30NCiAgICAgICAgbGV0IHByb3BlcnRpZXMgPSB7fQ0KICAgICAgICBsZXQgZ2VvbWV0cnkgPSB7fQ0KDQogICAgICAgIHByb3BlcnRpZXMgPSBpdGVtDQogICAgICAgIHByb3BlcnRpZXMuZGVmZWN0RnJvbSA9IGl0ZW0uZm9ybVZhbHVlLmRlZmVjdEZyb20NCiAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzID0gcHJvcGVydGllcw0KICAgICAgICBmZWF0dXJlLnR5cGUgPSAnRmVhdHVyZScNCiAgICAgICAgZ2VvbWV0cnkudHlwZSA9ICdQb2ludCcNCiAgICAgICAgaWYgKGl0ZW0uYXBwZWFsTGF0ICYmIGl0ZW0uYXBwZWFsTG5nKSB7DQogICAgICAgICAgLy8gZ2VvbWV0cnkuY29vcmRpbmF0ZXMgPSBbaXRlbS5hcHBlYWxMYXQsIGl0ZW0uYXBwZWFsTG9uXQ0KICAgICAgICAgIGdlb21ldHJ5LmNvb3JkaW5hdGVzID0gW2l0ZW0uYXBwZWFsTG5nLCBpdGVtLmFwcGVhbExhdF0gLy8gd2dzODQNCiAgICAgICAgICBmZWF0dXJlLmdlb21ldHJ5ID0gZ2VvbWV0cnkNCiAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpDQogICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgaXRlbS5mb3JtVmFsdWUuZGV2aWNlRGV0YWlsPy5sYXRpdHVkZSAmJg0KICAgICAgICAgIGl0ZW0uZm9ybVZhbHVlLmRldmljZURldGFpbD8ubG9uZ2l0dWRlDQogICAgICAgICkgew0KICAgICAgICAgIGdlb21ldHJ5LmNvb3JkaW5hdGVzID0gWw0KICAgICAgICAgICAgaXRlbS5mb3JtVmFsdWUuZGV2aWNlRGV0YWlsLmxvbmdpdHVkZSwNCiAgICAgICAgICAgIGl0ZW0uZm9ybVZhbHVlLmRldmljZURldGFpbC5sYXRpdHVkZSwNCiAgICAgICAgICBdDQogICAgICAgICAgZmVhdHVyZS5nZW9tZXRyeSA9IGdlb21ldHJ5DQogICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKQ0KICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgIGl0ZW0uZm9ybVZhbHVlLnRpY2tldEFkZHJlc3M/LmxvbmdpdHVkZSAmJg0KICAgICAgICAgIGl0ZW0uZm9ybVZhbHVlLnRpY2tldEFkZHJlc3M/LmxhdGl0dWRlDQogICAgICAgICkgew0KICAgICAgICAgIGdlb21ldHJ5LmNvb3JkaW5hdGVzID0gWw0KICAgICAgICAgICAgaXRlbS5mb3JtVmFsdWUudGlja2V0QWRkcmVzcy5sb25naXR1ZGUsDQogICAgICAgICAgICBpdGVtLmZvcm1WYWx1ZS50aWNrZXRBZGRyZXNzLmxhdGl0dWRlLA0KICAgICAgICAgIF0NCiAgICAgICAgICBmZWF0dXJlLmdlb21ldHJ5ID0gZ2VvbWV0cnkNCiAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgLy8gZ2VvbWV0cnkuY29vcmRpbmF0ZXMgPSBbMzkuMDY2ODMwNjQ0MzUyNDUsIDExNS45NDUzOTQ3MDk3MDYzXQ0KICAgICAgICAgIHdpdGhvdXRQb3NpdGlvbkNvdW50ICs9IDENCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIGNvbnNvbGUubG9nKCfml6DlnZDmoIfkuKrmlbAnLCB3aXRob3V0UG9zaXRpb25Db3VudCkNCiAgICAgIC8vIOiBmuWQiOaVsOaNriDmnoTpgKDlpLTpg6gNCiAgICAgIGxldCBnZW9Kc29uID0gew0KICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLA0KICAgICAgICBjcnM6IHsgdHlwZTogJ25hbWUnLCBwcm9wZXJ0aWVzOiB7IG5hbWU6ICd1cm46b2djOmRlZjpjcnM6T0dDOjEuMzpDUlM4NCcgfSB9LA0KICAgICAgICBmZWF0dXJlczogW10sDQogICAgICB9DQogICAgICBnZW9Kc29uLmZlYXR1cmVzID0gZmVhdHVyZXMNCiAgICAgIGNvbnNvbGUubG9nKCfogZrlkIjnmoRnZW9Kc29uJywgZ2VvSnNvbikNCiAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgIGlmIChNYXBPYmoubWFwKSB7DQogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKQ0KICAgICAgICAgIHRoaXMucmVuZGVyQ2x1c3RlcihnZW9Kc29uKQ0KICAgICAgICB9DQogICAgICB9LCAxMDApDQogICAgfSwNCiAgICByZW1vdmVTb21lTGF5ZXIoKSB7DQogICAgICBbJ2NsdXN0ZXJzJywgJ2NsdXN0ZXItY291bnQnLCAndW5jbHVzdGVyZWQtcG9pbnQnXS5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgIGlmIChNYXBPYmoubWFwPy5nZXRMYXllcihpdGVtKSkgew0KICAgICAgICAgIE1hcE9iai5tYXAucmVtb3ZlTGF5ZXIoaXRlbSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIGlmIChNYXBPYmoubWFwPy5nZXRTb3VyY2UoJ2VhcnRocXVha2VzJykpIHsNCiAgICAgICAgTWFwT2JqLm1hcC5yZW1vdmVTb3VyY2UoJ2VhcnRocXVha2VzJykNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOa4suafkw0KICAgIHJlbmRlckNsdXN0ZXIoZ2VvSnNvblNvdXJjZSkgew0KICAgICAgdGhpcy5yZW1vdmVTb21lTGF5ZXIoKQ0KICAgICAgTWFwT2JqLm1hcC5hZGRTb3VyY2UoJ2VhcnRocXVha2VzJywgew0KICAgICAgICB0eXBlOiAnZ2VvanNvbicsDQogICAgICAgIGRhdGE6IGdlb0pzb25Tb3VyY2UsDQogICAgICAgIGNsdXN0ZXI6IHRydWUsDQogICAgICAgIGNsdXN0ZXJNYXhab29tOiAxNCwgLy8gTWF4IHpvb20gdG8gY2x1c3RlciBwb2ludHMgb24NCiAgICAgICAgY2x1c3RlclJhZGl1czogNTAsIC8vIFJhZGl1cyBvZiBlYWNoIGNsdXN0ZXIgd2hlbiBjbHVzdGVyaW5nIHBvaW50cyAoZGVmYXVsdHMgdG8gNTApDQogICAgICB9KQ0KDQogICAgICBNYXBPYmoubWFwLmFkZExheWVyKHsNCiAgICAgICAgaWQ6ICdjbHVzdGVycycsDQogICAgICAgIHR5cGU6ICdjaXJjbGUnLA0KICAgICAgICBzb3VyY2U6ICdlYXJ0aHF1YWtlcycsDQogICAgICAgIGZpbHRlcjogWydoYXMnLCAncG9pbnRfY291bnQnXSwNCiAgICAgICAgcGFpbnQ6IHsNCiAgICAgICAgICAnY2lyY2xlLWNvbG9yJzogWydzdGVwJywgWydnZXQnLCAncG9pbnRfY291bnQnXSwgInJnYmEoMCwgMjA5LCAxMzQsIDAuOCkiLCA1LCAicmdiYSgyNTUsIDE0OCwgNDEsIDAuOCkiLCAxNSwgInJnYmEoMjU1LCA3NCwgNjUsIDAuOCkiXSwNCiAgICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IFsnc3RlcCcsIFsnZ2V0JywgJ3BvaW50X2NvdW50J10sIDIwLCA1LCAyNSwgMTUsIDMwXSwNCiAgICAgICAgICAvLyDov5nkuKrmmK/lpJbovrnmoYbnmoTpopzoibIgY2lyY2xlLXN0cm9rZS1jb2xvcui/meS4quWvueW6lOS6huS4iumdomNpcmNsZS1jb2xvcg0KICAgICAgICAgICJjaXJjbGUtc3Ryb2tlLWNvbG9yIjogWw0KICAgICAgICAgICAgInN0ZXAiLA0KICAgICAgICAgICAgWyJnZXQiLCAicG9pbnRfY291bnQiXSwNCiAgICAgICAgICAgICJyZ2JhKDAsIDIwOSwgMTM0LCAwLjMpIiwNCiAgICAgICAgICAgIDUsDQogICAgICAgICAgICAicmdiYSgyNTUsIDE0OCwgNDEsIDAuMykiLA0KICAgICAgICAgICAgMTUsDQogICAgICAgICAgICAicmdiYSgyNTUsIDc0LCA2NSwgMC4zKSINCiAgICAgICAgICBdLA0KICAgICAgICAgIC8vIOi/meS4quaYr+Wklui+ueahhuaZleafk+eahOiMg+WbtA0KICAgICAgICAgICJjaXJjbGUtc3Ryb2tlLXdpZHRoIjogWw0KICAgICAgICAgICAgInN0ZXAiLA0KICAgICAgICAgICAgWyJnZXQiLCAicG9pbnRfY291bnQiXSwNCiAgICAgICAgICAgIDgsIC8v6JOd6Imy5pmV5p+T6ZW/5bqm77yM5b2T54K55pWw5bCP5LqOMTAw5pe25Li6NXB45pmV5p+TDQogICAgICAgICAgICA1LCAvL+WvueW6lOS4iumdomNpcmNsZS1jb2xvciDmlbDlrZfvvIzmhI/mgJ3kuLoxMDDku6XlhoUNCiAgICAgICAgICAgIDEyLCAvL+eCueiuoeaVsOWcqDEwMOWIsDc1MOS5i+mXtOaXtuS4uum7hOiJsu+8jDZweOaZleafkw0KICAgICAgICAgICAgMTUsIC8v5a+55bqU5LiK6Z2iY2lyY2xlLWNvbG9yIOaVsOWtl++8jOaEj+aAneS4ujc1MOS7peWGhQ0KICAgICAgICAgICAgMTUgLy/ngrnorqHmlbDlpKfkuo7miJbnrYnkuo43NTDml7bkuLo3cHjlg4/ntKDnmoTnsonnuqLoibLmmZXmn5MNCiAgICAgICAgICBdDQogICAgICAgIH0sDQogICAgICB9KQ0KDQogICAgICBNYXBPYmoubWFwLmFkZExheWVyKHsNCiAgICAgICAgaWQ6ICdjbHVzdGVyLWNvdW50JywNCiAgICAgICAgdHlwZTogJ3N5bWJvbCcsDQogICAgICAgIHNvdXJjZTogJ2VhcnRocXVha2VzJywNCiAgICAgICAgZmlsdGVyOiBbJ2hhcycsICdwb2ludF9jb3VudCddLA0KICAgICAgICBsYXlvdXQ6IHsNCiAgICAgICAgICAndGV4dC1maWVsZCc6ICd7cG9pbnRfY291bnRfYWJicmV2aWF0ZWR9JywNCiAgICAgICAgICAvLyAndGV4dC1mb250JzogWydESU4gT2ZmYyBQcm8gTWVkaXVtJywgJ0FyaWFsIFVuaWNvZGUgTVMgQm9sZCddLA0KICAgICAgICAgICd0ZXh0LXNpemUnOiAxMiwNCiAgICAgICAgfSwNCiAgICAgIH0pDQoNCiAgICAgIE1hcE9iai5tYXAuYWRkTGF5ZXIoew0KICAgICAgICBpZDogJ3VuY2x1c3RlcmVkLXBvaW50JywNCiAgICAgICAgc291cmNlOiAnZWFydGhxdWFrZXMnLA0KICAgICAgICBmaWx0ZXI6IFsnIScsIFsnaGFzJywgJ3BvaW50X2NvdW50J11dLA0KICAgICAgICB0eXBlOiAnc3ltYm9sJywNCiAgICAgICAgbGF5b3V0OiB7DQogICAgICAgICAgJ2ljb24taW1hZ2UnOiAn5LqL5Lu254K5JywgLy8g54K555qE5Zu+5qCHDQogICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnLA0KICAgICAgICAgICdpY29uLXNpemUnOiAwLjcsDQogICAgICAgIH0sDQogICAgICB9KQ0KDQogICAgICBNYXBPYmoubWFwLm9uKCdjbGljaycsICd1bmNsdXN0ZXJlZC1wb2ludCcsIChlKSA9PiB7DQogICAgICAgIC8vIOWmguaenOW9k+WJjeS6i+S7tueCueaJgOaciXBvcHVw5Li65omT5byA54q25oCB77yM5Y2z5LqL5Lu254K5cG9wdXDmlbDnu4Tplb/luqbkuI3kuLow77yM6YCA5Ye66K+l5qyh54K55Ye75LqL5Lu2DQogICAgICAgIC8vIGlmIChNYXBPYmouZXZlbnRQb3B1cEFycmF5Lmxlbmd0aCA+IDApIHJldHVybg0KICAgICAgICAvLyDmr4/mrKHngrnlh7vmlrDnmoTkuovku7bngrnlsLHmuIXpmaTpooTmoYjmlbDmja4NCiAgICAgICAgLy8gdGhpcy5maWxlTGlzdCA9IFtdDQogICAgICAgIGNvbnNvbGUubG9nKCdlLmZlYXR1cmVzOiAnLCBlLmZlYXR1cmVzKQ0KICAgICAgICAvLyBjb25zb2xlLmxvZygnZm9ybVZhbHVlOiAnLCBKU09OLnBhcnNlKGUuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5mb3JtVmFsdWUpKQ0KICAgICAgICBNYXBPYmoubWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJw0KDQogICAgICAgIGxldCBmb3JtVmFsdWUgPSBKU09OLnBhcnNlKGUuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5mb3JtVmFsdWUpDQogICAgICAgIGNvbnNvbGUubG9nKCdmb3JtVmFsdWU6ICcsIGZvcm1WYWx1ZSkNCg0KICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBlLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnNsaWNlKCkNCiAgICAgICAgd2hpbGUgKE1hdGguYWJzKGUubG5nTGF0LmxuZyAtIGNvb3JkaW5hdGVzWzBdKSA+IDE4MCkgew0KICAgICAgICAgIGNvb3JkaW5hdGVzWzBdICs9IGUubG5nTGF0LmxuZyA+IGNvb3JkaW5hdGVzWzBdID8gMzYwIDogLTM2MA0KICAgICAgICB9DQogICAgICAgIC8vIENyZWF0ZSBhIHBvcHVwLCBidXQgZG9uJ3QgYWRkIGl0IHRvIHRoZSBtYXAgeWV0Lg0KICAgICAgICAvLyB0aGlzLnBvcHVwMSA9IG5ldyBtYXBib3hnbC5Qb3B1cCh7DQogICAgICAgIC8vICAgY2xvc2VPbkNsaWNrOiB0cnVlLA0KICAgICAgICAvLyAgIGNsb3NlQnV0dG9uOiBmYWxzZSwNCiAgICAgICAgLy8gICBhbmNob3I6ICdib3R0b20nLA0KICAgICAgICAvLyAgIG9mZnNldDogeyBib3R0b206IFswLCAtMTVdIH0sDQogICAgICAgIC8vIH0pDQogICAgICAgIC8vIGxldCB0ZXh0ID0gZm9ybVZhbHVlLmRldGFpbCA/IGZvcm1WYWx1ZS5kZXRhaWwuZGVmZWN0VHlwZSA6ICflhbbku5YnDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCd0ZXh0OiAnLCB0ZXh0KTsNCiAgICAgICAgLy8gdGhpcy5wb3B1cDENCiAgICAgICAgLy8gICAuc2V0TG5nTGF0KGNvb3JkaW5hdGVzKQ0KICAgICAgICAvLyAgIC5zZXRIVE1MKCc8ZGl2IGlkPSJ2dWUtcG9wdXAtY3VzdG9tIiBjbGFzcz0idnVlLXBvcHVwLWN1c3RvbSI+PGgzPicNCiAgICAgICAgLy8gICAgICsgdGV4dA0KICAgICAgICAvLyAgICAgKyAnPC9oMz48L2Rpdj4nKQ0KICAgICAgICAvLyAgIC5hZGRUbyhNYXBPYmoubWFwKQ0KICAgICAgfSkNCg0KICAgICAgLy8gaW5zcGVjdCBhIGNsdXN0ZXIgb24gY2xpY2sNCiAgICAgIE1hcE9iai5tYXAub24oJ2NsaWNrJywgJ2NsdXN0ZXJzJywgZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgdmFyIGZlYXR1cmVzID0gTWFwT2JqLm1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZS5wb2ludCwgeyBsYXllcnM6IFsnY2x1c3RlcnMnXSB9KQ0KICAgICAgICB2YXIgY2x1c3RlcklkID0gZmVhdHVyZXNbMF0ucHJvcGVydGllcy5jbHVzdGVyX2lkDQogICAgICAgIE1hcE9iai5tYXANCiAgICAgICAgICAuZ2V0U291cmNlKCdlYXJ0aHF1YWtlcycpDQogICAgICAgICAgLmdldENsdXN0ZXJFeHBhbnNpb25ab29tKGNsdXN0ZXJJZCwgZnVuY3Rpb24gKGVyciwgem9vbSkgew0KICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuDQogICAgICAgICAgICBNYXBPYmoubWFwLmVhc2VUbyh7DQogICAgICAgICAgICAgIGNlbnRlcjogZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMsDQogICAgICAgICAgICAgIHpvb206IHpvb20sDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICB9KQ0KICAgICAgTWFwT2JqLm1hcC5zZXRNaW5ab29tKDApDQogICAgICBNYXBPYmoubWFwLnNldE1heFpvb20oMzApDQogICAgfSwNCiAgICBhZGQoKSB7DQogICAgICB0aGlzLm9iakluZm8gPSB7fQ0KICAgICAgVG9hc3Qoew0KICAgICAgICBtZXNzYWdlOiAn5Zyw5Zu+54K56YCJJywNCiAgICAgICAgcG9zaXRpb246ICd0b3AnLA0KICAgICAgfSkNCiAgICAgIHRoaXMuY2hvc2VQb2ludCA9IHRydWUNCiAgICB9LA0KICB9LA0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ProblemReport","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <fm-nav-bar title=\"问题上报\" left-arrow @click-left=\"$router.go(-1)\" @click-right=\"add\">\r\n      <template #right>\r\n        <i class=\"fm-icon fm-icon-plus\"></i>\r\n      </template>\r\n    </fm-nav-bar>\r\n\r\n    <!-- <div class=\"map-container\" id=\"mapContainer\"></div> -->\r\n    <xa-map :create=\"mapLoaded\"></xa-map>\r\n    <!-- <MapComp\r\n      ref=\"mymap\"\r\n      :create=\"initMap\"\r\n      style=\"position: absolute\"\r\n    ></MapComp> -->\r\n    <problemList :tableList=\"tableList\" @flyTo=\"toTarget\" />\r\n    <!-- 增加按钮 -->\r\n    <!-- <div class=\"bottom\" @click=\"add\">\r\n      <i class=\"fm-icon-plus\"></i>\r\n    </div> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addIconToMap } from '@/utils/mapUtils'\r\nimport MapComp from '@/components/xa-map/index.vue'\r\nimport problemList from '@/views/ProblemReport/problemList.vue'\r\nimport mapboxgl from 'mapbox-gl'\r\nimport 'mapbox-gl/dist/mapbox-gl.css'\r\nimport mapStyle from './mapStyle'\r\nimport popup from './popup'\r\nconst popupItem = Vue.extend(popup)\r\nconst MapObj = {\r\n  map: null,\r\n  mapInstance: null,\r\n}\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport {\r\n  NavBar,\r\n  Search,\r\n  Toast,\r\n  Cell,\r\n  CellGroup,\r\n  PullRefresh,\r\n  List,\r\n  Sidebar,\r\n  SidebarItem,\r\n  SwipeCell,\r\n  Button,\r\n  NoticeBar,\r\n  Icon,\r\n  Dialog,\r\n} from 'fawkes-mobile-lib'\r\n\r\nexport default {\r\n  name: 'Inspection',\r\n  components: {\r\n    MapComp,\r\n    problemList,\r\n    [NavBar.name]: NavBar,\r\n    [Search.name]: Search,\r\n    [Toast.name]: Toast,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [PullRefresh.name]: PullRefresh,\r\n    [List.name]: List,\r\n    [Sidebar.name]: Sidebar,\r\n    [SidebarItem.name]: SidebarItem,\r\n    [SwipeCell.name]: SwipeCell,\r\n    [Button.name]: Button,\r\n    [NoticeBar.name]: NoticeBar,\r\n    [Icon.name]: Icon,\r\n    [Dialog.name]: Dialog,\r\n  },\r\n  data() {\r\n    return {\r\n      lnglat: [],\r\n      chosePoint: false,\r\n      objInfo: {},\r\n      accessToken: this.$storage.get('access_token'),\r\n      header: {},\r\n      formToken: '',\r\n      tableList: [],\r\n      inspBusinessType: '',\r\n      tableData: [],\r\n      icons: [\r\n                {\r\n                    name: '事件点',\r\n                    url: require('@/assets/img/map/dw.png'),\r\n                },\r\n            ],\r\n      timer: null,\r\n    }\r\n  },\r\n  computed: {\r\n    eventTypeListNewFiltered() {\r\n      const { dictionary, eventTypeList, taskDetail } = this\r\n      let temp = eventTypeList.find((item) => {\r\n        return item.label === dictionary[taskDetail.inspBusinessType]\r\n      })\r\n      if (temp) {\r\n        return temp.children\r\n      } else {\r\n        return null\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    // 获取header，查询工单用\r\n    axios({\r\n      url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/userCenterApi/sso/tokenByToken',\r\n      method: 'post',\r\n      params: {\r\n        token: this.accessToken,\r\n      },\r\n      headers: {\r\n        Authorization: 'Basic b3V0d29yazp3cGcyMDIw',\r\n      },\r\n    }).then((res) => {\r\n      if (res.status == 200) {\r\n        this.formToken = res.data.resultData.token\r\n        this.header = {\r\n          'Content-Type': 'application/json',\r\n          Authorization: 'Bearer ' + this.formToken,\r\n        }\r\n        console.log(' this.header查询工单用 : ', this.header)\r\n        this.getList1() // 获取工单列表,\r\n      }\r\n    })\r\n  },\r\n  mounted() {\r\n    // this.initMap()\r\n  },\r\n  beforeDestroy() {\r\n    if (this.timer) {\r\n      clearInterval(this.timer)\r\n    }\r\n  },\r\n  methods: {\r\n    // 地图相关\r\n    toTarget(lnglat) {\r\n\r\n      if (lnglat.length == 2) {\r\n        window.xaMap.flyTo({\r\n          center: lnglat,\r\n          zoom: 19,\r\n        })\r\n      } else {\r\n        console.log(\"无位置信息\")\r\n      }\r\n    },\r\n    async mapLoaded() {\r\n      MapObj.map = window.xaMap\r\n      await addIconToMap(MapObj.map, this.icons)\r\n      window.xaMap.on('click', (e) => {\r\n        // 若为functio(e){ this是this.window.xaMap}\r\n        // (e)=>{ this是this}\r\n        console.log('map-click-e', e)\r\n        console.log('e.lngLatn', e.lngLat)\r\n        var bbox = [\r\n          [e.point.x - 1, e.point.y - 1],\r\n          [e.point.x + 1, e.point.y + 1],\r\n        ]\r\n        console.log('bbox:', bbox)\r\n        // mapbox 返回查询要素的图层属性\r\n        let queryfeatures = window.xaMap.queryRenderedFeatures(bbox, {\r\n          layers: [\r\n            'rd_map_drainpipe_ys_big',\r\n            'rd_map_drainpipe_ys_small',\r\n            'rd_map_drainpipe_ws_small',\r\n            'rd_map_drainpipe_ws_big',\r\n            'rd_map_outfall',\r\n            'rd_map_gate',\r\n            'rd_map_manhole',\r\n            'rd_map_comb',\r\n            'map_supply_firehydrant',\r\n            'map_supply_valve',\r\n            'map_supply_pipe_distribute',\r\n            'map_supply_pipe_delivery',\r\n            'map_supply_pipe_circulating',\r\n            'map_supply_node_distribute',\r\n            'map_supply_node_delivery',\r\n            'map_supply_node_circulating',\r\n            'map_recycle_pipe',\r\n            'map_recycle_node',\r\n            'map_waterwork',\r\n          ],\r\n          // layers: layers\r\n        })\r\n        console.log('点选(微矩形)查询到的queryfeatures:', queryfeatures)\r\n        // console.log(\"点选(微矩形)查询的queryfeatures:\", queryfeatures.properties)\r\n        // this.hightLight(queryfeatures)// 高亮表格记录，并高亮地图要素\r\n        this.objInfo = {} //先置空再赋值\r\n        // 点击位置的经纬度\r\n        this.objInfo.lng = e.lngLat.lng\r\n        this.objInfo.lat = e.lngLat.lat\r\n        if (queryfeatures.length > 0) {\r\n          // queryfeatures.forEach(f => {\r\n          let f = queryfeatures[0]\r\n          console.log('ffff: ', f)\r\n          // 点击要素的经纬度，有的话覆盖掉点击位置经纬度\r\n          // this.objInfo.lng = f.properties.longitude || this.objInfo.lng\r\n          // this.objInfo.lat = f.properties.latitude || this.objInfo.lat\r\n          // 要素所在图层ID和属性信息\r\n          this.objInfo.layerID = f.layer.id\r\n          this.objInfo.layerType = f.layer.type\r\n          this.objInfo.properties = f.properties\r\n          // 底图要素name_local或设施要素road_name,id\r\n          this.objInfo.name_local = f.properties.name_local\r\n          this.objInfo.road_name = f.properties.road_name\r\n          this.objInfo.id = f.properties.id\r\n          // 要素对象类型（业务类型/设施类型）\r\n          this.objInfo.bigType = ''\r\n          this.objInfo.smallType = ''\r\n          switch (f.layer.id) {\r\n            // 雨水\r\n            case \"rd_map_comb\"://comb一定是雨水口\r\n              this.objInfo.bigType = '雨水'\r\n              this.objInfo.smallType = '雨水口'\r\n              break\r\n            case \"rd_map_outfall\"://排放口 1-雨水； 2-污水； 3-合流； 4-其他\r\n              this.objInfo.bigType = f.properties.pipe_type\r\n              this.objInfo.smallType = '排放口'\r\n              break\r\n            case \"rd_map_manhole\"://检查井  1-雨水；2-污水\r\n              this.objInfo.bigType = f.properties.manhole_type\r\n              this.objInfo.smallType = f.properties.manhole_type == \"雨水\" ? '雨水检查井' : '污水检查井'\r\n              break\r\n            case \"rd_map_gate\"://闸门 1-雨水； 2-污水； 3-合流； 4-其他\r\n              this.objInfo.bigType = f.properties.pipe_type\r\n              // objInfo.smallType = '闸门'\r\n              this.objInfo.smallType = f.properties.pipe_type == \"雨水\" ? '其他（雨）' : '其他（污）'\r\n              break\r\n            case \"rd_map_drainpipe_ys_big\":\r\n              this.objInfo.bigType = '雨水'\r\n              this.objInfo.smallType = '雨水管渠'\r\n              break\r\n            case \"rd_map_drainpipe_ys_small\":\r\n              this.objInfo.bigType = '雨水'\r\n              this.objInfo.smallType = '雨水管渠'\r\n              break\r\n            // 污水\r\n            case \"rd_map_drainpipe_ws_big\":\r\n              this.objInfo.bigType = '污水'\r\n              this.objInfo.smallType = '污水管道'\r\n              break\r\n            case \"rd_map_drainpipe_ws_small\":\r\n              this.objInfo.bigType = '污水'\r\n              this.objInfo.smallType = '污水管道'\r\n              break\r\n            // 供水\r\n            case \"map_supply_firehydrant\"://消火栓一定是供水\r\n              this.objInfo.bigType = '供水'\r\n              this.objInfo.smallType = '消防栓'\r\n              break\r\n            case \"map_supply_valve\"://阀门valve一定是供水\r\n              this.objInfo.bigType = '供水'\r\n              this.objInfo.smallType = '阀门'\r\n              break\r\n            case \"map_supply_pipe_distribute\"://配水管线\r\n              this.objInfo.bigType = '供水'\r\n              this.objInfo.smallType = '供水管道'\r\n              break\r\n            case \"map_supply_pipe_delivery\"://输水管线\r\n              this.objInfo.bigType = 'supply'\r\n              this.objInfo.smallType = '供水管道'\r\n              break\r\n            case \"map_supply_pipe_circulating\"://回水管线\r\n              this.objInfo.bigType = '供水'\r\n              this.objInfo.smallType = '供水管道'\r\n              break\r\n\r\n            case \"map_supply_node_delivery\":\r\n              this.objInfo.bigType = '供水'\r\n              this.objInfo.smallType = f.properties.appurtenance == \"消防井\" ? \"消防栓\" : f.properties.appurtenance == \"排气阀\" ? \"阀门\" : '其他（供）'\r\n              break\r\n\r\n            case \"map_waterwork\"://供水厂\r\n              this.objInfo.bigType = '供水'\r\n              this.objInfo.smallType = '其他（供）'\r\n              break\r\n            // 再生水\r\n            case \"map_recycle_pipe\"://再生水管线\r\n              this.objInfo.bigType = '再生水'\r\n              this.objInfo.smallType = '再生水管道'\r\n              break\r\n            case \"map_waterwork\"://再生水厂\r\n              this.objInfo.bigType = '再生水'\r\n              this.objInfo.smallType = '其他（再）'\r\n              break\r\n          }\r\n          // 设施编号\r\n          this.objInfo.code = f.properties.start_code && f.properties.end_code ? (f.properties.start_code + ',' + f.properties.end_code) : ''\r\n            || f.properties.manhole_code || f.properties.gate_code || f.properties.outlet_code\r\n            || f.properties.comb_code || f.properties.valve_code || f.properties.pump_station_code\r\n            || f.properties.plant_code || f.properties.pump_code || f.properties.fire_cock_code\r\n            || f.properties.point_code || ''\r\n        }\r\n        console.log('this.objInfo: ', this.objInfo)\r\n        // popup\r\n        if (this.chosePoint) {\r\n          let popupHtml = '<div id=\"base-detail\"></div>'\r\n          new mapboxgl.Popup()\r\n            .setLngLat([e.lngLat.lng, e.lngLat.lat])\r\n            .setHTML(popupHtml)\r\n            .addTo(window.xaMap)\r\n          new popupItem({\r\n            propsData: {\r\n              detailId: 99999,\r\n              lng: e.lngLat.lng.toFixed(3),\r\n              lat: e.lngLat.lat.toFixed(3),\r\n              bigType: this.objInfo.bigType,\r\n              smallType: this.objInfo.smallType,\r\n              deviceCode: this.objInfo.code,\r\n              fun: this.editForm,\r\n            },\r\n          }).$mount('#base-detail')\r\n        }\r\n      })\r\n    },\r\n    initMap() {\r\n      mapboxgl.accessToken =\r\n        'pk.eyJ1IjoiOTM0MDk0Mjg2IiwiYSI6ImNsMnNmdmVrZDBrZGMzZG50cHJudXJkbW8ifQ.C0wKhJgrToFJgL8GH5M8rg'\r\n      window.xaMap = new mapboxgl.Map({\r\n        container: 'mapContainer', // 容器DOM id\r\n        style: mapStyle,\r\n        center: [115.92486101369428, 39.06075549589073],\r\n        zoom: 13,\r\n        minZoom: 10,\r\n        pitch: 0,\r\n      })\r\n      // let needLayers=[]\r\n      // 加图层 http://172.20.79.65/api/swan/mapWorkshopSource/detail?id=1544640278559821826\r\n      axios\r\n        .get('http://172.20.79.65/api/swan/mapWorkshopSource/detail?id=1548573412963749889')\r\n        .then((res) => {\r\n          console.log('res: ', res)\r\n          let layers = JSON.parse(res.data.data.jsonData)\r\n          console.log('layers: ', layers)\r\n          Object.keys(layers.sources).forEach((key) => {\r\n            window.xaMap.addSource(key, layers.sources[key])\r\n          })\r\n          // needLayers=layers.layers\r\n          layers.layers.forEach((layer) => {\r\n            window.xaMap.addLayer(layer)\r\n            window.xaMap.setLayoutProperty(layer.id, 'visibility', 'visible')\r\n          })\r\n        })\r\n        .catch((e) => { })\r\n        .finally(() => { })\r\n      // 监听地图点击\r\n      // window.xaMap.on(\"click\", function(e)  {})\r\n      // window.xaMap.on(\"click\", layer.id,function(e)  {})//才能选到features???,就拿到过一次\r\n\r\n      window.xaMap.on('click', (e) => {\r\n        // 若为functio(e){ this是this.window.xaMap}\r\n        // (e)=>{ this是this}\r\n        console.log('map-click-e', e)\r\n        console.log('e.lngLatn', e.lngLat)\r\n        var bbox = [\r\n          [e.point.x - 1, e.point.y - 1],\r\n          [e.point.x + 1, e.point.y + 1],\r\n        ]\r\n        console.log('bbox:', bbox)\r\n        // mapbox 返回查询要素的图层属性\r\n        let queryfeatures = window.xaMap.queryRenderedFeatures(bbox, {\r\n          layers: [\r\n            'rd_map_drainpipe_ys_big',\r\n            'rd_map_drainpipe_ys_small',\r\n            'rd_map_drainpipe_ws_small',\r\n            'rd_map_drainpipe_ws_big',\r\n            'rd_map_outfall',\r\n            'rd_map_gate',\r\n            'rd_map_manhole',\r\n            'rd_map_comb',\r\n            'map_supply_firehydrant',\r\n            'map_supply_valve',\r\n            'map_supply_pipe_distribute',\r\n            'map_supply_pipe_delivery',\r\n            'map_supply_pipe_circulating',\r\n            'map_supply_node_distribute',\r\n            'map_supply_node_delivery',\r\n            'map_supply_node_circulating',\r\n            'map_recycle_pipe',\r\n            'map_recycle_node',\r\n            'map_waterwork',\r\n          ],\r\n          // layers: layers\r\n        })\r\n        console.log('点选(微矩形)查询到的queryfeatures:', queryfeatures)\r\n        // console.log(\"点选(微矩形)查询的queryfeatures:\", queryfeatures.properties)\r\n        // this.hightLight(queryfeatures)// 高亮表格记录，并高亮地图要素\r\n        this.objInfo = {} //先置空再赋值\r\n        // 点击位置的经纬度\r\n        this.objInfo.lng = e.lngLat.lng\r\n        this.objInfo.lat = e.lngLat.lat\r\n        if (queryfeatures.length > 0) {\r\n          // queryfeatures.forEach(f => {\r\n          let f = queryfeatures[0]\r\n          console.log('ffff: ', f)\r\n          // 点击要素的经纬度，有的话覆盖掉点击位置经纬度\r\n          this.objInfo.lng = f.properties.longitude || this.objInfo.lng\r\n          this.objInfo.lat = f.properties.latitude || this.objInfo.lat\r\n          // 要素所在图层ID和属性信息\r\n          this.objInfo.layerID = f.layer.id\r\n          this.objInfo.layerType = f.layer.type\r\n          this.objInfo.properties = f.properties\r\n          // 底图要素name_local或设施要素road_name,id\r\n          this.objInfo.name_local = f.properties.name_local\r\n          this.objInfo.road_name = f.properties.road_name\r\n          this.objInfo.id = f.properties.id\r\n          // 要素对象类型（业务类型/设施类型）\r\n          switch (f.layer.id) {\r\n            // 雨水\r\n            case 'rd_map_comb': //comb一定是雨水口\r\n              this.objInfo.bigType = '雨水'\r\n              this.objInfo.smallType = '雨水口'\r\n              break\r\n            case 'rd_map_outfall': //排放口 1-雨水； 2-污水； 3-合流； 4-其他\r\n              this.objInfo.bigType = f.properties.pipe_type\r\n              this.objInfo.smallType = '排放口'\r\n              break\r\n            case 'rd_map_manhole': //检查井  1-雨水；2-污水\r\n              this.objInfo.bigType = f.properties.manhole_type\r\n              this.objInfo.smallType = '检查井'\r\n              break\r\n            case 'rd_map_gate': //闸门 1-雨水； 2-污水； 3-合流； 4-其他\r\n              this.objInfo.bigType = f.properties.pipe_type\r\n              this.objInfo.smallType = '闸门'\r\n              break\r\n            case 'rd_map_drainpipe_ys_big':\r\n              this.objInfo.bigType = '雨水'\r\n              this.objInfo.smallType = '雨水管线'\r\n              break\r\n            case 'rd_map_drainpipe_ys_small':\r\n              this.objInfo.bigType = '雨水'\r\n              this.objInfo.smallType = '雨水管线'\r\n              break\r\n            // 污水\r\n            case 'rd_map_drainpipe_ws_big':\r\n              this.objInfo.bigType = '污水'\r\n              this.objInfo.smallType = '污水管线'\r\n              break\r\n            case 'rd_map_drainpipe_ws_small':\r\n              this.objInfo.bigType = '污水'\r\n              this.objInfo.smallType = '污水管线'\r\n              break\r\n            // 给水\r\n            case 'map_supply_firehydrant': //消火栓一定是给水\r\n              this.objInfo.bigType = '给水'\r\n              this.objInfo.smallType = '消火栓'\r\n              break\r\n            case 'map_supply_valve': //阀门valve一定是给水\r\n              this.objInfo.bigType = '给水'\r\n              this.objInfo.smallType = '阀门'\r\n              break\r\n            case 'map_supply_pipe_distribute': //配水管线\r\n              this.objInfo.bigType = '给水'\r\n              this.objInfo.smallType = '配水管线'\r\n              break\r\n            case 'map_supply_pipe_delivery': //输水管线\r\n              this.objInfo.bigType = 'supply'\r\n              this.objInfo.smallType = '输水管线'\r\n              break\r\n            case 'map_supply_pipe_circulating': //回水管线\r\n              this.objInfo.bigType = '给水'\r\n              this.objInfo.smallType = '回水管线'\r\n              break\r\n            case 'map_waterwork': //供水厂\r\n              this.objInfo.bigType = '给水'\r\n              this.objInfo.smallType = '供水厂'\r\n              break\r\n            // 再生水\r\n            case 'map_recycle_pipe': //再生水管线\r\n              this.objInfo.bigType = '再生水'\r\n              this.objInfo.smallType = 'pipeline'\r\n              break\r\n            case 'map_waterwork': //再生水厂\r\n              this.objInfo.bigType = '再生水'\r\n              this.objInfo.smallType = '再生水厂'\r\n              break\r\n          }\r\n          // 设施编号\r\n          this.objInfo.code =\r\n            f.properties.manhole_code ||\r\n            f.properties.gate_code ||\r\n            f.properties.outlet_code ||\r\n            f.properties.comb_code ||\r\n            f.properties.valve_code ||\r\n            f.properties.pump_station_code ||\r\n            f.properties.plant_code ||\r\n            f.properties.pump_code ||\r\n            f.properties.fire_cock_code ||\r\n            f.properties.start_code + ',' + f.properties.end_code ||\r\n            ''\r\n          // })\r\n        }\r\n        console.log('this.objInfo: ', this.objInfo)\r\n        // popup\r\n        if (this.chosePoint) {\r\n          let popupHtml = '<div id=\"base-detail\"></div>'\r\n          new mapboxgl.Popup()\r\n            .setLngLat([e.lngLat.lng, e.lngLat.lat])\r\n            .setHTML(popupHtml)\r\n            .addTo(window.xaMap)\r\n          new popupItem({\r\n            propsData: {\r\n              detailId: 99999,\r\n              lng: e.lngLat.lng.toFixed(3),\r\n              lat: e.lngLat.lat.toFixed(3),\r\n              bigType: this.objInfo.bigType,\r\n              smallType: this.objInfo.smallType,\r\n              deviceCode: this.objInfo.code,\r\n              fun: this.editForm,\r\n            },\r\n          }).$mount('#base-detail')\r\n        }\r\n      })\r\n      // window.xaMap.on('click',e=>{})结束\r\n    },\r\n    editForm() {\r\n      this.$router.push({\r\n        name: 'addProblemIndex',\r\n        query: { msg: this.objInfo, token: this.formToken },\r\n        params: { type: 'add' },\r\n      })\r\n    },\r\n    async getList1() {\r\n      let params = {\r\n        sysCode: 'outwork',\r\n        smallType: 'abnormal_inform',\r\n        // token: this.accessToken,\r\n        \"page\": {\r\n          \"current\": 1,\r\n          \"size\": -1,//-1查全部\r\n        }\r\n      }\r\n      axios({\r\n        url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/outworkapi/ticketStatisticClient/getTicketList',\r\n        method: 'post',\r\n        data: params,\r\n        headers: this.header,\r\n      }).then((res) => {\r\n        console.log('getTableData-res: ', res)\r\n        if (res.status == 200) {\r\n          console.log(res.data.resultData.records, '========================')\r\n          this.tableData = res.data.resultData.records\r\n          this.getGeoJson()\r\n          res.data.resultData.records.forEach((item) => {\r\n            this.tableList.push({\r\n              faultTypes: item.formValue.faultTypes,\r\n              ticketStatusName: item.ticketStatusName,\r\n              questionDescribe: item.formValue.questionDescribe,\r\n              createByName: item.createByName,\r\n              createTime: item.createTime.substring(0, 10),\r\n              defectFrom: item.formValue.defectFrom,\r\n              id: item.id,\r\n              lnglat: [item.appealLng, item.appealLat],\r\n            })\r\n          })\r\n          // this.$emit(this.tableList,'tableList')\r\n        }\r\n      })\r\n    },\r\n    // 将事件列表添加至地图\r\n    getGeoJson() {\r\n      let features = []\r\n      let withoutPositionCount = 0\r\n      console.log('要聚合展示的tableData', this.tableData)\r\n      if (this.tableData.length == 0) {\r\n        this.removeSomeLayer()\r\n        return\r\n      }\r\n      this.tableData.forEach((item) => {\r\n        let feature = {}\r\n        let properties = {}\r\n        let geometry = {}\r\n\r\n        properties = item\r\n        properties.defectFrom = item.formValue.defectFrom\r\n        feature.properties = properties\r\n        feature.type = 'Feature'\r\n        geometry.type = 'Point'\r\n        if (item.appealLat && item.appealLng) {\r\n          // geometry.coordinates = [item.appealLat, item.appealLon]\r\n          geometry.coordinates = [item.appealLng, item.appealLat] // wgs84\r\n          feature.geometry = geometry\r\n          features.push(feature)\r\n        } else if (\r\n          item.formValue.deviceDetail?.latitude &&\r\n          item.formValue.deviceDetail?.longitude\r\n        ) {\r\n          geometry.coordinates = [\r\n            item.formValue.deviceDetail.longitude,\r\n            item.formValue.deviceDetail.latitude,\r\n          ]\r\n          feature.geometry = geometry\r\n          features.push(feature)\r\n        } else if (\r\n          item.formValue.ticketAddress?.longitude &&\r\n          item.formValue.ticketAddress?.latitude\r\n        ) {\r\n          geometry.coordinates = [\r\n            item.formValue.ticketAddress.longitude,\r\n            item.formValue.ticketAddress.latitude,\r\n          ]\r\n          feature.geometry = geometry\r\n          features.push(feature)\r\n        } else {\r\n          // geometry.coordinates = [39.06683064435245, 115.9453947097063]\r\n          withoutPositionCount += 1\r\n        }\r\n      })\r\n      console.log('无坐标个数', withoutPositionCount)\r\n      // 聚合数据 构造头部\r\n      let geoJson = {\r\n        type: 'FeatureCollection',\r\n        crs: { type: 'name', properties: { name: 'urn:ogc:def:crs:OGC:1.3:CRS84' } },\r\n        features: [],\r\n      }\r\n      geoJson.features = features\r\n      console.log('聚合的geoJson', geoJson)\r\n      this.timer = setInterval(() => {\r\n        if (MapObj.map) {\r\n          clearInterval(this.timer)\r\n          this.renderCluster(geoJson)\r\n        }\r\n      }, 100)\r\n    },\r\n    removeSomeLayer() {\r\n      ['clusters', 'cluster-count', 'unclustered-point'].forEach((item) => {\r\n        if (MapObj.map?.getLayer(item)) {\r\n          MapObj.map.removeLayer(item)\r\n        }\r\n      })\r\n      if (MapObj.map?.getSource('earthquakes')) {\r\n        MapObj.map.removeSource('earthquakes')\r\n      }\r\n    },\r\n    // 渲染\r\n    renderCluster(geoJsonSource) {\r\n      this.removeSomeLayer()\r\n      MapObj.map.addSource('earthquakes', {\r\n        type: 'geojson',\r\n        data: geoJsonSource,\r\n        cluster: true,\r\n        clusterMaxZoom: 14, // Max zoom to cluster points on\r\n        clusterRadius: 50, // Radius of each cluster when clustering points (defaults to 50)\r\n      })\r\n\r\n      MapObj.map.addLayer({\r\n        id: 'clusters',\r\n        type: 'circle',\r\n        source: 'earthquakes',\r\n        filter: ['has', 'point_count'],\r\n        paint: {\r\n          'circle-color': ['step', ['get', 'point_count'], \"rgba(0, 209, 134, 0.8)\", 5, \"rgba(255, 148, 41, 0.8)\", 15, \"rgba(255, 74, 65, 0.8)\"],\r\n          'circle-radius': ['step', ['get', 'point_count'], 20, 5, 25, 15, 30],\r\n          // 这个是外边框的颜色 circle-stroke-color这个对应了上面circle-color\r\n          \"circle-stroke-color\": [\r\n            \"step\",\r\n            [\"get\", \"point_count\"],\r\n            \"rgba(0, 209, 134, 0.3)\",\r\n            5,\r\n            \"rgba(255, 148, 41, 0.3)\",\r\n            15,\r\n            \"rgba(255, 74, 65, 0.3)\"\r\n          ],\r\n          // 这个是外边框晕染的范围\r\n          \"circle-stroke-width\": [\r\n            \"step\",\r\n            [\"get\", \"point_count\"],\r\n            8, //蓝色晕染长度，当点数小于100时为5px晕染\r\n            5, //对应上面circle-color 数字，意思为100以内\r\n            12, //点计数在100到750之间时为黄色，6px晕染\r\n            15, //对应上面circle-color 数字，意思为750以内\r\n            15 //点计数大于或等于750时为7px像素的粉红色晕染\r\n          ]\r\n        },\r\n      })\r\n\r\n      MapObj.map.addLayer({\r\n        id: 'cluster-count',\r\n        type: 'symbol',\r\n        source: 'earthquakes',\r\n        filter: ['has', 'point_count'],\r\n        layout: {\r\n          'text-field': '{point_count_abbreviated}',\r\n          // 'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n          'text-size': 12,\r\n        },\r\n      })\r\n\r\n      MapObj.map.addLayer({\r\n        id: 'unclustered-point',\r\n        source: 'earthquakes',\r\n        filter: ['!', ['has', 'point_count']],\r\n        type: 'symbol',\r\n        layout: {\r\n          'icon-image': '事件点', // 点的图标\r\n          visibility: 'visible',\r\n          'icon-size': 0.7,\r\n        },\r\n      })\r\n\r\n      MapObj.map.on('click', 'unclustered-point', (e) => {\r\n        // 如果当前事件点所有popup为打开状态，即事件点popup数组长度不为0，退出该次点击事件\r\n        // if (MapObj.eventPopupArray.length > 0) return\r\n        // 每次点击新的事件点就清除预案数据\r\n        // this.fileList = []\r\n        console.log('e.features: ', e.features)\r\n        // console.log('formValue: ', JSON.parse(e.features[0].properties.formValue))\r\n        MapObj.map.getCanvas().style.cursor = 'pointer'\r\n\r\n        let formValue = JSON.parse(e.features[0].properties.formValue)\r\n        console.log('formValue: ', formValue)\r\n\r\n        var coordinates = e.features[0].geometry.coordinates.slice()\r\n        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n          coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360\r\n        }\r\n        // Create a popup, but don't add it to the map yet.\r\n        // this.popup1 = new mapboxgl.Popup({\r\n        //   closeOnClick: true,\r\n        //   closeButton: false,\r\n        //   anchor: 'bottom',\r\n        //   offset: { bottom: [0, -15] },\r\n        // })\r\n        // let text = formValue.detail ? formValue.detail.defectType : '其他'\r\n        // console.log('text: ', text);\r\n        // this.popup1\r\n        //   .setLngLat(coordinates)\r\n        //   .setHTML('<div id=\"vue-popup-custom\" class=\"vue-popup-custom\"><h3>'\r\n        //     + text\r\n        //     + '</h3></div>')\r\n        //   .addTo(MapObj.map)\r\n      })\r\n\r\n      // inspect a cluster on click\r\n      MapObj.map.on('click', 'clusters', function (e) {\r\n        var features = MapObj.map.queryRenderedFeatures(e.point, { layers: ['clusters'] })\r\n        var clusterId = features[0].properties.cluster_id\r\n        MapObj.map\r\n          .getSource('earthquakes')\r\n          .getClusterExpansionZoom(clusterId, function (err, zoom) {\r\n            if (err) return\r\n            MapObj.map.easeTo({\r\n              center: features[0].geometry.coordinates,\r\n              zoom: zoom,\r\n            })\r\n          })\r\n      })\r\n      MapObj.map.setMinZoom(0)\r\n      MapObj.map.setMaxZoom(30)\r\n    },\r\n    add() {\r\n      this.objInfo = {}\r\n      Toast({\r\n        message: '地图点选',\r\n        position: 'top',\r\n      })\r\n      this.chosePoint = true\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n#base-detail {\r\n  width: auto;\r\n  height: auto;\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n  border-radius: 20px;\r\n  border: 1px saddlebrown solid;\r\n}\r\n</style>\r\n<style lang=\"less\" scoped>\r\n.main {\r\n  background-color: #f2f3f4 !important;\r\n  height: 1334px;\r\n  width: 750px;\r\n\r\n  .map-container {\r\n    height: 680px;\r\n    width: 750px;\r\n  }\r\n}\r\n\r\n/deep/.mapboxgl-popup-content {\r\n  width: auto;\r\n  min-width: 280px;\r\n  height: 50px;\r\n  padding: 24px 36px;\r\n  border-radius: 18px;\r\n  box-shadow: 10px 10px 30px rgba(0, 0, 0, 0.1);\r\n}\r\n</style>\r\n"]}]}