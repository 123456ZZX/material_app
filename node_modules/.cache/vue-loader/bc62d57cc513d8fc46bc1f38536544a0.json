{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\DispatchCenter\\components\\PressureAnalysis\\PressureDetail.vue?vue&type=style&index=0&id=495bede1&scoped=true&lang=less","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\DispatchCenter\\components\\PressureAnalysis\\PressureDetail.vue","mtime":1708928163367},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovZGVlcC8uZm0tZHJvcGRvd24tbWVudV9fYmFyIHsNCiAgICBoZWlnaHQ6IDU2cHg7DQogICAgYm94LXNoYWRvdzogbm9uZTsNCn0NCi9kZWVwLy5mbS1kaXZpZGVyIHsNCiAgICBtYXJnaW46IDE2cHggMCA4cHg7DQp9DQovL+makOiXj+a7muWKqOadoQ0KJjo6LXdlYmtpdC1zY3JvbGxiYXIgew0KICBkaXNwbGF5OiBub25lOyAvL0Nocm9tZSB8IFNhZmFyaQ0KfQ0KL2RlZXAvLmZtLWhhaXJsaW5lLS1ib3R0b206OmFmdGVyIHsNCiAgICBib3JkZXItYm90dG9tLXdpZHRoOiAwOw0KfQ0KLm1haW4gew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgLm15VGFiIHsNCiAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDYwcHgpOw0KICAgICAgICBoZWlnaHQ6IDkwcHg7DQogICAgICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQogICAgICAgIHBhZGRpbmc6IDMwcHg7DQogICAgICAgIC50YWJBcmVhIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI0Y1RjVGNTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDQwcHg7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgLnNlbGVjdEFyZWEgew0KICAgICAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAxNnB4KTsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDE2cHgpOw0KICAgICAgICAgICAgICAgIG1hcmdpbjogOHB4Ow0KICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDQwcHg7DQogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgICAgICAgICAgLml0ZW0gew0KICAgICAgICAgICAgICAgICAgICB3aWR0aDogMzMlOw0KICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAzMnB4Ow0KICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyLCBQaW5nRmFuZyBTQzsNCiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM1NTU1NTU7DQogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA3NHB4Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAuYWN0aXZlVGFiIHsNCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI0ZGRkZGRjsNCiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzFCNjdEOCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0MHB4Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICAuY29udGFpbmVyIHsNCiAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gMjE2cHgpOw0KICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDYwcHgpOw0KICAgICAgcGFkZGluZzogMzBweCAzMHB4IDAgMzBweDsNCiAgICAgIGJhY2tncm91bmQ6ICNGNUY3Rjk7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgIG92ZXJmbG93OiBzY3JvbGw7DQogICAgICAuc2VsZWN0UGlwZSB7DQogICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA2MHB4KTsNCiAgICAgICAgaGVpZ2h0OiA1OHB4Ow0KICAgICAgICBib3JkZXItcmFkaXVzOiAxNnB4Ow0KICAgICAgICBiYWNrZ3JvdW5kOiAjRkZGRkZGOw0KICAgICAgICBwYWRkaW5nOiAyNXB4IDMwcHg7DQogICAgICAgIG1hcmdpbi1ib3R0b206IDI0cHg7DQogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgLmRldmljZU5hbWUgew0KICAgICAgICAgICAgaGVpZ2h0OiAzN3B4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IE1pY3Jvc29mdFlhSGVpOw0KICAgICAgICAgICAgY29sb3I6ICM1NTU1NTU7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMzdweDsNCiAgICAgICAgICAgIG1hcmdpbjogMTJweCAwOw0KICAgICAgICB9DQogICAgICB9DQogICAgICAuY2hhcnRDYXJkIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogNDUwcHg7DQogICAgICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7DQogICAgICAgIG1hcmdpbi1ib3R0b206IDI0cHg7DQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgIC5oZWFkZXIgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IDc3cHg7DQogICAgICAgICAgICBwYWRkaW5nOiAzMHB4IDAgMCAwOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIC5pY29uIHsNCiAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG8gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC50aXRsZSB7DQogICAgICAgICAgICAgICAgaGVpZ2h0OiA1MHB4Ow0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMzZweDsNCiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1TZW1pYm9sZCwgUGluZ0ZhbmcgU0M7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzE5MTkxOTsNCiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogNTBweDsNCiAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG8gMTZweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAuY2hhcnQtYm9keSB7DQogICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDEyOHB4KTsNCiAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAzNnB4KTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAgMThweCAxOHB4Ow0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["PressureDetail.vue"],"names":[],"mappings":";AAoMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PressureDetail.vue","sourceRoot":"src/views/DispatchCenter/components/PressureAnalysis","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <fm-nav-bar title=\"压力分析\" left-arrow @click-left=\"$router.go(-1)\" />\r\n    <div class=\"myTab\">\r\n        <div class=\"tabArea\">\r\n            <div class=\"selectArea\">\r\n                <div class=\"item\" :class=\"selectTab == '周' ? 'activeTab' : ''\" @click=\"changeTab('周')\">周</div>\r\n                <div class=\"item\" :class=\"selectTab == '月' ? 'activeTab' : ''\" @click=\"changeTab('月')\">月</div>\r\n                <div class=\"item\" :class=\"selectTab == '年' ? 'activeTab' : ''\" @click=\"changeTab('年')\">年</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"container\">\r\n        <div>\r\n            <div class=\"selectPipe\">\r\n                <fm-dropdown-menu>\r\n                    <fm-dropdown-item @change=\"selectStation\" v-model=\"deviceKey\" :options=\"pressureStation\" />\r\n                </fm-dropdown-menu>\r\n            </div>\r\n            <div class=\"chartCard\">\r\n                <div class=\"header\">\r\n                    <img :src=\"require('@/assets/img/dispatchCenter/矩形.png')\" width=\"4\" class=\"icon\" />\r\n                    <div class=\"title\">压力合格率</div>\r\n                </div>\r\n                <fm-divider />\r\n                <div class=\"chart-body\" id=\"passRateChart\" />\r\n            </div>\r\n            <div class=\"chartCard\">\r\n                <div class=\"header\">\r\n                    <img :src=\"require('@/assets/img/dispatchCenter/矩形.png')\" width=\"4\" class=\"icon\" />\r\n                    <div class=\"title\">压力振幅</div>\r\n                </div>\r\n                <fm-divider />\r\n                <div class=\"chart-body\" id=\"amplitudeChart\" />\r\n            </div>\r\n            <div class=\"chartCard\">\r\n                <div class=\"header\">\r\n                    <img :src=\"require('@/assets/img/dispatchCenter/矩形.png')\" width=\"4\" class=\"icon\" />\r\n                    <div class=\"title\">压力报警次数</div>\r\n                </div>\r\n                <fm-divider />\r\n                <div class=\"chart-body\" id=\"warnNumChart\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as apis from './api';\r\nimport * as echarts from \"echarts\";\r\nimport { Toast } from 'fawkes-mobile-lib';\r\nimport _cloneDeep from \"lodash/cloneDeep\";\r\nconst chartList = {\r\n    passRateChart: null,\r\n    warnNumChart: null,\r\n    amplitudeChart: null\r\n}\r\nconst chartSetting = {\r\n    passRateChart: {\r\n        legend: '合格率',\r\n        unit: '%'\r\n    },\r\n    warnNumChart: {\r\n        legend: '报警次数',\r\n        unit: '次'\r\n    },\r\n    amplitudeChart: {\r\n        legend: '振幅',\r\n        unit: 'Mpa'\r\n    }\r\n}\r\nexport default {\r\n    name: 'pressureDetail',\r\n    data() {\r\n        return {\r\n            pressureStation: [],\r\n            selectTab: '月',\r\n            deviceKey: '',\r\n            passRateChartList: [],\r\n            amplitudeChartList: [],\r\n            warnNumChartList: [],\r\n            option: {\r\n                tooltip: {\r\n                    trigger: 'axis'\r\n                },\r\n                grid: {\r\n                    bottom: 18,\r\n                    top: 30\r\n                },\r\n                legend: {\r\n                    data: [],\r\n                    right: 10,\r\n                    top: 0\r\n                },\r\n\r\n                xAxis: {\r\n                    type: 'category',\r\n                    data: []\r\n                },\r\n                yAxis: {\r\n                    type: 'value',\r\n                    name: ''\r\n                },\r\n                series: [\r\n                    {\r\n                        data: [],\r\n                        type: 'line',\r\n                        symbol: 'emptyCircle',\r\n                        name: ''\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.deviceKey = this.$route.query.deviceInfo.deviceKey\r\n        this.pressureStation = this.$route.query.pressureStation.map(it => {\r\n            return {\r\n                text: it.deviceName,\r\n                value: it.deviceKey\r\n            }\r\n        })\r\n        this.getPressureData()\r\n        this.$nextTick(() => {\r\n            Object.keys(chartList).forEach(it => {\r\n                this.initChart(it)\r\n            })\r\n        })\r\n    },\r\n    methods: {\r\n        selectStation(val) {\r\n            this.deviceKey = val\r\n            this.getPressureData()\r\n        },\r\n        changeTab(tab) {\r\n            this.selectTab = tab\r\n            this.getPressureData()\r\n        },\r\n        initChart(name) {\r\n            if (chartList[name] != null && chartList[name] != undefined) {\r\n                chartList[name].dispose()\r\n            } \r\n            chartList[name] = echarts.init(document.getElementById(name))\r\n            let option = _cloneDeep(this.option)\r\n            option && chartList[name].setOption(option, true)\r\n        },\r\n        getPressureData() {\r\n            let toast = Toast.loading({\r\n                message: '加载中',\r\n                duration: 0,\r\n                forbidClick: true,\r\n                overlay: true,\r\n                loadingType: 'spinner'\r\n            })\r\n            let params = {\r\n                dateType: this.selectTab == '周' ? 'week' : this.selectTab == '月' ? 'month' : this.selectTab == '年' ? 'year' : '',\r\n                facilityKey: this.deviceKey,\r\n                type: '压力'\r\n            }\r\n            apis.getPressure(params).then(res => {\r\n                if (res.status && res.data) {\r\n                    this.dateList = res.data.map(it => it.date.slice(0, 10))\r\n                    this.amplitudeChartList = res.data.map(it => it.amplitude)\r\n                    this.warnNumChartList = res.data.map(it => it.warnNum)\r\n                    this.passRateChartList = res.data.map(it => it.passRate)\r\n                } else {\r\n                    toast.clear()\r\n                    Toast.error({\r\n                        message: '加载失败',\r\n                        duration: 1500\r\n                    })\r\n                }\r\n            }).then(() => {\r\n                Object.keys(chartList).forEach(it => {\r\n                    this.option.legend.data[0] = chartSetting[it].legend\r\n                    this.option.yAxis.name = chartSetting[it].unit\r\n                    this.option.xAxis.data = this.dateList\r\n                    this.option.series[0].name = chartSetting[it].legend\r\n                    this.option.series[0].data = this[it + 'List']\r\n                    this.initChart(it)\r\n                })\r\n                toast.clear()\r\n            }).catch(err => {\r\n                toast.clear()\r\n                Toast.error({\r\n                    message: 'err' + err,\r\n                    duration: 2000\r\n                })\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n/deep/.fm-dropdown-menu__bar {\r\n    height: 56px;\r\n    box-shadow: none;\r\n}\r\n/deep/.fm-divider {\r\n    margin: 16px 0 8px;\r\n}\r\n//隐藏滚动条\r\n&::-webkit-scrollbar {\r\n  display: none; //Chrome | Safari\r\n}\r\n/deep/.fm-hairline--bottom::after {\r\n    border-bottom-width: 0;\r\n}\r\n.main {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    .myTab {\r\n        width: calc(100% - 60px);\r\n        height: 90px;\r\n        background: #FFFFFF;\r\n        padding: 30px;\r\n        .tabArea {\r\n            width: 100%;\r\n            height: 100%;\r\n            background: #F5F5F5;\r\n            border-radius: 40px;\r\n            display: flex;\r\n            .selectArea {\r\n                width: calc(100% - 16px);\r\n                height: calc(100% - 16px);\r\n                margin: 8px;\r\n                border-radius: 40px;\r\n                display: flex;\r\n                justify-content: space-between;\r\n                .item {\r\n                    width: 33%;\r\n                    height: 100%;\r\n                    text-align: center;\r\n                    font-size: 32px;\r\n                    font-family: PingFangSC-Regular, PingFang SC;\r\n                    font-weight: 400;\r\n                    color: #555555;\r\n                    line-height: 74px;\r\n                }\r\n                .activeTab {\r\n                    background: #FFFFFF;\r\n                    font-weight: 500 !important;\r\n                    color: #1B67D8 !important;\r\n                    border-radius: 40px;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .container {\r\n      height: calc(100% - 216px);\r\n      width: calc(100% - 60px);\r\n      padding: 30px 30px 0 30px;\r\n      background: #F5F7F9;\r\n      display: flex;\r\n      flex-direction: column;\r\n      overflow: scroll;\r\n      .selectPipe {\r\n        width: calc(100% - 60px);\r\n        height: 58px;\r\n        border-radius: 16px;\r\n        background: #FFFFFF;\r\n        padding: 25px 30px;\r\n        margin-bottom: 24px;\r\n        text-align: center;\r\n        .deviceName {\r\n            height: 37px;\r\n            font-size: 28px;\r\n            font-family: MicrosoftYaHei;\r\n            color: #555555;\r\n            line-height: 37px;\r\n            margin: 12px 0;\r\n        }\r\n      }\r\n      .chartCard {\r\n        width: 100%;\r\n        height: 450px;\r\n        background: #FFFFFF;\r\n        border-radius: 16px;\r\n        margin-bottom: 24px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        .header {\r\n            width: 100%;\r\n            height: 77px;\r\n            padding: 30px 0 0 0;\r\n            display: flex;\r\n            .icon {\r\n                margin: auto 0;\r\n            }\r\n            .title {\r\n                height: 50px;\r\n                font-size: 36px;\r\n                font-family: PingFangSC-Semibold, PingFang SC;\r\n                font-weight: 600;\r\n                color: #191919;\r\n                line-height: 50px;\r\n                margin: auto 16px;\r\n            }\r\n        }\r\n        .chart-body {\r\n            height: calc(100% - 128px);\r\n            width: calc(100% - 36px);\r\n            padding: 0 18px 18px;\r\n        }\r\n      }\r\n    }\r\n}\r\n</style>"]}]}