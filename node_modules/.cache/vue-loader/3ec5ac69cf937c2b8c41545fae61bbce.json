{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\FlawsManagement\\addFlaws.vue?vue&type=style&index=0&id=39d2f136&lang=scss&scoped=true","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\FlawsManagement\\addFlaws.vue","mtime":1705912915789},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouYWRkLWNvbnRhaW5lciB7DQogICAgLmJpZ0Zvcm0tY29udGFpbmVyIHsNCiAgICAgICAgd2lkdGg6IDc1MHB4Ow0KICAgICAgICBoZWlnaHQ6IDEyMzRweDsNCiAgICAgICAgb3ZlcmZsb3c6IHNjcm9sbDsNCiAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCg0KICAgICAgICAuc3VidGFibGUgew0KICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTNweDsNCiAgICAgICAgICAgIC8vIGJhY2tncm91bmQtY29sb3I6IGFxdWFtYXJpbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNnB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzUxOTVkMDsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["addFlaws.vue"],"names":[],"mappings":";AAufA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addFlaws.vue","sourceRoot":"src/views/FlawsManagement","sourcesContent":["<template>\r\n    <div class=\"add-container\">\r\n        <fm-nav-bar title=\"缺陷新增\" left-arrow @click-left=\"$router.go(-1)\"></fm-nav-bar>\r\n        <fm-form class=\"bigForm-container\" @submit=\"onSubmit\" @failed=\"onFailed\">\r\n            <!-- @submit=\"onSubmit\" -->\r\n            <fm-field readonly clickable required name=\"picker\" :value=\"commonForm.defectFrom\" label=\"缺陷来源\"\r\n                placeholder=\"缺陷来源\" suffix-icon=\"arrow\" @click=\"choosePicker('缺陷来源')\"\r\n                :rules=\"[{ required: true, message: '请填写缺陷来源' }]\" input-align=\"right\" />\r\n            <fm-field readonly clickable required name=\"picker\" :value=\"commonForm.bigType\" label=\"业务类型\"\r\n                placeholder=\"业务类型\" suffix-icon=\"arrow\" @click=\"choosePicker('业务类型')\"\r\n                :rules=\"[{ required: true, message: '请填写业务类型' }]\" input-align=\"right\" />\r\n            <fm-field readonly clickable required name=\"picker\" :value=\"commonForm.smallType\" label=\"设施类型\"\r\n                placeholder=\"设施类型\" suffix-icon=\"arrow\" @click=\"choosePicker('设施类型')\"\r\n                :rules=\"[{ required: true, message: '请填写设施类型' }]\" input-align=\"right\" />\r\n\r\n            <fm-popup :visible.sync=\"showPicker\" position=\"bottom\">\r\n                <fm-picker show-toolbar :columns=\"columns\" @confirm=\"onConfirm\" @cancel=\"showPicker = false\" />\r\n            </fm-popup>\r\n\r\n            <fm-field clearable v-model=\"commonForm.smallCode\" name=\"input\" label=\"设施编号\" placeholder=\"设施编号\"\r\n                input-align=\"right\" />\r\n            <fm-field v-model=\"commonForm.position\" name=\"input\" label=\"缺陷位置\" placeholder=\"缺陷位置\" input-align=\"right\" />\r\n            <!-- 新增一条缺陷 -->\r\n            <div class=\"subtable\" v-for=\"(item) in subForms\" :key=\"item.id\">\r\n                <img src=\"./img/link.png\" alt style=\"position: absolute;height: 34px;z-index: 2;top: -18px\" />\r\n                <img src=\"./img/link.png\" alt\r\n                    style=\"position: absolute;height: 34px;z-index: 2;float: right;right: 5px; top: -18px\" />\r\n                <fm-form>\r\n                    <!-- :value=\"subForm.defectType\" -->\r\n                    <fm-field v-model=\"item.defectType\" readonly clickable name=\"picker\" label=\"缺陷类型\"\r\n                        suffix-icon=\"arrow\" placeholder=\"缺陷类型\" @click=\"showPickerDefect = true\" input-align=\"right\">\r\n                    </fm-field>\r\n                    <fm-popup :visible.sync=\"showPickerDefect\" position=\"bottom\">\r\n                        <fm-picker show-toolbar :columns=\"defectTypeList\"\r\n                            @confirm=\"(val) => { item.defectType = val; showPickerDefect = false }\"\r\n                            @cancel=\"showPickerDefect = false\" />\r\n                    </fm-popup>\r\n\r\n                    <fm-field v-model=\"item.note\" name=\"input\" label=\"备注\" placeholder=\"备注\" input-align=\"right\">\r\n                    </fm-field>\r\n\r\n                    <uploader :wpgHeader=\"wpgHeader\" :token=\"token\" label=\"照片\" v-model=\"picUp\" ref=\"picUp\"\r\n                        @fileChange=\"(recall) => fileChange(recall, '', item.pic)\" style=\"width: 100%;\">\r\n                    </uploader>\r\n                </fm-form>\r\n            </div>\r\n            <fm-button native-type=\"button\" type=\"default\" icon=\"plus\" size=\"large\" @click=\"addRow\"\r\n                style=\"margin-left: 8px;width:96%\">新增缺陷\r\n            </fm-button>\r\n            <fm-field v-model=\"commonForm.describe\" name=\"input\" label=\"现场描述\" placeholder=\"现场描述\" type=\"textarea\"\r\n                rows=\"2\" autosize maxlength=\"200\" show-word-limit input-align=\"right\" />\r\n\r\n            <!--多媒体附件等  -->\r\n            <uploader :wpgHeader=\"wpgHeader\" :token=\"token\" label=\"多媒体附件\" v-model=\"attachment\" ref=\"attachment\"\r\n                @fileChange=\"(recall) => fileChange(recall, '公共')\" style=\"width: 100%;\">\r\n            </uploader>\r\n\r\n\r\n            <fm-field readonly v-model=\"upPerson\" name=\"input\" label=\"上报人\" placeholder=\"上报人\" input-align=\"right\" />\r\n            <fm-field readonly v-model=\"upTime\" name=\"input\" label=\"上报时间\" placeholder=\"上报时间\" input-align=\"right\" />\r\n            <div style=\"margin-top:10px;display:flex;justify-content: space-around;\">\r\n                <fm-button type=\"default\" @click=\"concle\" native-type=\"button\">取消</fm-button>\r\n                <!-- @click=\"onSubmit\" -->\r\n                <fm-button type=\"primary\" :disabled=\"subForms.length < 1\" native-type=\"submit\">提交</fm-button>\r\n            </div>\r\n        </fm-form>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ENUM } from '@/store/State/stateTypes'\r\nimport Uploader from './upload/Uploader';\r\n// import Uploader from '@/components/upload/Uploader.vue'\r\nimport fileUpload from '@/components/fileUpload/index.vue';\r\nimport { Toast } from 'fawkes-mobile-lib';\r\nimport axios from 'axios'\r\nexport default {\r\n    name: \"addFlaws\",\r\n    components: { Uploader, fileUpload },\r\n    data() {\r\n        return {\r\n            wpgHeader: {},\r\n            token: '',\r\n            picUp: '',\r\n            attachment: '',\r\n            fileList: [],// 图片多媒体\r\n            // 选择器\r\n            commonForm: {\r\n                defectFrom: '巡检',//缺陷来源，移动端默认巡检\r\n                bigType: '',//业务类型\r\n                smallType: '',//设施类型\r\n                smallCode: '',//设施编号\r\n                position: '',//缺陷位置，xx路就好，经纬度需要但不用显示\r\n                lng: '',\r\n                lat: '',\r\n                properties: {},\r\n                describe: '',//现场描述\r\n                media: [],//多媒体附件\r\n            },\r\n            upPerson: '',\r\n            upTime: '',\r\n            // value: '',\r\n            columns: [],\r\n            showPicker: false,//就一条次 选择器\r\n            showPickerDefect: false,//新增缺陷 可多次 选择器\r\n            whichPicker: '',\r\n            // defectFromList: [],\r\n            // bigTypeList: [],\r\n            // smallTypeObj: {\r\n            //     '污水': ['污水管线', '检查井', '排放口', '闸门'], '雨水': ['雨水口', '雨水管线', '检查井', '排放口', '闸门'],\r\n            //     '给水': ['配水管线', '输水管线', '回水管线', '给水阀门'], '再生水': ['再生水管线', '再生水厂']\r\n            // },\r\n            // defectTypeList: [],\r\n            // defectFromListDic: { '巡检': 'Inspection', '客服': 'complain', '养护': 'maintain', '监测': 'monitor' },\r\n            // bigTypeListDic: { '污水': 'sewage', '雨水': 'rain', '给水': 'supply', '再生水': 'recycl' },\r\n            // smallTypeDic: {\r\n            //     '雨水口': 'comb', '雨水管线': 'pipeline', '污水管线': 'pipeline', '检查井': 'well', '排放口': 'outfall', '闸门': 'gate',\r\n            //     '消火栓': 'firehydrant', '配水管线': 'distribute', '输水管线': 'delivery', '回水管线': 'circulating', '给水阀门': 'valve',\r\n            //     '再生水管线': 'recycle', '再生水厂': 'waterwork',\r\n            // },\r\n            // defectTypeListDic: { '井室病害': 'jsbh', '仪表泄露': 'meterLeak', '管道破裂': 'pipePomp', '严重堵塞': 'badFill' },\r\n            subFormID: 1,\r\n            subForms: [{\r\n                id: 1,\r\n                defectType: '',\r\n                note: '',//备注\r\n                pic: [],\r\n            }],\r\n        }\r\n    },\r\n    computed: {\r\n        // 缺陷来源\r\n        defectFromDic() {\r\n            console.log('this.$store.state[ENUM].defectFrom: ', this.$store.state[ENUM].defectFrom);\r\n            return this.$store.state[ENUM].defectFrom;\r\n        },\r\n        defectFromList() {\r\n            let list = []\r\n            if (this.defectFromDic) {\r\n                this.defectFromDic.forEach((dic) => {\r\n                    list.push(dic['zh-CN'])\r\n                })\r\n            }\r\n            return list\r\n        },\r\n        defectFromListDic() {\r\n            let listDic = {}\r\n            if (this.defectFromDic) {\r\n                this.defectFromDic.forEach((dic) => {\r\n                    listDic[dic['zh-CN']] = dic.code\r\n                })\r\n            }\r\n            return listDic\r\n        },\r\n        // 缺陷类型\r\n        faultTypesDic() {\r\n            console.log('this.$store.state[ENUM].pipeNetDefectTypes', this.$store.state[ENUM].pipeNetDefectTypes)\r\n            return this.$store.state[ENUM].pipeNetDefectTypes;\r\n        },\r\n        defectTypeList() {\r\n            let list = []\r\n            if (this.faultTypesDic) {\r\n                if (this.faultTypesDic.filter(it => it['zh-CN'].includes(this.commonForm.smallType)).length > 0) {\r\n                    this.faultTypesDic.filter(it => it['zh-CN'].includes(this.commonForm.smallType))[0].child.forEach((dic) => {\r\n                        list.push(dic['zh-CN'])\r\n                    })\r\n                }\r\n            }\r\n            return list\r\n        },\r\n        defectTypeListDic() {\r\n            let listDic = {}\r\n            if (this.faultTypesDic) {\r\n                this.faultTypesDic.forEach((dic) => {\r\n                    listDic[dic['zh-CN']] = dic.code\r\n                })\r\n            }\r\n            return listDic\r\n        },\r\n        // 系统字典虽叫defectType，但实际二级为 业务类型/设施类型\r\n        // 业务类型/设施类型\r\n        busDeviceTypeDic() {\r\n            console.log('this.$store.state[ENUM].defectType: ', this.$store.state[ENUM].defectType);\r\n            return this.$store.state[ENUM].defectType;\r\n        },\r\n        bigTypeList() {\r\n            let list = []\r\n            if (this.busDeviceTypeDic) {\r\n                this.busDeviceTypeDic.forEach((dic) => {\r\n                    list.push(dic['zh-CN'])\r\n                })\r\n            }\r\n            return list\r\n        },\r\n        bigTypeListDic() {\r\n            let listDic = {}\r\n            if (this.busDeviceTypeDic) {\r\n                this.busDeviceTypeDic.forEach((dic) => {\r\n                    listDic[dic['zh-CN']] = dic.code\r\n                })\r\n            }\r\n            return listDic\r\n        },\r\n        // 二级--设施类型\r\n        smallTypeObj() {\r\n            let listDic = {}\r\n            if (this.busDeviceTypeDic) {\r\n                this.busDeviceTypeDic.forEach((dic) => {\r\n                    let list = []\r\n                    dic.child.forEach((second) => {\r\n                        list.push(second['zh-CN'])\r\n                    })\r\n                    listDic[dic['zh-CN']] = list\r\n                })\r\n            }\r\n            return listDic\r\n        },\r\n        smallTypeDic() {\r\n            let listDic = {}\r\n            if (this.busDeviceTypeDic) {\r\n                this.busDeviceTypeDic.forEach((dic) => {\r\n                    dic.child.forEach((second) => {\r\n                        listDic[second['zh-CN']] = second.code\r\n                    })\r\n                })\r\n            }\r\n            return listDic\r\n        },\r\n    },\r\n    created() {\r\n        // 路由过来，带着参数\r\n        this.objInfo = this.$route.query.msg\r\n        this.token = this.$route.query.token\r\n        // 回填信息\r\n        this.commonForm.bigType = this.objInfo.bigType || ''\r\n        this.commonForm.smallType = this.objInfo.smallType || ''\r\n        this.commonForm.smallCode = this.objInfo.code || ''\r\n        this.commonForm.position = this.objInfo.road_name || [this.objInfo.lng, this.objInfo.lat].toString()\r\n        // 提交表单用的，不回填显示\r\n        this.commonForm.lng = this.objInfo.lng\r\n        this.commonForm.lat = this.objInfo.lat\r\n        this.commonForm.properties = this.objInfo.properties\r\n    },\r\n    methods: {\r\n        // fileChange(file, mark, rowItem) {\r\n        //     console.log('file: ', file);\r\n        //     console.log('mark: ', mark);\r\n        //     console.log('rowItem: ', rowItem);\r\n        //     let arr = []\r\n        //     file.fileList.forEach(it => {\r\n        //         arr.push(\r\n        //             {\r\n        //                 \"fileUrl\": it.url,\r\n        //                 \"fileType\": 'image',\r\n        //                 \"fileSize\": it.file.size,\r\n        //                 \"fileId\": it.fileToken,\r\n        //                 \"name\": it.file.name,\r\n        //                 \"url\": it.url,\r\n        //                 \"uid\": it.fileToken\r\n        //             }\r\n        //         )\r\n        //     })\r\n        //     if (mark == '公共') {\r\n        //         // 公共的\r\n        //         this.commonForm.media.push(arr)\r\n        //         console.log('this.commonForm: ', this.commonForm);\r\n        //     } else {\r\n        //         // 每条缺陷的\r\n        //         rowItem.push(arr)\r\n        //         console.log('rowItem: ', rowItem);\r\n        //     }\r\n        //     console.log(\"arr:\", arr);\r\n        // },\r\n        // 图片多媒体\r\n        fileChange(recall, mark, rowItem) {\r\n            console.log('rowItem: ', rowItem);\r\n            console.log('mark: ', mark);\r\n            console.log('recall: ', recall);\r\n            // this.fileList = recall.fileList\r\n            console.log('this.fileList: ', this.fileList);\r\n            console.log('this.attachment: ', this.attachment);\r\n            if (recall.res) {\r\n                let formFile =\r\n                {\r\n                    \"fileUrl\": recall.res.resultData.url,\r\n                    \"fileType\": recall.res.resultData.suffix,\r\n                    \"fileSize\": recall.res.resultData.size,\r\n                    \"fileId\": recall.res.resultData.id,\r\n                    \"name\": recall.res.resultData.oldName,\r\n                    \"url\": process.env.VUE_APP_THIRD_REQUEST_URL + '/main/userCenterApi/FileManager/download/' + recall.res.resultData.id,\r\n                    \"uid\": recall.res.resultData.id\r\n                }\r\n                if (mark == '公共') {\r\n                    // 公共的\r\n                    this.commonForm.media.push(formFile)\r\n                    console.log('this.commonForm: ', this.commonForm);\r\n                } else {\r\n                    // 每条缺陷的\r\n                    rowItem.push(formFile)\r\n                    console.log('rowItem: ', rowItem);\r\n                }\r\n            }\r\n        },\r\n        // 新增相关\r\n        // 新增缺陷 子表项\r\n        addRow() {\r\n            console.log('subForms前: ', this.subForms);\r\n            this.subForms.push({\r\n                id: this.subFormID += 1,\r\n                defectType: '',\r\n                note: '',//备注\r\n                pic: [],\r\n            })\r\n            console.log('subForms后: ', this.subForms);\r\n            console.log('defectFromList: ', this.defectFromList);\r\n            console.log('defectFromListDic: ', this.defectFromListDic);\r\n        },\r\n\r\n        // 取消\r\n        concle() {\r\n            // let pics = []\r\n            // this.subForms.forEach((sf) => {\r\n            //     sf.pic.forEach((p) => {\r\n            //         pics.push(p)\r\n            //     })\r\n            // })\r\n            // console.log('pics: ', pics);\r\n            // pics.forEach((ps) => {\r\n            //     this.$refs.picUp.removeFile(ps)\r\n            // })\r\n            this.commonForm.media.forEach((m) => {\r\n                console.log('m: ', m);\r\n                this.$refs.attachment.removeFile(m)\r\n                console.log('this.$refs.attachment: ', this.$refs.attachment);\r\n            })\r\n            this.attachment = ''\r\n            this.picUp = ''\r\n            this.subForms = [\r\n                // {\r\n                //     id: this.subFormID-1,\r\n                //     // defectType: '',\r\n                //     // note: '',//备注\r\n                //     // pic: [],\r\n                // }\r\n            ]\r\n            this.commonForm = {\r\n                defectFrom: '巡检',//缺陷来源，移动端默认巡检\r\n                bigType: '',//业务类型\r\n                smallType: '',//设施类型\r\n                smallCode: '',//设施编号\r\n                position: '',//缺陷位置，xx路就好，经纬度需要但不用显示\r\n                lng: '',\r\n                lat: '',\r\n                properties: {},\r\n                describe: '',//现场描述\r\n                media: [],//多媒体附件\r\n            }\r\n            let time = new Date()\r\n            this.upTime = time.toLocaleString()\r\n        },\r\n        //提交前 校验未通过\r\n        onFailed() {\r\n            if (this.commonForm.defectFrom == '' || this.commonForm.bigType == '' || this.commonForm.smallType == '') {\r\n                Toast({\r\n                    message: '请检查必填信息',\r\n                    position: 'top',\r\n                });\r\n                return\r\n            }\r\n        },\r\n        // 提交\r\n        onSubmit() {\r\n            console.log('onSubmit: ', this.subForm, this.commonForm, this.upPerson, this.upTime);\r\n            Toast({\r\n                message: '提交中',\r\n                position: 'top',\r\n            });\r\n            // console.log('smallTypeDic: ', this.smallTypeDic);\r\n            // console.log('this.commonForm.smallType: ', this.commonForm.smallType);\r\n            this.subForms.forEach((sf) => {\r\n                console.log('this.subForms: ', this.subForms);\r\n                console.log('sf: ', sf);\r\n                let params = {\r\n                    \"templateCode\": \"defect_template\",\r\n                    \"title\": '缺陷新增',//表单项无，但是接口必填字段\r\n                    \"sysSource\": \"outwork\",\r\n                    \"createType\": \"APP\",\r\n                    //  grid_id: 'xj001',//网格任务ID\r\n                    // \"priority\": this.form.priority,//优先级，高中低；表单项无\r\n                    \"longitude\": this.commonForm.lng,\r\n                    \"latitude\": this.commonForm.lat,\r\n                    \"questionDescribe\": this.commonForm.describe,\r\n                    \"address\": this.commonForm.properties.road_name || '',\r\n                    \"formJson\": {\r\n                        'task_id': this.$route.query.taskId, //巡检任务ID\r\n                        // \"faultTypes\": sf.defectType,//子表每一项 缺陷类型\r\n                        \"faultTypes\": this.defectTypeListDic[sf.defectType],\r\n                        // \"files\": sf.pic.concat(this.commonForm.media),//子表每一项 照片组\r\n                        \"files\": this.commonForm.media,//子表每一项 照片组\r\n                        \"handleImgs\": sf.pic,\r\n                        \"handleRemark\": sf.note,//子表每一项 备注\r\n                        // \"handleType\": \"DIRECT_PROCESSING\", //处理方式，例如直接处理；表单项无\r\n                        // \"defectFrom\": this.commonForm.defectFrom,\r\n                        \"defectFrom\": this.defectFromListDic[this.commonForm.defectFrom],\r\n                        \"device_type\": [this.bigTypeListDic[this.commonForm.bigType], this.smallTypeDic[this.commonForm.smallType]],\r\n                        // \"device_type\": [this.commonForm.bigType, this.commonForm.smallType],\r\n                        \"deviceCode\": this.commonForm.smallCode,\r\n                        // \"deviceDetail\": this.commonForm.properties,\r\n                        \"deviceDetail\": {\r\n                            \"longitude\": this.commonForm.lng,\r\n                            \"latitude\": this.commonForm.lat,\r\n                            \"road_name\": this.commonForm.properties?.road_name || ''\r\n                        },\r\n                        //下个节点处理人\r\n                        \"ticketDispatchUserIds\": [\r\n                            {\r\n                                \"name\": '处理人',//处理人名称\r\n                                \"id\": \"11\",//处理人ID\r\n                                \"type\": \"99\"\r\n                            }\r\n                        ]\r\n                    }\r\n                };\r\n                console.log('创建表单的params: ', params);\r\n                this.wpgHeader = {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: 'Bearer ' + this.token,\r\n                }\r\n                // 提交\r\n                axios({\r\n                    url: process.env.VUE_APP_THIRD_REQUEST_URL + '/main/outworkapi/ticketClient/create',\r\n                    method: \"post\",\r\n                    data: params,\r\n                    // headers: {\"Authorization\": \"Bearer 958f1385-fc61-46dc-836f-63a38b6993ac\" }\r\n                    headers: this.wpgHeader\r\n                }).then(res => {\r\n                    console.log(\"接口创建缺陷工单res:\", res)\r\n                    if (res.status == 200) {\r\n                        Toast({\r\n                            message: '提交成功',\r\n                            position: 'top',\r\n                        });\r\n                        this.subForms.shift()\r\n                        console.log('成功创建: ', res);\r\n                        this.$router.go(-1)\r\n                        // this.getTableData()//刷新列表\r\n                    }\r\n                })\r\n\r\n            })//forEach结束\r\n        },\r\n        // 弹出哪个选择器\r\n        choosePicker(item) {\r\n            this.columns = []\r\n            switch (item) {\r\n                case '缺陷来源':\r\n                    this.whichPicker = item\r\n                    this.columns = this.defectFromList\r\n                    break\r\n                case '业务类型':\r\n                    this.whichPicker = item\r\n                    this.columns = this.bigTypeList\r\n                    break\r\n                case '设施类型':\r\n                    this.whichPicker = item\r\n                    this.columns = this.smallTypeObj[this.commonForm.bigType]\r\n                    break\r\n                // case '缺陷类型':\r\n                //     this.whichPicker = item\r\n                //     this.columns = this.defectTypeList\r\n                //     break\r\n            }\r\n            this.showPicker = true\r\n        },\r\n        // 选择器选择\r\n        onConfirm(value) {\r\n            switch (this.whichPicker) {\r\n                case '缺陷来源':\r\n                    this.commonForm.defectFrom = value\r\n                    break\r\n                case '业务类型':\r\n                    this.commonForm.bigType = value\r\n                    break\r\n                case '设施类型':\r\n                    this.commonForm.smallType = value\r\n                    break\r\n                // case '缺陷类型':\r\n                //     this.subForm.defectType = value\r\n                //     break\r\n            }\r\n            this.showPicker = false;\r\n        },\r\n    },\r\n    mounted() {\r\n        console.log('defectFromList: ', this.defectFromList);\r\n        console.log('defectFromListDic: ', this.defectFromListDic);\r\n        this.upPerson = localStorage.getItem(\"cs_username\")\r\n        let time = new Date()\r\n        this.upTime = time.toLocaleString()\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-container {\r\n    .bigForm-container {\r\n        width: 750px;\r\n        height: 1234px;\r\n        overflow: scroll;\r\n        background: #ffffff;\r\n\r\n        .subtable {\r\n            position: relative;\r\n            margin: 10px;\r\n            padding: 13px;\r\n            // background-color: aquamarine;\r\n            border-radius: 16px;\r\n            border: 1px solid #5195d0;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}