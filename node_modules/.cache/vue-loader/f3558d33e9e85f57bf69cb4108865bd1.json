{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\components\\select-org\\index.vue?vue&type=style&index=0&id=4cf2b134&scoped=true&lang=less","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\components\\select-org\\index.vue","mtime":1705912799957},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZm0tY2VsbF9fdGl0bGUgZGl2IHsNCiAgZGlzcGxheTogZmxleDsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCn0NCg0KLnBvcHVwLWNvbnRhaW5lciB7DQogIGhlaWdodDogY2FsYygxMDAlIC0gOTJweCk7DQogIGRpc3BsYXk6IGZsZXg7DQogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogIGJhY2tncm91bmQ6ICNmOWY5Zjk7DQp9DQoNCi5zZWxlY3RlZC11c2VyIHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICBib3R0b206IDA7DQogIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogIHdpZHRoOiAxMDAlOw0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogIHBhZGRpbmc6IDIwcHg7DQogIGZvbnQtc2l6ZTogMC4yMTMzM3JlbTsNCiAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgLnNlbGVjdC10ZXh0IHsNCiAgICBmb250LXNpemU6IDMycHg7DQogICAgY29sb3I6ICMwMjdhZmY7DQogIH0NCn0NCg0KLmFkZHJlc3MtY29udGFpbmVyIHsNCiAgaGVpZ2h0OiAxMDAlOw0KICBiYWNrZ3JvdW5kOiAjZWVlZWVlOw0KICAuYWRkcmVzcy1ib3ggew0KICAgIGhlaWdodDogMTAwJTsNCiAgICBiYWNrZ3JvdW5kOiAjZjlmOWY5Ow0KICAgIC5hZGRyZXNzLXRyZWUgew0KICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgb3ZlcmZsb3c6IHNjcm9sbDsNCiAgICB9DQogIH0NCn0NCg0KLmNlbGwtdGl0bGUgew0KICBtYXJnaW4tbGVmdDogMC4zMnJlbTsNCn0NCg0KL2RlZXAvLmZtLWNlbGwgew0KICBmb250LXNpemU6IDMycHg7DQogIGxpbmUtaGVpZ2h0OiA1MnB4Ow0KfQ0KDQovZGVlcC8gLmZtLW5hdi1iYXIgLmZtLWljb24gew0KICBjb2xvcjogI2ZmZmZmZjsNCn0NCg0KLnBlcnNvbi1jb250YWluZXIgew0KICBoZWlnaHQ6IDEwMCU7DQogIGJhY2tncm91bmQ6ICNlZWVlZWU7DQp9DQoucGVyc29uLWJveCB7DQogIGhlaWdodDogODAlOw0KICBkaXNwbGF5OiBmbGV4Ow0KICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogIGZsZXgtd3JhcDogbm93cmFwOw0KfQ0KLnBlcnNvbi1waG90byB7DQogIG1hcmdpbjogMC40MjY2N3JlbTsNCn0NCg0KLnBlcnNvbi1waG90by10aXRsZSB7DQogIG1hcmdpbjogMC40cmVtIDAuOHJlbTsNCiAgL2RlZXAvLmZtLWNlbGxfX3ZhbHVlLS1hbG9uZSB7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICB9DQp9DQoNCi5wZXJzb24tcGhvdG8tdGl0bGUxIHsNCiAgbWFyZ2luOiAwLjRyZW0gMC44cmVtOw0KICAvZGVlcC8uZm0tY2VsbF9fdmFsdWUtLWFsb25lIHsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgY29sb3I6ICNmZmZmZmY7DQogIH0NCiAgL2RlZXAvLmZtLWNlbGwgew0KICAgIGJhY2tncm91bmQ6ICMwMjdhZmY7DQogIH0NCg0KICAvZGVlcC8uZm0tY2hlY2tib3ggew0KICAgIHotaW5kZXg6IDk5OTk5OTsNCiAgfQ0KfQ0KLmFkZHJlc3MtYm94IHsNCiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAxMDRweCk7DQogIGJhY2tncm91bmQ6ICNmOWY5Zjk7DQogIGZsZXg6IDE7DQp9DQoNCi5hZGRyZXNzLXRyZWUgew0KICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDk2cHgpOw0KICBvdmVyZmxvdzogc2Nyb2xsOw0KICAuZm0tbGlzdCB7DQogICAgaGVpZ2h0OiAxMDAlOw0KICB9DQp9DQovZGVlcC8uZm0tbm90aWZ5IHsNCiAgcGFkZGluZy10b3A6IHZhcigtLWhlaWdodCk7DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA2iBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/select-org","sourcesContent":["<!--\r\n * @Author: wei_sc\r\n * @Date: 2022-03-03 11:47:41\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2022-06-10 15:34:13\r\n * @FilePath: \\mobile-template\\src\\components\\select-org\\index.vue\r\n * @Description: 选部门组件\r\n *\r\n-->\r\n<template>\r\n  <div class=\"select-container\">\r\n    <div class=\"select-box\">\r\n      <fm-cell :title=\"title\" is-link @click=\"selectOrg\" :required=\"required\">\r\n        <template #default>\r\n          <div v-if=\"displayData.length && displayData.length != 0\">\r\n            <fm-tag\r\n              v-for=\"(item, index) in displayData\"\r\n              :key=\"index\"\r\n              :closeable=\"!disabled\"\r\n              size=\"medium\"\r\n              style=\"margin-right: 8px\"\r\n              @close=\"handleDelete(index)\"\r\n            >\r\n              {{ item.deptName || item.content.name }}\r\n            </fm-tag>\r\n          </div>\r\n          <span v-else>\r\n            {{ placeholder }}\r\n          </span>\r\n        </template>\r\n        <template #right-icon>\r\n          <i\r\n            v-if=\"!(displayData.length && displayData.length != 0)\"\r\n            class=\"fm-icon fm-icon-arrow\"\r\n          ></i>\r\n        </template>\r\n      </fm-cell>\r\n      <div>\r\n        <fm-popup\r\n          :visible.sync=\"show\"\r\n          position=\"bottom\"\r\n          :style=\"{ height: '100%' }\"\r\n          ref=\"deptPopup\"\r\n        >\r\n          <fm-nav-bar :title=\"navTitle\" :border=\"true\">\r\n            <template #left>\r\n              <i class=\"fm-icon fm-icon-arrow-left\" @click=\"back\"></i>\r\n            </template>\r\n          </fm-nav-bar>\r\n          <div class=\"popup-container\">\r\n            <div class=\"address-box\">\r\n              <div class=\"address-search-box\">\r\n                <fm-search v-model=\"searchValue\" placeholder=\"搜索\">\r\n                </fm-search>\r\n              </div>\r\n              <div class=\"address-tree\">\r\n                <!-- <fm-checkbox-group v-model=\"result\"> -->\r\n                <fm-cell-group>\r\n                  <fm-cell v-for=\"item in treeList\" :key=\"item.id\">\r\n                    <template #title>\r\n                      <div @click=\"handleClick(item)\">\r\n                        <fm-image\r\n                          width=\"20\"\r\n                          height=\"20\"\r\n                          :src=\"require('@/assets/img/org-tree.png')\"\r\n                        />\r\n                        <span class=\"cell-title\">{{ item.content.name }}</span>\r\n                      </div>\r\n                    </template>\r\n                    <template #right-icon>\r\n                      <fm-checkbox\r\n                        v-if=\"multiple\"\r\n                        :name=\"item\"\r\n                        v-model=\"item.checked\"\r\n                        label-disabled\r\n                      />\r\n                      <fm-radio\r\n                        v-else\r\n                        :name=\"item.id\"\r\n                        v-model=\"checkedName\"\r\n                        @click=\"handleRaidoCheck(item)\"\r\n                      />\r\n                    </template>\r\n                  </fm-cell>\r\n                </fm-cell-group>\r\n                <!-- </fm-checkbox-group> -->\r\n              </div>\r\n            </div>\r\n            <div class=\"selected-user\">\r\n              <span\r\n                class=\"select-text\"\r\n                v-if=\"result.length && result.length != 0\"\r\n                @click=\"viewSelectedOrg\"\r\n                >已选：{{ result.length }} 部门</span\r\n              >\r\n              <span class=\"select-text\" v-else>已选：0 部门</span>\r\n              <div class=\"select-button\">\r\n                <fm-button type=\"primary\" size=\"small\" @click=\"confirm\"\r\n                  >确定</fm-button\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </fm-popup>\r\n        <div>\r\n          <fm-popup\r\n            :visible.sync=\"viewShow\"\r\n            position=\"bottom\"\r\n            :style=\"{ height: '100%' }\"\r\n            :safe-area-inset-bottom=\"true\"\r\n            @closed=\"afterClosed\"\r\n          >\r\n            <fm-nav-bar\r\n              :title=\"selectTitle\"\r\n              :border=\"true\"\r\n              right-text=\"确定\"\r\n              @click-right=\"saveOrg\"\r\n            >\r\n              <template #left>\r\n                <i class=\"fm-icon fm-icon-arrow-left\" @click=\"cancel\"></i>\r\n              </template>\r\n            </fm-nav-bar>\r\n            <div class=\"popup-container\">\r\n              <fm-cell-group>\r\n                <fm-cell v-for=\"(item, index) in displayList\" :key=\"item.id\">\r\n                  <template #title>\r\n                    <div>\r\n                      <fm-image\r\n                        width=\"20\"\r\n                        height=\"20\"\r\n                        :src=\"require('@/assets/img/org-tree.png')\"\r\n                      />\r\n                      <span class=\"cell-title\">{{\r\n                        item.deptName || item.content.name\r\n                      }}</span>\r\n                    </div>\r\n                  </template>\r\n                  <template #right-icon>\r\n                    <i\r\n                      class=\"fm-icon fm-icon-close\"\r\n                      @click=\"deleteOrg(item, index)\"\r\n                    ></i>\r\n                  </template>\r\n                </fm-cell>\r\n              </fm-cell-group>\r\n            </div>\r\n          </fm-popup>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <fm-notify :visible.sync=\"notifyShow\" type=\"warning\">\r\n      <span>{{ notifyText }}</span>\r\n    </fm-notify>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  NavBar,\r\n  Search,\r\n  Cell,\r\n  CellGroup,\r\n  Image,\r\n  List,\r\n  Popup,\r\n  Button,\r\n  RadioGroup,\r\n  Radio,\r\n  Tag,\r\n  Checkbox,\r\n  CheckboxGroup,\r\n  Notify,\r\n} from 'fawkes-mobile-lib'\r\nimport { getDept } from '../select-user/api'\r\nimport { STATUS_BAR_HEIGHT } from '@/store/State/stateTypes'\r\n\r\nexport default {\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n    [Search.name]: Search,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [Image.name]: Image,\r\n    [List.name]: List,\r\n    [Popup.name]: Popup,\r\n    [Button.name]: Button,\r\n    [RadioGroup.name]: RadioGroup,\r\n    [Radio.name]: Radio,\r\n    [Tag.name]: Tag,\r\n    [Checkbox.name]: Checkbox,\r\n    [CheckboxGroup.name]: CheckboxGroup,\r\n    [Notify.Component.name]: Notify.Component,\r\n  },\r\n  props: {\r\n    deptId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    deptName: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: '选择部门',\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    required: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      treeList: [], //组织架构数据\r\n      treeData: {},\r\n      result: [], //部门选择结果\r\n      deptList: ['组织架构'], //记录访问深度\\修改navTitle\r\n      displayList: [], // 展示已选部门数组\r\n      displayData: [], // 展示已选的、确认后的数据\r\n      selectList: [],\r\n      index: 0,\r\n      flag: false,\r\n      searchValue: '',\r\n      show: false,\r\n      navTitle: '组织机构',\r\n      viewShow: false,\r\n      notifyShow: false,\r\n      notifyText: '',\r\n      checkedName: '',\r\n      checkedNameRet: [], //单选结果\r\n      changePaged: false,\r\n    }\r\n  },\r\n  computed: {\r\n    // 选中的结果集\r\n    tempResult() {\r\n      // 多选时，获取当前已选中的用户\r\n      if (this.multiple) {\r\n        return this.treeList?.filter((dept) => dept.checked)\r\n      } else {\r\n        return this.checkedNameRet\r\n      }\r\n    },\r\n    selectTitle() {\r\n      return `已选： ${this.displayList.length} 部门`\r\n    },\r\n  },\r\n  watch: {\r\n    navTitle: {\r\n      handler(newVal) {\r\n        if (!newVal || newVal == '') {\r\n          this.navTitle = '组织架构'\r\n        }\r\n      },\r\n    },\r\n    // 解决FormCenter打开表单时数据不回显问题\r\n    deptName: {\r\n      handler() {\r\n        this.init()\r\n      },\r\n    },\r\n    tempResult(newVal, oldVal) {\r\n      // 多选\r\n      if (this.multiple) {\r\n        const toAdd = newVal\r\n          .filter((user) => !oldVal.some((val) => user.id == val.id))\r\n          .filter((add) => !this.result.some((val) => val.id == add.id))\r\n\r\n        if (toAdd.length > 0) {\r\n          this.result = this.result.concat(toAdd)\r\n        }\r\n\r\n        let toRemove = []\r\n\r\n        // 处理切换部门时意外清空选中记录问题\r\n        if (this.changePaged) {\r\n          this.changePaged = false\r\n        } else {\r\n          // 待删除 old-new\r\n          toRemove = oldVal.filter(\r\n            (user) => !newVal.some((val) => user.id == val.id)\r\n          )\r\n        }\r\n        // 切换部门时不删除，避免已选中记录被清空\r\n        if (toRemove.length > 0) {\r\n          this.result = this.result.filter(\r\n            (item) => !toRemove.some((val) => val.id == item.id)\r\n          )\r\n        }\r\n      } else {\r\n        // 单选\r\n        this.result = newVal\r\n      }\r\n    },\r\n    deptList(newVal) {\r\n      // always true\r\n      if (newVal.length > 0) {\r\n        document.removeEventListener(\r\n          'backbutton',\r\n          this.$refs.deptPopup.close,\r\n          false\r\n        )\r\n        document.addEventListener('backbutton', this.back, false)\r\n      }\r\n    },\r\n    viewShow(newVal) {\r\n      // 覆盖第一级弹的返回事件\r\n      if (newVal) {\r\n        document.removeEventListener('backbutton', this.back, false)\r\n        document.addEventListener('backbutton', this.cancel, false)\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    //更新父组件\r\n    updateProps(val) {\r\n      let dptNameStr = ''\r\n      let dptIdStr = ''\r\n      if (val.length == 0) {\r\n        this.$emit('update:deptId', '')\r\n        this.$emit('update:deptName', '')\r\n        this.$emit('change', val) //暴露选部门组件的change事件后续需要可以调用\r\n      } else {\r\n        val.forEach((item) => {\r\n          dptNameStr += item.content.name + ','\r\n          dptIdStr += item.id + ','\r\n        })\r\n        this.$emit('update:deptId', dptIdStr.substring(0, dptIdStr.length - 1))\r\n        this.$emit(\r\n          'update:deptName',\r\n          dptNameStr.substring(0, dptNameStr.length - 1)\r\n        )\r\n        this.$emit('change', val)\r\n      }\r\n    },\r\n    //处理数据\r\n    init() {\r\n      const dptNameArr = this.deptName ? this.deptName.split(',') : []\r\n      const dptIdArr = this.deptId ? this.deptId.split(',') : []\r\n      const len = dptNameArr.length\r\n      const len2 = dptIdArr.length\r\n      // 单选值处理\r\n      if (!this.multiple) {\r\n        this.checkedName = this.deptId\r\n      }\r\n\r\n      if (this.deptName && this.deptId) {\r\n        if (len !== len2) {\r\n          this.controlNotifyShow('初始部门数值错误')\r\n          return false\r\n        } else {\r\n          this.displayData = dptIdArr.map((deptId, index) => {\r\n            return { deptId: deptId, deptName: dptNameArr[index] }\r\n          })\r\n          this.result = Array.from(this.displayData)\r\n        }\r\n      } else if (!this.deptName && !this.deptId) {\r\n        this.displayList = []\r\n      } else {\r\n        this.controlNotifyShow(\r\n          '请输入正确的部门数据,部门id和部门名称需同时赋值'\r\n        )\r\n      }\r\n    },\r\n    //选择部门\\打开弹出层\r\n    selectOrg() {\r\n      if (this.disabled) {\r\n        return\r\n      } else {\r\n        this.show = true\r\n        this.changePaged = true\r\n        //获取树形数据\r\n        getDept({}).then((res) => {\r\n          if (res.status) {\r\n            this.treeList = res.data\r\n            this.treeData[this.index] = res.data\r\n            this.index += 1\r\n            if (this.multiple) {\r\n              if (this.displayData.length && this.treeList.length) {\r\n                this.displayData.forEach((item) => {\r\n                  this.treeList.forEach((node) => {\r\n                    if (item.deptId == node.id) {\r\n                      this.$set(node, 'checked', true)\r\n                    }\r\n                  })\r\n                })\r\n              }\r\n            } else {\r\n              this.checkedNameRet = this.displayData\r\n              this.checkedName = this.displayData[0]?.deptId\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    handleDelete(index) {\r\n      this.result.splice(index, 1)\r\n      this.displayData = this.result\r\n      this.updateProps(this.result)\r\n    },\r\n    //树形点击后出现子级目录：下级组织机构,限制只有点击复选框才能更改选中状态\r\n    handleClick(item) {\r\n      // 叶子节点不变更页面标题\r\n      if (item?.children?.length > 0) {\r\n        this.navTitle = item.content.name\r\n      }\r\n      this.changePaged = true\r\n      // 存在子部门\r\n      if (this.judgeChild(item, this.treeList)) {\r\n        this.deptList.push(item.content.name)\r\n        this.treeList = this.judgeChild(item, this.treeList)\r\n        this.result.forEach((item) => {\r\n          this.treeList.forEach((node) => {\r\n            if (item.deptId == node.id) {\r\n              this.$set(node, 'checked', true)\r\n            }\r\n          })\r\n        })\r\n        if (this.multiple) {\r\n          this.result = this.result.filter(\r\n            (item) => !this.displayData.some((val) => val.deptId == item.deptId)\r\n          )\r\n        }\r\n        this.treeData[this.index] = this.treeList\r\n        // console.log(this.selectList, this.treeData[this.index], this.result)\r\n        this.index += 1\r\n      } else {\r\n        return\r\n      }\r\n    },\r\n    //树形判断\r\n    judgeChild(node, tree) {\r\n      if (tree.length != 0) {\r\n        for (let i = 0; i < tree.length; i++) {\r\n          if (node == tree[i] && tree[i].children) {\r\n            return tree[i].children\r\n          } else if (tree[i].children) {\r\n            this.judgeChild(node, tree[i].children)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    viewSelectedOrg() {\r\n      this.viewShow = true\r\n      this.displayList = Array.from(this.result)\r\n    },\r\n    back() {\r\n      if (this.deptList.length == 1) {\r\n        this.show = false\r\n        this.result = Array.from(this.displayData)\r\n        return\r\n      }\r\n      this.deptList.splice(this.deptList.length - 1, 1)\r\n      this.navTitle = this.deptList[this.deptList.length - 1]\r\n      this.treeList = this.treeData[this.index - 2]\r\n      this.index -= 1\r\n      this.changePaged = true\r\n    },\r\n    //确认选择\r\n    confirm() {\r\n      this.deptList = ['组织架构']\r\n      this.show = false\r\n      this.searchValue = ''\r\n      this.navTitle = '组织架构'\r\n      this.treeList = []\r\n      // 更新回填展示数据\r\n      this.displayData = this.result\r\n      this.updateProps(this.result)\r\n    },\r\n    //删除部门\r\n    deleteOrg(item, index) {\r\n      this.displayList.splice(index, 1)\r\n      // 取消勾选\r\n      // this.treeList.forEach((dept) => {\r\n      //   if (dept.id == item.id) {\r\n      //     dept.checked = false\r\n      //   }\r\n      // })\r\n    },\r\n    //保存的话会保存操作\r\n    saveOrg() {\r\n      this.result = this.displayList\r\n      if (this.multiple) {\r\n        if (this.result.length == 0) {\r\n          this.treeList.forEach((dept) => {\r\n            this.$set(dept, 'checked', false)\r\n          })\r\n        } else {\r\n          this.result.forEach((item) => {\r\n            this.treeList.forEach((dept) => {\r\n              if (dept.id == item.id) {\r\n                this.$set(dept, 'checked', true)\r\n              } else {\r\n                this.$set(dept, 'checked', false)\r\n              }\r\n            })\r\n          })\r\n        }\r\n      }\r\n      this.viewShow = false\r\n      this.$nextTick(() => {\r\n        this.displayList = []\r\n        // 单选清空时重置\r\n        if (this.result.length == 0) {\r\n          this.checkedName = ''\r\n          this.checkedNameRet = []\r\n        }\r\n      })\r\n    },\r\n    //取消则之前做的操作都取消\r\n    cancel() {\r\n      this.viewShow = false\r\n      // this.displayList = []\r\n    },\r\n    change(val) {\r\n      if (val.length != 0) {\r\n        val.length\r\n      }\r\n    },\r\n    controlNotifyShow(text) {\r\n      this.notifyText = text\r\n      this.notifyShow = true\r\n      setTimeout(() => {\r\n        this.notifyShow = false\r\n      }, 1000)\r\n    },\r\n    handleRaidoCheck(item) {\r\n      this.checkedName = item.id\r\n      this.checkedNameRet = [item]\r\n    },\r\n    // 第二级弹窗（已选部门界面）关闭后\r\n    afterClosed() {\r\n      document.removeEventListener('backbutton', this.cancel, false)\r\n      // 移除组件关闭时添加的默认事件\r\n      document.removeEventListener('backbutton', this.$back, false)\r\n      document.addEventListener('backbutton', this.back, false)\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.fm-cell__title div {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.popup-container {\r\n  height: calc(100% - 92px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #f9f9f9;\r\n}\r\n\r\n.selected-user {\r\n  position: fixed;\r\n  bottom: 0;\r\n  background: #ffffff;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20px;\r\n  font-size: 0.21333rem;\r\n  box-sizing: border-box;\r\n  .select-text {\r\n    font-size: 32px;\r\n    color: #027aff;\r\n  }\r\n}\r\n\r\n.address-container {\r\n  height: 100%;\r\n  background: #eeeeee;\r\n  .address-box {\r\n    height: 100%;\r\n    background: #f9f9f9;\r\n    .address-tree {\r\n      height: 100%;\r\n      overflow: scroll;\r\n    }\r\n  }\r\n}\r\n\r\n.cell-title {\r\n  margin-left: 0.32rem;\r\n}\r\n\r\n/deep/.fm-cell {\r\n  font-size: 32px;\r\n  line-height: 52px;\r\n}\r\n\r\n/deep/ .fm-nav-bar .fm-icon {\r\n  color: #ffffff;\r\n}\r\n\r\n.person-container {\r\n  height: 100%;\r\n  background: #eeeeee;\r\n}\r\n.person-box {\r\n  height: 80%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  flex-wrap: nowrap;\r\n}\r\n.person-photo {\r\n  margin: 0.42667rem;\r\n}\r\n\r\n.person-photo-title {\r\n  margin: 0.4rem 0.8rem;\r\n  /deep/.fm-cell__value--alone {\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.person-photo-title1 {\r\n  margin: 0.4rem 0.8rem;\r\n  /deep/.fm-cell__value--alone {\r\n    text-align: center;\r\n    color: #ffffff;\r\n  }\r\n  /deep/.fm-cell {\r\n    background: #027aff;\r\n  }\r\n\r\n  /deep/.fm-checkbox {\r\n    z-index: 999999;\r\n  }\r\n}\r\n.address-box {\r\n  height: calc(100% - 104px);\r\n  background: #f9f9f9;\r\n  flex: 1;\r\n}\r\n\r\n.address-tree {\r\n  height: calc(100% - 96px);\r\n  overflow: scroll;\r\n  .fm-list {\r\n    height: 100%;\r\n  }\r\n}\r\n/deep/.fm-notify {\r\n  padding-top: var(--height);\r\n}\r\n</style>\r\n"]}]}