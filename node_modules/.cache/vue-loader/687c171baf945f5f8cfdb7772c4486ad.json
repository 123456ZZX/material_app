{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\PumpStationInspection\\components\\InspectionItem.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\PumpStationInspection\\components\\InspectionItem.vue","mtime":1705912915815},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgVXBsb2FkZXIgZnJvbSAnLi9VcGxvYWRlci52dWUnDQppbXBvcnQgeyBnZXRUb2tlbiwgY2xvc2VUaWNrZXQsIHBhdHJvbCwgcGF0cm9sRWRpdCwgcGF0cm9sSXRlbXNSZXN1bHQgfSBmcm9tICcuLi9hcGknDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdJbnNwZWN0aW9uSXRlbScsDQogIGNvbXBvbmVudHM6IHsgVXBsb2FkZXIgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZmlsZVZhbHVlOiAnJywNCiAgICAgIGZpbGVMaXN0OiBbXSwNCiAgICAgIHBpY1VybDogJycsDQogICAgICBjaGVja2VkOiBmYWxzZSwNCiAgICAgIHZhbHVlOiAnJywNCiAgICAgIGltZ1Nob3c6IGZhbHNlLA0KICAgICAgbm9BbGFybVNob3c6IGZhbHNlLA0KICAgICAgaXRlbURhdGE6IG51bGwsDQogICAgICBwYXRyb2xJdGVtc1Jlc3VsdExpc3Q6IFtdLA0KICAgICAgaW1nVXJsOiAnJywNCiAgICAgIGFsbERhdGE6ICcnLA0KICAgIH0NCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0UGF0cm9sKCkNCiAgICB0aGlzLnJlcXVlc3RTaW5nbGVMb2NhdGlvbigpDQogIH0sDQogIG1vdW50ZWQoKSB7fSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICB0aGlzLnN0b3BSZXF1ZXN0TG9jYXRpb25zKCkNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLy/mlofku7blpKflsI8NCiAgICBvbk92ZXJzaXplKGZpbGUpIHsNCiAgICAgIGNvbnNvbGUubG9nKGZpbGUpDQogICAgICB0aGlzLiRub3RpZnkoeyB0eXBlOiAnZXJyb3InLCBtZXNzYWdlOiAn5paH5Lu25aSn5bCP5LiN6IO96LaF6L+HIDZNQicsIGR1cmF0aW9uOiAnMTAwMCcgfSkNCiAgICB9LA0KDQogICAgLy/ojIPlm7TlgLzliKTmlq0NCiAgICBjb25maWdSYW5nZVZhbHVlKHZhbHVlLCB1cHBlckxpbWl0VmFsdWUsIGxvd2VyTGltaXRWYWx1ZSkgew0KICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuDQogICAgICByZXR1cm4gdXBwZXJMaW1pdFZhbHVlIDwgdmFsdWUgfHwgbG93ZXJMaW1pdFZhbHVlID4gdmFsdWUNCiAgICB9LA0KDQogICAgLy/ojrflj5bnlKjmiLflt6Hmo4DngrkNCiAgICBhc3luYyBnZXRQYXRyb2woKSB7DQogICAgICBsZXQgeyB0YXNrSWQsIGluZGV4IH0gPSB0aGlzLiRyb3V0ZS5xdWVyeQ0KDQogICAgICBsZXQgUGF0cm9sRGF0YQ0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBwYXRyb2wodGFza0lkKQ0KICAgICAgICBQYXRyb2xEYXRhID0gZGF0YQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgUGF0cm9sRGF0YSA9IEpTT04ucGFyc2UodGhpcy4kc3RvcmFnZS5nZXQoJ1BhdHJvbERhdGEnKSkNCiAgICAgIH0NCg0KICAgICAgdGhpcy5hbGxEYXRhID0gUGF0cm9sRGF0YQ0KICAgICAgdGhpcy5pdGVtRGF0YSA9IFBhdHJvbERhdGEucGF0cm9sUG9pbnRSZXN1bHRMaXN0W2luZGV4XQ0KDQogICAgICB0aGlzLmlzVW5zdWJtaXR0ZWQoKQ0KICAgIH0sDQoNCiAgICAvL+W8gOWni+W3oeajgA0KICAgIHJlcXVlc3RTaW5nbGVMb2NhdGlvbigpIHsNCiAgICAgIGlmICh0eXBlb2YgeXVhbmNodSAhPSAndW5kZWZpbmVkJykgew0KICAgICAgICB5dWFuY2h1LmxvY2F0aW9uQU1hcC5yZXF1ZXN0U2luZ2xlTG9jYXRpb24oDQogICAgICAgICAgWycxJ10sDQogICAgICAgICAgKHJlcykgPT4gew0KICAgICAgICAgICAgbGV0IHsgbGF0aXR1ZGUsIGxvbmdpdHVkZSB9ID0gcmVzDQogICAgICAgICAgICBsZXQgcGF0aCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuc3RhdGUucHVtcC5wdW1wUGF0aCkpDQogICAgICAgICAgICBwYXRoLnB1c2goew0KICAgICAgICAgICAgICBsYXQ6IGxhdGl0dWRlLA0KICAgICAgICAgICAgICBsb246IGxvbmdpdHVkZSwNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFB1bXBQYXRoJywgcGF0aCkNCg0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUucHVtcC5wdW1wUGF0aCkNCiAgICAgICAgICB9LA0KICAgICAgICAgIChlcnIpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI9JywgZXJyKQ0KICAgICAgICAgIH0NCiAgICAgICAgKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvL+e7k+adn+W3oeajgA0KICAgIHN0b3BSZXF1ZXN0TG9jYXRpb25zKCkgew0KICAgICAgaWYgKHR5cGVvZiB5dWFuY2h1ICE9ICd1bmRlZmluZWQnKSB7DQogICAgICAgIHl1YW5jaHUubG9jYXRpb25BTWFwLnN0b3BSZXF1ZXN0TG9jYXRpb25zKCkNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy/mo4Dmn6XmmK/lkKbmnInmnKrmj5DkuqTpobkNCiAgICBpc1Vuc3VibWl0dGVkKCkgew0KICAgICAgbGV0IGl0ZW1EYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLml0ZW1EYXRhKSkNCiAgICAgIGxldCBzdG9yYWdlSXRlbURhdGFMaXN0ID0gSlNPTi5wYXJzZSh0aGlzLiRzdG9yYWdlLmdldCgncHVtcC1zdG9yYWdlSXRlbURhdGFMaXN0JykpDQogICAgICBzdG9yYWdlSXRlbURhdGFMaXN0Py5mb3JFYWNoKChpdGVtLCBpKSA9PiB7DQogICAgICAgIGl0ZW0uaWQgPT09IHRoaXMuaXRlbURhdGEuaWQNCiAgICAgICAgICA/ICh0aGlzLml0ZW1EYXRhID0gT2JqZWN0LmFzc2lnbihpdGVtRGF0YSwgc3RvcmFnZUl0ZW1EYXRhTGlzdFtpXSkpDQogICAgICAgICAgOiBudWxsDQogICAgICB9KQ0KDQogICAgICB0aGlzLndvcmtEYXRhU2hvdyh0aGlzLmFsbERhdGEpDQogICAgfSwNCg0KICAgIC8v5byC5bi45LiK5oql5ZCO5Zue5pi+DQogICAgd29ya0RhdGFTaG93KGRhdGEpIHsNCiAgICAgIGxldCB7IGluZGV4IH0gPSB0aGlzLiRyb3V0ZS5xdWVyeQ0KICAgICAgbGV0IGl0ZW1EYXRhID0gZGF0YS5wYXRyb2xQb2ludFJlc3VsdExpc3RbaW5kZXhdDQoNCiAgICAgIGl0ZW1EYXRhICYmDQogICAgICAgIGl0ZW1EYXRhLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdD8uZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKQ0KICAgICAgICAgIGlmIChpdGVtLndvcmtPcmRlcklkKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtLndvcmtPcmRlcklkKQ0KICAgICAgICAgICAgdGhpcy5pdGVtRGF0YS5wYXRyb2xJdGVtc1Jlc3VsdExpc3RbaW5kZXhdLndvcmtPcmRlcklkID0gaXRlbS53b3JrT3JkZXJJZA0KICAgICAgICAgICAgdGhpcy5pdGVtRGF0YS5wYXRyb2xJdGVtc1Jlc3VsdExpc3RbaW5kZXhdLnJlcG9ydFRpbWUgPSBpdGVtLnJlcG9ydFRpbWUNCiAgICAgICAgICB9DQogICAgICAgIH0pDQoNCiAgICAgIHRoaXMuZ2V0SW5mb0RhdGEoKQ0KICAgIH0sDQoNCiAgICAvL+W8guW4uOi/lOWbnuato+W4uCznoa7orqTlkI7muIXpmaTlvILluLjkuIrmiqXkuovku7YNCiAgICBzd2l0Y2hDaGFuZ2UoaW5kZXgpIHsNCiAgICAgIGxldCBjb25maWcgPQ0KICAgICAgICB0aGlzLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdFtpbmRleF0ucGF0cm9sSXRlbVZhbHVlICYmDQogICAgICAgIHRoaXMucGF0cm9sSXRlbXNSZXN1bHRMaXN0W2luZGV4XS53b3JrT3JkZXJJZA0KDQogICAgICBjb25maWcgJiYNCiAgICAgICAgdGhpcy4kZGlhbG9nDQogICAgICAgICAgLmNvbmZpcm0oew0KICAgICAgICAgICAgdGl0bGU6ICfmmK/lkKblj5bmtojlvILluLjkuIrmiqXkuovku7YnLA0KICAgICAgICAgIH0pDQogICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgbGV0IHsgd29ya09yZGVySWQgfSA9IHRoaXMucGF0cm9sSXRlbXNSZXN1bHRMaXN0W2luZGV4XQ0KICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRDbG9zZVRpY2tldCh3b3JrT3JkZXJJZCkNCiAgICAgICAgICAgIHRoaXMud29ya2VyUHVzaCh0aGlzLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdFtpbmRleF0uaWQsIG51bGwsIG51bGwsIGluZGV4KQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMucGF0cm9sSXRlbXNSZXN1bHRMaXN0W2luZGV4XS5wYXRyb2xJdGVtVmFsdWUgPSBmYWxzZQ0KICAgICAgICAgIH0pDQogICAgfSwNCg0KICAgIC8v5byC5bi46L+U5Zue5q2j5bi4LOehruiupOWQjua4hemZpOW8guW4uOS4iuaKpeS6i+S7tg0KICAgIHZhbHVlQ2hhbmdlKGluZGV4KSB7DQogICAgICAvL+WmguaenOayoeacieW3peWNlSzmlbDmja7muIXnqbos54S25ZCO6YCA5Ye6DQogICAgICBpZiAoIXRoaXMucGF0cm9sSXRlbXNSZXN1bHRMaXN0W2luZGV4XS53b3JrT3JkZXJJZCkgew0KICAgICAgICB0aGlzLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdFtpbmRleF0ucGF0cm9sSXRlbVZhbHVlID0gJycNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLiRkaWFsb2cNCiAgICAgICAgLmNvbmZpcm0oew0KICAgICAgICAgIHRpdGxlOiAn5piv5ZCm5Y+W5raI5byC5bi45LiK5oql5LqL5Lu2JywNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgIGxldCB7IHdvcmtPcmRlcklkIH0gPSB0aGlzLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdFtpbmRleF0NCiAgICAgICAgICBhd2FpdCB0aGlzLnNldENsb3NlVGlja2V0KHdvcmtPcmRlcklkKQ0KICAgICAgICAgIHRoaXMucGF0cm9sSXRlbXNSZXN1bHRMaXN0W2luZGV4XS5wYXRyb2xJdGVtVmFsdWUgPSAnJw0KICAgICAgICAgIHRoaXMud29ya2VyUHVzaCh0aGlzLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdFtpbmRleF0uaWQsIG51bGwsIG51bGwsIGluZGV4KQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4ge30pDQogICAgfSwNCg0KICAgIC8v5riF6Zmk5bel5Y2VDQogICAgYXN5bmMgc2V0Q2xvc2VUaWNrZXQodGlja2V0SWQpIHsNCiAgICAgIGxldCBxdWVyeSA9IHsNCiAgICAgICAgcmVhc29uOiAn5beh5qOA5byC5bi46aG55oGi5aSN5q2j5bi4JywNCiAgICAgICAgdGlja2V0SWQ6IHRpY2tldElkLA0KICAgICAgfQ0KICAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbiB9ID0gYXdhaXQgZ2V0VG9rZW4odGhpcy4kc3RvcmFnZS5nZXQoJ2FjY2Vzc190b2tlbicpKQ0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgY2xvc2VUaWNrZXQoYWNjZXNzVG9rZW4sIHF1ZXJ5KQ0KICAgIH0sDQoNCiAgICAvL+iOt+WPluW3oeajgOeCueS/oeaBrw0KICAgIGdldEluZm9EYXRhKCkgew0KICAgICAgbGV0IHsgcGF0cm9sSXRlbXNSZXN1bHRMaXN0LCBsb2NhdGlvblBsYW4sIHBpY1VybCB9ID0gdGhpcy5pdGVtRGF0YQ0KDQogICAgICB0aGlzLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdCA9IHBhdHJvbEl0ZW1zUmVzdWx0TGlzdC5tYXAoKGl0ZW0pID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uaW5wdXRUeXBlID09PSAnMScpIHsNCiAgICAgICAgICBsZXQgZGF0YSA9IGl0ZW0NCiAgICAgICAgICBkYXRhLnBhdHJvbEl0ZW1WYWx1ZSA9IGRhdGE/LnBhdHJvbEl0ZW1WYWx1ZT8udG9TdHJpbmcoKSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgIHJldHVybiB7IC4uLmRhdGEgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJldHVybiB7IC4uLml0ZW0gfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpcy5maWxlVmFsdWUgPSBwaWNVcmwgPyBwaWNVcmwgOiAnJw0KICAgICAgdGhpcy5nZXRJbWcobG9jYXRpb25QbGFuPy51cmwpDQogICAgfSwNCg0KICAgIC8v6I635Y+W5Zu+54mHDQogICAgZ2V0SW1nKGltZ1Rva2VuKSB7DQogICAgICB0aGlzLmltZ1VybCA9IGltZ1Rva2VuID8gJy9hcGkvc3lzLXN0b3JhZ2UvZG93bmxvYWRfaW1hZ2U/ZjhzPScgKyBpbWdUb2tlbiA6IG51bGwNCiAgICB9LA0KDQogICAgLy/kuIrkvKDmlofku7bmm7TmlrANCiAgICBmaWxlQ2hhbmdlKGl0ZW0pIHsNCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBpdGVtLmZpbGVMaXN0DQogICAgfSwNCg0KICAgIC8v5Yib5bu65bel5Y2VDQogICAgYXN5bmMgY3JlYXRlV29yayh0aWNrZXRJZCwgaSkgew0KICAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbiB9ID0gYXdhaXQgZ2V0VG9rZW4odGhpcy4kc3RvcmFnZS5nZXQoJ2FjY2Vzc190b2tlbicpKQ0KICAgICAgbGV0IHV1aWQgPSB0aGlzLmdldFVVSUQoKQ0KICAgICAgbGV0IGZvcm1WYWx1ZSA9IHsNCiAgICAgICAgdGlja2V0SWQ6IHV1aWQsDQogICAgICB9DQoNCiAgICAgIGxldCBlbmNvZGVVUklGb3JtVmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZm9ybVZhbHVlKSkNCiAgICAgIGxldCB0aW1lID0gdGhpcy4kZGF5anMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKQ0KDQogICAgICBsZXQgeyB0YXNrSWQsIGluZGV4IH0gPSB0aGlzLiRyb3V0ZS5xdWVyeQ0KDQogICAgICB0aGlzLml0ZW1EYXRhLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdCA9IHRoaXMucGF0cm9sSXRlbXNSZXN1bHRMaXN0DQogICAgICB0aGlzLml0ZW1EYXRhLnBpY1VybCA9IHRoaXMuZmlsZVZhbHVlDQoNCiAgICAgIGxldCBwb2ludERhdGEgPSB0aGlzLmFsbERhdGEucGF0cm9sUG9pbnRSZXN1bHRMaXN0DQogICAgICBwb2ludERhdGFbaW5kZXhdID0gdGhpcy5pdGVtRGF0YQ0KICAgICAgbGV0IHF1ZXJ5ID0gew0KICAgICAgICBpZDogdGFza0lkLA0KICAgICAgICBwYXRyb2xQb2ludFJlc3VsdExpc3Q6IHBvaW50RGF0YSwNCiAgICAgIH0NCg0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcGF0cm9sRWRpdChxdWVyeSkNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIHRoaXMuc2V0T2ZmTGluZVN0b3JhZ2UoKQ0KICAgICAgfQ0KDQogICAgICBhd2FpdCB0aGlzLndvcmtlclB1c2godGlja2V0SWQsIHV1aWQsIHRpbWUsIGkpDQoNCiAgICAgIHRoaXMuY3JlYXRlV29ya1VybCA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfV1BHX1VSTH0vb3V0d29ya0FwcC8jL3BhZ2VzL2luZGV4L2Zvcm0/c3lzQ29kZT14YXN3LXB1bXAmdGVtcGxhdGVDb2RlPXRyb3VibGVfdGVtcGxhdGUmdG9rZW49JHthY2Nlc3NUb2tlbn0mZm9ybVZhbHVlPSR7ZW5jb2RlVVJJRm9ybVZhbHVlfWANCiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGhpcy5jcmVhdGVXb3JrVXJsDQogICAgfSwNCg0KICAgIC8v5bel5Y2V6K+m5oOFDQogICAgYXN5bmMgd29ya2VyRGV0YWlscyhpbmRleCkgew0KICAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbiB9ID0gYXdhaXQgZ2V0VG9rZW4odGhpcy4kc3RvcmFnZS5nZXQoJ2FjY2Vzc190b2tlbicpKQ0KICAgICAgbGV0IHdvcmtPcmRlcklkID0gdGhpcy5wYXRyb2xJdGVtc1Jlc3VsdExpc3RbaW5kZXhdLndvcmtPcmRlcklkDQogICAgICBsZXQgd29ya2VyRGV0YWlsc1VybCA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfV1BHX1VSTH0vb3V0d29ya0FwcC8jL3BhZ2VzL3RpY2tldC9kZXRhaWwvaW5kZXg/aWQ9JHt3b3JrT3JkZXJJZH0mdG9rZW49JHthY2Nlc3NUb2tlbn0mc3lzQ29kZT14YXN3LXB1bXBgDQogICAgICBjb25zb2xlLmxvZyh3b3JrZXJEZXRhaWxzVXJsKQ0KICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3b3JrZXJEZXRhaWxzVXJsDQogICAgfSwNCg0KICAgIC8vIOiOt+WPllVVSUQNCiAgICBnZXRVVUlEKG4gPSAzMikgew0KICAgICAgdmFyIHN0ciA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknIC8vIOWPr+S7peS9nOS4uuW4uOmHj+aUvuWIsHJhbmRvbeWklumdog0KICAgICAgdmFyIHJlc3VsdCA9ICcnDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgew0KICAgICAgICByZXN1bHQgKz0gc3RyW3BhcnNlSW50KE1hdGgucmFuZG9tKCkgKiBzdHIubGVuZ3RoKV0NCiAgICAgIH0NCiAgICAgIHJldHVybiByZXN1bHQNCiAgICB9LA0KDQogICAgLy/liKTmlq3mmK/lkKbmnInmnKrkuIrmiqXlt6Hmo4DpobkNCiAgICBub0FsYXJtKCkgew0KICAgICAgbGV0IGNvdW50ID0gMA0KICAgICAgdGhpcy5wYXRyb2xJdGVtc1Jlc3VsdExpc3Q/LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgbGV0IGlzQWxhcm0NCiAgICAgICAgaWYgKGl0ZW0uaW5wdXRUeXBlID09PSAnMicpIHsNCiAgICAgICAgICBpc0FsYXJtID0gdGhpcy5jb25maWdSYW5nZVZhbHVlKA0KICAgICAgICAgICAgaXRlbS5wYXRyb2xJdGVtVmFsdWUsDQogICAgICAgICAgICBpdGVtLnVwcGVyTGltaXRWYWx1ZSAqIDEsDQogICAgICAgICAgICBpdGVtLmxvd2VyTGltaXRWYWx1ZSAqIDENCiAgICAgICAgICApDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaXNBbGFybSA9ICFpdGVtLnBhdHJvbEl0ZW1WYWx1ZQ0KICAgICAgICB9DQogICAgICAgIGlzQWxhcm0gJiYgaXRlbS53b3JrT3JkZXJJZCA9PT0gbnVsbCA/IGNvdW50KysgOiBudWxsDQogICAgICB9KQ0KICAgICAgcmV0dXJuIGNvdW50DQogICAgfSwNCg0KICAgIC8v5piv5ZCm5LiK5Lyg5Zu+54mHKDE65piv77yMMjrlkKYpIOaYr+W/hemhu+S4iuS8oOS4gOW8oOWbvueJhw0KICAgIGlzVXBsb2FkSW1hZ2VDb25maWcoKSB7DQogICAgICBsZXQgY29uZmlnID0gZmFsc2UNCiAgICAgIGNvbmZpZyA9IHRoaXMuaXRlbURhdGEuaXNVcGxvYWRJbWFnZSAmJiB0aGlzLmZpbGVMaXN0Lmxlbmd0aCA9PT0gMCA/IHRydWUgOiBmYWxzZQ0KICAgICAgY29uZmlnICYmIHRoaXMuJHRvYXN0Lndhcm5pbmcoJ+ivt+iHs+WwkeS4iuS8oOS4gOW8oOWbvueJhycpDQoNCiAgICAgIHJldHVybiBjb25maWcNCiAgICB9LA0KDQogICAgLy/lt6Hmo4Dngrnlt6Hmo4Dmj5DkuqQNCiAgICBhc3luYyBzdWJtaXQoKSB7DQogICAgICBpZiAodGhpcy5pc1VwbG9hZEltYWdlQ29uZmlnKCkpIHJldHVybg0KDQogICAgICB0aGlzLm5vQWxhcm1TaG93ID0gdHJ1ZQ0KICAgIH0sDQoNCiAgICAvL+W3peWNleS4iuaKpQ0KICAgIGFzeW5jIHdvcmtlclB1c2goaWQsIHdvcmtPcmRlcklkLCB0aW1lLCBpbmRleCkgew0KICAgICAgbGV0IHF1ZXJ5ID0gew0KICAgICAgICBpZDogaWQsDQogICAgICAgIHdvcmtPcmRlcklkOiB3b3JrT3JkZXJJZCwNCiAgICAgICAgcmVwb3J0VGltZTogdGltZSwNCiAgICAgICAgcGF0cm9sSXRlbVZhbHVlOiB0aGlzLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdFtpbmRleF0ucGF0cm9sSXRlbVZhbHVlLA0KICAgICAgfQ0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgcGF0cm9sSXRlbXNSZXN1bHQocXVlcnkpDQoNCiAgICAgIHRoaXMuZ2V0UGF0cm9sKCkNCiAgICB9LA0KDQogICAgLy8gIOehruiupOaPkOS6pA0KICAgIGFzeW5jIGNvbmZpcm1TdWJtaXQoKSB7DQogICAgICBsZXQgeyB0YXNrSWQsIGluZGV4IH0gPSB0aGlzLiRyb3V0ZS5xdWVyeQ0KDQogICAgICB0aGlzLml0ZW1EYXRhLnBhdHJvbFN0YXR1cyA9ICflt7Llt6EnDQogICAgICB0aGlzLml0ZW1EYXRhLnBhdHJvbEl0ZW1zUmVzdWx0TGlzdCA9IHRoaXMucGF0cm9sSXRlbXNSZXN1bHRMaXN0DQogICAgICB0aGlzLml0ZW1EYXRhLnBpY1VybCA9IHRoaXMuZmlsZVZhbHVlDQogICAgICB0aGlzLml0ZW1EYXRhLmNoZWNrVGltZSA9IHRoaXMuJGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tJykNCg0KICAgICAgbGV0IHBvaW50RGF0YSA9IHRoaXMuYWxsRGF0YS5wYXRyb2xQb2ludFJlc3VsdExpc3QNCiAgICAgIHBvaW50RGF0YVtpbmRleF0gPSB0aGlzLml0ZW1EYXRhDQogICAgICBsZXQgcXVlcnkgPSB7DQogICAgICAgIGlkOiB0YXNrSWQsDQogICAgICAgIHBhdHJvbFBvaW50UmVzdWx0TGlzdDogcG9pbnREYXRhLA0KICAgICAgfQ0KDQogICAgICB0cnkgew0KICAgICAgICBsZXQgc3RvcmFnZUl0ZW1EYXRhTGlzdCA9IEpTT04ucGFyc2UodGhpcy4kc3RvcmFnZS5nZXQoJ3B1bXAtc3RvcmFnZUl0ZW1EYXRhTGlzdCcpKQ0KDQogICAgICAgIHN0b3JhZ2VJdGVtRGF0YUxpc3Q/LmZvckVhY2goKGl0ZW0sIGkpID0+IHsNCiAgICAgICAgICBpdGVtLmlkID09PSB0aGlzLml0ZW1EYXRhLmlkID8gc3RvcmFnZUl0ZW1EYXRhTGlzdC5zcGxpY2UoaSwgMSkgOiBudWxsDQogICAgICAgIH0pDQoNCiAgICAgICAgdGhpcy4kc3RvcmFnZS5zZXQoJ3B1bXAtc3RvcmFnZUl0ZW1EYXRhTGlzdCcsIEpTT04uc3RyaW5naWZ5KHN0b3JhZ2VJdGVtRGF0YUxpc3QpKQ0KDQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHBhdHJvbEVkaXQocXVlcnkpDQogICAgICAgIHRoaXMuJHRvYXN0KCfmj5DkuqTmiJDlip8nKQ0KICAgICAgICB0aGlzLmdvVG9JbnNwZWN0aW9uKCkNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIHRoaXMuc2V0T2ZmTGluZVN0b3JhZ2UoKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDnprvnur/nvJPlrZgNCiAgICBzZXRPZmZMaW5lU3RvcmFnZSgpIHsNCiAgICAgIHRoaXMuaXRlbURhdGEucGF0cm9sSXRlbXNSZXN1bHRMaXN0ID0gdGhpcy5wYXRyb2xJdGVtc1Jlc3VsdExpc3QNCg0KICAgICAgbGV0IHN0b3JhZ2VJdGVtRGF0YUxpc3QgPSBKU09OLnBhcnNlKHRoaXMuJHN0b3JhZ2UuZ2V0KCdwdW1wLXN0b3JhZ2VJdGVtRGF0YUxpc3QnKSkNCiAgICAgIHN0b3JhZ2VJdGVtRGF0YUxpc3QgPyBzdG9yYWdlSXRlbURhdGFMaXN0IDogKHN0b3JhZ2VJdGVtRGF0YUxpc3QgPSBbXSkNCg0KICAgICAgaWYgKHN0b3JhZ2VJdGVtRGF0YUxpc3QubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHN0b3JhZ2VJdGVtRGF0YUxpc3QucHVzaCh0aGlzLml0ZW1EYXRhKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc3RvcmFnZUl0ZW1EYXRhTGlzdD8uZm9yRWFjaCgoaXRlbSwgaSkgPT4gew0KICAgICAgICAgIGl0ZW0uaWQgPT09IHRoaXMuaXRlbURhdGEuaWQNCiAgICAgICAgICAgID8gKHN0b3JhZ2VJdGVtRGF0YUxpc3RbaV0gPSB0aGlzLml0ZW1EYXRhKQ0KICAgICAgICAgICAgOiBzdG9yYWdlSXRlbURhdGFMaXN0LnB1c2godGhpcy5pdGVtRGF0YSkNCiAgICAgICAgfSkNCiAgICAgIH0NCg0KICAgICAgY29uc29sZS5sb2coc3RvcmFnZUl0ZW1EYXRhTGlzdCkNCg0KICAgICAgdGhpcy4kc3RvcmFnZS5zZXQoJ3B1bXAtc3RvcmFnZUl0ZW1EYXRhTGlzdCcsIEpTT04uc3RyaW5naWZ5KHN0b3JhZ2VJdGVtRGF0YUxpc3QpKQ0KDQogICAgICB0aGlzLiR0b2FzdCgn57yT5a2Y5oiQ5YqfJykNCiAgICAgIHRoaXMuZ29Ub0luc3BlY3Rpb24oKQ0KICAgIH0sDQoNCiAgICAvL+i/lOWbnuWIl+ihqOmhtQ0KICAgIGdvVG9JbnNwZWN0aW9uKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2Uoew0KICAgICAgICBwYXRoOiAnL3B1bXAvaW5zcGVjdGlvbicsDQogICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgdGFza0lkOiB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQsDQogICAgICAgICAgZmlyc3RDb25maWc6IGZhbHNlLA0KICAgICAgICB9LA0KICAgICAgfSkNCiAgICB9LA0KICB9LA0KfQ0K"},{"version":3,"sources":["InspectionItem.vue"],"names":[],"mappings":";AA0LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InspectionItem.vue","sourceRoot":"src/views/PumpStationInspection/components","sourcesContent":["<template>\r\n  <div class=\"inspection-items\">\r\n    <fm-nav-bar\r\n      :title=\"itemData && itemData.patrolPointName\"\r\n      fixed\r\n      placeholder\r\n      left-arrow\r\n      @click-left=\"goToInspection()\"\r\n    />\r\n    <div class=\"inspection-item-area\">\r\n      <div class=\"area-content\">\r\n        <div class=\"area\">\r\n          <span>所属区域：</span>\r\n          <span>{{ itemData && itemData.areaLocation }}</span>\r\n          <span style=\"margin: 0 10px\">|</span>\r\n          <span>关联设备：</span>\r\n          <span>{{ itemData && itemData.deviceName }}</span>\r\n        </div>\r\n        <img\r\n          src=\"@/assets/img/pump/inspection-amplifier.png\"\r\n          class=\"area-content-icon\"\r\n          @click=\"imgShow = true\"\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n\r\n      <fm-image width=\"100%\" height=\"100%\" :src=\"imgUrl\" />\r\n      <fm-image\r\n        class=\"mark-icon\"\r\n        :style=\"{\r\n          top: `calc(${itemData && itemData.topPixel} - 0.56rem )`,\r\n          left: `calc(${itemData && itemData.leftPixel} - 0.42667rem)`,\r\n        }\"\r\n        v-if=\"imgUrl\"\r\n        :src=\"require('@/assets/img/pump/inspection-mark-icon.png')\"\r\n      />\r\n\r\n      <fm-popup\r\n        :visible.sync=\"imgShow\"\r\n        :style=\"{ width: '100%', height: '30%', overflow: 'hidden' }\"\r\n      >\r\n        <div class=\"zoomImgBox\">\r\n          <fm-image width=\"100%\" height=\"100%\" :src=\"imgUrl\" class=\"zoomImg\" />\r\n          <fm-image\r\n            class=\"mark-icon\"\r\n            :style=\"{\r\n              top: `calc(${itemData && itemData.topPixel} - 0.56rem )`,\r\n              left: `calc(${itemData && itemData.leftPixel} - 0.42667rem)`,\r\n            }\"\r\n            v-if=\"imgUrl\"\r\n            :src=\"require('@/assets/img/pump/inspection-mark-icon.png')\"\r\n          />\r\n        </div>\r\n      </fm-popup>\r\n    </div>\r\n\r\n    <div class=\"inspection-items-content\">\r\n      <div class=\"inspection-item-upload\">\r\n        <Uploader\r\n          v-model=\"fileValue\"\r\n          class=\"img-upload\"\r\n          @fileChange=\"fileChange\"\r\n          :limit=\"6\"\r\n          :maxImagesCount=\"6\"\r\n          multiple\r\n          label=\"\"\r\n          type=\"image\"\r\n          :disabled=\"allData.patrolStatus === 3\"\r\n          :deletable=\"allData.patrolStatus !== 3\"\r\n        />\r\n      </div>\r\n\r\n      <div v-for=\"(item, index) in patrolItemsResultList\" :key=\"item.id\">\r\n        <div class=\"inspection-item\" v-if=\"item.inputType === '1'\">\r\n          <div class=\"inspection-item-input\">\r\n            <div class=\"item-content\">{{ item.patrolItemName }}</div>\r\n            <fm-switch\r\n              :disabled=\"allData.patrolStatus === 3\"\r\n              v-model=\"patrolItemsResultList[index].patrolItemValue\"\r\n              active-color=\"#40BB5A\"\r\n              inactive-color=\"#FF4D4F\"\r\n              class=\"item-switch\"\r\n              @change=\"switchChange(index)\"\r\n            />\r\n          </div>\r\n\r\n          <div\r\n            class=\"inspection-btn-row\"\r\n            v-if=\"\r\n              !patrolItemsResultList[index].patrolItemValue &&\r\n              !item.reportTime &&\r\n              allData.patrolStatus !== 3\r\n            \"\r\n          >\r\n            <fm-button type=\"danger\" class=\"inspection-btn\" @click=\"createWork(item.id, index)\"\r\n              >异常上报</fm-button\r\n            >\r\n          </div>\r\n\r\n          <div\r\n            class=\"inspection-dispaly-row\"\r\n            style=\"justify-content: flex-end\"\r\n            v-if=\"!patrolItemsResultList[index].patrolItemValue && item.reportTime\"\r\n          >\r\n            <span @click=\"workerDetails(index)\">上报时间:2021/01/23 08:00:00</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"inspection-item\" v-if=\"item.inputType === '2'\">\r\n          <div class=\"inspection-item-input\">\r\n            <span>{{ item.patrolItemName }}</span>\r\n            <fm-field\r\n              v-model=\"patrolItemsResultList[index].patrolItemValue\"\r\n              :disabled=\"!!item.reportTime || allData.patrolStatus === 3\"\r\n              placeholder=\"请输入值\"\r\n            >\r\n              <template #button>\r\n                <i\r\n                  class=\"fm-icon fm-icon-close\"\r\n                  v-if=\"allData.patrolStatus !== 3\"\r\n                  @click=\"valueChange(index)\"\r\n                ></i>\r\n              </template>\r\n            </fm-field>\r\n          </div>\r\n          <div\r\n            class=\"inspection-btn-row\"\r\n            v-if=\"\r\n              configRangeValue(\r\n                patrolItemsResultList[index].patrolItemValue,\r\n                item.upperLimitValue * 1,\r\n                item.lowerLimitValue * 1\r\n              ) &&\r\n              !item.reportTime &&\r\n              allData.patrolStatus !== 3\r\n            \"\r\n          >\r\n            <fm-button type=\"danger\" class=\"inspection-btn\" @click=\"createWork(item.id, index)\"\r\n              >异常上报</fm-button\r\n            >\r\n            <div class=\"inspection-item-input-limit\">\r\n              上下限值：{{ item.lowerLimitValue }}~{{ item.upperLimitValue }}\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            class=\"inspection-dispaly-row\"\r\n            v-if=\"\r\n              configRangeValue(\r\n                patrolItemsResultList[index].patrolItemValue,\r\n                item.upperLimitValue * 1,\r\n                item.lowerLimitValue * 1\r\n              ) && item.reportTime\r\n            \"\r\n          >\r\n            <span style=\"color: #ff4d4f\"\r\n              >上下限值：{{ item.lowerLimitValue }}~{{ item.upperLimitValue }}</span\r\n            >\r\n            <span @click=\"workerDetails(index)\">上报时间:2021/01/23 08:00:00</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <fm-dialog\r\n      :visible.sync=\"noAlarmShow\"\r\n      title=\"巡检点记录提交确认\"\r\n      show-cancel-button\r\n      @confirm=\"confirmSubmit\"\r\n    >\r\n      <div v-if=\"noAlarm() > 0\" class=\"noAlarmClass\">\r\n        <div>\r\n          该巡检点存在\r\n          <span style=\"color: #ff4d4f\">{{ noAlarm() }}</span> 条未上报异常项，请上报！\r\n        </div>\r\n      </div>\r\n      <div v-if=\"noAlarm() === 0\" class=\"noAlarmClass\">是否进行提交！</div>\r\n    </fm-dialog>\r\n\r\n    <div class=\"inspection-submit\" v-if=\"allData.patrolStatus !== 3\">\r\n      <fm-button type=\"primary\" class=\"inspection-btn\" @click=\"submit()\">完成提交</fm-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Uploader from './Uploader.vue'\r\nimport { getToken, closeTicket, patrol, patrolEdit, patrolItemsResult } from '../api'\r\nexport default {\r\n  name: 'InspectionItem',\r\n  components: { Uploader },\r\n  data() {\r\n    return {\r\n      fileValue: '',\r\n      fileList: [],\r\n      picUrl: '',\r\n      checked: false,\r\n      value: '',\r\n      imgShow: false,\r\n      noAlarmShow: false,\r\n      itemData: null,\r\n      patrolItemsResultList: [],\r\n      imgUrl: '',\r\n      allData: '',\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.getPatrol()\r\n    this.requestSingleLocation()\r\n  },\r\n  mounted() {},\r\n  beforeDestroy() {\r\n    this.stopRequestLocations()\r\n  },\r\n\r\n  methods: {\r\n    //文件大小\r\n    onOversize(file) {\r\n      console.log(file)\r\n      this.$notify({ type: 'error', message: '文件大小不能超过 6MB', duration: '1000' })\r\n    },\r\n\r\n    //范围值判断\r\n    configRangeValue(value, upperLimitValue, lowerLimitValue) {\r\n      if (!value) return\r\n      return upperLimitValue < value || lowerLimitValue > value\r\n    },\r\n\r\n    //获取用户巡检点\r\n    async getPatrol() {\r\n      let { taskId, index } = this.$route.query\r\n\r\n      let PatrolData\r\n      try {\r\n        const { data } = await patrol(taskId)\r\n        PatrolData = data\r\n      } catch (error) {\r\n        PatrolData = JSON.parse(this.$storage.get('PatrolData'))\r\n      }\r\n\r\n      this.allData = PatrolData\r\n      this.itemData = PatrolData.patrolPointResultList[index]\r\n\r\n      this.isUnsubmitted()\r\n    },\r\n\r\n    //开始巡检\r\n    requestSingleLocation() {\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.locationAMap.requestSingleLocation(\r\n          ['1'],\r\n          (res) => {\r\n            let { latitude, longitude } = res\r\n            let path = JSON.parse(JSON.stringify(this.$store.state.pump.pumpPath))\r\n            path.push({\r\n              lat: latitude,\r\n              lon: longitude,\r\n            })\r\n            this.$store.commit('setPumpPath', path)\r\n\r\n            console.log(this.$store.state.pump.pumpPath)\r\n          },\r\n          (err) => {\r\n            console.log('err=', err)\r\n          }\r\n        )\r\n      }\r\n    },\r\n\r\n    //结束巡检\r\n    stopRequestLocations() {\r\n      if (typeof yuanchu != 'undefined') {\r\n        yuanchu.locationAMap.stopRequestLocations()\r\n      }\r\n    },\r\n\r\n    //检查是否有未提交项\r\n    isUnsubmitted() {\r\n      let itemData = JSON.parse(JSON.stringify(this.itemData))\r\n      let storageItemDataList = JSON.parse(this.$storage.get('pump-storageItemDataList'))\r\n      storageItemDataList?.forEach((item, i) => {\r\n        item.id === this.itemData.id\r\n          ? (this.itemData = Object.assign(itemData, storageItemDataList[i]))\r\n          : null\r\n      })\r\n\r\n      this.workDataShow(this.allData)\r\n    },\r\n\r\n    //异常上报后回显\r\n    workDataShow(data) {\r\n      let { index } = this.$route.query\r\n      let itemData = data.patrolPointResultList[index]\r\n\r\n      itemData &&\r\n        itemData.patrolItemsResultList?.forEach((item, index) => {\r\n          console.log(item)\r\n          if (item.workOrderId) {\r\n            console.log(item.workOrderId)\r\n            this.itemData.patrolItemsResultList[index].workOrderId = item.workOrderId\r\n            this.itemData.patrolItemsResultList[index].reportTime = item.reportTime\r\n          }\r\n        })\r\n\r\n      this.getInfoData()\r\n    },\r\n\r\n    //异常返回正常,确认后清除异常上报事件\r\n    switchChange(index) {\r\n      let config =\r\n        this.patrolItemsResultList[index].patrolItemValue &&\r\n        this.patrolItemsResultList[index].workOrderId\r\n\r\n      config &&\r\n        this.$dialog\r\n          .confirm({\r\n            title: '是否取消异常上报事件',\r\n          })\r\n          .then(async () => {\r\n            let { workOrderId } = this.patrolItemsResultList[index]\r\n            await this.setCloseTicket(workOrderId)\r\n            this.workerPush(this.patrolItemsResultList[index].id, null, null, index)\r\n          })\r\n          .catch(() => {\r\n            this.patrolItemsResultList[index].patrolItemValue = false\r\n          })\r\n    },\r\n\r\n    //异常返回正常,确认后清除异常上报事件\r\n    valueChange(index) {\r\n      //如果没有工单,数据清空,然后退出\r\n      if (!this.patrolItemsResultList[index].workOrderId) {\r\n        this.patrolItemsResultList[index].patrolItemValue = ''\r\n        return\r\n      }\r\n      this.$dialog\r\n        .confirm({\r\n          title: '是否取消异常上报事件',\r\n        })\r\n        .then(async () => {\r\n          let { workOrderId } = this.patrolItemsResultList[index]\r\n          await this.setCloseTicket(workOrderId)\r\n          this.patrolItemsResultList[index].patrolItemValue = ''\r\n          this.workerPush(this.patrolItemsResultList[index].id, null, null, index)\r\n        })\r\n        .catch(() => {})\r\n    },\r\n\r\n    //清除工单\r\n    async setCloseTicket(ticketId) {\r\n      let query = {\r\n        reason: '巡检异常项恢复正常',\r\n        ticketId: ticketId,\r\n      }\r\n      const { accessToken } = await getToken(this.$storage.get('access_token'))\r\n      const res = await closeTicket(accessToken, query)\r\n    },\r\n\r\n    //获取巡检点信息\r\n    getInfoData() {\r\n      let { patrolItemsResultList, locationPlan, picUrl } = this.itemData\r\n\r\n      this.patrolItemsResultList = patrolItemsResultList.map((item) => {\r\n        if (item.inputType === '1') {\r\n          let data = item\r\n          data.patrolItemValue = data?.patrolItemValue?.toString() === 'false' ? false : true\r\n          return { ...data }\r\n        } else {\r\n          return { ...item }\r\n        }\r\n      })\r\n      this.fileValue = picUrl ? picUrl : ''\r\n      this.getImg(locationPlan?.url)\r\n    },\r\n\r\n    //获取图片\r\n    getImg(imgToken) {\r\n      this.imgUrl = imgToken ? '/api/sys-storage/download_image?f8s=' + imgToken : null\r\n    },\r\n\r\n    //上传文件更新\r\n    fileChange(item) {\r\n      this.fileList = item.fileList\r\n    },\r\n\r\n    //创建工单\r\n    async createWork(ticketId, i) {\r\n      const { accessToken } = await getToken(this.$storage.get('access_token'))\r\n      let uuid = this.getUUID()\r\n      let formValue = {\r\n        ticketId: uuid,\r\n      }\r\n\r\n      let encodeURIFormValue = encodeURIComponent(JSON.stringify(formValue))\r\n      let time = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n\r\n      let { taskId, index } = this.$route.query\r\n\r\n      this.itemData.patrolItemsResultList = this.patrolItemsResultList\r\n      this.itemData.picUrl = this.fileValue\r\n\r\n      let pointData = this.allData.patrolPointResultList\r\n      pointData[index] = this.itemData\r\n      let query = {\r\n        id: taskId,\r\n        patrolPointResultList: pointData,\r\n      }\r\n\r\n      try {\r\n        const res = await patrolEdit(query)\r\n      } catch (error) {\r\n        this.setOffLineStorage()\r\n      }\r\n\r\n      await this.workerPush(ticketId, uuid, time, i)\r\n\r\n      this.createWorkUrl = `${process.env.VUE_APP_WPG_URL}/outworkApp/#/pages/index/form?sysCode=xasw-pump&templateCode=trouble_template&token=${accessToken}&formValue=${encodeURIFormValue}`\r\n      window.location.href = this.createWorkUrl\r\n    },\r\n\r\n    //工单详情\r\n    async workerDetails(index) {\r\n      const { accessToken } = await getToken(this.$storage.get('access_token'))\r\n      let workOrderId = this.patrolItemsResultList[index].workOrderId\r\n      let workerDetailsUrl = `${process.env.VUE_APP_WPG_URL}/outworkApp/#/pages/ticket/detail/index?id=${workOrderId}&token=${accessToken}&sysCode=xasw-pump`\r\n      console.log(workerDetailsUrl)\r\n      window.location.href = workerDetailsUrl\r\n    },\r\n\r\n    // 获取UUID\r\n    getUUID(n = 32) {\r\n      var str = 'abcdefghijklmnopqrstuvwxyz0123456789' // 可以作为常量放到random外面\r\n      var result = ''\r\n      for (var i = 0; i < n; i++) {\r\n        result += str[parseInt(Math.random() * str.length)]\r\n      }\r\n      return result\r\n    },\r\n\r\n    //判断是否有未上报巡检项\r\n    noAlarm() {\r\n      let count = 0\r\n      this.patrolItemsResultList?.forEach((item) => {\r\n        let isAlarm\r\n        if (item.inputType === '2') {\r\n          isAlarm = this.configRangeValue(\r\n            item.patrolItemValue,\r\n            item.upperLimitValue * 1,\r\n            item.lowerLimitValue * 1\r\n          )\r\n        } else {\r\n          isAlarm = !item.patrolItemValue\r\n        }\r\n        isAlarm && item.workOrderId === null ? count++ : null\r\n      })\r\n      return count\r\n    },\r\n\r\n    //是否上传图片(1:是，2:否) 是必须上传一张图片\r\n    isUploadImageConfig() {\r\n      let config = false\r\n      config = this.itemData.isUploadImage && this.fileList.length === 0 ? true : false\r\n      config && this.$toast.warning('请至少上传一张图片')\r\n\r\n      return config\r\n    },\r\n\r\n    //巡检点巡检提交\r\n    async submit() {\r\n      if (this.isUploadImageConfig()) return\r\n\r\n      this.noAlarmShow = true\r\n    },\r\n\r\n    //工单上报\r\n    async workerPush(id, workOrderId, time, index) {\r\n      let query = {\r\n        id: id,\r\n        workOrderId: workOrderId,\r\n        reportTime: time,\r\n        patrolItemValue: this.patrolItemsResultList[index].patrolItemValue,\r\n      }\r\n      const res = await patrolItemsResult(query)\r\n\r\n      this.getPatrol()\r\n    },\r\n\r\n    //  确认提交\r\n    async confirmSubmit() {\r\n      let { taskId, index } = this.$route.query\r\n\r\n      this.itemData.patrolStatus = '已巡'\r\n      this.itemData.patrolItemsResultList = this.patrolItemsResultList\r\n      this.itemData.picUrl = this.fileValue\r\n      this.itemData.checkTime = this.$dayjs().format('YYYY-MM-DD HH:mm')\r\n\r\n      let pointData = this.allData.patrolPointResultList\r\n      pointData[index] = this.itemData\r\n      let query = {\r\n        id: taskId,\r\n        patrolPointResultList: pointData,\r\n      }\r\n\r\n      try {\r\n        let storageItemDataList = JSON.parse(this.$storage.get('pump-storageItemDataList'))\r\n\r\n        storageItemDataList?.forEach((item, i) => {\r\n          item.id === this.itemData.id ? storageItemDataList.splice(i, 1) : null\r\n        })\r\n\r\n        this.$storage.set('pump-storageItemDataList', JSON.stringify(storageItemDataList))\r\n\r\n        const res = await patrolEdit(query)\r\n        this.$toast('提交成功')\r\n        this.goToInspection()\r\n      } catch (error) {\r\n        this.setOffLineStorage()\r\n      }\r\n    },\r\n\r\n    // 离线缓存\r\n    setOffLineStorage() {\r\n      this.itemData.patrolItemsResultList = this.patrolItemsResultList\r\n\r\n      let storageItemDataList = JSON.parse(this.$storage.get('pump-storageItemDataList'))\r\n      storageItemDataList ? storageItemDataList : (storageItemDataList = [])\r\n\r\n      if (storageItemDataList.length === 0) {\r\n        storageItemDataList.push(this.itemData)\r\n      } else {\r\n        storageItemDataList?.forEach((item, i) => {\r\n          item.id === this.itemData.id\r\n            ? (storageItemDataList[i] = this.itemData)\r\n            : storageItemDataList.push(this.itemData)\r\n        })\r\n      }\r\n\r\n      console.log(storageItemDataList)\r\n\r\n      this.$storage.set('pump-storageItemDataList', JSON.stringify(storageItemDataList))\r\n\r\n      this.$toast('缓存成功')\r\n      this.goToInspection()\r\n    },\r\n\r\n    //返回列表页\r\n    goToInspection() {\r\n      this.$router.replace({\r\n        path: '/pump/inspection',\r\n        query: {\r\n          taskId: this.$route.query.taskId,\r\n          firstConfig: false,\r\n        },\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.inspection-items {\r\n  position: relative;\r\n  height: 100%;\r\n\r\n  background: #f5f7f9;\r\n\r\n  .inspection-item-area {\r\n    position: relative;\r\n    height: 440px;\r\n\r\n    .area-content {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      position: absolute;\r\n      bottom: 0px;\r\n      width: calc(100% - 60px);\r\n      height: 50px;\r\n      font-size: 28px;\r\n      color: #fff;\r\n      padding: 0 30px;\r\n      z-index: 1;\r\n      background-color: rgba(0, 0, 0, 0.3);\r\n\r\n      .area {\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .area-content-icon {\r\n        width: 32px;\r\n        height: 32px;\r\n      }\r\n    }\r\n\r\n    .mark-icon {\r\n      position: absolute;\r\n      width: 32px;\r\n      height: 32px;\r\n    }\r\n  }\r\n\r\n  .inspection-items-content {\r\n    height: 60%;\r\n    overflow: scroll;\r\n  }\r\n\r\n  .inspection-item-upload {\r\n    display: flex;\r\n    align-items: center;\r\n    background: #ffffff;\r\n    box-shadow: 0px 4px 16px 0px rgba(104, 115, 127, 0.06);\r\n    border-radius: 16px;\r\n    padding: 30px;\r\n    margin: 30px 30px 20px;\r\n  }\r\n\r\n  .inspection-item {\r\n    margin: 0 30px 20px;\r\n    padding: 30px;\r\n    background: #ffffff;\r\n    box-shadow: 0px 4px 16px 0px rgba(104, 115, 127, 0.06);\r\n    border-radius: 16px;\r\n    font-size: 32px;\r\n\r\n    .inspection-item-input {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n\r\n    .inspection-btn-row {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n\r\n      .inspection-item-input-limit {\r\n        color: #ff4d4f;\r\n        margin-top: 20px;\r\n      }\r\n    }\r\n\r\n    .inspection-dispaly-row {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      margin-top: 20px;\r\n      font-size: 28px;\r\n      color: #1b67d8;\r\n    }\r\n\r\n    .inspection-btn {\r\n      text-align: center;\r\n      width: 168px;\r\n      height: 64px;\r\n      border-radius: 38px;\r\n      font-size: 26px;\r\n      margin-top: 30px;\r\n    }\r\n\r\n    .item-content {\r\n      flex: 4;\r\n    }\r\n  }\r\n\r\n  .inspection-submit {\r\n    width: 100%;\r\n    height: 112px;\r\n    position: fixed;\r\n    bottom: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: #ffffff;\r\n    padding: 10px 0;\r\n\r\n    .inspection-btn {\r\n      width: calc(100% - 60px);\r\n      height: 88px;\r\n      border-radius: 44px;\r\n    }\r\n  }\r\n\r\n  .noAlarmClass {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 28px;\r\n    padding: 10px 40px;\r\n  }\r\n\r\n  .zoomImgBox {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n}\r\n</style>\r\n"]}]}