{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\DispatchCenter\\components\\SchedulingLog\\index.vue?vue&type=style&index=0&id=7f8f4360&lang=scss&scoped=true","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\DispatchCenter\\components\\SchedulingLog\\index.vue","mtime":1708928163370},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubWFpbiB7DQogICAgaGVpZ2h0OiAxMDAlOw0KfQ0KDQouc2VsZWN0U3R5bGUgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgIHdpZHRoOiA2OTBweDsNCiAgICBtYXJnaW46IDI0cHggYXV0byAxMnB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7DQp9DQoNCi5saXN0LWNvbnRhaW5lciB7DQogICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAyMDhweCk7DQogICAgb3ZlcmZsb3c6IGF1dG87DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0Y1RjdGOTsNCg0KICAgIC5pbmZvQ2FyZCB7DQogICAgICAgIC8vIHdpZHRoOiA2OTBweDsNCiAgICAgICAgLy8gaGVpZ2h0OiAxNjBweDsNCiAgICAgICAgYmFja2dyb3VuZDogI0ZGRkZGRjsNCiAgICAgICAgYm9yZGVyLXJhZGl1czogMTZweDsNCiAgICAgICAgbWFyZ2luOiAyOHB4Ow0KDQogICAgICAgIC50aXRsZSB7DQogICAgICAgICAgICBmb250LXNpemU6IDM2cHg7DQogICAgICAgICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1TZW1pYm9sZCwgUGluZ0ZhbmcgU0M7DQogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOw0KICAgICAgICAgICAgY29sb3I6ICMzMzMzMzM7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogNTBweDsNCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgLnVuZGVyIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIGp1c3RpZnktY29udGVudDogc3RhcnQ7DQogICAgICAgIGhlaWdodDogNzBweDsNCiAgICAgICAgbGluZS1oZWlnaHQ6IDcwcHg7DQogICAgICAgIGZvbnQtc2l6ZTogMjhweDsNCiAgICAgICAgZm9udC1mYW1pbHk6IFBpbmdGYW5nU0MtUmVndWxhciwgUGluZ0ZhbmcgU0M7DQogICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgICAgIGNvbG9yOiAjNTU1NTU1Ow0KICAgICAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KICAgICAgICBtYXJnaW4tbGVmdDogMjJweDsNCg0KICAgICAgICAudW5kZXItZGl2IHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjhweDsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLVJlZ3VsYXIsIFBpbmdGYW5nIFNDOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgICAgICAgIGNvbG9yOiAjNTU1NTU1Ow0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA+JA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/DispatchCenter/components/SchedulingLog","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <fm-nav-bar title=\"调度日志\" left-arrow @click-left=\"$router.go(-1)\" />\r\n        <div class=\"selectStyle\">\r\n            <Select :selectData=\"dateTypeList\" :selValue=\"dateType\" color=\"white\" @getValue=\"getValue\"></Select>\r\n            <Select :selectData=\"weatherTypeList\" :selValue=\"weatherType\" color=\"white\" @getValue=\"getValue\"></Select>\r\n        </div>\r\n        <div class=\"list-container\">\r\n            <fm-pull-refresh style=\"height: 100%;overflow: overlay;\" v-model=\"refreshing\" success-text=\"刷新成功\"\r\n                @refresh=\"onRefresh\">\r\n                <fm-list :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n                    <!-- <fm-cell v-for=\"(item, index) in logList\" :key=\"index\" :title=\"item.logName\" /> -->\r\n                    <div class=\"infoCard\" v-for=\"(item, index) in logList\" :key=\"index\">\r\n                        <img style=\"width:5px;height:30px;float: left;margin-right: 4px;margin-top: 10px;\"\r\n                            src=\"@assets/img/dispatchCenter/schedulingEvents/标题.png\" alt=\"\">\r\n                        <span class=\"title\">调度日志</span>\r\n                        <fm-button text style=\"float: right;color: #1B67D8;padding: 15px;\" @click=\"jump(item)\">查看\r\n                        </fm-button>\r\n                        <div class=\"under\">\r\n                            <div class=\"under-div\"><i class=\"fm-icon fm-icon-underway-o\"></i>\r\n                                &nbsp;{{ item.logTime }}&nbsp;</div>\r\n                            <div class=\"under-div\">&nbsp;{{ item.weather }}</div>\r\n                        </div>\r\n                    </div>\r\n                </fm-list>\r\n            </fm-pull-refresh>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as api from './api'\r\n// 下拉选择框\r\nimport Select from './Select.vue'\r\nexport default {\r\n    name: \"SchedulingLog\",\r\n    components: { Select },\r\n    data() {\r\n        return {\r\n            // 筛选\r\n            dateTypeList: [\r\n                { type: 1, name: '全部时间', value: '全部时间' },\r\n                { type: 1, name: '近一周', value: '近一周' },\r\n                { type: 1, name: '近一月', value: '近一月' },\r\n                { type: 1, name: '近三月', value: '近三月' },\r\n            ],\r\n            weatherTypeList: [\r\n                { type: 2, name: '全部类型', value: '全部类型' },\r\n                { type: 2, name: '多云', value: '多云' },\r\n                { type: 2, name: '雨', value: '雨' },\r\n                { type: 2, name: '雪', value: '雪' },\r\n                { type: 2, name: '晴', value: '晴' }\r\n            ],\r\n            dateType: '全部时间',\r\n            startDate: \"\",\r\n            endDate: \"\",\r\n            weatherType: '全部类型',\r\n            logList: [],\r\n            loading: false,\r\n            finished: false,\r\n            refreshing: false,\r\n            pageNum: 1,\r\n            pageSize: 10,\r\n        }\r\n    },\r\n    watch: {\r\n        dateType: {\r\n            handler(val) {\r\n                this.changeDateweather(val)\r\n                this.getList()\r\n            },\r\n        },\r\n        weatherType: {\r\n            handler(val) {\r\n                this.changeDateweather(val)\r\n                this.getList()\r\n            },\r\n        },\r\n    },\r\n    mounted() {\r\n        this.getList()\r\n    },\r\n    methods: {\r\n        // select框选择回调\r\n        getValue(type, name, value) {\r\n            if (type === 1) {\r\n                this.dateType = value\r\n            } else if (type === 2) {\r\n                this.weatherType = value\r\n            }\r\n        },\r\n        // 页面加载/下拉刷新\r\n        onRefresh() {\r\n            // this.pageReset()\r\n            this.loading = false\r\n            this.finished = false\r\n            this.getList()\r\n        },\r\n        // // 列表加载更多\r\n        onLoad() {\r\n            this.pageNum = this.pageNum + 1\r\n            this.getList()\r\n        },\r\n        // // 重置列表page,list值\r\n        // pageReset() {\r\n        //     this.pageNum = 1\r\n        //     this.logList = []\r\n        // },\r\n        // 获取列表数据\r\n        changeDateweather() {\r\n            let startTime = ''\r\n            switch (this.dateType) {\r\n                case '近一周':\r\n                    startTime = this.$dayjs().subtract(7, 'day').format('YYYY-MM-DD HH:mm:ss')\r\n                    break;\r\n                case '近一月':\r\n                    startTime = this.$dayjs().subtract(1, 'month').format('YYYY-MM-DD HH:mm:ss')\r\n                    break;\r\n                case '近三月':\r\n                    startTime = this.$dayjs().subtract(3, 'month').format('YYYY-MM-DD HH:mm:ss')\r\n                    break\r\n                default:\r\n                    startTime = ''\r\n                    break\r\n            }\r\n            this.startDate = startTime\r\n            this.endDate = this.$dayjs().format('YYYY-MM-DD HH:mm:ss')\r\n        },\r\n        getList() {\r\n            let params = {\r\n                page: 1,\r\n                size: 20,\r\n            }\r\n            this.dateType != '全部时间' ? params.startTime1 = this.startDate : ''\r\n            this.dateType != '全部时间' ? params.endTime1 = this.endDate : ''\r\n            this.weatherType != '全部类型' ? params.weather = this.weatherType : ''\r\n            console.log('params: ', params);\r\n            api.getTableData(params).then(res => {\r\n                console.log('res: ', res);\r\n                if (res.status) {\r\n                    this.logList = res.data.records\r\n                    this.refreshing = false\r\n                    this.loading = false\r\n                    this.finished = true\r\n                }\r\n            })\r\n        },\r\n        jump(item) {\r\n            this.$router.push({\r\n                name: \"detailLog\",\r\n                query: { item }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main {\r\n    height: 100%;\r\n}\r\n\r\n.selectStyle {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    width: 690px;\r\n    margin: 24px auto 12px;\r\n    background-color: #ffffff;\r\n}\r\n\r\n.list-container {\r\n    height: calc(100% - 208px);\r\n    overflow: auto;\r\n    background-color: #F5F7F9;\r\n\r\n    .infoCard {\r\n        // width: 690px;\r\n        // height: 160px;\r\n        background: #FFFFFF;\r\n        border-radius: 16px;\r\n        margin: 28px;\r\n\r\n        .title {\r\n            font-size: 36px;\r\n            font-family: PingFangSC-Semibold, PingFang SC;\r\n            font-weight: 600;\r\n            color: #333333;\r\n            line-height: 50px;\r\n            margin-left: 12px;\r\n        }\r\n    }\r\n\r\n    .under {\r\n        width: 100%;\r\n        display: flex;\r\n        justify-content: start;\r\n        height: 70px;\r\n        line-height: 70px;\r\n        font-size: 28px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #555555;\r\n        margin-top: 10px;\r\n        margin-left: 22px;\r\n\r\n        .under-div {\r\n            font-size: 28px;\r\n            font-family: PingFangSC-Regular, PingFang SC;\r\n            font-weight: 400;\r\n            color: #555555;\r\n            line-height: 40px;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}