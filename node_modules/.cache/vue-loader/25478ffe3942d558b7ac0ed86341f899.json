{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\BZList\\warning\\index.vue?vue&type=style&index=0&id=12dd0780&lang=less&scoped=true","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\BZList\\warning\\index.vue","mtime":1705912915786},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubWFpbiB7DQoJYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjdmOSAhaW1wb3J0YW50Ow0KCXdpZHRoOiAxMDAlOw0KCWhlaWdodDogMTAwJTsNCn0NCg0KLnRpcCB7DQoJbWFyZ2luLWxlZnQ6IDM1cHg7DQoJZm9udC1zaXplOiAyOHB4Ow0KCWNvbG9yOiAjMmQ3ZWZmOw0KCW1hcmdpbi10b3A6IDUwcHg7DQp9DQoNCi53YXJuaW5nIHsNCglmb250LXNpemU6IDI4cHg7DQoJdGV4dC1hbGlnbjogY2VudGVyOw0KCWNvbG9yOiByZWQ7DQoJbWFyZ2luLXRvcDogNTBweDsNCn0NCg0KLnN1YnRpdGxlIHsNCglmb250LXNpemU6IDMwcHg7DQoJZm9udC13ZWlnaHQ6IDYwMDsNCgljb2xvcjogIzU1NTU1NTsNCgltYXJnaW4tbGVmdDogMTBweDsNCn0NCg0KLnd3dyB7DQoJei1pbmRleDogOTk5OTsNCn0NCg0KLmltZ1BpY2tlciB7DQoJd2lkdGg6IDkwJTsNCglwYWRkaW5nOiAxMHB4Ow0KCWJhY2tncm91bmQtY29sb3I6IHdoaXRlOw0KCWJvcmRlci1yYWRpdXM6IDE1cHg7DQoJbWFyZ2luLXRvcDogMzBweDsNCgltYXJnaW4tbGVmdDogMTBweDsNCgltYXJnaW4tcmlnaHQ6IDEwcHg7DQoJcGFkZGluZy10b3A6IDIwcHg7DQoJcGFkZGluZy1ib3R0b206IDEwcHg7DQp9DQoubGlzdHsNCglwYWRkaW5nOiBhdXRvOw0KCW92ZXJmbG93LXk6IHNjcm9sbDsNCglvdmVyZmxvdy14OiBoaWRkZW47DQoJaGVpZ2h0OiA4MCU7DQp9DQouY2FyZCB7DQoJd2lkdGg6IDkwJTsNCglwYWRkaW5nOiAxMHB4Ow0KCWJhY2tncm91bmQtY29sb3I6IHdoaXRlOw0KCWJvcmRlci1yYWRpdXM6IDE1cHg7DQoJbWFyZ2luLWxlZnQ6IDEwcHg7DQoJbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KCW1hcmdpbi1ib3R0b206IDIwcHg7DQoJcGFkZGluZy1ib3R0b206IDIwcHg7DQoJcGFkZGluZy10b3A6IDIwcHg7DQp9DQoNCi5jb250ZW50IHsNCgl3aWR0aDogMTAwJTsNCgltYXJnaW46IDEwcHg7DQp9DQoNCi50aXRsZSB7DQoJbWFyZ2luOiAxNXB4Ow0KCWZvbnQtc2l6ZTogMzJweDsNCglmb250LXdlaWdodDogNjAwOw0KCWNvbG9yOiAjMzMzMzMzOw0KfQ0KDQouYnV0dG9uIHsNCglib3JkZXItcmFkaXVzOiA1MHB4Ow0KCXdpZHRoOiAyNjBweDsNCgloZWlnaHQ6IDc1cHg7DQoJbWFyZ2luLXRvcDogMzBweDsNCgltYXJnaW4tcmlnaHQ6IDEwcHggOw0KfQ0KDQouYm90dG9tIHsNCgl3aWR0aDogNDklOw0KCWRpc3BsYXk6IGZsZXg7DQoJZmxleC1kaXJlY3Rpb246IHJvdzsNCglwYWRkaW5nOiAyMHB4Ow0KCW1hcmdpbi1ib3R0b206IDIwcHg7DQp9DQoNCi5pbmZvIHsNCgljb2xvcjogIzMzMzMzMzsNCglmb250LXNpemU6IDI5cHg7DQoJbWFyZ2luLWxlZnQ6IDQwcHg7DQoJbWFyZ2luLXRvcDogMTBweDsNCn0NCg0KLnBvcEJ1dHRvbiB7DQoJd2lkdGg6IDMwMHB4Ow0KCWhlaWdodDogMjAwcHg7DQp9DQoNCi5yb3cgew0KCWRpc3BsYXk6IGZsZXg7DQoJZmxleC1kaXJlY3Rpb246IHJvdzsNCglhbGlnbi1pdGVtczogY2VudGVyOw0KfQ0KLmNlbnRlcnsNCglkaXNwbGF5OiBmbGV4Ow0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWFsaWduLWl0ZW1zOiBjZW50ZXI7DQp9DQouY2FyZFRleHQgew0KCWZvbnQtc2l6ZTogMjlweDsNCgljb2xvcjogIzU1NTU1NTsNCgltYXJnaW4tbGVmdDogMTBweDsNCgltYXJnaW4tcmlnaHQ6IDEwcHg7DQp9DQoNCi5pY29uQmx1ZSB7DQoJZGlzcGxheTogZmxleDsNCgltYXJnaW4tcmlnaHQ6IDEwcHg7DQoJd2lkdGg6IDEycHg7DQoJaGVpZ2h0OiAxMnB4Ow0KCWJvcmRlci1yYWRpdXM6IDEwMHB4Ow0KCWJhY2tncm91bmQtY29sb3I6ICMyZDdlZmY7DQp9DQoNCi5pY29uUmVkIHsNCglkaXNwbGF5OiBmbGV4Ow0KCW1hcmdpbi1yaWdodDogMTBweDsNCgl3aWR0aDogMTJweDsNCgloZWlnaHQ6IDEycHg7DQoJYm9yZGVyLXJhZGl1czogMTAwcHg7DQoJYmFja2dyb3VuZC1jb2xvcjogcmVkOw0KfQ0KDQovZGVlcC8uZm0tbmF2LWJhcl9fY29udGVudCB7DQoJYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA4gBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/BZList/warning","sourcesContent":["<template>\r\n\t<div class=\"main\">\r\n\t\t<fm-nav-bar title=\"报警处理\" left-arrow @click-left=\"$router.replace('/BZList')\">\r\n\t\t</fm-nav-bar>\r\n\t\t<!-- 底部按钮-->\r\n\t\t<fm-tabbar v-model=\"actives\" style=\"height: 100px\" :fixed=\"true\">\r\n\t\t\t<div class=\"bottom\">\r\n\t\t\t\t<fm-button type=\"primary\" size=\"large\" plain style=\"border-radius: 40px\"\r\n\t\t\t\t\t@click=\"$router.replace('/BZList')\">取消</fm-button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"bottom\">\r\n\t\t\t\t<fm-button type=\"primary\" size=\"large\" style=\"border-radius: 40px\" is-link @click=\"formCheck\">提交\r\n\t\t\t\t</fm-button>\r\n\t\t\t</div>\r\n\t\t</fm-tabbar>\r\n\t\t<div class=\"list\">\r\n\t\t\t<div class=\"content\">\r\n\t\t\t\t<div class=\"title\">报警内容</div>\r\n\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t<fm-cell-group inset>\r\n\t\t\t\t\t\t<fm-cell>\r\n\t\t\t\t\t\t\t<template #title>\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"iconBlue\"></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"cardText\">报警位置</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"info\">{{ loc }}</div>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</fm-cell>\r\n\t\t\t\t\t\t<fm-cell>\r\n\t\t\t\t\t\t\t<template #title>\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"iconBlue\"></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"cardText\">报警描述</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"info\">{{ des }}</div>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</fm-cell>\r\n\t\t\t\t\t\t<fm-cell>\r\n\t\t\t\t\t\t\t<template #title>\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"iconBlue\"></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"cardText\">报警起止时间</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"info\">{{ beginTime }}{{ endTime }}</div>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</fm-cell>\r\n\t\t\t\t\t</fm-cell-group>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"title\">报警处理</div>\r\n\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t<div class=\"subtitle\">处理方式</div>\r\n\t\t\t\t\t\t<fm-grid :column-num=\"2\" :center=\"true\" :gutter=\"15\">\r\n\t\t\t\t\t\t\t<div class=\"row\" v-for=\"(item, index) in selection\" :key=\"index\" :title=\"index\">\r\n\t\t\t\t\t\t\t\t<fm-button v-if=\"active == index\" class=\"button\" plain color=\"#2D7EFF\"\r\n\t\t\t\t\t\t\t\t\t@click=\"onclick(index, item.value)\">\r\n\t\t\t\t\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t\t\t\t\t</fm-button>\r\n\t\t\t\t\t\t\t\t<fm-button v-else class=\"button\" color=\"#68737F\" plain @click=\"onclick(index, item)\">\r\n\t\t\t\t\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t\t\t\t\t</fm-button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</fm-grid>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 直接处理 -->\r\n\t\t\t\t<div v-if=\"active == 0\">\r\n\t\t\t\t\t<div class=\"title\">处理后照片</div>\r\n\t\t\t\t\t<div class=\"imgPicker\"> \r\n\t\t\t\t\t\t<fm-uploader v-model=\"fileList\" :preview-full-image=\"false\" :after-read=\"afterRead\"\r\n\t\t\t\t\t\t\t:before-delete=\"beforeDelete\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"title\">报警处理</div>\r\n\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t<fm-field v-model=\"inputedDeal\" rows=\"4\" autosize type=\"textarea\" maxlength=\"50\"\r\n\t\t\t\t\t\t\tplaceholder=\"请输入备注信息\" show-word-limit />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 转为维修工单 -->\r\n\t\t\t\t<div v-if=\"active == 1\" class=\"card\">\r\n\t\t\t\t\t<fm-popup class=\"www\" :visible.sync=\"nameShow\" position=\"bottom\" :style=\"{ height: '50%' }\">\r\n\t\t\t\t\t\t<fm-cascader v-model=\"cascaderValue\" title=\"处理人员\" :options=\"personList\"\r\n\t\t\t\t\t\t\t@close=\"nameShow = false\" @finish=\"onFinish\" @change=\"onNameChange\" />\r\n\t\t\t\t\t</fm-popup>\r\n\r\n\t\t\t\t\t<fm-cell-group style=\"width: 87%\" inset>\r\n\t\t\t\t\t\t<fm-cell>\r\n\t\t\t\t\t\t\t<template #title>\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"iconBlue\"></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"cardText\" @click=\"showNamePopup\">处理人员:</div>\r\n\t\t\t\t\t\t\t\t\t<div style=\"color: red\">*</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"info\" @click=\"showNamePopup\">\r\n\t\t\t\t\t\t\t\t\t{{ filedValue == '' ? '请选处理人' : filedValue }}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</fm-cell>\r\n\t\t\t\t\t\t<fm-cell>\r\n\t\t\t\t\t\t\t<template #title>\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"iconBlue\"></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"cardText\">计划开始时间</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"info\" @click=\"startDataShowPopup()\">\r\n\t\t\t\t\t\t\t\t\t{{ startDate == '' ? '请选择时间' : startDate }}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<fm-popup class=\"www\" :visible.sync=\"startDataShow\" position=\"bottom\"\r\n\t\t\t\t\t\t\t\t\t:style=\"{ height: '40%' }\">\r\n\t\t\t\t\t\t\t\t\t<fm-datetime-picker v-model=\"startDate\" type=\"datetime\" title=\"选择年月日\"\r\n\t\t\t\t\t\t\t\t\t\t:formatter=\"formatter\" :min-date=\"minDate\" @confirm=\"onStartDataConfirm\"\r\n\t\t\t\t\t\t\t\t\t\t@cancel=\"onDataCancel\" :max-date=\"maxDate\" />\r\n\t\t\t\t\t\t\t\t</fm-popup>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</fm-cell>\r\n\t\t\t\t\t\t<fm-cell>\r\n\t\t\t\t\t\t\t<template #title>\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"iconBlue\"></div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"cardText\">计划结束时间</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"info\" @click=\"endDataShowPopup()\">\r\n\t\t\t\t\t\t\t\t\t{{ endDate == '' ? '请选择时间' : endDate }}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<fm-popup class=\"www\" :visible.sync=\"endDataShow\" position=\"bottom\"\r\n\t\t\t\t\t\t\t\t\t:style=\"{ height: '40%' }\">\r\n\t\t\t\t\t\t\t\t\t<fm-datetime-picker v-model=\"endDate\" type=\"datetime\" title=\"选择年月日\"\r\n\t\t\t\t\t\t\t\t\t\t:formatter=\"formatter\" :min-date=\"minDate\" @confirm=\"onEndDataConfirm\"\r\n\t\t\t\t\t\t\t\t\t\t@cancel=\"onDataCancel\" :max-date=\"maxDate\" />\r\n\t\t\t\t\t\t\t\t</fm-popup>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</fm-cell>\r\n\t\t\t\t\t</fm-cell-group>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 转为调度工单 -->\r\n\t\t\t\t<div v-if=\"active == 2\" class=\"card\">\r\n\t\t\t\t\t<div class=\"title\">报警处理</div>\r\n\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t<fm-field v-model=\"inputedTrans\" rows=\"4\" autosize type=\"textarea\" maxlength=\"50\"\r\n\t\t\t\t\t\t\tplaceholder=\"请输入备注信息\" show-word-limit />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"tip\">注：将该报警事件转交调度管理系统处理！</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 关闭报警 -->\r\n\t\t\t\t<div v-if=\"active == 3\">\r\n\t\t\t\t\t<div class=\"warning\">该报警事件鉴定为系统误报！</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport {\r\n\tDialog,\r\n\tToast,\r\n} from 'fawkes-mobile-lib'\r\nimport request from '@/utils/request'\r\nimport { pick } from 'lodash'\r\nimport storage from '@/utils/storage'\r\nexport default {\r\n\tcomponents: {\r\n\t\trequest,\r\n\t\t[Dialog.name]: Dialog,\r\n\t\t[Toast.name]: Toast,\r\n\t},\r\n\tmounted() {\r\n\t\tthis.loc = this.$route.query.loc\r\n\t\tthis.des = this.$route.query.des\r\n\t\tthis.beginTime = this.$route.query.beginTime\r\n\t\tthis.endTime = this.$route.query.endTime\r\n\t\tthis.tappedObjects = this.$route.query.tappedObjects\r\n\t\tthis.liveData = this.$route.query.liveData\r\n\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tselectIndexList: [],\r\n\t\t\t//页面传参\r\n\t\t\tloc: '',\r\n\t\t\tdes: '',\r\n\t\t\tbeginTime: '',\r\n\t\t\tendTime: '',\r\n\t\t\ttappedObjects: {},\r\n\t\t\tliveData: {},\r\n\t\t\t//组件控制\r\n\t\t\tactive: 0,\r\n\t\t\tactives: 0,\r\n\t\t\tcascaderValue: '',\r\n\t\t\toptions: [],\r\n\t\t\tnameShow: false,\r\n\t\t\tnameColumns: [],\r\n\t\t\tpersonList: [],\r\n\t\t\tstartDataShow: false,\r\n\t\t\tendDataShow: false,\r\n\t\t\tselection: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '直接处理',\r\n\t\t\t\t\tvalue: '直接处理',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '转为维修工单',\r\n\t\t\t\t\tvalue: '转为维修工单',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '转为调度工单',\r\n\t\t\t\t\tvalue: '转为调度工单',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '关闭报警',\r\n\t\t\t\t\tvalue: '关闭报警',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tfiledValue: '',\r\n\t\t\tpersons: [],\r\n\t\t\tfileList: [],\r\n\t\t\tminDate: new Date(2020, 0, 1),\r\n\t\t\tmaxDate: new Date(2025, 10, 1),\r\n\t\t\tfileUpLoaded: 'uploading',\r\n\t\t\t//表单数据\r\n\t\t\thandler: '',\r\n\t\t\tid: '',\r\n\t\t\tselectedName: '',\r\n\t\t\tstartDate: '',\r\n\t\t\tendDate: '',\r\n\t\t\tinputedDeal: '',\r\n\t\t\tinputedTrans: '',\r\n\t\t\tfile: [],\r\n\t\t\tfileSize: 0,\r\n\t\t\turl: '',\r\n\t\t\tuid: '',\r\n\t\t\tfileData: [],\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t//获取部门数据\r\n\t\tgetPerson() {\r\n\t\t\trequest({\r\n\t\t\t\turl: '/sys-user/orgs/tree',\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tportalId: '1302785644422082562',\r\n\t\t\t\t\tisAll: false,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tthis.reDealData(res.data, this.personList)\r\n\t\t\t\t\tconsole.log(this.personList)\r\n\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => { })\r\n\t\t},\r\n\t\t//获取人员数据\r\n\t\tgetList(picker) {\r\n\t\t\trequest({\r\n\t\t\t\turl: '/sys-user/users/page',\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\torgNo: picker.value,\r\n\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\tpageNo: 1,\r\n\t\t\t\t\taccountStatus: 1,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tres.data.list.forEach((item) => {\r\n\t\t\t\t\t\tthis.persons.push({\r\n\t\t\t\t\t\t\ttext: item.userFullname,\r\n\t\t\t\t\t\t\tvalue: item.id,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tthis.dealPersonData(picker, this.persons)\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => { })\r\n\t\t},\r\n\t\t//处理公司列表数据\r\n\t\treDealData(data, result) {\r\n\t\t\tdata.forEach((element, index) => {\r\n\t\t\t\tif (element.hasOwnProperty('children')) {\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\ttext: element.content.name,\r\n\t\t\t\t\t\tvalue: element.content.orgNo,\r\n\t\t\t\t\t\tchildren: [],\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.reDealData(element.children, result[index].children)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\ttext: element.content.name,\r\n\t\t\t\t\t\tvalue: element.content.orgNo,\r\n\t\t\t\t\t\tchildren: [],\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t//处理人员数据 暂时硬编码 后续可优化\r\n\t\tdealPersonData(picker, personsList) {\r\n\t\t\tlet pickerList = []\r\n\t\t\tpicker?.selectedOptions?.forEach((item) => {\r\n\t\t\t\tpickerList.push(item.text)\r\n\t\t\t})\r\n\t\t\tthis.personList.forEach((oneItem, oneIndex) => {\r\n\t\t\t\tif (oneItem.text === pickerList[0]) {\r\n\t\t\t\t\toneItem.children.forEach((twoItem, twoIndex) => {\r\n\t\t\t\t\t\tif (twoItem.text === pickerList[1]) {\r\n\t\t\t\t\t\t\ttwoItem.children.forEach((threeItem, threeIndex) => {\r\n\t\t\t\t\t\t\t\tif (threeItem.text === pickerList[2]) {\r\n\t\t\t\t\t\t\t\t\tthis.personList[oneIndex].children[twoIndex].children[threeIndex].children =\r\n\t\t\t\t\t\t\t\t\t\tpersonsList\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconsole.log(this.personList);\r\n\r\n\t\t},\r\n\t\tformatter(type, val) {\r\n\t\t\tif (type === 'year') {\r\n\t\t\t\treturn `${val}年`\r\n\t\t\t} else if (type === 'month') {\r\n\t\t\t\treturn `${val}月`\r\n\t\t\t} else if (type === 'day') {\r\n\t\t\t\treturn `${val}日`\r\n\t\t\t} else if (type === 'hour') {\r\n\t\t\t\treturn `${val}时`\r\n\t\t\t} else if (type === 'minute') {\r\n\t\t\t\treturn `${val}分`\r\n\t\t\t}\r\n\t\t\treturn val\r\n\t\t},\r\n\t\t//文件上传\r\n\t\tuploadFile(file) {\r\n\t\t\tconst data = new FormData()\r\n\t\t\tdata.append('file', file)\r\n\t\t\trequest({\r\n\t\t\t\turl: '/sys-storage/upload',\r\n\t\t\t\tmethod: 'post',\r\n\t\t\t\tdata: data,\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tthis.fileData = res.data\r\n\t\t\t\tif (!res.status) {\r\n\t\t\t\t\tthis.fileUpLoaded = 'failed'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.fileUpLoaded = 'done'\r\n\t\t\t\t}\r\n\t\t\t}).finally(() => {\r\n\t\t\t\tfile.status = this.fileUpLoaded;\r\n\t\t\t\tthis.fileUpLoaded == 'done' ?\r\n\t\t\t\t\tfile.message = '上传成功' :\r\n\t\t\t\t\tthis.fileUpLoaded == 'failed' ?\r\n\t\t\t\t\t\tfile.message = '上传失败' :\r\n\t\t\t\t\t\tfile.message = '上传中...';\r\n\t\t\t})\r\n\t\t},\r\n\t\t//表单上传\r\n\t\tupload() {\r\n\t\t\trequest({\r\n\t\t\t\turl: '/xasw-pump/pump/alarm-record/handle',\r\n\t\t\t\tmethod: 'put',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\t\"alarmRecord\": {\r\n\t\t\t\t\t\t\"beginTime\": this.liveData.alarmRecord.beginTime,\r\n\t\t\t\t\t\t\"deviceName\": this.liveData.alarmRecord.deviceName,\r\n\t\t\t\t\t\t\"duration\": this.liveData.alarmRecord.duration,\r\n\t\t\t\t\t\t\"endTime\": this.liveData.alarmRecord.endTime,\r\n\t\t\t\t\t\t\"equipmentId\": this.liveData.alarmRecord.equipmentId,\r\n\t\t\t\t\t\t\"event\": this.liveData.alarmRecord.event,\r\n\t\t\t\t\t\t\"id\": this.liveData.alarmRecord.id,\r\n\t\t\t\t\t\t\"level\": this.liveData.alarmRecord.level,\r\n\t\t\t\t\t\t\"msgNo\": this.liveData.alarmRecord.msgNo,\r\n\t\t\t\t\t\t\"portalId\": this.liveData.alarmRecord.portalId,\r\n\t\t\t\t\t\t\"pumpId\": this.liveData.alarmRecord.pumpId,\r\n\t\t\t\t\t\t\"pumpName\": this.liveData.alarmRecord.pumpName,\r\n\t\t\t\t\t\t\"state\": this.liveData.alarmRecord.state,\r\n\t\t\t\t\t\t\"tenantId\": this.liveData.alarmRecord.tenantId,\r\n\t\t\t\t\t\t\"type\": this.liveData.alarmRecord.type,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"beginTime\":\r\n\t\t\t\t\t\tthis.active == 1 ?\r\n\t\t\t\t\t\t\tthis.startDate :\r\n\t\t\t\t\t\t\t'',\r\n\t\t\t\t\t\"dealImgDTOList\":\r\n\t\t\t\t\t\tthis.active == 0 ?\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"fileId\": this.fileData.fileToken,\r\n\t\t\t\t\t\t\t\t\t\"fileSize\": this.fileData.size,\r\n\t\t\t\t\t\t\t\t\t\"fileType\": this.fileData.extName,\r\n\t\t\t\t\t\t\t\t\t\"fileUrl\": '172.20.79.61/' + this.fileData.objectName,\r\n\t\t\t\t\t\t\t\t\t\"name\": this.fileData.fileName,\r\n\t\t\t\t\t\t\t\t\t\"uid\": \"\",\r\n\t\t\t\t\t\t\t\t\t\"url\": \"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t] : null,\r\n\t\t\t\t\t\"describe\": this.liveData.alarmRecord.event,\r\n\t\t\t\t\t\"endTime\":\r\n\t\t\t\t\t\tthis.active == 1 ?\r\n\t\t\t\t\t\t\tthis.endDate :\r\n\t\t\t\t\t\t\t'',\r\n\t\t\t\t\t\"handleDescribe\": this.active == 0 ? this.inputedDeal : this.inputedTrans,\r\n\t\t\t\t\t\"handler\":\r\n\t\t\t\t\t\tthis.active == 1 ?\r\n\t\t\t\t\t\t\tthis.handler : null,\r\n\t\t\t\t\t\"method\":\r\n\t\t\t\t\t\tthis.active == 0 ?\r\n\t\t\t\t\t\t\t'2' :\r\n\t\t\t\t\t\t\tthis.active == 1 ?\r\n\t\t\t\t\t\t\t\t'3' :\r\n\t\t\t\t\t\t\t\tthis.active == 2 ?\r\n\t\t\t\t\t\t\t\t\t'4' :\r\n\t\t\t\t\t\t\t\t\t'5'\r\n\t\t\t\t\t,\r\n\t\t\t\t\t\"pumpId\": this.tappedObjects.id,\r\n\t\t\t\t\t\"userId\": storage.get('userId'),\r\n\t\t\t\t\t\"id\":this.liveData.alarmRecord.id\r\n\t\t\t\t}\r\n\t\t\t}).then((res) => {\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tif (res.status) {\r\n\t\t\t\t\tToast.clear()\r\n\t\t\t\t\tToast.info('上传成功')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tToast.error('上传失败');\r\n\t\t\t\t}\r\n\t\t\t}).finally(()=>{\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.$router.replace('/BZList')\r\n\t\t\t\t},1000)\r\n\t\t\t})\r\n\t\t},\r\n\t\t//切换工单\r\n\t\tonclick(index) {\r\n\t\t\tthis.active = index\r\n\t\t\tthis.file = []\r\n\t\t},\r\n\t\t//文件上传回调\r\n\t\tafterRead(file) {\r\n\t\t\tconsole.log(file)\r\n\t\t\tthis.fileUpLoaded = 'uploading'\r\n\t\t\tthis.uploadFile(file.file)\r\n\t\t\t// 此时可以自行将文件上传至服务器\r\n\t\t},\r\n\t\t//文件删除回调\r\n\t\tbeforeDelete(file) {\r\n\t\t\tthis.fileList.pop(file)\r\n\t\t},\r\n\t\t//人员选择完成回调\r\n\t\tonFinish({ selectedOptions }) {\r\n\t\t\tthis.nameShow = !this.nameShow\r\n\t\t\tthis.filedValue = selectedOptions.map((option) => {\r\n\t\t\t\tthis.handler = option.text\r\n\t\t\t\tthis.id = option.value\r\n\t\t\t\treturn option.text\r\n\t\t\t}).join('/')\r\n\t\t},\r\n\t\t//人员选择回调\r\n\t\tasync onNameChange(picker) {\r\n\t\t\tconsole.log(picker)\r\n\t\t\tif (picker.tabIndex !== 2) return\r\n\t\t\tawait this.getList(picker)\r\n\t\t},\r\n\t\tformCheck() {\r\n\t\t\tif (this.active == 0) {\r\n\t\t\t\tthis.fileList.length == 0 ?\r\n\t\t\t\t\tToast.warning('未选择图片') :\r\n\t\t\t\t\tthis.onSubmitShow()\r\n\t\t\t} else if (this.active == 1) {\r\n\t\t\t\tthis.handler == '' ?\r\n\t\t\t\t\tToast.warning('未选择处理人员') :\r\n\t\t\t\t\tthis.onSubmitShow()\r\n\t\t\t} else {\r\n\t\t\t\tthis.onSubmitShow()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonNameCancel() {\r\n\t\t\tthis.nameShow = !this.nameShow\r\n\t\t},\r\n\t\tshowNamePopup() {\r\n\t\t\tthis.personList = []\r\n\t\t\tthis.getPerson()\r\n\t\t\tthis.nameShow = !this.nameShow\r\n\t\t},\r\n\t\t//确认上传\r\n\t\tonSubmitShow() {\r\n\t\t\tDialog.confirm({\r\n\t\t\t\ttitle: this.active != '3' ? '确认上传' : '确认关闭',\r\n\t\t\t\tmessage: this.active != '3' ? '您确定要上传该报警信息吗' : '您确定要将本次报警上传为误报吗',\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tToast.loading({\r\n\t\t\t\t\t\tmessage: '加载中...',\r\n\t\t\t\t\t\tforbidClick: true,\r\n\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.upload()\r\n\t\t\t\t\t// on confirm\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\t// on cancel\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tstartDataShowPopup() {\r\n\t\t\tthis.startDataShow = !this.startDataShow\r\n\t\t},\r\n\t\tendDataShowPopup() {\r\n\t\t\tthis.endDataShow = !this.endDataShow\r\n\t\t},\r\n\t\tonDataCancel() {\r\n\t\t\tthis.startDataShow = false\r\n\t\t\tthis.endDataShow = false\r\n\t\t},\r\n\t\tonStartDataConfirm() {\r\n\t\t\tthis.startDate = this.$dayjs(this.startDate).format('YYYY-MM-DD HH:mm:ss')\r\n\t\t\tthis.startDataShow = !this.startDataShow\r\n\t\t},\r\n\t\tonEndDataConfirm() {\r\n\t\t\tthis.endDate = this.$dayjs(this.endDate).format('YYYY-MM-DD HH:mm:ss')\r\n\t\t\tthis.endDataShow = !this.endDataShow\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.main {\r\n\tbackground-color: #f5f7f9 !important;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n\r\n.tip {\r\n\tmargin-left: 35px;\r\n\tfont-size: 28px;\r\n\tcolor: #2d7eff;\r\n\tmargin-top: 50px;\r\n}\r\n\r\n.warning {\r\n\tfont-size: 28px;\r\n\ttext-align: center;\r\n\tcolor: red;\r\n\tmargin-top: 50px;\r\n}\r\n\r\n.subtitle {\r\n\tfont-size: 30px;\r\n\tfont-weight: 600;\r\n\tcolor: #555555;\r\n\tmargin-left: 10px;\r\n}\r\n\r\n.www {\r\n\tz-index: 9999;\r\n}\r\n\r\n.imgPicker {\r\n\twidth: 90%;\r\n\tpadding: 10px;\r\n\tbackground-color: white;\r\n\tborder-radius: 15px;\r\n\tmargin-top: 30px;\r\n\tmargin-left: 10px;\r\n\tmargin-right: 10px;\r\n\tpadding-top: 20px;\r\n\tpadding-bottom: 10px;\r\n}\r\n.list{\r\n\tpadding: auto;\r\n\toverflow-y: scroll;\r\n\toverflow-x: hidden;\r\n\theight: 80%;\r\n}\r\n.card {\r\n\twidth: 90%;\r\n\tpadding: 10px;\r\n\tbackground-color: white;\r\n\tborder-radius: 15px;\r\n\tmargin-left: 10px;\r\n\tmargin-right: 10px;\r\n\tmargin-bottom: 20px;\r\n\tpadding-bottom: 20px;\r\n\tpadding-top: 20px;\r\n}\r\n\r\n.content {\r\n\twidth: 100%;\r\n\tmargin: 10px;\r\n}\r\n\r\n.title {\r\n\tmargin: 15px;\r\n\tfont-size: 32px;\r\n\tfont-weight: 600;\r\n\tcolor: #333333;\r\n}\r\n\r\n.button {\r\n\tborder-radius: 50px;\r\n\twidth: 260px;\r\n\theight: 75px;\r\n\tmargin-top: 30px;\r\n\tmargin-right: 10px ;\r\n}\r\n\r\n.bottom {\r\n\twidth: 49%;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tpadding: 20px;\r\n\tmargin-bottom: 20px;\r\n}\r\n\r\n.info {\r\n\tcolor: #333333;\r\n\tfont-size: 29px;\r\n\tmargin-left: 40px;\r\n\tmargin-top: 10px;\r\n}\r\n\r\n.popButton {\r\n\twidth: 300px;\r\n\theight: 200px;\r\n}\r\n\r\n.row {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n}\r\n.center{\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n}\r\n.cardText {\r\n\tfont-size: 29px;\r\n\tcolor: #555555;\r\n\tmargin-left: 10px;\r\n\tmargin-right: 10px;\r\n}\r\n\r\n.iconBlue {\r\n\tdisplay: flex;\r\n\tmargin-right: 10px;\r\n\twidth: 12px;\r\n\theight: 12px;\r\n\tborder-radius: 100px;\r\n\tbackground-color: #2d7eff;\r\n}\r\n\r\n.iconRed {\r\n\tdisplay: flex;\r\n\tmargin-right: 10px;\r\n\twidth: 12px;\r\n\theight: 12px;\r\n\tborder-radius: 100px;\r\n\tbackground-color: red;\r\n}\r\n\r\n/deep/.fm-nav-bar__content {\r\n\tbackground-color: transparent;\r\n}\r\n</style>\r\n  "]}]}