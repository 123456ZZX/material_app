{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\FormCenter\\components\\FlowEntrust\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\FormCenter\\components\\FlowEntrust\\index.vue","mtime":1705912800022},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBDVVJSRU5UX1JPVyB9IGZyb20gJ0Avc3RvcmUvU3RhdGUvc3RhdGVUeXBlcycNCmltcG9ydCBzZWxlY3RVc2VyIGZyb20gJ0AvY29tcG9uZW50cy9zZWxlY3QtdXNlcicNCmltcG9ydCB7IGRvVHJ1c3QgfSBmcm9tICcuL2FwaScNCmltcG9ydCB7IEZpZWxkLCBDZWxsLCBDZWxsR3JvdXAsIFRvYXN0IH0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBzZWxlY3RVc2VyLA0KICAgIFtGaWVsZC5uYW1lXTogRmllbGQsDQogICAgW0NlbGwubmFtZV06IENlbGwsDQogICAgW0NlbGxHcm91cC5uYW1lXTogQ2VsbEdyb3VwLA0KICAgIFtUb2FzdC5uYW1lXTogVG9hc3QsDQogIH0sDQogIHByb3BzOiB7DQogICAgdXJsQW5kRW50aXR5OiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0KCkge30sDQogICAgfSwNCiAgICBmb3JtRGF0YTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdCgpIHt9LA0KICAgIH0sDQogICAgZGV0YWlsUGFyYW06IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIFtdDQogICAgICB9LA0KICAgIH0sDQogICAgYmVmb3JlU3VibWl0OiB7DQogICAgICB0eXBlOiBGdW5jdGlvbiwNCiAgICAgIGRlZmF1bHQ6IG51bGwsDQogICAgfSwNCiAgICBmb3JtTmFtZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9LA0KICAgIH0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG5ld05hbWU6ICcnLCAvLyDlp5TmiZjkuroNCiAgICAgIHVzZXJJRDogJycsIC8v5aeU5omY5Lq655So5oi35ZCNDQogICAgICByZWFzb246ICcnLCAvLyDlp5TmiZjljp/lm6ANCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgcm93KCkgew0KICAgICAgLy8g6aG16Z2i5Lit5L2/55Socm935p2l5oyH5Luj5b2T5YmN6K6w5b2VDQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGVbQ1VSUkVOVF9ST1ddDQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHt9LA0KICBtZXRob2RzOiB7DQogICAgZW50cnVzdCgpIHsNCiAgICAgIC8vIOmAieS6uui/h+adpeeahOWRmOW3peWPt++8iOS5n+aYr+KAnOaWsOaJp+ihjOS6uu+8mueahOWRmOW3peWPt++8iQ0KICAgICAgLy8gbGV0IHVzZXJJRCA9IHRoaXMuJHJlZnMuZXhlY3V0ZUxlYWRlci5nZXRWYWx1ZXMoJ3VzZXJOYW1lJykNCiAgICAgIC8vIGxldCB1c2VySUQgPSAid2VpX2p0IjsNCiAgICAgIC8vIOWOn+aJp+ihjOS6uueahOWRmOW3peWPt+S5n+aYr+eZu+mZhuS6uueahOWRmOW3peWPtw0KICAgICAgbGV0IHVzZXIgPSB0aGlzLnJvdy50YXNrQXNpZ25lZQ0KICAgICAgaWYgKHRoaXMudXNlcklEID09ICcnKSB7DQogICAgICAgIC8vIOaYvuekuuaWh+Wtlw0KICAgICAgICBUb2FzdCgn6K+36YCJ5oup5paw5omn6KGM5Lq6JywgJ21pZGRsZScpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgaWYgKHVzZXIgPT0gdGhpcy51c2VySUQpIHsNCiAgICAgICAgVG9hc3QoJ+S4jeiDveWnlOaJmOe7meiHquW3se+8gScsICdtaWRkbGUnKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCg0KICAgICAgaWYgKCF0aGlzLnJlYXNvbikgew0KICAgICAgICBUb2FzdCgn6K+36L6T5YWl5aeU5omY5Y6f5ZugJywgJ21pZGRsZScpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgdGhpcy5kb1RydXN0KHRoaXMudXNlcklEKQ0KICAgIH0sDQogICAgLy8g5aeU5omYDQogICAgZG9UcnVzdCh1c2VySUQpIHsNCiAgICAgIGRvVHJ1c3Qoew0KICAgICAgICB0YXNrSWQ6IHRoaXMucm93LnRhc2tJZCwNCiAgICAgICAgY29tbWVudDogdGhpcy5yZWFzb24sDQogICAgICAgIHVzZXJOYW1lOiB1c2VySUQsDQogICAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsNCiAgICAgICAgICB0aGlzLiR0b2FzdCgn5o+Q5Lqk5oiQ5YqfJywgJ21pZGRsZScpDQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiR0b2FzdC5jbGVhcigpDQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3RvZG8/cmVmcmVzaD10cnVlJykNCiAgICAgICAgICB9LCAxMDAwKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJHRvYXN0KHJlcy5kYXRhLm1lc3NhZ2UsICdtaWRkbGUnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogIH0sDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/FormCenter/components/FlowEntrust","sourcesContent":["<template>\r\n  <div class=\"approve-textarea\">\r\n    <fm-cell-group label-width=\"100px\" :gutter=\"0\">\r\n      <fm-cell title=\"当前环节\" value-align=\"right\" class=\"approve-textarea__cell\">\r\n        <div class=\"black\">{{ row.taskName }}</div>\r\n      </fm-cell>\r\n      <fm-cell title=\"原执行人\" value-align=\"right\" class=\"approve-textarea__cell\">\r\n        <div class=\"black\">{{ row.taskAsigneeName }}</div>\r\n      </fm-cell>\r\n      <select-user\r\n        class=\"new-name\"\r\n        :userFullname.sync=\"newName\"\r\n        :userName.sync=\"userID\"\r\n        title=\"新执行人\"\r\n        :multiple=\"false\"\r\n        :required=\"true\"\r\n        ref=\"executeLeader\"\r\n      ></select-user>\r\n      <div class=\"approve-title\"><span class=\"label-before\"></span>委托原因</div>\r\n      <fm-field\r\n        class=\"approve-textarea-entrust\"\r\n        type=\"textarea\"\r\n        placeholder=\"请输入委托原因\"\r\n        show-word-limit\r\n        :maxlength=\"50\"\r\n        v-model=\"reason\"\r\n      ></fm-field>\r\n      <div class=\"btn-area-entrust\" @click=\"entrust\">\r\n        <div class=\"entrust-btn\">确认委托</div>\r\n      </div>\r\n    </fm-cell-group>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { CURRENT_ROW } from '@/store/State/stateTypes'\r\nimport selectUser from '@/components/select-user'\r\nimport { doTrust } from './api'\r\nimport { Field, Cell, CellGroup, Toast } from 'fawkes-mobile-lib'\r\nexport default {\r\n  components: {\r\n    selectUser,\r\n    [Field.name]: Field,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [Toast.name]: Toast,\r\n  },\r\n  props: {\r\n    urlAndEntity: {\r\n      type: Object,\r\n      default() {},\r\n    },\r\n    formData: {\r\n      type: Object,\r\n      default() {},\r\n    },\r\n    detailParam: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      },\r\n    },\r\n    beforeSubmit: {\r\n      type: Function,\r\n      default: null,\r\n    },\r\n    formName: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      newName: '', // 委托人\r\n      userID: '', //委托人用户名\r\n      reason: '', // 委托原因\r\n    }\r\n  },\r\n  computed: {\r\n    row() {\r\n      // 页面中使用row来指代当前记录\r\n      return this.$store.state[CURRENT_ROW]\r\n    },\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    entrust() {\r\n      // 选人过来的员工号（也是“新执行人：的员工号）\r\n      // let userID = this.$refs.executeLeader.getValues('userName')\r\n      // let userID = \"wei_jt\";\r\n      // 原执行人的员工号也是登陆人的员工号\r\n      let user = this.row.taskAsignee\r\n      if (this.userID == '') {\r\n        // 显示文字\r\n        Toast('请选择新执行人', 'middle')\r\n        return false\r\n      }\r\n      if (user == this.userID) {\r\n        Toast('不能委托给自己！', 'middle')\r\n        return\r\n      }\r\n\r\n      if (!this.reason) {\r\n        Toast('请输入委托原因', 'middle')\r\n        return false\r\n      }\r\n      this.doTrust(this.userID)\r\n    },\r\n    // 委托\r\n    doTrust(userID) {\r\n      doTrust({\r\n        taskId: this.row.taskId,\r\n        comment: this.reason,\r\n        userName: userID,\r\n      }).then((res) => {\r\n        if (res.status) {\r\n          this.$toast('提交成功', 'middle')\r\n          setTimeout(() => {\r\n            this.$toast.clear()\r\n            this.$router.push('/todo?refresh=true')\r\n          }, 1000)\r\n        } else {\r\n          this.$toast(res.data.message, 'middle')\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.approve-textarea {\r\n  // margin-top: 4%;\r\n  &__cell {\r\n    padding: 30px 12px;\r\n    line-height: 40px;\r\n  }\r\n\r\n  // /deep/ .fm-cell__title {\r\n  //   margin-left: 0px;\r\n  // }\r\n\r\n  /deep/ .fm-cell--required::before {\r\n    left: -2px !important;\r\n    top: 28px;\r\n  }\r\n\r\n  /deep/ .fm-field__word-limit {\r\n    margin-top: 0px;\r\n  }\r\n}\r\n\r\n// 覆盖选人组件原样式\r\n.new-name /deep/ .fm-cell--clickable.fm-cell--required {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.black {\r\n  font-size: 28px;\r\n  font-family: PingFangSC-Regular, PingFang SC;\r\n  font-weight: 400;\r\n  color: #888;\r\n  word-break: break-all;\r\n}\r\n\r\n.approve-title {\r\n  font-size: 32px;\r\n  font-family: PingFangSC-Regular, PingFang SC;\r\n  font-weight: 400;\r\n  color: rgba(75, 75, 75, 1);\r\n  line-height: 60px;\r\n}\r\n\r\n.label-before {\r\n  width: 8px;\r\n  height: 22px;\r\n  background: #4a8dff;\r\n  margin-right: 7px;\r\n  display: inline-block;\r\n}\r\n\r\n.approve-textarea-entrust /deep/ .fm-cell__value {\r\n  border: 1px solid #bbbbbb;\r\n  opacity: 0.5;\r\n  padding: 20px;\r\n  max-height: 400px;\r\n}\r\n\r\n/deep/ .fm-field--min-height .fm-field__control {\r\n  min-height: 360px;\r\n}\r\n.btn-area-entrust {\r\n  position: relative;\r\n  width: 100%;\r\n  margin-top: 60px;\r\n}\r\n\r\n.entrust-btn {\r\n  text-align: center;\r\n  font-size: 32px;\r\n  font-family: PingFangSC-Medium, PingFang SC;\r\n  font-weight: 500;\r\n  color: #ffffff;\r\n  background-color: #4d86ff;\r\n  border-radius: 2px;\r\n  height: 90px;\r\n  line-height: 90px;\r\n  margin: 0 41px;\r\n}\r\n</style>\r\n"]}]}