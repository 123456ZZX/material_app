{"remainingRequest":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\DispatchCenter\\components\\onDuty.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\src\\views\\DispatchCenter\\components\\onDuty.vue","mtime":1708928163371},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code\\Project\\WL\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgKiBhcyBhcGlzIGZyb20gJy4uL2FwaScNCmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnZmF3a2VzLW1vYmlsZS1saWInDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdvbkR1dHknLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjYWxlbmRhclNob3c6IGZhbHNlLA0KICAgICAgc2VsZWN0RGF5OiAndG9kYXknLA0KICAgICAgY3VycmVudFNlbGVjdERhdGU6IG51bGwsDQogICAgICBjdXJyZW50RGF5TGlzdDogW10sDQogICAgICBjdXJyZW50QnpPYmo6IG51bGwsDQogICAgICBQYkxpc3Q6IG51bGwsDQogICAgICB0b2FzdDogbnVsbCwNCiAgICAgIEJjTGlzdDogW10sIC8vIOePreasoeWIl+ihqA0KICAgICAgbWluRGF0ZTogIiINCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgZGl2aWRlclN0eWxlKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgJy0taGVpZ2h0JzogdGhpcy5CY0xpc3QubGVuZ3RoICogMjUgKyAnJScsDQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLm1pbkRhdGUgPSBuZXcgRGF0ZSh0aGlzLiRtb21lbnQoKS5zdGFydE9mKCd5ZWFyJykuZm9ybWF0KCJZWVlZLU1NLUREIikpDQogICAgdGhpcy5jdXJyZW50U2VsZWN0RGF0ZSA9IG5ldyBEYXRlKCkNCiAgICB0aGlzLmN1cnJlbnREYXlMaXN0ID0gdGhpcy5nZXREYXlMaXN0KHRoaXMuY3VycmVudFNlbGVjdERhdGUpDQogICAgdGhpcy5nZXRCeigpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDmoLnmja7lvZPliY3nlKjmiLfmn6Xor6LmiYDlsZ7nj63nu4QNCiAgICBnZXRCeigpIHsNCiAgICAgIHRoaXMudG9hc3QgPSBUb2FzdC5sb2FkaW5nKHsNCiAgICAgICAgZHVyYXRpb246IDAsDQogICAgICAgIGxvYWRpbmdUeXBlOiAnc3Bpbm5lcicsDQogICAgICAgIG1lc3NhZ2U6ICfmjpLnj63liqDovb3kuK0nLA0KICAgICAgICBmb3JiaWRDbGljazogdHJ1ZQ0KICAgICAgfSkNCiAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgIHBhZ2U6IDEsDQogICAgICAgIHNpemU6IDEwLA0KICAgICAgICB1c2VybmFtZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8udXNlck5hbWUsDQogICAgICB9DQogICAgICBhcGlzLmdldEJ6KHBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuc3RhdHVzICYmIHJlcy5kYXRhLnJlY29yZHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgIHRoaXMuY3VycmVudEJ6T2JqID0gcmVzLmRhdGEucmVjb3Jkc1swXQ0KICAgICAgICAgIHRoaXMuZ2V0QmModGhpcy5jdXJyZW50QnpPYmoudGVhbUlkKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMudG9hc3QuY2xlYXIoKQ0KICAgICAgICAgIHRoaXMudG9hc3QgPSBudWxsDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDmoLnmja7lvZPliY3nj63nu4Tmn6Xor6Lnj63mrKENCiAgICBnZXRCYyh0ZWFtSWQpIHsNCiAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgIHBhZ2U6IDEsDQogICAgICAgIHNpemU6IDIwLA0KICAgICAgICB0ZWFtSWQNCiAgICAgIH0NCiAgICAgIGFwaXMuZ2V0QmMocGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdGF0dXMgJiYgcmVzLmRhdGEucmVjb3Jkcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5CY0xpc3QgPSByZXMuZGF0YS5yZWNvcmRzLm1hcCgoaXQpID0+IGl0LnNoaWZ0VHlwZSkNCiAgICAgICAgICB0aGlzLmdldFBiKHRoaXMuY3VycmVudEJ6T2JqLnRlYW1JZCkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnRvYXN0LmNsZWFyKCkNCiAgICAgICAgICB0aGlzLnRvYXN0ID0gbnVsbA0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5qC55o2u5b2T5YmN54+t57uE5p+l6K+i5o6S54+tDQogICAgZ2V0UGIodGVhbUlkKSB7DQogICAgICBsZXQgc3RhcnRUaW1lID0gJycNCiAgICAgIGxldCBlbmRUaW1lID0gJycNCiAgICAgIGlmICghdGhpcy50b2FzdCkgew0KICAgICAgICAgIHRoaXMudG9hc3QgPSBUb2FzdC5sb2FkaW5nKHsNCiAgICAgICAgICAgIGR1cmF0aW9uOiAwLA0KICAgICAgICAgICAgbG9hZGluZ1R5cGU6ICdzcGlubmVyJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmjpLnj63liqDovb3kuK0nLA0KICAgICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUNCiAgICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuc2VsZWN0RGF5ID09ICd5ZXN0Jykgew0KICAgICAgICBzdGFydFRpbWUgPSB0aGlzLiRkYXlqcyh0aGlzLmN1cnJlbnRTZWxlY3REYXRlKQ0KICAgICAgICAgIC5zdWJ0cmFjdCgxLCAnZGF5JykNCiAgICAgICAgICAuZm9ybWF0KCdZWVlZLU1NLUREIDAwOjAwOjAwJykNCiAgICAgICAgZW5kVGltZSA9IHRoaXMuJGRheWpzKHRoaXMuY3VycmVudFNlbGVjdERhdGUpDQogICAgICAgICAgLnN1YnRyYWN0KDEsICdkYXknKQ0KICAgICAgICAgIC5mb3JtYXQoJ1lZWVktTU0tREQgMjM6NTk6NTknKQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdERheSA9PSAndG9kYXknKSB7DQogICAgICAgIHN0YXJ0VGltZSA9IHRoaXMuJGRheWpzKHRoaXMuY3VycmVudFNlbGVjdERhdGUpLmZvcm1hdCgNCiAgICAgICAgICAnWVlZWS1NTS1ERCAwMDowMDowMCcNCiAgICAgICAgKQ0KICAgICAgICBlbmRUaW1lID0gdGhpcy4kZGF5anModGhpcy5jdXJyZW50U2VsZWN0RGF0ZSkuZm9ybWF0KA0KICAgICAgICAgICdZWVlZLU1NLUREIDIzOjU5OjU5Jw0KICAgICAgICApDQogICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0RGF5ID09ICd0b21vcicpIHsNCiAgICAgICAgc3RhcnRUaW1lID0gdGhpcy4kZGF5anModGhpcy5jdXJyZW50U2VsZWN0RGF0ZSkNCiAgICAgICAgICAuYWRkKDEsICdkYXknKQ0KICAgICAgICAgIC5mb3JtYXQoJ1lZWVktTU0tREQgMDA6MDA6MDAnKQ0KICAgICAgICBlbmRUaW1lID0gdGhpcy4kZGF5anModGhpcy5jdXJyZW50U2VsZWN0RGF0ZSkNCiAgICAgICAgICAuYWRkKDEsICdkYXknKQ0KICAgICAgICAgIC5mb3JtYXQoJ1lZWVktTU0tREQgMjM6NTk6NTknKQ0KICAgICAgfQ0KICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgcGFnZTogMSwNCiAgICAgICAgc2l6ZTogMjAsDQogICAgICAgIHRlYW1JZCwNCiAgICAgICAgc3RhcnRUaW1lODogc3RhcnRUaW1lLA0KICAgICAgICBlbmRUaW1lODogZW5kVGltZSwNCiAgICAgIH0NCiAgICAgIGFwaXMuZ2V0UGIocGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdGF0dXMgJiYgcmVzLmRhdGEucmVjb3Jkcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5QYkxpc3QgPSB7fQ0KICAgICAgICAgIHRoaXMuQmNMaXN0LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgICAgIHRoaXMuUGJMaXN0W2l0ZW1dID0gcmVzLmRhdGEucmVjb3Jkcw0KICAgICAgICAgICAgICAuZmlsdGVyKChpdCkgPT4gaXQuc2hpZnROYW1lID09IGl0ZW0pDQogICAgICAgICAgICAgIC5tYXAoKHBlcikgPT4gcGVyLm1lbWJlck5hbWUpDQogICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLlBiTGlzdCA9IHt9DQogICAgICAgICAgdGhpcy5CY0xpc3QuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgdGhpcy5QYkxpc3RbaXRlbV0gPSBbJy0tLScsICctLS0nLCAnLS0tJ10NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KS5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgdGhpcy50b2FzdC5jbGVhcigpDQogICAgICAgIHRoaXMudG9hc3QgPSBudWxsDQogICAgICB9KQ0KICAgIH0sDQogICAgY2hhbmdlRGF0ZSh2YWwpIHsNCiAgICAgIHRoaXMuc2VsZWN0RGF5ID0gdmFsDQogICAgICB0aGlzLmdldFBiKHRoaXMuY3VycmVudEJ6T2JqLnRlYW1JZCkNCiAgICB9LA0KICAgIG9uQ29uZmlybSh2YWwpIHsNCiAgICAgIHRoaXMuY3VycmVudFNlbGVjdERhdGUgPSB2YWwNCiAgICAgIHRoaXMuY3VycmVudERheUxpc3QgPSB0aGlzLmdldERheUxpc3QodmFsKQ0KICAgICAgdGhpcy5nZXRQYih0aGlzLmN1cnJlbnRCek9iai50ZWFtSWQpDQogICAgfSwNCiAgICBnZXREYXlMaXN0KG5vd0RhdGUpIHsNCiAgICAgIGxldCBkYXlMaXN0ID0gbmV3IEFycmF5KDMpDQogICAgICBsZXQgeWVzdCA9IHRoaXMuJGRheWpzKG5vd0RhdGUpLnN1YnRyYWN0KDEsICdkYXknKQ0KICAgICAgbGV0IHRvZGF5ID0gdGhpcy4kZGF5anMobm93RGF0ZSkNCiAgICAgIGxldCB0b21vciA9IHRoaXMuJGRheWpzKG5vd0RhdGUpLmFkZCgxLCAnZGF5JykNCiAgICAgIGRheUxpc3RbMF0gPSB7DQogICAgICAgIHdlZWs6IHRoaXMuZ2V0V2Vlayh5ZXN0KSwNCiAgICAgICAgZGF0ZTogeWVzdC5mb3JtYXQoJ01N5pyIRETml6UnKSwNCiAgICAgIH0NCiAgICAgIGRheUxpc3RbMV0gPSB7DQogICAgICAgIHdlZWs6IHRoaXMuZ2V0V2Vlayh0b2RheSksDQogICAgICAgIGRhdGU6ICfku4rlpKknLA0KICAgICAgfQ0KICAgICAgZGF5TGlzdFsyXSA9IHsNCiAgICAgICAgd2VlazogdGhpcy5nZXRXZWVrKHRvbW9yKSwNCiAgICAgICAgZGF0ZTogdG9tb3IuZm9ybWF0KCdNTeaciERE5pelJyksDQogICAgICB9DQogICAgICByZXR1cm4gZGF5TGlzdA0KICAgIH0sDQogICAgZ2V0V2Vlayhub3dEYXRlKSB7DQogICAgICBsZXQgZGF0YXMgPSB0aGlzLiRkYXlqcyhub3dEYXRlKS5kYXkoKQ0KICAgICAgdmFyIHdlZWsgPSBbJ+aXpScsICfkuIAnLCAn5LqMJywgJ+S4iScsICflm5snLCAn5LqUJywgJ+WFrSddDQogICAgICByZXR1cm4gJ+aYn+acnycgKyB3ZWVrW2RhdGFzXQ0KICAgIH0sDQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgdGhpcy50b2FzdC5jbGVhcigpDQogIH0NCn0NCg=="},{"version":3,"sources":["onDuty.vue"],"names":[],"mappings":";AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"onDuty.vue","sourceRoot":"src/views/DispatchCenter/components","sourcesContent":["<template>\r\n  <div class=\"overlay\">\r\n    <div class=\"selectArea\">\r\n      <div class=\"calendar\">\r\n        <i class=\"fm-icon fm-icon-calendar-o\" @click=\"calendarShow = true\"></i>\r\n      </div>\r\n      <div class=\"divider\" />\r\n      <div class=\"day\" :class=\"selectDay == 'yest'? 'actve' : ''\" @click=\"changeDate('yest')\">\r\n        <div class=\"week\">{{ currentDayList[0].week }}</div>\r\n        <div class=\"date\">{{ currentDayList[0].date }}</div>\r\n      </div>\r\n      <div class=\"divider\" />\r\n      <div class=\"day\" :class=\"selectDay == 'today'? 'actve' : ''\" @click=\"changeDate('today')\">\r\n        <div class=\"week\">{{ currentDayList[1].week }}</div>\r\n        <div class=\"date\">{{ currentDayList[1].date }}</div>\r\n      </div>\r\n      <div class=\"divider\" />\r\n      <div class=\"day\" :class=\"selectDay == 'tomor'? 'actve' : ''\" @click=\"changeDate('tomor')\">\r\n        <div class=\"week\">{{ currentDayList[2].week }}</div>\r\n        <div class=\"date\">{{ currentDayList[2].date }}</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"dutyArea\" v-if=\"PbList\">\r\n      <div class=\"scrollArea\">\r\n        <div class=\"dutyOrder\">\r\n          <div\r\n            class=\"item2\"\r\n            v-for=\"(it, idx) in BcList\"\r\n            :class=\"idx == 0 ? 'item1' : idx == (BcList.length - 1) ? 'item3' : ''\"\r\n            :key=\"idx\"\r\n          >{{ it }}</div>\r\n        </div>\r\n        <div class=\"divider\" :style=\"dividerStyle\"></div>\r\n        <div class=\"person\">\r\n          <div\r\n            class=\"person-item2\"\r\n            :class=\"idx == 0 ? 'person-item1' : idx == (BcList.length - 1) ? 'person-item3' : ''\"\r\n            v-for=\"(it, idx) in BcList\"\r\n            :key=\"idx\"\r\n          >\r\n            <img :src=\"require('@/assets/img/dispatchCenter/taiyang@2x.png')\" width=\"23\" />\r\n            <div class=\"name\">{{ PbList[it][0] || '---' }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"divider\" :style=\"dividerStyle\"></div>\r\n        <div class=\"person\">\r\n          <div\r\n            class=\"person-item2\"\r\n            :class=\"idx == 0 ? 'person-item1' : idx == (BcList.length - 1) ? 'person-item3' : ''\"\r\n            v-for=\"(it, idx) in BcList\"\r\n            :key=\"idx\"\r\n          >\r\n            <img :src=\"require('@/assets/img/dispatchCenter/taiyang@2x.png')\" width=\"23\" />\r\n            <div class=\"name\">{{ PbList[it][1] || '---' }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"divider\" :style=\"dividerStyle\"></div>\r\n        <div class=\"person\">\r\n          <div\r\n            class=\"person-item2\"\r\n            :class=\"idx == 0 ? 'person-item1' : idx == (BcList.length - 1) ? 'person-item3' : ''\"\r\n            v-for=\"(it, idx) in BcList\"\r\n            :key=\"idx\"\r\n          >\r\n            <img :src=\"require('@/assets/img/dispatchCenter/taiyang@2x.png')\" width=\"23\" />\r\n            <div class=\"name\">{{ PbList[it][2] || '---' }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <fm-calendar :min-date=\"minDate\" v-model=\"calendarShow\" @confirm=\"onConfirm\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as apis from '../api'\r\nimport { Toast } from 'fawkes-mobile-lib'\r\nexport default {\r\n  name: 'onDuty',\r\n  data() {\r\n    return {\r\n      calendarShow: false,\r\n      selectDay: 'today',\r\n      currentSelectDate: null,\r\n      currentDayList: [],\r\n      currentBzObj: null,\r\n      PbList: null,\r\n      toast: null,\r\n      BcList: [], // 班次列表\r\n      minDate: \"\"\r\n    }\r\n  },\r\n  computed: {\r\n    dividerStyle() {\r\n      return {\r\n        '--height': this.BcList.length * 25 + '%',\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.minDate = new Date(this.$moment().startOf('year').format(\"YYYY-MM-DD\"))\r\n    this.currentSelectDate = new Date()\r\n    this.currentDayList = this.getDayList(this.currentSelectDate)\r\n    this.getBz()\r\n  },\r\n  methods: {\r\n    // 根据当前用户查询所属班组\r\n    getBz() {\r\n      this.toast = Toast.loading({\r\n        duration: 0,\r\n        loadingType: 'spinner',\r\n        message: '排班加载中',\r\n        forbidClick: true\r\n      })\r\n      let params = {\r\n        page: 1,\r\n        size: 10,\r\n        username: this.$store.state.userInfo.userName,\r\n      }\r\n      apis.getBz(params).then((res) => {\r\n        if (res.status && res.data.records.length > 0) {\r\n          this.currentBzObj = res.data.records[0]\r\n          this.getBc(this.currentBzObj.teamId)\r\n        } else {\r\n          this.toast.clear()\r\n          this.toast = null\r\n        }\r\n      })\r\n    },\r\n    // 根据当前班组查询班次\r\n    getBc(teamId) {\r\n      let params = {\r\n        page: 1,\r\n        size: 20,\r\n        teamId\r\n      }\r\n      apis.getBc(params).then((res) => {\r\n        if (res.status && res.data.records.length > 0) {\r\n          this.BcList = res.data.records.map((it) => it.shiftType)\r\n          this.getPb(this.currentBzObj.teamId)\r\n        } else {\r\n          this.toast.clear()\r\n          this.toast = null\r\n        }\r\n      })\r\n    },\r\n    // 根据当前班组查询排班\r\n    getPb(teamId) {\r\n      let startTime = ''\r\n      let endTime = ''\r\n      if (!this.toast) {\r\n          this.toast = Toast.loading({\r\n            duration: 0,\r\n            loadingType: 'spinner',\r\n            message: '排班加载中',\r\n            forbidClick: true\r\n          })\r\n      }\r\n      if (this.selectDay == 'yest') {\r\n        startTime = this.$dayjs(this.currentSelectDate)\r\n          .subtract(1, 'day')\r\n          .format('YYYY-MM-DD 00:00:00')\r\n        endTime = this.$dayjs(this.currentSelectDate)\r\n          .subtract(1, 'day')\r\n          .format('YYYY-MM-DD 23:59:59')\r\n      } else if (this.selectDay == 'today') {\r\n        startTime = this.$dayjs(this.currentSelectDate).format(\r\n          'YYYY-MM-DD 00:00:00'\r\n        )\r\n        endTime = this.$dayjs(this.currentSelectDate).format(\r\n          'YYYY-MM-DD 23:59:59'\r\n        )\r\n      } else if (this.selectDay == 'tomor') {\r\n        startTime = this.$dayjs(this.currentSelectDate)\r\n          .add(1, 'day')\r\n          .format('YYYY-MM-DD 00:00:00')\r\n        endTime = this.$dayjs(this.currentSelectDate)\r\n          .add(1, 'day')\r\n          .format('YYYY-MM-DD 23:59:59')\r\n      }\r\n      let params = {\r\n        page: 1,\r\n        size: 20,\r\n        teamId,\r\n        startTime8: startTime,\r\n        endTime8: endTime,\r\n      }\r\n      apis.getPb(params).then((res) => {\r\n        if (res.status && res.data.records.length > 0) {\r\n          this.PbList = {}\r\n          this.BcList.forEach((item) => {\r\n            this.PbList[item] = res.data.records\r\n              .filter((it) => it.shiftName == item)\r\n              .map((per) => per.memberName)\r\n          })\r\n        } else {\r\n          this.PbList = {}\r\n          this.BcList.forEach((item) => {\r\n            this.PbList[item] = ['---', '---', '---']\r\n          })\r\n        }\r\n      }).finally(() => {\r\n        this.toast.clear()\r\n        this.toast = null\r\n      })\r\n    },\r\n    changeDate(val) {\r\n      this.selectDay = val\r\n      this.getPb(this.currentBzObj.teamId)\r\n    },\r\n    onConfirm(val) {\r\n      this.currentSelectDate = val\r\n      this.currentDayList = this.getDayList(val)\r\n      this.getPb(this.currentBzObj.teamId)\r\n    },\r\n    getDayList(nowDate) {\r\n      let dayList = new Array(3)\r\n      let yest = this.$dayjs(nowDate).subtract(1, 'day')\r\n      let today = this.$dayjs(nowDate)\r\n      let tomor = this.$dayjs(nowDate).add(1, 'day')\r\n      dayList[0] = {\r\n        week: this.getWeek(yest),\r\n        date: yest.format('MM月DD日'),\r\n      }\r\n      dayList[1] = {\r\n        week: this.getWeek(today),\r\n        date: '今天',\r\n      }\r\n      dayList[2] = {\r\n        week: this.getWeek(tomor),\r\n        date: tomor.format('MM月DD日'),\r\n      }\r\n      return dayList\r\n    },\r\n    getWeek(nowDate) {\r\n      let datas = this.$dayjs(nowDate).day()\r\n      var week = ['日', '一', '二', '三', '四', '五', '六']\r\n      return '星期' + week[datas]\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.toast.clear()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n::-webkit-scrollbar {\r\n  display: none; /* Chrome Safari */\r\n}\r\n.overlay {\r\n  width: 100%;\r\n  height: 356px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: absolute;\r\n  top: 364px;\r\n  z-index: 3;\r\n  .selectArea {\r\n    width: calc(100% - 64px);\r\n    height: 88px;\r\n    background: #e8effb;\r\n    display: flex;\r\n    padding: 0 32px;\r\n    .divider {\r\n      width: 1px;\r\n      background: rgba(0, 0, 0, 0.08);\r\n      height: 60%;\r\n      margin: auto;\r\n    }\r\n    .calendar {\r\n      width: 22%;\r\n      height: 100%;\r\n      .fm-icon {\r\n        color: #1b67d8;\r\n        margin: 16px 48px 16px 16px;\r\n      }\r\n    }\r\n    .day {\r\n      width: 26%;\r\n      height: calc(100% - 20px);\r\n      padding: 10px 28px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      .week {\r\n        height: 28px;\r\n        font-size: 20px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #1b67d8;\r\n        line-height: 28px;\r\n        text-align: center;\r\n      }\r\n      .date {\r\n        height: 40px;\r\n        font-size: 28px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #1b67d8;\r\n        line-height: 40px;\r\n        text-align: center;\r\n      }\r\n    }\r\n    .actve {\r\n      width: 26%;\r\n      height: calc(100% - 20px);\r\n      background: #1b67d8 !important;\r\n      border-radius: 8px;\r\n    }\r\n    .actve > div {\r\n      color: #ffffff !important;\r\n    }\r\n  }\r\n  .dutyArea {\r\n    width: calc(100% - 64px);\r\n    height: calc(100% - 148px);\r\n    background: #ffffff;\r\n    padding: 22px 32px 38px;\r\n    .scrollArea {\r\n      display: flex;\r\n      overflow: scroll;\r\n      width: 100%;\r\n      height: 100%;\r\n      .dutyOrder {\r\n        width: 17%;\r\n        height: 100%;\r\n        // padding-right: 32px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        .item1 {\r\n          margin-top: 0px !important;\r\n        }\r\n        .item2 {\r\n          height: 40px;\r\n          font-size: 28px;\r\n          font-family: PingFangSC-Regular, PingFang SC;\r\n          font-weight: 400;\r\n          color: #555555;\r\n          line-height: 40px;\r\n          margin-bottom: 8px;\r\n          margin-top: 8px;\r\n          margin-left: 16px;\r\n        }\r\n        .item3 {\r\n          margin-bottom: 0px !important;\r\n        }\r\n      }\r\n      .person {\r\n        width: 28%;\r\n        height: 100%;\r\n        display: flex;\r\n        flex-direction: column;\r\n        .person-item1 {\r\n          margin-top: 0px !important;\r\n        }\r\n        .person-item2 {\r\n          padding: 0 20px;\r\n          height: 40px;\r\n          margin: 8px 0;\r\n          display: flex;\r\n          .name {\r\n            height: 40px;\r\n            font-size: 28px;\r\n            font-family: PingFangSC-Regular, PingFang SC;\r\n            font-weight: 400;\r\n            color: #999999;\r\n            line-height: 40px;\r\n            margin-left: 17px;\r\n          }\r\n        }\r\n        .person-item3 {\r\n          margin-bottom: 0px !important;\r\n        }\r\n      }\r\n      .divider {\r\n        width: 1px;\r\n        background: rgba(0, 0, 0, 0.05);\r\n        height: var(--height);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}