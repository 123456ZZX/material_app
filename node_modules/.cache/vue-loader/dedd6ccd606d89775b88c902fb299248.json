{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\ReimburseDetailList\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\ReimburseDetailList\\index.vue","mtime":1705912800068},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgew0KICBOYXZCYXIsDQogIFNlYXJjaCwNCiAgVG9hc3QsDQogIENlbGwsDQogIENlbGxHcm91cCwNCiAgUHVsbFJlZnJlc2gsDQogIExpc3QsDQogIFNpZGViYXIsDQogIFNpZGViYXJJdGVtLA0KICBTd2lwZUNlbGwsDQogIEJ1dHRvbiwNCiAgTm90aWNlQmFyLA0KICBJY29uLA0KICBEaWFsb2csDQp9IGZyb20gJ2Zhd2tlcy1tb2JpbGUtbGliJw0KaW1wb3J0IHsgZ2V0RGV0YWlsRmxvd0xpc3QgfSBmcm9tICcuL2FwaScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgW05hdkJhci5uYW1lXTogTmF2QmFyLA0KICAgIFtTZWFyY2gubmFtZV06IFNlYXJjaCwNCiAgICBbVG9hc3QubmFtZV06IFRvYXN0LA0KICAgIFtDZWxsLm5hbWVdOiBDZWxsLA0KICAgIFtDZWxsR3JvdXAubmFtZV06IENlbGxHcm91cCwNCiAgICBbUHVsbFJlZnJlc2gubmFtZV06IFB1bGxSZWZyZXNoLA0KICAgIFtMaXN0Lm5hbWVdOiBMaXN0LA0KICAgIFtTaWRlYmFyLm5hbWVdOiBTaWRlYmFyLA0KICAgIFtTaWRlYmFySXRlbS5uYW1lXTogU2lkZWJhckl0ZW0sDQogICAgW1N3aXBlQ2VsbC5uYW1lXTogU3dpcGVDZWxsLA0KICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbiwNCiAgICBbTm90aWNlQmFyLm5hbWVdOiBOb3RpY2VCYXIsDQogICAgW0ljb24ubmFtZV06IEljb24sDQogICAgW0RpYWxvZy5uYW1lXTogRGlhbG9nLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhY3RpdmVLZXk6IDAsDQogICAgICB2YWx1ZTogJycsIC8v5pCc57Si5paH5a2XDQogICAgICBmb3JtTGlzdDogW10sDQogICAgICBmb3JtOiB7DQogICAgICAgIHNpemU6IDEwLA0KICAgICAgICBwYWdlOiAxLA0KICAgICAgICByZWltYnVyc2VOYW1lOiAnJywgLy/mjInph4fotK3orqHliJLlkI3np7DmkJzntKINCiAgICAgICAgYnVkZ2V0OiAnJywgLy/mjInph4fotK3pooTnrpfmkJzntKINCiAgICAgIH0sDQogICAgICBpc1JlZnJlc2g6IGZhbHNlLA0KICAgICAgZmluaXNoZWQ6IGZhbHNlLA0KICAgICAgbG9hZGluZzogZmFsc2UsIC8vIOS4i+aLieWIt+aWsOaXtuemgeatouaXoOmZkOWKoOi9vQ0KICAgICAgYmFubmVyU2hvdzogdHJ1ZSwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgaWYgKHRoaXMuJHN0b3JhZ2UuZ2V0KCdjb21tb25PbmVGb3JtTm90aWNlJykpIHsNCiAgICAgIHRoaXMuYmFubmVyU2hvdyA9IGZhbHNlDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIFRvYXN0LmxvYWRpbmcoew0KICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsDQogICAgICBmb3JiaWRDbGljazogdHJ1ZSwNCiAgICB9KQ0KICAgIHRoaXMub25SZWZyZXNoKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGNsb3NlTm90aWNlKCkgew0KICAgICAgdGhpcy5iYW5uZXJTaG93ID0gZmFsc2UNCiAgICAgIHRoaXMuJHN0b3JhZ2Uuc2V0KCdjb21tb25PbmVGb3JtTm90aWNlJywgZmFsc2UpDQogICAgfSwNCiAgICBvbkNsZWFyKCkgew0KICAgICAgdGhpcy5mb3JtLnJlaW1idXJzZU5hbWUgPSAnJw0KICAgICAgLy8g5aSN55So5Yi35paw5o6l5Y+jDQogICAgICB0aGlzLm9uUmVmcmVzaCgpDQogICAgfSwNCiAgICAvLyDmkJzntKINCiAgICBvblNlYXJjaCh2YWwpIHsNCiAgICAgIHRoaXMuZm9ybS5yZWltYnVyc2VOYW1lID0gdmFsDQogICAgICAvLyDlpI3nlKjliLfmlrDmjqXlj6MNCiAgICAgIHRoaXMub25SZWZyZXNoKCkNCiAgICB9LA0KICAgIG9uUmVmcmVzaCgpIHsNCiAgICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZQ0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIHRoaXMuZm9ybS5wYWdlID0gMQ0KICAgICAgZ2V0RGV0YWlsRmxvd0xpc3QodGhpcy5mb3JtKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsNCiAgICAgICAgICAgIHRoaXMuZm9ybUxpc3QgPSByZXMuZGF0YS5saXN0DQogICAgICAgICAgICB0aGlzLmlzUmVmcmVzaCA9IGZhbHNlDQogICAgICAgICAgICBpZiAocmVzLmRhdGEuaXNMYXN0UGFnZSkgew0KICAgICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQ0KICAgICAgICAgICAgICB0aGlzLmZvcm0ucGFnZSA9IDENCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWUNCiAgICAgICAgfSkNCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgIFRvYXN0LmNsZWFyKCkNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgb25Mb2FkKCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgICAgdGhpcy5mb3JtLnBhZ2UrKw0KICAgICAgZ2V0RGV0YWlsRmxvd0xpc3QodGhpcy5mb3JtKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgaWYgKHJlcy5zdGF0dXMpIHsNCiAgICAgICAgICAgIHRoaXMuZm9ybUxpc3QgPSBbLi4udGhpcy5mb3JtTGlzdCwgLi4ucmVzLmRhdGEubGlzdF0NCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5pc0xhc3RQYWdlKSB7DQogICAgICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlDQogICAgICAgICAgICAgIHRoaXMuZm9ybS5wYWdlID0gMQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQ0KICAgICAgICB9KQ0KICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8q5omT5byA5paw5aKe6aG16Z2iKi8NCiAgICBhZGQoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIG5hbWU6ICdGb3JtQ2VudGVyJywNCiAgICAgICAgcGFyYW1zOiB7IHR5cGU6ICdhZGQnLCBmb3JtS2V5OiAncmVpbWJ1cnNlRGV0YWlsJyB9LA0KICAgICAgfSkNCiAgICB9LA0KDQogICAgLyrmiZPlvIDmn6XnnIvpobXpnaIqLw0KICAgIGhhbmRsZVZpZXcocm93KSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIG5hbWU6ICdGb3JtQ2VudGVyJywNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgdHlwZTogJ3ZpZXcnLA0KICAgICAgICAgIGJpeklkOiByb3cuaWQsDQogICAgICAgICAgZm9ybUtleTogJ3JlaW1idXJzZURldGFpbCcsDQogICAgICAgIH0sDQogICAgICB9KQ0KICAgIH0sDQogIH0sDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ReimburseDetailList","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <fm-nav-bar title=\"流程主子表\" left-arrow @click-left=\"$router.go(-1)\"> </fm-nav-bar>\r\n    <fm-search\r\n      v-model=\"value\"\r\n      placeholder=\"请输入采购计划名称\"\r\n      @search=\"onSearch\"\r\n      clearable\r\n      @clear=\"onClear\"\r\n    >\r\n      <template #left-icon>\r\n        <i class=\"fm-icon fm-icon-search\"></i>\r\n      </template>\r\n    </fm-search>\r\n    <div class=\"main-container\">\r\n      <!-- 下拉刷新 -->\r\n      <fm-pull-refresh\r\n        v-model=\"isRefresh\"\r\n        refresh-layer-color=\"#4b8bf4\"\r\n        success-text=\"刷新成功\"\r\n        @refresh=\"onRefresh()\"\r\n      >\r\n        <!-- 上拉加载 -->\r\n        <fm-list\r\n          v-model=\"loading\"\r\n          :finished=\"finished\"\r\n          finished-text=\"我们是有底线的\"\r\n          @load=\"onLoad\"\r\n          :immediate-check=\"false\"\r\n        >\r\n          <!-- 滑动 -->\r\n          <fm-swipe-cell v-for=\"(item, i) in formList\" :key=\"i\" :disabled=\"true\">\r\n            <!-- 卡片 -->\r\n            <fm-cell-group inset @click=\"handleView(item)\">\r\n              <fm-sidebar v-model=\"activeKey\">\r\n                <fm-sidebar-item :title=\"item.reimburseName\" />\r\n              </fm-sidebar>\r\n              <fm-cell title=\"采购预算:\" :value=\"item.budget\" />\r\n              <!-- <fm-cell\r\n                title=\"采购类型:\"\r\n                :value=\"item.reimburseType | transferEnum('reimburse_type')\"\r\n              /> -->\r\n              <fm-cell title=\"采购说明:\" :value=\"item.description\" />\r\n              <fm-cell\r\n                title=\"采购计划日期:\"\r\n                :value=\"item.planDate ? $dayjs(item.planDate).format('YYYY-MM-DD') : ''\"\r\n              />\r\n            </fm-cell-group>\r\n          </fm-swipe-cell>\r\n        </fm-list>\r\n      </fm-pull-refresh>\r\n    </div>\r\n    <!-- 增加按钮 -->\r\n    <div class=\"bottom\" @click=\"add\">\r\n      <i class=\"fm-icon fm-icon-plus\"></i>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  NavBar,\r\n  Search,\r\n  Toast,\r\n  Cell,\r\n  CellGroup,\r\n  PullRefresh,\r\n  List,\r\n  Sidebar,\r\n  SidebarItem,\r\n  SwipeCell,\r\n  Button,\r\n  NoticeBar,\r\n  Icon,\r\n  Dialog,\r\n} from 'fawkes-mobile-lib'\r\nimport { getDetailFlowList } from './api'\r\n\r\nexport default {\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n    [Search.name]: Search,\r\n    [Toast.name]: Toast,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [PullRefresh.name]: PullRefresh,\r\n    [List.name]: List,\r\n    [Sidebar.name]: Sidebar,\r\n    [SidebarItem.name]: SidebarItem,\r\n    [SwipeCell.name]: SwipeCell,\r\n    [Button.name]: Button,\r\n    [NoticeBar.name]: NoticeBar,\r\n    [Icon.name]: Icon,\r\n    [Dialog.name]: Dialog,\r\n  },\r\n  data() {\r\n    return {\r\n      activeKey: 0,\r\n      value: '', //搜索文字\r\n      formList: [],\r\n      form: {\r\n        size: 10,\r\n        page: 1,\r\n        reimburseName: '', //按采购计划名称搜索\r\n        budget: '', //按采购预算搜索\r\n      },\r\n      isRefresh: false,\r\n      finished: false,\r\n      loading: false, // 下拉刷新时禁止无限加载\r\n      bannerShow: true,\r\n    }\r\n  },\r\n  created() {\r\n    if (this.$storage.get('commonOneFormNotice')) {\r\n      this.bannerShow = false\r\n    }\r\n  },\r\n  mounted() {\r\n    Toast.loading({\r\n      message: '加载中...',\r\n      forbidClick: true,\r\n    })\r\n    this.onRefresh()\r\n  },\r\n  methods: {\r\n    closeNotice() {\r\n      this.bannerShow = false\r\n      this.$storage.set('commonOneFormNotice', false)\r\n    },\r\n    onClear() {\r\n      this.form.reimburseName = ''\r\n      // 复用刷新接口\r\n      this.onRefresh()\r\n    },\r\n    // 搜索\r\n    onSearch(val) {\r\n      this.form.reimburseName = val\r\n      // 复用刷新接口\r\n      this.onRefresh()\r\n    },\r\n    onRefresh() {\r\n      this.finished = false\r\n      this.loading = false\r\n      this.form.page = 1\r\n      getDetailFlowList(this.form)\r\n        .then((res) => {\r\n          if (res.status) {\r\n            this.formList = res.data.list\r\n            this.isRefresh = false\r\n            if (res.data.isLastPage) {\r\n              this.finished = true\r\n              this.form.page = 1\r\n            }\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.finished = true\r\n        })\r\n        .finally(() => {\r\n          Toast.clear()\r\n          this.loading = false\r\n        })\r\n    },\r\n    onLoad() {\r\n      this.loading = true\r\n      this.form.page++\r\n      getDetailFlowList(this.form)\r\n        .then((res) => {\r\n          if (res.status) {\r\n            this.formList = [...this.formList, ...res.data.list]\r\n            if (res.data.isLastPage) {\r\n              this.finished = true\r\n              this.form.page = 1\r\n            }\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.finished = true\r\n        })\r\n        .finally(() => {\r\n          this.loading = false\r\n        })\r\n    },\r\n    /*打开新增页面*/\r\n    add() {\r\n      this.$router.push({\r\n        name: 'FormCenter',\r\n        params: { type: 'add', formKey: 'reimburseDetail' },\r\n      })\r\n    },\r\n\r\n    /*打开查看页面*/\r\n    handleView(row) {\r\n      this.$router.push({\r\n        name: 'FormCenter',\r\n        params: {\r\n          type: 'view',\r\n          bizId: row.id,\r\n          formKey: 'reimburseDetail',\r\n        },\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.main-container {\r\n  height: calc(100% - 208px);\r\n  overflow: auto;\r\n}\r\n\r\n.main {\r\n  background-color: #f2f3f4 !important;\r\n  height: 100%;\r\n}\r\n.task-container /deep/ .fm-nav-bar__content {\r\n  height: 88px;\r\n}\r\n.task-container /deep/ .fm-nav-bar__title {\r\n  font-size: 36px;\r\n  font-weight: 600;\r\n}\r\n.task-container /deep/ .fm-nav-bar .fm-icon {\r\n  color: #333;\r\n}\r\n.task-container /deep/ .fm-nav-bar__arrow {\r\n  font-size: 48px;\r\n}\r\n.fm-sidebar {\r\n  width: 100%;\r\n  padding-left: 30px;\r\n  padding-right: 30px;\r\n  border-bottom: 2px solid #ebedf0;\r\n}\r\n.fm-cell::after {\r\n  border: none;\r\n}\r\n.fm-cell-group {\r\n  margin-top: 24px;\r\n}\r\n/deep/ .fm-swipe-cell__right {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n/deep/ .fm-button--square {\r\n  border-radius: 50%;\r\n  width: 106px;\r\n  height: 106px;\r\n  padding: 0;\r\n  margin-right: 20px;\r\n}\r\n.bottom {\r\n  position: fixed;\r\n  bottom: 24px;\r\n  right: 44px;\r\n  background-color: #027aff;\r\n  width: 102px;\r\n  height: 102px;\r\n  line-height: 102px;\r\n  border-radius: 50%;\r\n  color: #fff;\r\n  z-index: 1000;\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}