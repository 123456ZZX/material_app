{"remainingRequest":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\OneMap\\components\\PressureMonitorDetail.vue?vue&type=style&index=0&id=2d73d188&scoped=true&lang=less","dependencies":[{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\src\\views\\OneMap\\components\\PressureMonitorDetail.vue","mtime":1705912915804},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ty_project\\xasw-yy\\revenue\\xasw-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouYXJyb3ctdXAgew0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHRvcDogdmFyKC0tdG9wKTsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogdmFyKC0taGVpZ2h0KTsNCiAgLy8gdHJhbnNpdGlvbjogMC42czsNCiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZCk7DQp9DQoubGluZS1jIHsNCiAgLy8gcG9zaXRpb246IGFic29sdXRlOw0KICAvLyBib3R0b206IDA7DQogIC8vIGxlZnQ6IDA7DQogIHdpZHRoOiBjYWxjKDEwMCUgLSA2MHB4KTsNCiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSBjb25zdGFudChzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSk7DQogIGhlaWdodDogY2FsYygxMDAlIC0gZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20pKTsNCiAgLy8gaGVpZ2h0OiAxMDAlOw0KICBtYXJnaW46IDAgMzBweDsNCn0NCi5waWMgew0KICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjREZFREZGIDAlLCAjRURGNkZGIDQ0JSwgcmdiYSgyNDMsMjQ4LDI1NSwwLjgxKSA4MSUsIHJnYmEoMjU1LDI1NSwyNTUsMCkgMTAwJSk7DQp9DQouYmVhdCB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDg4cHg7DQogIGxpbmUtaGVpZ2h0OiA4OHB4Ow0KICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICBmb250LXNpemU6IDQycHg7DQogIHRyYW5zaXRpb246IDFzOw0KfQ0KLlByZXNzdXJlTW9uaXRvckRldGFpbCB7DQogIHdpZHRoOiBjYWxjKDEwMCUgLSA2MHB4KTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBwYWRkaW5nOiAzMHB4Ow0KICBiYWNrZ3JvdW5kOiAjRkZGRkZGOw0KICBib3gtc2hhZG93OiAwcHggLTZweCAxMnB4IDBweCByZ2JhKDEwNCwxMTUsMTI3LDAuMSk7DQogIGJvcmRlci1yYWRpdXM6IDEycHg7DQogIC5jbG9zZSB7DQogICAgaGVpZ2h0OiA4cHg7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogLTQwcHg7DQogICAgbGVmdDogNTAlOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIDApOw0KICB9DQogIC5jb250ZW50IHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDUwcHg7DQogICAgbGluZS1oZWlnaHQ6IDUwcHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KDQogICAgLnRvcExlZnQgew0KICAgICAgZm9udC1zaXplOiAzNnB4Ow0KICAgICAgZm9udC1mYW1pbHk6IFBpbmdGYW5nU0MtU2VtaWJvbGQsIFBpbmdGYW5nIFNDOw0KICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICAgIGNvbG9yOiAjMTkxOTE5Ow0KICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgIHdpZHRoOiA5MCU7DQogICAgfQ0KDQogICAgLnRvcFJpZ2h0IHsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsNCiAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICBmb250LXNpemU6IDM2cHg7DQogICAgICBpbWcgew0KICAgICAgICB3aWR0aDogMTdweDsNCiAgICAgICAgaGVpZ2h0OiAxN3B4Ow0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICAuY2VudGVyU2lkZSB7DQogICAgZGlzcGxheTogLXdlYmtpdC1ib3g7DQogICAgd2lkdGg6IDEwMCU7DQogICAgb3ZlcmZsb3c6IHNjcm9sbDsNCiAgICAuZGV2aWNlIHsNCiAgICAgIHdpZHRoOiAyODBweDsNCiAgICAgIGhlaWdodDogMTYwcHg7DQogICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsNCiAgICAgIG1hcmdpbi1yaWdodDogMzBweDsNCiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjcsMTAzLDIxNiwwLjA1KTsNCiAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgIGZvbnQtc2l6ZTogMjhweDsNCiAgICAgIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLVJlZ3VsYXIsIFBpbmdGYW5nIFNDOw0KICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgIGNvbG9yOiAjNTU1NTU1Ow0KICAgICAgLnZhbHVlIHsNCiAgICAgICAgaGVpZ2h0OiA0NnB4Ow0KICAgICAgICBmb250LXNpemU6IDM4cHg7DQogICAgICAgIGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2EtQm9sZCwgSGVsdmV0aWNhOw0KICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgY29sb3I6ICMxQjY3RDg7DQogICAgICAgIGxpbmUtaGVpZ2h0OiA0NnB4Ow0KICAgICAgfQ0KICAgICAgLnJlZE51bWJlciB7DQogICAgICAgIGhlaWdodDogNDZweDsNCiAgICAgICAgZm9udC1zaXplOiAzOHB4Ow0KICAgICAgICBmb250LWZhbWlseTogSGVsdmV0aWNhLUJvbGQsIEhlbHZldGljYTsNCiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIGxpbmUtaGVpZ2h0OiA0NnB4Ow0KICAgICAgICBjb2xvcjogI2Y0NjI2MzsNCiAgICAgIH0NCiAgICB9DQogICAgLm5vcm1hbEJnYyB7DQogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI3LDEwMywyMTYsMC4xKTsNCiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMxQjY3RDg7DQogICAgfQ0KICB9DQogIC5lYSB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgLmNoYW5nZS10cnVlIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIHJpZ2h0OiA2MHB4Ow0KICAgICAgaGVpZ2h0OiA1MHB4Ow0KICAgICAgd2lkdGg6IDUwcHg7DQogICAgICB6LWluZGV4OiAxMDAwOw0KICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgIGltZyB7DQogICAgICAgIGhlaWdodDogMzVweDsNCiAgICAgIH0NCiAgICB9DQogICAgLnRhLWIgew0KICAgICAgd2lkdGg6IDI4MHB4Ow0KICAgICAgaGVpZ2h0OiA0NDZweDsNCiAgICAgIHotaW5kZXg6IDEwMDA7DQogICAgICBvdmVyZmxvdy15OiBzY3JvbGw7DQogICAgICBwYWRkaW5nOiAyMHB4Ow0KICAgICAgYmFja2dyb3VuZDogI0YxRjNGNjsNCiAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7DQogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICByaWdodDogNjBweDsNCiAgICAgIC5jaGFuZ2Ugew0KICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogMTAlOw0KICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICBpbWcgew0KICAgICAgICAgIGhlaWdodDogMzNweDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLmNvbiB7DQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBoZWlnaHQ6IDkwJTsNCiAgICAgIH0NCiAgICAgIC52ew0KICAgICAgICB3aWR0aDogNzAlOw0KICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgIGZvbnQtc2l6ZTogMjRweDsNCiAgICAgICAgZm9udC1mYW1pbHk6IFBpbmdGYW5nU0MtUmVndWxhciwgUGluZ0ZhbmcgU0M7DQogICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgICAgIGNvbG9yOiAjNTU1NTU1Ow0KICAgICAgICBsaW5lLWhlaWdodDogNTBweDsNCiAgICAgIH0NCiAgICAgIC52YSB7DQogICAgICAgIHdpZHRoOiAzMCU7DQogICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgZm9udC1zaXplOiAyNHB4Ow0KICAgICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyLCBQaW5nRmFuZyBTQzsNCiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgICAgY29sb3I6ICM1NTU1NTU7DQogICAgICAgIGxpbmUtaGVpZ2h0OiA1MHB4Ow0KICAgICAgfQ0KICAgIH0NCiAgICAvZGVlcC8gLmZtLXRhYiB7DQogICAgICBmb250LXNpemU6IDI4cHg7DQogICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyLCBQaW5nRmFuZyBTQzsNCiAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgICBjb2xvcjogIzU1NTU1NTsNCiAgICB9DQogICAgL2RlZXAvIC5mbS10YWItLWFjdGl2ZSB7DQogICAgICBmb250LXNpemU6IDI4cHg7DQogICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyLCBQaW5nRmFuZyBTQzsNCiAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgICBjb2xvcjogIzFCNjdEODsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["PressureMonitorDetail.vue"],"names":[],"mappings":";AA6WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PressureMonitorDetail.vue","sourceRoot":"src/views/OneMap/components","sourcesContent":["<!-- '压力监测详情面板' -->\r\n<template>\r\n<div class=\"arrow-up\" :style=\"mainListStyle\"> \r\n  <!-- :class=\"mainListStyle['--top'] == '77px' ? 'pic' : ''\" -->\r\n  <div class=\"line-c\">\r\n    <!-- <div class=\"beat\" v-if=\"mainListStyle['--top'] == '77px'\"><i class=\"fm-icon fm-icon-arrow-left\" @click=\"closePopup_pressure\"></i></div> -->\r\n    <div class=\"PressureMonitorDetail\"> \r\n      <img\r\n        class=\"close\"\r\n        :src=\"require('@/assets/img/map/矩形.png')\"\r\n        alt=\"\"\r\n      />\r\n      <div class=\"content\" id=\"arrowUp\">\r\n        <div class=\"topLeft\">\r\n          <img\r\n            style=\"height:25px; margin-right:10px\"\r\n            src=\"@/assets/img/map/title.png\"\r\n            alt=\"\"\r\n          />\r\n          <div style=\"width: 90%;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;\">{{ pressureDataSelf.monitorName }}</div>\r\n        </div>\r\n        <div class=\"topRight\">\r\n          <i class=\"fm-icon fm-icon-cross\" @click=\"closePopup_pressure\"></i>\r\n          <!-- v-if=\"mainListStyle['--top'] !== '77px'\" -->\r\n        </div>\r\n      </div>\r\n      <div class=\"centerSide\">\r\n        <div v-for=\"(item, index) in showFunctionData\" :key=\"index\" class=\"device\" :class=\"item.id == functionId ? 'normalBgc' : ''\" @click=\"changeFunctionHistoryData(item)\">\r\n          <!-- :class=\"pressureDataSelf.isWarn && pressureDataSelf.isWarn == 1? 'redNumber': ''\" -->\r\n          <div class=\"value\"> {{ item.val ? item.val.toFixed(3) : '--' }}{{ item.desc }}</div>\r\n          <div style=\"line-height: 28px;\">{{ item.name }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"ea\">\r\n        <fm-tabs v-model=\"timeValue\" @tab-click=\"tabClick\" type=\"line\">\r\n          <fm-tab v-for=\"(item, index) in timeArr\" :label=\"item.label\" :name='item.name' :key=\"index\">\r\n          </fm-tab>\r\n        </fm-tabs>\r\n         <div class=\"change-true\" @click=\"table = true\"  v-if=\"!table\">\r\n            <img\r\n              src=\"@/assets/img/map/noFill.png\"\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n        <div class=\"ta-b\" v-if=\"table\">\r\n          <div class=\"change\" @click=\"table = false\">\r\n            <img\r\n              src=\"@/assets/img/map/fill.png\"\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n          <div class=\"con\">\r\n            <div class=\"v\">\r\n              <div style=\"display: flex; justify-content: center\">时间</div>\r\n              <div style=\"display: flex; justify-content: center\" v-for=\"(item, index) in tableData.time\" :key=\"index\">\r\n                {{item}}\r\n              </div>\r\n            </div>\r\n            <div class=\"va\">\r\n              <div style=\"display: flex; justify-content: center\">数值</div>\r\n              <div style=\"color: #1B67D8; display: flex; justify-content: center\" v-for=\"(i, k) in tableData.value\" :key=\"k\">\r\n                {{i}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"historyDataChart\" style=\"width: 100%; height: 256px; margin-top: 10px;\">\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { getHistoryData } from \"../api\";\r\nimport * as echarts from \"echarts\";\r\nimport _cloneDeep from \"lodash/cloneDeep\";\r\nimport { chartOption } from \"./chartOption.js\";\r\nimport * as timeFormat from \"@/utils/timezone.js\";\r\nimport {\r\n  NavBar,\r\n  Form,\r\n  Field,\r\n  Calendar,\r\n  Button,\r\n  Stepper,\r\n  Popup,\r\n  Picker,\r\n  Checkbox,\r\n  CheckboxGroup,\r\n  Toast,\r\n  CellGroup,\r\n} from 'fawkes-mobile-lib'\r\nexport default {\r\n  props: {\r\n    // 基础信息监测点的feature.properties数据\r\n    pressureDataDetail: {\r\n      type: Object,\r\n      default: {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      pressureDataSelf: {}, // 监测设备properties数据\r\n      showFunctionData: [], // 压力监测详情面板动态展示功能点数据\r\n      tableData: {},\r\n      chartOptionSelf: _cloneDeep(chartOption),\r\n      maxMpa: 0,\r\n      minMpa: 0,\r\n      averageMpa: 0,\r\n      myChartData: null,\r\n      timeT: [],\r\n      table: false,\r\n      mainListStyle: {\r\n        '--top': document.body.clientHeight - 200 + 'px',\r\n        '--height': '200px',\r\n        '--background': ''\r\n      },\r\n      clientHeight: document.body.clientHeight,\r\n      loading: false, // 压力监测详情面板loading状态\r\n      timeDataArray: [], // 压力监测详情面板历史属性信息\r\n      timeValue:'24小时',\r\n      nowPressureID: \"\", // 点击当前压力检测设备获得的该设备的_id\r\n      functionName: \"\", // 当前功能点名称\r\n      yAxisUnit: \"\", // 当前功能点单位\r\n      functionId: \"\", // 压力监测详情面板有多个功能点需要展示时，默认展示第一个功能点id历史数据\r\n      timeArr:[{label:'24小时', name:'24小时'},{label:'本周', name:'本周'}],\r\n    };\r\n  },\r\n  computed: {\r\n  },\r\n  watch: {\r\n    // 监听设备properties内容\r\n    pressureDataDetail: {\r\n      // immediate:true,\r\n      deep: true,\r\n      handler(newValue, oldValue) {\r\n        // console.log(this.pressureDataDetail);\r\n        this.pressureDataSelf = this.pressureDataDetail;\r\n        this.nowPressureID = this.pressureDataSelf.iotId;\r\n        let realtimeData = this.pressureDataSelf.realtimeData;\r\n        // 筛选出需要展示的功能点\r\n        // 目前压力计有一个功能点，流量计有两个\r\n        this.showFunctionData = realtimeData.filter((item) => {\r\n          return item.isShow == 0;\r\n        });\r\n        this.functionId = this.showFunctionData[0].id;\r\n        this.functionName = this.showFunctionData[0].name;\r\n        this.yAxisUnit = this.showFunctionData[0].desc;\r\n        this.historyData();\r\n      },\r\n    },\r\n  },\r\n  created() {\r\n    // 基本信息赋值\r\n    this.pressureDataSelf = this.pressureDataDetail;\r\n    this.nowPressureID = this.pressureDataSelf.iotId;\r\n    let realtimeData = this.pressureDataSelf.realtimeData;\r\n    // 筛选出需要展示的功能点\r\n    // 目前压力计有一个功能点，流量计有两个\r\n    this.showFunctionData = realtimeData.filter((item) => {\r\n      return item.isShow == 0;\r\n    });\r\n    this.functionId = this.showFunctionData[0].id;\r\n    this.functionName = this.showFunctionData[0].name;\r\n    this.yAxisUnit = this.showFunctionData[0].desc;\r\n    this.historyData();\r\n  },\r\n  mounted() {\r\n    let that = this\r\n    let elem = document.querySelector('#arrowUp')\r\n    elem.addEventListener(\"click\", e => {\r\n      e.preventDefault()\r\n      console.log(\"click event!\")\r\n    })\r\n    // elem.addEventListener('touchstart', (e) => {\r\n    //   let evt = e || window.event\r\n    //   let touch = evt.targetTouches[0]\r\n    //   let clientHeight = document.body.clientHeight\r\n    //   let clientY = touch.clientY\r\n    //   if (clientY >= clientHeight * 0.1 && clientY <= clientHeight - 200) {\r\n    //     that.mainListStyle['--top'] = clientY + 'px'\r\n    //     that.mainListStyle['--height'] = clientHeight - clientY + 'px'\r\n    //   }\r\n    // })\r\n    elem.addEventListener('touchmove', (e) => {\r\n      let evt = e || window.event\r\n      let touch = evt.targetTouches[0]\r\n      let clientHeight = document.body.clientHeight\r\n      let clientY = touch.clientY\r\n      if (clientY >= clientHeight * 0.1 && clientY <= clientHeight - 200) {\r\n        that.mainListStyle['--top'] = clientY + 'px'\r\n        that.mainListStyle['--height'] = clientHeight - clientY + 'px'\r\n      }\r\n    })\r\n    elem.addEventListener('touchend', (e) => {\r\n      let evt = e || window.event\r\n      let touch = evt.changedTouches[0]\r\n      let clientHeight = document.body.clientHeight\r\n      let clientY = touch.clientY\r\n      if (clientY >= clientHeight * 0.5 && clientY <= clientHeight - 200) {\r\n        that.mainListStyle['--top'] = clientHeight - 200 + 'px'\r\n        that.mainListStyle['--height'] = 200 + 'px'\r\n      } else if (clientY < clientHeight * 0.5) {\r\n        that.mainListStyle['--top'] = '77px'\r\n        that.mainListStyle['--height'] = clientHeight + 'px'\r\n      }\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n  },\r\n  methods: {\r\n    closePopup_pressure() {\r\n      this.$emit(\"closePopup_pressure\");\r\n    },\r\n    changeFunctionHistoryData(item) {\r\n      // 当前功能点id\r\n      this.functionId = item.id;\r\n      this.functionName = item.name;\r\n      this.yAxisUnit = item.desc;\r\n      this.historyData();\r\n      this.$forceUpdate();\r\n    },\r\n    // tab切换回调\r\n    tabClick(name, title) {\r\n      this.timeValue = name\r\n      this.historyData();\r\n    },\r\n    async historyData() {\r\n      // 压力监测面板loading开启\r\n      Toast.loading({\r\n        message: '加载中...',\r\n        forbidClick: true,\r\n      })\r\n      // 24h 7day\r\n      let params = {\r\n        start:\r\n          this.timeValue === \"24小时\"\r\n            ? new Date().getTime() - 1000 * 60 * 60 * 24\r\n            : new Date().getTime() - 1000 * 60 * 60 * 24 * 7,\r\n        end: new Date().getTime() - 1000 * 60,\r\n        index: this.functionId,\r\n        iotId: this.nowPressureID,\r\n      };\r\n      let res = await getHistoryData(params);\r\n      // 压力监测面板loading关闭\r\n      this.loading = true;\r\n      // console.log(\"设备历史数据\", res.data);\r\n      if (res?.data && res?.data.length > 0) {\r\n        this.timeDataArray = res.data;\r\n        // 图表接入历史数据\r\n        this.ChartDataAdd();\r\n      } else {\r\n        this.timeDataArray = [];\r\n      }\r\n    },\r\n     // 初始化图表\r\n    initChartData() {\r\n      if (\r\n        this.myChartData != null &&\r\n        this.myChartData != \"\" &&\r\n        this.myChartData != undefined\r\n      ) {\r\n        this.myChartData.dispose();\r\n      }\r\n      let chartDom = document.getElementById(\"historyDataChart\");\r\n      this.myChartData = echarts.init(chartDom);\r\n      let option = _cloneDeep(this.chartOptionSelf);\r\n      option && this.myChartData.setOption(option, true);\r\n    },\r\n    // 图表接入历史数据\r\n    ChartDataAdd() {\r\n      this.$nextTick(() => {\r\n        this.initChartData();\r\n      });\r\n      // 图表数据和最高低、平均值置空\r\n      this.timeT=[]\r\n      this.chartOptionSelf.xAxis[0].data = [];\r\n      this.chartOptionSelf.series[0].data = [];\r\n      this.chartOptionSelf.series[1].data = [];\r\n      this.chartOptionSelf.series[2].data = [];\r\n      this.maxMpa = 0;\r\n      this.minMpa = 0;\r\n      this.averageMpa = 0;\r\n      // console.log(\"图表数据\", this.timeDataArray);\r\n      // 如果时间数据为空就退出\r\n      if (this.timeDataArray.length === 0) return;\r\n      // 数据顺序调换\r\n      let selfTimeDataReverse = _cloneDeep(this.timeDataArray);\r\n      selfTimeDataReverse = selfTimeDataReverse.reverse();\r\n\r\n      // 最高值\r\n      this.maxMpa = parseFloat(selfTimeDataReverse[0].value);\r\n      // 最低值\r\n      this.minMpa = parseFloat(selfTimeDataReverse[0].value);\r\n      // 总值\r\n      let totalValue = 0;\r\n\r\n      selfTimeDataReverse.forEach((item) => {\r\n        totalValue += parseFloat(item.value);\r\n        this.maxMpa =\r\n          parseFloat(this.maxMpa) < parseFloat(item.value)\r\n            ? parseFloat(item.value)\r\n            : parseFloat(this.maxMpa);\r\n        this.minMpa =\r\n          parseFloat(this.minMpa) > parseFloat(item.value)\r\n            ? parseFloat(item.value)\r\n            : parseFloat(this.minMpa);\r\n        let timer = timeFormat.transDate(item.time, 1).slice(5);\r\n        this.timeT.push(timer)\r\n        timer = timer.split(\" \");\r\n        timer = timer.reverse();\r\n        timer = timer.join(\"\");\r\n        // this.chartOptionSelf.xAxis.data.push(timer.format(\"YYYY-MM-DD HH:mm:ss\"));\r\n\r\n        // 图表X轴数据赋值\r\n        this.chartOptionSelf.xAxis[0].data.push(timer);\r\n\r\n        // 图表历史数据赋值，蓝线\r\n        // 压力值需要单独处理\r\n        // if (this.functionId == \"36865\") {\r\n        //   this.chartOptionSelf.series[1].data.push(\r\n        //     (item.value / 1000000).toFixed(3)\r\n        //   );\r\n        // } else {\r\n        //   this.chartOptionSelf.series[1].data.push(item.value);\r\n        // }\r\n        this.chartOptionSelf.series[1].data.push(item.value);        \r\n        this.chartOptionSelf.series[1].name = this.functionName;\r\n      });\r\n      // 图表y轴动态赋值\r\n      this.chartOptionSelf.yAxis[0] = {\r\n        name: this.yAxisUnit,\r\n        type: \"value\",\r\n      };\r\n      selfTimeDataReverse.forEach((item) => {\r\n        if (this.functionId == \"36865\") {\r\n          this.chartOptionSelf.series[0].data.push(\r\n            (this.maxMpa / 1000000).toFixed(3)\r\n          );\r\n          // 图表最小值数据赋值，红线\r\n          this.chartOptionSelf.series[2].data.push(\r\n            (this.minMpa / 1000000).toFixed(3)\r\n          );\r\n        } else {\r\n          this.chartOptionSelf.series[0].data.push(this.maxMpa);\r\n          // 图表最小值数据赋值，红线\r\n          this.chartOptionSelf.series[2].data.push(this.minMpa);\r\n        }\r\n      });\r\n      // 平均值\r\n      this.averageMpa =\r\n        totalValue == 0\r\n          ? 0\r\n          : (totalValue / selfTimeDataReverse.length).toFixed(3);\r\n      this.tableData = {time:this.timeT, value:this.chartOptionSelf.series[1].data}\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.arrow-up {\r\n  position: fixed;\r\n  top: var(--top);\r\n  width: 100%;\r\n  height: var(--height);\r\n  // transition: 0.6s;\r\n  background: var(--background);\r\n}\r\n.line-c {\r\n  // position: absolute;\r\n  // bottom: 0;\r\n  // left: 0;\r\n  width: calc(100% - 60px);\r\n  height: calc(100% - constant(safe-area-inset-bottom));\r\n  height: calc(100% - env(safe-area-inset-bottom));\r\n  // height: 100%;\r\n  margin: 0 30px;\r\n}\r\n.pic {\r\n  background: linear-gradient(180deg, #DFEDFF 0%, #EDF6FF 44%, rgba(243,248,255,0.81) 81%, rgba(255,255,255,0) 100%);\r\n}\r\n.beat {\r\n  width: 100%;\r\n  height: 88px;\r\n  line-height: 88px;\r\n  margin-bottom: 30px;\r\n  font-size: 42px;\r\n  transition: 1s;\r\n}\r\n.PressureMonitorDetail {\r\n  width: calc(100% - 60px);\r\n  height: 100%;\r\n  padding: 30px;\r\n  background: #FFFFFF;\r\n  box-shadow: 0px -6px 12px 0px rgba(104,115,127,0.1);\r\n  border-radius: 12px;\r\n  .close {\r\n    height: 8px;\r\n    position: absolute;\r\n    top: -40px;\r\n    left: 50%;\r\n    transform: translate(-50%, 0);\r\n  }\r\n  .content {\r\n    width: 100%;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 30px;\r\n\r\n    .topLeft {\r\n      font-size: 36px;\r\n      font-family: PingFangSC-Semibold, PingFang SC;\r\n      font-weight: 600;\r\n      color: #191919;\r\n      display: flex;\r\n      width: 90%;\r\n    }\r\n\r\n    .topRight {\r\n      display: flex;\r\n      justify-content: space-around;\r\n      cursor: pointer;\r\n      align-items: center;\r\n      font-size: 36px;\r\n      img {\r\n        width: 17px;\r\n        height: 17px;\r\n      }\r\n    }\r\n  }\r\n  .centerSide {\r\n    display: -webkit-box;\r\n    width: 100%;\r\n    overflow: scroll;\r\n    .device {\r\n      width: 280px;\r\n      height: 160px;\r\n      border: 1px solid transparent;\r\n      margin-right: 30px;\r\n      background: rgba(27,103,216,0.05);\r\n      border-radius: 16px;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      flex-direction: column;\r\n      font-size: 28px;\r\n      font-family: PingFangSC-Regular, PingFang SC;\r\n      font-weight: 400;\r\n      color: #555555;\r\n      .value {\r\n        height: 46px;\r\n        font-size: 38px;\r\n        font-family: Helvetica-Bold, Helvetica;\r\n        font-weight: bold;\r\n        color: #1B67D8;\r\n        line-height: 46px;\r\n      }\r\n      .redNumber {\r\n        height: 46px;\r\n        font-size: 38px;\r\n        font-family: Helvetica-Bold, Helvetica;\r\n        font-weight: bold;\r\n        line-height: 46px;\r\n        color: #f46263;\r\n      }\r\n    }\r\n    .normalBgc {\r\n      background: rgba(27,103,216,0.1);\r\n      border: 1px solid #1B67D8;\r\n    }\r\n  }\r\n  .ea {\r\n    width: 100%;\r\n    .change-true {\r\n      position: absolute;\r\n      right: 60px;\r\n      height: 50px;\r\n      width: 50px;\r\n      z-index: 1000;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      img {\r\n        height: 35px;\r\n      }\r\n    }\r\n    .ta-b {\r\n      width: 280px;\r\n      height: 446px;\r\n      z-index: 1000;\r\n      overflow-y: scroll;\r\n      padding: 20px;\r\n      background: #F1F3F6;\r\n      border-radius: 16px;\r\n      position: absolute;\r\n      right: 60px;\r\n      .change {\r\n        display: flex;\r\n        justify-content: center;\r\n        width: 100%;\r\n        height: 10%;\r\n        margin-bottom: 10px;\r\n        img {\r\n          height: 33px;\r\n        }\r\n      }\r\n      .con {\r\n        display: flex;\r\n        flex-direction: row;\r\n        width: 100%;\r\n        height: 90%;\r\n      }\r\n      .v{\r\n        width: 70%;\r\n        height: 100%;\r\n        font-size: 24px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #555555;\r\n        line-height: 50px;\r\n      }\r\n      .va {\r\n        width: 30%;\r\n        height: 100%;\r\n        font-size: 24px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #555555;\r\n        line-height: 50px;\r\n      }\r\n    }\r\n    /deep/ .fm-tab {\r\n      font-size: 28px;\r\n      font-family: PingFangSC-Regular, PingFang SC;\r\n      font-weight: 400;\r\n      color: #555555;\r\n    }\r\n    /deep/ .fm-tab--active {\r\n      font-size: 28px;\r\n      font-family: PingFangSC-Regular, PingFang SC;\r\n      font-weight: 400;\r\n      color: #1B67D8;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}